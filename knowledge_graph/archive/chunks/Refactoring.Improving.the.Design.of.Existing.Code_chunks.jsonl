{"text": "Many\u00a0of\u00a0the\u00a0designations\u00a0used\u00a0by\u00a0manufacturers\u00a0and\u00a0sellers\u00a0to\u00a0distinguish\u00a0their: products\u00a0are\u00a0claimed\u00a0as\u00a0trademarks. Where\u00a0those\u00a0designations\u00a0appear\u00a0in\u00a0this\u00a0book,\u00a0and\nthe\u00a0publisher\u00a0was\u00a0aware\u00a0of\u00a0a\u00a0trademark\u00a0claim,\u00a0the\u00a0designations\u00a0have\u00a0been\u00a0printed\u00a0with\ninitial\u00a0capital\u00a0letters\u00a0or\u00a0in\u00a0all\u00a0capitals. The\u00a0author\u00a0and\u00a0publisher\u00a0have\u00a0taken\u00a0care\u00a0in\u00a0the\u00a0preparation\u00a0of\u00a0this\u00a0book,\u00a0but\u00a0make\u00a0no\nexpressed\u00a0or\u00a0implied\u00a0warranty\u00a0of\u00a0any\u00a0kind\u00a0and\u00a0assume\u00a0no\u00a0responsibility\u00a0for\u00a0errors\u00a0or\nomissions. No\u00a0liability\u00a0is\u00a0assumed\u00a0for\u00a0incidental\u00a0or\u00a0consequential\u00a0damages\u00a0in\nconnection\u00a0with\u00a0or\u00a0arising\u00a0out\u00a0of\u00a0the\u00a0use\u00a0of\u00a0the\u00a0information\u00a0or\u00a0programs\u00a0contained\nherein. For\u00a0information\u00a0about\u00a0buying\u00a0this\u00a0title\u00a0in\u00a0bulk\u00a0quantities,\u00a0or\u00a0for\u00a0special\u00a0sales\nopportunities\u00a0(which\u00a0may\u00a0include\u00a0electronic\u00a0versions\u037e\u00a0custom\u00a0cover\u00a0designs\u037e\u00a0and\ncontent\u00a0particular\u00a0to\u00a0your\u00a0business,\u00a0training\u00a0goals,\u00a0marketing\u00a0focus,\u00a0or\u00a0branding\ninterests),\u00a0please\u00a0contact\u00a0our\u00a0corporate\u00a0sales\u00a0department\u00a0at\u00a0corpsales@pearsoned.com\nor\u00a0(800)\u00a0382\u20133419. For\u00a0government\u00a0sales\u00a0inquiries,\u00a0please\u00a0contact\u00a0governmentsales@pearsoned.com. For\u00a0questions\u00a0about\u00a0sales\u00a0outside\u00a0the\u00a0U.S.,\u00a0please\u00a0contact\u00a0intlcs@pearson.com. Visit\u00a0us\u00a0on\u00a0the\u00a0Web:\u00a0informit.com/aw\nLibrary\u00a0of\u00a0Congress\u00a0Control\u00a0Number:\u00a02018950015\nCopyright\u00a0\u00a9\u00a02019\u00a0Pearson\u00a0Education,\u00a0Inc.\nCover\u00a0photo:\u00a0Waldo\u00adHancock\u00a0Bridge\u00a0&\u00a0Penobscot\u00a0Narrows\u00a0Bridge\u00a0by\u00a0Martin\u00a0Fowler\nLightbulb\u00a0graphic:\u00a0Irina\u00a0Adamovich/Shutterstock\nAll\u00a0rights\u00a0reserved.\u00a0Printed\u00a0in\u00a0the\u00a0United\u00a0States\u00a0of\u00a0America. This\u00a0publication\u00a0is\nprotected\u00a0by\u00a0copyright,\u00a0and\u00a0permission\u00a0must\u00a0be\u00a0obtained\u00a0from\u00a0the\u00a0publisher\u00a0prior\u00a0to\nany\u00a0prohibited\u00a0reproduction,\u00a0storage\u00a0in\u00a0a\u00a0retrieval\u00a0system,\u00a0or\u00a0transmission\u00a0in\u00a0any\u00a0form\nor\u00a0by\u00a0any\u00a0means,\u00a0electronic,\u00a0mechanical,\u00a0photocopying,\u00a0recording,\u00a0or\u00a0likewise. For\nPlaylists\nHistory\nTopics\nTutorials\nOffers & Deals\nHighlights\nSettings\nSupport\nSign Out\n \n  \n \n  \n \n \n \n \n \n \ni\nwww.EBooksWorld.ir", "domains": ["Design Patterns"], "source": "Refactoring.Improving.the.Design.of.Existing.Code.pdf", "section": "Page 3", "position": 3, "chunk_type": "semantic", "token_estimate": 262}
{"text": "and\u00a0still\u00a0current.: Image\u00a0a\u00a0company\u00a0of\u00a0theatrical\u00a0players\u00a0who\u00a0go\u00a0out\u00a0to\u00a0various\u00a0events\u00a0performing\u00a0plays. Typically,\u00a0a\u00a0customer\u00a0will\u00a0request\u00a0a\u00a0few\u00a0plays\u00a0and\u00a0the\u00a0company\u00a0charges\u00a0them\u00a0based\u00a0on\nthe\u00a0size\u00a0of\u00a0the\u00a0audience\u00a0and\u00a0the\u00a0kind\u00a0of\u00a0play\u00a0they\u00a0perform. There\u00a0are\u00a0currently\u00a0two\nkinds\u00a0of\u00a0plays\u00a0that\u00a0the\u00a0company\u00a0performs:\u00a0tragedies\u00a0and\u00a0comedies. As\u00a0well\u00a0as\u00a0providing\na\u00a0bill\u00a0for\u00a0the\u00a0performance,\u00a0the\u00a0company\u00a0gives\u00a0its\u00a0customers\u00a0\u201cvolume\u00a0credits\u201d\u00a0which\u00a0they\ncan\u00a0use\u00a0for\u00a0discounts\u00a0on\u00a0future\u00a0performances\u2014think\u00a0of\u00a0it\u00a0as\u00a0a\u00a0customer\u00a0loyalty\nmechanism. The\u00a0performers\u00a0store\u00a0data\u00a0about\u00a0their\u00a0plays\u00a0in\u00a0a\u00a0simple\u00a0JSON\u00a0file\u00a0that\u00a0looks\u00a0something\nlike\u00a0this:\nplays.json\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\n{\n\u00a0\u00a0\"hamlet\":\u00a0{\"name\":\u00a0\"Hamlet\",\u00a0\"type\":\u00a0\"tragedy\"},\n\u00a0\u00a0\"as\u00adlike\":\u00a0{\"name\":\u00a0\"As\u00a0You\u00a0Like\u00a0It\",\u00a0\"type\":\u00a0\"comedy\"},\n\u00a0\u00a0\"othello\":\u00a0{\"name\":\u00a0\"Othello\",\u00a0\"type\":\u00a0\"tragedy\"}\n}\nThe\u00a0data\u00a0for\u00a0their\u00a0bills\u00a0also\u00a0comes\u00a0in\u00a0a\u00a0JSON\u00a0file:\ninvoices.json\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\n[\n\u00a0\u00a0{\n\u00a0\u00a0\u00a0\u00a0\"customer\":\u00a0\"BigCo\",\n\u00a0\u00a0\u00a0\u00a0\"performances\":\u00a0[\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0{\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\"playID\":\u00a0\"hamlet\",\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\"audience\":\u00a055\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0},\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0{\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\"playID\":\u00a0\"as\u00adlike\",\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\"audience\":\u00a035\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0},\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0{\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\"playID\":\u00a0\"othello\",\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\"audience\":\u00a040\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0}\nwww.EBooksWorld.ir", "domains": ["Software Quality Attributes"], "source": "Refactoring.Improving.the.Design.of.Existing.Code.pdf", "section": "Page 6", "position": 6, "chunk_type": "semantic", "token_estimate": 177}
{"text": "Whenever\u00a0I\u00a0do\u00a0refactoring,\u00a0the\u00a0first\u00a0step\u00a0is\u00a0always\u00a0the\u00a0same.\u00a0I\u00a0need\u00a0to\u00a0ensure\u00a0I\u00a0have\u00a0a: solid\u00a0set\u00a0of\u00a0tests\u00a0for\u00a0that\u00a0section\u00a0of\u00a0code. The\u00a0tests\u00a0are\u00a0essential\u00a0because\u00a0even\u00a0though\u00a0I\nwill\u00a0follow\u00a0refactorings\u00a0structured\u00a0to\u00a0avoid\u00a0most\u00a0of\u00a0the\u00a0opportunities\u00a0for\u00a0introducing\nbugs,\u00a0I\u2019m\u00a0still\u00a0human\u00a0and\u00a0still\u00a0make\u00a0mistakes. The\u00a0larger\u00a0a\u00a0program,\u00a0the\u00a0more\u00a0likely\u00a0it\nis\u00a0that\u00a0my\u00a0changes\u00a0will\u00a0cause\u00a0something\u00a0to\u00a0break\u00a0inadvertently\u2014in\u00a0the\u00a0digital\u00a0age,\nfrailty\u2019s\u00a0name\u00a0is\u00a0software. Since\u00a0the\u00a0statement\u00a0returns\u00a0a\u00a0string,\u00a0what\u00a0I\u00a0do\u00a0is\u00a0create\u00a0a\u00a0few\u00a0invoices,\u00a0give\u00a0each\ninvoice\u00a0a\u00a0few\u00a0performances\u00a0of\u00a0various\u00a0kinds\u00a0of\u00a0plays,\u00a0and\u00a0generate\u00a0the\u00a0statement\nstrings. I\u00a0then\u00a0do\u00a0a\u00a0string\u00a0comparison\u00a0between\u00a0the\u00a0new\u00a0string\u00a0and\u00a0some\u00a0reference\nwww.EBooksWorld.ir", "domains": ["Design Patterns", "Design Principles", "Software Quality Attributes"], "source": "Refactoring.Improving.the.Design.of.Existing.Code.pdf", "section": "Page 9", "position": 9, "chunk_type": "semantic", "token_estimate": 124}
{"text": "strings\u00a0that\u00a0I\u00a0have\u00a0hand\u00adchecked.\u00a0I\u00a0set\u00a0up\u00a0all\u00a0of\u00a0these\u00a0tests\u00a0using\u00a0a\u00a0testing\u00a0framework\u00a0so: I\u00a0can\u00a0run\u00a0them\u00a0with\u00a0just\u00a0a\u00a0simple\u00a0keystroke\u00a0in\u00a0my\u00a0development\u00a0environment. The\u00a0tests\ntake\u00a0only\u00a0a\u00a0few\u00a0seconds\u00a0to\u00a0run,\u00a0and\u00a0as\u00a0you\u00a0will\u00a0see,\u00a0I\u00a0run\u00a0them\u00a0often. An\u00a0important\u00a0part\u00a0of\u00a0the\u00a0tests\u00a0is\u00a0the\u00a0way\u00a0they\u00a0report\u00a0their\u00a0results. They\u00a0either\u00a0go\u00a0green,\nmeaning\u00a0that\u00a0all\u00a0the\u00a0strings\u00a0are\u00a0identical\u00a0to\u00a0the\u00a0reference\u00a0strings,\u00a0or\u00a0red,\u00a0showing\u00a0a\u00a0list\nof\u00a0failures\u2014the\u00a0lines\u00a0that\u00a0turned\u00a0out\u00a0differently.\u00a0The\u00a0tests\u00a0are\u00a0thus\u00a0self\u00adchecking. It\u00a0is\nvital\u00a0to\u00a0make\u00a0tests\u00a0self\u00adchecking. If\u00a0I\u00a0don\u2019t,\u00a0I\u2019d\u00a0end\u00a0up\u00a0spending\u00a0time\u00a0hand\u00adchecking\nvalues\u00a0from\u00a0the\u00a0test\u00a0against\u00a0values\u00a0on\u00a0a\u00a0desk\u00a0pad,\u00a0and\u00a0that\u00a0would\u00a0slow\u00a0me\u00a0down. Modern\u00a0testing\u00a0frameworks\u00a0provide\u00a0all\u00a0the\u00a0features\u00a0needed\u00a0to\u00a0write\u00a0and\u00a0run\u00a0self\u00ad\nchecking\u00a0tests. Before\u00a0you\u00a0start\u00a0refactoring,\u00a0make\u00a0sure\u00a0you\u00a0have\u00a0a\u00a0solid\u00a0suite\u00a0of\u00a0tests. These\ntests\u00a0must\u00a0be\u00a0self\u00adchecking. As\u00a0I\u00a0do\u00a0the\u00a0refactoring,\u00a0I\u2019ll\u00a0lean\u00a0on\u00a0the\u00a0tests. I\u00a0think\u00a0of\u00a0them\u00a0as\u00a0a\u00a0bug\u00a0detector\u00a0to\u00a0protect\nme\u00a0against\u00a0my\u00a0own\u00a0mistakes. By\u00a0writing\u00a0what\u00a0I\u00a0want\u00a0twice,\u00a0in\u00a0the\u00a0code\u00a0and\u00a0in\u00a0the\u00a0test,\u00a0I\nhave\u00a0to\u00a0make\u00a0the\u00a0mistake\u00a0consistently\u00a0in\u00a0both\u00a0places\u00a0to\u00a0fool\u00a0the\u00a0detector. By\u00a0double\u00ad\nchecking\u00a0my\u00a0work,\u00a0I\u00a0reduce\u00a0the\u00a0chance\u00a0of\u00a0doing\u00a0something\u00a0wrong. Although\u00a0it\u00a0takes\ntime\u00a0to\u00a0build\u00a0the\u00a0tests,\u00a0I\u00a0end\u00a0up\u00a0saving\u00a0that\u00a0time,\u00a0with\u00a0considerable\u00a0interest,\u00a0by\nspending\u00a0less\u00a0time\u00a0debugging. This\u00a0is\u00a0such\u00a0an\u00a0important\u00a0part\u00a0of\u00a0refactoring\u00a0that\u00a0I\ndevote\u00a0a\u00a0full\u00a0chapter\u00a0to\u00a0it\u00a0(Building\u00a0Tests\u00a0(85)).", "domains": ["Design Principles"], "source": "Refactoring.Improving.the.Design.of.Existing.Code.pdf", "section": "Page 10", "position": 10, "chunk_type": "semantic", "token_estimate": 264}
{"text": "switch\u00a0(play.type)\u00a0{: e)\u00a0{\n\u00a0\u00a0\u00a0\u00a0case\u00a0\"tragedy\":\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0thisAmount\u00a0=\u00a040000\u037e\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0if\u00a0(perf.audience\u00a0>\u00a030)\u00a0{\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0thisAmount\u00a0+=\u00a01000\u00a0*\u00a0(perf.audience\u00a0\u00ad\u00a030)\u037e\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0}\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0break\u037e\n\u00a0\u00a0\u00a0\u00a0case\u00a0\"comedy\":\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0thisAmount\u00a0=\u00a030000\u037e\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0if\u00a0(perf.audience\u00a0>\u00a020)\u00a0{\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0thisAmount\u00a0+=\u00a010000\u00a0+\u00a0500\u00a0*\u00a0(perf.audience\u00a0\u00ad\u00a020)\u037e\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0}\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0thisAmount\u00a0+=\u00a0300\u00a0*\u00a0perf.audience\u037e\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0break\u037e\n\u00a0\u00a0\u00a0\u00a0default:\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0throw\u00a0new\u00a0Error(`unknown\u00a0type:\u00a0${play.type}`)\u037e\n\u00a0\u00a0\u00a0\u00a0}\n\u00a0\u00a0\u00a0\u00a0//\u00a0add\u00a0volume\u00a0credits\n\u00a0\u00a0\u00a0\u00a0volumeCredits\u00a0+=\u00a0Math.max(perf.audience\u00a0\u00ad\u00a030,\u00a00)\u037e\n\u00a0\u00a0\u00a0\u00a0//\u00a0add\u00a0extra\u00a0credit\u00a0for\u00a0every\u00a0ten\u00a0comedy\u00a0attendees\n\u00a0\u00a0\u00a0\u00a0if\u00a0(\"comedy\"\u00a0===\u00a0play.type)\u00a0volumeCredits\u00a0+=\u00a0Math.floor(perf.audience\u00a0/\u00a05)\u037e\n\u00a0\u00a0\u00a0\u00a0//\u00a0print\u00a0line\u00a0for\u00a0this\u00a0order\n\u00a0\u00a0\u00a0\u00a0result\u00a0+=\u00a0`\u00a0\u00a0${play.name}:\u00a0${format(thisAmount/100)}\u00a0(${perf.audience}\u00a0seats\n\u00a0\u00a0\u00a0\u00a0totalAmount\u00a0+=\u00a0thisAmount\u037e\n\u00a0\u00a0}\n\u00a0\u00a0result\u00a0+=\u00a0`Amount\u00a0owed\u00a0is\u00a0${format(totalAmount/100)}\\n`\u037e\n\u00a0\u00a0result\u00a0+=\u00a0`You\u00a0earned\u00a0${volumeCredits}\u00a0credits\\n`\u037e\n\u00a0\u00a0return\u00a0result\u037e\n}\nAs\u00a0I\u00a0look\u00a0at\u00a0this\u00a0chunk,\u00a0I\u00a0conclude\u00a0that\u00a0it\u2019s\u00a0calculating\u00a0the\u00a0charge\u00a0for\u00a0one\u00a0performance. That\u00a0conclusion\u00a0is\u00a0a\u00a0piece\u00a0of\u00a0insight\u00a0about\u00a0the\u00a0code. But\u00a0as\u00a0Ward\u00a0Cunningham\u00a0puts\u00a0it,\nthis\u00a0understanding\u00a0is\u00a0in\u00a0my\u00a0head\u2014a\u00a0notoriously\u00a0volatile\u00a0form\u00a0of\u00a0storage. I\u00a0need\u00a0to\npersist\u00a0it\u00a0by\u00a0moving\u00a0it\u00a0from\u00a0my\u00a0head\u00a0back\u00a0into\u00a0the\u00a0code\u00a0itself. That\u00a0way,\u00a0should\u00a0I\u00a0come\nback\u00a0to\u00a0it\u00a0later,\u00a0the\u00a0code\u00a0will\u00a0tell\u00a0me\u00a0what\u00a0it\u2019s\u00a0doing\u2014I\u00a0don\u2019t\u00a0have\u00a0to\u00a0figure\u00a0it\u00a0out\u00a0again. The\u00a0way\u00a0to\u00a0put\u00a0that\u00a0understanding\u00a0into\u00a0code\u00a0is\u00a0to\u00a0turn\u00a0that\u00a0chunk\u00a0of\u00a0code\u00a0into\u00a0its\u00a0own\nfunction,\u00a0naming\u00a0it\u00a0after\u00a0what\u00a0it\u00a0does\u2014something\u00a0like\u00a0amountFor(aPerformance). When\u00a0I\u00a0want\u00a0to\u00a0turn\u00a0a\u00a0chunk\u00a0of\u00a0code\u00a0into\u00a0a\u00a0function\u00a0like\u00a0this,\u00a0I\u00a0have\u00a0a\u00a0procedure\u00a0for\ndoing\u00a0it\u00a0that\u00a0minimizes\u00a0my\u00a0chances\u00a0of\u00a0getting\u00a0it\u00a0wrong. I\u00a0wrote\u00a0down\u00a0this\u00a0procedure\nand,\u00a0to\u00a0make\u00a0it\u00a0easy\u00a0to\u00a0reference,\u00a0named\u00a0it\u00a0Extract\u00a0Function\u00a0(106). First,\u00a0I\u00a0need\u00a0to\u00a0look\u00a0in\u00a0the\u00a0fragment\u00a0for\u00a0any\u00a0variables\u00a0that\u00a0will\u00a0no\u00a0longer\u00a0be\u00a0in\u00a0scope\nonce\u00a0I\u2019ve\u00a0extracted\u00a0the\u00a0code\u00a0into\u00a0its\u00a0own\u00a0function. In\u00a0this\u00a0case,\u00a0I\u00a0have\u00a0three:\u00a0perf,\nwww.EBooksWorld.ir", "domains": ["Software Quality Attributes"], "source": "Refactoring.Improving.the.Design.of.Existing.Code.pdf", "section": "Page 11", "position": 11, "chunk_type": "semantic", "token_estimate": 308}
{"text": "In\u00a0this\u00a0case\u00a0the\u00a0tests\u00a0passed,\u00a0so\u00a0my\u00a0next\u00a0step\u00a0is\u00a0to\u00a0commit\u00a0the\u00a0change\u00a0to\u00a0my\u00a0local: version\u00a0control\u00a0system. I\u00a0use\u00a0a\u00a0version\u00a0control\u00a0system,\u00a0such\u00a0as\u00a0git\u00a0or\u00a0mercurial,\u00a0that\nallows\u00a0me\u00a0to\u00a0make\u00a0private\u00a0commits. I\u00a0commit\u00a0after\u00a0each\u00a0successful\u00a0refactoring,\u00a0so\u00a0I\u00a0can\neasily\u00a0get\u00a0back\u00a0to\u00a0a\u00a0working\u00a0state\u00a0should\u00a0I\u00a0mess\u00a0up\u00a0later. I\u00a0then\u00a0squash\u00a0changes\u00a0into\nmore\u00a0significant\u00a0commits\u00a0before\u00a0I\u00a0push\u00a0the\u00a0changes\u00a0to\u00a0a\u00a0shared\u00a0repository. Extract\u00a0Function\u00a0(106)\u00a0is\u00a0a\u00a0common\u00a0refactoring\u00a0to\u00a0automate. If\u00a0I\u00a0was\u00a0programming\u00a0in\nJava,\u00a0I\u00a0would\u00a0have\u00a0instinctively\u00a0reached\u00a0for\u00a0the\u00a0key\u00a0sequence\u00a0for\u00a0my\u00a0IDE\u00a0to\u00a0perform\nthis\u00a0refactoring. As\u00a0I\u00a0write\u00a0this,\u00a0there\u00a0is\u00a0no\u00a0such\u00a0robust\u00a0support\u00a0for\u00a0this\u00a0refactoring\u00a0in\nJavaScript\u00a0tools,\u00a0so\u00a0I\u00a0have\u00a0to\u00a0do\u00a0this\u00a0manually. It\u2019s\u00a0not\u00a0hard,\u00a0although\u00a0I\u00a0have\u00a0to\u00a0be\ncareful\u00a0with\u00a0those\u00a0locally\u00a0scoped\u00a0variables. Once\u00a0I\u2019ve\u00a0used\u00a0Extract\u00a0Function\u00a0(106),\u00a0I\u00a0take\u00a0a\u00a0look\u00a0at\u00a0what\u00a0I\u2019ve\u00a0extracted\u00a0to\u00a0see\u00a0if\u00a0there\nare\u00a0any\u00a0quick\u00a0and\u00a0easy\u00a0things\u00a0I\u00a0can\u00a0do\u00a0to\u00a0clarify\u00a0the\u00a0extracted\u00a0function. The\u00a0first\u00a0thing\u00a0I\ndo\u00a0is\u00a0rename\u00a0some\u00a0of\u00a0the\u00a0variables\u00a0to\u00a0make\u00a0them\u00a0clearer,\u00a0such\u00a0as\u00a0changing\nthisAmount\u00a0to\u00a0result. function\u00a0statement\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0amountFor(perf,\u00a0play)\u00a0{\n\u00a0\u00a0let\u00a0result\u00a0=\u00a00\u037e\n\u00a0\u00a0switch\u00a0(play.type)\u00a0{\n\u00a0\u00a0case\u00a0\"tragedy\":\n\u00a0\u00a0\u00a0\u00a0result\u00a0=\u00a040000\u037e\n\u00a0\u00a0\u00a0\u00a0if\u00a0(perf.audience\u00a0>\u00a030)\u00a0{\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0result\u00a0+=\u00a01000\u00a0*\u00a0(perf.audience\u00a0\u00ad\u00a030)\u037e\n\u00a0\u00a0\u00a0\u00a0}\n\u00a0\u00a0\u00a0\u00a0break\u037e\n\u00a0\u00a0case\u00a0\"comedy\":\n\u00a0\u00a0\u00a0\u00a0result\u00a0=\u00a030000\u037e\n\u00a0\u00a0\u00a0\u00a0if\u00a0(perf.audience\u00a0>\u00a020)\u00a0{\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0result\u00a0+=\u00a010000\u00a0+\u00a0500\u00a0*\u00a0(perf.audience\u00a0\u00ad\u00a020)\u037e\n\u00a0\u00a0\u00a0\u00a0}\n\u00a0\u00a0\u00a0\u00a0result\u00a0+=\u00a0300\u00a0*\u00a0perf.audience\u037e\n\u00a0\u00a0\u00a0\u00a0break\u037e\n\u00a0\u00a0default:\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0throw\u00a0new\u00a0Error(`unknown\u00a0type:\u00a0${play.type}`)\u037e\n\u00a0\u00a0}\n\u00a0\u00a0return\u00a0result\u037e\n}\nIt\u2019s\u00a0my\u00a0coding\u00a0standard\u00a0to\u00a0always\u00a0call\u00a0the\u00a0return\u00a0value\u00a0from\u00a0a\u00a0function\u00a0\u201cresult\u201d. That\nway\u00a0I\u00a0always\u00a0know\u00a0its\u00a0role.\u00a0Again,\u00a0I\u00a0compile,\u00a0test,\u00a0and\u00a0commit. Then\u00a0I\u00a0move\u00a0onto\u00a0the\nwww.EBooksWorld.ir", "domains": ["Design Patterns", "Domain-Driven Design"], "source": "Refactoring.Improving.the.Design.of.Existing.Code.pdf", "section": "Page 14", "position": 14, "chunk_type": "semantic", "token_estimate": 305}
{"text": "The\u00a0next\u00a0item\u00a0to\u00a0consider\u00a0for\u00a0renaming\u00a0is\u00a0the\u00a0play\u00a0parameter,\u00a0but\u00a0I\u00a0have\u00a0a\u00a0different: fate\u00a0for\u00a0that. Removing the play Variable\nAs\u00a0I\u00a0consider\u00a0the\u00a0parameters\u00a0to\u00a0amountFor,\u00a0I\u00a0look\u00a0to\u00a0see\u00a0where\u00a0they\u00a0come\u00a0from. aPerformance\u00a0comes\u00a0from\u00a0the\u00a0loop\u00a0variable,\u00a0so\u00a0naturally\u00a0changes\u00a0with\u00a0each\u00a0iteration\nthrough\u00a0the\u00a0loop. But\u00a0play\u00a0is\u00a0computed\u00a0from\u00a0the\u00a0performance,\u00a0so\u00a0there\u2019s\u00a0no\u00a0need\u00a0to\npass\u00a0it\u00a0in\u00a0as\u00a0a\u00a0parameter\u00a0at\u00a0all\u2014I\u00a0can\u00a0just\u00a0recalculate\u00a0it\u00a0within\u00a0amountFor. When\u00a0I\u2019m\nbreaking\u00a0down\u00a0a\u00a0long\u00a0function,\u00a0I\u00a0like\u00a0to\u00a0get\u00a0rid\u00a0of\u00a0variables\u00a0like\u00a0play,\u00a0because\ntemporary\u00a0variables\u00a0create\u00a0a\u00a0lot\u00a0of\u00a0locally\u00a0scoped\u00a0names\u00a0that\u00a0complicate\u00a0extractions. The\u00a0refactoring\u00a0I\u00a0will\u00a0use\u00a0here\u00a0is\u00a0Replace\u00a0Temp\u00a0with\u00a0Query\u00a0(178). I\u00a0begin\u00a0by\u00a0extracting\u00a0the\u00a0right\u00adhand\u00a0side\u00a0of\u00a0the\u00a0assignment\u00a0into\u00a0a\u00a0function. function\u00a0statement\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0playFor(aPerformance)\u00a0{\n\u00a0\u00a0return\u00a0plays[aPerformance.playID]\u037e\n}\ntop\u00a0level\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0statement\u00a0(invoice,\u00a0plays)\u00a0{\n\u00a0\u00a0let\u00a0totalAmount\u00a0=\u00a00\u037e\n\u00a0\u00a0let\u00a0volumeCredits\u00a0=\u00a00\u037e\n\u00a0\u00a0let\u00a0result\u00a0=\u00a0`Statement\u00a0for\u00a0${invoice.customer}\\n`\u037e\n\u00a0\u00a0const\u00a0format\u00a0=\u00a0new\u00a0Intl.NumberFormat(\"en\u00adUS\",\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0{\u00a0style:\u00a0\"currency\",\u00a0currency:\u00a0\"USD\",\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0minimumFractionDigits:\u00a02\u00a0}).format\u037e\n\u00a0\u00a0for\u00a0(let\u00a0perf\u00a0of\u00a0invoice.performances)\u00a0{\n\u00a0\u00a0\u00a0\u00a0const\u00a0play\u00a0=\u00a0playFor(perf)\u037e\n\u00a0\u00a0\u00a0\u00a0let\u00a0thisAmount\u00a0=\u00a0amountFor(perf,\u00a0play)\u037e\n\u00a0\u00a0\u00a0\u00a0//\u00a0add\u00a0volume\u00a0credits\n\u00a0\u00a0\u00a0\u00a0volumeCredits\u00a0+=\u00a0Math.max(perf.audience\u00a0\u00ad\u00a030,\u00a00)\u037e\n\u00a0\u00a0\u00a0\u00a0//\u00a0add\u00a0extra\u00a0credit\u00a0for\u00a0every\u00a0ten\u00a0comedy\u00a0attendees\n\u00a0\u00a0\u00a0\u00a0if\u00a0(\"comedy\"\u00a0===\u00a0play.type)\u00a0volumeCredits\u00a0+=\u00a0Math.floor(perf.audience\u00a0/\u00a05)\u037e\n\u00a0\u00a0\u00a0\u00a0//\u00a0print\u00a0line\u00a0for\u00a0this\u00a0order\n\u00a0\u00a0\u00a0\u00a0result\u00a0+=\u00a0`\u00a0\u00a0${play.name}:\u00a0${format(thisAmount/100)}\u00a0(${perf.audience}\u00a0seats\nwww.EBooksWorld.ir", "domains": ["Design Patterns", "Software Quality Attributes"], "source": "Refactoring.Improving.the.Design.of.Existing.Code.pdf", "section": "Page 16", "position": 16, "chunk_type": "semantic", "token_estimate": 244}
{"text": "function\u00a0statement\u2026: Click\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0amountFor(aPerformance,\u00a0play)\u00a0{\n\u00a0\u00a0let\u00a0result\u00a0=\u00a00\u037e\n\u00a0\u00a0switch\u00a0(playFor(aPerformance).type)\u00a0{\n\u00a0\u00a0case\u00a0\"tragedy\":\n\u00a0\u00a0\u00a0\u00a0result\u00a0=\u00a040000\u037e\n\u00a0\u00a0\u00a0\u00a0if\u00a0(aPerformance.audience\u00a0>\u00a030)\u00a0{\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0result\u00a0+=\u00a01000\u00a0*\u00a0(aPerformance.audience\u00a0\u00ad\u00a030)\u037e\n\u00a0\u00a0\u00a0\u00a0}\n\u00a0\u00a0\u00a0\u00a0break\u037e\n\u00a0\u00a0case\u00a0\"comedy\":\n\u00a0\u00a0\u00a0\u00a0result\u00a0=\u00a030000\u037e\n\u00a0\u00a0\u00a0\u00a0if\u00a0(aPerformance.audience\u00a0>\u00a020)\u00a0{\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0result\u00a0+=\u00a010000\u00a0+\u00a0500\u00a0*\u00a0(aPerformance.audience\u00a0\u00ad\u00a020)\u037e\n\u00a0\u00a0\u00a0\u00a0}\n\u00a0\u00a0\u00a0\u00a0result\u00a0+=\u00a0300\u00a0*\u00a0aPerformance.audience\u037e\n\u00a0\u00a0\u00a0\u00a0break\u037e\n\u00a0\u00a0default:\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0throw\u00a0new\u00a0Error(`unknown\u00a0type:\u00a0${playFor(aPerformance).type}`)\u037e\n\u00a0\u00a0}\n\u00a0\u00a0return\u00a0result\u037e\n}\nAnd\u00a0compile\u00adtest\u00adcommit\u00a0again. This\u00a0refactoring\u00a0alarms\u00a0some\u00a0programmers. Previously,\u00a0the\u00a0code\u00a0to\u00a0look\u00a0up\u00a0the\u00a0play\nwas\u00a0executed\u00a0once\u00a0in\u00a0each\u00a0loop\u00a0iteration\u037e\u00a0now,\u00a0it\u2019s\u00a0executed\u00a0thrice. I\u2019ll\u00a0talk\u00a0about\u00a0the\ninterplay\u00a0of\u00a0refactoring\u00a0and\u00a0performance\u00a0later,\u00a0but\u00a0for\u00a0the\u00a0moment\u00a0I\u2019ll\u00a0just\u00a0observe\u00a0that\nthis\u00a0change\u00a0is\u00a0unlikely\u00a0to\u00a0significantly\u00a0affect\u00a0performance,\u00a0and\u00a0even\u00a0if\u00a0it\u00a0were,\u00a0it\u00a0is\u00a0much\neasier\u00a0to\u00a0improve\u00a0the\u00a0performance\u00a0of\u00a0a\u00a0well\u00adfactored\u00a0code\u00a0base. The\u00a0great\u00a0benefit\u00a0of\u00a0removing\u00a0local\u00a0variables\u00a0is\u00a0that\u00a0it\u00a0makes\u00a0it\u00a0much\u00a0easier\u00a0to\u00a0do\nextractions,\u00a0since\u00a0there\u00a0is\u00a0less\u00a0local\u00a0scope\u00a0to\u00a0deal\u00a0with. Indeed,\u00a0usually\u00a0I\u2019ll\u00a0take\u00a0out\u00a0local\nvariables\u00a0before\u00a0I\u00a0do\u00a0any\u00a0extractions. Now\u00a0that\u00a0I\u2019m\u00a0done\u00a0with\u00a0the\u00a0arguments\u00a0to\u00a0amountFor,\u00a0I\u00a0look\u00a0back\u00a0at\u00a0where\u00a0it\u2019s\u00a0called. It\u2019s\u00a0being\u00a0used\u00a0to\u00a0set\u00a0a\u00a0temporary\u00a0variable\u00a0that\u2019s\u00a0not\u00a0updated\u00a0again,\u00a0so\u00a0I\u00a0apply\u00a0Inline\nVariable\u00a0(123). top\u00a0level\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nwww.EBooksWorld.ir", "domains": ["Design Patterns", "Software Quality Attributes"], "source": "Refactoring.Improving.the.Design.of.Existing.Code.pdf", "section": "Page 19", "position": 19, "chunk_type": "semantic", "token_estimate": 226}
{"text": "function\u00a0statement\u00a0(invoice,\u00a0plays)\u00a0{: let\u00a0totalAmount\u00a0=\u00a00\u037e\n\u00a0\u00a0let\u00a0volumeCredits\u00a0=\u00a00\u037e\n\u00a0\u00a0let\u00a0result\u00a0=\u00a0`Statement\u00a0for\u00a0${invoice.customer}\\n`\u037e\n\u00a0\u00a0const\u00a0format\u00a0=\u00a0new\u00a0Intl.NumberFormat(\"en\u00adUS\",\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0{\u00a0style:\u00a0\"currency\",\u00a0currency:\u00a0\"USD\",\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0minimumFractionDigits:\u00a02\u00a0}).format\u037e\n\u00a0\u00a0\u00a0\u00a0for\u00a0(let\u00a0perf\u00a0of\u00a0invoice.performances)\u00a0{\n\u00a0\u00a0\u00a0\u00a0//\u00a0add\u00a0volume\u00a0credits\n\u00a0\u00a0\u00a0\u00a0volumeCredits\u00a0+=\u00a0Math.max(perf.audience\u00a0\u00ad\u00a030,\u00a00)\u037e\n\u00a0\u00a0\u00a0\u00a0//\u00a0add\u00a0extra\u00a0credit\u00a0for\u00a0every\u00a0ten\u00a0comedy\u00a0attendees\n\u00a0\u00a0\u00a0\u00a0if\u00a0(\"comedy\"\u00a0===\u00a0playFor(perf).type)\u00a0volumeCredits\u00a0+=\u00a0Math.floor(perf.audien\n\u00a0\u00a0\u00a0\u00a0//\u00a0print\u00a0line\u00a0for\u00a0this\u00a0order\n\u00a0\u00a0\u00a0\u00a0result\u00a0+=\u00a0`\u00a0\u00a0${playFor(perf).name}:\u00a0${format(amountFor(perf)/100)}\u00a0(${perf.a\n\u00a0\u00a0\u00a0\u00a0totalAmount\u00a0+=\u00a0amountFor(perf)\u037e\n\u00a0\u00a0}\n\u00a0\u00a0result\u00a0+=\u00a0`Amount\u00a0owed\u00a0is\u00a0${format(totalAmount/100)}\\n`\u037e\n\u00a0\u00a0result\u00a0+=\u00a0`You\u00a0earned\u00a0${volumeCredits}\u00a0credits\\n`\u037e\n\u00a0\u00a0return\u00a0result\u037e\nExtracting Volume Credits\nHere\u2019s\u00a0the\u00a0current\u00a0state\u00a0of\u00a0the\u00a0statement\u00a0function\u00a0body:\ntop\u00a0level\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0statement\u00a0(invoice,\u00a0plays)\u00a0{\n\u00a0\u00a0let\u00a0totalAmount\u00a0=\u00a00\u037e\n\u00a0\u00a0let\u00a0volumeCredits\u00a0=\u00a00\u037e\n\u00a0\u00a0let\u00a0result\u00a0=\u00a0`Statement\u00a0for\u00a0${invoice.customer}\\n`\u037e\n\u00a0\u00a0const\u00a0format\u00a0=\u00a0new\u00a0Intl.NumberFormat(\"en\u00adUS\",\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0{\u00a0style:\u00a0\"currency\",\u00a0currency:\u00a0\"USD\",\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0minimumFractionDigits:\u00a02\u00a0}).format\u037e\n\u00a0\u00a0for\u00a0(let\u00a0perf\u00a0of\u00a0invoice.performances)\u00a0{\n\u00a0\u00a0\u00a0\u00a0//\u00a0add\u00a0volume\u00a0credits\n\u00a0\u00a0\u00a0\u00a0volumeCredits\u00a0+=\u00a0Math.max(perf.audience\u00a0\u00ad\u00a030,\u00a00)\u037e\n\u00a0\u00a0\u00a0\u00a0//\u00a0add\u00a0extra\u00a0credit\u00a0for\u00a0every\u00a0ten\u00a0comedy\u00a0attendees\n\u00a0\u00a0\u00a0\u00a0if\u00a0(\"comedy\"\u00a0===\u00a0playFor(perf).type)\u00a0volumeCredits\u00a0+=\u00a0Math.floor(perf.audien\n\u00a0\u00a0\u00a0\u00a0//\u00a0print\u00a0line\u00a0for\u00a0this\u00a0order\n\u00a0\u00a0\u00a0\u00a0result\u00a0+=\u00a0`\u00a0\u00a0${playFor(perf).name}:\u00a0${format(amountFor(perf)/100)}\u00a0(${perf.a\n\u00a0\u00a0\u00a0\u00a0totalAmount\u00a0+=\u00a0amountFor(perf)\u037e\n\u00a0\u00a0}\n\u00a0\u00a0result\u00a0+=\u00a0`Amount\u00a0owed\u00a0is\u00a0${format(totalAmount/100)}\\n`\u037e\nwww.EBooksWorld.ir", "domains": ["Design Patterns", "Software Quality Attributes"], "source": "Refactoring.Improving.the.Design.of.Existing.Code.pdf", "section": "Page 20", "position": 20, "chunk_type": "semantic", "token_estimate": 201}
{"text": "Click\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image: function\u00a0statement\u00a0(invoice,\u00a0plays)\u00a0{\n\u00a0\u00a0let\u00a0totalAmount\u00a0=\u00a00\u037e\n\u00a0\u00a0let\u00a0result\u00a0=\u00a0`Statement\u00a0for\u00a0${invoice.customer}\\n`\u037e\n\u00a0\u00a0for\u00a0(let\u00a0perf\u00a0of\u00a0invoice.performances)\u00a0{\n\u00a0\u00a0\u00a0\u00a0//\u00a0print\u00a0line\u00a0for\u00a0this\u00a0order\n\u00a0\u00a0\u00a0\u00a0result\u00a0+=\u00a0`\u00a0\u00a0${playFor(perf).name}:\u00a0${usd(amountFor(perf))}\u00a0(${perf.audience\n\u00a0\u00a0\u00a0\u00a0totalAmount\u00a0+=\u00a0amountFor(perf)\u037e\n\u00a0\u00a0}\n\u00a0\u00a0result\u00a0+=\u00a0`Amount\u00a0owed\u00a0is\u00a0${usd(totalAmount)}\\n`\u037e\n\u00a0\u00a0result\u00a0+=\u00a0`You\u00a0earned\u00a0${totalVolumeCredits()}\u00a0credits\\n`\u037e\n\u00a0\u00a0return\u00a0result\u037e\nLet\u00a0me\u00a0pause\u00a0for\u00a0a\u00a0bit\u00a0to\u00a0talk\u00a0about\u00a0what\u00a0I\u2019ve\u00a0just\u00a0done\u00a0here. Firstly,\u00a0I\u00a0know\u00a0readers\u00a0will\nagain\u00a0be\u00a0worrying\u00a0about\u00a0performance\u00a0with\u00a0this\u00a0change,\u00a0as\u00a0many\u00a0people\u00a0are\u00a0wary\u00a0of\nrepeating\u00a0a\u00a0loop. But\u00a0most\u00a0of\u00a0the\u00a0time,\u00a0rerunning\u00a0a\u00a0loop\u00a0like\u00a0this\u00a0has\u00a0a\u00a0negligible\u00a0effect\non\u00a0performance. If\u00a0you\u00a0timed\u00a0the\u00a0code\u00a0before\u00a0and\u00a0after\u00a0this\u00a0refactoring,\u00a0you\u00a0would\nprobably\u00a0not\u00a0notice\u00a0any\u00a0significant\u00a0change\u00a0in\u00a0speed\u2014and\u00a0that\u2019s\u00a0usually\u00a0the\u00a0case. Most\nprogrammers,\u00a0even\u00a0experienced\u00a0ones,\u00a0are\u00a0poor\u00a0judges\u00a0of\u00a0how\u00a0code\u00a0actually\u00a0performs. Many\u00a0of\u00a0our\u00a0intuitions\u00a0are\u00a0broken\u00a0by\u00a0clever\u00a0compilers,\u00a0modern\u00a0caching\u00a0techniques,\u00a0and\nthe\u00a0like. The\u00a0performance\u00a0of\u00a0software\u00a0usually\u00a0depends\u00a0on\u00a0just\u00a0a\u00a0few\u00a0parts\u00a0of\u00a0the\u00a0code,\nand\u00a0changes\u00a0anywhere\u00a0else\u00a0don\u2019t\u00a0make\u00a0an\u00a0appreciable\u00a0difference. But\u00a0\u201cmostly\u201d\u00a0isn\u2019t\u00a0the\u00a0same\u00a0as\u00a0\u201calwaysly.\u201d\u00a0Sometimes\u00a0a\u00a0refactoring\u00a0will\u00a0have\u00a0a\nsignificant\u00a0performance\u00a0implication. Even\u00a0then,\u00a0I\u00a0usually\u00a0go\u00a0ahead\u00a0and\u00a0do\u00a0it,\u00a0because\nit\u2019s\u00a0much\u00a0easier\u00a0to\u00a0tune\u00a0the\u00a0performance\u00a0of\u00a0well\u00adfactored\u00a0code. If\u00a0I\u00a0introduce\u00a0a\nsignificant\u00a0performance\u00a0issue\u00a0during\u00a0refactoring,\u00a0I\u00a0spend\u00a0time\u00a0on\u00a0performance\u00a0tuning\nafterwards. It\u00a0may\u00a0be\u00a0that\u00a0this\u00a0leads\u00a0to\u00a0reversing\u00a0some\u00a0of\u00a0the\u00a0refactoring\u00a0I\u00a0did\u00a0earlier\u2014\nbut\u00a0most\u00a0of\u00a0the\u00a0time,\u00a0due\u00a0to\u00a0the\u00a0refactoring,\u00a0I\u00a0can\u00a0apply\u00a0a\u00a0more\u00a0effective\u00a0performance\u00ad\ntuning\u00a0enhancement\u00a0instead.\u00a0I\u00a0end\u00a0up\u00a0with\u00a0code\u00a0that\u2019s\u00a0both\u00a0clearer\u00a0and\u00a0faster. So,\u00a0my\u00a0overall\u00a0advice\u00a0on\u00a0performance\u00a0with\u00a0refactoring\u00a0is:\u00a0Most\u00a0of\u00a0the\u00a0time\u00a0you\u00a0should\nignore\u00a0it. If\u00a0your\u00a0refactoring\u00a0introduces\u00a0performance\u00a0slow\u00addowns,\u00a0finish\u00a0refactoring\nfirst\u00a0and\u00a0do\u00a0performance\u00a0tuning\u00a0afterwards. The\u00a0second\u00a0aspect\u00a0I\u00a0want\u00a0to\u00a0call\u00a0your\u00a0attention\u00a0to\u00a0is\u00a0how\u00a0small\u00a0the\u00a0steps\u00a0were\u00a0to\u00a0remove\nvolumeCredits. Here\u00a0are\u00a0the\u00a0four\u00a0steps,\u00a0each\u00a0followed\u00a0by\u00a0compiling,\u00a0testing,\u00a0and\ncommitting\u00a0to\u00a0my\u00a0local\u00a0source\u00a0code\u00a0repository:\nwww.EBooksWorld.ir", "domains": ["Design Patterns", "Software Quality Attributes", "Domain-Driven Design"], "source": "Refactoring.Improving.the.Design.of.Existing.Code.pdf", "section": "Page 27", "position": 27, "chunk_type": "semantic", "token_estimate": 349}
{"text": "for\u00a0(let\u00a0perf\u00a0of\u00a0invoice.performances)\u00a0{: {\n\u00a0\u00a0\u00a0\u00a0result\u00a0+=\u00a0amountFor(perf)\u037e\n\u00a0\u00a0}\n\u00a0\u00a0return\u00a0result\u037e\n}\nfunction\u00a0totalVolumeCredits()\u00a0{\n\u00a0\u00a0let\u00a0result\u00a0=\u00a00\u037e\n\u00a0\u00a0for\u00a0(let\u00a0perf\u00a0of\u00a0invoice.performances)\u00a0{\n\u00a0\u00a0\u00a0\u00a0result\u00a0+=\u00a0volumeCreditsFor(perf)\u037e\n\u00a0\u00a0}\n\u00a0\u00a0return\u00a0result\u037e\n}\nSTATUS: LOTS OF NESTED FUNCTIONS\nNow\u00a0is\u00a0a\u00a0good\u00a0time\u00a0to\u00a0pause\u00a0and\u00a0take\u00a0a\u00a0look\u00a0at\u00a0the\u00a0overall\u00a0state\u00a0of\u00a0the\u00a0code:\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0statement\u00a0(invoice,\u00a0plays)\u00a0{\n\u00a0\u00a0let\u00a0result\u00a0=\u00a0`Statement\u00a0for\u00a0${invoice.customer}\\n`\u037e\n\u00a0\u00a0for\u00a0(let\u00a0perf\u00a0of\u00a0invoice.performances)\u00a0{\n\u00a0\u00a0\u00a0\u00a0result\u00a0+=\u00a0`\u00a0\u00a0${playFor(perf).name}:\u00a0${usd(amountFor(perf))}\u00a0(${perf.audience\n\u00a0\u00a0}\n\u00a0\u00a0result\u00a0+=\u00a0`Amount\u00a0owed\u00a0is\u00a0${usd(totalAmount())}\\n`\u037e\n\u00a0\u00a0result\u00a0+=\u00a0`You\u00a0earned\u00a0${totalVolumeCredits()}\u00a0credits\\n`\u037e\n\u00a0\u00a0return\u00a0result\u037e\n\u00a0\u00a0function\u00a0totalAmount()\u00a0{\n\u00a0\u00a0\u00a0\u00a0let\u00a0result\u00a0=\u00a00\u037e\n\u00a0\u00a0\u00a0\u00a0for\u00a0(let\u00a0perf\u00a0of\u00a0invoice.performances)\u00a0{\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0result\u00a0+=\u00a0amountFor(perf)\u037e\n\u00a0\u00a0\u00a0\u00a0}\n\u00a0\u00a0\u00a0\u00a0return\u00a0result\u037e\n\u00a0\u00a0}\n\u00a0\u00a0function\u00a0totalVolumeCredits()\u00a0{\n\u00a0\u00a0\u00a0\u00a0let\u00a0result\u00a0=\u00a00\u037e\n\u00a0\u00a0\u00a0\u00a0for\u00a0(let\u00a0perf\u00a0of\u00a0invoice.performances)\u00a0{\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0result\u00a0+=\u00a0volumeCreditsFor(perf)\u037e\n\u00a0\u00a0\u00a0\u00a0}\n\u00a0\u00a0\u00a0\u00a0return\u00a0result\u037e\n\u00a0\u00a0}\n\u00a0\u00a0function\u00a0usd(aNumber)\u00a0{\n\u00a0\u00a0\u00a0\u00a0return\u00a0new\u00a0Intl.NumberFormat(\"en\u00adUS\",\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0{\u00a0style:\u00a0\"currency\",\u00a0currency:\u00a0\"USD\",\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0minimumFractionDigits:\u00a02\u00a0}).format(aNumber/100)\u037e\n\u00a0\u00a0}\n\u00a0\u00a0function\u00a0volumeCreditsFor(aPerformance)\u00a0{\n\u00a0\u00a0\u00a0\u00a0let\u00a0result\u00a0=\u00a00\u037e\n\u00a0\u00a0\u00a0\u00a0result\u00a0+=\u00a0Math.max(aPerformance.audience\u00a0\u00ad\u00a030,\u00a00)\u037e\nwww.EBooksWorld.ir", "domains": ["Design Patterns", "Software Quality Attributes"], "source": "Refactoring.Improving.the.Design.of.Existing.Code.pdf", "section": "Page 30", "position": 30, "chunk_type": "semantic", "token_estimate": 170}
{"text": "top\u00a0level\u2026: Click\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0statement\u00a0(invoice,\u00a0plays)\u00a0{\n\u00a0\u00a0const\u00a0statementData\u00a0=\u00a0{}\u037e\n\u00a0\u00a0statementData.customer\u00a0=\u00a0invoice.customer\u037e\n\u00a0\u00a0statementData.performances\u00a0=\u00a0invoice.performances\u037e\n\u00a0\u00a0return\u00a0renderPlainText(statementData,\u00a0invoice,\u00a0plays)\u037e\n}\nfunction\u00a0renderPlainText(data,\u00a0plays)\u00a0{\n\u00a0\u00a0let\u00a0result\u00a0=\u00a0`Statement\u00a0for\u00a0${data.customer}\\n`\u037e\n\u00a0\u00a0for\u00a0(let\u00a0perf\u00a0of\u00a0data.performances)\u00a0{\n\u00a0\u00a0\u00a0\u00a0result\u00a0+=\u00a0`\u00a0\u00a0${playFor(perf).name}:\u00a0${usd(amountFor(perf))}\u00a0(${perf.audience\n\u00a0\u00a0}\n\u00a0\u00a0result\u00a0+=\u00a0`Amount\u00a0owed\u00a0is\u00a0${usd(totalAmount())}\\n`\u037e\n\u00a0\u00a0result\u00a0+=\u00a0`You\u00a0earned\u00a0${totalVolumeCredits()}\u00a0credits\\n`\u037e\n\u00a0\u00a0return\u00a0result\u037e\nfunction\u00a0renderPlainText\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0totalAmount()\u00a0{\n\u00a0\u00a0let\u00a0result\u00a0=\u00a00\u037e\n\u00a0\u00a0for\u00a0(let\u00a0perf\u00a0of\u00a0data.performances)\u00a0{\n\u00a0\u00a0\u00a0\u00a0result\u00a0+=\u00a0amountFor(perf)\u037e\n\u00a0\u00a0}\n\u00a0\u00a0return\u00a0result\u037e\n}\nfunction\u00a0totalVolumeCredits()\u00a0{\n\u00a0\u00a0let\u00a0result\u00a0=\u00a00\u037e\n\u00a0\u00a0for\u00a0(let\u00a0perf\u00a0of\u00a0data.performances)\u00a0{\n\u00a0\u00a0\u00a0\u00a0result\u00a0+=\u00a0volumeCreditsFor(perf)\u037e\n\u00a0\u00a0}\n\u00a0\u00a0return\u00a0result\u037e\n}\nNow\u00a0I\u2019d\u00a0like\u00a0the\u00a0play\u00a0name\u00a0to\u00a0come\u00a0from\u00a0the\u00a0intermediate\u00a0data. To\u00a0do\u00a0this,\u00a0I\u00a0need\u00a0to\nenrich\u00a0the\u00a0performance\u00a0record\u00a0with\u00a0data\u00a0from\u00a0the\u00a0play\u00a0(compile\u00adtest\u00adcommit). Click\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0statement\u00a0(invoice,\u00a0plays)\u00a0{\n\u00a0\u00a0const\u00a0statementData\u00a0=\u00a0{}\u037e\nwww.EBooksWorld.ir", "domains": ["Design Patterns", "Software Quality Attributes"], "source": "Refactoring.Improving.the.Design.of.Existing.Code.pdf", "section": "Page 34", "position": 34, "chunk_type": "semantic", "token_estimate": 157}
{"text": "statementData.customer\u00a0=\u00a0invoice.customer\u037e: r\u037e\n\u00a0\u00a0statementData.performances\u00a0=\u00a0invoice.performances.map(enrichPerformance)\u037e\n\u00a0\u00a0return\u00a0renderPlainText(statementData,\u00a0plays)\u037e\n\u00a0\u00a0function\u00a0enrichPerformance(aPerformance)\u00a0{\n\u00a0\u00a0\u00a0\u00a0const\u00a0result\u00a0=\u00a0Object.assign({},\u00a0aPerformance)\u037e\n\u00a0\u00a0\u00a0\u00a0return\u00a0result\u037e\n\u00a0\u00a0}\nAt\u00a0the\u00a0moment,\u00a0I\u2019m\u00a0just\u00a0making\u00a0a\u00a0copy\u00a0of\u00a0the\u00a0performance\u00a0object,\u00a0but\u00a0I\u2019ll\u00a0shortly\u00a0add\ndata\u00a0to\u00a0this\u00a0new\u00a0record. I\u00a0take\u00a0a\u00a0copy\u00a0because\u00a0I\u00a0don\u2019t\u00a0want\u00a0to\u00a0modify\u00a0the\u00a0data\u00a0passed\ninto\u00a0the\u00a0function. I\u00a0prefer\u00a0to\u00a0treat\u00a0data\u00a0as\u00a0immutable\u00a0as\u00a0much\u00a0as\u00a0I\u00a0can\u2014mutable\u00a0state\nquickly\u00a0becomes\u00a0something\u00a0rotten. The\u00a0idiom\u00a0result\u00a0=\u00a0Object.assign({},\u00a0aPerformance)\u00a0looks\u00a0very\u00a0odd\u00a0to\npeople\u00a0unfamiliar\u00a0to\u00a0JavaScript.\u00a0It\u00a0performs\u00a0a\u00a0shallow\u00a0copy. I\u2019d\u00a0prefer\u00a0to\u00a0have\u00a0a\nfunction\u00a0for\u00a0this,\u00a0but\u00a0it\u2019s\u00a0one\u00a0of\u00a0those\u00a0cases\u00a0where\u00a0the\u00a0idiom\u00a0is\u00a0so\u00a0baked\u00a0into\u00a0JavaScript\nusage\u00a0that\u00a0writing\u00a0my\u00a0own\u00a0function\u00a0would\u00a0look\u00a0out\u00a0of\u00a0place\u00a0for\u00a0JavaScript\nprogrammers. Now\u00a0I\u00a0have\u00a0a\u00a0spot\u00a0for\u00a0the\u00a0play,\u00a0I\u00a0need\u00a0to\u00a0add\u00a0it. To\u00a0do\u00a0that,\u00a0I\u00a0need\u00a0to\u00a0apply\u00a0Move\nFunction\u00a0(198)\u00a0to\u00a0playFor\u00a0and\u00a0statement\u00a0(compile\u00adtest\u00adcommit). function\u00a0statement\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0enrichPerformance(aPerformance)\u00a0{\n\u00a0\u00a0const\u00a0result\u00a0=\u00a0Object.assign({},\u00a0aPerformance)\u037e\n\u00a0\u00a0result.play\u00a0=\u00a0playFor(result)\u037e\n\u00a0\u00a0return\u00a0result\u037e\n}\nfunction\u00a0playFor(aPerformance)\u00a0{\n\u00a0\u00a0return\u00a0plays[aPerformance.playID]\u037e\n}\nI\u00a0then\u00a0replace\u00a0all\u00a0the\u00a0references\u00a0to\u00a0playFor\u00a0in\u00a0renderPlainText\u00a0to\u00a0use\u00a0the\u00a0data\ninstead\u00a0(compile\u00adtest\u00adcommit). function\u00a0renderPlainText\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nwww.EBooksWorld.ir", "domains": ["Design Patterns", "Software Quality Attributes"], "source": "Refactoring.Improving.the.Design.of.Existing.Code.pdf", "section": "Page 35", "position": 35, "chunk_type": "semantic", "token_estimate": 211}
{"text": "result.amount\u00a0=\u00a0amountFor(result)\u037e: lt)\u037e\n\u00a0\u00a0\u00a0\u00a0result.volumeCredits\u00a0=\u00a0volumeCreditsFor(result)\u037e\n\u00a0\u00a0\u00a0\u00a0return\u00a0result\u037e\n\u00a0\u00a0}\n\u00a0\u00a0function\u00a0playFor(aPerformance)\u00a0{\n\u00a0\u00a0\u00a0\u00a0return\u00a0plays[aPerformance.playID]\n\u00a0\u00a0}\n\u00a0\u00a0function\u00a0amountFor(aPerformance)\u00a0{\n\u00a0\u00a0\u00a0\u00a0let\u00a0result\u00a0=\u00a00\u037e\n\u00a0\u00a0\u00a0\u00a0switch\u00a0(aPerformance.play.type)\u00a0{\n\u00a0\u00a0\u00a0\u00a0case\u00a0\"tragedy\":\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0result\u00a0=\u00a040000\u037e\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0if\u00a0(aPerformance.audience\u00a0>\u00a030)\u00a0{\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0result\u00a0+=\u00a01000\u00a0*\u00a0(aPerformance.audience\u00a0\u00ad\u00a030)\u037e\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0}\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0break\u037e\n\u00a0\u00a0\u00a0\u00a0case\u00a0\"comedy\":\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0result\u00a0=\u00a030000\u037e\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0if\u00a0(aPerformance.audience\u00a0>\u00a020)\u00a0{\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0result\u00a0+=\u00a010000\u00a0+\u00a0500\u00a0*\u00a0(aPerformance.audience\u00a0\u00ad\u00a020)\u037e\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0}\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0result\u00a0+=\u00a0300\u00a0*\u00a0aPerformance.audience\u037e\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0break\u037e\n\u00a0\u00a0\u00a0\u00a0default:\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0throw\u00a0new\u00a0Error(`unknown\u00a0type:\u00a0${aPerformance.play.type}`)\u037e\n\u00a0\u00a0\u00a0\u00a0}\n\u00a0\u00a0\u00a0\u00a0return\u00a0result\u037e\n\u00a0\u00a0}\n\u00a0\u00a0function\u00a0volumeCreditsFor(aPerformance)\u00a0{\n\u00a0\u00a0\u00a0\u00a0let\u00a0result\u00a0=\u00a00\u037e\n\u00a0\u00a0\u00a0\u00a0result\u00a0+=\u00a0Math.max(aPerformance.audience\u00a0\u00ad\u00a030,\u00a00)\u037e\n\u00a0\u00a0\u00a0\u00a0if\u00a0(\"comedy\"\u00a0===\u00a0aPerformance.play.type)\u00a0result\u00a0+=\u00a0Math.floor(aPerformance.a\n\u00a0\u00a0\u00a0\u00a0return\u00a0result\u037e\n\u00a0\u00a0}\n\u00a0\u00a0function\u00a0totalAmount(data)\u00a0{\n\u00a0\u00a0\u00a0\u00a0return\u00a0data.performances\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0.reduce((total,\u00a0p)\u00a0=>\u00a0total\u00a0+\u00a0p.amount,\u00a00)\u037e\n\u00a0\u00a0}\n\u00a0\u00a0function\u00a0totalVolumeCredits(data)\u00a0{\n\u00a0\u00a0\u00a0\u00a0return\u00a0data.performances\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0.reduce((total,\u00a0p)\u00a0=>\u00a0total\u00a0+\u00a0p.volumeCredits,\u00a00)\u037e\n\u00a0\u00a0}\nI\u00a0have\u00a0more\u00a0code\u00a0than\u00a0I\u00a0did\u00a0when\u00a0I\u00a0started:\u00a070\u00a0lines\u00a0(not\u00a0counting\u00a0htmlStatement)\u00a0as\nopposed\u00a0to\u00a044,\u00a0mostly\u00a0due\u00a0to\u00a0the\u00a0extra\u00a0wrapping\u00a0involved\u00a0in\u00a0putting\u00a0things\u00a0in\u00a0functions. If\u00a0all\u00a0else\u00a0is\u00a0equal,\u00a0more\u00a0code\u00a0is\u00a0bad\u2014but\u00a0rarely\u00a0is\u00a0all\u00a0else\u00a0equal. The\u00a0extra\u00a0code\u00a0breaks\nup\u00a0the\u00a0logic\u00a0into\u00a0identifiable\u00a0parts,\u00a0separating\u00a0the\u00a0calculations\u00a0of\u00a0the\u00a0statements\u00a0from\nthe\u00a0layout. This\u00a0modularity\u00a0makes\u00a0it\u00a0easier\u00a0for\u00a0me\u00a0to\u00a0understand\u00a0the\u00a0parts\u00a0of\u00a0the\u00a0code\nand\u00a0how\u00a0they\u00a0fit\u00a0together. Brevity\u00a0is\u00a0the\u00a0soul\u00a0of\u00a0wit,\u00a0but\u00a0clarity\u00a0is\u00a0the\u00a0soul\u00a0of\u00a0evolvable\nwww.EBooksWorld.ir", "domains": ["Design Patterns", "Software Quality Attributes"], "source": "Refactoring.Improving.the.Design.of.Existing.Code.pdf", "section": "Page 42", "position": 42, "chunk_type": "semantic", "token_estimate": 227}
{"text": "software.\u00a0Adding\u00a0this\u00a0modularity\u00a0allows\u00a0to\u00a0me\u00a0to\u00a0support\u00a0the\u00a0HTML\u00a0version\u00a0of\u00a0the\u00a0code: without\u00a0any\u00a0duplication\u00a0of\u00a0the\u00a0calculations. When\u00a0programming,\u00a0follow\u00a0the\u00a0camping\u00a0rule:\u00a0Always\u00a0leave\u00a0the\u00a0code\u00a0base\nhealthier\u00a0than\u00a0when\u00a0you\u00a0found\u00a0it. There\u00a0are\u00a0more\u00a0things\u00a0I\u00a0could\u00a0do\u00a0to\u00a0simplify\u00a0the\u00a0printing\u00a0logic,\u00a0but\u00a0this\u00a0will\u00a0do\u00a0for\u00a0the\nmoment. I\u00a0always\u00a0have\u00a0to\u00a0strike\u00a0a\u00a0balance\u00a0between\u00a0all\u00a0the\u00a0refactorings\u00a0I\u00a0could\u00a0do\u00a0and\nadding\u00a0new\u00a0features. At\u00a0the\u00a0moment,\u00a0most\u00a0people\u00a0under\u00adprioritize\u00a0refactoring\u2014but\nthere\u00a0still\u00a0is\u00a0a\u00a0balance. My\u00a0rule\u00a0is\u00a0a\u00a0variation\u00a0on\u00a0the\u00a0camping\u00a0rule:\u00a0Always\u00a0leave\u00a0the\u00a0code\nbase\u00a0healthier\u00a0than\u00a0when\u00a0you\u00a0found\u00a0it. It\u00a0will\u00a0never\u00a0be\u00a0perfect,\u00a0but\u00a0it\u00a0should\u00a0be\u00a0better.", "domains": ["Software Quality Attributes"], "source": "Refactoring.Improving.the.Design.of.Existing.Code.pdf", "section": "Page 43", "position": 43, "chunk_type": "semantic", "token_estimate": 117}
{"text": "Now\u00a0I\u2019ll\u00a0turn\u00a0my\u00a0attention\u00a0to\u00a0the\u00a0next\u00a0feature\u00a0change:\u00a0supporting\u00a0more\u00a0categories\u00a0of: plays,\u00a0each\u00a0with\u00a0its\u00a0own\u00a0charging\u00a0and\u00a0volume\u00a0credits\u00a0calculations. At\u00a0the\u00a0moment,\u00a0to\nmake\u00a0changes\u00a0here\u00a0I\u00a0have\u00a0to\u00a0go\u00a0into\u00a0the\u00a0calculation\u00a0functions\u00a0and\u00a0edit\u00a0the\u00a0conditions\u00a0in\nthere. The\u00a0amountFor\u00a0function\u00a0highlights\u00a0the\u00a0central\u00a0role\u00a0the\u00a0type\u00a0of\u00a0play\u00a0has\u00a0in\u00a0the\nchoice\u00a0of\u00a0calculations\u2014but\u00a0conditional\u00a0logic\u00a0like\u00a0this\u00a0tends\u00a0to\u00a0decay\u00a0as\u00a0further\nmodifications\u00a0are\u00a0made\u00a0unless\u00a0it\u2019s\u00a0reinforced\u00a0by\u00a0more\u00a0structural\u00a0elements\u00a0of\u00a0the\nprogramming\u00a0language. There\u00a0are\u00a0various\u00a0ways\u00a0to\u00a0introduce\u00a0structure\u00a0to\u00a0make\u00a0this\u00a0explicit,\u00a0but\u00a0in\u00a0this\u00a0case\u00a0a\nnatural\u00a0approach\u00a0is\u00a0type\u00a0polymorphism\u2014a\u00a0prominent\u00a0feature\u00a0of\u00a0classical\u00a0object\u00ad\norientation. Classical\u00a0OO\u00a0has\u00a0long\u00a0been\u00a0a\u00a0controversial\u00a0feature\u00a0in\u00a0the\u00a0JavaScript\u00a0world,\nbut\u00a0the\u00a0ECMAScript\u00a02015\u00a0version\u00a0provides\u00a0a\u00a0sound\u00a0syntax\u00a0and\u00a0structure\u00a0for\u00a0it. So\u00a0it\nmakes\u00a0sense\u00a0to\u00a0use\u00a0it\u00a0in\u00a0a\u00a0right\u00a0situation\u2014like\u00a0this\u00a0one. My\u00a0overall\u00a0plan\u00a0is\u00a0to\u00a0set\u00a0up\u00a0an\u00a0inheritance\u00a0hierarchy\u00a0with\u00a0comedy\u00a0and\u00a0tragedy\nsubclasses\u00a0that\u00a0contain\u00a0the\u00a0calculation\u00a0logic\u00a0for\u00a0those\u00a0cases. Callers\u00a0call\u00a0a\u00a0polymorphic\namount\u00a0function\u00a0that\u00a0the\u00a0language\u00a0will\u00a0dispatch\u00a0to\u00a0the\u00a0different\u00a0calculations\u00a0for\u00a0the\ncomedies\u00a0and\u00a0tragedies.\u00a0I\u2019ll\u00a0make\u00a0a\u00a0similar\u00a0structure\u00a0for\u00a0the\u00a0volume\u00a0credits\u00a0calculation. To\u00a0do\u00a0this,\u00a0I\u00a0utilize\u00a0a\u00a0couple\u00a0of\u00a0refactorings. The\u00a0core\u00a0refactoring\u00a0is\u00a0Replace\u00a0Conditional\nwith\u00a0Polymorphism\u00a0(272),\u00a0which\u00a0changes\u00a0a\u00a0hunk\u00a0of\u00a0conditional\u00a0code\u00a0with\npolymorphism. But\u00a0before\u00a0I\u00a0can\u00a0do\u00a0Replace\u00a0Conditional\u00a0with\u00a0Polymorphism\u00a0(272),\u00a0I\nneed\u00a0to\u00a0create\u00a0an\u00a0inheritance\u00a0structure\u00a0of\u00a0some\u00a0kind. I\u00a0need\u00a0to\u00a0create\u00a0a\u00a0class\u00a0to\u00a0host\u00a0the\namount\u00a0and\u00a0volume\u00a0credit\u00a0functions. I\u00a0begin\u00a0by\u00a0reviewing\u00a0the\u00a0calculation\u00a0code. (One\u00a0of\u00a0the\u00a0pleasant\u00a0consequences\u00a0of\u00a0the\nwww.EBooksWorld.ir", "domains": ["Design Patterns"], "source": "Refactoring.Improving.the.Design.of.Existing.Code.pdf", "section": "Page 43", "position": 43, "chunk_type": "semantic", "token_estimate": 279}
{"text": "return\u00a0result\u037e: ult\u037e\n\u00a0\u00a0}\n\u00a0\u00a0function\u00a0totalAmount(data)\u00a0{\n\u00a0\u00a0\u00a0\u00a0return\u00a0data.performances\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0.reduce((total,\u00a0p)\u00a0=>\u00a0total\u00a0+\u00a0p.amount,\u00a00)\u037e\n\u00a0\u00a0}\n\u00a0\u00a0function\u00a0totalVolumeCredits(data)\u00a0{\n\u00a0\u00a0\u00a0\u00a0return\u00a0data.performances\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0.reduce((total,\u00a0p)\u00a0=>\u00a0total\u00a0+\u00a0p.volumeCredits,\u00a00)\u037e\n\u00a0\u00a0}\nCreating a Performance Calculator\nThe\u00a0enrichPerformance\u00a0function\u00a0is\u00a0the\u00a0key,\u00a0since\u00a0it\u00a0populates\u00a0the\u00a0intermediate\u00a0data\nstructure\u00a0with\u00a0the\u00a0data\u00a0for\u00a0each\u00a0performance. Currently,\u00a0it\u00a0calls\u00a0the\u00a0conditional\nfunctions\u00a0for\u00a0amount\u00a0and\u00a0volume\u00a0credits. What\u00a0I\u00a0need\u00a0it\u00a0to\u00a0do\u00a0is\u00a0call\u00a0those\u00a0functions\u00a0on\na\u00a0host\u00a0class. Since\u00a0that\u00a0class\u00a0hosts\u00a0functions\u00a0for\u00a0calculating\u00a0data\u00a0about\u00a0performances,\nI\u2019ll\u00a0call\u00a0it\u00a0a\u00a0performance\u00a0calculator. function\u00a0createStatementData\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0enrichPerformance(aPerformance)\u00a0{\n\u00a0\u00a0const\u00a0calculator\u00a0=\u00a0new\u00a0PerformanceCalculator(aPerformance)\u037e\n\u00a0\u00a0const\u00a0result\u00a0=\u00a0Object.assign({},\u00a0aPerformance)\u037e\n\u00a0\u00a0result.play\u00a0=\u00a0playFor(result)\u037e\n\u00a0\u00a0result.amount\u00a0=\u00a0amountFor(result)\u037e\n\u00a0\u00a0result.volumeCredits\u00a0=\u00a0volumeCreditsFor(result)\u037e\n\u00a0\u00a0return\u00a0result\u037e\n}\ntop\u00a0level\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nclass\u00a0PerformanceCalculator\u00a0{\n\u00a0\u00a0constructor(aPerformance)\u00a0{\n\u00a0\u00a0\u00a0\u00a0this.performance\u00a0=\u00a0aPerformance\u037e\n\u00a0\u00a0}\n}\nSo\u00a0far,\u00a0this\u00a0new\u00a0object\u00a0isn\u2019t\u00a0doing\u00a0anything. I\u00a0want\u00a0to\u00a0move\u00a0behavior\u00a0into\u00a0it\u2014and\u00a0I\u2019d\u00a0like\nto\u00a0start\u00a0with\u00a0the\u00a0simplest\u00a0thing\u00a0to\u00a0move,\u00a0which\u00a0is\u00a0the\u00a0play\u00a0record. Strictly,\u00a0I\u00a0don\u2019t\u00a0need\nwww.EBooksWorld.ir", "domains": ["Design Patterns", "Software Quality Attributes"], "source": "Refactoring.Improving.the.Design.of.Existing.Code.pdf", "section": "Page 45", "position": 45, "chunk_type": "semantic", "token_estimate": 180}
{"text": "to\u00a0do\u00a0this,\u00a0as\u00a0it\u2019s\u00a0not\u00a0varying\u00a0polymorphically,\u00a0but\u00a0this\u00a0way\u00a0I\u2019ll\u00a0keep\u00a0all\u00a0the\u00a0data: transforms\u00a0in\u00a0one\u00a0place,\u00a0and\u00a0that\u00a0consistency\u00a0will\u00a0make\u00a0the\u00a0code\u00a0clearer. To\u00a0make\u00a0this\u00a0work,\u00a0I\u00a0will\u00a0use\u00a0Change\u00a0Function\u00a0Declaration\u00a0(124)\u00a0to\u00a0pass\u00a0the\nperformance\u2019s\u00a0play\u00a0into\u00a0the\u00a0calculator. function\u00a0createStatementData\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0enrichPerformance(aPerformance)\u00a0{\n\u00a0\u00a0const\u00a0calculator\u00a0=\u00a0new\u00a0PerformanceCalculator(aPerformance,\u00a0playFor(aPerformanc\n\u00a0\u00a0const\u00a0result\u00a0=\u00a0Object.assign({},\u00a0aPerformance)\u037e\n\u00a0\u00a0result.play\u00a0=\u00a0calculator.play\u037e\n\u00a0\u00a0result.amount\u00a0=\u00a0amountFor(result)\u037e\n\u00a0\u00a0result.volumeCredits\u00a0=\u00a0volumeCreditsFor(result)\u037e\n\u00a0\u00a0return\u00a0result\u037e\n}\nclass\u00a0PerformanceCalculator\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nclass\u00a0PerformanceCalculator\u00a0{\n\u00a0\u00a0constructor(aPerformance,\u00a0aPlay)\u00a0{\n\u00a0\u00a0\u00a0\u00a0this.performance\u00a0=\u00a0aPerformance\u037e\n\u00a0\u00a0\u00a0\u00a0this.play\u00a0=\u00a0aPlay\u037e\n\u00a0\u00a0}\n}\n(I\u2019m\u00a0not\u00a0saying\u00a0compile\u00adtest\u00adcommit\u00a0all\u00a0the\u00a0time\u00a0any\u00a0more,\u00a0as\u00a0I\u00a0suspect\u00a0you\u2019re\u00a0getting\ntired\u00a0of\u00a0reading\u00a0it.\u00a0But\u00a0I\u00a0still\u00a0do\u00a0it\u00a0at\u00a0every\u00a0opportunity. I\u00a0do\u00a0sometimes\u00a0get\u00a0tired\u00a0of\ndoing\u00a0it\u2014and\u00a0give\u00a0mistakes\u00a0the\u00a0chance\u00a0to\u00a0bite\u00a0me. Then\u00a0I\u00a0learn\u00a0and\u00a0get\u00a0back\u00a0into\u00a0the\nrhythm.) Moving Functions into the Calculator\nThe\u00a0next\u00a0bit\u00a0of\u00a0logic\u00a0I\u00a0move\u00a0is\u00a0rather\u00a0more\u00a0substantial\u00a0for\u00a0calculating\u00a0the\u00a0amount\u00a0for\u00a0a\nperformance. I\u2019ve\u00a0moved\u00a0functions\u00a0around\u00a0casually\u00a0while\u00a0rearranging\u00a0nested\u00a0functions\n\u2014but\u00a0this\u00a0is\u00a0a\u00a0deeper\u00a0change\u00a0in\u00a0the\u00a0context\u00a0of\u00a0the\u00a0function,\u00a0so\u00a0I\u2019ll\u00a0step\u00a0through\u00a0the\u00a0Move\nFunction\u00a0(198)\u00a0refactoring. The\u00a0first\u00a0part\u00a0of\u00a0this\u00a0refactoring\u00a0is\u00a0to\u00a0copy\u00a0the\u00a0logic\u00a0over\u00a0to\nits\u00a0new\u00a0context\u2014the\u00a0calculator\u00a0class. Then,\u00a0I\u00a0adjust\u00a0the\u00a0code\u00a0to\u00a0fit\u00a0into\u00a0its\u00a0new\u00a0home,\nwww.EBooksWorld.ir", "domains": ["Design Patterns", "Software Quality Attributes"], "source": "Refactoring.Improving.the.Design.of.Existing.Code.pdf", "section": "Page 46", "position": 46, "chunk_type": "semantic", "token_estimate": 236}
{"text": "changing\u00a0aPerformance\u00a0to\u00a0this.performance\u00a0and\u00a0playFor(aPerformance)\u00a0to: this.play. class\u00a0PerformanceCalculator\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nget\u00a0amount()\u00a0{\n\u00a0\u00a0let\u00a0result\u00a0=\u00a00\u037e\n\u00a0\u00a0switch\u00a0(this.play.type)\u00a0{\n\u00a0\u00a0\u00a0\u00a0case\u00a0\"tragedy\":\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0result\u00a0=\u00a040000\u037e\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0if\u00a0(this.performance.audience\u00a0>\u00a030)\u00a0{\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0result\u00a0+=\u00a01000\u00a0*\u00a0(this.performance.audience\u00a0\u00ad\u00a030)\u037e\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0}\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0break\u037e\n\u00a0\u00a0\u00a0\u00a0case\u00a0\"comedy\":\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0result\u00a0=\u00a030000\u037e\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0if\u00a0(this.performance.audience\u00a0>\u00a020)\u00a0{\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0result\u00a0+=\u00a010000\u00a0+\u00a0500\u00a0*\u00a0(this.performance.audience\u00a0\u00ad\u00a020)\u037e\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0}\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0result\u00a0+=\u00a0300\u00a0*\u00a0this.performance.audience\u037e\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0break\u037e\n\u00a0\u00a0\u00a0\u00a0default:\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0throw\u00a0new\u00a0Error(`unknown\u00a0type:\u00a0${this.play.type}`)\u037e\n\u00a0\u00a0}\n\u00a0\u00a0return\u00a0result\u037e\n}\nI\u00a0can\u00a0compile\u00a0at\u00a0this\u00a0point\u00a0to\u00a0check\u00a0for\u00a0any\u00a0compile\u00adtime\u00a0errors. \u201cCompiling\u201d\u00a0in\u00a0my\ndevelopment\u00a0environment\u00a0occurs\u00a0as\u00a0I\u00a0execute\u00a0the\u00a0code,\u00a0so\u00a0what\u00a0I\u00a0actually\u00a0do\u00a0is\u00a0run\nBabel\u00a0[babel]. That\u00a0will\u00a0be\u00a0enough\u00a0to\u00a0catch\u00a0any\u00a0syntax\u00a0errors\u00a0in\u00a0the\u00a0new\u00a0function\u2014but\nlittle\u00a0more\u00a0than\u00a0that.\u00a0Even\u00a0so,\u00a0that\u00a0can\u00a0be\u00a0a\u00a0useful\u00a0step. Once\u00a0the\u00a0new\u00a0function\u00a0fits\u00a0its\u00a0home,\u00a0I\u00a0take\u00a0the\u00a0original\u00a0function\u00a0and\u00a0turn\u00a0it\u00a0into\u00a0a\ndelegating\u00a0function\u00a0so\u00a0it\u00a0calls\u00a0the\u00a0new\u00a0function. function\u00a0createStatementData\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0amountFor(aPerformance)\u00a0{\n\u00a0\u00a0return\u00a0new\u00a0PerformanceCalculator(aPerformance,\u00a0playFor(aPerformance)).amount\u037e\n}\nwww.EBooksWorld.ir", "domains": ["Design Patterns", "Software Quality Attributes"], "source": "Refactoring.Improving.the.Design.of.Existing.Code.pdf", "section": "Page 47", "position": 47, "chunk_type": "semantic", "token_estimate": 180}
{"text": "Now\u00a0I\u00a0can\u00a0compile\u00adtest\u00adcommit\u00a0to\u00a0ensure\u00a0the\u00a0code\u00a0is\u00a0working\u00a0properly\u00a0in\u00a0its\u00a0new\u00a0home.: With\u00a0that\u00a0done,\u00a0I\u00a0use\u00a0Inline\u00a0Function\u00a0(115)\u00a0to\u00a0call\u00a0the\u00a0new\u00a0function\u00a0directly\u00a0(compile\u00ad\ntest\u00adcommit). function\u00a0createStatementData\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0enrichPerformance(aPerformance)\u00a0{\n\u00a0\u00a0const\u00a0calculator\u00a0=\u00a0new\u00a0PerformanceCalculator(aPerformance,\u00a0playFor(aPerformanc\n\u00a0\u00a0const\u00a0result\u00a0=\u00a0Object.assign({},\u00a0aPerformance)\u037e\n\u00a0\u00a0result.play\u00a0=\u00a0calculator.play\u037e\n\u00a0\u00a0result.amount\u00a0=\u00a0calculator.amount\u037e\n\u00a0\u00a0result.volumeCredits\u00a0=\u00a0volumeCreditsFor(result)\u037e\n\u00a0\u00a0return\u00a0result\u037e\n}\nI\u00a0repeat\u00a0the\u00a0same\u00a0process\u00a0to\u00a0move\u00a0the\u00a0volume\u00a0credits\u00a0calculation. function\u00a0createStatementData\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0enrichPerformance(aPerformance)\u00a0{\n\u00a0\u00a0const\u00a0calculator\u00a0=\u00a0new\u00a0PerformanceCalculator(aPerformance,\u00a0playFor(aPerformanc\n\u00a0\u00a0const\u00a0result\u00a0=\u00a0Object.assign({},\u00a0aPerformance)\u037e\n\u00a0\u00a0result.play\u00a0=\u00a0calculator.play\u037e\n\u00a0\u00a0result.amount\u00a0=\u00a0calculator.amount\u037e\n\u00a0\u00a0result.volumeCredits\u00a0=\u00a0calculator.volumeCredits\u037e\n\u00a0\u00a0return\u00a0result\u037e\n}\nclass\u00a0PerformanceCalculator\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nget\u00a0volumeCredits()\u00a0{\n\u00a0\u00a0let\u00a0result\u00a0=\u00a00\u037e\n\u00a0\u00a0result\u00a0+=\u00a0Math.max(this.performance.audience\u00a0\u00ad\u00a030,\u00a00)\u037e\n\u00a0\u00a0if\u00a0(\"comedy\"\u00a0===\u00a0this.play.type)\u00a0result\u00a0+=\u00a0Math.floor(this.performance.audienc\n\u00a0\u00a0return\u00a0result\u037e\n}\nMaking the Performance Calculator Polymorphic\nwww.EBooksWorld.ir", "domains": ["Design Patterns", "Software Quality Attributes"], "source": "Refactoring.Improving.the.Design.of.Existing.Code.pdf", "section": "Page 48", "position": 48, "chunk_type": "semantic", "token_estimate": 147}
{"text": "Making the Performance Calculator Polymorphic: Now\u00a0that\u00a0I\u00a0have\u00a0the\u00a0logic\u00a0in\u00a0a\u00a0class,\u00a0it\u2019s\u00a0time\u00a0to\u00a0apply\u00a0the\u00a0polymorphism. The\u00a0first\u00a0step\u00a0is\nto\u00a0use\u00a0Replace\u00a0Type\u00a0Code\u00a0with\u00a0Subclasses\u00a0(362)\u00a0to\u00a0introduce\u00a0subclasses\u00a0instead\u00a0of\u00a0the\ntype\u00a0code. For\u00a0this,\u00a0I\u00a0need\u00a0to\u00a0create\u00a0subclasses\u00a0of\u00a0the\u00a0performance\u00a0calculator\u00a0and\u00a0use\nthe\u00a0appropriate\u00a0subclass\u00a0in\u00a0createPerformanceData. In\u00a0order\u00a0to\u00a0get\u00a0the\u00a0right\nsubclass,\u00a0I\u00a0need\u00a0to\u00a0replace\u00a0the\u00a0constructor\u00a0call\u00a0with\u00a0a\u00a0function,\u00a0since\u00a0JavaScript\nconstructors\u00a0can\u2019t\u00a0return\u00a0subclasses. So\u00a0I\u00a0use\u00a0Replace\u00a0Constructor\u00a0with\u00a0Factory\nFunction\u00a0(334). function\u00a0createStatementData\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0enrichPerformance(aPerformance)\u00a0{\n\u00a0\u00a0const\u00a0calculator\u00a0=\u00a0createPerformanceCalculator(aPerformance,\u00a0playFor(aPerforma\n\u00a0\u00a0const\u00a0result\u00a0=\u00a0Object.assign({},\u00a0aPerformance)\u037e\n\u00a0\u00a0result.play\u00a0=\u00a0calculator.play\u037e\n\u00a0\u00a0result.amount\u00a0=\u00a0calculator.amount\u037e\n\u00a0\u00a0result.volumeCredits\u00a0=\u00a0calculator.volumeCredits\u037e\n\u00a0\u00a0return\u00a0result\u037e\n}\ntop\u00a0level\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0createPerformanceCalculator(aPerformance,\u00a0aPlay)\u00a0{\n\u00a0\u00a0return\u00a0new\u00a0PerformanceCalculator(aPerformance,\u00a0aPlay)\u037e\n}\nWith\u00a0that\u00a0now\u00a0a\u00a0function,\u00a0I\u00a0can\u00a0create\u00a0subclasses\u00a0of\u00a0the\u00a0performance\u00a0calculator\u00a0and\u00a0get\nthe\u00a0creation\u00a0function\u00a0to\u00a0select\u00a0which\u00a0one\u00a0to\u00a0return. top\u00a0level\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0createPerformanceCalculator(aPerformance,\u00a0aPlay)\u00a0{\n\u00a0\u00a0\u00a0\u00a0switch(aPlay.type)\u00a0{\n\u00a0\u00a0\u00a0\u00a0case\u00a0\"tragedy\":\u00a0return\u00a0new\u00a0TragedyCalculator(aPerformance,\u00a0aPlay)\u037e\n\u00a0\u00a0\u00a0\u00a0case\u00a0\"comedy\"\u00a0:\u00a0return\u00a0new\u00a0ComedyCalculator(aPerformance,\u00a0aPlay)\u037e\n\u00a0\u00a0\u00a0\u00a0default:\nwww.EBooksWorld.ir", "domains": ["Design Patterns", "Software Quality Attributes", "Domain-Driven Design"], "source": "Refactoring.Improving.the.Design.of.Existing.Code.pdf", "section": "Page 49", "position": 49, "chunk_type": "semantic", "token_estimate": 193}
{"text": "throw\u00a0new\u00a0Error(`unknown\u00a0type:\u00a0${aPlay.type}`)\u037e: type}`)\u037e\n\u00a0\u00a0\u00a0\u00a0}\n}\nclass\u00a0TragedyCalculator\u00a0extends\u00a0PerformanceCalculator\u00a0{\n}\nclass\u00a0ComedyCalculator\u00a0extends\u00a0PerformanceCalculator\u00a0{\n}\nThis\u00a0sets\u00a0up\u00a0the\u00a0structure\u00a0for\u00a0the\u00a0polymorphism,\u00a0so\u00a0I\u00a0can\u00a0now\u00a0move\u00a0on\u00a0to\u00a0Replace\nConditional\u00a0with\u00a0Polymorphism\u00a0(272). I\u00a0start\u00a0with\u00a0the\u00a0calculation\u00a0of\u00a0the\u00a0amount\u00a0for\u00a0tragedies. class\u00a0TragedyCalculator\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nget\u00a0amount()\u00a0{\n\u00a0\u00a0let\u00a0result\u00a0=\u00a040000\u037e\n\u00a0\u00a0if\u00a0(this.performance.audience\u00a0>\u00a030)\u00a0{\n\u00a0\u00a0\u00a0\u00a0result\u00a0+=\u00a01000\u00a0*\u00a0(this.performance.audience\u00a0\u00ad\u00a030)\u037e\n\u00a0\u00a0}\n\u00a0\u00a0return\u00a0result\u037e\n}\nJust\u00a0having\u00a0this\u00a0method\u00a0in\u00a0the\u00a0subclass\u00a0is\u00a0enough\u00a0to\u00a0override\u00a0the\u00a0superclass\nconditional. But\u00a0if\u00a0you\u2019re\u00a0as\u00a0paranoid\u00a0as\u00a0I\u00a0am,\u00a0you\u00a0might\u00a0do\u00a0this:\nclass\u00a0PerformanceCalculator\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nget\u00a0amount()\u00a0{\n\u00a0\u00a0let\u00a0result\u00a0=\u00a00\u037e\n\u00a0\u00a0switch\u00a0(this.play.type)\u00a0{\n\u00a0\u00a0\u00a0\u00a0case\u00a0\"tragedy\":\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0throw\u00a0'bad\u00a0thing'\u037e\n\u00a0\u00a0\u00a0\u00a0case\u00a0\"comedy\":\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0result\u00a0=\u00a030000\u037e\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0if\u00a0(this.performance.audience\u00a0>\u00a020)\u00a0{\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0result\u00a0+=\u00a010000\u00a0+\u00a0500\u00a0*\u00a0(this.performance.audience\u00a0\u00ad\u00a020)\u037e\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0}\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0result\u00a0+=\u00a0300\u00a0*\u00a0this.performance.audience\u037e\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0break\u037e\n\u00a0\u00a0\u00a0\u00a0default:\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0throw\u00a0new\u00a0Error(`unknown\u00a0type:\u00a0${this.play.type}`)\u037e\nwww.EBooksWorld.ir", "domains": ["Software Quality Attributes"], "source": "Refactoring.Improving.the.Design.of.Existing.Code.pdf", "section": "Page 50", "position": 50, "chunk_type": "semantic", "token_estimate": 163}
{"text": "}: }\n\u00a0\u00a0return\u00a0result\u037e\n}\nI\u00a0could\u00a0have\u00a0removed\u00a0the\u00a0case\u00a0for\u00a0tragedy\u00a0and\u00a0let\u00a0the\u00a0default\u00a0branch\u00a0throw\u00a0an\u00a0error. But\nI\u00a0like\u00a0the\u00a0explicit\u00a0throw\u2014and\u00a0it\u00a0will\u00a0only\u00a0be\u00a0there\u00a0for\u00a0a\u00a0couple\u00a0more\u00a0minutes\u00a0(which\u00a0is\nwhy\u00a0I\u00a0threw\u00a0a\u00a0string,\u00a0not\u00a0a\u00a0better\u00a0error\u00a0object). After\u00a0a\u00a0compile\u00adtest\u00adcommit\u00a0of\u00a0that,\u00a0I\u00a0move\u00a0the\u00a0comedy\u00a0case\u00a0down\u00a0too. class\u00a0ComedyCalculator\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nget\u00a0amount()\u00a0{\n\u00a0\u00a0let\u00a0result\u00a0=\u00a030000\u037e\n\u00a0\u00a0if\u00a0(this.performance.audience\u00a0>\u00a020)\u00a0{\n\u00a0\u00a0\u00a0\u00a0result\u00a0+=\u00a010000\u00a0+\u00a0500\u00a0*\u00a0(this.performance.audience\u00a0\u00ad\u00a020)\u037e\n\u00a0\u00a0}\n\u00a0\u00a0result\u00a0+=\u00a0300\u00a0*\u00a0this.performance.audience\u037e\n\u00a0\u00a0return\u00a0result\u037e\n}\nI\u00a0can\u00a0now\u00a0remove\u00a0the\u00a0superclass\u00a0amount\u00a0method,\u00a0as\u00a0it\u00a0should\u00a0never\u00a0be\u00a0called. But\u00a0it\u2019s\nkinder\u00a0to\u00a0my\u00a0future\u00a0self\u00a0to\u00a0leave\u00a0a\u00a0tombstone. class\u00a0PerformanceCalculator\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nget\u00a0amount()\u00a0{\n\u00a0\u00a0throw\u00a0new\u00a0Error('subclass\u00a0responsibility')\u037e\n}\nThe\u00a0next\u00a0conditional\u00a0to\u00a0replace\u00a0is\u00a0the\u00a0volume\u00a0credits\u00a0calculation. Looking\u00a0at\u00a0the\ndiscussion\u00a0of\u00a0future\u00a0categories\u00a0of\u00a0plays,\u00a0I\u00a0notice\u00a0that\u00a0most\u00a0plays\u00a0expect\u00a0to\u00a0check\u00a0if\naudience\u00a0is\u00a0above\u00a030,\u00a0with\u00a0only\u00a0some\u00a0categories\u00a0introducing\u00a0a\u00a0variation. So\u00a0it\u00a0makes\nsense\u00a0to\u00a0leave\u00a0the\u00a0more\u00a0common\u00a0case\u00a0on\u00a0the\u00a0superclass\u00a0as\u00a0a\u00a0default,\u00a0and\u00a0let\u00a0the\nvariations\u00a0override\u00a0it\u00a0as\u00a0necessary. So\u00a0I\u00a0just\u00a0push\u00a0down\u00a0the\u00a0case\u00a0for\u00a0comedies:\nclass\u00a0PerformanceCalculator\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nwww.EBooksWorld.ir", "domains": ["Software Quality Attributes"], "source": "Refactoring.Improving.the.Design.of.Existing.Code.pdf", "section": "Page 51", "position": 51, "chunk_type": "semantic", "token_estimate": 221}
{"text": "get\u00a0volumeCredits()\u00a0{: return\u00a0Math.max(this.performance.audience\u00a0\u00ad\u00a030,\u00a00)\u037e\n}\nclass\u00a0ComedyCalculator\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nget\u00a0volumeCredits()\u00a0{\n\u00a0\u00a0return\u00a0super.volumeCredits\u00a0+\u00a0Math.floor(this.performance.audience\u00a0/\u00a05)\u037e\n}\nSTATUS: CREATING THE DATA WITH THE POLYMORPHIC", "domains": ["Software Quality Attributes"], "source": "Refactoring.Improving.the.Design.of.Existing.Code.pdf", "section": "Page 52", "position": 52, "chunk_type": "semantic", "token_estimate": 34}
{"text": ".reduce((total,\u00a0p)\u00a0=>\u00a0total\u00a0+\u00a0p.volumeCredits,\u00a00)\u037e: s,\u00a00)\u037e\n\u00a0\u00a0}\n}\nfunction\u00a0createPerformanceCalculator(aPerformance,\u00a0aPlay)\u00a0{\n\u00a0\u00a0\u00a0\u00a0switch(aPlay.type)\u00a0{\n\u00a0\u00a0\u00a0\u00a0case\u00a0\"tragedy\":\u00a0return\u00a0new\u00a0TragedyCalculator(aPerformance,\u00a0aPlay)\u037e\n\u00a0\u00a0\u00a0\u00a0case\u00a0\"comedy\"\u00a0:\u00a0return\u00a0new\u00a0ComedyCalculator(aPerformance,\u00a0aPlay)\u037e\n\u00a0\u00a0\u00a0\u00a0default:\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0throw\u00a0new\u00a0Error(`unknown\u00a0type:\u00a0${aPlay.type}`)\u037e\n\u00a0\u00a0\u00a0\u00a0}\n}\nclass\u00a0PerformanceCalculator\u00a0{\n\u00a0\u00a0constructor(aPerformance,\u00a0aPlay)\u00a0{\n\u00a0\u00a0\u00a0\u00a0this.performance\u00a0=\u00a0aPerformance\u037e\n\u00a0\u00a0\u00a0\u00a0this.play\u00a0=\u00a0aPlay\u037e\n\u00a0\u00a0}\n\u00a0\u00a0get\u00a0amount()\u00a0{\n\u00a0\u00a0\u00a0\u00a0throw\u00a0new\u00a0Error('subclass\u00a0responsibility')\u037e}\n\u00a0\u00a0get\u00a0volumeCredits()\u00a0{\n\u00a0\u00a0\u00a0\u00a0return\u00a0Math.max(this.performance.audience\u00a0\u00ad\u00a030,\u00a00)\u037e\n\u00a0\u00a0}\n}\nclass\u00a0TragedyCalculator\u00a0extends\u00a0PerformanceCalculator\u00a0{\n\u00a0\u00a0get\u00a0amount()\u00a0{\n\u00a0\u00a0\u00a0\u00a0let\u00a0result\u00a0=\u00a040000\u037e\n\u00a0\u00a0\u00a0\u00a0if\u00a0(this.performance.audience\u00a0>\u00a030)\u00a0{\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0result\u00a0+=\u00a01000\u00a0*\u00a0(this.performance.audience\u00a0\u00ad\u00a030)\u037e\n\u00a0\u00a0\u00a0\u00a0}\n\u00a0\u00a0\u00a0\u00a0return\u00a0result\u037e\n\u00a0\u00a0}\n}\nclass\u00a0ComedyCalculator\u00a0extends\u00a0PerformanceCalculator\u00a0{\n\u00a0\u00a0get\u00a0amount()\u00a0{\n\u00a0\u00a0\u00a0\u00a0let\u00a0result\u00a0=\u00a030000\u037e\n\u00a0\u00a0\u00a0\u00a0if\u00a0(this.performance.audience\u00a0>\u00a020)\u00a0{\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0result\u00a0+=\u00a010000\u00a0+\u00a0500\u00a0*\u00a0(this.performance.audience\u00a0\u00ad\u00a020)\u037e\n\u00a0\u00a0\u00a0\u00a0}\n\u00a0\u00a0\u00a0\u00a0result\u00a0+=\u00a0300\u00a0*\u00a0this.performance.audience\u037e\n\u00a0\u00a0\u00a0\u00a0return\u00a0result\u037e\n\u00a0\u00a0}\n\u00a0\u00a0get\u00a0volumeCredits()\u00a0{\n\u00a0\u00a0\u00a0\u00a0return\u00a0super.volumeCredits\u00a0+\u00a0Math.floor(this.performance.audience\u00a0/\u00a05)\u037e\n\u00a0\u00a0}\n}\nAgain,\u00a0the\u00a0code\u00a0has\u00a0increased\u00a0in\u00a0size\u00a0as\u00a0I\u2019ve\u00a0introduced\u00a0structure. The\u00a0benefit\u00a0here\u00a0is\nthat\u00a0the\u00a0calculations\u00a0for\u00a0each\u00a0kind\u00a0of\u00a0play\u00a0are\u00a0grouped\u00a0together. If\u00a0most\u00a0of\u00a0the\u00a0changes\nwill\u00a0be\u00a0to\u00a0this\u00a0code,\u00a0it\u00a0will\u00a0be\u00a0helpful\u00a0to\u00a0have\u00a0it\u00a0clearly\u00a0separated\u00a0like\u00a0this. Adding\u00a0a\u00a0new\nkind\u00a0of\u00a0play\u00a0requires\u00a0writing\u00a0a\u00a0new\u00a0subclass\u00a0and\u00a0adding\u00a0it\u00a0to\u00a0the\u00a0creation\u00a0function. www.EBooksWorld.ir", "domains": ["Software Quality Attributes"], "source": "Refactoring.Improving.the.Design.of.Existing.Code.pdf", "section": "Page 53", "position": 53, "chunk_type": "semantic", "token_estimate": 209}
{"text": "or\u00a0bad\u00a0but\u00a0thinking\u00a0makes\u00a0it\u00a0so,\u00a0we\u00a0lack\u00a0any\u00a0guide\u00a0but\u00a0personal\u00a0taste.\u00a0I\u00a0believe,: however,\u00a0that\u00a0we\u00a0can\u00a0go\u00a0beyond\u00a0taste\u00a0and\u00a0say\u00a0that\u00a0the\u00a0true\u00a0test\u00a0of\u00a0good\u00a0code\u00a0is\u00a0how\u00a0easy\nit\u00a0is\u00a0to\u00a0change\u00a0it. Code\u00a0should\u00a0be\u00a0obvious:\u00a0When\u00a0someone\u00a0needs\u00a0to\u00a0make\u00a0a\u00a0change,\u00a0they\nshould\u00a0be\u00a0able\u00a0to\u00a0find\u00a0the\u00a0code\u00a0to\u00a0be\u00a0changed\u00a0easily\u00a0and\u00a0to\u00a0make\u00a0the\u00a0change\u00a0quickly\nwithout\u00a0introducing\u00a0any\u00a0errors. A\u00a0healthy\u00a0code\u00a0base\u00a0maximizes\u00a0our\u00a0productivity,\nallowing\u00a0us\u00a0to\u00a0build\u00a0more\u00a0features\u00a0for\u00a0our\u00a0users\u00a0both\u00a0faster\u00a0and\u00a0more\u00a0cheaply. To\u00a0keep\ncode\u00a0healthy,\u00a0pay\u00a0attention\u00a0to\u00a0what\u00a0is\u00a0getting\u00a0between\u00a0the\u00a0programming\u00a0team\u00a0and\u00a0that\nideal,\u00a0then\u00a0refactor\u00a0to\u00a0get\u00a0closer\u00a0to\u00a0the\u00a0ideal. But\u00a0the\u00a0most\u00a0important\u00a0thing\u00a0to\u00a0learn\u00a0from\u00a0this\u00a0example\u00a0is\u00a0the\u00a0rhythm\u00a0of\u00a0refactoring. Whenever\u00a0I\u2019ve\u00a0shown\u00a0people\u00a0how\u00a0I\u00a0refactor,\u00a0they\u00a0are\u00a0surprised\u00a0by\u00a0how\u00a0small\u00a0my\u00a0steps\nare,\u00a0each\u00a0step\u00a0leaving\u00a0the\u00a0code\u00a0in\u00a0a\u00a0working\u00a0state\u00a0that\u00a0compiles\u00a0and\u00a0passes\u00a0its\u00a0tests. I\nwas\u00a0just\u00a0as\u00a0surprised\u00a0myself\u00a0when\u00a0Kent\u00a0Beck\u00a0showed\u00a0me\u00a0how\u00a0to\u00a0do\u00a0this\u00a0in\u00a0a\u00a0hotel\u00a0room\nin\u00a0Detroit\u00a0two\u00a0decades\u00a0ago. The\u00a0key\u00a0to\u00a0effective\u00a0refactoring\u00a0is\u00a0recognizing\u00a0that\u00a0you\u00a0go\nfaster\u00a0when\u00a0you\u00a0take\u00a0tiny\u00a0steps,\u00a0the\u00a0code\u00a0is\u00a0never\u00a0broken,\u00a0and\u00a0you\u00a0can\u00a0compose\u00a0those\nsmall\u00a0steps\u00a0into\u00a0substantial\u00a0changes.\u00a0Remember\u00a0that\u2014and\u00a0the\u00a0rest\u00a0is\u00a0silence. www.EBooksWorld.ir", "domains": ["Design Patterns"], "source": "Refactoring.Improving.the.Design.of.Existing.Code.pdf", "section": "Page 55", "position": 55, "chunk_type": "semantic", "token_estimate": 227}
{"text": "steps.\u00a0Each\u00a0individual\u00a0refactoring\u00a0is\u00a0either\u00a0pretty\u00a0small\u00a0itself\u00a0or\u00a0a\u00a0combination\u00a0of\u00a0small: steps. As\u00a0a\u00a0result,\u00a0when\u00a0I\u2019m\u00a0refactoring,\u00a0my\u00a0code\u00a0doesn\u2019t\u00a0spend\u00a0much\u00a0time\u00a0in\u00a0a\u00a0broken\nstate,\u00a0allowing\u00a0me\u00a0to\u00a0stop\u00a0at\u00a0any\u00a0moment\u00a0even\u00a0if\u00a0I\u00a0haven\u2019t\u00a0finished. If\u00a0someone\u00a0says\u00a0their\u00a0code\u00a0was\u00a0broken\u00a0for\u00a0a\u00a0couple\u00a0of\u00a0days\u00a0while\u00a0they\u00a0are\nrefactoring,\u00a0you\u00a0can\u00a0be\u00a0pretty\u00a0sure\u00a0they\u00a0were\u00a0not\u00a0refactoring. I\u00a0use\u00a0\u201crestructuring\u201d\u00a0as\u00a0a\u00a0general\u00a0term\u00a0to\u00a0mean\u00a0any\u00a0kind\u00a0of\u00a0reorganizing\u00a0or\u00a0cleaning\u00a0up\nof\u00a0a\u00a0code\u00a0base,\u00a0and\u00a0see\u00a0refactoring\u00a0as\u00a0a\u00a0particular\u00a0kind\u00a0of\u00a0restructuring. Refactoring\nmay\u00a0seem\u00a0inefficient\u00a0to\u00a0people\u00a0who\u00a0first\u00a0come\u00a0across\u00a0it\u00a0and\u00a0watch\u00a0me\u00a0making\u00a0lots\u00a0of\ntiny\u00a0steps,\u00a0when\u00a0a\u00a0single\u00a0bigger\u00a0step\u00a0would\u00a0do. But\u00a0the\u00a0tiny\u00a0steps\u00a0allow\u00a0me\u00a0to\u00a0go\u00a0faster\nbecause\u00a0they\u00a0compose\u00a0so\u00a0well\u2014and,\u00a0crucially,\u00a0because\u00a0I\u00a0don\u2019t\u00a0spend\u00a0any\u00a0time\ndebugging. In\u00a0my\u00a0definitions,\u00a0I\u00a0use\u00a0the\u00a0phrase\u00a0\u201cobservable\u00a0behavior.\u201d\u00a0This\u00a0is\u00a0a\u00a0deliberately\u00a0loose\nterm,\u00a0indicating\u00a0that\u00a0the\u00a0code\u00a0should,\u00a0overall,\u00a0do\u00a0just\u00a0the\u00a0same\u00a0things\u00a0it\u00a0did\u00a0before\u00a0I\nstarted. It\u00a0doesn\u2019t\u00a0mean\u00a0it\u00a0will\u00a0work\u00a0exactly\u00a0the\u00a0same\u2014for\u00a0example,\u00a0Extract\u00a0Function\n(106)\u00a0will\u00a0alter\u00a0the\u00a0call\u00a0stack,\u00a0so\u00a0performance\u00a0characteristics\u00a0might\u00a0change\u2014but\u00a0nothing\nshould\u00a0change\u00a0that\u00a0the\u00a0user\u00a0should\u00a0care\u00a0about. In\u00a0particular,\u00a0interfaces\u00a0to\u00a0modules\noften\u00a0change\u00a0due\u00a0to\u00a0such\u00a0refactorings\u00a0as\u00a0Change\u00a0Function\u00a0Declaration\u00a0(124)\u00a0and\u00a0Move\nFunction\u00a0(198). Any\u00a0bugs\u00a0that\u00a0I\u00a0notice\u00a0during\u00a0refactoring\u00a0should\u00a0still\u00a0be\u00a0present\u00a0after\nrefactoring\u00a0(though\u00a0I\u00a0can\u00a0fix\u00a0latent\u00a0bugs\u00a0that\u00a0nobody\u00a0has\u00a0observed\u00a0yet). Refactoring\u00a0is\u00a0very\u00a0similar\u00a0to\u00a0performance\u00a0optimization,\u00a0as\u00a0both\u00a0involve\u00a0carrying\u00a0out\ncode\u00a0manipulations\u00a0that\u00a0don\u2019t\u00a0change\u00a0the\u00a0overall\u00a0functionality\u00a0of\u00a0the\u00a0program. The\ndifference\u00a0is\u00a0the\u00a0purpose:\u00a0Refactoring\u00a0is\u00a0always\u00a0done\u00a0to\u00a0make\u00a0the\u00a0code\u00a0\u201ceasier\u00a0to\nunderstand\u00a0and\u00a0cheaper\u00a0to\u00a0modify.\u201d\u00a0This\u00a0might\u00a0speed\u00a0things\u00a0up\u00a0or\u00a0slow\u00a0things\u00a0down. With\u00a0performance\u00a0optimization,\u00a0I\u00a0only\u00a0care\u00a0about\u00a0speeding\u00a0up\u00a0the\u00a0program,\u00a0and\u00a0am\nprepared\u00a0to\u00a0end\u00a0up\u00a0with\u00a0code\u00a0that\u00a0is\u00a0harder\u00a0to\u00a0work\u00a0with\u00a0if\u00a0I\u00a0really\u00a0need\u00a0that\u00a0improved\nperformance.", "domains": ["Design Patterns", "Software Quality Attributes", "Code Organization"], "source": "Refactoring.Improving.the.Design.of.Existing.Code.pdf", "section": "Page 57", "position": 57, "chunk_type": "semantic", "token_estimate": 336}
{"text": "when\u00a0I\u00a0have\u00a0to\u00a0accommodate\u00a0a\u00a0change\u00a0in\u00a0an\u00a0interface.: As\u00a0I\u00a0develop\u00a0software,\u00a0I\u00a0find\u00a0myself\u00a0swapping\u00a0hats\u00a0frequently. I\u00a0start\u00a0by\u00a0trying\u00a0to\u00a0add\u00a0a\nnew\u00a0capability,\u00a0then\u00a0I\u00a0realize\u00a0this\u00a0would\u00a0be\u00a0much\u00a0easier\u00a0if\u00a0the\u00a0code\u00a0were\u00a0structured\ndifferently.\u00a0So\u00a0I\u00a0swap\u00a0hats\u00a0and\u00a0refactor\u00a0for\u00a0a\u00a0while. Once\u00a0the\u00a0code\u00a0is\u00a0better\u00a0structured,\u00a0I\nswap\u00a0hats\u00a0back\u00a0and\u00a0add\u00a0the\u00a0new\u00a0capability. Once\u00a0I\u00a0get\u00a0the\u00a0new\u00a0capability\u00a0working,\u00a0I\nrealize\u00a0I\u00a0coded\u00a0it\u00a0in\u00a0a\u00a0way\u00a0that\u2019s\u00a0awkward\u00a0to\u00a0understand,\u00a0so\u00a0I\u00a0swap\u00a0hats\u00a0again\u00a0and\nrefactor. All\u00a0this\u00a0might\u00a0take\u00a0only\u00a0ten\u00a0minutes,\u00a0but\u00a0during\u00a0this\u00a0time\u00a0I\u2019m\u00a0always\u00a0aware\u00a0of\nwhich\u00a0hat\u00a0I\u2019m\u00a0wearing\u00a0and\u00a0the\u00a0subtle\u00a0difference\u00a0that\u00a0makes\u00a0to\u00a0how\u00a0I\u00a0program. WHY SHOULD WE REFACTOR? I\u00a0don\u2019t\u00a0want\u00a0to\u00a0claim\u00a0refactoring\u00a0is\u00a0the\u00a0cure\u00a0for\u00a0all\u00a0software\u00a0ills. It\u00a0is\u00a0no\u00a0\u201csilver\u00a0bullet.\u201d\nYet\u00a0it\u00a0is\u00a0a\u00a0valuable\u00a0tool\u2014a\u00a0pair\u00a0of\u00a0silver\u00a0pliers\u00a0that\u00a0helps\u00a0you\u00a0keep\u00a0a\u00a0good\u00a0grip\u00a0on\u00a0your\ncode.\u00a0Refactoring\u00a0is\u00a0a\u00a0tool\u00a0that\u00a0can\u2014and\u00a0should\u2014be\u00a0used\u00a0for\u00a0several\u00a0purposes. Refactoring Improves the Design of Software\nWithout\u00a0refactoring,\u00a0the\u00a0internal\u00a0design\u2014the\u00a0architecture\u2014of\u00a0software\u00a0tends\u00a0to\u00a0decay. As\u00a0people\u00a0change\u00a0code\u00a0to\u00a0achieve\u00a0short\u00adterm\u00a0goals,\u00a0often\u00a0without\u00a0a\u00a0full\u00a0comprehension\nof\u00a0the\u00a0architecture,\u00a0the\u00a0code\u00a0loses\u00a0its\u00a0structure. It\u00a0becomes\u00a0harder\u00a0for\u00a0me\u00a0to\u00a0see\u00a0the\ndesign\u00a0by\u00a0reading\u00a0the\u00a0code.\u00a0Loss\u00a0of\u00a0the\u00a0structure\u00a0of\u00a0code\u00a0has\u00a0a\u00a0cumulative\u00a0effect. The\nharder\u00a0it\u00a0is\u00a0to\u00a0see\u00a0the\u00a0design\u00a0in\u00a0the\u00a0code,\u00a0the\u00a0harder\u00a0it\u00a0is\u00a0for\u00a0me\u00a0to\u00a0preserve\u00a0it,\u00a0and\u00a0the\nmore\u00a0rapidly\u00a0it\u00a0decays.\u00a0Regular\u00a0refactoring\u00a0helps\u00a0keep\u00a0the\u00a0code\u00a0in\u00a0shape. Poorly\u00a0designed\u00a0code\u00a0usually\u00a0takes\u00a0more\u00a0code\u00a0to\u00a0do\u00a0the\u00a0same\u00a0things,\u00a0often\u00a0because\u00a0the\ncode\u00a0quite\u00a0literally\u00a0does\u00a0the\u00a0same\u00a0thing\u00a0in\u00a0several\u00a0places. Thus\u00a0an\u00a0important\u00a0aspect\u00a0of\nimproving\u00a0design\u00a0is\u00a0to\u00a0eliminate\u00a0duplicated\u00a0code. It\u2019s\u00a0not\u00a0that\u00a0reducing\u00a0the\u00a0amount\u00a0of\ncode\u00a0will\u00a0make\u00a0the\u00a0system\u00a0run\u00a0any\u00a0faster\u2014the\u00a0effect\u00a0on\u00a0the\u00a0footprint\u00a0of\u00a0the\u00a0programs\nrarely\u00a0is\u00a0significant. Reducing\u00a0the\u00a0amount\u00a0of\u00a0code\u00a0does,\u00a0however,\u00a0make\u00a0a\u00a0big\u00a0difference\nin\u00a0modification\u00a0of\u00a0the\u00a0code.\u00a0The\u00a0more\u00a0code\u00a0there\u00a0is,\u00a0the\u00a0harder\u00a0it\u00a0is\u00a0to\u00a0modify\u00a0correctly. There\u2019s\u00a0more\u00a0code\u00a0for\u00a0me\u00a0to\u00a0understand. I\u00a0change\u00a0this\u00a0bit\u00a0of\u00a0code\u00a0here,\u00a0but\u00a0the\u00a0system\ndoesn\u2019t\u00a0do\u00a0what\u00a0I\u00a0expect\u00a0because\u00a0I\u00a0didn\u2019t\u00a0change\u00a0that\u00a0bit\u00a0over\u00a0there\u00a0that\u00a0does\u00a0much\u00a0the\nsame\u00a0thing\u00a0in\u00a0a\u00a0slightly\u00a0different\u00a0context.", "domains": ["Code Organization"], "source": "Refactoring.Improving.the.Design.of.Existing.Code.pdf", "section": "Page 58", "position": 58, "chunk_type": "semantic", "token_estimate": 400}
{"text": "when\u00a0I\u00a0have\u00a0to\u00a0accommodate\u00a0a\u00a0change\u00a0in\u00a0an\u00a0interface.: There\u2019s\u00a0more\u00a0code\u00a0for\u00a0me\u00a0to\u00a0understand. I\u00a0change\u00a0this\u00a0bit\u00a0of\u00a0code\u00a0here,\u00a0but\u00a0the\u00a0system\ndoesn\u2019t\u00a0do\u00a0what\u00a0I\u00a0expect\u00a0because\u00a0I\u00a0didn\u2019t\u00a0change\u00a0that\u00a0bit\u00a0over\u00a0there\u00a0that\u00a0does\u00a0much\u00a0the\nsame\u00a0thing\u00a0in\u00a0a\u00a0slightly\u00a0different\u00a0context. By\u00a0eliminating\u00a0duplication,\u00a0I\u00a0ensure\u00a0that\u00a0the\ncode\u00a0says\u00a0everything\u00a0once\u00a0and\u00a0only\u00a0once,\u00a0which\u00a0is\u00a0the\u00a0essence\u00a0of\u00a0good\u00a0design. Refactoring Makes Software Easier to Understand\nProgramming\u00a0is\u00a0in\u00a0many\u00a0ways\u00a0a\u00a0conversation\u00a0with\u00a0a\u00a0computer. I\u00a0write\u00a0code\u00a0that\u00a0tells\nthe\u00a0computer\u00a0what\u00a0to\u00a0do,\u00a0and\u00a0it\u00a0responds\u00a0by\u00a0doing\u00a0exactly\u00a0what\u00a0I\u00a0tell\u00a0it. In\u00a0time,\u00a0I\u00a0close\nthe\u00a0gap\u00a0between\u00a0what\u00a0I\u00a0want\u00a0it\u00a0to\u00a0do\u00a0and\u00a0what\u00a0I\u00a0tell\u00a0it\u00a0to\u00a0do. Programming\u00a0is\u00a0all\u00a0about\nwww.EBooksWorld.ir", "domains": ["Code Organization"], "source": "Refactoring.Improving.the.Design.of.Existing.Code.pdf", "section": "Page 58", "position": 58, "chunk_type": "semantic", "token_estimate": 133}
{"text": "improve\u00a0quality.\u00a0But\u00a0doesn\u2019t\u00a0the\u00a0time\u00a0I\u00a0spend\u00a0on\u00a0refactoring\u00a0reduce\u00a0the\u00a0speed\u00a0of: development? When\u00a0I\u00a0talk\u00a0to\u00a0software\u00a0developers\u00a0who\u00a0have\u00a0been\u00a0working\u00a0on\u00a0a\u00a0system\u00a0for\u00a0a\u00a0while,\u00a0I\noften\u00a0hear\u00a0that\u00a0they\u00a0were\u00a0able\u00a0to\u00a0make\u00a0progress\u00a0rapidly\u00a0at\u00a0first,\u00a0but\u00a0now\u00a0it\u00a0takes\u00a0much\nlonger\u00a0to\u00a0add\u00a0new\u00a0features. Every\u00a0new\u00a0feature\u00a0requires\u00a0more\u00a0and\u00a0more\u00a0time\u00a0to\nunderstand\u00a0how\u00a0to\u00a0fit\u00a0it\u00a0into\u00a0the\u00a0existing\u00a0code\u00a0base,\u00a0and\u00a0once\u00a0it\u2019s\u00a0added,\u00a0bugs\u00a0often\u00a0crop\nup\u00a0that\u00a0take\u00a0even\u00a0longer\u00a0to\u00a0fix. The\u00a0code\u00a0base\u00a0starts\u00a0looking\u00a0like\u00a0a\u00a0series\u00a0of\u00a0patches\ncovering\u00a0patches,\u00a0and\u00a0it\u00a0takes\u00a0an\u00a0exercise\u00a0in\u00a0archaeology\u00a0to\u00a0figure\u00a0out\u00a0how\u00a0things\u00a0work. This\u00a0burden\u00a0slows\u00a0down\u00a0adding\u00a0new\u00a0features\u2014to\u00a0the\u00a0point\u00a0that\u00a0developers\u00a0wish\u00a0they\ncould\u00a0start\u00a0again\u00a0from\u00a0a\u00a0blank\u00a0slate. I\u00a0can\u00a0visualize\u00a0this\u00a0state\u00a0of\u00a0affairs\u00a0with\u00a0the\u00a0following\u00a0pseudograph:\nBut\u00a0some\u00a0teams\u00a0report\u00a0a\u00a0different\u00a0experience. They\u00a0find\u00a0they\u00a0can\u00a0add\u00a0new\u00a0features\nfaster\u00a0because\u00a0they\u00a0can\u00a0leverage\u00a0the\u00a0existing\u00a0things\u00a0by\u00a0quickly\u00a0building\u00a0on\u00a0what\u2019s\nalready\u00a0there. www.EBooksWorld.ir", "domains": ["Design Patterns"], "source": "Refactoring.Improving.the.Design.of.Existing.Code.pdf", "section": "Page 60", "position": 60, "chunk_type": "semantic", "token_estimate": 173}
{"text": "The\u00a0difference\u00a0between\u00a0these\u00a0two\u00a0is\u00a0the\u00a0internal\u00a0quality\u00a0of\u00a0the\u00a0software.\u00a0Software\u00a0with\u00a0a: good\u00a0internal\u00a0design\u00a0allows\u00a0me\u00a0to\u00a0easily\u00a0find\u00a0how\u00a0and\u00a0where\u00a0I\u00a0need\u00a0to\u00a0make\u00a0changes\u00a0to\nadd\u00a0a\u00a0new\u00a0feature. Good\u00a0modularity\u00a0allows\u00a0me\u00a0to\u00a0only\u00a0have\u00a0to\u00a0understand\u00a0a\u00a0small\nsubset\u00a0of\u00a0the\u00a0code\u00a0base\u00a0to\u00a0make\u00a0a\u00a0change. If\u00a0the\u00a0code\u00a0is\u00a0clear,\u00a0I\u2019m\u00a0less\u00a0likely\u00a0to\u00a0introduce\na\u00a0bug,\u00a0and\u00a0if\u00a0I\u00a0do,\u00a0the\u00a0debugging\u00a0effort\u00a0is\u00a0much\u00a0easier. Done\u00a0well,\u00a0my\u00a0code\u00a0base\u00a0turns\ninto\u00a0a\u00a0platform\u00a0for\u00a0building\u00a0new\u00a0features\u00a0for\u00a0its\u00a0domain. I\u00a0refer\u00a0to\u00a0this\u00a0effect\u00a0as\u00a0the\u00a0Design\u00a0Stamina\u00a0Hypothesis\u00a0[mf\u00addsh]:\u00a0By\u00a0putting\u00a0our\u00a0effort\ninto\u00a0a\u00a0good\u00a0internal\u00a0design,\u00a0we\u00a0increase\u00a0the\u00a0stamina\u00a0of\u00a0the\u00a0software\u00a0effort,\u00a0allowing\u00a0us\nto\u00a0go\u00a0faster\u00a0for\u00a0longer. I\u00a0can\u2019t\u00a0prove\u00a0that\u00a0this\u00a0is\u00a0the\u00a0case,\u00a0which\u00a0is\u00a0why\u00a0I\u00a0refer\u00a0to\u00a0it\u00a0as\u00a0a\nhypothesis. But\u00a0it\u00a0explains\u00a0my\u00a0experience,\u00a0together\u00a0with\u00a0the\u00a0experience\u00a0of\u00a0hundreds\u00a0of\ngreat\u00a0programmers\u00a0that\u00a0I\u2019ve\u00a0got\u00a0to\u00a0know\u00a0over\u00a0my\u00a0career. Twenty\u00a0years\u00a0ago,\u00a0the\u00a0conventional\u00a0wisdom\u00a0was\u00a0that\u00a0to\u00a0get\u00a0this\u00a0kind\u00a0of\u00a0good\u00a0design,\u00a0it\nhad\u00a0to\u00a0be\u00a0completed\u00a0before\u00a0starting\u00a0to\u00a0program\u2014because\u00a0once\u00a0we\u00a0wrote\u00a0the\u00a0code,\u00a0we\ncould\u00a0only\u00a0face\u00a0decay.\u00a0Refactoring\u00a0changes\u00a0this\u00a0picture. We\u00a0now\u00a0know\u00a0we\u00a0can\u00a0improve\nthe\u00a0design\u00a0of\u00a0existing\u00a0code\u2014so\u00a0we\u00a0can\u00a0form\u00a0and\u00a0improve\u00a0a\u00a0design\u00a0over\u00a0time,\u00a0even\u00a0as\u00a0the\nneeds\u00a0of\u00a0the\u00a0program\u00a0change. Since\u00a0it\u00a0is\u00a0very\u00a0difficult\u00a0to\u00a0do\u00a0a\u00a0good\u00a0design\u00a0up\u00a0front,\nrefactoring\u00a0becomes\u00a0vital\u00a0to\u00a0achieving\u00a0that\u00a0virtuous\u00a0path\u00a0of\u00a0rapid\u00a0functionality. WHEN SHOULD WE REFACTOR? Refactoring\u00a0is\u00a0something\u00a0I\u00a0do\u00a0every\u00a0hour\u00a0I\u00a0program. I\u00a0have\u00a0noticed\u00a0a\u00a0number\u00a0of\u00a0ways\u00a0it\nfits\u00a0into\u00a0my\u00a0workflow. www.EBooksWorld.ir", "domains": ["Software Quality Attributes"], "source": "Refactoring.Improving.the.Design.of.Existing.Code.pdf", "section": "Page 61", "position": 61, "chunk_type": "semantic", "token_estimate": 284}
{"text": "than\u00a0in\u00a0the\u00a0new\u00a0code.: All\u00a0this\u00a0doesn\u2019t\u00a0mean\u00a0that\u00a0planned\u00a0refactoring\u00a0is\u00a0always\u00a0wrong. If\u00a0a\u00a0team\u00a0has\u00a0neglected\nrefactoring,\u00a0it\u00a0often\u00a0needs\u00a0dedicated\u00a0time\u00a0to\u00a0get\u00a0their\u00a0code\u00a0base\u00a0into\u00a0a\u00a0better\u00a0state\u00a0for\nnew\u00a0features,\u00a0and\u00a0a\u00a0week\u00a0spent\u00a0refactoring\u00a0now\u00a0can\u00a0repay\u00a0itself\u00a0over\u00a0the\u00a0next\u00a0couple\u00a0of\nmonths. Sometimes,\u00a0even\u00a0with\u00a0regular\u00a0refactoring\u00a0I\u2019ll\u00a0see\u00a0a\u00a0problem\u00a0area\u00a0grow\u00a0to\u00a0the\npoint\u00a0when\u00a0it\u00a0needs\u00a0some\u00a0concerted\u00a0effort\u00a0to\u00a0fix. But\u00a0such\u00a0planned\u00a0refactoring\u00a0episodes\nshould\u00a0be\u00a0rare.\u00a0Most\u00a0refactoring\u00a0effort\u00a0should\u00a0be\u00a0the\u00a0unremarkable,\u00a0opportunistic\u00a0kind. One\u00a0bit\u00a0of\u00a0advice\u00a0I\u2019ve\u00a0heard\u00a0is\u00a0to\u00a0separate\u00a0refactoring\u00a0work\u00a0and\u00a0new\u00a0feature\u00a0additions\ninto\u00a0different\u00a0version\u00adcontrol\u00a0commits. The\u00a0big\u00a0advantage\u00a0of\u00a0this\u00a0is\u00a0that\u00a0they\u00a0can\u00a0be\nreviewed\u00a0and\u00a0approved\u00a0independently.\u00a0I\u2019m\u00a0not\u00a0convinced\u00a0of\u00a0this,\u00a0however. Too\u00a0often,\nthe\u00a0refactorings\u00a0are\u00a0closely\u00a0interwoven\u00a0with\u00a0adding\u00a0new\u00a0features,\u00a0and\u00a0it\u2019s\u00a0not\u00a0worth\u00a0the\ntime\u00a0to\u00a0separate\u00a0them\u00a0out. This\u00a0can\u00a0also\u00a0remove\u00a0the\u00a0context\u00a0for\u00a0the\u00a0refactoring,\u00a0making\nthe\u00a0refactoring\u00a0commits\u00a0hard\u00a0to\u00a0justify. Each\u00a0team\u00a0should\u00a0experiment\u00a0to\u00a0find\u00a0what\nworks\u00a0for\u00a0them\u037e\u00a0just\u00a0remember\u00a0that\u00a0separating\u00a0refactoring\u00a0commits\u00a0is\u00a0not\u00a0a\u00a0self\u00adevident\nprinciple\u2014it\u2019s\u00a0only\u00a0worthwhile\u00a0if\u00a0it\u00a0makes\u00a0life\u00a0easier. Long-Term Refactoring\nMost\u00a0refactoring\u00a0can\u00a0be\u00a0completed\u00a0within\u00a0a\u00a0few\u00a0minutes\u2014hours\u00a0at\u00a0most. But\u00a0there\u00a0are\nsome\u00a0larger\u00a0refactoring\u00a0efforts\u00a0that\u00a0can\u00a0take\u00a0a\u00a0team\u00a0weeks\u00a0to\u00a0complete. Perhaps\u00a0they\nneed\u00a0to\u00a0replace\u00a0an\u00a0existing\u00a0library\u00a0with\u00a0a\u00a0new\u00a0one. Or\u00a0pull\u00a0some\u00a0section\u00a0of\u00a0code\u00a0out\u00a0into\na\u00a0component\u00a0that\u00a0they\u00a0can\u00a0share\u00a0with\u00a0another\u00a0team. Or\u00a0fix\u00a0some\u00a0nasty\u00a0mess\u00a0of\ndependencies\u00a0that\u00a0they\u00a0had\u00a0allowed\u00a0to\u00a0build\u00a0up. Even\u00a0in\u00a0such\u00a0cases,\u00a0I\u2019m\u00a0reluctant\u00a0to\u00a0have\u00a0a\u00a0team\u00a0do\u00a0dedicated\u00a0refactoring. Often,\u00a0a\nuseful\u00a0strategy\u00a0is\u00a0to\u00a0agree\u00a0to\u00a0gradually\u00a0work\u00a0on\u00a0the\u00a0problem\u00a0over\u00a0the\u00a0course\u00a0of\u00a0the\u00a0next\nfew\u00a0weeks. Whenever\u00a0anyone\u00a0goes\u00a0near\u00a0any\u00a0code\u00a0that\u2019s\u00a0in\u00a0the\u00a0refactoring\u00a0zone,\u00a0they\nmove\u00a0it\u00a0a\u00a0little\u00a0way\u00a0in\u00a0the\u00a0direction\u00a0they\u00a0want\u00a0to\u00a0improve. This\u00a0takes\u00a0advantage\u00a0of\u00a0the\nfact\u00a0that\u00a0refactoring\u00a0doesn\u2019t\u00a0break\u00a0the\u00a0code\u2014each\u00a0small\u00a0change\u00a0leaves\u00a0everything\u00a0in\u00a0a\nstill\u00adworking\u00a0state. To\u00a0change\u00a0from\u00a0one\u00a0library\u00a0to\u00a0another,\u00a0start\u00a0by\u00a0introducing\u00a0a\u00a0new\nabstraction\u00a0that\u00a0can\u00a0act\u00a0as\u00a0an\u00a0interface\u00a0to\u00a0either\u00a0library. Once\u00a0the\u00a0calling\u00a0code\u00a0uses\u00a0this\nabstraction,\u00a0it\u2019s\u00a0much\u00a0easier\u00a0to\u00a0switch\u00a0one\u00a0library\u00a0for\u00a0another. (This\u00a0tactic\u00a0is\u00a0called\nBranch\u00a0By\u00a0Abstraction\u00a0[mf\u00adbba].)", "domains": ["Design Patterns", "Code Organization"], "source": "Refactoring.Improving.the.Design.of.Existing.Code.pdf", "section": "Page 65", "position": 65, "chunk_type": "semantic", "token_estimate": 391}
{"text": "But\u00a0I\u00a0think\u00a0the\u00a0most\u00a0dangerous\u00a0way\u00a0that\u00a0people\u00a0get\u00a0trapped\u00a0is\u00a0when\u00a0they\u00a0try\u00a0to\u00a0justify: refactoring\u00a0in\u00a0terms\u00a0of\u00a0\u201cclean\u00a0code,\u201d\u00a0\u201cgood\u00a0engineering\u00a0practice,\u201d\u00a0or\u00a0similar\u00a0moral\nreasons. The\u00a0point\u00a0of\u00a0refactoring\u00a0isn\u2019t\u00a0to\u00a0show\u00a0how\u00a0sparkly\u00a0a\u00a0code\u00a0base\u00a0is\u2014it\u00a0is\u00a0purely\neconomic. We\u00a0refactor\u00a0because\u00a0it\u00a0makes\u00a0us\u00a0faster\u2014faster\u00a0to\u00a0add\u00a0features,\u00a0faster\u00a0to\u00a0fix\nbugs. It\u2019s\u00a0important\u00a0to\u00a0keep\u00a0that\u00a0in\u00a0front\u00a0of\u00a0your\u00a0mind\u00a0and\u00a0in\u00a0front\u00a0of\u00a0communication\nwith\u00a0others. The\u00a0economic\u00a0benefits\u00a0of\u00a0refactoring\u00a0should\u00a0always\u00a0be\u00a0the\u00a0driving\u00a0factor,\nand\u00a0the\u00a0more\u00a0that\u00a0is\u00a0understood\u00a0by\u00a0developers,\u00a0managers,\u00a0and\u00a0customers,\u00a0the\u00a0more\u00a0of\nthe\u00a0\u201cgood\u00a0design\u201d\u00a0curve\u00a0we\u2019ll\u00a0see. Code Ownership\nMany\u00a0refactorings\u00a0involve\u00a0making\u00a0changes\u00a0that\u00a0affect\u00a0not\u00a0just\u00a0the\u00a0internals\u00a0of\u00a0a\u00a0module\nbut\u00a0its\u00a0relationships\u00a0with\u00a0other\u00a0parts\u00a0of\u00a0a\u00a0system. If\u00a0I\u00a0want\u00a0to\u00a0rename\u00a0a\u00a0function,\u00a0and\u00a0I\ncan\u00a0find\u00a0all\u00a0the\u00a0callers\u00a0to\u00a0a\u00a0function,\u00a0I\u00a0simply\u00a0apply\u00a0Change\u00a0Function\u00a0Declaration\u00a0(124)\nand\u00a0change\u00a0the\u00a0declaration\u00a0and\u00a0the\u00a0callers\u00a0in\u00a0one\u00a0change. But\u00a0sometimes\u00a0this\u00a0simple\nrefactoring\u00a0isn\u2019t\u00a0possible. Perhaps\u00a0the\u00a0calling\u00a0code\u00a0is\u00a0owned\u00a0by\u00a0a\u00a0different\u00a0team\u00a0and\u00a0I\ndon\u2019t\u00a0have\u00a0write\u00a0access\u00a0to\u00a0their\u00a0repository. Perhaps\u00a0the\u00a0function\u00a0is\u00a0a\u00a0declared\u00a0API\u00a0used\nby\u00a0my\u00a0customers\u2014so\u00a0I\u00a0can\u2019t\u00a0even\u00a0tell\u00a0if\u00a0it\u2019s\u00a0being\u00a0used,\u00a0let\u00a0alone\u00a0by\u00a0who\u00a0and\u00a0how\u00a0much. Such\u00a0functions\u00a0are\u00a0part\u00a0of\u00a0a\u00a0published\u00a0interface\u2014an\u00a0interface\u00a0that\u00a0is\u00a0used\u00a0by\u00a0clients\nindependent\u00a0of\u00a0those\u00a0who\u00a0declare\u00a0the\u00a0interface. Code\u00a0ownership\u00a0boundaries\u00a0get\u00a0in\u00a0the\u00a0way\u00a0of\u00a0refactoring\u00a0because\u00a0I\u00a0cannot\u00a0make\u00a0the\nkinds\u00a0of\u00a0changes\u00a0I\u00a0want\u00a0without\u00a0breaking\u00a0my\u00a0clients. This\u00a0doesn\u2019t\u00a0prevent\u00a0refactoring\u2014\nI\u00a0can\u00a0still\u00a0do\u00a0a\u00a0great\u00a0deal\u2014but\u00a0it\u00a0does\u00a0impose\u00a0limitations. When\u00a0renaming\u00a0a\u00a0function,\u00a0I\nneed\u00a0to\u00a0use\u00a0Rename\u00a0Function\u00a0(124)\u00a0and\u00a0to\u00a0retain\u00a0the\u00a0old\u00a0declaration\u00a0as\u00a0a\u00a0pass\u00adthrough\nto\u00a0the\u00a0new\u00a0one. This\u00a0complicates\u00a0the\u00a0interface\u2014but\u00a0it\u00a0is\u00a0the\u00a0price\u00a0I\u00a0must\u00a0pay\u00a0to\u00a0avoid\nbreaking\u00a0my\u00a0clients. I\u00a0may\u00a0be\u00a0able\u00a0to\u00a0mark\u00a0the\u00a0old\u00a0interface\u00a0as\u00a0deprecated\u00a0and,\u00a0in\u00a0time,\nretire\u00a0it,\u00a0but\u00a0sometimes\u00a0I\u00a0have\u00a0to\u00a0retain\u00a0that\u00a0interface\u00a0forever. Due\u00a0to\u00a0these\u00a0complexities,\u00a0I\u00a0recommend\u00a0against\u00a0fine\u00adgrained\u00a0strong\u00a0code\u00a0ownership. Some\u00a0organizations\u00a0like\u00a0any\u00a0piece\u00a0of\u00a0code\u00a0to\u00a0have\u00a0a\u00a0single\u00a0programmer\u00a0as\u00a0an\u00a0owner,\nand\u00a0only\u00a0allow\u00a0that\u00a0programmer\u00a0to\u00a0change\u00a0it. I\u2019ve\u00a0seen\u00a0a\u00a0team\u00a0of\u00a0three\u00a0people\u00a0operate\nin\u00a0such\u00a0a\u00a0way\u00a0that\u00a0each\u00a0one\u00a0published\u00a0interfaces\u00a0to\u00a0the\u00a0other\u00a0two.", "domains": ["Domain-Driven Design", "Code Organization"], "source": "Refactoring.Improving.the.Design.of.Existing.Code.pdf", "section": "Page 69", "position": 69, "chunk_type": "semantic", "token_estimate": 398}
{"text": "To\u00a0some\u00a0readers,\u00a0self\u00adtesting\u00a0code\u00a0sounds\u00a0like\u00a0a\u00a0requirement\u00a0so\u00a0steep\u00a0as\u00a0to\u00a0be: unrealizable. But\u00a0over\u00a0the\u00a0last\u00a0couple\u00a0of\u00a0decades,\u00a0I\u2019ve\u00a0seen\u00a0many\u00a0teams\u00a0build\u00a0software\nthis\u00a0way. It\u00a0takes\u00a0attention\u00a0and\u00a0dedication\u00a0to\u00a0testing,\u00a0but\u00a0the\u00a0benefits\u00a0make\u00a0it\u00a0really\nworthwhile. Self\u00adtesting\u00a0code\u00a0not\u00a0only\u00a0enables\u00a0refactoring\u2014it\u00a0also\u00a0makes\u00a0it\u00a0much\u00a0safer\nto\u00a0add\u00a0new\u00a0features,\u00a0since\u00a0I\u00a0can\u00a0quickly\u00a0find\u00a0and\u00a0kill\u00a0any\u00a0bugs\u00a0I\u00a0introduce. The\u00a0key\u00a0point\nhere\u00a0is\u00a0that\u00a0when\u00a0a\u00a0test\u00a0fails,\u00a0I\u00a0can\u00a0look\u00a0at\u00a0the\u00a0change\u00a0I\u2019ve\u00a0made\u00a0between\u00a0when\u00a0the\u00a0tests\nwere\u00a0last\u00a0running\u00a0correctly\u00a0and\u00a0the\u00a0current\u00a0code. With\u00a0frequent\u00a0test\u00a0runs,\u00a0that\u00a0will\u00a0be\nonly\u00a0a\u00a0few\u00a0lines\u00a0of\u00a0code. By\u00a0knowing\u00a0it\u00a0was\u00a0those\u00a0few\u00a0lines\u00a0that\u00a0caused\u00a0the\u00a0failure,\u00a0I\u00a0can\nmuch\u00a0more\u00a0easily\u00a0find\u00a0the\u00a0bug. This\u00a0also\u00a0answers\u00a0those\u00a0who\u00a0are\u00a0concerned\u00a0that\u00a0refactoring\u00a0carries\u00a0too\u00a0much\u00a0risk\u00a0of\nintroducing\u00a0bugs. Without\u00a0self\u00adtesting\u00a0code,\u00a0that\u2019s\u00a0a\u00a0reasonable\u00a0worry\u2014which\u00a0is\u00a0why\u00a0I\nput\u00a0so\u00a0much\u00a0emphasis\u00a0on\u00a0having\u00a0solid\u00a0tests. There\u00a0is\u00a0another\u00a0way\u00a0to\u00a0deal\u00a0with\u00a0the\u00a0testing\u00a0problem. If\u00a0I\u00a0use\u00a0an\u00a0environment\u00a0that\u00a0has\ngood\u00a0automated\u00a0refactorings,\u00a0I\u00a0can\u00a0trust\u00a0those\u00a0refactorings\u00a0even\u00a0without\u00a0running\u00a0tests. I\u00a0can\u00a0then\u00a0refactor,\u00a0providing\u00a0I\u00a0only\u00a0use\u00a0those\u00a0refactorings\u00a0that\u00a0are\u00a0safely\u00a0automated. This\u00a0removes\u00a0a\u00a0lot\u00a0of\u00a0nice\u00a0refactorings\u00a0from\u00a0my\u00a0menu,\u00a0but\u00a0still\u00a0leaves\u00a0me\u00a0enough\u00a0to\ndeliver\u00a0some\u00a0useful\u00a0benefits. I\u2019d\u00a0still\u00a0rather\u00a0have\u00a0self\u00adtesting\u00a0code,\u00a0but\u00a0it\u2019s\u00a0an\u00a0option\u00a0that\nis\u00a0useful\u00a0to\u00a0have\u00a0in\u00a0the\u00a0toolkit. This\u00a0also\u00a0inspires\u00a0a\u00a0style\u00a0of\u00a0refactoring\u00a0that\u00a0only\u00a0uses\u00a0a\u00a0limited\u00a0set\u00a0of\u00a0refactorings\u00a0that\ncan\u00a0be\u00a0proven\u00a0safe. Such\u00a0refactorings\u00a0require\u00a0carefully\u00a0following\u00a0the\u00a0steps,\u00a0and\u00a0are\nlanguage\u00adspecific. But\u00a0teams\u00a0using\u00a0them\u00a0have\u00a0found\u00a0they\u00a0can\u00a0do\u00a0useful\u00a0refactoring\u00a0on\nlarge\u00a0code\u00a0bases\u00a0with\u00a0poor\u00a0test\u00a0coverage. I\u00a0don\u2019t\u00a0focus\u00a0on\u00a0that\u00a0in\u00a0this\u00a0book,\u00a0as\u00a0it\u2019s\u00a0a\nnewer,\u00a0less\u00a0described\u00a0and\u00a0understood\u00a0technique\u00a0that\u00a0involves\u00a0detailed,\u00a0language\u00ad\nspecific\u00a0activity. (It\u00a0is,\u00a0however,\u00a0something\u00a0I\u00a0hope\u00a0talk\u00a0about\u00a0more\u00a0on\u00a0my\u00a0web\u00a0site\u00a0in\u00a0the\nfuture. For\u00a0a\u00a0taste\u00a0of\u00a0it,\u00a0see\u00a0Jay\u00a0Bazuzi\u2019s\u00a0description\u00a0[Bazuzi]\u00a0of\u00a0a\u00a0safer\u00a0way\u00a0to\u00a0do\nExtract\u00a0Method\u00a0(106)\u00a0in\u00a0C++.) Self\u00adtesting\u00a0code\u00a0is,\u00a0unsurprisingly,\u00a0closely\u00a0associated\u00a0with\u00a0Continuous\u00a0Integration\u2014it\nis\u00a0the\u00a0mechanism\u00a0that\u00a0we\u00a0use\u00a0to\u00a0catch\u00a0semantic\u00a0integration\u00a0conflicts. Such\u00a0testing\npractices\u00a0are\u00a0another\u00a0component\u00a0of\u00a0Extreme\u00a0Programming\u00a0and\u00a0a\u00a0key\u00a0part\u00a0of\nContinuous\u00a0Delivery.", "domains": ["Design Principles", "Code Organization"], "source": "Refactoring.Improving.the.Design.of.Existing.Code.pdf", "section": "Page 72", "position": 72, "chunk_type": "semantic", "token_estimate": 392}
{"text": "To\u00a0some\u00a0readers,\u00a0self\u00adtesting\u00a0code\u00a0sounds\u00a0like\u00a0a\u00a0requirement\u00a0so\u00a0steep\u00a0as\u00a0to\u00a0be: Self\u00adtesting\u00a0code\u00a0is,\u00a0unsurprisingly,\u00a0closely\u00a0associated\u00a0with\u00a0Continuous\u00a0Integration\u2014it\nis\u00a0the\u00a0mechanism\u00a0that\u00a0we\u00a0use\u00a0to\u00a0catch\u00a0semantic\u00a0integration\u00a0conflicts. Such\u00a0testing\npractices\u00a0are\u00a0another\u00a0component\u00a0of\u00a0Extreme\u00a0Programming\u00a0and\u00a0a\u00a0key\u00a0part\u00a0of\nContinuous\u00a0Delivery. Legacy Code\nMost\u00a0people\u00a0would\u00a0regard\u00a0a\u00a0big\u00a0legacy\u00a0as\u00a0a\u00a0Good\u00a0Thing\u2014but\u00a0that\u2019s\u00a0one\u00a0of\u00a0the\u00a0cases\nwhere\u00a0programmers\u2019\u00a0view\u00a0is\u00a0different. Legacy\u00a0code\u00a0is\u00a0often\u00a0complex,\u00a0frequently\u00a0comes\nwith\u00a0poor\u00a0tests,\u00a0and,\u00a0above\u00a0all,\u00a0is\u00a0written\u00a0by\u00a0Someone\u00a0Else\u00a0(shudder). www.EBooksWorld.ir", "domains": ["Code Organization"], "source": "Refactoring.Improving.the.Design.of.Existing.Code.pdf", "section": "Page 72", "position": 72, "chunk_type": "semantic", "token_estimate": 93}
{"text": "Refactoring\u00a0can\u00a0be\u00a0a\u00a0fantastic\u00a0tool\u00a0to\u00a0help\u00a0understand\u00a0a\u00a0legacy\u00a0system.\u00a0Functions\u00a0with: If\u00a0this\u00a0is\u00a0a\u00a0large\u00a0system,\u00a0I\u2019ll\u00a0do\u00a0more\nrefactoring\u00a0in\u00a0areas\u00a0I\u00a0visit\u00a0frequently\u2014which\u00a0is\u00a0the\u00a0right\u00a0thing\u00a0to\u00a0do\u00a0because,\u00a0if\u00a0I\u00a0need\u00a0to\nvisit\u00a0code\u00a0frequently,\u00a0I\u2019ll\u00a0get\u00a0a\u00a0bigger\u00a0payoff\u00a0by\u00a0making\u00a0it\u00a0easier\u00a0to\u00a0understand. Databases\nWhen\u00a0I\u00a0wrote\u00a0the\u00a0first\u00a0edition\u00a0of\u00a0this\u00a0book,\u00a0I\u00a0said\u00a0that\u00a0refactoring\u00a0databases\u00a0was\u00a0a\nproblem\u00a0area.\u00a0But,\u00a0within\u00a0a\u00a0year\u00a0of\u00a0the\u00a0book\u2019s\u00a0publication,\u00a0that\u00a0was\u00a0no\u00a0longer\u00a0the\u00a0case. My\u00a0colleague\u00a0Pramod\u00a0Sadalage\u00a0developed\u00a0an\u00a0approach\u00a0to\u00a0evolutionary\u00a0database\u00a0design\n[mf\u00adevodb]\u00a0and\u00a0database\u00a0refactoring\u00a0[Ambler\u00a0&\u00a0Sadalage]\u00a0that\u00a0is\u00a0now\u00a0widely\u00a0used. The\nessence\u00a0of\u00a0the\u00a0technique\u00a0is\u00a0to\u00a0combine\u00a0the\u00a0structural\u00a0changes\u00a0to\u00a0a\u00a0database\u2019s\u00a0schema\nand\u00a0access\u00a0code\u00a0with\u00a0data\u00a0migration\u00a0scripts\u00a0that\u00a0can\u00a0easily\u00a0compose\u00a0to\u00a0handle\u00a0large\nchanges. Consider\u00a0a\u00a0simple\u00a0example\u00a0of\u00a0renaming\u00a0a\u00a0field\u00a0(column). As\u00a0in\u00a0Change\u00a0Function\nDeclaration\u00a0(124),\u00a0I\u00a0need\u00a0to\u00a0find\u00a0the\u00a0original\u00a0declaration\u00a0of\u00a0the\u00a0structure\u00a0and\u00a0all\u00a0the\nwww.EBooksWorld.ir", "domains": ["Design Patterns"], "source": "Refactoring.Improving.the.Design.of.Existing.Code.pdf", "section": "Page 73", "position": 73, "chunk_type": "semantic", "token_estimate": 169}
{"text": "callers\u00a0of\u00a0this\u00a0structure\u00a0and\u00a0change\u00a0them\u00a0in\u00a0a\u00a0single\u00a0change.\u00a0The\u00a0complication,: however,\u00a0is\u00a0that\u00a0I\u00a0also\u00a0have\u00a0to\u00a0transform\u00a0any\u00a0data\u00a0that\u00a0uses\u00a0the\u00a0old\u00a0field\u00a0to\u00a0use\u00a0the\u00a0new\none. I\u00a0write\u00a0a\u00a0small\u00a0hunk\u00a0of\u00a0code\u00a0that\u00a0carries\u00a0out\u00a0this\u00a0transform\u00a0and\u00a0store\u00a0it\u00a0in\u00a0version\ncontrol,\u00a0together\u00a0with\u00a0the\u00a0code\u00a0that\u00a0changes\u00a0any\u00a0declared\u00a0structure\u00a0and\u00a0access\u00a0routines. Then,\u00a0whenever\u00a0I\u00a0need\u00a0to\u00a0migrate\u00a0between\u00a0two\u00a0versions\u00a0of\u00a0the\u00a0database,\u00a0I\u00a0run\u00a0all\u00a0the\nmigration\u00a0scripts\u00a0that\u00a0exist\u00a0between\u00a0my\u00a0current\u00a0copy\u00a0of\u00a0the\u00a0database\u00a0and\u00a0my\u00a0desired\nversion. As\u00a0with\u00a0regular\u00a0refactoring,\u00a0the\u00a0key\u00a0here\u00a0is\u00a0that\u00a0each\u00a0individual\u00a0change\u00a0is\u00a0small\u00a0yet\ncaptures\u00a0a\u00a0complete\u00a0change,\u00a0so\u00a0the\u00a0system\u00a0still\u00a0runs\u00a0after\u00a0applying\u00a0the\u00a0migration. Keeping\u00a0them\u00a0small\u00a0means\u00a0they\u00a0are\u00a0easy\u00a0to\u00a0write,\u00a0but\u00a0I\u00a0can\u00a0string\u00a0many\u00a0of\u00a0them\u00a0into\u00a0a\nsequence\u00a0that\u00a0can\u00a0make\u00a0a\u00a0significant\u00a0change\u00a0to\u00a0the\u00a0database\u2019s\u00a0structure\u00a0and\u00a0the\u00a0data\nstored\u00a0in\u00a0it. One\u00a0difference\u00a0from\u00a0regular\u00a0refactorings\u00a0is\u00a0that\u00a0database\u00a0changes\u00a0often\u00a0are\u00a0best\nseparated\u00a0over\u00a0multiple\u00a0releases\u00a0to\u00a0production. This\u00a0makes\u00a0it\u00a0easy\u00a0to\u00a0reverse\u00a0any\nchange\u00a0that\u00a0causes\u00a0a\u00a0problem\u00a0in\u00a0production. So,\u00a0when\u00a0renaming\u00a0a\u00a0field,\u00a0my\u00a0first\ncommit\u00a0would\u00a0add\u00a0the\u00a0new\u00a0database\u00a0field\u00a0but\u00a0not\u00a0use\u00a0it. I\u00a0may\u00a0then\u00a0set\u00a0up\u00a0the\u00a0updates\nso\u00a0they\u00a0update\u00a0both\u00a0old\u00a0and\u00a0new\u00a0fields\u00a0at\u00a0once. I\u00a0can\u00a0then\u00a0gradually\u00a0move\u00a0the\u00a0readers\nover\u00a0to\u00a0the\u00a0new\u00a0field. Only\u00a0once\u00a0they\u00a0have\u00a0all\u00a0moved\u00a0to\u00a0the\u00a0new\u00a0field,\u00a0and\u00a0I\u2019ve\u00a0given\u00a0a\nlittle\u00a0time\u00a0for\u00a0any\u00a0bugs\u00a0to\u00a0show\u00a0themselves,\u00a0would\u00a0I\u00a0remove\u00a0the\u00a0now\u00adunused\u00a0old\u00a0field. This\u00a0approach\u00a0to\u00a0database\u00a0changes\u00a0is\u00a0an\u00a0example\u00a0of\u00a0a\u00a0general\u00a0approach\u00a0of\u00a0parallel\nchange\u00a0[mf\u00adpc]\u00a0(also\u00a0called\u00a0expand\u00adcontract). REFACTORING, ARCHITECTURE, AND YAGNI\nRefactoring\u00a0has\u00a0profoundly\u00a0changed\u00a0how\u00a0people\u00a0think\u00a0about\u00a0software\u00a0architecture. Early\u00a0in\u00a0my\u00a0career,\u00a0I\u00a0was\u00a0taught\u00a0that\u00a0software\u00a0design\u00a0and\u00a0architecture\u00a0was\u00a0something\u00a0to\nbe\u00a0worked\u00a0on,\u00a0and\u00a0mostly\u00a0completed,\u00a0before\u00a0anyone\u00a0started\u00a0writing\u00a0code. Once\u00a0the\ncode\u00a0was\u00a0written,\u00a0its\u00a0architecture\u00a0was\u00a0fixed\u00a0and\u00a0could\u00a0only\u00a0decay\u00a0due\u00a0to\u00a0carelessness. Refactoring\u00a0changes\u00a0this\u00a0perspective. It\u00a0allows\u00a0me\u00a0to\u00a0significantly\u00a0alter\u00a0the\u00a0architecture\nof\u00a0software\u00a0that\u2019s\u00a0been\u00a0running\u00a0in\u00a0production\u00a0for\u00a0years. Refactoring\u00a0can\u00a0improve\u00a0the\ndesign\u00a0of\u00a0existing\u00a0code,\u00a0as\u00a0this\u00a0book\u2019s\u00a0subtitle\u00a0implies. But\u00a0as\u00a0I\u00a0indicated\u00a0earlier,\nchanging\u00a0legacy\u00a0code\u00a0is\u00a0often\u00a0challenging,\u00a0especially\u00a0when\u00a0it\u00a0lacks\u00a0decent\u00a0tests.", "domains": ["Design Principles"], "source": "Refactoring.Improving.the.Design.of.Existing.Code.pdf", "section": "Page 74", "position": 74, "chunk_type": "semantic", "token_estimate": 391}
{"text": "this\u00a0is\u00a0often,\u00a0even\u00a0usually,\u00a0an\u00a0unachievable\u00a0goal.\u00a0Repeatedly,\u00a0I\u00a0saw\u00a0people\u00a0only: understand\u00a0what\u00a0they\u00a0really\u00a0needed\u00a0from\u00a0software\u00a0once\u00a0they\u2019d\u00a0had\u00a0a\u00a0chance\u00a0to\u00a0use\u00a0it,\nand\u00a0saw\u00a0the\u00a0impact\u00a0it\u00a0made\u00a0to\u00a0their\u00a0work. One\u00a0way\u00a0of\u00a0dealing\u00a0with\u00a0future\u00a0changes\u00a0is\u00a0to\u00a0put\u00a0flexibility\u00a0mechanisms\u00a0into\u00a0the\nsoftware.\u00a0As\u00a0I\u00a0write\u00a0some\u00a0function,\u00a0I\u00a0can\u00a0see\u00a0that\u00a0it\u00a0has\u00a0a\u00a0general\u00a0applicability. To\nhandle\u00a0the\u00a0different\u00a0circumstances\u00a0that\u00a0I\u00a0anticipate\u00a0it\u00a0to\u00a0be\u00a0used\u00a0in,\u00a0I\u00a0can\u00a0see\u00a0a\u00a0dozen\nparameters\u00a0I\u00a0could\u00a0add\u00a0to\u00a0that\u00a0function. These\u00a0parameters\u00a0are\u00a0flexibility\u00a0mechanisms\u2014\nand,\u00a0like\u00a0most\u00a0mechanisms,\u00a0they\u00a0are\u00a0not\u00a0a\u00a0free\u00a0lunch. Adding\u00a0all\u00a0those\u00a0parameters\ncomplicates\u00a0the\u00a0function\u00a0for\u00a0the\u00a0one\u00a0case\u00a0it\u2019s\u00a0used\u00a0right\u00a0now. If\u00a0I\u00a0miss\u00a0a\u00a0parameter,\u00a0all\nthe\u00a0parameterization\u00a0I\u00a0have\u00a0added\u00a0makes\u00a0it\u00a0harder\u00a0for\u00a0me\u00a0to\u00a0add\u00a0more. I\u00a0find\u00a0I\u00a0often\u00a0get\nmy\u00a0flexibility\u00a0mechanisms\u00a0wrong\u2014either\u00a0because\u00a0the\u00a0changing\u00a0needs\u00a0didn\u2019t\u00a0work\u00a0out\nthe\u00a0way\u00a0I\u00a0expected\u00a0or\u00a0my\u00a0mechanism\u00a0design\u00a0was\u00a0faulty. Once\u00a0I\u00a0take\u00a0all\u00a0that\u00a0into\naccount,\u00a0most\u00a0of\u00a0the\u00a0time\u00a0my\u00a0flexibility\u00a0mechanisms\u00a0actually\u00a0slow\u00a0down\u00a0my\u00a0ability\u00a0to\nreact\u00a0to\u00a0change. With\u00a0refactoring,\u00a0I\u00a0can\u00a0use\u00a0a\u00a0different\u00a0strategy. Instead\u00a0of\u00a0speculating\u00a0on\u00a0what\nflexibility\u00a0I\u00a0will\u00a0need\u00a0in\u00a0the\u00a0future\u00a0and\u00a0what\u00a0mechanisms\u00a0will\u00a0best\u00a0enable\u00a0that,\u00a0I\u00a0build\nsoftware\u00a0that\u00a0solves\u00a0only\u00a0the\u00a0currently\u00a0understood\u00a0needs,\u00a0but\u00a0I\u00a0make\u00a0this\u00a0software\nexcellently\u00a0designed\u00a0for\u00a0those\u00a0needs. As\u00a0my\u00a0understanding\u00a0of\u00a0the\u00a0users\u2019\u00a0needs\u00a0changes,\nI\u00a0use\u00a0refactoring\u00a0to\u00a0adapt\u00a0the\u00a0architecture\u00a0to\u00a0those\u00a0new\u00a0demands. I\u00a0can\u00a0happily\u00a0include\nmechanisms\u00a0that\u00a0don\u2019t\u00a0increase\u00a0complexity\u00a0(such\u00a0as\u00a0small,\u00a0well\u00adnamed\u00a0functions)\u00a0but\nany\u00a0flexibility\u00a0that\u00a0complicates\u00a0the\u00a0software\u00a0has\u00a0to\u00a0prove\u00a0itself\u00a0before\u00a0I\u00a0include\u00a0it. If\u00a0I\ndon\u2019t\u00a0have\u00a0different\u00a0values\u00a0for\u00a0a\u00a0parameter\u00a0from\u00a0the\u00a0callers,\u00a0I\u00a0don\u2019t\u00a0add\u00a0it\u00a0to\u00a0the\nparameter\u00a0list. Should\u00a0the\u00a0time\u00a0come\u00a0that\u00a0I\u00a0need\u00a0to\u00a0add\u00a0it,\u00a0then\u00a0Parameterize\u00a0Function\n(310)\u00a0is\u00a0an\u00a0easy\u00a0refactoring\u00a0to\u00a0apply. I\u00a0often\u00a0find\u00a0it\u00a0useful\u00a0to\u00a0estimate\u00a0how\u00a0hard\u00a0it\u00a0would\nbe\u00a0to\u00a0use\u00a0refactoring\u00a0later\u00a0to\u00a0support\u00a0an\u00a0anticipated\u00a0change. Only\u00a0if\u00a0I\u00a0can\u00a0see\u00a0that\u00a0it\nwould\u00a0be\u00a0substantially\u00a0harder\u00a0to\u00a0refactor\u00a0later\u00a0do\u00a0I\u00a0consider\u00a0adding\u00a0a\u00a0flexibility\nmechanism\u00a0now. This\u00a0approach\u00a0to\u00a0design\u00a0goes\u00a0under\u00a0various\u00a0names:\u00a0simple\u00a0design,\u00a0incremental\u00a0design,\nor\u00a0yagni\u00a0[mf\u00adyagni]\u00a0(originally\u00a0an\u00a0acronym\u00a0for\u00a0\u201cyou\u00a0aren\u2019t\u00a0going\u00a0to\u00a0need\u00a0it\u201d). Yagni\ndoesn\u2019t\u00a0imply\u00a0that\u00a0architectural\u00a0thinking\u00a0disappears,\u00a0although\u00a0it\u00a0is\u00a0sometimes\u00a0naively\napplied\u00a0that\u00a0way.", "domains": ["Design Patterns", "Design Principles"], "source": "Refactoring.Improving.the.Design.of.Existing.Code.pdf", "section": "Page 75", "position": 75, "chunk_type": "semantic", "token_estimate": 407}
{"text": "this\u00a0is\u00a0often,\u00a0even\u00a0usually,\u00a0an\u00a0unachievable\u00a0goal.\u00a0Repeatedly,\u00a0I\u00a0saw\u00a0people\u00a0only: This\u00a0approach\u00a0to\u00a0design\u00a0goes\u00a0under\u00a0various\u00a0names:\u00a0simple\u00a0design,\u00a0incremental\u00a0design,\nor\u00a0yagni\u00a0[mf\u00adyagni]\u00a0(originally\u00a0an\u00a0acronym\u00a0for\u00a0\u201cyou\u00a0aren\u2019t\u00a0going\u00a0to\u00a0need\u00a0it\u201d). Yagni\ndoesn\u2019t\u00a0imply\u00a0that\u00a0architectural\u00a0thinking\u00a0disappears,\u00a0although\u00a0it\u00a0is\u00a0sometimes\u00a0naively\napplied\u00a0that\u00a0way. I\u00a0think\u00a0of\u00a0yagni\u00a0as\u00a0a\u00a0different\u00a0style\u00a0of\u00a0incorporating\u00a0architecture\u00a0and\ndesign\u00a0into\u00a0the\u00a0development\u00a0process\u2014a\u00a0style\u00a0that\u00a0isn\u2019t\u00a0credible\u00a0without\u00a0the\u00a0foundation\nof\u00a0refactoring. Adopting\u00a0yagni\u00a0doesn\u2019t\u00a0mean\u00a0I\u00a0neglect\u00a0all\u00a0upfront\u00a0architectural\u00a0thinking. There\u00a0are\u00a0still\ncases\u00a0where\u00a0refactoring\u00a0changes\u00a0are\u00a0difficult\u00a0and\u00a0some\u00a0preparatory\u00a0thinking\u00a0can\u00a0save\ntime. But\u00a0the\u00a0balance\u00a0has\u00a0shifted\u00a0a\u00a0long\u00a0way\u2014I\u2019m\u00a0much\u00a0more\u00a0inclined\u00a0to\u00a0deal\u00a0with\nwww.EBooksWorld.ir", "domains": ["Design Principles"], "source": "Refactoring.Improving.the.Design.of.Existing.Code.pdf", "section": "Page 75", "position": 75, "chunk_type": "semantic", "token_estimate": 120}
{"text": "If\u00a0you\u2019ve\u00a0read\u00a0the\u00a0earlier\u00a0section\u00a0on\u00a0problems,\u00a0one\u00a0lesson\u00a0you\u2019ve\u00a0probably\u00a0drawn\u00a0is\u00a0that: the\u00a0effectiveness\u00a0of\u00a0refactoring\u00a0is\u00a0tied\u00a0to\u00a0other\u00a0software\u00a0practices\u00a0that\u00a0a\u00a0team\u00a0uses. Indeed,\u00a0refactoring\u2019s\u00a0early\u00a0adoption\u00a0was\u00a0as\u00a0part\u00a0of\u00a0Extreme\u00a0Programming\u00a0[mf\u00adxp]\u00a0(XP),\na\u00a0process\u00a0which\u00a0was\u00a0notable\u00a0for\u00a0putting\u00a0together\u00a0a\u00a0set\u00a0of\u00a0relatively\u00a0unusual\u00a0and\ninterdependent\u00a0practices\u2014such\u00a0as\u00a0continuous\u00a0integration,\u00a0self\u00adtesting\u00a0code,\u00a0and\nrefactoring\u00a0(the\u00a0latter\u00a0two\u00a0woven\u00a0into\u00a0test\u00addriven\u00a0development). Extreme\u00a0Programming\u00a0was\u00a0one\u00a0of\u00a0the\u00a0first\u00a0agile\u00a0software\u00a0methods\u00a0[mf\u00adnm]\u00a0and,\u00a0for\nseveral\u00a0years,\u00a0led\u00a0the\u00a0rise\u00a0of\u00a0agile\u00a0techniques. Enough\u00a0projects\u00a0now\u00a0use\u00a0agile\u00a0methods\nthat\u00a0agile\u00a0thinking\u00a0is\u00a0generally\u00a0regarded\u00a0as\u00a0mainstream\u2014but\u00a0in\u00a0reality\u00a0most\u00a0\u201cagile\u201d\nprojects\u00a0only\u00a0use\u00a0the\u00a0name. To\u00a0really\u00a0operate\u00a0in\u00a0an\u00a0agile\u00a0way,\u00a0a\u00a0team\u00a0has\u00a0to\u00a0be\u00a0capable\nand\u00a0enthusiastic\u00a0refactorers\u2014and\u00a0for\u00a0that,\u00a0many\u00a0aspects\u00a0of\u00a0their\u00a0process\u00a0have\u00a0to\u00a0align\nwith\u00a0making\u00a0refactoring\u00a0a\u00a0regular\u00a0part\u00a0of\u00a0their\u00a0work. The\u00a0first\u00a0foundation\u00a0for\u00a0refactoring\u00a0is\u00a0self\u00adtesting\u00a0code. By\u00a0this,\u00a0I\u00a0mean\u00a0that\u00a0there\u00a0is\u00a0a\nsuite\u00a0of\u00a0automated\u00a0tests\u00a0that\u00a0I\u00a0can\u00a0run\u00a0and\u00a0be\u00a0confident\u00a0that,\u00a0if\u00a0I\u00a0made\u00a0an\u00a0error\u00a0in\u00a0my\nprogramming,\u00a0some\u00a0test\u00a0will\u00a0fail. This\u00a0is\u00a0such\u00a0an\u00a0important\u00a0foundation\u00a0for\u00a0refactoring\nthat\u00a0I\u2019ll\u00a0spend\u00a0a\u00a0chapter\u00a0talking\u00a0more\u00a0about\u00a0this. To\u00a0refactor\u00a0on\u00a0a\u00a0team,\u00a0it\u2019s\u00a0important\u00a0that\u00a0each\u00a0member\u00a0can\u00a0refactor\u00a0when\u00a0they\u00a0need\u00a0to\nwithout\u00a0interfering\u00a0with\u00a0others\u2019\u00a0work.\u00a0This\u00a0is\u00a0why\u00a0I\u00a0encourage\u00a0Continuous\u00a0Integration. With\u00a0CI,\u00a0each\u00a0member\u2019s\u00a0refactoring\u00a0efforts\u00a0are\u00a0quickly\u00a0shared\u00a0with\u00a0their\u00a0colleagues. No\none\u00a0ends\u00a0up\u00a0building\u00a0new\u00a0work\u00a0on\u00a0interfaces\u00a0that\u00a0are\u00a0being\u00a0removed,\u00a0and\u00a0if\u00a0the\nrefactoring\u00a0is\u00a0going\u00a0to\u00a0cause\u00a0a\u00a0problem\u00a0with\u00a0someone\u00a0else\u2019s\u00a0work,\u00a0we\u00a0know\u00a0about\u00a0this\nquickly. Self\u00adtesting\u00a0code\u00a0is\u00a0also\u00a0a\u00a0key\u00a0element\u00a0of\u00a0Continuous\u00a0Integration,\u00a0so\u00a0there\u00a0is\u00a0a\nstrong\u00a0synergy\u00a0between\u00a0the\u00a0three\u00a0practices\u00a0of\u00a0self\u00adtesting\u00a0code,\u00a0continuous\u00a0integration,\nand\u00a0refactoring. With\u00a0this\u00a0trio\u00a0of\u00a0practices\u00a0in\u00a0place,\u00a0we\u00a0enable\u00a0the\u00a0Yagni\u00a0design\u00a0approach\u00a0that\u00a0I\u00a0talked\nabout\u00a0in\u00a0the\u00a0previous\u00a0section. Refactoring\u00a0and\u00a0yagni\u00a0positively\u00a0reinforce\u00a0each\u00a0other:\nNot\u00a0just\u00a0is\u00a0refactoring\u00a0(and\u00a0its\u00a0prerequisites)\u00a0a\u00a0foundation\u00a0for\u00a0yagni\u2014yagni\u00a0makes\u00a0it\neasier\u00a0to\u00a0do\u00a0refactoring. This\u00a0is\u00a0because\u00a0it\u2019s\u00a0easier\u00a0to\u00a0change\u00a0a\u00a0simple\u00a0system\u00a0than\u00a0one\nthat\u00a0has\u00a0lots\u00a0of\u00a0speculative\u00a0flexibility\u00a0included. Balance\u00a0these\u00a0practices,\u00a0and\u00a0you\u00a0can\u00a0get\nwww.EBooksWorld.ir", "domains": ["Design Principles", "Code Organization"], "source": "Refactoring.Improving.the.Design.of.Existing.Code.pdf", "section": "Page 76", "position": 76, "chunk_type": "semantic", "token_estimate": 378}
{"text": "into\u00a0a\u00a0virtuous\u00a0circle\u00a0with\u00a0a\u00a0code\u00a0base\u00a0that\u00a0responds\u00a0rapidly\u00a0to\u00a0changing\u00a0needs\u00a0and\u00a0is: reliable. With\u00a0these\u00a0core\u00a0practices\u00a0in\u00a0place,\u00a0we\u00a0have\u00a0the\u00a0foundation\u00a0to\u00a0take\u00a0advantage\u00a0of\u00a0the\nother\u00a0elements\u00a0of\u00a0the\u00a0agile\u00a0mindset. Continuous\u00a0Delivery\u00a0keeps\u00a0our\u00a0software\u00a0in\u00a0an\nalways\u00adreleasable\u00a0state. This\u00a0is\u00a0what\u00a0allows\u00a0many\u00a0web\u00a0organizations\u00a0to\u00a0release\u00a0updates\nmany\u00a0times\u00a0a\u00a0day\u2014but\u00a0even\u00a0if\u00a0we\u00a0don\u2019t\u00a0need\u00a0that,\u00a0it\u00a0reduces\u00a0risk\u00a0and\u00a0allows\u00a0us\u00a0to\nschedule\u00a0our\u00a0releases\u00a0to\u00a0satisfy\u00a0business\u00a0needs\u00a0rather\u00a0than\u00a0technological\u00a0constraints. With\u00a0a\u00a0firm\u00a0technical\u00a0foundation,\u00a0we\u00a0can\u00a0drastically\u00a0reduce\u00a0the\u00a0time\u00a0it\u00a0takes\u00a0to\u00a0get\u00a0a\ngood\u00a0idea\u00a0into\u00a0production\u00a0code,\u00a0allowing\u00a0us\u00a0to\u00a0better\u00a0serve\u00a0our\u00a0customers. Furthermore,\u00a0these\u00a0practices\u00a0increase\u00a0the\u00a0reliability\u00a0of\u00a0our\u00a0software,\u00a0with\u00a0less\u00a0bugs\u00a0to\nspend\u00a0time\u00a0fixing. Stated\u00a0like\u00a0this,\u00a0it\u00a0all\u00a0sounds\u00a0rather\u00a0simple\u2014but\u00a0in\u00a0practice\u00a0it\u00a0isn\u2019t. Software\ndevelopment,\u00a0whatever\u00a0the\u00a0approach,\u00a0is\u00a0a\u00a0tricky\u00a0business,\u00a0with\u00a0complex\u00a0interactions\nbetween\u00a0people\u00a0and\u00a0machines. The\u00a0approach\u00a0I\u00a0describe\u00a0here\u00a0is\u00a0a\u00a0proven\u00a0way\u00a0to\u00a0handle\nthis\u00a0complexity,\u00a0but\u00a0like\u00a0any\u00a0approach,\u00a0it\u00a0requires\u00a0practice\u00a0and\u00a0skill.", "domains": ["Design Patterns", "Software Quality Attributes"], "source": "Refactoring.Improving.the.Design.of.Existing.Code.pdf", "section": "Page 77", "position": 77, "chunk_type": "semantic", "token_estimate": 179}
{"text": "A\u00a0common\u00a0concern\u00a0with\u00a0refactoring\u00a0is\u00a0the\u00a0effect\u00a0it\u00a0has\u00a0on\u00a0the\u00a0performance\u00a0of\u00a0a: program. To\u00a0make\u00a0the\u00a0software\u00a0easier\u00a0to\u00a0understand,\u00a0I\u00a0often\u00a0make\u00a0changes\u00a0that\u00a0will\ncause\u00a0the\u00a0program\u00a0to\u00a0run\u00a0slower.\u00a0This\u00a0is\u00a0an\u00a0important\u00a0issue. I\u00a0don\u2019t\u00a0belong\u00a0to\u00a0the\u00a0school\nof\u00a0thought\u00a0that\u00a0ignores\u00a0performance\u00a0in\u00a0favor\u00a0of\u00a0design\u00a0purity\u00a0or\u00a0in\u00a0hopes\u00a0of\u00a0faster\nhardware. Software\u00a0has\u00a0been\u00a0rejected\u00a0for\u00a0being\u00a0too\u00a0slow,\u00a0and\u00a0faster\u00a0machines\u00a0merely\nmove\u00a0the\u00a0goalposts. Refactoring\u00a0can\u00a0certainly\u00a0make\u00a0software\u00a0go\u00a0more\u00a0slowly\u2014but\u00a0it\nalso\u00a0makes\u00a0the\u00a0software\u00a0more\u00a0amenable\u00a0to\u00a0performance\u00a0tuning. The\u00a0secret\u00a0to\u00a0fast\nsoftware,\u00a0in\u00a0all\u00a0but\u00a0hard\u00a0real\u00adtime\u00a0contexts,\u00a0is\u00a0to\u00a0write\u00a0tunable\u00a0software\u00a0first\u00a0and\u00a0then\ntune\u00a0it\u00a0for\u00a0sufficient\u00a0speed. I\u2019ve\u00a0seen\u00a0three\u00a0general\u00a0approaches\u00a0to\u00a0writing\u00a0fast\u00a0software. The\u00a0most\u00a0serious\u00a0of\u00a0these\u00a0is\ntime\u00a0budgeting,\u00a0often\u00a0used\u00a0in\u00a0hard\u00a0real\u00adtime\u00a0systems. As\u00a0you\u00a0decompose\u00a0the\u00a0design,\nyou\u00a0give\u00a0each\u00a0component\u00a0a\u00a0budget\u00a0for\u00a0resources\u2014time\u00a0and\u00a0footprint. That\u00a0component\nmust\u00a0not\u00a0exceed\u00a0its\u00a0budget,\u00a0although\u00a0a\u00a0mechanism\u00a0for\u00a0exchanging\u00a0budgeted\u00a0resources\nis\u00a0allowed.\u00a0Time\u00a0budgeting\u00a0focuses\u00a0attention\u00a0on\u00a0hard\u00a0performance\u00a0times. It\u00a0is\u00a0essential\nfor\u00a0systems,\u00a0such\u00a0as\u00a0heart\u00a0pacemakers,\u00a0in\u00a0which\u00a0late\u00a0data\u00a0is\u00a0always\u00a0bad\u00a0data. This\ntechnique\u00a0is\u00a0inappropriate\u00a0for\u00a0other\u00a0kinds\u00a0of\u00a0systems,\u00a0such\u00a0as\u00a0the\u00a0corporate\ninformation\u00a0systems\u00a0with\u00a0which\u00a0I\u00a0usually\u00a0work. The\u00a0second\u00a0approach\u00a0is\u00a0the\u00a0constant\u00a0attention\u00a0approach. Here,\u00a0every\u00a0programmer,\u00a0all\nwww.EBooksWorld.ir", "domains": ["Software Quality Attributes", "Code Organization"], "source": "Refactoring.Improving.the.Design.of.Existing.Code.pdf", "section": "Page 77", "position": 77, "chunk_type": "semantic", "token_estimate": 231}
{"text": "the\u00a0time,\u00a0does\u00a0whatever\u00a0she\u00a0can\u00a0to\u00a0keep\u00a0performance\u00a0high.\u00a0This\u00a0is\u00a0a\u00a0common\u00a0approach: that\u00a0is\u00a0intuitively\u00a0attractive\u2014but\u00a0it\u00a0does\u00a0not\u00a0work\u00a0very\u00a0well. Changes\u00a0that\u00a0improve\nperformance\u00a0usually\u00a0make\u00a0the\u00a0program\u00a0harder\u00a0to\u00a0work\u00a0with.\u00a0This\u00a0slows\u00a0development. This\u00a0would\u00a0be\u00a0a\u00a0cost\u00a0worth\u00a0paying\u00a0if\u00a0the\u00a0resulting\u00a0software\u00a0were\u00a0quicker\u2014but\u00a0usually\u00a0it\nis\u00a0not. The\u00a0performance\u00a0improvements\u00a0are\u00a0spread\u00a0all\u00a0around\u00a0the\u00a0program\u037e\u00a0each\nimprovement\u00a0is\u00a0made\u00a0with\u00a0a\u00a0narrow\u00a0perspective\u00a0of\u00a0the\u00a0program\u2019s\u00a0behavior,\u00a0and\u00a0often\nwith\u00a0a\u00a0misunderstanding\u00a0of\u00a0how\u00a0a\u00a0compiler,\u00a0runtime,\u00a0and\u00a0hardware\u00a0behaves. It\u00a0Takes\u00a0Awhile\u00a0to\u00a0Create\u00a0Nothing\nThe\u00a0Chrysler\u00a0Comprehensive\u00a0Compensation\u00a0pay\u00a0process\u00a0was\u00a0running\u00a0too\nslowly. Although\u00a0we\u00a0were\u00a0still\u00a0in\u00a0development,\u00a0it\u00a0began\u00a0to\u00a0bother\u00a0us,\u00a0because\nit\u00a0was\u00a0slowing\u00a0down\u00a0the\u00a0tests. Kent\u00a0Beck,\u00a0Martin\u00a0Fowler,\u00a0and\u00a0I\u00a0decided\u00a0we\u2019d\u00a0fix\u00a0it\u00a0up. While\u00a0I\u00a0waited\u00a0for\u00a0us\nto\u00a0get\u00a0together,\u00a0I\u00a0was\u00a0speculating,\u00a0on\u00a0the\u00a0basis\u00a0of\u00a0my\u00a0extensive\u00a0knowledge\u00a0of\nthe\u00a0system,\u00a0about\u00a0what\u00a0was\u00a0probably\u00a0slowing\u00a0it\u00a0down. I\u00a0thought\u00a0of\u00a0several\npossibilities\u00a0and\u00a0chatted\u00a0with\u00a0folks\u00a0about\u00a0the\u00a0changes\u00a0that\u00a0were\u00a0probably\nnecessary. We\u00a0came\u00a0up\u00a0with\u00a0some\u00a0really\u00a0good\u00a0ideas\u00a0about\u00a0what\u00a0would\u00a0make\nthe\u00a0system\u00a0go\u00a0faster. Then\u00a0we\u00a0measured\u00a0performance\u00a0using\u00a0Kent\u2019s\u00a0profiler. None\u00a0of\u00a0the\npossibilities\u00a0I\u00a0had\u00a0thought\u00a0of\u00a0had\u00a0anything\u00a0to\u00a0do\u00a0with\u00a0the\u00a0problem. Instead,\u00a0we\nfound\u00a0that\u00a0the\u00a0system\u00a0was\u00a0spending\u00a0half\u00a0its\u00a0time\u00a0creating\u00a0instances\u00a0of\u00a0date. Even\u00a0more\u00a0interesting\u00a0was\u00a0that\u00a0all\u00a0the\u00a0instances\u00a0had\u00a0the\u00a0same\u00a0couple\u00a0of\nvalues. When\u00a0we\u00a0looked\u00a0at\u00a0the\u00a0date\u00adcreation\u00a0logic,\u00a0we\u00a0saw\u00a0some\u00a0opportunities\u00a0for\noptimizing\u00a0how\u00a0these\u00a0dates\u00a0were\u00a0created. They\u00a0were\u00a0all\u00a0going\u00a0through\u00a0a\nstring\u00a0conversion\u00a0even\u00a0though\u00a0no\u00a0external\u00a0inputs\u00a0were\u00a0involved. The\u00a0code\nwas\u00a0just\u00a0using\u00a0string\u00a0conversion\u00a0for\u00a0convenience\u00a0of\u00a0typing. Maybe\u00a0we\u00a0could\noptimize\u00a0that. Then\u00a0we\u00a0looked\u00a0at\u00a0how\u00a0these\u00a0dates\u00a0were\u00a0being\u00a0used. It\u00a0turned\u00a0out\u00a0that\u00a0the\nhuge\u00a0bulk\u00a0of\u00a0them\u00a0were\u00a0all\u00a0creating\u00a0instances\u00a0of\u00a0date\u00a0range,\u00a0an\u00a0object\u00a0with\u00a0a\nfrom\u00a0date\u00a0and\u00a0a\u00a0to\u00a0date. Looking\u00a0around\u00a0little\u00a0more,\u00a0we\u00a0realized\u00a0that\u00a0most\u00a0of\nthese\u00a0date\u00a0ranges\u00a0were\u00a0empty! As\u00a0we\u00a0worked\u00a0with\u00a0date\u00a0range,\u00a0we\u00a0used\u00a0the\u00a0convention\u00a0that\u00a0any\u00a0date\u00a0range\nthat\u00a0ended\u00a0before\u00a0it\u00a0started\u00a0was\u00a0empty. It\u2019s\u00a0a\u00a0good\u00a0convention\u00a0and\u00a0fits\u00a0in\u00a0well\nwith\u00a0how\u00a0the\u00a0class\u00a0works.", "domains": ["Software Quality Attributes"], "source": "Refactoring.Improving.the.Design.of.Existing.Code.pdf", "section": "Page 78", "position": 78, "chunk_type": "semantic", "token_estimate": 380}
{"text": "the\u00a0time,\u00a0does\u00a0whatever\u00a0she\u00a0can\u00a0to\u00a0keep\u00a0performance\u00a0high.\u00a0This\u00a0is\u00a0a\u00a0common\u00a0approach: As\u00a0we\u00a0worked\u00a0with\u00a0date\u00a0range,\u00a0we\u00a0used\u00a0the\u00a0convention\u00a0that\u00a0any\u00a0date\u00a0range\nthat\u00a0ended\u00a0before\u00a0it\u00a0started\u00a0was\u00a0empty. It\u2019s\u00a0a\u00a0good\u00a0convention\u00a0and\u00a0fits\u00a0in\u00a0well\nwith\u00a0how\u00a0the\u00a0class\u00a0works. Soon\u00a0after\u00a0we\u00a0started\u00a0using\u00a0this\u00a0convention,\u00a0we\nrealized\u00a0that\u00a0just\u00a0creating\u00a0a\u00a0date\u00a0range\u00a0that\u00a0starts\u00a0after\u00a0it\u00a0ends\u00a0wasn\u2019t\u00a0clear\ncode,\u00a0so\u00a0we\u00a0extracted\u00a0that\u00a0behavior\u00a0into\u00a0a\u00a0factory\u00a0method\u00a0for\u00a0empty\u00a0date\nwww.EBooksWorld.ir", "domains": ["Design Patterns", "Software Quality Attributes", "Domain-Driven Design"], "source": "Refactoring.Improving.the.Design.of.Existing.Code.pdf", "section": "Page 78", "position": 78, "chunk_type": "semantic", "token_estimate": 85}
{"text": "\u2014\u00a0Ron\u00a0Jeffries: ranges. We\u00a0had\u00a0made\u00a0that\u00a0change\u00a0to\u00a0make\u00a0the\u00a0code\u00a0clearer,\u00a0but\u00a0we\u00a0received\u00a0an\nunexpected\u00a0payoff. We\u00a0created\u00a0a\u00a0constant\u00a0empty\u00a0date\u00a0range\u00a0and\u00a0adjusted\nthe\u00a0factory\u00a0method\u00a0to\u00a0return\u00a0that\u00a0object\u00a0instead\u00a0of\u00a0creating\u00a0it\u00a0every\u00a0time. That\nchange\u00a0doubled\u00a0the\u00a0speed\u00a0of\u00a0the\u00a0system,\u00a0enough\u00a0for\u00a0the\u00a0tests\u00a0to\u00a0be\nbearable.\u00a0It\u00a0took\u00a0us\u00a0about\u00a0five\u00a0minutes. I\u00a0had\u00a0speculated\u00a0with\u00a0various\u00a0members\u00a0of\u00a0the\u00a0team\u00a0(Kent\u00a0and\u00a0Martin\u00a0deny\nparticipating\u00a0in\u00a0the\u00a0speculation)\u00a0on\u00a0what\u00a0was\u00a0likely\u00a0wrong\u00a0with\u00a0code\u00a0we\u00a0knew\nvery\u00a0well. We\u00a0had\u00a0even\u00a0sketched\u00a0some\u00a0designs\u00a0for\u00a0improvements\u00a0without\nfirst\u00a0measuring\u00a0what\u00a0was\u00a0going\u00a0on. We\u00a0were\u00a0completely\u00a0wrong. Aside\u00a0from\u00a0having\u00a0a\u00a0really\u00a0interesting\nconversation,\u00a0we\u00a0were\u00a0doing\u00a0no\u00a0good\u00a0at\u00a0all. The\u00a0lesson\u00a0is:\u00a0Even\u00a0if\u00a0you\u00a0know\u00a0exactly\u00a0what\u00a0is\u00a0going\u00a0on\u00a0in\u00a0your\u00a0system,\nmeasure\u00a0performance,\u00a0don\u2019t\u00a0speculate. You\u2019ll\u00a0learn\u00a0something,\u00a0and\u00a0nine\ntimes\u00a0out\u00a0of\u00a0ten,\u00a0it\u00a0won\u2019t\u00a0be\u00a0that\u00a0you\u00a0were\u00a0right! The\u00a0interesting\u00a0thing\u00a0about\u00a0performance\u00a0is\u00a0that\u00a0in\u00a0most\nprograms,\u00a0most\u00a0of\u00a0their\u00a0time\u00a0is\u00a0spent\u00a0in\u00a0a\u00a0small\u00a0fraction\u00a0of\u00a0the\u00a0code. If\u00a0I\u00a0optimize\u00a0all\u00a0the\ncode\u00a0equally,\u00a0I\u2019ll\u00a0end\u00a0up\u00a0with\u00a090\u00a0percent\u00a0of\u00a0my\u00a0work\u00a0wasted\u00a0because\u00a0it\u2019s\u00a0optimizing\ncode\u00a0that\u00a0isn\u2019t\u00a0run\u00a0much. The\u00a0time\u00a0spent\u00a0making\u00a0the\u00a0program\u00a0fast\u2014the\u00a0time\u00a0lost\nbecause\u00a0of\u00a0lack\u00a0of\u00a0clarity\u2014is\u00a0all\u00a0wasted\u00a0time. The\u00a0third\u00a0approach\u00a0to\u00a0performance\u00a0improvement\u00a0takes\u00a0advantage\u00a0of\u00a0this\u00a090\u00adpercent\nstatistic. In\u00a0this\u00a0approach,\u00a0I\u00a0build\u00a0my\u00a0program\u00a0in\u00a0a\u00a0well\u00adfactored\u00a0manner\u00a0without\npaying\u00a0attention\u00a0to\u00a0performance\u00a0until\u00a0I\u00a0begin\u00a0a\u00a0deliberate\u00a0performance\u00a0optimization\nexercise. During\u00a0this\u00a0performance\u00a0optimization,\u00a0I\u00a0follow\u00a0a\u00a0specific\u00a0process\u00a0to\u00a0tune\u00a0the\nprogram. I\u00a0begin\u00a0by\u00a0running\u00a0the\u00a0program\u00a0under\u00a0a\u00a0profiler\u00a0that\u00a0monitors\u00a0the\u00a0program\u00a0and\u00a0tells\u00a0me\nwhere\u00a0it\u00a0is\u00a0consuming\u00a0time\u00a0and\u00a0space. This\u00a0way\u00a0I\u00a0can\u00a0find\u00a0that\u00a0small\u00a0part\u00a0of\u00a0the\nprogram\u00a0where\u00a0the\u00a0performance\u00a0hot\u00a0spots\u00a0lie. I\u00a0then\u00a0focus\u00a0on\u00a0those\u00a0performance\u00a0hot\nspots\u00a0using\u00a0the\u00a0same\u00a0optimizations\u00a0I\u00a0would\u00a0use\u00a0in\u00a0the\u00a0constant\u00adattention\u00a0approach. But\nsince\u00a0I\u2019m\u00a0focusing\u00a0my\u00a0attention\u00a0on\u00a0a\u00a0hot\u00a0spot,\u00a0I\u2019m\u00a0getting\u00a0much\u00a0more\u00a0effect\u00a0with\u00a0less\nwork.\u00a0Even\u00a0so,\u00a0I\u00a0remain\u00a0cautious.\u00a0As\u00a0in\u00a0refactoring,\u00a0I\u00a0make\u00a0the\u00a0changes\u00a0in\u00a0small\u00a0steps. After\u00a0each\u00a0step\u00a0I\u00a0compile,\u00a0test,\u00a0and\u00a0rerun\u00a0the\u00a0profiler. If\u00a0I\u00a0haven\u2019t\u00a0improved\nperformance,\u00a0I\u00a0back\u00a0out\u00a0the\u00a0change.", "domains": ["Design Patterns", "Software Quality Attributes", "Domain-Driven Design"], "source": "Refactoring.Improving.the.Design.of.Existing.Code.pdf", "section": "Page 79", "position": 79, "chunk_type": "semantic", "token_estimate": 385}
{"text": "\u2014\u00a0Ron\u00a0Jeffries: After\u00a0each\u00a0step\u00a0I\u00a0compile,\u00a0test,\u00a0and\u00a0rerun\u00a0the\u00a0profiler. If\u00a0I\u00a0haven\u2019t\u00a0improved\nperformance,\u00a0I\u00a0back\u00a0out\u00a0the\u00a0change. I\u00a0continue\u00a0the\u00a0process\u00a0of\u00a0finding\u00a0and\u00a0removing\u00a0hot\nspots\u00a0until\u00a0I\u00a0get\u00a0the\u00a0performance\u00a0that\u00a0satisfies\u00a0my\u00a0users. www.EBooksWorld.ir", "domains": ["Software Quality Attributes"], "source": "Refactoring.Improving.the.Design.of.Existing.Code.pdf", "section": "Page 79", "position": 79, "chunk_type": "semantic", "token_estimate": 43}
{"text": "Having\u00a0a\u00a0well\u00adfactored\u00a0program\u00a0helps\u00a0with\u00a0this\u00a0style\u00a0of\u00a0optimization\u00a0in\u00a0two\u00a0ways.\u00a0First,: it\u00a0gives\u00a0me\u00a0time\u00a0to\u00a0spend\u00a0on\u00a0performance\u00a0tuning. With\u00a0well\u00adfactored\u00a0code,\u00a0I\u00a0can\u00a0add\nfunctionality\u00a0more\u00a0quickly.\u00a0This\u00a0gives\u00a0me\u00a0more\u00a0time\u00a0to\u00a0focus\u00a0on\u00a0performance. (Profiling\nensures\u00a0I\u00a0spend\u00a0that\u00a0time\u00a0on\u00a0the\u00a0right\u00a0place.) Second,\u00a0with\u00a0a\u00a0well\u00adfactored\u00a0program\u00a0I\nhave\u00a0finer\u00a0granularity\u00a0for\u00a0my\u00a0performance\u00a0analysis. My\u00a0profiler\u00a0leads\u00a0me\u00a0to\u00a0smaller\nparts\u00a0of\u00a0the\u00a0code,\u00a0which\u00a0are\u00a0easier\u00a0to\u00a0tune. With\u00a0clearer\u00a0code,\u00a0I\u00a0have\u00a0a\u00a0better\nunderstanding\u00a0of\u00a0my\u00a0options\u00a0and\u00a0of\u00a0what\u00a0kind\u00a0of\u00a0tuning\u00a0will\u00a0work. I\u2019ve\u00a0found\u00a0that\u00a0refactoring\u00a0helps\u00a0me\u00a0write\u00a0fast\u00a0software. It\u00a0slows\u00a0the\u00a0software\u00a0in\u00a0the\nshort\u00a0term\u00a0while\u00a0I\u2019m\u00a0refactoring,\u00a0but\u00a0makes\u00a0it\u00a0easier\u00a0to\u00a0tune\u00a0during\u00a0optimization. I\u00a0end\nup\u00a0well\u00a0ahead. WHERE DID REFACTORING COME FROM? I\u2019ve\u00a0not\u00a0succeeded\u00a0in\u00a0pinning\u00a0down\u00a0the\u00a0birth\u00a0of\u00a0the\u00a0term\u00a0\u201crefactoring.\u201d\u00a0Good\nprogrammers\u00a0have\u00a0always\u00a0spent\u00a0at\u00a0least\u00a0some\u00a0time\u00a0cleaning\u00a0up\u00a0their\u00a0code. They\u00a0do\u00a0this\nbecause\u00a0they\u00a0have\u00a0learned\u00a0that\u00a0clean\u00a0code\u00a0is\u00a0easier\u00a0to\u00a0change\u00a0than\u00a0complex\u00a0and\u00a0messy\ncode,\u00a0and\u00a0good\u00a0programmers\u00a0know\u00a0that\u00a0they\u00a0rarely\u00a0write\u00a0clean\u00a0code\u00a0the\u00a0first\u00a0time\naround. Refactoring\u00a0goes\u00a0beyond\u00a0this. In\u00a0this\u00a0book,\u00a0I\u2019m\u00a0advocating\u00a0refactoring\u00a0as\u00a0a\u00a0key\u00a0element\nin\u00a0the\u00a0whole\u00a0process\u00a0of\u00a0software\u00a0development. Two\u00a0of\u00a0the\u00a0first\u00a0people\u00a0to\u00a0recognize\u00a0the\nimportance\u00a0of\u00a0refactoring\u00a0were\u00a0Ward\u00a0Cunningham\u00a0and\u00a0Kent\u00a0Beck,\u00a0who\u00a0worked\u00a0with\nSmalltalk\u00a0from\u00a0the\u00a01980s\u00a0onward. Smalltalk\u00a0is\u00a0an\u00a0environment\u00a0that\u00a0even\u00a0then\u00a0was\nparticularly\u00a0hospitable\u00a0to\u00a0refactoring. It\u00a0is\u00a0a\u00a0very\u00a0dynamic\u00a0environment\u00a0that\u00a0allows\u00a0you\nto\u00a0quickly\u00a0write\u00a0highly\u00a0functional\u00a0software. Smalltalk\u00a0had\u00a0a\u00a0very\u00a0short\u00a0compile\u00adlink\u00ad\nexecute\u00a0cycle\u00a0for\u00a0its\u00a0time,\u00a0which\u00a0made\u00a0it\u00a0easy\u00a0to\u00a0change\u00a0things\u00a0quickly\u00a0at\u00a0a\u00a0time\u00a0where\novernight\u00a0compile\u00a0cycles\u00a0were\u00a0not\u00a0unknown. It\u00a0is\u00a0also\u00a0object\u00adoriented\u00a0and\u00a0thus\u00a0provides\npowerful\u00a0tools\u00a0for\u00a0minimizing\u00a0the\u00a0impact\u00a0of\u00a0change\u00a0behind\u00a0well\u00addefined\u00a0interfaces. Ward\u00a0and\u00a0Kent\u00a0explored\u00a0software\u00a0development\u00a0approaches\u00a0geared\u00a0to\u00a0this\u00a0kind\u00a0of\nenvironment,\u00a0and\u00a0their\u00a0work\u00a0developed\u00a0into\u00a0Extreme\u00a0Programming. They\u00a0realized\u00a0that\nrefactoring\u00a0was\u00a0important\u00a0in\u00a0improving\u00a0their\u00a0productivity\u00a0and,\u00a0ever\u00a0since,\u00a0have\u00a0been\nworking\u00a0with\u00a0refactoring,\u00a0applying\u00a0it\u00a0to\u00a0serious\u00a0software\u00a0projects\u00a0and\u00a0refining\u00a0it. Ward\u00a0and\u00a0Kent\u2019s\u00a0ideas\u00a0were\u00a0a\u00a0strong\u00a0influence\u00a0on\u00a0the\u00a0Smalltalk\u00a0community,\u00a0and\u00a0the\nnotion\u00a0of\u00a0refactoring\u00a0became\u00a0an\u00a0important\u00a0element\u00a0in\u00a0the\u00a0Smalltalk\u00a0culture.", "domains": ["Software Quality Attributes", "Code Organization"], "source": "Refactoring.Improving.the.Design.of.Existing.Code.pdf", "section": "Page 80", "position": 80, "chunk_type": "semantic", "token_estimate": 386}
{"text": "efficient\u00a0and\u00a0flexible\u00a0framework.: Bill\u00a0Opdyke\u00a0was\u00a0one\u00a0of\u00a0Ralph\u2019s\u00a0doctoral\u00a0students\u00a0and\u00a0was\u00a0particularly\u00a0interested\u00a0in\nframeworks. He\u00a0saw\u00a0the\u00a0potential\u00a0value\u00a0of\u00a0refactoring\u00a0and\u00a0saw\u00a0that\u00a0it\u00a0could\u00a0be\u00a0applied\nto\u00a0much\u00a0more\u00a0than\u00a0Smalltalk. His\u00a0background\u00a0was\u00a0in\u00a0telephone\u00a0switch\u00a0development,\u00a0in\nwhich\u00a0a\u00a0great\u00a0deal\u00a0of\u00a0complexity\u00a0accrues\u00a0over\u00a0time\u00a0and\u00a0changes\u00a0are\u00a0difficult\u00a0to\u00a0make. Bill\u2019s\u00a0doctoral\u00a0research\u00a0looked\u00a0at\u00a0refactoring\u00a0from\u00a0a\u00a0tool\u00a0builder\u2019s\u00a0perspective. Bill\u00a0was\ninterested\u00a0in\u00a0refactorings\u00a0that\u00a0would\u00a0be\u00a0useful\u00a0for\u00a0C++\u00a0framework\u00a0development\u037e\u00a0he\nresearched\u00a0the\u00a0necessary\u00a0semantics\u00adpreserving\u00a0refactorings\u00a0and\u00a0showed\u00a0how\u00a0to\u00a0prove\nthey\u00a0were\u00a0semantics\u00adpreserving\u00a0and\u00a0how\u00a0a\u00a0tool\u00a0could\u00a0implement\u00a0these\u00a0ideas. Bill\u2019s\ndoctoral\u00a0thesis\u00a0[Opdyke]\u00a0was\u00a0the\u00a0first\u00a0substantial\u00a0work\u00a0on\u00a0refactoring. I\u00a0remember\u00a0meeting\u00a0Bill\u00a0at\u00a0the\u00a0OOPSLA\u00a0conference\u00a0in\u00a01992. We\u00a0sat\u00a0in\u00a0a\u00a0caf\u00e9\u00a0and\u00a0he\ntold\u00a0me\u00a0about\u00a0his\u00a0research. I\u00a0remember\u00a0thinking,\u00a0\u201cInteresting,\u00a0but\u00a0not\u00a0really\u00a0that\nimportant.\u201d\u00a0Boy,\u00a0was\u00a0I\u00a0wrong! John\u00a0Brant\u00a0and\u00a0Don\u00a0Roberts\u00a0took\u00a0the\u00a0refactoring\u00a0tool\u00a0ideas\u00a0much\u00a0further\u00a0to\u00a0produce\nthe\u00a0Refactoring\u00a0Browser,\u00a0the\u00a0first\u00a0refactoring\u00a0tool,\u00a0appropriately\u00a0for\u00a0the\u00a0Smalltalk\nenvironment. And\u00a0me? I\u2019d\u00a0always\u00a0been\u00a0inclined\u00a0to\u00a0clean\u00a0code,\u00a0but\u00a0I\u2019d\u00a0never\u00a0considered\u00a0it\u00a0to\u00a0be\u00a0that\nimportant.\u00a0Then,\u00a0I\u00a0worked\u00a0on\u00a0a\u00a0project\u00a0with\u00a0Kent\u00a0and\u00a0saw\u00a0the\u00a0way\u00a0he\u00a0used\u00a0refactoring. I\u00a0saw\u00a0the\u00a0difference\u00a0it\u00a0made\u00a0in\u00a0productivity\u00a0and\u00a0quality. That\u00a0experience\u00a0convinced\u00a0me\nthat\u00a0refactoring\u00a0was\u00a0a\u00a0very\u00a0important\u00a0technique. I\u00a0was\u00a0frustrated,\u00a0however,\u00a0because\nthere\u00a0was\u00a0no\u00a0book\u00a0that\u00a0I\u00a0could\u00a0give\u00a0to\u00a0a\u00a0working\u00a0programmer,\u00a0and\u00a0none\u00a0of\u00a0the\u00a0experts\nabove\u00a0had\u00a0any\u00a0plans\u00a0to\u00a0write\u00a0such\u00a0a\u00a0book. So,\u00a0with\u00a0their\u00a0help,\u00a0I\u00a0did\u2014which\u00a0led\u00a0to\u00a0the\nfirst\u00a0edition\u00a0of\u00a0this\u00a0book. Fortunately,\u00a0the\u00a0concept\u00a0of\u00a0refactoring\u00a0caught\u00a0on\u00a0in\u00a0the\u00a0industry. The\u00a0book\u00a0sold\u00a0well,\nand\u00a0refactoring\u00a0entered\u00a0the\u00a0vocabulary\u00a0of\u00a0most\u00a0programmers. More\u00a0tools\u00a0appeared,\nespecially\u00a0for\u00a0Java. One\u00a0downside\u00a0of\u00a0this\u00a0popularity\u00a0has\u00a0been\u00a0people\u00a0using\u00a0\u201crefactoring\u201d\nloosely,\u00a0to\u00a0mean\u00a0any\u00a0kind\u00a0of\u00a0restructuring. Despite\u00a0this,\u00a0however,\u00a0it\u00a0has\u00a0become\u00a0a\nmainstream\u00a0practice.", "domains": ["Design Patterns"], "source": "Refactoring.Improving.the.Design.of.Existing.Code.pdf", "section": "Page 81", "position": 81, "chunk_type": "semantic", "token_estimate": 331}
{"text": "Perhaps\u00a0the\u00a0biggest\u00a0change\u00a0to\u00a0refactoring\u00a0in\u00a0the\u00a0last\u00a0decade\u00a0or\u00a0so\u00a0is\u00a0the\u00a0availability\u00a0of: tools\u00a0that\u00a0support\u00a0automated\u00a0refactoring. If\u00a0I\u00a0want\u00a0to\u00a0rename\u00a0a\u00a0method\u00a0in\u00a0Java\u00a0and\u00a0I\u2019m\nusing\u00a0IntelliJ\u00a0IDEA\u00a0[intellij]\u00a0or\u00a0Eclipse\u00a0[eclipse]\u00a0(to\u00a0mention\u00a0just\u00a0two),\u00a0I\u00a0can\u00a0do\u00a0it\u00a0by\npicking\u00a0an\u00a0item\u00a0off\u00a0the\u00a0menu. The\u00a0tool\u00a0completes\u00a0the\u00a0refactoring\u00a0for\u00a0me\u2014and\u00a0I\u2019m\nusually\u00a0sufficiently\u00a0confident\u00a0in\u00a0its\u00a0work\u00a0that\u00a0I\u00a0don\u2019t\u00a0bother\u00a0running\u00a0the\u00a0test\u00a0suite. www.EBooksWorld.ir", "domains": ["Software Quality Attributes"], "source": "Refactoring.Improving.the.Design.of.Existing.Code.pdf", "section": "Page 81", "position": 81, "chunk_type": "semantic", "token_estimate": 77}
{"text": "Chapter 3: Bad Smells in Code\nby\u00a0Kent\u00a0Beck\u00a0and\u00a0Martin\u00a0Fowler\n\u201cIf\u00a0it\u00a0stinks,\u00a0change\u00a0it.\u201d\n\u2014\u00a0Grandma\u00a0Beck,\u00a0discussing\u00a0child\u00adrearing\u00a0philosophy\nBy\u00a0now\u00a0you\u00a0have\u00a0a\u00a0good\u00a0idea\u00a0of\u00a0how\u00a0refactoring\u00a0works. But\u00a0just\u00a0because\u00a0you\u00a0know\u00a0how\ndoesn\u2019t\u00a0mean\u00a0you\u00a0know\u00a0when. Deciding\u00a0when\u00a0to\u00a0start\u00a0refactoring\u2014and\u00a0when\u00a0to\u00a0stop\u2014is\njust\u00a0as\u00a0important\u00a0to\u00a0refactoring\u00a0as\u00a0knowing\u00a0how\u00a0to\u00a0operate\u00a0the\u00a0mechanics\u00a0of\u00a0it. Now\u00a0comes\u00a0the\u00a0dilemma. It\u00a0is\u00a0easy\u00a0to\u00a0explain\u00a0how\u00a0to\u00a0delete\u00a0an\u00a0instance\u00a0variable\u00a0or\ncreate\u00a0a\u00a0hierarchy.\u00a0These\u00a0are\u00a0simple\u00a0matters. Trying\u00a0to\u00a0explain\u00a0when\u00a0you\u00a0should\u00a0do\nthese\u00a0things\u00a0is\u00a0not\u00a0so\u00a0cut\u00adand\u00addried. Instead\u00a0of\u00a0appealing\u00a0to\u00a0some\u00a0vague\u00a0notion\u00a0of\nprogramming\u00a0aesthetics\u00a0(which,\u00a0frankly,\u00a0is\u00a0what\u00a0we\u00a0consultants\u00a0usually\u00a0do),\u00a0I\u00a0wanted\nsomething\u00a0a\u00a0bit\u00a0more\u00a0solid. When\u00a0I\u00a0was\u00a0writing\u00a0the\u00a0first\u00a0edition\u00a0of\u00a0this\u00a0book,\u00a0I\u00a0was\u00a0mulling\u00a0over\u00a0this\u00a0issue\u00a0as\u00a0I\nvisited\u00a0Kent\u00a0Beck\u00a0in\u00a0Zurich. Perhaps\u00a0he\u00a0was\u00a0under\u00a0the\u00a0influence\u00a0of\u00a0the\u00a0odors\u00a0of\u00a0his\nnewborn\u00a0daughter\u00a0at\u00a0the\u00a0time,\u00a0but\u00a0he\u00a0had\u00a0come\u00a0up\u00a0with\u00a0the\u00a0notion\u00a0of\u00a0describing\u00a0the\n\u201cwhen\u201d\u00a0of\u00a0refactoring\u00a0in\u00a0terms\u00a0of\u00a0smells. \u201cSmells,\u201d\u00a0you\u00a0say,\u00a0\u201cand\u00a0that\u00a0is\u00a0supposed\u00a0to\u00a0be\u00a0better\u00a0than\u00a0vague\u00a0aesthetics?\u201d\u00a0Well,\u00a0yes. We\u00a0have\u00a0looked\u00a0at\u00a0lots\u00a0of\u00a0code,\u00a0written\u00a0for\u00a0projects\u00a0that\u00a0span\u00a0the\u00a0gamut\u00a0from\u00a0wildly\nsuccessful\u00a0to\u00a0nearly\u00a0dead. In\u00a0doing\u00a0so,\u00a0we\u00a0have\u00a0learned\u00a0to\u00a0look\u00a0for\u00a0certain\u00a0structures\u00a0in\nthe\u00a0code\u00a0that\u00a0suggest\u2014sometimes,\u00a0scream\u00a0for\u2014the\u00a0possibility\u00a0of\u00a0refactoring. (We\u00a0are\nswitching\u00a0over\u00a0to\u00a0\u201cwe\u201d\u00a0in\u00a0this\u00a0chapter\u00a0to\u00a0reflect\u00a0the\u00a0fact\u00a0that\u00a0Kent\u00a0and\u00a0I\u00a0wrote\u00a0this\nchapter\u00a0jointly. You\u00a0can\u00a0tell\u00a0the\u00a0difference\u00a0because\u00a0the\u00a0funny\u00a0jokes\u00a0are\u00a0mine\u00a0and\u00a0the\nothers\u00a0are\u00a0his.) One\u00a0thing\u00a0we\u00a0won\u2019t\u00a0try\u00a0to\u00a0give\u00a0you\u00a0is\u00a0precise\u00a0criteria\u00a0for\u00a0when\u00a0a\u00a0refactoring\u00a0is\u00a0overdue. In\u00a0our\u00a0experience,\u00a0no\u00a0set\u00a0of\u00a0metrics\u00a0rivals\u00a0informed\u00a0human\u00a0intuition. What\u00a0we\u00a0will\u00a0do\u00a0is\ngive\u00a0you\u00a0indications\u00a0that\u00a0there\u00a0is\u00a0trouble\u00a0that\u00a0can\u00a0be\u00a0solved\u00a0by\u00a0a\u00a0refactoring. You\u00a0will\nHistory\nTopics\nTutorials\nOffers & Deals\nHighlights\nSettings\nSupport\nSign Out\n \n  \n \n  \n \n \n \n \n \n \nwww.EBooksWorld.ir", "domains": ["Design Principles"], "source": "Refactoring.Improving.the.Design.of.Existing.Code.pdf", "section": "Page 85", "position": 85, "chunk_type": "semantic", "token_estimate": 339}
{"text": "If\u00a0you\u2019ve\u00a0tried\u00a0that\u00a0and\u00a0you\u00a0still\u00a0have\u00a0too\u00a0many\u00a0temps\u00a0and\u00a0parameters,\u00a0it\u2019s\u00a0time\u00a0to\u00a0get: out\u00a0the\u00a0heavy\u00a0artillery:\u00a0Replace\u00a0Function\u00a0with\u00a0Command\u00a0(337). How\u00a0do\u00a0you\u00a0identify\u00a0the\u00a0clumps\u00a0of\u00a0code\u00a0to\u00a0extract? A\u00a0good\u00a0technique\u00a0is\u00a0to\u00a0look\u00a0for\ncomments.\u00a0They\u00a0often\u00a0signal\u00a0this\u00a0kind\u00a0of\u00a0semantic\u00a0distance. A\u00a0block\u00a0of\u00a0code\u00a0with\u00a0a\ncomment\u00a0that\u00a0tells\u00a0you\u00a0what\u00a0it\u00a0is\u00a0doing\u00a0can\u00a0be\u00a0replaced\u00a0by\u00a0a\u00a0method\u00a0whose\u00a0name\u00a0is\nbased\u00a0on\u00a0the\u00a0comment.\u00a0Even\u00a0a\u00a0single\u00a0line\u00a0is\u00a0worth\u00a0extracting\u00a0if\u00a0it\u00a0needs\u00a0explanation. Conditionals\u00a0and\u00a0loops\u00a0also\u00a0give\u00a0signs\u00a0for\u00a0extractions. Use\u00a0Decompose\u00a0Conditional\n(260)\u00a0to\u00a0deal\u00a0with\u00a0conditional\u00a0expressions. A\u00a0big\u00a0switch\u00a0statement\u00a0should\u00a0have\u00a0its\u00a0legs\nturned\u00a0into\u00a0single\u00a0function\u00a0calls\u00a0with\u00a0Extract\u00a0Function\u00a0(106). If\u00a0there\u2019s\u00a0more\u00a0than\u00a0one\nswitch\u00a0statement\u00a0switching\u00a0on\u00a0the\u00a0same\u00a0condition,\u00a0you\u00a0should\u00a0apply\u00a0Replace\nConditional\u00a0with\u00a0Polymorphism\u00a0(272). With\u00a0loops,\u00a0extract\u00a0the\u00a0loop\u00a0and\u00a0the\u00a0code\u00a0within\u00a0the\u00a0loop\u00a0into\u00a0its\u00a0own\u00a0method. If\u00a0you\nfind\u00a0it\u00a0hard\u00a0to\u00a0give\u00a0an\u00a0extracted\u00a0loop\u00a0a\u00a0name,\u00a0that\u00a0may\u00a0be\u00a0because\u00a0it\u2019s\u00a0doing\u00a0two\ndifferent\u00a0things\u2014in\u00a0which\u00a0case\u00a0don\u2019t\u00a0be\u00a0afraid\u00a0to\u00a0use\u00a0Split\u00a0Loop\u00a0(227)\u00a0to\u00a0break\u00a0out\u00a0the\nseparate\u00a0tasks.", "domains": ["Design Patterns"], "source": "Refactoring.Improving.the.Design.of.Existing.Code.pdf", "section": "Page 88", "position": 88, "chunk_type": "semantic", "token_estimate": 196}
{"text": "how\u00a0it\u00a0was\u00a0invented\u00a0by\u00a0demons\u00a0from\u00a0the\u00a0fourth\u00a0plane\u00a0of\u00a0hell,\u00a0which\u00a0is\u00a0the\u00a0resting\u00a0place: of\u00a0any\u00a0programmer\u00a0who\u00a0dares\u00a0to\u00a0use\u00a0it. And,\u00a0although\u00a0we\u00a0are\u00a0somewhat\u00a0skeptical\u00a0about\nfire\u00a0and\u00a0brimstone,\u00a0it\u2019s\u00a0still\u00a0one\u00a0of\u00a0the\u00a0most\u00a0pungent\u00a0odors\u00a0we\u00a0are\u00a0likely\u00a0to\u00a0run\u00a0into. The\nproblem\u00a0with\u00a0global\u00a0data\u00a0is\u00a0that\u00a0it\u00a0can\u00a0be\u00a0modified\u00a0from\u00a0anywhere\u00a0in\u00a0the\u00a0code\u00a0base,\u00a0and\nthere\u2019s\u00a0no\u00a0mechanism\u00a0to\u00a0discover\u00a0which\u00a0bit\u00a0of\u00a0code\u00a0touched\u00a0it. Time\u00a0and\u00a0again,\u00a0this\nleads\u00a0to\u00a0bugs\u00a0that\u00a0breed\u00a0from\u00a0a\u00a0form\u00a0of\u00a0spooky\u00a0action\u00a0from\u00a0a\u00a0distance\u2014and\u00a0it\u2019s\u00a0very\nhard\u00a0to\u00a0find\u00a0out\u00a0where\u00a0the\u00a0errant\u00a0bit\u00a0of\u00a0program\u00a0is. The\u00a0most\u00a0obvious\u00a0form\u00a0of\u00a0global\ndata\u00a0is\u00a0global\u00a0variables,\u00a0but\u00a0we\u00a0also\u00a0see\u00a0this\u00a0problem\u00a0with\u00a0class\u00a0variables\u00a0and\u00a0singletons. Our\u00a0key\u00a0defense\u00a0here\u00a0is\u00a0Encapsulate\u00a0Variable\u00a0(132),\u00a0which\u00a0is\u00a0always\u00a0our\u00a0first\u00a0move\nwhen\u00a0confronted\u00a0with\u00a0data\u00a0that\u00a0is\u00a0open\u00a0to\u00a0contamination\u00a0by\u00a0any\u00a0part\u00a0of\u00a0a\u00a0program. At\nleast\u00a0when\u00a0you\u00a0have\u00a0it\u00a0wrapped\u00a0by\u00a0a\u00a0function,\u00a0you\u00a0can\u00a0start\u00a0seeing\u00a0where\u00a0it\u2019s\u00a0modified\nand\u00a0start\u00a0to\u00a0control\u00a0its\u00a0access. Then,\u00a0it\u2019s\u00a0good\u00a0to\u00a0limit\u00a0its\u00a0scope\u00a0as\u00a0much\u00a0as\u00a0possible\u00a0by\nmoving\u00a0it\u00a0within\u00a0a\u00a0class\u00a0or\u00a0module\u00a0where\u00a0only\u00a0that\u00a0module\u2019s\u00a0code\u00a0can\u00a0see\u00a0it. Global\u00a0data\u00a0is\u00a0especially\u00a0nasty\u00a0when\u00a0it\u2019s\u00a0mutable. Global\u00a0data\u00a0that\u00a0you\u00a0can\u00a0guarantee\nnever\u00a0changes\u00a0after\u00a0the\u00a0program\u00a0starts\u00a0is\u00a0relatively\u00a0safe\u2014if\u00a0you\u00a0have\u00a0a\u00a0language\u00a0that\u00a0can\nenforce\u00a0that\u00a0guarantee. Global\u00a0data\u00a0illustrates\u00a0Paracelsus\u2019s\u00a0maxim:\u00a0The\u00a0difference\u00a0between\u00a0a\u00a0poison\u00a0and\nsomething\u00a0benign\u00a0is\u00a0the\u00a0dose. You\u00a0can\u00a0get\u00a0away\u00a0with\u00a0small\u00a0doses\u00a0of\u00a0global\u00a0data,\u00a0but\u00a0it\ngets\u00a0exponentially\u00a0harder\u00a0to\u00a0deal\u00a0with\u00a0the\u00a0more\u00a0you\u00a0have. Even\u00a0with\u00a0little\u00a0bits,\u00a0we\u00a0like\nto\u00a0keep\u00a0it\u00a0encapsulated\u2014that\u2019s\u00a0the\u00a0key\u00a0to\u00a0coping\u00a0with\u00a0changes\u00a0as\u00a0the\u00a0software\u00a0evolves.", "domains": ["Design Patterns", "Code Organization"], "source": "Refactoring.Improving.the.Design.of.Existing.Code.pdf", "section": "Page 89", "position": 89, "chunk_type": "semantic", "token_estimate": 299}
{"text": "We\u00a0structure\u00a0our\u00a0software\u00a0to\u00a0make\u00a0change\u00a0easier\u037e\u00a0after\u00a0all,\u00a0software\u00a0is\u00a0meant\u00a0to\u00a0be\u00a0soft.: When\u00a0we\u00a0make\u00a0a\u00a0change,\u00a0we\u00a0want\u00a0to\u00a0be\u00a0able\u00a0to\u00a0jump\u00a0to\u00a0a\u00a0single\u00a0clear\u00a0point\u00a0in\u00a0the\nsystem\u00a0and\u00a0make\u00a0the\u00a0change. When\u00a0you\u00a0can\u2019t\u00a0do\u00a0this,\u00a0you\u00a0are\u00a0smelling\u00a0one\u00a0of\u00a0two\nclosely\u00a0related\u00a0pungencies. Divergent\u00a0change\u00a0occurs\u00a0when\u00a0one\u00a0module\u00a0is\u00a0often\u00a0changed\u00a0in\u00a0different\u00a0ways\u00a0for\ndifferent\u00a0reasons. If\u00a0you\u00a0look\u00a0at\u00a0a\u00a0module\u00a0and\u00a0say,\u00a0\u201cWell,\u00a0I\u00a0will\u00a0have\u00a0to\u00a0change\u00a0these\nthree\u00a0functions\u00a0every\u00a0time\u00a0I\u00a0get\u00a0a\u00a0new\u00a0database\u037e\u00a0I\u00a0have\u00a0to\u00a0change\u00a0these\u00a0four\u00a0functions\nevery\u00a0time\u00a0there\u00a0is\u00a0a\u00a0new\u00a0financial\u00a0instrument,\u201d\u00a0this\u00a0is\u00a0an\u00a0indication\u00a0of\u00a0divergent\nchange. The\u00a0database\u00a0interaction\u00a0and\u00a0financial\u00a0processing\u00a0problems\u00a0are\u00a0separate\ncontexts,\u00a0and\u00a0we\u00a0can\u00a0make\u00a0our\u00a0programming\u00a0life\u00a0better\u00a0by\u00a0moving\u00a0such\u00a0contexts\u00a0into\nseparate\u00a0modules. That\u00a0way,\u00a0when\u00a0we\u00a0have\u00a0a\u00a0change\u00a0to\u00a0one\u00a0context,\u00a0we\u00a0only\u00a0have\u00a0to\nunderstand\u00a0that\u00a0one\u00a0context\u00a0and\u00a0ignore\u00a0the\u00a0other. We\u00a0always\u00a0found\u00a0this\u00a0to\u00a0be\nimportant,\u00a0but\u00a0now,\u00a0with\u00a0our\u00a0brains\u00a0shrinking\u00a0with\u00a0age,\u00a0it\u00a0becomes\u00a0all\u00a0the\u00a0more\nimperative. Of\u00a0course,\u00a0you\u00a0often\u00a0discover\u00a0this\u00a0only\u00a0after\u00a0you\u2019ve\u00a0added\u00a0a\u00a0few\u00a0databases\nor\u00a0financial\u00a0instruments\u037e\u00a0context\u00a0boundaries\u00a0are\u00a0usually\u00a0unclear\u00a0in\u00a0the\u00a0early\u00a0days\u00a0of\u00a0a\nprogram\u00a0and\u00a0continue\u00a0to\u00a0shift\u00a0as\u00a0a\u00a0software\u00a0system\u2019s\u00a0capabilities\u00a0change. www.EBooksWorld.ir", "domains": ["Code Organization"], "source": "Refactoring.Improving.the.Design.of.Existing.Code.pdf", "section": "Page 90", "position": 90, "chunk_type": "semantic", "token_estimate": 222}
{"text": "Shotgun\u00a0surgery\u00a0is\u00a0similar\u00a0to\u00a0divergent\u00a0change\u00a0but\u00a0is\u00a0the\u00a0opposite.\u00a0You\u00a0whiff\u00a0this\u00a0when,: every\u00a0time\u00a0you\u00a0make\u00a0a\u00a0change,\u00a0you\u00a0have\u00a0to\u00a0make\u00a0a\u00a0lot\u00a0of\u00a0little\u00a0edits\u00a0to\u00a0a\u00a0lot\u00a0of\u00a0different\nclasses. When\u00a0the\u00a0changes\u00a0are\u00a0all\u00a0over\u00a0the\u00a0place,\u00a0they\u00a0are\u00a0hard\u00a0to\u00a0find,\u00a0and\u00a0it\u2019s\u00a0easy\u00a0to\nmiss\u00a0an\u00a0important\u00a0change. In\u00a0this\u00a0case,\u00a0you\u00a0want\u00a0to\u00a0use\u00a0Move\u00a0Function\u00a0(198)\u00a0and\u00a0Move\u00a0Field\u00a0(207)\u00a0to\u00a0put\u00a0all\u00a0the\nchanges\u00a0into\u00a0a\u00a0single\u00a0module. If\u00a0you\u00a0have\u00a0a\u00a0bunch\u00a0of\u00a0functions\u00a0operating\u00a0on\u00a0similar\ndata,\u00a0use\u00a0Combine\u00a0Functions\u00a0into\u00a0Class\u00a0(144). If\u00a0you\u00a0have\u00a0functions\u00a0that\u00a0are\ntransforming\u00a0or\u00a0enriching\u00a0a\u00a0data\u00a0structure,\u00a0use\u00a0Combine\u00a0Functions\u00a0into\u00a0Transform\n(149). Split\u00a0Phase\u00a0(154)\u00a0is\u00a0often\u00a0useful\u00a0here\u00a0if\u00a0the\u00a0common\u00a0functions\u00a0can\u00a0combine\u00a0their\noutput\u00a0for\u00a0a\u00a0consuming\u00a0phase\u00a0of\u00a0logic. A\u00a0useful\u00a0tactic\u00a0for\u00a0shotgun\u00a0surgery\u00a0is\u00a0to\u00a0use\u00a0inlining\u00a0refactorings,\u00a0such\u00a0as\u00a0Inline\nFunction\u00a0(115)\u00a0or\u00a0Inline\u00a0Class\u00a0(186),\u00a0to\u00a0pull\u00a0together\u00a0poorly\u00a0separated\u00a0logic. You\u2019ll\u00a0end\nup\u00a0with\u00a0a\u00a0Long\u00a0Method\u00a0or\u00a0a\u00a0Large\u00a0Class,\u00a0but\u00a0can\u00a0then\u00a0use\u00a0extractions\u00a0to\u00a0break\u00a0it\u00a0up\u00a0into\nmore\u00a0sensible\u00a0pieces. Even\u00a0though\u00a0we\u00a0are\u00a0inordinately\u00a0fond\u00a0of\u00a0small\u00a0functions\u00a0and\nclasses\u00a0in\u00a0our\u00a0code,\u00a0we\u00a0aren\u2019t\u00a0afraid\u00a0of\u00a0creating\u00a0something\u00a0large\u00a0as\u00a0an\u00a0intermediate\u00a0step\nto\u00a0reorganization.", "domains": ["Code Organization"], "source": "Refactoring.Improving.the.Design.of.Existing.Code.pdf", "section": "Page 91", "position": 91, "chunk_type": "semantic", "token_estimate": 213}
{"text": "When\u00a0we\u00a0modularize\u00a0a\u00a0program,\u00a0we\u00a0are\u00a0trying\u00a0to\u00a0separate\u00a0the\u00a0code\u00a0into\u00a0zones\u00a0to: maximize\u00a0the\u00a0interaction\u00a0inside\u00a0a\u00a0zone\u00a0and\u00a0minimize\u00a0interaction\u00a0between\u00a0zones. A\nclassic\u00a0case\u00a0of\u00a0Feature\u00a0Envy\u00a0occurs\u00a0when\u00a0a\u00a0function\u00a0in\u00a0one\u00a0module\u00a0spends\u00a0more\u00a0time\ncommunicating\u00a0with\u00a0functions\u00a0or\u00a0data\u00a0inside\u00a0another\u00a0module\u00a0than\u00a0it\u00a0does\u00a0within\u00a0its\nown\u00a0module. We\u2019ve\u00a0lost\u00a0count\u00a0of\u00a0the\u00a0times\u00a0we\u2019ve\u00a0seen\u00a0a\u00a0function\u00a0invoking\u00a0half\u00ada\u00addozen\ngetter\u00a0methods\u00a0on\u00a0another\u00a0object\u00a0to\u00a0calculate\u00a0some\u00a0value. Fortunately,\u00a0the\u00a0cure\u00a0for\u00a0that\ncase\u00a0is\u00a0obvious:\u00a0The\u00a0function\u00a0clearly\u00a0wants\u00a0to\u00a0be\u00a0with\u00a0the\u00a0data,\u00a0so\u00a0use\u00a0Move\u00a0Function\n(198)\u00a0to\u00a0get\u00a0it\u00a0there. Sometimes,\u00a0only\u00a0a\u00a0part\u00a0of\u00a0a\u00a0function\u00a0suffers\u00a0from\u00a0envy,\u00a0in\u00a0which\ncase\u00a0use\u00a0Extract\u00a0Function\u00a0(106)\u00a0on\u00a0the\u00a0jealous\u00a0bit,\u00a0and\u00a0Move\u00a0Function\u00a0(198)\u00a0to\u00a0give\u00a0it\u00a0a\nwww.EBooksWorld.ir", "domains": ["Code Organization"], "source": "Refactoring.Improving.the.Design.of.Existing.Code.pdf", "section": "Page 91", "position": 91, "chunk_type": "semantic", "token_estimate": 134}
{"text": "dream\u00a0home.: Of\u00a0course\u00a0not\u00a0all\u00a0cases\u00a0are\u00a0cut\u00adand\u00addried. Often,\u00a0a\u00a0function\u00a0uses\u00a0features\u00a0of\u00a0several\nmodules,\u00a0so\u00a0which\u00a0one\u00a0should\u00a0it\u00a0live\u00a0with? The\u00a0heuristic\u00a0we\u00a0use\u00a0is\u00a0to\u00a0determine\u00a0which\nmodule\u00a0has\u00a0most\u00a0of\u00a0the\u00a0data\u00a0and\u00a0put\u00a0the\u00a0function\u00a0with\u00a0that\u00a0data. This\u00a0step\u00a0is\u00a0often\nmade\u00a0easier\u00a0if\u00a0you\u00a0use\u00a0Extract\u00a0Function\u00a0(106)\u00a0to\u00a0break\u00a0the\u00a0function\u00a0into\u00a0pieces\u00a0that\u00a0go\ninto\u00a0different\u00a0places. Of\u00a0course,\u00a0there\u00a0are\u00a0several\u00a0sophisticated\u00a0patterns\u00a0that\u00a0break\u00a0this\u00a0rule. From\u00a0the\u00a0Gang\nof\u00a0Four\u00a0[gof],\u00a0Strategy\u00a0and\u00a0Visitor\u00a0immediately\u00a0leap\u00a0to\u00a0mind. Kent\u00a0Beck\u2019s\u00a0Self\nDelegation\u00a0[Beck\u00a0SBPP]\u00a0is\u00a0another.\u00a0Use\u00a0these\u00a0to\u00a0combat\u00a0the\u00a0divergent\u00a0change\u00a0smell. The\u00a0fundamental\u00a0rule\u00a0of\u00a0thumb\u00a0is\u00a0to\u00a0put\u00a0things\u00a0together\u00a0that\u00a0change\u00a0together. Data\u00a0and\nthe\u00a0behavior\u00a0that\u00a0references\u00a0that\u00a0data\u00a0usually\u00a0change\u00a0together\u2014but\u00a0there\u00a0are\nexceptions. When\u00a0the\u00a0exceptions\u00a0occur,\u00a0we\u00a0move\u00a0the\u00a0behavior\u00a0to\u00a0keep\u00a0changes\u00a0in\u00a0one\nplace. Strategy\u00a0and\u00a0Visitor\u00a0allow\u00a0you\u00a0to\u00a0change\u00a0behavior\u00a0easily\u00a0because\u00a0they\u00a0isolate\u00a0the\nsmall\u00a0amount\u00a0of\u00a0behavior\u00a0that\u00a0needs\u00a0to\u00a0be\u00a0overridden,\u00a0at\u00a0the\u00a0cost\u00a0of\u00a0further\u00a0indirection.", "domains": ["Design Patterns", "Code Organization"], "source": "Refactoring.Improving.the.Design.of.Existing.Code.pdf", "section": "Page 92", "position": 92, "chunk_type": "semantic", "token_estimate": 177}
{"text": "PRIMITIVE OBSESSION: Most\u00a0programming\u00a0environments\u00a0are\u00a0built\u00a0on\u00a0a\u00a0widely\u00a0used\u00a0set\u00a0of\u00a0primitive\u00a0types:\nintegers,\u00a0floating\u00a0point\u00a0numbers,\u00a0and\u00a0strings. Libraries\u00a0may\u00a0add\u00a0some\u00a0additional\u00a0small\nobjects\u00a0such\u00a0as\u00a0dates. We\u00a0find\u00a0many\u00a0programmers\u00a0are\u00a0curiously\u00a0reluctant\u00a0to\u00a0create\ntheir\u00a0own\u00a0fundamental\u00a0types\u00a0which\u00a0are\u00a0useful\u00a0for\u00a0their\u00a0domain\u2014such\u00a0as\u00a0money,\ncoordinates,\u00a0or\u00a0ranges. We\u00a0thus\u00a0see\u00a0calculations\u00a0that\u00a0treat\u00a0monetary\u00a0amounts\u00a0as\u00a0plain\nnumbers,\u00a0or\u00a0calculations\u00a0of\u00a0physical\u00a0quantities\u00a0that\u00a0ignore\u00a0units\u00a0(adding\u00a0inches\u00a0to\nmillimeters),\u00a0or\u00a0lots\u00a0of\u00a0code\u00a0doing\u00a0if\u00a0(a\u00a0<\u00a0upper\u00a0&&\u00a0a\u00a0>\u00a0lower). Strings\u00a0are\u00a0particularly\u00a0common\u00a0petri\u00a0dishes\u00a0for\u00a0this\u00a0kind\u00a0of\u00a0odor:\u00a0A\u00a0telephone\u00a0number\nis\u00a0more\u00a0than\u00a0just\u00a0a\u00a0collection\u00a0of\u00a0characters. If\u00a0nothing\u00a0else,\u00a0a\u00a0proper\u00a0type\u00a0can\u00a0often\ninclude\u00a0consistent\u00a0display\u00a0logic\u00a0for\u00a0when\u00a0it\u00a0needs\u00a0to\u00a0be\u00a0displayed\u00a0in\u00a0a\u00a0user\u00a0interface. Representing\u00a0such\u00a0types\u00a0as\u00a0strings\u00a0is\u00a0such\u00a0a\u00a0common\u00a0stench\u00a0that\u00a0people\u00a0call\u00a0them\n\u201cstringly\u00a0typed\u201d\u00a0variables. You\u00a0can\u00a0move\u00a0out\u00a0of\u00a0the\u00a0primitive\u00a0cave\u00a0into\u00a0the\u00a0centrally\u00a0heated\u00a0world\u00a0of\u00a0meaningful\ntypes\u00a0by\u00a0using\u00a0Replace\u00a0Primitive\u00a0with\u00a0Object\u00a0(174). If\u00a0the\u00a0primitive\u00a0is\u00a0a\u00a0type\u00a0code\ncontrolling\u00a0conditional\u00a0behavior,\u00a0use\u00a0Replace\u00a0Type\u00a0Code\u00a0with\u00a0Subclasses\u00a0(362)\nfollowed\u00a0by\u00a0Replace\u00a0Conditional\u00a0with\u00a0Polymorphism\u00a0(272). Groups\u00a0of\u00a0primitives\u00a0that\u00a0commonly\u00a0appear\u00a0together\u00a0are\u00a0data\u00a0clumps\u00a0and\u00a0should\u00a0be\ncivilized\u00a0with\u00a0Extract\u00a0Class\u00a0(182)\u00a0and\u00a0Introduce\u00a0Parameter\u00a0Object\u00a0(140).", "domains": ["Code Organization"], "source": "Refactoring.Improving.the.Design.of.Existing.Code.pdf", "section": "Page 93", "position": 93, "chunk_type": "semantic", "token_estimate": 223}
{"text": "One\u00a0of\u00a0the\u00a0prime\u00a0features\u00a0of\u00a0objects\u00a0is\u00a0encapsulation\u2014hiding\u00a0internal\u00a0details\u00a0from\u00a0the: rest\u00a0of\u00a0the\u00a0world.\u00a0Encapsulation\u00a0often\u00a0comes\u00a0with\u00a0delegation. You\u00a0ask\u00a0a\u00a0director\nwhether\u00a0she\u00a0is\u00a0free\u00a0for\u00a0a\u00a0meeting\u037e\u00a0she\u00a0delegates\u00a0the\u00a0message\u00a0to\u00a0her\u00a0diary\u00a0and\u00a0gives\u00a0you\nan\u00a0answer.\u00a0All\u00a0well\u00a0and\u00a0good. There\u00a0is\u00a0no\u00a0need\u00a0to\u00a0know\u00a0whether\u00a0the\u00a0director\u00a0uses\u00a0a\ndiary,\u00a0an\u00a0electronic\u00a0gizmo,\u00a0or\u00a0a\u00a0secretary\u00a0to\u00a0keep\u00a0track\u00a0of\u00a0her\u00a0appointments. c\u00a0However,\u00a0this\u00a0can\u00a0go\u00a0too\u00a0far. You\u00a0look\u00a0at\u00a0a\u00a0class\u2019s\u00a0interface\u00a0and\u00a0find\u00a0half\u00a0the\u00a0methods\nare\u00a0delegating\u00a0to\u00a0this\u00a0other\u00a0class. After\u00a0a\u00a0while,\u00a0it\u00a0is\u00a0time\u00a0to\u00a0use\u00a0Remove\u00a0Middle\u00a0Man\n(192)\u00a0and\u00a0talk\u00a0to\u00a0the\u00a0object\u00a0that\u00a0really\u00a0knows\u00a0what\u2019s\u00a0going\u00a0on. If\u00a0only\u00a0a\u00a0few\u00a0methods\naren\u2019t\u00a0doing\u00a0much,\u00a0use\u00a0Inline\u00a0Function\u00a0(115)\u00a0to\u00a0inline\u00a0them\u00a0into\u00a0the\u00a0caller. If\u00a0there\u00a0is\nadditional\u00a0behavior,\u00a0you\u00a0can\u00a0use\u00a0Replace\u00a0Superclass\u00a0with\u00a0Delegate\u00a0(399)\u00a0or\u00a0Replace\nSubclass\u00a0with\u00a0Delegate\u00a0(381)\u00a0to\u00a0fold\u00a0the\u00a0middle\u00a0man\u00a0into\u00a0the\u00a0real\u00a0object. That\u00a0allows\nyou\u00a0to\u00a0extend\u00a0behavior\u00a0without\u00a0chasing\u00a0all\u00a0that\u00a0delegation.", "domains": ["Code Organization"], "source": "Refactoring.Improving.the.Design.of.Existing.Code.pdf", "section": "Page 96", "position": 96, "chunk_type": "semantic", "token_estimate": 177}
{"text": "Software\u00a0people\u00a0like\u00a0strong\u00a0walls\u00a0between\u00a0their\u00a0modules\u00a0and\u00a0complain\u00a0bitterly\u00a0about: how\u00a0trading\u00a0data\u00a0around\u00a0too\u00a0much\u00a0increases\u00a0coupling. To\u00a0make\u00a0things\u00a0work,\u00a0some\ntrade\u00a0has\u00a0to\u00a0occur,\u00a0but\u00a0we\u00a0need\u00a0to\u00a0reduce\u00a0it\u00a0to\u00a0a\u00a0minimum\u00a0and\u00a0keep\u00a0it\u00a0all\u00a0above\u00a0board. Modules\u00a0that\u00a0whisper\u00a0to\u00a0each\u00a0other\u00a0by\u00a0the\u00a0coffee\u00a0machine\u00a0need\u00a0to\u00a0be\u00a0separated\u00a0by\u00a0using\nMove\u00a0Function\u00a0(198)\u00a0and\u00a0Move\u00a0Field\u00a0(207)\u00a0to\u00a0reduce\u00a0the\u00a0need\u00a0to\u00a0chat. If\u00a0modules\u00a0have\ncommon\u00a0interests,\u00a0try\u00a0to\u00a0create\u00a0a\u00a0third\u00a0module\u00a0to\u00a0keep\u00a0that\u00a0commonality\u00a0in\u00a0a\u00a0well\u00ad\nregulated\u00a0vehicle,\u00a0or\u00a0use\u00a0Hide\u00a0Delegate\u00a0(189)\u00a0to\u00a0make\u00a0another\u00a0module\u00a0act\u00a0as\u00a0an\nintermediary. Inheritance\u00a0can\u00a0often\u00a0lead\u00a0to\u00a0collusion. Subclasses\u00a0are\u00a0always\u00a0going\u00a0to\u00a0know\u00a0more\nabout\u00a0their\u00a0parents\u00a0than\u00a0their\u00a0parents\u00a0would\u00a0like\u00a0them\u00a0to\u00a0know. If\u00a0it\u2019s\u00a0time\u00a0to\u00a0leave\nhome,\u00a0apply\u00a0Replace\u00a0Subclass\u00a0with\u00a0Delegate\u00a0(381)\u00a0or\u00a0Replace\u00a0Superclass\u00a0with\nDelegate\u00a0(399).", "domains": ["Code Organization"], "source": "Refactoring.Improving.the.Design.of.Existing.Code.pdf", "section": "Page 96", "position": 96, "chunk_type": "semantic", "token_estimate": 148}
{"text": "When\u00a0a\u00a0class\u00a0is\u00a0trying\u00a0to\u00a0do\u00a0too\u00a0much,\u00a0it\u00a0often\u00a0shows\u00a0up\u00a0as\u00a0too\u00a0many\u00a0fields.\u00a0When\u00a0a: class\u00a0has\u00a0too\u00a0many\u00a0fields,\u00a0duplicated\u00a0code\u00a0cannot\u00a0be\u00a0far\u00a0behind. You\u00a0can\u00a0Extract\u00a0Class\u00a0(182)\u00a0to\u00a0bundle\u00a0a\u00a0number\u00a0of\u00a0the\u00a0variables. Choose\u00a0variables\u00a0to\u00a0go\ntogether\u00a0in\u00a0the\u00a0component\u00a0that\u00a0makes\u00a0sense\u00a0for\u00a0each. For\u00a0example,\u00a0\u201cdepositAmount\u201d\nand\u00a0\u201cdepositCurrency\u201d\u00a0are\u00a0likely\u00a0to\u00a0belong\u00a0together\u00a0in\u00a0a\u00a0component. More\u00a0generally,\ncommon\u00a0prefixes\u00a0or\u00a0suffixes\u00a0for\u00a0some\u00a0subset\u00a0of\u00a0the\u00a0variables\u00a0in\u00a0a\u00a0class\u00a0suggest\u00a0the\nopportunity\u00a0for\u00a0a\u00a0component. If\u00a0the\u00a0component\u00a0makes\u00a0sense\u00a0with\u00a0inheritance,\u00a0you\u2019ll\nwww.EBooksWorld.ir", "domains": ["Code Organization"], "source": "Refactoring.Improving.the.Design.of.Existing.Code.pdf", "section": "Page 96", "position": 96, "chunk_type": "semantic", "token_estimate": 98}
{"text": "Subclasses\u00a0get\u00a0to\u00a0inherit\u00a0the\u00a0methods\u00a0and\u00a0data\u00a0of\u00a0their\u00a0parents.\u00a0But\u00a0what\u00a0if\u00a0they\u00a0don\u2019t: want\u00a0or\u00a0need\u00a0what\u00a0they\u00a0are\u00a0given? They\u00a0are\u00a0given\u00a0all\u00a0these\u00a0great\u00a0gifts\u00a0and\u00a0pick\u00a0just\u00a0a\u00a0few\nto\u00a0play\u00a0with. The\u00a0traditional\u00a0story\u00a0is\u00a0that\u00a0this\u00a0means\u00a0the\u00a0hierarchy\u00a0is\u00a0wrong. You\u00a0need\u00a0to\u00a0create\u00a0a\u00a0new\nsibling\u00a0class\u00a0and\u00a0use\u00a0Push\u00a0Down\u00a0Method\u00a0(359)\u00a0and\u00a0Push\u00a0Down\u00a0Field\u00a0(361)\u00a0to\u00a0push\u00a0all\nthe\u00a0unused\u00a0code\u00a0to\u00a0the\u00a0sibling.\u00a0That\u00a0way\u00a0the\u00a0parent\u00a0holds\u00a0only\u00a0what\u00a0is\u00a0common. Often,\nyou\u2019ll\u00a0hear\u00a0advice\u00a0that\u00a0all\u00a0superclasses\u00a0should\u00a0be\u00a0abstract. You\u2019ll\u00a0guess\u00a0from\u00a0our\u00a0snide\u00a0use\u00a0of\u00a0\u201ctraditional\u201d\u00a0that\u00a0we\u00a0aren\u2019t\u00a0going\u00a0to\u00a0advise\u00a0this\u2014at\nleast\u00a0not\u00a0all\u00a0the\u00a0time. We\u00a0do\u00a0subclassing\u00a0to\u00a0reuse\u00a0a\u00a0bit\u00a0of\u00a0behavior\u00a0all\u00a0the\u00a0time,\u00a0and\u00a0we\nfind\u00a0it\u00a0a\u00a0perfectly\u00a0good\u00a0way\u00a0of\u00a0doing\u00a0business. There\u00a0is\u00a0a\u00a0smell\u2014we\u00a0can\u2019t\u00a0deny\u00a0it\u2014but\nusually\u00a0it\u00a0isn\u2019t\u00a0a\u00a0strong\u00a0smell. So,\u00a0we\u00a0say\u00a0that\u00a0if\u00a0the\u00a0refused\u00a0bequest\u00a0is\u00a0causing\u00a0confusion\nand\u00a0problems,\u00a0follow\u00a0the\u00a0traditional\u00a0advice. However,\u00a0don\u2019t\u00a0feel\u00a0you\u00a0have\u00a0to\u00a0do\u00a0it\u00a0all\u00a0the\ntime.\u00a0Nine\u00a0times\u00a0out\u00a0of\u00a0ten\u00a0this\u00a0smell\u00a0is\u00a0too\u00a0faint\u00a0to\u00a0be\u00a0worth\u00a0cleaning. The\u00a0smell\u00a0of\u00a0refused\u00a0bequest\u00a0is\u00a0much\u00a0stronger\u00a0if\u00a0the\u00a0subclass\u00a0is\u00a0reusing\u00a0behavior\u00a0but\ndoes\u00a0not\u00a0want\u00a0to\u00a0support\u00a0the\u00a0interface\u00a0of\u00a0the\u00a0superclass. We\u00a0don\u2019t\u00a0mind\u00a0refusing\nimplementations\u2014but\u00a0refusing\u00a0interface\u00a0gets\u00a0us\u00a0on\u00a0our\u00a0high\u00a0horses. In\u00a0this\u00a0case,\nhowever,\u00a0don\u2019t\u00a0fiddle\u00a0with\u00a0the\u00a0hierarchy\u037e\u00a0you\u00a0want\u00a0to\u00a0gut\u00a0it\u00a0by\u00a0applying\u00a0Replace\nSubclass\u00a0with\u00a0Delegate\u00a0(381)\u00a0or\u00a0Replace\u00a0Superclass\u00a0with\u00a0Delegate\u00a0(399).", "domains": ["Code Organization"], "source": "Refactoring.Improving.the.Design.of.Existing.Code.pdf", "section": "Page 98", "position": 98, "chunk_type": "semantic", "token_estimate": 259}
{"text": "finished,\u00a0we\u00a0often\u00a0find\u00a0that\u00a0the\u00a0comments\u00a0are\u00a0superfluous.: If\u00a0you\u00a0need\u00a0a\u00a0comment\u00a0to\u00a0explain\u00a0what\u00a0a\u00a0block\u00a0of\u00a0code\u00a0does,\u00a0try\u00a0Extract\u00a0Function\u00a0(106). If\u00a0the\u00a0method\u00a0is\u00a0already\u00a0extracted\u00a0but\u00a0you\u00a0still\u00a0need\u00a0a\u00a0comment\u00a0to\u00a0explain\u00a0what\u00a0it\u00a0does,\nuse\u00a0Change\u00a0Function\u00a0Declaration\u00a0(124)\u00a0to\u00a0rename\u00a0it. If\u00a0you\u00a0need\u00a0to\u00a0state\u00a0some\u00a0rules\nabout\u00a0the\u00a0required\u00a0state\u00a0of\u00a0the\u00a0system,\u00a0use\u00a0Introduce\u00a0Assertion\u00a0(302). When\u00a0you\u00a0feel\u00a0the\u00a0need\u00a0to\u00a0write\u00a0a\u00a0comment,\u00a0first\u00a0try\u00a0to\u00a0refactor\u00a0the\u00a0code\u00a0so\nthat\u00a0any\u00a0comment\u00a0becomes\u00a0superfluous. A\u00a0good\u00a0time\u00a0to\u00a0use\u00a0a\u00a0comment\u00a0is\u00a0when\u00a0you\u00a0don\u2019t\u00a0know\u00a0what\u00a0to\u00a0do. In\u00a0addition\u00a0to\ndescribing\u00a0what\u00a0is\u00a0going\u00a0on,\u00a0comments\u00a0can\u00a0indicate\u00a0areas\u00a0in\u00a0which\u00a0you\u00a0aren\u2019t\u00a0sure. A\ncomment\u00a0can\u00a0also\u00a0explain\u00a0why\u00a0you\u00a0did\u00a0something. This\u00a0kind\u00a0of\u00a0information\u00a0helps\nfuture\u00a0modifiers,\u00a0especially\u00a0forgetful\u00a0ones. www.EBooksWorld.ir", "domains": ["Design Patterns"], "source": "Refactoring.Improving.the.Design.of.Existing.Code.pdf", "section": "Page 99", "position": 99, "chunk_type": "semantic", "token_estimate": 142}
{"text": "Chapter 4: Building Tests\nRefactoring\u00a0is\u00a0a\u00a0valuable\u00a0tool,\u00a0but\u00a0it\u00a0can\u2019t\u00a0come\u00a0alone. To\u00a0do\u00a0refactoring\u00a0properly,\u00a0I\u00a0need\na\u00a0solid\u00a0suite\u00a0of\u00a0tests\u00a0to\u00a0spot\u00a0my\u00a0inevitable\u00a0mistakes. Even\u00a0with\u00a0automated\u00a0refactoring\ntools,\u00a0many\u00a0of\u00a0my\u00a0refactorings\u00a0will\u00a0still\u00a0need\u00a0checking\u00a0via\u00a0a\u00a0test\u00a0suite. I\u00a0don\u2019t\u00a0find\u00a0this\u00a0to\u00a0be\u00a0a\u00a0disadvantage. Even\u00a0without\u00a0refactoring,\u00a0writing\u00a0good\u00a0tests\nincreases\u00a0my\u00a0effectiveness\u00a0as\u00a0a\u00a0programmer. This\u00a0was\u00a0a\u00a0surprise\u00a0for\u00a0me\u00a0and\u00a0is\ncounterintuitive\u00a0for\u00a0most\u00a0programmers\u2014so\u00a0it\u2019s\u00a0worth\u00a0explaining\u00a0why. THE VALUE OF SELF-TESTING CODE\nIf\u00a0you\u00a0look\u00a0at\u00a0how\u00a0most\u00a0programmers\u00a0spend\u00a0their\u00a0time,\u00a0you\u2019ll\u00a0find\u00a0that\u00a0writing\u00a0code\u00a0is\nactually\u00a0quite\u00a0a\u00a0small\u00a0fraction. Some\u00a0time\u00a0is\u00a0spent\u00a0figuring\u00a0out\u00a0what\u00a0ought\u00a0to\u00a0be\u00a0going\non,\u00a0some\u00a0time\u00a0is\u00a0spent\u00a0designing,\u00a0but\u00a0most\u00a0time\u00a0is\u00a0spent\u00a0debugging. I\u2019m\u00a0sure\u00a0every\nreader\u00a0can\u00a0remember\u00a0long\u00a0hours\u00a0of\u00a0debugging\u2014often,\u00a0well\u00a0into\u00a0the\u00a0night. Every\nprogrammer\u00a0can\u00a0tell\u00a0a\u00a0story\u00a0of\u00a0a\u00a0bug\u00a0that\u00a0took\u00a0a\u00a0whole\u00a0day\u00a0(or\u00a0more)\u00a0to\u00a0find. Fixing\u00a0the\nbug\u00a0is\u00a0usually\u00a0pretty\u00a0quick,\u00a0but\u00a0finding\u00a0it\u00a0is\u00a0a\u00a0nightmare. And\u00a0then,\u00a0when\u00a0you\u00a0do\u00a0fix\u00a0a\nbug,\u00a0there\u2019s\u00a0always\u00a0a\u00a0chance\u00a0that\u00a0another\u00a0one\u00a0will\u00a0appear\u00a0and\u00a0that\u00a0you\u00a0might\u00a0not\u00a0even\nnotice\u00a0it\u00a0till\u00a0much\u00a0later.\u00a0And\u00a0you\u2019ll\u00a0spend\u00a0ages\u00a0finding\u00a0that\u00a0bug. The\u00a0event\u00a0that\u00a0started\u00a0me\u00a0on\u00a0the\u00a0road\u00a0to\u00a0self\u00adtesting\u00a0code\u00a0was\u00a0a\u00a0talk\u00a0at\u00a0OOPSLA\u00a0in\n1992. Someone\u00a0(I\u00a0think\u00a0it\u00a0was\u00a0\u201cBedarra\u201d\u00a0Dave\u00a0Thomas)\u00a0said\u00a0offhandedly,\u00a0\u201cClasses\nshould\u00a0contain\u00a0their\u00a0own\u00a0tests.\u201d\u00a0So\u00a0I\u00a0decided\u00a0to\u00a0incorporate\u00a0tests\u00a0into\u00a0the\u00a0code\u00a0base\ntogether\u00a0with\u00a0the\u00a0production\u00a0code. As\u00a0I\u00a0was\u00a0also\u00a0doing\u00a0iterative\u00a0development,\u00a0I\u00a0tried\nadding\u00a0tests\u00a0as\u00a0I\u00a0completed\u00a0each\u00a0iteration. The\u00a0project\u00a0on\u00a0which\u00a0I\u00a0was\u00a0working\u00a0at\u00a0that\ntime\u00a0was\u00a0quite\u00a0small,\u00a0so\u00a0we\u00a0put\u00a0out\u00a0iterations\u00a0every\u00a0week\u00a0or\u00a0so. Running\u00a0the\u00a0tests\nbecame\u00a0fairly\u00a0straightforward\u2014but\u00a0although\u00a0it\u00a0was\u00a0easy,\u00a0it\u00a0was\u00a0still\u00a0pretty\u00a0boring. This\nwas\u00a0because\u00a0every\u00a0test\u00a0produced\u00a0output\u00a0to\u00a0the\u00a0console\u00a0that\u00a0I\u00a0had\u00a0to\u00a0check. Now\u00a0I\u2019m\u00a0a\npretty\u00a0lazy\u00a0person\u00a0and\u00a0am\u00a0prepared\u00a0to\u00a0work\u00a0quite\u00a0hard\u00a0in\u00a0order\u00a0to\u00a0avoid\u00a0work. I\nrealized\u00a0that,\u00a0instead\u00a0of\u00a0looking\u00a0at\u00a0the\u00a0screen\u00a0to\u00a0see\u00a0if\u00a0it\u00a0printed\u00a0out\u00a0some\u00a0information\nfrom\u00a0the\u00a0model,\u00a0I\u00a0could\u00a0get\u00a0the\u00a0computer\u00a0to\u00a0make\u00a0that\u00a0test. All\u00a0I\u00a0had\u00a0to\u00a0do\u00a0was\u00a0put\u00a0the\nHistory\nTopics\nTutorials\nOffers & Deals\nHighlights\nSettings\nSupport\nSign Out\n \n  \n \n  \n \n \n \n \n \n \nwww.EBooksWorld.ir", "domains": ["Design Principles"], "source": "Refactoring.Improving.the.Design.of.Existing.Code.pdf", "section": "Page 100", "position": 100, "chunk_type": "semantic", "token_estimate": 396}
{"text": "In\u00a0fact,\u00a0one\u00a0of\u00a0the\u00a0most\u00a0useful\u00a0times\u00a0to\u00a0write\u00a0tests\u00a0is\u00a0before\u00a0I\u00a0start\u00a0programming.\u00a0When: I\u00a0need\u00a0to\u00a0add\u00a0a\u00a0feature,\u00a0I\u00a0begin\u00a0by\u00a0writing\u00a0the\u00a0test.\u00a0This\u00a0isn\u2019t\u00a0as\u00a0backward\u00a0as\u00a0it\u00a0sounds. By\u00a0writing\u00a0the\u00a0test,\u00a0I\u2019m\u00a0asking\u00a0myself\u00a0what\u00a0needs\u00a0to\u00a0be\u00a0done\u00a0to\u00a0add\u00a0the\u00a0function. Writing\u00a0the\u00a0test\u00a0also\u00a0concentrates\u00a0me\u00a0on\u00a0the\u00a0interface\u00a0rather\u00a0than\u00a0the\u00a0implementation\n(always\u00a0a\u00a0good\u00a0thing). It\u00a0also\u00a0means\u00a0I\u00a0have\u00a0a\u00a0clear\u00a0point\u00a0at\u00a0which\u00a0I\u2019m\u00a0done\u00a0coding\u2014\nwhen\u00a0the\u00a0test\u00a0works. Kent\u00a0Beck\u00a0baked\u00a0this\u00a0habit\u00a0of\u00a0writing\u00a0the\u00a0test\u00a0first\u00a0into\u00a0a\u00a0technique\u00a0called\u00a0Test\u00adDriven\nDevelopment\u00a0(TDD)\u00a0[mf\u00adtdd]. The\u00a0Test\u00adDriven\u00a0Development\u00a0approach\u00a0to\nprogramming\u00a0relies\u00a0on\u00a0short\u00a0cycles\u00a0of\u00a0writing\u00a0a\u00a0(failing)\u00a0test,\u00a0writing\u00a0the\u00a0code\u00a0to\u00a0make\nthat\u00a0test\u00a0work,\u00a0and\u00a0refactoring\u00a0to\u00a0ensure\u00a0the\u00a0result\u00a0is\u00a0as\u00a0clean\u00a0as\u00a0possible. This\u00a0test\u00ad\ncode\u00adrefactor\u00a0cycle\u00a0should\u00a0occur\u00a0many\u00a0times\u00a0per\u00a0hour,\u00a0and\u00a0can\u00a0be\u00a0a\u00a0very\u00a0productive\u00a0and\ncalming\u00a0way\u00a0to\u00a0write\u00a0code. I\u2019m\u00a0not\u00a0going\u00a0to\u00a0discuss\u00a0it\u00a0further\u00a0here,\u00a0but\u00a0I\u00a0do\u00a0use\u00a0and\nwarmly\u00a0recommend\u00a0it. That\u2019s\u00a0enough\u00a0of\u00a0the\u00a0polemic. Although\u00a0I\u00a0believe\u00a0everyone\u00a0would\u00a0benefit\u00a0by\u00a0writing\u00a0self\u00ad\ntesting\u00a0code,\u00a0it\u00a0is\u00a0not\u00a0the\u00a0point\u00a0of\u00a0this\u00a0book.\u00a0This\u00a0book\u00a0is\u00a0about\u00a0refactoring. Refactoring\nrequires\u00a0tests.\u00a0If\u00a0you\u00a0want\u00a0to\u00a0refactor,\u00a0you\u00a0have\u00a0to\u00a0write\u00a0tests. This\u00a0chapter\u00a0gives\u00a0you\u00a0a\nstart\u00a0in\u00a0doing\u00a0this\u00a0for\u00a0JavaScript. This\u00a0is\u00a0not\u00a0a\u00a0testing\u00a0book,\u00a0so\u00a0I\u2019m\u00a0not\u00a0going\u00a0to\u00a0go\u00a0into\nmuch\u00a0detail. I\u2019ve\u00a0found,\u00a0however,\u00a0that\u00a0with\u00a0testing\u00a0a\u00a0remarkably\u00a0small\u00a0amount\u00a0of\u00a0work\ncan\u00a0have\u00a0surprisingly\u00a0big\u00a0benefits. As\u00a0with\u00a0everything\u00a0else\u00a0in\u00a0this\u00a0book,\u00a0I\u00a0describe\u00a0the\u00a0testing\u00a0approach\u00a0using\u00a0examples. When\u00a0I\u00a0develop\u00a0code,\u00a0I\u00a0write\u00a0the\u00a0tests\u00a0as\u00a0I\u00a0go. But\u00a0sometimes,\u00a0I\u00a0need\u00a0to\u00a0refactor\u00a0some\ncode\u00a0without\u00a0tests\u2014then\u00a0I\u00a0have\u00a0to\u00a0make\u00a0the\u00a0code\u00a0self\u00adtesting\u00a0before\u00a0I\u00a0begin.", "domains": ["Code Organization"], "source": "Refactoring.Improving.the.Design.of.Existing.Code.pdf", "section": "Page 102", "position": 102, "chunk_type": "semantic", "token_estimate": 306}
{"text": "The\u00a0production\u00a0plan\u00a0has\u00a0a\u00a0demand\u00a0and\u00a0price\u00a0for\u00a0each\u00a0province.\u00a0Each\u00a0province\u00a0has: producers,\u00a0each\u00a0of\u00a0which\u00a0can\u00a0produce\u00a0a\u00a0certain\u00a0number\u00a0of\u00a0units\u00a0at\u00a0a\u00a0particular\u00a0price. The\u00a0UI\u00a0also\u00a0shows\u00a0how\u00a0much\u00a0revenue\u00a0each\u00a0producer\u00a0would\u00a0earn\u00a0if\u00a0they\u00a0sell\u00a0all\u00a0their\nproduction. At\u00a0the\u00a0bottom,\u00a0the\u00a0screen\u00a0shows\u00a0the\u00a0shortfall\u00a0in\u00a0production\u00a0(the\u00a0demand\nminus\u00a0the\u00a0total\u00a0production)\u00a0and\u00a0the\u00a0profit\u00a0for\u00a0this\u00a0plan. The\u00a0UI\u00a0allows\u00a0the\u00a0user\u00a0to\nmanipulate\u00a0the\u00a0demand,\u00a0price,\u00a0and\u00a0the\u00a0individual\u00a0producer\u2019s\u00a0production\u00a0and\u00a0costs\u00a0to\nsee\u00a0the\u00a0effect\u00a0on\u00a0the\u00a0production\u00a0shortfall\u00a0and\u00a0profits. Whenever\u00a0a\u00a0user\u00a0changes\u00a0any\nnumber\u00a0in\u00a0the\u00a0display,\u00a0all\u00a0the\u00a0others\u00a0update\u00a0immediately. I\u2019m\u00a0showing\u00a0a\u00a0user\u00a0interface\u00a0here,\u00a0so\u00a0you\u00a0can\u00a0sense\u00a0how\u00a0the\u00a0software\u00a0is\u00a0used,\u00a0but\u00a0I\u2019m\nonly\u00a0going\u00a0to\u00a0concentrate\u00a0on\u00a0the\u00a0business\u00a0logic\u00a0part\u00a0of\u00a0the\u00a0software\u2014that\u00a0is,\u00a0the\u00a0classes\nthat\u00a0calculate\u00a0the\u00a0profit\u00a0and\u00a0the\u00a0shortfall,\u00a0not\u00a0the\u00a0code\u00a0that\u00a0generates\u00a0the\u00a0HTML\u00a0and\nhooks\u00a0up\u00a0the\u00a0field\u00a0changes\u00a0to\u00a0the\u00a0underlying\u00a0business\u00a0logic. This\u00a0chapter\u00a0is\u00a0just\u00a0an\nintroduction\u00a0to\u00a0the\u00a0world\u00a0of\u00a0self\u00adtesting\u00a0code,\u00a0so\u00a0it\u00a0makes\u00a0sense\u00a0for\u00a0me\u00a0to\u00a0start\u00a0with\u00a0the\neasiest\u00a0case\u2014which\u00a0is\u00a0code\u00a0that\u00a0doesn\u2019t\u00a0involve\u00a0user\u00a0interface,\u00a0persistence,\u00a0or\u00a0external\nservice\u00a0interaction. Such\u00a0separation,\u00a0however,\u00a0is\u00a0a\u00a0good\u00a0idea\u00a0in\u00a0any\u00a0case:\u00a0Once\u00a0this\u00a0kind\nof\u00a0business\u00a0logic\u00a0gets\u00a0at\u00a0all\u00a0complicated,\u00a0I\u00a0will\u00a0separate\u00a0it\u00a0from\u00a0the\u00a0UI\u00a0mechanics\u00a0so\u00a0I\ncan\u00a0more\u00a0easily\u00a0reason\u00a0about\u00a0it\u00a0and\u00a0test\u00a0it. This\u00a0business\u00a0logic\u00a0code\u00a0involves\u00a0two\u00a0classes:\u00a0one\u00a0that\u00a0represents\u00a0a\u00a0single\u00a0producer,\u00a0and\nthe\u00a0other\u00a0that\u00a0represents\u00a0a\u00a0whole\u00a0province. The\u00a0province\u2019s\u00a0constructor\u00a0takes\u00a0a\nJavaScript\u00a0object\u2014one\u00a0we\u00a0could\u00a0imagine\u00a0being\u00a0supplied\u00a0by\u00a0a\u00a0JSON\u00a0document. Here\u2019s\u00a0the\u00a0code\u00a0that\u00a0loads\u00a0the\u00a0province\u00a0from\u00a0the\u00a0JSON\u00a0data:\nclass\u00a0Province\u2026\nwww.EBooksWorld.ir", "domains": ["Code Organization"], "source": "Refactoring.Improving.the.Design.of.Existing.Code.pdf", "section": "Page 103", "position": 103, "chunk_type": "semantic", "token_estimate": 292}
{"text": "describe('province',\u00a0function()\u00a0{: it('shortfall',\u00a0function()\u00a0{\n\u00a0\u00a0\u00a0\u00a0const\u00a0asia\u00a0=\u00a0new\u00a0Province(sampleProvinceData())\u037e\n\u00a0\u00a0\u00a0\u00a0expect(asia.shortfall).equal(5)\u037e\n\u00a0\u00a0})\u037e\n})\u037e\nI\u00a0usually\u00a0prefer\u00a0the\u00a0assert\u00a0style,\u00a0but\u00a0at\u00a0the\u00a0moment\u00a0I\u00a0mostly\u00a0use\u00a0the\u00a0expect\u00a0style\u00a0while\nworking\u00a0in\u00a0JavaScript. Different\u00a0environments\u00a0provide\u00a0different\u00a0ways\u00a0to\u00a0run\u00a0tests. When\u00a0I\u2019m\u00a0programming\u00a0in\nJava,\u00a0I\u00a0use\u00a0an\u00a0IDE\u00a0that\u00a0gives\u00a0me\u00a0a\u00a0graphical\u00a0test\u00a0runner. Its\u00a0progress\u00a0bar\u00a0is\u00a0green\u00a0as\nlong\u00a0as\u00a0all\u00a0the\u00a0tests\u00a0pass,\u00a0and\u00a0turns\u00a0red\u00a0should\u00a0any\u00a0of\u00a0them\u00a0fail. My\u00a0colleagues\u00a0often\u00a0use\nthe\u00a0phrases\u00a0\u201cgreen\u00a0bar\u201d\u00a0and\u00a0\u201cred\u00a0bar\u201d\u00a0to\u00a0describe\u00a0the\u00a0state\u00a0of\u00a0tests. I\u00a0might\u00a0say,\u00a0\u201cNever\nrefactor\u00a0on\u00a0a\u00a0red\u00a0bar,\u201d\u00a0meaning\u00a0you\u00a0shouldn\u2019t\u00a0be\u00a0refactoring\u00a0if\u00a0your\u00a0test\u00a0suite\u00a0has\u00a0a\nfailing\u00a0test. Or,\u00a0I\u00a0might\u00a0say,\u00a0\u201cRevert\u00a0to\u00a0green\u201d\u00a0to\u00a0say\u00a0you\u00a0should\u00a0undo\u00a0recent\u00a0changes\nand\u00a0go\u00a0back\u00a0to\u00a0the\u00a0last\u00a0state\u00a0where\u00a0you\u00a0had\u00a0all\u00adpassing\u00a0test\u00a0suite\u00a0(usually\u00a0by\u00a0going\u00a0back\nto\u00a0a\u00a0recent\u00a0version\u00adcontrol\u00a0checkpoint). Graphical\u00a0test\u00a0runners\u00a0are\u00a0nice,\u00a0but\u00a0not\u00a0essential. I\u00a0usually\u00a0have\u00a0my\u00a0tests\u00a0set\u00a0to\u00a0run\nfrom\u00a0a\u00a0single\u00a0key\u00a0in\u00a0Emacs,\u00a0and\u00a0observe\u00a0the\u00a0text\u00a0feedback\u00a0in\u00a0my\u00a0compilation\u00a0window. The\u00a0key\u00a0point\u00a0is\u00a0that\u00a0I\u00a0can\u00a0quickly\u00a0see\u00a0if\u00a0my\u00a0tests\u00a0are\u00a0all\u00a0OK.", "domains": ["Design Patterns"], "source": "Refactoring.Improving.the.Design.of.Existing.Code.pdf", "section": "Page 109", "position": 109, "chunk_type": "semantic", "token_estimate": 199}
{"text": "Click\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image: it('negative\u00a0demand',\u00a0function()\u00a0{\n\u00a0\u00a0asia.demand\u00a0=\u00a0\u00ad1\u037e\n\u00a0\u00a0expect(asia.shortfall).equal(\u00ad26)\u037e\n\u00a0\u00a0expect(asia.profit).equal(\u00ad10)\u037e\n})\u037e\nAt\u00a0this\u00a0point,\u00a0I\u00a0may\u00a0start\u00a0to\u00a0wonder\u00a0if\u00a0a\u00a0negative\u00a0demand\u00a0resulting\u00a0in\u00a0a\u00a0negative\u00a0profit\nreally\u00a0makes\u00a0any\u00a0sense\u00a0for\u00a0the\u00a0domain.\u00a0Shouldn\u2019t\u00a0the\u00a0minimum\u00a0demand\u00a0be\u00a0zero? In\nwhich\u00a0case,\u00a0perhaps,\u00a0the\u00a0setter\u00a0should\u00a0react\u00a0differently\u00a0to\u00a0a\u00a0negative\u00a0argument\u2014raising\nan\u00a0error\u00a0or\u00a0setting\u00a0the\u00a0value\u00a0to\u00a0zero\u00a0anyway. These\u00a0are\u00a0good\u00a0questions\u00a0to\u00a0ask,\u00a0and\nwriting\u00a0tests\u00a0like\u00a0this\u00a0helps\u00a0me\u00a0think\u00a0about\u00a0how\u00a0the\u00a0code\u00a0ought\u00a0to\u00a0react\u00a0to\u00a0boundary\ncases. Think\u00a0of\u00a0the\u00a0boundary\u00a0conditions\u00a0under\u00a0which\u00a0things\u00a0might\u00a0go\u00a0wrong\u00a0and\nconcentrate\u00a0your\u00a0tests\u00a0there. The\u00a0setters\u00a0take\u00a0a\u00a0string\u00a0from\u00a0the\u00a0fields\u00a0in\u00a0the\u00a0UI,\u00a0which\u00a0are\u00a0constrained\u00a0to\u00a0only\u00a0accept\nnumbers\u2014but\u00a0they\u00a0can\u00a0still\u00a0be\u00a0blank,\u00a0so\u00a0I\u00a0should\u00a0have\u00a0tests\u00a0that\u00a0ensure\u00a0the\u00a0code\nresponds\u00a0to\u00a0the\u00a0blanks\u00a0the\u00a0way\u00a0I\u00a0want\u00a0it\u00a0to. describe(\u2019province\u2019\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nit('empty\u00a0string\u00a0demand',\u00a0function()\u00a0{\n\u00a0\u00a0asia.demand\u00a0=\u00a0\"\"\u037e\n\u00a0\u00a0expect(asia.shortfall).NaN\u037e\n\u00a0\u00a0expect(asia.profit).NaN\u037e\n})\u037e\nNotice\u00a0how\u00a0I\u2019m\u00a0playing\u00a0the\u00a0part\u00a0of\u00a0an\u00a0enemy\u00a0to\u00a0my\u00a0code. I\u2019m\u00a0actively\u00a0thinking\u00a0about\nhow\u00a0I\u00a0can\u00a0break\u00a0it.\u00a0I\u00a0find\u00a0that\u00a0state\u00a0of\u00a0mind\u00a0to\u00a0be\u00a0both\u00a0productive\u00a0and\u00a0fun. It\u00a0indulges\nthe\u00a0mean\u00adspirited\u00a0part\u00a0of\u00a0my\u00a0psyche. This\u00a0one\u00a0is\u00a0interesting:\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\ndescribe('string\u00a0for\u00a0producers',\u00a0function()\u00a0{\nwww.EBooksWorld.ir", "domains": ["Design Patterns"], "source": "Refactoring.Improving.the.Design.of.Existing.Code.pdf", "section": "Page 114", "position": 114, "chunk_type": "semantic", "token_estimate": 225}
{"text": "That\u2019s\u00a0as\u00a0far\u00a0as\u00a0I\u2019m\u00a0going\u00a0to\u00a0go\u00a0with\u00a0this\u00a0chapter\u2014after\u00a0all,\u00a0this\u00a0is\u00a0a\u00a0book\u00a0on\u00a0refactoring,: not\u00a0on\u00a0testing. But\u00a0testing\u00a0is\u00a0an\u00a0important\u00a0topic,\u00a0both\u00a0because\u00a0it\u2019s\u00a0a\u00a0necessary\nfoundation\u00a0for\u00a0refactoring\u00a0and\u00a0because\u00a0it\u2019s\u00a0a\u00a0valuable\u00a0tool\u00a0in\u00a0its\u00a0own\u00a0right. While\u00a0I\u2019ve\nbeen\u00a0happy\u00a0to\u00a0see\u00a0the\u00a0growth\u00a0of\u00a0refactoring\u00a0as\u00a0a\u00a0programming\u00a0practice\u00a0since\u00a0I\u00a0wrote\nthis\u00a0book,\u00a0I\u2019ve\u00a0been\u00a0even\u00a0happier\u00a0to\u00a0see\u00a0the\u00a0change\u00a0in\u00a0attitudes\u00a0to\u00a0testing. Previously\nseen\u00a0as\u00a0the\u00a0responsibility\u00a0of\u00a0a\u00a0separate\u00a0(and\u00a0inferior)\u00a0group,\u00a0testing\u00a0is\u00a0now\u00a0increasingly\na\u00a0first\u00adclass\u00a0concern\u00a0of\u00a0any\u00a0decent\u00a0software\u00a0developer. Architectures\u00a0often\u00a0are,\u00a0rightly,\njudged\u00a0on\u00a0their\u00a0testability. The\u00a0kinds\u00a0of\u00a0tests\u00a0I\u2019ve\u00a0shown\u00a0here\u00a0are\u00a0unit\u00a0tests,\u00a0designed\u00a0to\u00a0operate\u00a0on\u00a0a\u00a0small\u00a0area\u00a0of\nthe\u00a0code\u00a0and\u00a0run\u00a0fast. They\u00a0are\u00a0the\u00a0backbone\u00a0of\u00a0self\u00adtesting\u00a0code\u037e\u00a0most\u00a0tests\u00a0in\u00a0such\u00a0a\nsystem\u00a0are\u00a0unit\u00a0tests. There\u00a0are\u00a0other\u00a0kinds\u00a0of\u00a0tests\u00a0too,\u00a0focusing\u00a0on\u00a0integration\nbetween\u00a0components,\u00a0exercising\u00a0multiple\u00a0levels\u00a0of\u00a0the\u00a0software\u00a0together,\u00a0looking\u00a0for\nwww.EBooksWorld.ir", "domains": ["Software Quality Attributes", "Code Organization"], "source": "Refactoring.Improving.the.Design.of.Existing.Code.pdf", "section": "Page 116", "position": 116, "chunk_type": "semantic", "token_estimate": 168}
{"text": "performance\u00a0issues,\u00a0etc.\u00a0(And\u00a0even\u00a0more\u00a0varied\u00a0than\u00a0the\u00a0types\u00a0of\u00a0tests\u00a0are\u00a0the: arguments\u00a0people\u00a0get\u00a0into\u00a0about\u00a0how\u00a0to\u00a0classify\u00a0tests.) Like\u00a0most\u00a0aspects\u00a0of\u00a0programming,\u00a0testing\u00a0is\u00a0an\u00a0iterative\u00a0activity. Unless\u00a0you\u00a0are\u00a0either\nvery\u00a0skilled\u00a0or\u00a0very\u00a0lucky,\u00a0you\u00a0won\u2019t\u00a0get\u00a0your\u00a0tests\u00a0right\u00a0the\u00a0first\u00a0time. I\u00a0find\u00a0I\u2019m\nconstantly\u00a0working\u00a0on\u00a0the\u00a0test\u00a0suite\u2014just\u00a0as\u00a0much\u00a0as\u00a0I\u00a0work\u00a0on\u00a0the\u00a0main\u00a0code. Naturally,\u00a0this\u00a0means\u00a0adding\u00a0new\u00a0tests\u00a0as\u00a0I\u00a0add\u00a0new\u00a0features,\u00a0but\u00a0it\u00a0also\u00a0involves\nlooking\u00a0at\u00a0the\u00a0existing\u00a0tests.\u00a0Are\u00a0they\u00a0clear\u00a0enough? Do\u00a0I\u00a0need\u00a0to\u00a0refactor\u00a0them\u00a0so\u00a0I\u00a0can\nmore\u00a0easily\u00a0understand\u00a0what\u00a0they\u00a0are\u00a0doing?\u00a0Have\u00a0I\u00a0got\u00a0the\u00a0right\u00a0tests? An\u00a0important\nhabit\u00a0to\u00a0get\u00a0into\u00a0is\u00a0to\u00a0respond\u00a0to\u00a0a\u00a0bug\u00a0by\u00a0first\u00a0writing\u00a0a\u00a0test\u00a0that\u00a0clearly\u00a0reveals\u00a0the\u00a0bug. Only\u00a0after\u00a0I\u00a0have\u00a0the\u00a0test\u00a0do\u00a0I\u00a0fix\u00a0the\u00a0bug. By\u00a0having\u00a0the\u00a0test,\u00a0I\u00a0know\u00a0the\u00a0bug\u00a0will\u00a0stay\ndead. I\u00a0also\u00a0think\u00a0about\u00a0that\u00a0bug\u00a0and\u00a0its\u00a0test:\u00a0Does\u00a0it\u00a0give\u00a0me\u00a0clues\u00a0to\u00a0other\u00a0gaps\u00a0in\u00a0the\ntest\u00a0suite? When\u00a0you\u00a0get\u00a0a\u00a0bug\u00a0report,\u00a0start\u00a0by\u00a0writing\u00a0a\u00a0unit\u00a0test\u00a0that\u00a0exposes\u00a0the\u00a0bug. A\u00a0common\u00a0question\u00a0is,\u00a0\u201cHow\u00a0much\u00a0testing\u00a0is\u00a0enough?\u201d\u00a0There\u2019s\u00a0no\u00a0good\u00a0measurement\nfor\u00a0this. Some\u00a0people\u00a0advocate\u00a0using\u00a0test\u00a0coverage\u00a0[mf\u00adtc]\u00a0as\u00a0a\u00a0measure,\u00a0but\u00a0test\ncoverage\u00a0analysis\u00a0is\u00a0only\u00a0good\u00a0for\u00a0identifying\u00a0untested\u00a0areas\u00a0of\u00a0the\u00a0code,\u00a0not\u00a0for\nassessing\u00a0the\u00a0quality\u00a0of\u00a0a\u00a0test\u00a0suite. The\u00a0best\u00a0measure\u00a0for\u00a0a\u00a0good\u00a0enough\u00a0test\u00a0suite\u00a0is\u00a0subjective:\u00a0How\u00a0confident\u00a0are\u00a0you\u00a0that\nif\u00a0someone\u00a0introduces\u00a0a\u00a0defect\u00a0into\u00a0the\u00a0code,\u00a0some\u00a0test\u00a0will\u00a0fail? This\u00a0isn\u2019t\u00a0something\nthat\u00a0can\u00a0be\u00a0objectively\u00a0analyzed,\u00a0and\u00a0it\u00a0doesn\u2019t\u00a0account\u00a0for\u00a0false\u00a0confidence,\u00a0but\u00a0the\u00a0aim\nof\u00a0self\u00adtesting\u00a0code\u00a0is\u00a0to\u00a0get\u00a0that\u00a0confidence. If\u00a0I\u00a0can\u00a0refactor\u00a0my\u00a0code\u00a0and\u00a0be\u00a0pretty\u00a0sure\nthat\u00a0I\u2019ve\u00a0not\u00a0introduced\u00a0a\u00a0bug\u00a0because\u00a0my\u00a0tests\u00a0come\u00a0back\u00a0green\u2014then\u00a0I\u00a0can\u00a0be\u00a0happy\nthat\u00a0I\u00a0have\u00a0good\u00a0enough\u00a0tests. It\u00a0is\u00a0possible\u00a0to\u00a0write\u00a0too\u00a0many\u00a0tests. One\u00a0sign\u00a0of\u00a0that\u00a0is\u00a0when\u00a0I\u00a0spend\u00a0more\u00a0time\nchanging\u00a0the\u00a0tests\u00a0than\u00a0the\u00a0code\u00a0under\u00a0test\u2014and\u00a0I\u00a0feel\u00a0the\u00a0tests\u00a0are\u00a0slowing\u00a0me\u00a0down. But\u00a0while\u00a0over\u00adtesting\u00a0does\u00a0happen,\u00a0it\u2019s\u00a0vanishingly\u00a0rare\u00a0compared\u00a0to\u00a0under\u00adtesting. www.EBooksWorld.ir", "domains": ["Software Quality Attributes"], "source": "Refactoring.Improving.the.Design.of.Existing.Code.pdf", "section": "Page 117", "position": 117, "chunk_type": "semantic", "token_estimate": 376}
{"text": "Once\u00a0I\u00a0accepted\u00a0this\u00a0principle,\u00a0I\u00a0developed\u00a0a\u00a0habit\u00a0of\u00a0writing\u00a0very\u00a0small\u00a0functions\u2014: typically,\u00a0only\u00a0a\u00a0few\u00a0lines\u00a0long. To\u00a0me,\u00a0any\u00a0function\u00a0with\u00a0more\u00a0than\u00a0half\u00ada\u00addozen\u00a0lines\nof\u00a0code\u00a0starts\u00a0to\u00a0smell,\u00a0and\u00a0it\u2019s\u00a0not\u00a0unusual\u00a0for\u00a0me\u00a0to\u00a0have\u00a0functions\u00a0that\u00a0are\u00a0a\u00a0single\nline\u00a0of\u00a0code. The\u00a0fact\u00a0that\u00a0size\u00a0isn\u2019t\u00a0important\u00a0was\u00a0brought\u00a0home\u00a0to\u00a0me\u00a0by\u00a0an\u00a0example\nthat\u00a0Kent\u00a0Beck\u00a0showed\u00a0me\u00a0from\u00a0the\u00a0original\u00a0Smalltalk\u00a0system. Smalltalk\u00a0in\u00a0those\u00a0days\nran\u00a0on\u00a0black\u00adand\u00adwhite\u00a0systems. If\u00a0you\u00a0wanted\u00a0to\u00a0highlight\u00a0some\u00a0text\u00a0or\u00a0graphics,\u00a0you\nwould\u00a0reverse\u00a0the\u00a0video. Smalltalk\u2019s\u00a0graphics\u00a0class\u00a0had\u00a0a\u00a0method\u00a0for\u00a0this\u00a0called\nhighlight,\u00a0whose\u00a0implementation\u00a0was\u00a0just\u00a0a\u00a0call\u00a0to\u00a0the\u00a0method\u00a0reverse. The\u00a0name\nof\u00a0the\u00a0method\u00a0was\u00a0longer\u00a0than\u00a0its\u00a0implementation\u2014but\u00a0that\u00a0didn\u2019t\u00a0matter\u00a0because\nthere\u00a0was\u00a0a\u00a0big\u00a0distance\u00a0between\u00a0the\u00a0intention\u00a0of\u00a0the\u00a0code\u00a0and\u00a0its\u00a0implementation. Some\u00a0people\u00a0are\u00a0concerned\u00a0about\u00a0short\u00a0functions\u00a0because\u00a0they\u00a0worry\u00a0about\u00a0the\nperformance\u00a0cost\u00a0of\u00a0a\u00a0function\u00a0call. When\u00a0I\u00a0was\u00a0young,\u00a0that\u00a0was\u00a0occasionally\u00a0a\u00a0factor,\nbut\u00a0that\u2019s\u00a0very\u00a0rare\u00a0now. Optimizing\u00a0compilers\u00a0often\u00a0work\u00a0better\u00a0with\u00a0shorter\u00a0functions\nwhich\u00a0can\u00a0be\u00a0cached\u00a0more\u00a0easily. As\u00a0always,\u00a0follow\u00a0the\u00a0general\u00a0guidelines\u00a0on\nperformance\u00a0optimization. Small\u00a0functions\u00a0like\u00a0this\u00a0only\u00a0work\u00a0if\u00a0the\u00a0names\u00a0are\u00a0good,\u00a0so\u00a0you\u00a0need\u00a0to\u00a0pay\u00a0good\nattention\u00a0to\u00a0naming. This\u00a0takes\u00a0practice\u2014but\u00a0once\u00a0you\u00a0get\u00a0good\u00a0at\u00a0it,\u00a0this\u00a0approach\u00a0can\nmake\u00a0code\u00a0remarkably\u00a0self\u00addocumenting. Often,\u00a0I\u00a0see\u00a0fragments\u00a0of\u00a0code\u00a0in\u00a0a\u00a0larger\u00a0function\u00a0that\u00a0start\u00a0with\u00a0a\u00a0comment\u00a0to\u00a0say\u00a0what\nthey\u00a0do. The\u00a0comment\u00a0is\u00a0often\u00a0a\u00a0good\u00a0hint\u00a0for\u00a0the\u00a0name\u00a0of\u00a0the\u00a0function\u00a0when\u00a0I\u00a0extract\nthat\u00a0fragment. Mechanics\nCreate\u00a0a\u00a0new\u00a0function,\u00a0and\u00a0name\u00a0it\u00a0after\u00a0the\u00a0intent\u00a0of\u00a0the\u00a0function\u00a0(name\u00a0it\u00a0by\u00a0what\nit\u00a0does,\u00a0not\u00a0by\u00a0how\u00a0it\u00a0does\u00a0it). If\u00a0the\u00a0code\u00a0I\u00a0want\u00a0to\u00a0extract\u00a0is\u00a0very\u00a0simple,\u00a0such\u00a0as\u00a0a\u00a0single\u00a0function\u00a0call,\u00a0I\u00a0still\nextract\u00a0it\u00a0if\u00a0the\u00a0name\u00a0of\u00a0the\u00a0new\u00a0function\u00a0will\u00a0reveal\u00a0the\u00a0intent\u00a0of\u00a0the\u00a0code\u00a0in\u00a0a\u00a0better\nway. If\u00a0I\u00a0can\u2019t\u00a0come\u00a0up\u00a0with\u00a0a\u00a0more\u00a0meaningful\u00a0name,\u00a0that\u2019s\u00a0a\u00a0sign\u00a0that\u00a0I\u00a0shouldn\u2019t\nextract\u00a0the\u00a0code. However,\u00a0I\u00a0don\u2019t\u00a0have\u00a0to\u00a0come\u00a0up\u00a0with\u00a0the\u00a0best\u00a0name\u00a0right\u00a0away\u037e\nsometimes\u00a0a\u00a0good\u00a0name\u00a0only\u00a0appears\u00a0as\u00a0I\u00a0work\u00a0with\u00a0the\u00a0extraction. It\u2019s\u00a0OK\u00a0to\nextract\u00a0a\u00a0function,\u00a0try\u00a0to\u00a0work\u00a0with\u00a0it,\u00a0realize\u00a0it\u00a0isn\u2019t\u00a0helping,\u00a0and\u00a0then\u00a0inline\u00a0it\u00a0back\nagain.\u00a0As\u00a0long\u00a0as\u00a0I\u2019ve\u00a0learned\u00a0something,\u00a0my\u00a0time\u00a0wasn\u2019t\u00a0wasted.", "domains": ["Software Quality Attributes"], "source": "Refactoring.Improving.the.Design.of.Existing.Code.pdf", "section": "Page 123", "position": 123, "chunk_type": "semantic", "token_estimate": 412}
{"text": "joints\u00a0in\u00a0our\u00a0software\u00a0systems.\u00a0And,\u00a0as\u00a0with\u00a0any\u00a0construction,\u00a0much\u00a0depends\u00a0on\u00a0those: joints. Good\u00a0joints\u00a0allow\u00a0me\u00a0to\u00a0add\u00a0new\u00a0parts\u00a0to\u00a0the\u00a0system\u00a0easily,\u00a0but\u00a0bad\u00a0ones\u00a0are\u00a0a\nconstant\u00a0source\u00a0of\u00a0difficulty,\u00a0making\u00a0it\u00a0harder\u00a0to\u00a0figure\u00a0out\u00a0what\u00a0the\u00a0software\u00a0does\u00a0and\nhow\u00a0to\u00a0modify\u00a0it\u00a0as\u00a0my\u00a0needs\u00a0change. Fortunately,\u00a0software,\u00a0being\u00a0soft,\u00a0allows\u00a0me\u00a0to\nchange\u00a0these\u00a0joints,\u00a0providing\u00a0I\u00a0do\u00a0it\u00a0carefully. The\u00a0most\u00a0important\u00a0element\u00a0of\u00a0such\u00a0a\u00a0joint\u00a0is\u00a0the\u00a0name\u00a0of\u00a0the\u00a0function. A\u00a0good\u00a0name\nallows\u00a0me\u00a0to\u00a0understand\u00a0what\u00a0the\u00a0function\u00a0does\u00a0when\u00a0I\u00a0see\u00a0it\u00a0called,\u00a0without\u00a0seeing\u00a0the\ncode\u00a0that\u00a0defines\u00a0its\u00a0implementation. However,\u00a0coming\u00a0up\u00a0with\u00a0good\u00a0names\u00a0is\u00a0hard,\nand\u00a0I\u00a0rarely\u00a0get\u00a0my\u00a0names\u00a0right\u00a0the\u00a0first\u00a0time. When\u00a0I\u00a0find\u00a0a\u00a0name\u00a0that\u2019s\u00a0confused\u00a0me,\nI\u2019m\u00a0tempted\u00a0to\u00a0leave\u00a0it\u2014after\u00a0all,\u00a0it\u2019s\u00a0only\u00a0a\u00a0name. This\u00a0is\u00a0the\u00a0work\u00a0of\u00a0the\u00a0evil\u00a0demon\nObfuscatis\u037e\u00a0for\u00a0the\u00a0sake\u00a0of\u00a0my\u00a0program\u2019s\u00a0soul\u00a0I\u00a0must\u00a0never\u00a0listen\u00a0to\u00a0him. If\u00a0I\u00a0see\u00a0a\nfunction\u00a0with\u00a0the\u00a0wrong\u00a0name,\u00a0it\u00a0is\u00a0imperative\u00a0that\u00a0I\u00a0change\u00a0it\u00a0as\u00a0soon\u00a0as\u00a0I\u00a0understand\nwhat\u00a0a\u00a0better\u00a0name\u00a0could\u00a0be. That\u00a0way,\u00a0the\u00a0next\u00a0time\u00a0I\u2019m\u00a0looking\u00a0at\u00a0this\u00a0code,\u00a0I\u00a0don\u2019t\nhave\u00a0to\u00a0figure\u00a0out\u00a0again\u00a0what\u2019s\u00a0going\u00a0on. (Often,\u00a0a\u00a0good\u00a0way\u00a0to\u00a0improve\u00a0a\u00a0name\u00a0is\u00a0to\nwrite\u00a0a\u00a0comment\u00a0to\u00a0describe\u00a0the\u00a0function\u2019s\u00a0purpose,\u00a0then\u00a0turn\u00a0that\u00a0comment\u00a0into\u00a0a\nname.) Similar\u00a0logic\u00a0applies\u00a0to\u00a0a\u00a0function\u2019s\u00a0parameters. The\u00a0parameters\u00a0of\u00a0a\u00a0function\u00a0dictate\nhow\u00a0a\u00a0function\u00a0fits\u00a0in\u00a0with\u00a0the\u00a0rest\u00a0of\u00a0its\u00a0world. Parameters\u00a0set\u00a0the\u00a0context\u00a0in\u00a0which\u00a0I\ncan\u00a0use\u00a0a\u00a0function. If\u00a0I\u00a0have\u00a0a\u00a0function\u00a0to\u00a0format\u00a0a\u00a0person\u2019s\u00a0telephone\u00a0number,\u00a0and\u00a0that\nfunction\u00a0takes\u00a0a\u00a0person\u00a0as\u00a0its\u00a0argument,\u00a0then\u00a0I\u00a0can\u2019t\u00a0use\u00a0it\u00a0to\u00a0format\u00a0a\u00a0company\u2019s\ntelephone\u00a0number. If\u00a0I\u00a0replace\u00a0the\u00a0person\u00a0parameter\u00a0with\u00a0the\u00a0telephone\u00a0number\u00a0itself,\nthen\u00a0the\u00a0formatting\u00a0code\u00a0is\u00a0more\u00a0widely\u00a0useful. Apart\u00a0from\u00a0increasing\u00a0a\u00a0function\u2019s\u00a0range\u00a0of\u00a0applicability,\u00a0I\u00a0can\u00a0also\u00a0remove\u00a0some\ncoupling,\u00a0changing\u00a0what\u00a0modules\u00a0need\u00a0to\u00a0connect\u00a0to\u00a0others. Telephone\u00a0formatting\u00a0logic\nmay\u00a0sit\u00a0in\u00a0a\u00a0module\u00a0that\u00a0has\u00a0no\u00a0knowledge\u00a0about\u00a0people. Reducing\u00a0how\u00a0much\u00a0modules\nneed\u00a0to\u00a0know\u00a0about\u00a0each\u00a0other\u00a0helps\u00a0reduce\u00a0how\u00a0much\u00a0I\u00a0need\u00a0to\u00a0put\u00a0into\u00a0my\u00a0brain\nwhen\u00a0I\u00a0change\u00a0something\u2014and\u00a0my\u00a0brain\u00a0isn\u2019t\u00a0as\u00a0big\u00a0as\u00a0it\u00a0used\u00a0to\u00a0be\u00a0(that\u00a0doesn\u2019t\u00a0say\nanything\u00a0about\u00a0the\u00a0size\u00a0of\u00a0its\u00a0container,\u00a0though).", "domains": ["Code Organization"], "source": "Refactoring.Improving.the.Design.of.Existing.Code.pdf", "section": "Page 142", "position": 142, "chunk_type": "semantic", "token_estimate": 405}
{"text": "joints\u00a0in\u00a0our\u00a0software\u00a0systems.\u00a0And,\u00a0as\u00a0with\u00a0any\u00a0construction,\u00a0much\u00a0depends\u00a0on\u00a0those: Telephone\u00a0formatting\u00a0logic\nmay\u00a0sit\u00a0in\u00a0a\u00a0module\u00a0that\u00a0has\u00a0no\u00a0knowledge\u00a0about\u00a0people. Reducing\u00a0how\u00a0much\u00a0modules\nneed\u00a0to\u00a0know\u00a0about\u00a0each\u00a0other\u00a0helps\u00a0reduce\u00a0how\u00a0much\u00a0I\u00a0need\u00a0to\u00a0put\u00a0into\u00a0my\u00a0brain\nwhen\u00a0I\u00a0change\u00a0something\u2014and\u00a0my\u00a0brain\u00a0isn\u2019t\u00a0as\u00a0big\u00a0as\u00a0it\u00a0used\u00a0to\u00a0be\u00a0(that\u00a0doesn\u2019t\u00a0say\nanything\u00a0about\u00a0the\u00a0size\u00a0of\u00a0its\u00a0container,\u00a0though). Choosing\u00a0the\u00a0right\u00a0parameters\u00a0isn\u2019t\u00a0something\u00a0that\u00a0adheres\u00a0to\u00a0simple\u00a0rules. I\u00a0may\u00a0have\na\u00a0simple\u00a0function\u00a0for\u00a0determining\u00a0if\u00a0a\u00a0payment\u00a0is\u00a0overdue,\u00a0by\u00a0looking\u00a0at\u00a0if\u00a0it\u2019s\u00a0older\nthan\u00a030\u00a0days. Should\u00a0the\u00a0parameter\u00a0to\u00a0this\u00a0function\u00a0be\u00a0the\u00a0payment\u00a0object,\u00a0or\u00a0the\u00a0due\ndate\u00a0of\u00a0the\u00a0payment? Using\u00a0the\u00a0payment\u00a0couples\u00a0the\u00a0function\u00a0to\u00a0the\u00a0interface\u00a0of\u00a0the\npayment\u00a0object. But\u00a0if\u00a0I\u00a0use\u00a0the\u00a0payment,\u00a0I\u00a0can\u00a0easily\u00a0access\u00a0other\u00a0properties\u00a0of\u00a0the\npayment,\u00a0should\u00a0the\u00a0logic\u00a0evolve,\u00a0without\u00a0having\u00a0to\u00a0change\u00a0every\u00a0bit\u00a0of\u00a0code\u00a0that\u00a0calls\nthis\u00a0function\u2014essentially,\u00a0increasing\u00a0the\u00a0encapsulation\u00a0of\u00a0the\u00a0function. www.EBooksWorld.ir", "domains": ["Code Organization"], "source": "Refactoring.Improving.the.Design.of.Existing.Code.pdf", "section": "Page 142", "position": 142, "chunk_type": "semantic", "token_estimate": 175}
{"text": "function\u00a0circumference(radius)\u00a0{: return\u00a02\u00a0*\u00a0Math.PI\u00a0*\u00a0radius\u037e\n}\nI\u00a0then\u00a0find\u00a0all\u00a0the\u00a0callers\u00a0of\u00a0circum\u00a0and\u00a0change\u00a0the\u00a0name\u00a0to\u00a0circumference. Different\u00a0language\u00a0environments\u00a0have\u00a0an\u00a0impact\u00a0on\u00a0how\u00a0easy\u00a0it\u00a0is\u00a0to\u00a0find\u00a0all\u00a0the\nreferences\u00a0to\u00a0the\u00a0old\u00a0function. Static\u00a0typing\u00a0and\u00a0a\u00a0good\u00a0IDE\u00a0provide\u00a0the\u00a0best\u00a0experience,\nusually\u00a0allowing\u00a0me\u00a0to\u00a0rename\u00a0functions\u00a0automatically\u00a0with\u00a0little\u00a0chance\u00a0of\u00a0error. Without\u00a0static\u00a0typing,\u00a0this\u00a0can\u00a0be\u00a0more\u00a0involved\u037e\u00a0even\u00a0good\u00a0searching\u00a0tools\u00a0will\u00a0then\nhave\u00a0a\u00a0lot\u00a0of\u00a0false\u00a0positives. I\u00a0use\u00a0the\u00a0same\u00a0approach\u00a0for\u00a0adding\u00a0or\u00a0removing\u00a0parameters:\u00a0find\u00a0all\u00a0the\u00a0callers,\u00a0change\nthe\u00a0declaration,\u00a0and\u00a0change\u00a0the\u00a0callers. It\u2019s\u00a0often\u00a0better\u00a0to\u00a0do\u00a0these\u00a0as\u00a0separate\u00a0steps\u2014\nso,\u00a0if\u00a0I\u2019m\u00a0both\u00a0renaming\u00a0the\u00a0function\u00a0and\u00a0adding\u00a0a\u00a0parameter,\u00a0I\u00a0first\u00a0do\u00a0the\u00a0rename,\ntest,\u00a0then\u00a0add\u00a0the\u00a0parameter,\u00a0and\u00a0test\u00a0again. A\u00a0disadvantage\u00a0of\u00a0this\u00a0simple\u00a0way\u00a0of\u00a0doing\u00a0the\u00a0refactoring\u00a0is\u00a0that\u00a0I\u00a0have\u00a0to\u00a0do\u00a0all\u00a0the\ncallers\u00a0and\u00a0the\u00a0declaration\u00a0(or\u00a0all\u00a0of\u00a0them,\u00a0if\u00a0polymorphic)\u00a0at\u00a0once. If\u00a0there\u00a0are\u00a0only\u00a0a\nfew\u00a0of\u00a0them,\u00a0or\u00a0if\u00a0I\u00a0have\u00a0decent\u00a0automated\u00a0refactoring\u00a0tools,\u00a0this\u00a0is\u00a0reasonable. But\u00a0if\nthere\u2019s\u00a0a\u00a0lot,\u00a0it\u00a0can\u00a0get\u00a0tricky. Another\u00a0problem\u00a0is\u00a0when\u00a0the\u00a0names\u00a0aren\u2019t\u00a0unique\u2014e.g.,\u00a0I\nwant\u00a0to\u00a0rename\u00a0the\u00a0a\u00a0changeAddress\u00a0method\u00a0on\u00a0a\u00a0person\u00a0class\u00a0but\u00a0the\u00a0same\u00a0method,\nwhich\u00a0I\u00a0don\u2019t\u00a0want\u00a0to\u00a0change,\u00a0exists\u00a0on\u00a0an\u00a0insurance\u00a0agreement\u00a0class. The\u00a0more\ncomplex\u00a0the\u00a0change\u00a0is,\u00a0the\u00a0less\u00a0I\u00a0want\u00a0to\u00a0do\u00a0it\u00a0in\u00a0one\u00a0go\u00a0like\u00a0this. When\u00a0this\u00a0kind\u00a0of\nproblem\u00a0arises,\u00a0I\u00a0use\u00a0the\u00a0migration\u00a0mechanics\u00a0instead. Similarly,\u00a0if\u00a0I\u00a0use\u00a0simple\nmechanics\u00a0and\u00a0something\u00a0goes\u00a0wrong,\u00a0I\u2019ll\u00a0revert\u00a0the\u00a0code\u00a0to\u00a0the\u00a0last\u00a0known\u00a0good\u00a0state\nand\u00a0try\u00a0again\u00a0using\u00a0migration\u00a0mechanics. Example: Renaming a Function (Migration Mechanics)\nAgain,\u00a0I\u00a0have\u00a0this\u00a0function\u00a0with\u00a0its\u00a0overly\u00a0abbreved\u00a0name:\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0circum(radius)\u00a0{\n\u00a0\u00a0return\u00a02\u00a0*\u00a0Math.PI\u00a0*\u00a0radius\u037e\n}\nTo\u00a0do\u00a0this\u00a0refactoring\u00a0with\u00a0migration\u00a0mechanics,\u00a0I\u00a0begin\u00a0by\u00a0applying\u00a0Extract\u00a0Function\n(106)\u00a0to\u00a0the\u00a0entire\u00a0function\u00a0body. www.EBooksWorld.ir", "domains": ["Design Patterns"], "source": "Refactoring.Improving.the.Design.of.Existing.Code.pdf", "section": "Page 145", "position": 145, "chunk_type": "semantic", "token_estimate": 342}
{"text": "are\u00a0few\u00a0more\u00a0mistake\u00adprone\u00a0programmers\u00a0than\u00a0myself.: Now,\u00a0I\u00a0can\u00a0start\u00a0changing\u00a0the\u00a0callers\u00a0by\u00a0using\u00a0Inline\u00a0Function\u00a0(115)\u00a0on\u00a0the\u00a0original\nfunction.\u00a0This\u00a0allows\u00a0me\u00a0to\u00a0change\u00a0one\u00a0caller\u00a0at\u00a0a\u00a0time. I\u00a0then\u00a0rename\u00a0the\u00a0new\u00a0function\u00a0back\u00a0to\u00a0the\u00a0original. Usually,\u00a0the\u00a0simple\u00a0mechanics\nwork\u00a0fine\u00a0for\u00a0this,\u00a0but\u00a0I\u00a0can\u00a0also\u00a0use\u00a0the\u00a0migration\u00a0approach\u00a0if\u00a0I\u00a0need\u00a0to. Example: Changing a Parameter to One of Its Properties\nThe\u00a0examples\u00a0so\u00a0far\u00a0are\u00a0simple\u00a0changes\u00a0of\u00a0a\u00a0name\u00a0and\u00a0adding\u00a0a\u00a0new\u00a0parameter,\u00a0but\nwith\u00a0the\u00a0migration\u00a0mechanics,\u00a0this\u00a0refactoring\u00a0can\u00a0handle\u00a0more\u00a0complicated\u00a0cases\u00a0quite\nneatly.\u00a0Here\u2019s\u00a0an\u00a0example\u00a0that\u00a0is\u00a0a\u00a0bit\u00a0more\u00a0involved. I\u00a0have\u00a0a\u00a0function\u00a0which\u00a0determines\u00a0if\u00a0a\u00a0customer\u00a0is\u00a0based\u00a0in\u00a0New\u00a0England. Click\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0inNewEngland(aCustomer)\u00a0{\n\u00a0\u00a0return\u00a0[\"MA\",\u00a0\"CT\",\u00a0\"ME\",\u00a0\"VT\",\u00a0\"NH\",\u00a0\"RI\"].includes(aCustomer.address.state)\u037e\n}\nHere\u00a0is\u00a0one\u00a0of\u00a0its\u00a0callers:\ncaller\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nconst\u00a0newEnglanders\u00a0=\u00a0someCustomers.filter(c\u00a0=>\u00a0inNewEngland(c))\u037e\ninNewEngland\u00a0only\u00a0uses\u00a0the\u00a0customer\u2019s\u00a0home\u00a0state\u00a0to\u00a0determine\u00a0if\u00a0it\u2019s\u00a0in\u00a0New\nEngland. I\u2019d\u00a0prefer\u00a0to\u00a0refactor\u00a0inNewEngland\u00a0so\u00a0that\u00a0it\u00a0takes\u00a0a\u00a0state\u00a0code\u00a0as\u00a0a\nparameter,\u00a0making\u00a0it\u00a0usable\u00a0in\u00a0more\u00a0contexts\u00a0by\u00a0removing\u00a0the\u00a0dependency\u00a0on\u00a0the\ncustomer. With\u00a0Change\u00a0Function\u00a0Declaration,\u00a0my\u00a0usual\u00a0first\u00a0move\u00a0is\u00a0to\u00a0apply\u00a0Extract\u00a0Function\n(106),\u00a0but\u00a0in\u00a0this\u00a0case\u00a0I\u00a0can\u00a0make\u00a0it\u00a0easier\u00a0by\u00a0first\u00a0refactoring\u00a0the\u00a0function\u00a0body\u00a0a\u00a0little. I\nuse\u00a0Extract\u00a0Variable\u00a0(119)\u00a0on\u00a0my\u00a0desired\u00a0new\u00a0parameter. Click\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nwww.EBooksWorld.ir", "domains": ["Design Patterns"], "source": "Refactoring.Improving.the.Design.of.Existing.Code.pdf", "section": "Page 148", "position": 148, "chunk_type": "semantic", "token_estimate": 250}
{"text": "function\u00a0inNewEngland(aCustomer)\u00a0{: const\u00a0stateCode\u00a0=\u00a0aCustomer.address.state\u037e\n\u00a0\u00a0return\u00a0[\"MA\",\u00a0\"CT\",\u00a0\"ME\",\u00a0\"VT\",\u00a0\"NH\",\u00a0\"RI\"].includes(stateCode)\u037e\n}\nNow\u00a0I\u00a0use\u00a0Extract\u00a0Function\u00a0(106)\u00a0to\u00a0create\u00a0that\u00a0new\u00a0function. Click\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0inNewEngland(aCustomer)\u00a0{\n\u00a0\u00a0const\u00a0stateCode\u00a0=\u00a0aCustomer.address.state\u037e\n\u00a0\u00a0return\u00a0xxNEWinNewEngland(stateCode)\u037e\n}\nfunction\u00a0xxNEWinNewEngland(stateCode)\u00a0{\n\u00a0\u00a0return\u00a0[\"MA\",\u00a0\"CT\",\u00a0\"ME\",\u00a0\"VT\",\u00a0\"NH\",\u00a0\"RI\"].includes(stateCode)\u037e\n}\nI\u00a0give\u00a0the\u00a0function\u00a0a\u00a0name\u00a0that\u2019s\u00a0easy\u00a0to\u00a0automatically\u00a0replace\u00a0to\u00a0turn\u00a0into\u00a0the\u00a0original\nname\u00a0later.\u00a0(You\u00a0can\u00a0tell\u00a0I\u00a0don\u2019t\u00a0have\u00a0a\u00a0standard\u00a0for\u00a0these\u00a0temporary\u00a0names.) I\u00a0apply\u00a0Inline\u00a0Variable\u00a0(123)\u00a0on\u00a0the\u00a0input\u00a0parameter\u00a0in\u00a0the\u00a0original\u00a0function. Click\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0inNewEngland(aCustomer)\u00a0{\n\u00a0\u00a0return\u00a0xxNEWinNewEngland(aCustomer.address.state)\u037e\n}\nI\u00a0use\u00a0Inline\u00a0Function\u00a0(115)\u00a0to\u00a0fold\u00a0the\u00a0old\u00a0function\u00a0into\u00a0its\u00a0callers,\u00a0effectively\u00a0replacing\nthe\u00a0call\u00a0to\u00a0the\u00a0old\u00a0function\u00a0with\u00a0a\u00a0call\u00a0to\u00a0the\u00a0new\u00a0one.\u00a0I\u00a0can\u00a0do\u00a0these\u00a0one\u00a0at\u00a0a\u00a0time. caller\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nconst\u00a0newEnglanders\u00a0=\u00a0someCustomers.filter(c\u00a0=>\u00a0xxNEWinNewEngland(c.address.stat\nOnce\u00a0I\u2019ve\u00a0inlined\u00a0the\u00a0old\u00a0function\u00a0into\u00a0every\u00a0caller,\u00a0I\u00a0use\u00a0Change\u00a0Function\u00a0Declaration\nagain\u00a0to\u00a0change\u00a0the\u00a0name\u00a0of\u00a0the\u00a0new\u00a0function\u00a0to\u00a0that\u00a0of\u00a0the\u00a0original. caller\u2026\nwww.EBooksWorld.ir", "domains": ["Design Patterns"], "source": "Refactoring.Improving.the.Design.of.Existing.Code.pdf", "section": "Page 149", "position": 149, "chunk_type": "semantic", "token_estimate": 187}
{"text": "Click\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image: const\u00a0newEnglanders\u00a0=\u00a0someCustomers.filter(c\u00a0=>\u00a0inNewEngland(c.address.state))\u037e\ntop\u00a0level\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0inNewEngland(stateCode)\u00a0{\n\u00a0\u00a0return\u00a0[\"MA\",\u00a0\"CT\",\u00a0\"ME\",\u00a0\"VT\",\u00a0\"NH\",\u00a0\"RI\"].includes(stateCode)\u037e\n}\nAutomated\u00a0refactoring\u00a0tools\u00a0make\u00a0the\u00a0migration\u00a0mechanics\u00a0both\u00a0less\u00a0useful\u00a0and\u00a0more\neffective. They\u00a0make\u00a0it\u00a0less\u00a0useful\u00a0because\u00a0they\u00a0handle\u00a0even\u00a0complicated\u00a0renames\u00a0and\nparameter\u00a0changes\u00a0safer,\u00a0so\u00a0I\u00a0don\u2019t\u00a0have\u00a0to\u00a0use\u00a0the\u00a0migration\u00a0approach\u00a0as\u00a0often\u00a0as\u00a0I\u00a0do\nwithout\u00a0that\u00a0support. However,\u00a0in\u00a0cases\u00a0like\u00a0this\u00a0example,\u00a0where\u00a0the\u00a0tools\u00a0can\u2019t\u00a0do\u00a0the\nwhole\u00a0refactoring,\u00a0they\u00a0still\u00a0make\u00a0it\u00a0much\u00a0easier\u00a0as\u00a0the\u00a0key\u00a0moves\u00a0of\u00a0extract\u00a0and\u00a0inline\ncan\u00a0be\u00a0done\u00a0more\u00a0quickly\u00a0and\u00a0safely\u00a0with\u00a0the\u00a0tool.", "domains": ["Design Patterns"], "source": "Refactoring.Improving.the.Design.of.Existing.Code.pdf", "section": "Page 150", "position": 150, "chunk_type": "semantic", "token_estimate": 114}
{"text": "Refactoring\u00a0is\u00a0all\u00a0about\u00a0manipulating\u00a0the\u00a0elements\u00a0of\u00a0our\u00a0programs.\u00a0Data\u00a0is\u00a0more: awkward\u00a0to\u00a0manipulate\u00a0than\u00a0functions. Since\u00a0using\u00a0a\u00a0function\u00a0usually\u00a0means\u00a0calling\u00a0it,\nI\u00a0can\u00a0easily\u00a0rename\u00a0or\u00a0move\u00a0a\u00a0function\u00a0while\u00a0keeping\u00a0the\u00a0old\u00a0function\u00a0intact\u00a0as\u00a0a\nforwarding\u00a0function\u00a0(so\u00a0my\u00a0old\u00a0code\u00a0calls\u00a0the\u00a0old\u00a0function,\u00a0which\u00a0calls\u00a0the\u00a0new\nfunction). I\u2019ll\u00a0usually\u00a0not\u00a0keep\u00a0this\u00a0forwarding\u00a0function\u00a0around\u00a0for\u00a0long,\u00a0but\u00a0it\u00a0does\nsimplify\u00a0the\u00a0refactoring. Data\u00a0is\u00a0more\u00a0awkward\u00a0because\u00a0I\u00a0can\u2019t\u00a0do\u00a0that. If\u00a0I\u00a0move\u00a0data\u00a0around,\u00a0I\u00a0have\u00a0to\u00a0change\nall\u00a0the\u00a0references\u00a0to\u00a0the\u00a0data\u00a0in\u00a0a\u00a0single\u00a0cycle\u00a0to\u00a0keep\u00a0the\u00a0code\u00a0working. For\u00a0data\u00a0with\u00a0a\nvery\u00a0small\u00a0scope\u00a0of\u00a0access,\u00a0such\u00a0as\u00a0a\u00a0temporary\u00a0variable\u00a0in\u00a0a\u00a0small\u00a0function,\u00a0this\u00a0isn\u2019t\u00a0a\nproblem. But\u00a0as\u00a0the\u00a0scope\u00a0grows,\u00a0so\u00a0does\u00a0the\u00a0difficulty,\u00a0which\u00a0is\u00a0why\u00a0global\u00a0data\u00a0is\u00a0such\na\u00a0pain. So\u00a0if\u00a0I\u00a0want\u00a0to\u00a0move\u00a0widely\u00a0accessed\u00a0data,\u00a0often\u00a0the\u00a0best\u00a0approach\u00a0is\u00a0to\u00a0first\u00a0encapsulate\nit\u00a0by\u00a0routing\u00a0all\u00a0its\u00a0access\u00a0through\u00a0functions. That\u00a0way,\u00a0I\u00a0turn\u00a0the\u00a0difficult\u00a0task\u00a0of\nreorganizing\u00a0data\u00a0into\u00a0the\u00a0simpler\u00a0task\u00a0of\u00a0reorganizing\u00a0functions. Encapsulating\u00a0data\u00a0is\u00a0valuable\u00a0for\u00a0other\u00a0things\u00a0too. It\u00a0provides\u00a0a\u00a0clear\u00a0point\u00a0to\u00a0monitor\nchanges\u00a0and\u00a0use\u00a0of\u00a0the\u00a0data\u037e\u00a0I\u00a0can\u00a0easily\u00a0add\u00a0validation\u00a0or\u00a0consequential\u00a0logic\u00a0on\u00a0the\nupdates. It\u00a0is\u00a0my\u00a0habit\u00a0to\u00a0make\u00a0all\u00a0mutable\u00a0data\u00a0encapsulated\u00a0like\u00a0this\u00a0and\u00a0only\naccessed\u00a0through\u00a0functions\u00a0if\u00a0its\u00a0scope\u00a0is\u00a0greater\u00a0than\u00a0a\u00a0single\u00a0function. The\u00a0greater\u00a0the\nscope\u00a0of\u00a0the\u00a0data,\u00a0the\u00a0more\u00a0important\u00a0it\u00a0is\u00a0to\u00a0encapsulate. My\u00a0approach\u00a0with\u00a0legacy\ncode\u00a0is\u00a0that\u00a0whenever\u00a0I\u00a0need\u00a0to\u00a0change\u00a0or\u00a0add\u00a0a\u00a0new\u00a0reference\u00a0to\u00a0such\u00a0a\u00a0variable,\u00a0I\nshould\u00a0take\u00a0the\u00a0opportunity\u00a0to\u00a0encapsulate\u00a0it. That\u00a0way\u00a0I\u00a0prevent\u00a0the\u00a0increase\u00a0of\ncoupling\u00a0to\u00a0commonly\u00a0used\u00a0data. This\u00a0principle\u00a0is\u00a0why\u00a0the\u00a0object\u00adoriented\u00a0approach\u00a0puts\u00a0so\u00a0much\u00a0emphasis\u00a0on\u00a0keeping\nan\u00a0object\u2019s\u00a0data\u00a0private. Whenever\u00a0I\u00a0see\u00a0a\u00a0public\u00a0field,\u00a0I\u00a0consider\u00a0using\u00a0Encapsulate\nVariable\u00a0(in\u00a0that\u00a0case\u00a0often\u00a0called\u00a0Encapsulate\u00a0Field)\u00a0to\u00a0reduce\u00a0its\u00a0visibility. Some\u00a0go\nfurther\u00a0and\u00a0argue\u00a0that\u00a0even\u00a0internal\u00a0references\u00a0to\u00a0fields\u00a0within\u00a0a\u00a0class\u00a0should\u00a0go\nthrough\u00a0accessor\u00a0functions\u2014an\u00a0approach\u00a0known\u00a0as\u00a0self\u00adencapsulation. On\u00a0the\u00a0whole,\u00a0I\nfind\u00a0self\u00adencapsulation\u00a0excessive\u2014if\u00a0a\u00a0class\u00a0is\u00a0so\u00a0big\u00a0that\u00a0I\u00a0need\u00a0to\u00a0self\u00adencapsulate\u00a0its\nfields,\u00a0it\u00a0needs\u00a0to\u00a0be\u00a0broken\u00a0up\u00a0anyway. But\u00a0self\u00adencapsulating\u00a0a\u00a0field\u00a0is\u00a0a\u00a0useful\u00a0step\nbefore\u00a0splitting\u00a0a\u00a0class. Keeping\u00a0data\u00a0encapsulated\u00a0is\u00a0much\u00a0less\u00a0important\u00a0for\u00a0immutable\u00a0data.", "domains": ["Code Organization"], "source": "Refactoring.Improving.the.Design.of.Existing.Code.pdf", "section": "Page 151", "position": 151, "chunk_type": "semantic", "token_estimate": 411}
{"text": "Mechanics: Create\u00a0encapsulating\u00a0functions\u00a0to\u00a0access\u00a0and\u00a0update\u00a0the\u00a0variable. Run\u00a0static\u00a0checks. For\u00a0each\u00a0reference\u00a0to\u00a0the\u00a0variable,\u00a0replace\u00a0with\u00a0a\u00a0call\u00a0to\u00a0the\u00a0appropriate\nencapsulating\u00a0function.\u00a0Test\u00a0after\u00a0each\u00a0replacement. Restrict\u00a0the\u00a0visibility\u00a0of\u00a0the\u00a0variable. Sometimes\u00a0it\u2019s\u00a0not\u00a0possible\u00a0to\u00a0prevent\u00a0access\u00a0to\u00a0the\u00a0variable. If\u00a0so,\u00a0it\u00a0may\u00a0be\u00a0useful\nto\u00a0detect\u00a0any\u00a0remaining\u00a0references\u00a0by\u00a0renaming\u00a0the\u00a0variable\u00a0and\u00a0testing. Test. If\u00a0the\u00a0value\u00a0of\u00a0the\u00a0variable\u00a0is\u00a0a\u00a0record,\u00a0consider\u00a0Encapsulate\u00a0Record\u00a0(162). Example\nConsider\u00a0some\u00a0useful\u00a0data\u00a0held\u00a0in\u00a0a\u00a0global\u00a0variable. Click\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nlet\u00a0defaultOwner\u00a0=\u00a0{firstName:\u00a0\"Martin\",\u00a0lastName:\u00a0\"Fowler\"}\u037e\nLike\u00a0any\u00a0data,\u00a0it\u2019s\u00a0referenced\u00a0with\u00a0code\u00a0like\u00a0this:\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nspaceship.owner\u00a0=\u00a0defaultOwner\u037e\nand\u00a0updated\u00a0like\u00a0this:\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\ndefaultOwner\u00a0=\u00a0{firstName:\u00a0\"Rebecca\",\u00a0lastName:\u00a0\"Parsons\"}\u037e\nTo\u00a0do\u00a0a\u00a0basic\u00a0encapsulation\u00a0on\u00a0this,\u00a0I\u00a0start\u00a0by\u00a0defining\u00a0functions\u00a0to\u00a0read\u00a0and\u00a0write\u00a0the\ndata. Click\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nwww.EBooksWorld.ir", "domains": ["Code Organization"], "source": "Refactoring.Improving.the.Design.of.Existing.Code.pdf", "section": "Page 152", "position": 152, "chunk_type": "semantic", "token_estimate": 161}
{"text": "Click\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image: let\u00a0defaultOwnerData\u00a0=\u00a0{firstName:\u00a0\"Martin\",\u00a0lastName:\u00a0\"Fowler\"}\u037e\nexport\u00a0function\u00a0getdefaultOwner()\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0{return\u00a0defaultOwnerData\u037e}\nexport\u00a0function\u00a0setDefaultOwner(arg)\u00a0{defaultOwnerData\u00a0=\u00a0arg\u037e}\nA\u00a0common\u00a0convention\u00a0in\u00a0JavaScript\u00a0is\u00a0to\u00a0name\u00a0a\u00a0getting\u00a0function\u00a0and\u00a0setting\u00a0function\nthe\u00a0same\u00a0and\u00a0differentiate\u00a0them\u00a0due\u00a0the\u00a0presence\u00a0of\u00a0an\u00a0argument. I\u00a0call\u00a0this\u00a0practice\nOverloaded\u00a0Getter\u00a0Setter\u00a0[mf\u00adogs]\u00a0and\u00a0strongly\u00a0dislike\u00a0it. So,\u00a0even\u00a0though\u00a0I\u00a0don\u2019t\u00a0like\nthe\u00a0get\u00a0prefix,\u00a0I\u00a0will\u00a0keep\u00a0the\u00a0set\u00a0prefix. Encapsulating the Value\nThe\u00a0basic\u00a0refactoring\u00a0I\u2019ve\u00a0outlined\u00a0here\u00a0encapsulates\u00a0a\u00a0reference\u00a0to\u00a0some\u00a0data\u00a0structure,\nallowing\u00a0me\u00a0to\u00a0control\u00a0its\u00a0access\u00a0and\u00a0reassignment. But\u00a0it\u00a0doesn\u2019t\u00a0control\u00a0changes\u00a0to\nthat\u00a0structure. Click\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nconst\u00a0owner1\u00a0=\u00a0defaultOwner()\u037e\nassert.equal(\"Fowler\",\u00a0owner1.lastName,\u00a0\"when\u00a0set\")\u037e\nconst\u00a0owner2\u00a0=\u00a0defaultOwner()\u037e\nowner2.lastName\u00a0=\u00a0\"Parsons\"\u037e\nassert.equal(\"Parsons\",\u00a0owner1.lastName,\u00a0\"after\u00a0change\u00a0owner2\")\u037e\u00a0//\u00a0is\u00a0this\u00a0ok? The\u00a0basic\u00a0refactoring\u00a0encapsulates\u00a0the\u00a0reference\u00a0to\u00a0the\u00a0data\u00a0item. In\u00a0many\u00a0cases,\u00a0this\u00a0is\nall\u00a0I\u00a0want\u00a0to\u00a0do\u00a0for\u00a0the\u00a0moment. But\u00a0I\u00a0often\u00a0want\u00a0to\u00a0take\u00a0the\u00a0encapsulation\u00a0deeper\u00a0to\ncontrol\u00a0not\u00a0just\u00a0changes\u00a0to\u00a0the\u00a0variable\u00a0but\u00a0also\u00a0to\u00a0its\u00a0contents. For\u00a0this,\u00a0I\u00a0have\u00a0a\u00a0couple\u00a0of\u00a0options. The\u00a0simplest\u00a0one\u00a0is\u00a0to\u00a0prevent\u00a0any\u00a0changes\u00a0to\u00a0the\nvalue. My\u00a0favorite\u00a0way\u00a0to\u00a0handle\u00a0this\u00a0is\u00a0by\u00a0modifying\u00a0the\u00a0getting\u00a0function\u00a0to\u00a0return\u00a0a\ncopy\u00a0of\u00a0the\u00a0data. defaultOwner.js\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nlet\u00a0defaultOwnerData\u00a0=\u00a0{firstName:\u00a0\"Martin\",\u00a0lastName:\u00a0\"Fowler\"}\u037e\nexport\u00a0function\u00a0defaultOwner()\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0{return\u00a0Object.assign({},\u00a0defaultOwnerData)\nexport\u00a0function\u00a0setDefaultOwner(arg)\u00a0{defaultOwnerData\u00a0=\u00a0arg\u037e}\nwww.EBooksWorld.ir", "domains": ["Code Organization"], "source": "Refactoring.Improving.the.Design.of.Existing.Code.pdf", "section": "Page 154", "position": 154, "chunk_type": "semantic", "token_estimate": 248}
{"text": "I\u00a0use\u00a0this\u00a0approach\u00a0particularly\u00a0often\u00a0with\u00a0lists.\u00a0If\u00a0I\u00a0return\u00a0a\u00a0copy\u00a0of\u00a0the\u00a0data,\u00a0any\u00a0clients: using\u00a0it\u00a0can\u00a0change\u00a0it,\u00a0but\u00a0that\u00a0change\u00a0isn\u2019t\u00a0reflected\u00a0in\u00a0the\u00a0shared\u00a0data. I\u00a0have\u00a0to\u00a0be\ncareful\u00a0with\u00a0using\u00a0copies,\u00a0however:\u00a0Some\u00a0code\u00a0may\u00a0expect\u00a0to\u00a0change\u00a0shared\u00a0data. If\nthat\u2019s\u00a0the\u00a0case,\u00a0I\u2019m\u00a0relying\u00a0on\u00a0my\u00a0tests\u00a0to\u00a0detect\u00a0a\u00a0problem. An\u00a0alternative\u00a0is\u00a0to\u00a0prevent\nchanges\u2014and\u00a0a\u00a0good\u00a0way\u00a0of\u00a0doing\u00a0that\u00a0is\u00a0Encapsulate\u00a0Record\u00a0(162). Click\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nlet\u00a0defaultOwnerData\u00a0=\u00a0{firstName:\u00a0\"Martin\",\u00a0lastName:\u00a0\"Fowler\"}\u037e\nexport\u00a0function\u00a0defaultOwner()\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0{return\u00a0new\u00a0Person(defaultOwnerData)\u037e}\nexport\u00a0function\u00a0setDefaultOwner(arg)\u00a0{defaultOwnerData\u00a0=\u00a0arg\u037e}\n\u00a0\u00a0class\u00a0Person\u00a0{\n\u00a0\u00a0\u00a0\u00a0constructor(data)\u00a0{\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0this._lastName\u00a0=\u00a0data.lastName\u037e\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0this._firstName\u00a0=\u00a0data.firstName\n\u00a0\u00a0\u00a0\u00a0}\n\u00a0\u00a0\u00a0\u00a0get\u00a0lastName()\u00a0{return\u00a0this._lastName\u037e}\n\u00a0\u00a0\u00a0\u00a0get\u00a0firstName()\u00a0{return\u00a0this._firstName\u037e}\n\u00a0\u00a0\u00a0\u00a0//\u00a0and\u00a0so\u00a0on\u00a0for\u00a0other\u00a0properties\nNow,\u00a0any\u00a0attempt\u00a0to\u00a0reassign\u00a0the\u00a0properties\u00a0of\u00a0the\u00a0default\u00a0owner\u00a0will\u00a0cause\u00a0an\u00a0error. Different\u00a0languages\u00a0have\u00a0different\u00a0techniques\u00a0to\u00a0detect\u00a0or\u00a0prevent\u00a0changes\u00a0like\u00a0this,\u00a0so\ndepending\u00a0on\u00a0the\u00a0language\u00a0I\u2019d\u00a0consider\u00a0other\u00a0options. Detecting\u00a0and\u00a0preventing\u00a0changes\u00a0like\u00a0this\u00a0is\u00a0often\u00a0worthwhile\u00a0as\u00a0a\u00a0temporary\u00a0measure. I\u00a0can\u00a0either\u00a0remove\u00a0the\u00a0changes,\u00a0or\u00a0provide\u00a0suitable\u00a0mutating\u00a0functions. Then,\u00a0once\nthey\u00a0are\u00a0all\u00a0dealt\u00a0with,\u00a0I\u00a0can\u00a0modify\u00a0the\u00a0getting\u00a0method\u00a0to\u00a0return\u00a0a\u00a0copy. So\u00a0far\u00a0I\u2019ve\u00a0talked\u00a0about\u00a0copying\u00a0on\u00a0getting\u00a0data,\u00a0but\u00a0it\u00a0may\u00a0be\u00a0worthwhile\u00a0to\u00a0make\u00a0a\ncopy\u00a0in\u00a0the\u00a0setter\u00a0too. That\u00a0will\u00a0depend\u00a0on\u00a0where\u00a0the\u00a0data\u00a0comes\u00a0from\u00a0and\u00a0whether\u00a0I\nneed\u00a0to\u00a0maintain\u00a0a\u00a0link\u00a0to\u00a0reflect\u00a0any\u00a0changes\u00a0in\u00a0that\u00a0original\u00a0data. If\u00a0I\u00a0don\u2019t\u00a0need\u00a0such\na\u00a0link,\u00a0a\u00a0copy\u00a0prevents\u00a0accidents\u00a0due\u00a0to\u00a0changes\u00a0on\u00a0that\u00a0source\u00a0data. Taking\u00a0a\u00a0copy\u00a0may\nbe\u00a0superfluous\u00a0most\u00a0of\u00a0the\u00a0time,\u00a0but\u00a0copies\u00a0in\u00a0these\u00a0cases\u00a0usually\u00a0have\u00a0a\u00a0negligible\neffect\u00a0on\u00a0performance\u037e\u00a0on\u00a0the\u00a0other\u00a0hand,\u00a0if\u00a0I\u00a0don\u2019t\u00a0do\u00a0them,\u00a0there\u00a0is\u00a0a\u00a0risk\u00a0of\u00a0a\u00a0long\u00a0and\ndifficult\u00a0bout\u00a0of\u00a0debugging\u00a0in\u00a0the\u00a0future. Remember\u00a0that\u00a0the\u00a0copying\u00a0above,\u00a0and\u00a0the\u00a0class\u00a0wrapper,\u00a0both\u00a0only\u00a0work\u00a0one\u00a0level\ndeep\u00a0in\u00a0the\u00a0record\u00a0structure. Going\u00a0deeper\u00a0requires\u00a0more\u00a0levels\u00a0of\u00a0copies\u00a0or\u00a0object\nwrapping. As\u00a0you\u00a0can\u00a0see,\u00a0encapsulating\u00a0data\u00a0is\u00a0valuable,\u00a0but\u00a0often\u00a0not\u00a0straightforward. Exactly\nwww.EBooksWorld.ir", "domains": ["Software Quality Attributes"], "source": "Refactoring.Improving.the.Design.of.Existing.Code.pdf", "section": "Page 155", "position": 155, "chunk_type": "semantic", "token_estimate": 361}
{"text": "let\u00a0_title\u00a0=\u00a0\"untitled\"\u037e: function\u00a0title()\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0{return\u00a0_title\u037e}\nfunction\u00a0setTitle(arg)\u00a0{_title\u00a0=\u00a0arg\u037e}\nI\u00a0could\u00a0continue\u00a0by\u00a0inlining\u00a0the\u00a0wrapping\u00a0functions\u00a0so\u00a0all\u00a0callers\u00a0are\u00a0using\u00a0the\u00a0variable\ndirectly.\u00a0But\u00a0I\u2019d\u00a0rarely\u00a0want\u00a0to\u00a0do\u00a0this. If\u00a0the\u00a0variable\u00a0is\u00a0used\u00a0widely\u00a0enough\u00a0that\u00a0I\u00a0feel\nthe\u00a0need\u00a0to\u00a0encapsulate\u00a0it\u00a0in\u00a0order\u00a0to\u00a0change\u00a0its\u00a0name,\u00a0it\u2019s\u00a0worth\u00a0keeping\u00a0it\nencapsulated\u00a0behind\u00a0functions\u00a0for\u00a0the\u00a0future. In\u00a0cases\u00a0where\u00a0I\u00a0was\u00a0going\u00a0to\u00a0inline,\u00a0I\u2019d\u00a0call\u00a0the\u00a0getting\u00a0function\u00a0getTitle\u00a0and\u00a0not\u00a0use\nan\u00a0underscore\u00a0for\u00a0the\u00a0variable\u00a0name\u00a0when\u00a0I\u00a0rename\u00a0it. Renaming a Constant\nIf\u00a0I\u2019m\u00a0renaming\u00a0a\u00a0constant\u00a0(or\u00a0something\u00a0that\u00a0acts\u00a0like\u00a0a\u00a0constant\u00a0to\u00a0clients)\u00a0I\u00a0can\u00a0avoid\nencapsulation,\u00a0and\u00a0still\u00a0do\u00a0the\u00a0rename\u00a0gradually,\u00a0by\u00a0copying. If\u00a0the\u00a0original\u00a0declaration\nlooks\u00a0like\u00a0this:\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nconst\u00a0cpyNm\u00a0=\u00a0\"Acme\u00a0Gooseberries\"\u037e\nI\u00a0can\u00a0begin\u00a0the\u00a0renaming\u00a0by\u00a0making\u00a0a\u00a0copy:\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nconst\u00a0companyName\u00a0=\u00a0\"Acme\u00a0Gooseberries\"\u037e\nconst\u00a0cpyNm\u00a0=\u00a0companyName\u037e\nWith\u00a0the\u00a0copy,\u00a0I\u00a0can\u00a0gradually\u00a0change\u00a0references\u00a0from\u00a0the\u00a0old\u00a0name\u00a0to\u00a0the\u00a0new\u00a0name. When\u00a0I\u2019m\u00a0done,\u00a0I\u00a0remove\u00a0the\u00a0copy. I\u00a0prefer\u00a0to\u00a0declare\u00a0the\u00a0new\u00a0name\u00a0and\u00a0copy\u00a0to\u00a0the\u00a0old\nname\u00a0if\u00a0it\u00a0makes\u00a0it\u00a0a\u00a0tad\u00a0easier\u00a0to\u00a0remove\u00a0the\u00a0old\u00a0name\u00a0and\u00a0put\u00a0it\u00a0back\u00a0again\u00a0should\u00a0a\ntest\u00a0fail. This\u00a0works\u00a0for\u00a0constants\u00a0as\u00a0well\u00a0as\u00a0for\u00a0variables\u00a0that\u00a0are\u00a0read\u00adonly\u00a0to\u00a0clients\u00a0(such\u00a0as\u00a0an\nexported\u00a0variable\u00a0in\u00a0JavaScript).", "domains": ["Code Organization"], "source": "Refactoring.Improving.the.Design.of.Existing.Code.pdf", "section": "Page 158", "position": 158, "chunk_type": "semantic", "token_estimate": 243}
{"text": "the\u00a0object,\u00a0and\u00a0the\u00a0derivations\u00a0remain\u00a0consistent.: As\u00a0well\u00a0as\u00a0a\u00a0class,\u00a0functions\u00a0like\u00a0this\u00a0can\u00a0also\u00a0be\u00a0combined\u00a0into\u00a0a\u00a0nested\u00a0function. Usually\u00a0I\u00a0prefer\u00a0a\u00a0class\u00a0to\u00a0a\u00a0nested\u00a0function,\u00a0as\u00a0it\u00a0can\u00a0be\u00a0difficult\u00a0to\u00a0test\u00a0functions\u00a0nested\nwithin\u00a0another. Classes\u00a0are\u00a0also\u00a0necessary\u00a0when\u00a0there\u00a0is\u00a0more\u00a0than\u00a0one\u00a0function\u00a0in\u00a0the\ngroup\u00a0that\u00a0I\u00a0want\u00a0to\u00a0expose\u00a0to\u00a0collaborators. Languages\u00a0that\u00a0don\u2019t\u00a0have\u00a0classes\u00a0as\u00a0a\u00a0first\u00adclass\u00a0element,\u00a0but\u00a0do\u00a0have\u00a0first\u00adclass\nfunctions,\u00a0often\u00a0use\u00a0the\u00a0Function\u00a0As\u00a0Object\u00a0[mf\u00adfao]\u00a0to\u00a0provide\u00a0this\u00a0capability. Mechanics\nApply\u00a0Encapsulate\u00a0Record\u00a0(162)\u00a0to\u00a0the\u00a0common\u00a0data\u00a0record\u00a0that\u00a0the\u00a0functions\nshare. If\u00a0the\u00a0data\u00a0that\u00a0is\u00a0common\u00a0between\u00a0the\u00a0functions\u00a0isn\u2019t\u00a0already\u00a0grouped\u00a0into\u00a0a\u00a0record\nstructure,\u00a0use\u00a0Introduce\u00a0Parameter\u00a0Object\u00a0(140)\u00a0to\u00a0create\u00a0a\u00a0record\u00a0to\u00a0group\u00a0it\ntogether. Take\u00a0each\u00a0function\u00a0that\u00a0uses\u00a0the\u00a0common\u00a0record\u00a0and\u00a0use\u00a0Move\u00a0Function\u00a0(198)\u00a0to\nmove\u00a0it\u00a0into\u00a0the\u00a0new\u00a0class. Any\u00a0arguments\u00a0to\u00a0the\u00a0function\u00a0call\u00a0that\u00a0are\u00a0members\u00a0can\u00a0be\u00a0removed\u00a0from\u00a0the\nargument\u00a0list. Each\u00a0bit\u00a0of\u00a0logic\u00a0that\u00a0manipulates\u00a0the\u00a0data\u00a0can\u00a0be\u00a0extracted\u00a0with\u00a0Extract\u00a0Function\n(106)\u00a0and\u00a0then\u00a0moved\u00a0into\u00a0the\u00a0new\u00a0class. Example\nI\u00a0grew\u00a0up\u00a0in\u00a0England,\u00a0a\u00a0country\u00a0renowned\u00a0for\u00a0its\u00a0love\u00a0of\u00a0Tea. (Personally,\u00a0I\u00a0don\u2019t\u00a0like\nmost\u00a0tea\u00a0they\u00a0serve\u00a0in\u00a0England,\u00a0but\u00a0have\u00a0since\u00a0acquired\u00a0a\u00a0taste\u00a0for\u00a0Chinese\u00a0and\nJapanese\u00a0teas.) So\u00a0my\u00a0author\u2019s\u00a0fantasy\u00a0conjures\u00a0up\u00a0a\u00a0state\u00a0utility\u00a0for\u00a0providing\u00a0tea\u00a0to\nthe\u00a0population. Every\u00a0month\u00a0they\u00a0read\u00a0the\u00a0tea\u00a0meters,\u00a0to\u00a0get\u00a0a\u00a0record\u00a0like\u00a0this:\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nreading\u00a0=\u00a0{customer:\u00a0\"ivan\",\u00a0quantity:\u00a010,\u00a0month:\u00a05,\u00a0year:\u00a02017}\u037e\nI\u00a0look\u00a0through\u00a0the\u00a0code\u00a0that\u00a0processes\u00a0these\u00a0records,\u00a0and\u00a0I\u00a0see\u00a0lots\u00a0of\u00a0places\u00a0where\nsimilar\u00a0calculations\u00a0are\u00a0done\u00a0on\u00a0the\u00a0data. So\u00a0I\u00a0find\u00a0a\u00a0spot\u00a0that\u00a0calculates\u00a0the\u00a0base\nwww.EBooksWorld.ir", "domains": ["Design Patterns"], "source": "Refactoring.Improving.the.Design.of.Existing.Code.pdf", "section": "Page 165", "position": 165, "chunk_type": "semantic", "token_estimate": 302}
{"text": "Motivation: When\u00a0I\u00a0run\u00a0into\u00a0code\u00a0that\u2019s\u00a0dealing\u00a0with\u00a0two\u00a0different\u00a0things,\u00a0I\u00a0look\u00a0for\u00a0a\u00a0way\u00a0to\u00a0split\u00a0it\ninto\u00a0separate\u00a0modules. I\u00a0endeavor\u00a0to\u00a0make\u00a0this\u00a0split\u00a0because,\u00a0if\u00a0I\u00a0need\u00a0to\u00a0make\u00a0a\nchange,\u00a0I\u00a0can\u00a0deal\u00a0with\u00a0each\u00a0topic\u00a0separately\u00a0and\u00a0not\u00a0have\u00a0to\u00a0hold\u00a0both\u00a0in\u00a0my\u00a0head\ntogether. If\u00a0I\u2019m\u00a0lucky,\u00a0I\u00a0may\u00a0only\u00a0have\u00a0to\u00a0change\u00a0one\u00a0module\u00a0without\u00a0having\u00a0to\nremember\u00a0the\u00a0details\u00a0of\u00a0the\u00a0other\u00a0one\u00a0at\u00a0all. www.EBooksWorld.ir", "domains": ["Code Organization"], "source": "Refactoring.Improving.the.Design.of.Existing.Code.pdf", "section": "Page 176", "position": 176, "chunk_type": "semantic", "token_estimate": 78}
{"text": "Chapter 7: Encapsulation\nPerhaps\u00a0the\u00a0most\u00a0important\u00a0criteria\u00a0to\u00a0be\u00a0used\u00a0in\u00a0decomposing\u00a0modules\u00a0is\u00a0to\u00a0identify\nsecrets\u00a0that\u00a0modules\u00a0should\u00a0hide\u00a0from\u00a0the\u00a0rest\u00a0of\u00a0the\u00a0system\u00a0[Parnas]. Data\u00a0structures\nare\u00a0the\u00a0most\u00a0common\u00a0secrets,\u00a0and\u00a0I\u00a0can\u00a0hide\u00a0data\u00a0structures\u00a0by\u00a0encapsulating\u00a0them\nwith\u00a0Encapsulate\u00a0Record\u00a0(162)\u00a0and\u00a0Encapsulate\u00a0Collection\u00a0(170). Even\u00a0primitive\u00a0data\nvalues\u00a0can\u00a0be\u00a0encapsulated\u00a0with\u00a0Replace\u00a0Primitive\u00a0with\u00a0Object\u00a0(174)\u2014the\u00a0magnitude\u00a0of\nsecond\u00adorder\u00a0benefits\u00a0from\u00a0doing\u00a0this\u00a0often\u00a0surprises\u00a0people. Temporary\u00a0variables\noften\u00a0get\u00a0in\u00a0the\u00a0way\u00a0of\u00a0refactoring\u2014I\u00a0have\u00a0to\u00a0ensure\u00a0they\u00a0are\u00a0calculated\u00a0in\u00a0the\u00a0right\norder\u00a0and\u00a0their\u00a0values\u00a0are\u00a0available\u00a0to\u00a0other\u00a0parts\u00a0of\u00a0the\u00a0code\u00a0that\u00a0need\u00a0them. Using\nReplace\u00a0Temp\u00a0with\u00a0Query\u00a0(178)\u00a0is\u00a0a\u00a0great\u00a0help\u00a0here,\u00a0particularly\u00a0when\u00a0splitting\u00a0up\u00a0an\noverly\u00a0long\u00a0function. Classes\u00a0were\u00a0designed\u00a0for\u00a0information\u00a0hiding. In\u00a0the\u00a0previous\u00a0chapter,\u00a0I\u00a0described\u00a0a\nway\u00a0to\u00a0form\u00a0them\u00a0with\u00a0Combine\u00a0Functions\u00a0into\u00a0Class\u00a0(144). The\u00a0common\u00a0extract/inline\noperations\u00a0also\u00a0apply\u00a0to\u00a0classes\u00a0with\u00a0Extract\u00a0Class\u00a0(182)\u00a0and\u00a0Inline\u00a0Class\u00a0(186). As\u00a0well\u00a0as\u00a0hiding\u00a0the\u00a0internals\u00a0of\u00a0classes,\u00a0it\u2019s\u00a0often\u00a0useful\u00a0to\u00a0hide\u00a0connections\u00a0between\nclasses,\u00a0which\u00a0I\u00a0can\u00a0do\u00a0with\u00a0Hide\u00a0Delegate\u00a0(189). But\u00a0too\u00a0much\u00a0hiding\u00a0leads\u00a0to\u00a0bloated\ninterfaces,\u00a0so\u00a0I\u00a0also\u00a0need\u00a0its\u00a0reverse:\u00a0Remove\u00a0Middle\u00a0Man\u00a0(192). Classes\u00a0and\u00a0modules\u00a0are\u00a0the\u00a0largest\u00a0forms\u00a0of\u00a0encapsulation,\u00a0but\u00a0functions\u00a0also\nencapsulate\u00a0their\u00a0implementation. Sometimes,\u00a0I\u00a0may\u00a0need\u00a0to\u00a0make\u00a0a\u00a0wholesale\u00a0change\nto\u00a0an\u00a0algorithm,\u00a0which\u00a0I\u00a0can\u00a0do\u00a0by\u00a0wrapping\u00a0it\u00a0in\u00a0a\u00a0function\u00a0with\u00a0Extract\u00a0Function\n(106)\u00a0and\u00a0applying\u00a0Substitute\u00a0Algorithm\u00a0(195).", "domains": ["Code Organization"], "source": "Refactoring.Improving.the.Design.of.Existing.Code.pdf", "section": "Page 183", "position": 183, "chunk_type": "semantic", "token_estimate": 255}
{"text": "Motivation: This\u00a0is\u00a0why\u00a0I\u00a0often\u00a0favor\u00a0objects\u00a0over\u00a0records\u00a0for\u00a0mutable\u00a0data. With\u00a0objects,\u00a0I\u00a0can\u00a0hide\nwhat\u00a0is\u00a0stored\u00a0and\u00a0provide\u00a0methods\u00a0for\u00a0all\u00a0three\u00a0values. The\u00a0user\u00a0of\u00a0the\u00a0object\u00a0doesn\u2019t\nneed\u00a0to\u00a0know\u00a0or\u00a0care\u00a0which\u00a0is\u00a0stored\u00a0and\u00a0which\u00a0is\u00a0calculated. This\u00a0encapsulation\u00a0also\nhelps\u00a0with\u00a0renaming:\u00a0I\u00a0can\u00a0rename\u00a0the\u00a0field\u00a0while\u00a0providing\u00a0methods\u00a0for\u00a0both\u00a0the\u00a0new\nand\u00a0the\u00a0old\u00a0names,\u00a0gradually\u00a0updating\u00a0callers\u00a0until\u00a0they\u00a0are\u00a0all\u00a0done. I\u00a0just\u00a0said\u00a0I\u00a0favor\u00a0objects\u00a0for\u00a0mutable\u00a0data. If\u00a0I\u00a0have\u00a0an\u00a0immutable\u00a0value,\u00a0I\u00a0can\u00a0just\u00a0have\nall\u00a0three\u00a0values\u00a0in\u00a0my\u00a0record,\u00a0using\u00a0an\u00a0enrichment\u00a0step\u00a0if\u00a0necessary. Similarly,\u00a0it\u2019s\u00a0easy\nto\u00a0copy\u00a0the\u00a0field\u00a0when\u00a0renaming. I\u00a0can\u00a0have\u00a0two\u00a0kinds\u00a0of\u00a0record\u00a0structures:\u00a0those\u00a0where\u00a0I\u00a0declare\u00a0the\u00a0legal\u00a0field\u00a0names\nand\u00a0those\u00a0that\u00a0allow\u00a0me\u00a0to\u00a0use\u00a0whatever\u00a0I\u00a0like. The\u00a0latter\u00a0are\u00a0often\u00a0implemented\nthrough\u00a0a\u00a0library\u00a0class\u00a0called\u00a0something\u00a0like\u00a0hash,\u00a0map,\u00a0hashmap,\u00a0dictionary,\u00a0or\nassociative\u00a0array. Many\u00a0languages\u00a0provide\u00a0convenient\u00a0syntax\u00a0for\u00a0creating\u00a0hashmaps,\nwhich\u00a0makes\u00a0them\u00a0useful\u00a0in\u00a0many\u00a0programming\u00a0situations. The\u00a0downside\u00a0of\u00a0using\nthem\u00a0is\u00a0they\u00a0are\u00a0aren\u2019t\u00a0explicit\u00a0about\u00a0their\u00a0fields. The\u00a0only\u00a0way\u00a0I\u00a0can\u00a0tell\u00a0if\u00a0they\u00a0use\nstart/end\u00a0or\u00a0start/length\u00a0is\u00a0by\u00a0looking\u00a0at\u00a0where\u00a0they\u00a0are\u00a0created\u00a0and\u00a0used. This\u00a0isn\u2019t\u00a0a\nproblem\u00a0if\u00a0they\u00a0are\u00a0only\u00a0used\u00a0in\u00a0a\u00a0small\u00a0section\u00a0of\u00a0a\u00a0program,\u00a0but\u00a0the\u00a0wider\u00a0their\u00a0scope\nof\u00a0usage,\u00a0the\u00a0greater\u00a0problem\u00a0I\u00a0get\u00a0from\u00a0their\u00a0implicit\u00a0structure. I\u00a0could\u00a0refactor\u00a0such\nimplicit\u00a0records\u00a0into\u00a0explicit\u00a0ones\u2014but\u00a0if\u00a0I\u00a0need\u00a0to\u00a0do\u00a0that,\u00a0I\u2019d\u00a0rather\u00a0make\u00a0them\u00a0classes\nwww.EBooksWorld.ir", "domains": ["Code Organization"], "source": "Refactoring.Improving.the.Design.of.Existing.Code.pdf", "section": "Page 184", "position": 184, "chunk_type": "semantic", "token_estimate": 265}
{"text": "instead.: It\u2019s\u00a0common\u00a0to\u00a0pass\u00a0nested\u00a0structures\u00a0of\u00a0lists\u00a0and\u00a0hashmaps\u00a0which\u00a0are\u00a0often\u00a0serialized\ninto\u00a0formats\u00a0like\u00a0JSON\u00a0or\u00a0XML. Such\u00a0structures\u00a0can\u00a0be\u00a0encapsulated\u00a0too,\u00a0which\u00a0helps\u00a0if\ntheir\u00a0formats\u00a0change\u00a0later\u00a0on\u00a0or\u00a0if\u00a0I\u2019m\u00a0concerned\u00a0about\u00a0updates\u00a0to\u00a0the\u00a0data\u00a0that\u00a0are\nhard\u00a0to\u00a0keep\u00a0track\u00a0of. Mechanics\nUse\u00a0Encapsulate\u00a0Variable\u00a0(132)\u00a0on\u00a0the\u00a0variable\u00a0holding\u00a0the\u00a0record. Give\u00a0the\u00a0functions\u00a0that\u00a0encapsulate\u00a0the\u00a0record\u00a0names\u00a0that\u00a0are\u00a0easily\u00a0searchable. Replace\u00a0the\u00a0content\u00a0of\u00a0the\u00a0variable\u00a0with\u00a0a\u00a0simple\u00a0class\u00a0that\u00a0wraps\u00a0the\u00a0record. Define\nan\u00a0accessor\u00a0inside\u00a0this\u00a0class\u00a0that\u00a0returns\u00a0the\u00a0raw\u00a0record. Modify\u00a0the\u00a0functions\u00a0that\nencapsulate\u00a0the\u00a0variable\u00a0to\u00a0use\u00a0this\u00a0accessor. Test. Provide\u00a0new\u00a0functions\u00a0that\u00a0return\u00a0the\u00a0object\u00a0rather\u00a0than\u00a0the\u00a0raw\u00a0record. For\u00a0each\u00a0user\u00a0of\u00a0the\u00a0record,\u00a0replace\u00a0its\u00a0use\u00a0of\u00a0a\u00a0function\u00a0that\u00a0returns\u00a0the\u00a0record\u00a0with\na\u00a0function\u00a0that\u00a0returns\u00a0the\u00a0object. Use\u00a0an\u00a0accessor\u00a0on\u00a0the\u00a0object\u00a0to\u00a0get\u00a0at\u00a0the\u00a0field\ndata,\u00a0creating\u00a0that\u00a0accessor\u00a0if\u00a0needed.\u00a0Test\u00a0after\u00a0each\u00a0change. If\u00a0it\u2019s\u00a0a\u00a0complex\u00a0record,\u00a0such\u00a0as\u00a0one\u00a0with\u00a0a\u00a0nested\u00a0structure,\u00a0focus\u00a0on\u00a0clients\u00a0that\nupdate\u00a0the\u00a0data\u00a0first. Consider\u00a0returning\u00a0a\u00a0copy\u00a0or\u00a0read\u00adonly\u00a0proxy\u00a0of\u00a0the\u00a0data\u00a0for\nclients\u00a0that\u00a0only\u00a0read\u00a0the\u00a0data. Remove\u00a0the\u00a0class\u2019s\u00a0raw\u00a0data\u00a0accessor\u00a0and\u00a0the\u00a0easily\u00a0searchable\u00a0functions\u00a0that\nreturned\u00a0the\u00a0raw\u00a0record. Test. If\u00a0the\u00a0fields\u00a0of\u00a0the\u00a0record\u00a0are\u00a0themselves\u00a0structures,\u00a0consider\u00a0using\u00a0Encapsulate\nRecord\u00a0and\u00a0Encapsulate\u00a0Collection\u00a0(170)\u00a0recursively. Example\nI\u2019ll\u00a0start\u00a0with\u00a0a\u00a0constant\u00a0that\u00a0is\u00a0widely\u00a0used\u00a0across\u00a0a\u00a0program. Click\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nwww.EBooksWorld.ir", "domains": ["Design Patterns"], "source": "Refactoring.Improving.the.Design.of.Existing.Code.pdf", "section": "Page 185", "position": 185, "chunk_type": "semantic", "token_estimate": 259}
{"text": "Click\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image: result\u00a0+=\u00a0`<h1>${getOrganization().name}</h1>`\u037e\nAfter\u00a0I\u2019ve\u00a0done\u00a0that,\u00a0I\u00a0can\u00a0follow\u00a0through\u00a0on\u00a0my\u00a0threat\u00a0to\u00a0give\u00a0the\u00a0ugly\u00a0sounding\nfunction\u00a0a\u00a0short\u00a0life. Click\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0getRawDataOfOrganization()\u00a0{return\u00a0organization._data\u037e}\nfunction\u00a0getOrganization()\u00a0{return\u00a0organization\u037e}\nI\u2019d\u00a0also\u00a0be\u00a0inclined\u00a0to\u00a0fold\u00a0the\u00a0_data\u00a0field\u00a0directly\u00a0into\u00a0the\u00a0object. Click\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nclass\u00a0Organization\u00a0{\n\u00a0\u00a0constructor(data)\u00a0{\n\u00a0\u00a0\u00a0\u00a0this._name\u00a0=\u00a0data.name\u037e\n\u00a0\u00a0\u00a0\u00a0this._country\u00a0=\u00a0data.country\u037e\n\u00a0\u00a0}\n\u00a0\u00a0get\u00a0name()\u00a0\u00a0\u00a0\u00a0{return\u00a0this._name\u037e}\n\u00a0\u00a0set\u00a0name(aString)\u00a0{this._name\u00a0=\u00a0aString\u037e}\n\u00a0\u00a0get\u00a0country()\u00a0\u00a0\u00a0\u00a0{return\u00a0this._country\u037e}\n\u00a0\u00a0set\u00a0country(aCountryCode)\u00a0{this._country\u00a0=\u00a0aCountryCode\u037e}\n}\nThis\u00a0has\u00a0the\u00a0advantage\u00a0of\u00a0breaking\u00a0the\u00a0link\u00a0to\u00a0the\u00a0input\u00a0data\u00a0record. This\u00a0might\u00a0be\nuseful\u00a0if\u00a0a\u00a0reference\u00a0to\u00a0it\u00a0runs\u00a0around,\u00a0which\u00a0would\u00a0break\u00a0encapsulation. Should\u00a0I\u00a0not\nfold\u00a0the\u00a0data\u00a0into\u00a0individual\u00a0fields,\u00a0I\u00a0would\u00a0be\u00a0wise\u00a0to\u00a0copy\u00a0_data\u00a0when\u00a0I\u00a0assign\u00a0it. Example: Encapsulating a Nested Record\nThe\u00a0above\u00a0example\u00a0looks\u00a0at\u00a0a\u00a0shallow\u00a0record,\u00a0but\u00a0what\u00a0do\u00a0I\u00a0do\u00a0with\u00a0data\u00a0that\u00a0is\u00a0deeply\nnested,\u00a0e.g.,\u00a0coming\u00a0from\u00a0a\u00a0JSON\u00a0document? The\u00a0core\u00a0refactoring\u00a0steps\u00a0still\u00a0apply,\u00a0and\nI\u00a0have\u00a0to\u00a0be\u00a0equally\u00a0careful\u00a0with\u00a0updates,\u00a0but\u00a0I\u00a0do\u00a0get\u00a0some\u00a0options\u00a0around\u00a0reads. As\u00a0an\u00a0example,\u00a0here\u00a0is\u00a0some\u00a0slightly\u00a0more\u00a0nested\u00a0data:\u00a0a\u00a0collection\u00a0of\u00a0customers,\u00a0kept\nin\u00a0a\u00a0hashmap\u00a0indexed\u00a0by\u00a0their\u00a0customer\u00a0ID. Click\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nwww.EBooksWorld.ir", "domains": ["Code Organization"], "source": "Refactoring.Improving.the.Design.of.Existing.Code.pdf", "section": "Page 188", "position": 188, "chunk_type": "semantic", "token_estimate": 224}
{"text": "getRawDataOfCustomers()[customerID].usages[year][month]\u00a0=\u00a0amount\u037e: The\u00a0general\u00a0mechanics\u00a0now\u00a0say\u00a0to\u00a0return\u00a0the\u00a0full\u00a0customer\u00a0and\u00a0use\u00a0an\u00a0accessor,\ncreating\u00a0one\u00a0if\u00a0needed. I\u00a0don\u2019t\u00a0have\u00a0a\u00a0setter\u00a0on\u00a0the\u00a0customer\u00a0for\u00a0this\u00a0update,\u00a0and\u00a0this\none\u00a0digs\u00a0into\u00a0the\u00a0structure. So,\u00a0to\u00a0make\u00a0one,\u00a0I\u00a0begin\u00a0by\u00a0using\u00a0Extract\u00a0Function\u00a0(106)\u00a0on\nthe\u00a0code\u00a0that\u00a0digs\u00a0into\u00a0the\u00a0data\u00a0structure. sample\u00a0update\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nsetUsage(customerID,\u00a0year,\u00a0month,\u00a0amount)\u037e\ntop\u00a0level\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0setUsage(customerID,\u00a0year,\u00a0month,\u00a0amount)\u00a0{\n\u00a0\u00a0getRawDataOfCustomers()[customerID].usages[year][month]\u00a0=\u00a0amount\u037e\n}\nI\u00a0then\u00a0use\u00a0Move\u00a0Function\u00a0(198)\u00a0to\u00a0move\u00a0it\u00a0into\u00a0the\u00a0new\u00a0customer\u00a0data\u00a0class. sample\u00a0update\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\ngetCustomerData().setUsage(customerID,\u00a0year,\u00a0month,\u00a0amount)\u037e\nclass\u00a0CustomerData\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nsetUsage(customerID,\u00a0year,\u00a0month,\u00a0amount)\u00a0{\n\u00a0\u00a0this._data[customerID].usages[year][month]\u00a0=\u00a0amount\u037e\n}\nWhen\u00a0working\u00a0with\u00a0a\u00a0big\u00a0data\u00a0structure,\u00a0I\u00a0like\u00a0to\u00a0concentrate\u00a0on\u00a0the\u00a0updates. Getting\nthem\u00a0visible\u00a0and\u00a0gathered\u00a0in\u00a0a\u00a0single\u00a0place\u00a0is\u00a0the\u00a0most\u00a0important\u00a0part\u00a0of\u00a0the\nencapsulation. www.EBooksWorld.ir", "domains": ["Code Organization"], "source": "Refactoring.Improving.the.Design.of.Existing.Code.pdf", "section": "Page 191", "position": 191, "chunk_type": "semantic", "token_estimate": 165}
{"text": "At\u00a0some\u00a0point,\u00a0I\u00a0will\u00a0think\u00a0I\u2019ve\u00a0got\u00a0them\u00a0all\u2014but\u00a0how\u00a0can\u00a0I\u00a0be\u00a0sure?\u00a0There\u2019s\u00a0a\u00a0couple\u00a0of: ways\u00a0to\u00a0check. One\u00a0is\u00a0to\u00a0modify\u00a0getRawDataOfCustomers\u00a0to\u00a0return\u00a0a\u00a0deep\u00a0copy\u00a0of\nthe\u00a0data\u037e\u00a0if\u00a0my\u00a0test\u00a0coverage\u00a0is\u00a0good,\u00a0one\u00a0of\u00a0the\u00a0tests\u00a0should\u00a0break\u00a0if\u00a0I\u00a0missed\u00a0a\nmodification. top\u00a0level\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0getCustomerData()\u00a0{return\u00a0customerData\u037e}\nfunction\u00a0getRawDataOfCustomers()\u00a0\u00a0\u00a0\u00a0{return\u00a0customerData.rawData\u037e}\nfunction\u00a0setRawDataOfCustomers(arg)\u00a0{customerData\u00a0=\u00a0new\u00a0CustomerData(arg)\u037e}\nclass\u00a0CustomerData\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nget\u00a0rawData()\u00a0{\n\u00a0\u00a0return\u00a0_.cloneDeep(this._data)\u037e\n}\nI\u2019m\u00a0using\u00a0the\u00a0lodash\u00a0library\u00a0to\u00a0make\u00a0a\u00a0deep\u00a0copy. Another\u00a0approach\u00a0is\u00a0to\u00a0return\u00a0a\u00a0read\u00adonly\u00a0proxy\u00a0for\u00a0the\u00a0data\u00a0structure. Such\u00a0a\u00a0proxy\ncould\u00a0raise\u00a0an\u00a0exception\u00a0if\u00a0the\u00a0client\u00a0code\u00a0tries\u00a0to\u00a0modify\u00a0the\u00a0underlying\u00a0object. Some\nlanguages\u00a0make\u00a0this\u00a0easy,\u00a0but\u00a0it\u2019s\u00a0a\u00a0pain\u00a0in\u00a0JavaScript,\u00a0so\u00a0I\u2019ll\u00a0leave\u00a0it\u00a0as\u00a0an\u00a0exercise\u00a0for\nthe\u00a0reader.\u00a0I\u00a0could\u00a0also\u00a0take\u00a0a\u00a0copy\u00a0and\u00a0recursively\u00a0freeze\u00a0it\u00a0to\u00a0detect\u00a0any\u00a0modifications. Dealing\u00a0with\u00a0the\u00a0updates\u00a0is\u00a0valuable,\u00a0but\u00a0what\u00a0about\u00a0the\u00a0readers? Here\u00a0there\u00a0are\u00a0a\u00a0few\noptions. The\u00a0first\u00a0option\u00a0is\u00a0to\u00a0do\u00a0the\u00a0same\u00a0thing\u00a0as\u00a0I\u00a0did\u00a0for\u00a0the\u00a0setters. Extract\u00a0all\u00a0the\u00a0reads\u00a0into\ntheir\u00a0own\u00a0functions\u00a0and\u00a0move\u00a0them\u00a0into\u00a0the\u00a0customer\u00a0data\u00a0class. class\u00a0CustomerData\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nusage(customerID,\u00a0year,\u00a0month)\u00a0{\n\u00a0\u00a0return\u00a0this._data[customerID].usages[year][month]\u037e\n}\nwww.EBooksWorld.ir", "domains": ["Design Patterns"], "source": "Refactoring.Improving.the.Design.of.Existing.Code.pdf", "section": "Page 192", "position": 192, "chunk_type": "semantic", "token_estimate": 226}
{"text": "copying\u00a0a\u00a0large\u00a0data\u00a0structure,\u00a0which\u00a0may\u00a0turn\u00a0out\u00a0to\u00a0be\u00a0a\u00a0performance\u00a0problem.\u00a0As: with\u00a0anything\u00a0like\u00a0this,\u00a0however,\u00a0the\u00a0performance\u00a0cost\u00a0might\u00a0be\u00a0acceptable\u2014I\u00a0would\nwant\u00a0to\u00a0measure\u00a0its\u00a0impact\u00a0before\u00a0I\u00a0start\u00a0to\u00a0worry\u00a0about\u00a0it. There\u00a0may\u00a0also\u00a0be\u00a0confusion\nif\u00a0clients\u00a0expect\u00a0modifying\u00a0the\u00a0copied\u00a0data\u00a0to\u00a0modify\u00a0the\u00a0original. In\u00a0those\u00a0cases,\u00a0a\u00a0read\u00ad\nonly\u00a0proxy\u00a0or\u00a0freezing\u00a0the\u00a0copied\u00a0data\u00a0might\u00a0provide\u00a0a\u00a0helpful\u00a0error\u00a0should\u00a0they\u00a0do\u00a0this. Another\u00a0option\u00a0is\u00a0more\u00a0work,\u00a0but\u00a0offers\u00a0the\u00a0most\u00a0control:\u00a0Apply\u00a0Encapsulate\u00a0Record\nrecursively. With\u00a0this,\u00a0I\u00a0turn\u00a0the\u00a0customer\u00a0record\u00a0into\u00a0its\u00a0own\u00a0class,\u00a0apply\u00a0Encapsulate\nCollection\u00a0(170)\u00a0to\u00a0the\u00a0usages,\u00a0and\u00a0create\u00a0a\u00a0usage\u00a0class. I\u00a0can\u00a0then\u00a0enforce\u00a0control\u00a0of\nupdates\u00a0by\u00a0using\u00a0accessors,\u00a0perhaps\u00a0applying\u00a0Change\u00a0Reference\u00a0to\u00a0Value\u00a0(252)\u00a0on\u00a0the\nusage\u00a0objects. But\u00a0this\u00a0can\u00a0be\u00a0a\u00a0lot\u00a0of\u00a0effort\u00a0for\u00a0a\u00a0large\u00a0data\u00a0structure\u2014and\u00a0not\u00a0really\nneeded\u00a0if\u00a0I\u00a0don\u2019t\u00a0access\u00a0that\u00a0much\u00a0of\u00a0the\u00a0data\u00a0structure. Sometimes,\u00a0a\u00a0judicious\u00a0mix\u00a0of\ngetters\u00a0and\u00a0new\u00a0classes\u00a0may\u00a0work,\u00a0using\u00a0a\u00a0getter\u00a0to\u00a0dig\u00a0deep\u00a0into\u00a0the\u00a0structure\u00a0but\nreturning\u00a0an\u00a0object\u00a0that\u00a0wraps\u00a0the\u00a0structure\u00a0rather\u00a0than\u00a0the\u00a0unencapsulated\u00a0data. I\nwrote\u00a0about\u00a0this\u00a0kind\u00a0of\u00a0thing\u00a0in\u00a0an\u00a0article\u00a0\u201cRefactoring\u00a0Code\u00a0to\u00a0Load\u00a0a\u00a0Document\u201d\u00a0[mf\u00ad\nref\u00addoc].", "domains": ["Design Patterns", "Software Quality Attributes"], "source": "Refactoring.Improving.the.Design.of.Existing.Code.pdf", "section": "Page 194", "position": 194, "chunk_type": "semantic", "token_estimate": 211}
{"text": "Motivation: I\u00a0like\u00a0encapsulating\u00a0any\u00a0mutable\u00a0data\u00a0in\u00a0my\u00a0programs. This\u00a0makes\u00a0it\u00a0easier\u00a0to\u00a0see\u00a0when\nand\u00a0how\u00a0data\u00a0structures\u00a0are\u00a0modified,\u00a0which\u00a0then\u00a0makes\u00a0it\u00a0easier\u00a0to\u00a0change\u00a0those\u00a0data\nstructures\u00a0when\u00a0I\u00a0need\u00a0to. Encapsulation\u00a0is\u00a0often\u00a0encouraged,\u00a0particularly\u00a0by\u00a0object\u00ad\noriented\u00a0developers,\u00a0but\u00a0a\u00a0common\u00a0mistake\u00a0occurs\u00a0when\u00a0working\u00a0with\u00a0collections. www.EBooksWorld.ir", "domains": ["Code Organization"], "source": "Refactoring.Improving.the.Design.of.Existing.Code.pdf", "section": "Page 194", "position": 194, "chunk_type": "semantic", "token_estimate": 56}
{"text": "Access\u00a0to\u00a0a\u00a0collection\u00a0variable\u00a0may\u00a0be\u00a0encapsulated,\u00a0but\u00a0if\u00a0the\u00a0getter\u00a0returns\u00a0the: collection\u00a0itself,\u00a0then\u00a0that\u00a0collection\u2019s\u00a0membership\u00a0can\u00a0be\u00a0altered\u00a0without\u00a0the\u00a0enclosing\nclass\u00a0being\u00a0able\u00a0to\u00a0intervene. To\u00a0avoid\u00a0this,\u00a0I\u00a0provide\u00a0collection\u00a0modifier\u00a0methods\u2014usually\u00a0add\u00a0and\u00a0remove\u2014on\u00a0the\nclass\u00a0itself. This\u00a0way,\u00a0changes\u00a0to\u00a0the\u00a0collection\u00a0go\u00a0through\u00a0the\u00a0owning\u00a0class,\u00a0giving\u00a0me\nthe\u00a0opportunity\u00a0to\u00a0modify\u00a0such\u00a0changes\u00a0as\u00a0the\u00a0program\u00a0evolves. Iff\u00a0the\u00a0team\u00a0has\u00a0the\u00a0habit\u00a0to\u00a0not\u00a0to\u00a0modify\u00a0collections\u00a0outside\u00a0the\u00a0original\u00a0module,\u00a0just\nproviding\u00a0these\u00a0methods\u00a0may\u00a0be\u00a0enough. However,\u00a0it\u2019s\u00a0usually\u00a0unwise\u00a0to\u00a0rely\u00a0on\u00a0such\nhabits\u037e\u00a0a\u00a0mistake\u00a0here\u00a0can\u00a0lead\u00a0to\u00a0bugs\u00a0that\u00a0are\u00a0difficult\u00a0to\u00a0track\u00a0down\u00a0later. A\u00a0better\napproach\u00a0is\u00a0to\u00a0ensure\u00a0that\u00a0the\u00a0getter\u00a0for\u00a0the\u00a0collection\u00a0does\u00a0not\u00a0return\u00a0the\u00a0raw\ncollection,\u00a0so\u00a0that\u00a0clients\u00a0cannot\u00a0accidentally\u00a0change\u00a0it. One\u00a0way\u00a0to\u00a0prevent\u00a0modification\u00a0of\u00a0the\u00a0underlying\u00a0collection\u00a0is\u00a0by\u00a0never\u00a0returning\u00a0a\ncollection\u00a0value. In\u00a0this\u00a0approach,\u00a0any\u00a0use\u00a0of\u00a0a\u00a0collection\u00a0field\u00a0is\u00a0done\u00a0with\u00a0specific\nmethods\u00a0on\u00a0the\u00a0owning\u00a0class,\u00a0replacing\u00a0aCustomer.orders.size\u00a0with\naCustomer.numberOfOrders.\u00a0I\u00a0don\u2019t\u00a0agree\u00a0with\u00a0this\u00a0approach. Modern\u00a0languages\nhave\u00a0rich\u00a0collection\u00a0classes\u00a0with\u00a0standardized\u00a0interfaces,\u00a0which\u00a0can\u00a0be\u00a0combined\u00a0in\nuseful\u00a0ways\u00a0such\u00a0as\u00a0Collection\u00a0Pipelines\u00a0[mf\u00adcp]. Putting\u00a0in\u00a0special\u00a0methods\u00a0to\u00a0handle\nthis\u00a0kind\u00a0of\u00a0functionality\u00a0adds\u00a0a\u00a0lot\u00a0of\u00a0extra\u00a0code\u00a0and\u00a0cripples\u00a0the\u00a0easy\u00a0composability\u00a0of\ncollection\u00a0operations. Another\u00a0way\u00a0is\u00a0to\u00a0allow\u00a0some\u00a0form\u00a0of\u00a0read\u00adonly\u00a0access\u00a0to\u00a0a\u00a0collection. Java,\u00a0for\nexample,\u00a0makes\u00a0it\u00a0easy\u00a0to\u00a0return\u00a0a\u00a0read\u00adonly\u00a0proxy\u00a0to\u00a0the\u00a0collection. Such\u00a0a\u00a0proxy\nforwards\u00a0all\u00a0reads\u00a0to\u00a0the\u00a0underlying\u00a0collection,\u00a0but\u00a0blocks\u00a0all\u00a0writes\u2014in\u00a0Java\u2019s\u00a0case,\nthrowing\u00a0an\u00a0exception. A\u00a0similar\u00a0route\u00a0is\u00a0used\u00a0by\u00a0libraries\u00a0that\u00a0base\u00a0their\u00a0collection\ncomposition\u00a0on\u00a0some\u00a0kind\u00a0of\u00a0iterator\u00a0or\u00a0enumerable\u00a0object\u2014providing\u00a0that\u00a0iterator\ncannot\u00a0modify\u00a0the\u00a0underlying\u00a0collection. Probably\u00a0the\u00a0most\u00a0common\u00a0approach\u00a0is\u00a0to\u00a0provide\u00a0a\u00a0getting\u00a0method\u00a0for\u00a0the\u00a0collection,\nbut\u00a0make\u00a0it\u00a0return\u00a0a\u00a0copy\u00a0of\u00a0the\u00a0underlying\u00a0collection. That\u00a0way,\u00a0any\u00a0modifications\u00a0to\nthe\u00a0copy\u00a0don\u2019t\u00a0affect\u00a0the\u00a0encapsulated\u00a0collection. This\u00a0might\u00a0cause\u00a0some\u00a0confusion\u00a0if\nprogrammers\u00a0expect\u00a0the\u00a0returned\u00a0collection\u00a0to\u00a0modify\u00a0the\u00a0source\u00a0field\u2014but\u00a0in\u00a0many\ncode\u00a0bases,\u00a0programmers\u00a0are\u00a0used\u00a0to\u00a0collection\u00a0getters\u00a0providing\u00a0copies. If\u00a0the\ncollection\u00a0is\u00a0huge,\u00a0this\u00a0may\u00a0be\u00a0a\u00a0performance\u00a0issue\u2014but\u00a0most\u00a0lists\u00a0aren\u2019t\u00a0all\u00a0that\u00a0big,\u00a0so\nthe\u00a0general\u00a0rules\u00a0for\u00a0performance\u00a0should\u00a0apply\u00a0(Refactoring\u00a0and\u00a0Performance\u00a0(64)).", "domains": ["Design Patterns", "Software Quality Attributes", "Code Organization"], "source": "Refactoring.Improving.the.Design.of.Existing.Code.pdf", "section": "Page 195", "position": 195, "chunk_type": "semantic", "token_estimate": 393}
{"text": "Access\u00a0to\u00a0a\u00a0collection\u00a0variable\u00a0may\u00a0be\u00a0encapsulated,\u00a0but\u00a0if\u00a0the\u00a0getter\u00a0returns\u00a0the: This\u00a0might\u00a0cause\u00a0some\u00a0confusion\u00a0if\nprogrammers\u00a0expect\u00a0the\u00a0returned\u00a0collection\u00a0to\u00a0modify\u00a0the\u00a0source\u00a0field\u2014but\u00a0in\u00a0many\ncode\u00a0bases,\u00a0programmers\u00a0are\u00a0used\u00a0to\u00a0collection\u00a0getters\u00a0providing\u00a0copies. If\u00a0the\ncollection\u00a0is\u00a0huge,\u00a0this\u00a0may\u00a0be\u00a0a\u00a0performance\u00a0issue\u2014but\u00a0most\u00a0lists\u00a0aren\u2019t\u00a0all\u00a0that\u00a0big,\u00a0so\nthe\u00a0general\u00a0rules\u00a0for\u00a0performance\u00a0should\u00a0apply\u00a0(Refactoring\u00a0and\u00a0Performance\u00a0(64)). Another\u00a0difference\u00a0between\u00a0using\u00a0a\u00a0proxy\u00a0and\u00a0a\u00a0copy\u00a0is\u00a0that\u00a0a\u00a0modification\u00a0of\u00a0the\nsource\u00a0data\u00a0will\u00a0be\u00a0visible\u00a0in\u00a0the\u00a0proxy\u00a0but\u00a0not\u00a0in\u00a0a\u00a0copy. This\u00a0isn\u2019t\u00a0an\u00a0issue\u00a0most\u00a0of\u00a0the\nwww.EBooksWorld.ir", "domains": ["Design Patterns", "Software Quality Attributes"], "source": "Refactoring.Improving.the.Design.of.Existing.Code.pdf", "section": "Page 195", "position": 195, "chunk_type": "semantic", "token_estimate": 107}
{"text": "time,\u00a0because\u00a0lists\u00a0accessed\u00a0in\u00a0this\u00a0way\u00a0are\u00a0usually\u00a0only\u00a0held\u00a0for\u00a0a\u00a0short\u00a0time.: What\u2019s\u00a0important\u00a0here\u00a0is\u00a0consistency\u00a0within\u00a0a\u00a0code\u00a0base. Use\u00a0only\u00a0one\u00a0mechanism\u00a0so\neveryone\u00a0can\u00a0get\u00a0used\u00a0to\u00a0how\u00a0it\u00a0behaves\u00a0and\u00a0expect\u00a0it\u00a0when\u00a0calling\u00a0any\u00a0collection\naccessor\u00a0function. Mechanics\nApply\u00a0Encapsulate\u00a0Variable\u00a0(132)\u00a0if\u00a0the\u00a0reference\u00a0to\u00a0the\u00a0collection\u00a0isn\u2019t\u00a0already\nencapsulated. Add\u00a0functions\u00a0to\u00a0add\u00a0and\u00a0remove\u00a0elements\u00a0from\u00a0the\u00a0collection. If\u00a0there\u00a0is\u00a0a\u00a0setter\u00a0for\u00a0the\u00a0collection,\u00a0use\u00a0Remove\u00a0Setting\u00a0Method\u00a0(331)\u00a0if\u00a0possible. If\nnot,\u00a0make\u00a0it\u00a0take\u00a0a\u00a0copy\u00a0of\u00a0the\u00a0provided\u00a0collection. Run\u00a0static\u00a0checks. Find\u00a0all\u00a0references\u00a0to\u00a0the\u00a0collection. If\u00a0anyone\u00a0calls\u00a0modifiers\u00a0on\u00a0the\u00a0collection,\nchange\u00a0them\u00a0to\u00a0use\u00a0the\u00a0new\u00a0add/remove\u00a0functions.\u00a0Test\u00a0after\u00a0each\u00a0change. Modify\u00a0the\u00a0getter\u00a0for\u00a0the\u00a0collection\u00a0to\u00a0return\u00a0a\u00a0protected\u00a0view\u00a0on\u00a0it,\u00a0using\u00a0a\u00a0read\u00ad\nonly\u00a0proxy\u00a0or\u00a0a\u00a0copy. Test. Example\nI\u00a0start\u00a0with\u00a0a\u00a0person\u00a0class\u00a0that\u00a0has\u00a0a\u00a0field\u00a0for\u00a0a\u00a0list\u00a0of\u00a0courses. class\u00a0Person\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nconstructor\u00a0(name)\u00a0{\n\u00a0\u00a0this._name\u00a0=\u00a0name\u037e\n\u00a0\u00a0this._courses\u00a0=\u00a0[]\u037e\n}\nget\u00a0name()\u00a0{return\u00a0this._name\u037e}\nget\u00a0courses()\u00a0{return\u00a0this._courses\u037e}\nset\u00a0courses(aList)\u00a0{this._courses\u00a0=\u00a0aList\u037e}\nclass\u00a0Course\u2026\nwww.EBooksWorld.ir", "domains": ["Design Patterns"], "source": "Refactoring.Improving.the.Design.of.Existing.Code.pdf", "section": "Page 196", "position": 196, "chunk_type": "semantic", "token_estimate": 196}
{"text": "Click\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image: constructor(name,\u00a0isAdvanced)\u00a0{\n\u00a0\u00a0this._name\u00a0=\u00a0name\u037e\n\u00a0\u00a0this._isAdvanced\u00a0=\u00a0isAdvanced\u037e\n}\nget\u00a0name()\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0{return\u00a0this._name\u037e}\nget\u00a0isAdvanced()\u00a0{return\u00a0this._isAdvanced\u037e}\nClients\u00a0use\u00a0the\u00a0course\u00a0collection\u00a0to\u00a0gather\u00a0information\u00a0on\u00a0courses. Click\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nnumAdvancedCourses\u00a0=\u00a0aPerson.courses\n\u00a0\u00a0.filter(c\u00a0=>\u00a0c.isAdvanced)\n\u00a0\u00a0.length\n\u037e\nA\u00a0naive\u00a0developer\u00a0would\u00a0say\u00a0this\u00a0class\u00a0has\u00a0proper\u00a0data\u00a0encapsulation:\u00a0After\u00a0all,\u00a0each\nfield\u00a0is\u00a0protected\u00a0by\u00a0accessor\u00a0methods. But\u00a0I\u00a0would\u00a0argue\u00a0that\u00a0the\u00a0list\u00a0of\u00a0courses\u00a0isn\u2019t\nproperly\u00a0encapsulated. Certainly,\u00a0anyone\u00a0updating\u00a0the\u00a0courses\u00a0as\u00a0a\u00a0single\u00a0value\u00a0has\nproper\u00a0control\u00a0through\u00a0the\u00a0setter:\nclient\u00a0code\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nconst\u00a0basicCourseNames\u00a0=\u00a0readBasicCourseNames(filename)\u037e\naPerson.courses\u00a0=\u00a0basicCourseNames.map(name\u00a0=>\u00a0new\u00a0Course(name,\u00a0false))\u037e\nBut\u00a0clients\u00a0might\u00a0find\u00a0it\u00a0easier\u00a0to\u00a0update\u00a0the\u00a0course\u00a0list\u00a0directly. client\u00a0code\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfor(const\u00a0name\u00a0of\u00a0readBasicCourseNames(filename))\u00a0{\n\u00a0\u00a0aPerson.courses.push(new\u00a0Course(name,\u00a0false))\u037e\n}\nThis\u00a0violates\u00a0encapsulating\u00a0because\u00a0the\u00a0person\u00a0class\u00a0has\u00a0no\u00a0ability\u00a0to\u00a0take\u00a0control\u00a0when\nwww.EBooksWorld.ir", "domains": ["Code Organization"], "source": "Refactoring.Improving.the.Design.of.Existing.Code.pdf", "section": "Page 197", "position": 197, "chunk_type": "semantic", "token_estimate": 158}
{"text": "the\u00a0list\u00a0is\u00a0updated\u00a0in\u00a0this\u00a0way.\u00a0While\u00a0the\u00a0reference\u00a0to\u00a0the\u00a0field\u00a0is\u00a0encapsulated,\u00a0the: content\u00a0of\u00a0the\u00a0field\u00a0is\u00a0not. I\u2019ll\u00a0begin\u00a0creating\u00a0proper\u00a0encapsulation\u00a0by\u00a0adding\u00a0methods\u00a0to\u00a0the\u00a0person\u00a0class\u00a0that\nallow\u00a0a\u00a0client\u00a0to\u00a0add\u00a0and\u00a0remove\u00a0individual\u00a0courses. class\u00a0Person\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\naddCourse(aCourse)\u00a0{\n\u00a0\u00a0this._courses.push(aCourse)\u037e\n}\nremoveCourse(aCourse,\u00a0fnIfAbsent\u00a0=\u00a0()\u00a0=>\u00a0{throw\u00a0new\u00a0RangeError()\u037e})\u00a0{\n\u00a0\u00a0const\u00a0index\u00a0=\u00a0this._courses.indexOf(aCourse)\u037e\n\u00a0\u00a0if\u00a0(index\u00a0===\u00a0\u00ad1)\u00a0fnIfAbsent()\u037e\n\u00a0\u00a0else\u00a0this._courses.splice(index,\u00a01)\u037e\n}\nWith\u00a0a\u00a0removal,\u00a0I\u00a0have\u00a0to\u00a0decide\u00a0what\u00a0to\u00a0do\u00a0if\u00a0a\u00a0client\u00a0asks\u00a0to\u00a0remove\u00a0an\u00a0element\u00a0that\nisn\u2019t\u00a0in\u00a0the\u00a0collection.\u00a0I\u00a0can\u00a0either\u00a0shrug,\u00a0or\u00a0raise\u00a0an\u00a0error. With\u00a0this\u00a0code,\u00a0I\u00a0default\u00a0to\nraising\u00a0an\u00a0error,\u00a0but\u00a0give\u00a0the\u00a0callers\u00a0an\u00a0opportunity\u00a0to\u00a0do\u00a0something\u00a0else\u00a0if\u00a0they\u00a0wish. I\u00a0then\u00a0change\u00a0any\u00a0code\u00a0that\u00a0calls\u00a0modifiers\u00a0directly\u00a0on\u00a0the\u00a0collection\u00a0to\u00a0use\u00a0new\nmethods. client\u00a0code\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfor(const\u00a0name\u00a0of\u00a0readBasicCourseNames(filename))\u00a0{\n\u00a0\u00a0aPerson.addCourse(new\u00a0Course(name,\u00a0false))\u037e\n}\nWith\u00a0individual\u00a0add\u00a0and\u00a0remove\u00a0methods,\u00a0there\u00a0is\u00a0usually\u00a0no\u00a0need\u00a0for\u00a0setCourses,\u00a0in\nwhich\u00a0case\u00a0I\u2019ll\u00a0use\u00a0Remove\u00a0Setting\u00a0Method\u00a0(331)\u00a0on\u00a0it. Should\u00a0the\u00a0API\u00a0need\u00a0a\u00a0setting\nmethod\u00a0for\u00a0some\u00a0reason,\u00a0I\u00a0ensure\u00a0it\u00a0puts\u00a0a\u00a0copy\u00a0of\u00a0the\u00a0collection\u00a0in\u00a0the\u00a0field. class\u00a0Person\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nset\u00a0courses(aList)\u00a0{this._courses\u00a0=\u00a0aList.slice()\u037e}\nwww.EBooksWorld.ir", "domains": ["Code Organization"], "source": "Refactoring.Improving.the.Design.of.Existing.Code.pdf", "section": "Page 198", "position": 198, "chunk_type": "semantic", "token_estimate": 224}
{"text": "inverse\u00a0of:\u00a0Remove\u00a0Middle\u00a0Man\u00a0(192): Motivation\nOne\u00a0of\u00a0the\u00a0keys\u2014if\u00a0not\u00a0the\u00a0key\u2014to\u00a0good\u00a0modular\u00a0design\u00a0is\u00a0encapsulation. www.EBooksWorld.ir", "domains": ["Code Organization"], "source": "Refactoring.Improving.the.Design.of.Existing.Code.pdf", "section": "Page 216", "position": 216, "chunk_type": "semantic", "token_estimate": 20}
{"text": "Encapsulation\u00a0means\u00a0that\u00a0modules\u00a0need\u00a0to\u00a0know\u00a0less\u00a0about\u00a0other\u00a0parts\u00a0of\u00a0the\u00a0system.: Then,\u00a0when\u00a0things\u00a0change,\u00a0fewer\u00a0modules\u00a0need\u00a0to\u00a0be\u00a0told\u00a0about\u00a0the\u00a0change\u2014which\nmakes\u00a0the\u00a0change\u00a0easier\u00a0to\u00a0make. When\u00a0we\u00a0are\u00a0first\u00a0taught\u00a0about\u00a0object\u00a0orientation,\u00a0we\u00a0are\u00a0told\u00a0that\u00a0encapsulation\u00a0means\nhiding\u00a0our\u00a0fields. As\u00a0we\u00a0become\u00a0more\u00a0sophisticated,\u00a0we\u00a0realize\u00a0there\u00a0is\u00a0more\u00a0that\u00a0we\ncan\u00a0encapsulate. If\u00a0I\u00a0have\u00a0some\u00a0client\u00a0code\u00a0that\u00a0calls\u00a0a\u00a0method\u00a0defined\u00a0on\u00a0an\u00a0object\u00a0in\u00a0a\u00a0field\u00a0of\u00a0a\u00a0server\nobject,\u00a0the\u00a0client\u00a0needs\u00a0to\u00a0know\u00a0about\u00a0this\u00a0delegate\u00a0object. If\u00a0the\u00a0delegate\u00a0changes\u00a0its\ninterface,\u00a0changes\u00a0propagate\u00a0to\u00a0all\u00a0the\u00a0clients\u00a0of\u00a0the\u00a0server\u00a0that\u00a0use\u00a0the\u00a0delegate. I\u00a0can\nremove\u00a0this\u00a0dependency\u00a0by\u00a0placing\u00a0a\u00a0simple\u00a0delegating\u00a0method\u00a0on\u00a0the\u00a0server\u00a0that\u00a0hides\nthe\u00a0delegate. Then\u00a0any\u00a0changes\u00a0I\u00a0make\u00a0to\u00a0the\u00a0delegate\u00a0propagate\u00a0only\u00a0to\u00a0the\u00a0server\u00a0and\nnot\u00a0to\u00a0the\u00a0clients. Mechanics\nFor\u00a0each\u00a0method\u00a0on\u00a0the\u00a0delegate,\u00a0create\u00a0a\u00a0simple\u00a0delegating\u00a0method\u00a0on\u00a0the\u00a0server. Adjust\u00a0the\u00a0client\u00a0to\u00a0call\u00a0the\u00a0server.\u00a0Test\u00a0after\u00a0each\u00a0change. If\u00a0no\u00a0client\u00a0needs\u00a0to\u00a0access\u00a0the\u00a0delegate\u00a0anymore,\u00a0remove\u00a0the\u00a0server\u2019s\u00a0accessor\u00a0for\nthe\u00a0delegate. Test. Example\nI\u00a0start\u00a0with\u00a0a\u00a0person\u00a0and\u00a0a\u00a0department. class\u00a0Person\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nwww.EBooksWorld.ir", "domains": ["Code Organization"], "source": "Refactoring.Improving.the.Design.of.Existing.Code.pdf", "section": "Page 217", "position": 217, "chunk_type": "semantic", "token_estimate": 210}
{"text": "inverse\u00a0of:\u00a0Hide\u00a0Delegate\u00a0(189): Motivation\nIn\u00a0the\u00a0motivation\u00a0for\u00a0Hide\u00a0Delegate\u00a0(189),\u00a0I\u00a0talked\u00a0about\u00a0the\u00a0advantages\u00a0of\nencapsulating\u00a0the\u00a0use\u00a0of\u00a0a\u00a0delegated\u00a0object.\u00a0There\u00a0is\u00a0a\u00a0price\u00a0for\u00a0this. Every\u00a0time\u00a0the\nclient\u00a0wants\u00a0to\u00a0use\u00a0a\u00a0new\u00a0feature\u00a0of\u00a0the\u00a0delegate,\u00a0I\u00a0have\u00a0to\u00a0add\u00a0a\u00a0simple\u00a0delegating\nmethod\u00a0to\u00a0the\u00a0server. After\u00a0adding\u00a0features\u00a0for\u00a0a\u00a0while,\u00a0I\u00a0get\u00a0irritated\u00a0with\u00a0all\u00a0this\nforwarding. The\u00a0server\u00a0class\u00a0is\u00a0just\u00a0a\u00a0middle\u00a0man\u00a0(Middle\u00a0Man\u00a0(81)),\u00a0and\u00a0perhaps\u00a0it\u2019s\ntime\u00a0for\u00a0the\u00a0client\u00a0to\u00a0call\u00a0the\u00a0delegate\u00a0directly. (This\u00a0smell\u00a0often\u00a0pops\u00a0up\u00a0when\u00a0people\nget\u00a0overenthusiastic\u00a0about\u00a0following\u00a0the\u00a0Law\u00a0of\u00a0Demeter,\u00a0which\u00a0I\u2019d\u00a0like\u00a0a\u00a0lot\u00a0more\u00a0if\u00a0it\nwere\u00a0called\u00a0the\u00a0Occasionally\u00a0Useful\u00a0Suggestion\u00a0of\u00a0Demeter.) It\u2019s\u00a0hard\u00a0to\u00a0figure\u00a0out\u00a0what\u00a0the\u00a0right\u00a0amount\u00a0of\u00a0hiding\u00a0is. Fortunately,\u00a0with\u00a0Hide\nDelegate\u00a0(189)\u00a0and\u00a0Remove\u00a0Middle\u00a0Man,\u00a0it\u00a0doesn\u2019t\u00a0matter\u00a0so\u00a0much. I\u00a0can\u00a0adjust\u00a0my\ncode\u00a0as\u00a0time\u00a0goes\u00a0on. As\u00a0the\u00a0system\u00a0changes,\u00a0the\u00a0basis\u00a0for\u00a0how\u00a0much\u00a0I\u00a0hide\u00a0also\nchanges.\u00a0A\u00a0good\u00a0encapsulation\u00a0six\u00a0months\u00a0ago\u00a0may\u00a0be\u00a0awkward\u00a0now. Refactoring\nwww.EBooksWorld.ir", "domains": ["Code Organization"], "source": "Refactoring.Improving.the.Design.of.Existing.Code.pdf", "section": "Page 219", "position": 219, "chunk_type": "semantic", "token_estimate": 183}
{"text": "Motivation: The\u00a0heart\u00a0of\u00a0a\u00a0good\u00a0software\u00a0design\u00a0is\u00a0its\u00a0modularity\u2014which\u00a0is\u00a0my\u00a0ability\u00a0to\u00a0make\u00a0most\nmodifications\u00a0to\u00a0a\u00a0program\u00a0while\u00a0only\u00a0having\u00a0to\u00a0understand\u00a0a\u00a0small\u00a0part\u00a0of\u00a0it. To\u00a0get\nthis\u00a0modularity,\u00a0I\u00a0need\u00a0to\u00a0ensure\u00a0that\u00a0related\u00a0software\u00a0elements\u00a0are\u00a0grouped\u00a0together\nand\u00a0the\u00a0links\u00a0between\u00a0them\u00a0are\u00a0easy\u00a0to\u00a0find\u00a0and\u00a0understand. But\u00a0my\u00a0understanding\u00a0of\nhow\u00a0to\u00a0do\u00a0this\u00a0isn\u2019t\u00a0static\u2014as\u00a0I\u00a0better\u00a0understand\u00a0what\u00a0I\u2019m\u00a0doing,\u00a0I\u00a0learn\u00a0how\u00a0to\u00a0best\ngroup\u00a0together\u00a0software\u00a0elements. To\u00a0reflect\u00a0that\u00a0growing\u00a0understanding,\u00a0I\u00a0need\u00a0to\nmove\u00a0elements\u00a0around. All\u00a0functions\u00a0live\u00a0in\u00a0some\u00a0context\u037e\u00a0it\u00a0may\u00a0be\u00a0global,\u00a0but\u00a0usually\u00a0it\u2019s\u00a0some\u00a0form\u00a0of\u00a0a\nmodule.\u00a0In\u00a0an\u00a0object\u00adoriented\u00a0program,\u00a0the\u00a0core\u00a0modular\u00a0context\u00a0is\u00a0a\u00a0class. Nesting\u00a0a\nfunction\u00a0within\u00a0another\u00a0creates\u00a0another\u00a0common\u00a0context. Different\u00a0languages\u00a0provide\nvaried\u00a0forms\u00a0of\u00a0modularity,\u00a0each\u00a0creating\u00a0a\u00a0context\u00a0for\u00a0a\u00a0function\u00a0to\u00a0live\u00a0in. One\u00a0of\u00a0the\u00a0most\u00a0straightforward\u00a0reasons\u00a0to\u00a0move\u00a0a\u00a0function\u00a0is\u00a0when\u00a0it\u00a0references\nelements\u00a0in\u00a0other\u00a0contexts\u00a0more\u00a0than\u00a0the\u00a0one\u00a0it\u00a0currently\u00a0resides\u00a0in. Moving\u00a0it\u00a0together\nwith\u00a0those\u00a0elements\u00a0often\u00a0improves\u00a0encapsulation,\u00a0allowing\u00a0other\u00a0parts\u00a0of\u00a0the\u00a0software\nto\u00a0be\u00a0less\u00a0dependent\u00a0on\u00a0the\u00a0details\u00a0of\u00a0this\u00a0module. Similarly,\u00a0I\u00a0may\u00a0move\u00a0a\u00a0function\u00a0because\u00a0of\u00a0where\u00a0its\u00a0callers\u00a0live,\u00a0or\u00a0where\u00a0I\u00a0need\u00a0to\u00a0call\nit\u00a0from\u00a0in\u00a0my\u00a0next\u00a0enhancement. A\u00a0function\u00a0defined\u00a0as\u00a0a\u00a0helper\u00a0inside\u00a0another\u00a0function\nmay\u00a0have\u00a0value\u00a0on\u00a0its\u00a0own,\u00a0so\u00a0it\u2019s\u00a0worth\u00a0moving\u00a0it\u00a0to\u00a0somewhere\u00a0more\u00a0accessible. A\nmethod\u00a0on\u00a0a\u00a0class\u00a0may\u00a0be\u00a0easier\u00a0for\u00a0me\u00a0to\u00a0use\u00a0if\u00a0shifted\u00a0to\u00a0another. Deciding\u00a0to\u00a0move\u00a0a\u00a0function\u00a0is\u00a0rarely\u00a0an\u00a0easy\u00a0decision. To\u00a0help\u00a0me\u00a0decide,\u00a0I\u00a0examine\u00a0the\ncurrent\u00a0and\u00a0candidate\u00a0contexts\u00a0for\u00a0that\u00a0function. I\u00a0need\u00a0to\u00a0look\u00a0at\u00a0what\u00a0functions\u00a0call\nthis\u00a0one,\u00a0what\u00a0functions\u00a0are\u00a0called\u00a0by\u00a0the\u00a0moving\u00a0function,\u00a0and\u00a0what\u00a0data\u00a0that\u00a0function\nuses. Often,\u00a0I\u00a0see\u00a0that\u00a0I\u00a0need\u00a0a\u00a0new\u00a0context\u00a0for\u00a0a\u00a0group\u00a0of\u00a0functions\u00a0and\u00a0create\u00a0one\u00a0with\nCombine\u00a0Functions\u00a0into\u00a0Class\u00a0(144)\u00a0or\u00a0Extract\u00a0Class\u00a0(182). Although\u00a0it\u00a0can\u00a0be\u00a0difficult\nwww.EBooksWorld.ir", "domains": ["Software Quality Attributes", "Code Organization"], "source": "Refactoring.Improving.the.Design.of.Existing.Code.pdf", "section": "Page 225", "position": 225, "chunk_type": "semantic", "token_estimate": 344}
{"text": "function\u00a0totalDistance(points)\u00a0{\u00a0...\u00a0}: function\u00a0distance(p1,p2)\u00a0{\u00a0...\u00a0}\nfunction\u00a0radians(degrees)\u00a0{\u00a0...\u00a0}\nSome\u00a0people\u00a0would\u00a0prefer\u00a0to\u00a0keep\u00a0distance\u00a0and\u00a0radians\u00a0inside\u00a0totalDistance\u00a0in\norder\u00a0to\u00a0restrict\u00a0their\u00a0visibility. In\u00a0some\u00a0languages\u00a0that\u00a0may\u00a0be\u00a0a\u00a0consideration,\u00a0but\u00a0with\nES\u00a02015,\u00a0JavaScript\u00a0has\u00a0an\u00a0excellent\u00a0module\u00a0mechanism\u00a0that\u2019s\u00a0the\u00a0best\u00a0tool\u00a0for\ncontrolling\u00a0function\u00a0visibility. In\u00a0general,\u00a0I\u2019m\u00a0wary\u00a0of\u00a0nested\u00a0functions\u2014they\u00a0too\u00a0easily\nset\u00a0up\u00a0hidden\u00a0data\u00a0interrelationships\u00a0that\u00a0can\u00a0get\u00a0hard\u00a0to\u00a0follow. Example: Moving between Classes\nTo\u00a0illustrate\u00a0this\u00a0variety\u00a0of\u00a0Move\u00a0Function,\u00a0I\u2019ll\u00a0start\u00a0here:\nclass\u00a0Account\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nget\u00a0bankCharge()\u00a0{\n\u00a0\u00a0let\u00a0result\u00a0=\u00a04.5\u037e\n\u00a0\u00a0if\u00a0(this._daysOverdrawn\u00a0>\u00a00)\u00a0result\u00a0+=\u00a0this.overdraftCharge\u037e\n\u00a0\u00a0return\u00a0result\u037e\n}\nget\u00a0overdraftCharge()\u00a0{\n\u00a0\u00a0if\u00a0(this.type.isPremium)\u00a0{\n\u00a0\u00a0\u00a0\u00a0const\u00a0baseCharge\u00a0=\u00a010\u037e\n\u00a0\u00a0\u00a0\u00a0if\u00a0(this.daysOverdrawn\u00a0<=\u00a07)\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0return\u00a0baseCharge\u037e\n\u00a0\u00a0\u00a0\u00a0else\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0return\u00a0baseCharge\u00a0+\u00a0(this.daysOverdrawn\u00a0\u00ad\u00a07)\u00a0*\u00a00.85\u037e\n\u00a0\u00a0}\n\u00a0\u00a0else\n\u00a0\u00a0\u00a0\u00a0return\u00a0this.daysOverdrawn\u00a0*\u00a01.75\u037e\n}\nComing\u00a0up\u00a0are\u00a0changes\u00a0that\u00a0lead\u00a0to\u00a0different\u00a0types\u00a0of\u00a0account\u00a0having\u00a0different\nalgorithms\u00a0for\u00a0determining\u00a0the\u00a0charge. Thus\u00a0it\u00a0seems\u00a0natural\u00a0to\u00a0move\noverdraftCharge\u00a0to\u00a0the\u00a0account\u00a0type\u00a0class. The\u00a0first\u00a0step\u00a0is\u00a0to\u00a0look\u00a0at\u00a0the\u00a0features\u00a0that\u00a0the\u00a0overdraftCharge\u00a0method\u00a0uses\u00a0and\nconsider\u00a0whether\u00a0it\u00a0is\u00a0worth\u00a0moving\u00a0a\u00a0batch\u00a0of\u00a0methods\u00a0together. In\u00a0this\u00a0case\u00a0I\u00a0need\u00a0the\ndaysOverdrawn\u00a0method\u00a0to\u00a0remain\u00a0on\u00a0the\u00a0account\u00a0class,\u00a0because\u00a0that\u00a0will\u00a0vary\u00a0with\nindividual\u00a0accounts. www.EBooksWorld.ir", "domains": ["Code Organization"], "source": "Refactoring.Improving.the.Design.of.Existing.Code.pdf", "section": "Page 232", "position": 232, "chunk_type": "semantic", "token_estimate": 227}
{"text": "I\u00a0usually\u00a0do\u00a0Move\u00a0Field\u00a0in\u00a0the\u00a0context\u00a0of\u00a0a\u00a0broader\u00a0set\u00a0of\u00a0changes.\u00a0Once\u00a0I\u2019ve\u00a0moved\u00a0a: field,\u00a0I\u00a0find\u00a0that\u00a0many\u00a0of\u00a0the\u00a0users\u00a0of\u00a0the\u00a0field\u00a0are\u00a0better\u00a0off\u00a0accessing\u00a0that\u00a0data\u00a0through\nthe\u00a0target\u00a0object\u00a0rather\u00a0than\u00a0the\u00a0original\u00a0source. I\u00a0then\u00a0change\u00a0these\u00a0with\u00a0later\nrefactorings. Similarly,\u00a0I\u00a0may\u00a0find\u00a0that\u00a0I\u00a0can\u2019t\u00a0do\u00a0Move\u00a0Field\u00a0at\u00a0the\u00a0moment\u00a0due\u00a0to\u00a0the\nway\u00a0the\u00a0data\u00a0is\u00a0used.\u00a0I\u00a0need\u00a0to\u00a0refactor\u00a0some\u00a0usage\u00a0patterns\u00a0first,\u00a0then\u00a0do\u00a0the\u00a0move. In\u00a0my\u00a0description\u00a0so\u00a0far,\u00a0I\u2019m\u00a0saying\u00a0\u201crecord,\u201d\u00a0but\u00a0all\u00a0this\u00a0is\u00a0true\u00a0of\u00a0classes\u00a0and\u00a0objects\ntoo. A\u00a0class\u00a0is\u00a0a\u00a0record\u00a0type\u00a0with\u00a0attached\u00a0functions\u2014and\u00a0these\u00a0need\u00a0to\u00a0be\u00a0kept\u00a0healthy\njust\u00a0as\u00a0much\u00a0as\u00a0any\u00a0other\u00a0data. The\u00a0attached\u00a0functions\u00a0do\u00a0make\u00a0it\u00a0easier\u00a0to\u00a0move\u00a0data\naround,\u00a0since\u00a0the\u00a0data\u00a0is\u00a0encapsulated\u00a0behind\u00a0accessor\u00a0methods. I\u00a0can\u00a0move\u00a0the\u00a0data,\nchange\u00a0the\u00a0accessors,\u00a0and\u00a0clients\u00a0of\u00a0the\u00a0accessors\u00a0will\u00a0still\u00a0work. So,\u00a0this\u00a0is\u00a0a\u00a0refactoring\nthat\u2019s\u00a0easier\u00a0to\u00a0do\u00a0if\u00a0you\u00a0have\u00a0classes,\u00a0and\u00a0my\u00a0description\u00a0below\u00a0makes\u00a0that\u00a0assumption. If\u00a0I\u2019m\u00a0using\u00a0bare\u00a0records\u00a0that\u00a0don\u2019t\u00a0support\u00a0encapsulation,\u00a0I\u00a0can\u00a0still\u00a0make\u00a0a\u00a0change\u00a0like\nthis,\u00a0but\u00a0it\u00a0is\u00a0more\u00a0tricky. Mechanics\nEnsure\u00a0the\u00a0source\u00a0field\u00a0is\u00a0encapsulated. Test. Create\u00a0a\u00a0field\u00a0(and\u00a0accessors)\u00a0in\u00a0the\u00a0target. Run\u00a0static\u00a0checks. Ensure\u00a0there\u00a0is\u00a0a\u00a0reference\u00a0from\u00a0the\u00a0source\u00a0object\u00a0to\u00a0the\u00a0target\u00a0object. An\u00a0existing\u00a0field\u00a0or\u00a0method\u00a0may\u00a0give\u00a0you\u00a0the\u00a0target. If\u00a0not,\u00a0see\u00a0if\u00a0you\u00a0can\u00a0easily\ncreate\u00a0a\u00a0method\u00a0that\u00a0will\u00a0do\u00a0so. Failing\u00a0that,\u00a0you\u00a0may\u00a0need\u00a0to\u00a0create\u00a0a\u00a0new\u00a0field\u00a0in\nthe\u00a0source\u00a0object\u00a0that\u00a0can\u00a0store\u00a0the\u00a0target. This\u00a0may\u00a0be\u00a0a\u00a0permanent\u00a0change,\u00a0but\u00a0you\ncan\u00a0also\u00a0do\u00a0it\u00a0temporarily\u00a0until\u00a0you\u00a0have\u00a0done\u00a0enough\u00a0refactoring\u00a0in\u00a0the\u00a0broader\ncontext. Adjust\u00a0accessors\u00a0to\u00a0use\u00a0the\u00a0target\u00a0field. If\u00a0the\u00a0target\u00a0is\u00a0shared\u00a0between\u00a0source\u00a0objects,\u00a0consider\u00a0first\u00a0updating\u00a0the\u00a0setter\u00a0to\nmodify\u00a0both\u00a0target\u00a0and\u00a0source\u00a0fields,\u00a0followed\u00a0by\u00a0Introduce\u00a0Assertion\u00a0(302)\u00a0to\ndetect\u00a0inconsistent\u00a0updates. Once\u00a0you\u00a0determine\u00a0all\u00a0is\u00a0well,\u00a0finish\u00a0changing\u00a0the\naccessors\u00a0to\u00a0use\u00a0the\u00a0target\u00a0field. Test. www.EBooksWorld.ir", "domains": ["Code Organization"], "source": "Refactoring.Improving.the.Design.of.Existing.Code.pdf", "section": "Page 236", "position": 236, "chunk_type": "semantic", "token_estimate": 352}
{"text": "this._setDiscountRate(discountRate)\u037e: )\u037e\n\u00a0\u00a0this._contract\u00a0=\u00a0new\u00a0CustomerContract(dateToday())\u037e\n}\nget\u00a0discountRate()\u00a0{return\u00a0this._discountRate\u037e}\n_setDiscountRate(aNumber)\u00a0{this._discountRate\u00a0=\u00a0aNumber\u037e}\nbecomePreferred()\u00a0{\n\u00a0\u00a0this._setDiscountRate(this.discountRate\u00a0+\u00a00.03)\u037e\n\u00a0\u00a0//\u00a0other\u00a0nice\u00a0things\n}\napplyDiscount(amount)\u00a0{\n\u00a0\u00a0return\u00a0amount.subtract(amount.multiply(this.discountRate))\u037e\n}\nI\u00a0use\u00a0a\u00a0method\u00a0to\u00a0update\u00a0the\u00a0discount\u00a0rate,\u00a0rather\u00a0than\u00a0a\u00a0property\u00a0setter,\u00a0as\u00a0I\u00a0don\u2019t\u00a0want\nto\u00a0make\u00a0a\u00a0public\u00a0setter\u00a0for\u00a0the\u00a0discount\u00a0rate. I\u00a0add\u00a0a\u00a0field\u00a0and\u00a0accessors\u00a0to\u00a0the\u00a0customer\u00a0contract. class\u00a0CustomerContract\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nconstructor(startDate,\u00a0discountRate)\u00a0{\n\u00a0\u00a0this._startDate\u00a0=\u00a0startDate\u037e\n\u00a0\u00a0this._discountRate\u00a0=\u00a0discountRate\u037e\n}\nget\u00a0discountRate()\u00a0\u00a0\u00a0\u00a0{return\u00a0this._discountRate\u037e}\nset\u00a0discountRate(arg)\u00a0{this._discountRate\u00a0=\u00a0arg\u037e}\nI\u00a0now\u00a0modify\u00a0the\u00a0accessors\u00a0on\u00a0customer\u00a0to\u00a0use\u00a0the\u00a0new\u00a0field. When\u00a0I\u00a0did\u00a0that,\u00a0I\u00a0got\u00a0an\nerror:\u00a0\u201cCannot\u00a0set\u00a0property\u00a0\u2019discountRate\u2019\u00a0of\u00a0undefined\u201d. This\u00a0was\u00a0because\n_setDiscountRate\u00a0was\u00a0called\u00a0before\u00a0I\u00a0created\u00a0the\u00a0contract\u00a0object\u00a0in\u00a0the\u00a0constructor. To\u00a0fix\u00a0that,\u00a0I\u00a0first\u00a0reverted\u00a0to\u00a0the\u00a0previous\u00a0state,\u00a0then\u00a0used\u00a0Slide\u00a0Statements\u00a0(223)\u00a0to\nmove\u00a0the\u00a0_setDiscountRate\u00a0after\u00a0creating\u00a0the\u00a0contract. class\u00a0Customer\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nconstructor(name,\u00a0discountRate)\u00a0{\n\u00a0\u00a0this._name\u00a0=\u00a0name\u037e\n\u00a0\u00a0this._setDiscountRate(discountRate)\u037e\n\u00a0\u00a0this._contract\u00a0=\u00a0new\u00a0CustomerContract(dateToday())\u037e\n}\nwww.EBooksWorld.ir", "domains": ["Design Patterns"], "source": "Refactoring.Improving.the.Design.of.Existing.Code.pdf", "section": "Page 238", "position": 238, "chunk_type": "semantic", "token_estimate": 179}
{"text": "I\u00a0tested\u00a0that,\u00a0then\u00a0changed\u00a0the\u00a0accessors\u00a0again\u00a0to\u00a0use\u00a0the\u00a0contract.: class\u00a0Customer\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nget\u00a0discountRate()\u00a0{return\u00a0this._contract.discountRate\u037e}\n_setDiscountRate(aNumber)\u00a0{this._contract.discountRate\u00a0=\u00a0aNumber\u037e}\nSince\u00a0I\u2019m\u00a0using\u00a0JavaScript,\u00a0there\u00a0is\u00a0no\u00a0declared\u00a0source\u00a0field,\u00a0so\u00a0I\u00a0don\u2019t\u00a0need\u00a0to\u00a0remove\nanything\u00a0further. Changing a Bare Record\nThis\u00a0refactoring\u00a0is\u00a0generally\u00a0easier\u00a0with\u00a0objects,\u00a0since\u00a0encapsulation\u00a0provides\u00a0a\u00a0natural\nway\u00a0to\u00a0wrap\u00a0data\u00a0access\u00a0in\u00a0methods. If\u00a0I\u00a0have\u00a0many\u00a0functions\u00a0accessing\u00a0a\u00a0bare\u00a0record,\nthen,\u00a0while\u00a0it\u2019s\u00a0still\u00a0a\u00a0valuable\u00a0refactoring,\u00a0it\u00a0is\u00a0decidedly\u00a0more\u00a0tricky. I\u00a0can\u00a0create\u00a0accessor\u00a0functions\u00a0and\u00a0modify\u00a0all\u00a0the\u00a0reads\u00a0and\u00a0writes\u00a0to\u00a0use\u00a0them. If\u00a0the\nfield\u00a0that\u2019s\u00a0being\u00a0moved\u00a0is\u00a0immutable,\u00a0I\u00a0can\u00a0update\u00a0both\u00a0the\u00a0source\u00a0and\u00a0the\u00a0target\u00a0fields\nwhen\u00a0I\u00a0set\u00a0its\u00a0value\u00a0and\u00a0gradually\u00a0migrate\u00a0reads. Still,\u00a0if\u00a0possible,\u00a0my\u00a0first\u00a0move\u00a0would\nbe\u00a0to\u00a0use\u00a0Encapsulate\u00a0Record\u00a0(162)\u00a0to\u00a0turn\u00a0the\u00a0record\u00a0into\u00a0a\u00a0class\u00a0so\u00a0I\u00a0can\u00a0make\u00a0the\nchange\u00a0more\u00a0easily. Example: Moving to a Shared Object\nNow,\u00a0let\u2019s\u00a0consider\u00a0a\u00a0different\u00a0case. Here\u2019s\u00a0an\u00a0account\u00a0with\u00a0an\u00a0interest\u00a0rate:\nclass\u00a0Account\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nconstructor(number,\u00a0type,\u00a0interestRate)\u00a0{\n\u00a0\u00a0this._number\u00a0=\u00a0number\u037e\n\u00a0\u00a0this._type\u00a0=\u00a0type\u037e\n\u00a0\u00a0this._interestRate\u00a0=\u00a0interestRate\u037e\n}\nget\u00a0interestRate()\u00a0{return\u00a0this._interestRate\u037e}\nclass\u00a0AccountType\u2026\nconstructor(nameString)\u00a0{\n\u00a0\u00a0this._name\u00a0=\u00a0nameString\u037e\nwww.EBooksWorld.ir", "domains": ["Code Organization"], "source": "Refactoring.Improving.the.Design.of.Existing.Code.pdf", "section": "Page 239", "position": 239, "chunk_type": "semantic", "token_estimate": 213}
{"text": "Motivation: Functions\u00a0allow\u00a0me\u00a0to\u00a0package\u00a0up\u00a0bits\u00a0of\u00a0behavior. This\u00a0is\u00a0useful\u00a0for\u00a0understanding\u2014a\nnamed\u00a0function\u00a0can\u00a0explain\u00a0the\u00a0purpose\u00a0of\u00a0the\u00a0code\u00a0rather\u00a0than\u00a0its\u00a0mechanics. It\u2019s\u00a0also\nvaluable\u00a0to\u00a0remove\u00a0duplication:\u00a0Instead\u00a0of\u00a0writing\u00a0the\u00a0same\u00a0code\u00a0twice,\u00a0I\u00a0just\u00a0call\u00a0the\nfunction. Then,\u00a0should\u00a0I\u00a0need\u00a0to\u00a0change\u00a0the\u00a0function\u2019s\u00a0implementation,\u00a0I\u00a0don\u2019t\u00a0have\u00a0to\ntrack\u00a0down\u00a0similar\u00adlooking\u00a0code\u00a0to\u00a0update\u00a0all\u00a0the\u00a0changes. (I\u00a0may\u00a0have\u00a0to\u00a0look\u00a0at\u00a0the\ncallers,\u00a0to\u00a0see\u00a0if\u00a0they\u00a0should\u00a0all\u00a0use\u00a0the\u00a0new\u00a0code,\u00a0but\u00a0that\u2019s\u00a0both\u00a0less\u00a0common\u00a0and\nmuch\u00a0easier.) If\u00a0I\u00a0see\u00a0inline\u00a0code\u00a0that\u2019s\u00a0doing\u00a0the\u00a0same\u00a0thing\u00a0that\u00a0I\u00a0have\u00a0in\u00a0an\u00a0existing\u00a0function,\u00a0I\u2019ll\nusually\u00a0want\u00a0to\u00a0replace\u00a0that\u00a0inline\u00a0code\u00a0with\u00a0a\u00a0function\u00a0call. The\u00a0exception\u00a0is\u00a0if\u00a0I\nconsider\u00a0the\u00a0similarity\u00a0to\u00a0be\u00a0coincidental\u2014so\u00a0that,\u00a0if\u00a0I\u00a0change\u00a0the\u00a0function\u00a0body,\u00a0I\u00a0don\u2019t\nexpect\u00a0the\u00a0behavior\u00a0in\u00a0this\u00a0inline\u00a0code\u00a0to\u00a0change. A\u00a0guide\u00a0to\u00a0this\u00a0is\u00a0the\u00a0name\u00a0of\u00a0the\nfunction.\u00a0A\u00a0good\u00a0name\u00a0should\u00a0make\u00a0sense\u00a0in\u00a0place\u00a0of\u00a0inline\u00a0code\u00a0I\u00a0have. If\u00a0the\u00a0name\ndoesn\u2019t\u00a0make\u00a0sense,\u00a0that\u00a0may\u00a0be\u00a0because\u00a0it\u2019s\u00a0a\u00a0poor\u00a0name\u00a0(in\u00a0which\u00a0case\u00a0I\u00a0use\u00a0Rename\nFunction\u00a0(124)\u00a0to\u00a0fix\u00a0it)\u00a0or\u00a0because\u00a0the\u00a0function\u2019s\u00a0purpose\u00a0is\u00a0different\u00a0to\u00a0what\u00a0I\u00a0want\u00a0in\nthis\u00a0case\u2014so\u00a0I\u00a0shouldn\u2019t\u00a0call\u00a0it. I\u00a0find\u00a0it\u00a0particularly\u00a0satisfying\u00a0to\u00a0do\u00a0this\u00a0with\u00a0calls\u00a0to\u00a0library\u00a0functions\u2014that\u00a0way,\u00a0I\u00a0don\u2019t\neven\u00a0have\u00a0to\u00a0write\u00a0the\u00a0function\u00a0body. Mechanics\nReplace\u00a0the\u00a0inline\u00a0code\u00a0with\u00a0a\u00a0call\u00a0to\u00a0the\u00a0existing\u00a0function. Test.", "domains": ["Code Organization"], "source": "Refactoring.Improving.the.Design.of.Existing.Code.pdf", "section": "Page 251", "position": 251, "chunk_type": "semantic", "token_estimate": 254}
{"text": "The\u00a0first\u00a0seven\u00a0lines\u00a0are\u00a0declarations,\u00a0and\u00a0it\u2019s\u00a0relatively\u00a0easy\u00a0to\u00a0move\u00a0these.\u00a0For: example,\u00a0I\u00a0may\u00a0want\u00a0to\u00a0move\u00a0all\u00a0the\u00a0code\u00a0dealing\u00a0with\u00a0discounts\u00a0together,\u00a0which\u00a0would\ninvolve\u00a0moving\u00a0line\u00a07\u00a0(`let\u00a0discount`)\u00a0to\u00a0above\u00a0line\u00a010\u00a0(`discount\u00a0=\u00a0...`). Since\u00a0a\u00a0declaration\u00a0has\u00a0no\u00a0side\u00a0effects\u00a0and\u00a0refers\u00a0to\u00a0no\u00a0other\u00a0variable,\u00a0I\u00a0can\u00a0safely\u00a0move\nthis\u00a0forwards\u00a0as\u00a0far\u00a0as\u00a0the\u00a0first\u00a0line\u00a0that\u00a0references\u00a0discount\u00a0itself. This\u00a0is\u00a0also\u00a0a\ncommon\u00a0move\u2014if\u00a0I\u00a0want\u00a0to\u00a0use\u00a0Extract\u00a0Function\u00a0(106)\u00a0on\u00a0the\u00a0discount\u00a0logic,\u00a0I\u2019ll\u00a0need\nto\u00a0move\u00a0the\u00a0declaration\u00a0down\u00a0first. I\u00a0do\u00a0similar\u00a0analysis\u00a0with\u00a0any\u00a0code\u00a0that\u00a0doesn\u2019t\u00a0have\u00a0side\u00a0effects. So\u00a0I\u00a0can\u00a0take\u00a0line\u00a02\n(`const\u00a0order\u00a0=\u00a0...`)\u00a0and\u00a0move\u00a0it\u00a0down\u00a0to\u00a0above\u00a0line\u00a06\u00a0(`const\u00a0units\u00a0=\n...`)\u00a0without\u00a0trouble. In\u00a0this\u00a0case,\u00a0I\u2019m\u00a0also\u00a0helped\u00a0by\u00a0the\u00a0fact\u00a0that\u00a0the\u00a0code\u00a0I\u2019m\u00a0moving\u00a0over\u00a0doesn\u2019t\u00a0have\u00a0side\neffects\u00a0either. Indeed,\u00a0I\u00a0can\u00a0freely\u00a0rearrange\u00a0code\u00a0that\u00a0lacks\u00a0side\u00a0effects\u00a0to\u00a0my\u00a0heart\u2019s\ncontent,\u00a0which\u00a0is\u00a0one\u00a0of\u00a0the\u00a0reasons\u00a0why\u00a0wise\u00a0programmers\u00a0prefer\u00a0to\u00a0use\u00a0side\u00adeffect\u00ad\nfree\u00a0code\u00a0as\u00a0much\u00a0as\u00a0possible. There\u00a0is\u00a0a\u00a0wrinkle\u00a0here,\u00a0however.\u00a0How\u00a0do\u00a0I\u00a0know\u00a0that\u00a0line\u00a02\u00a0is\u00a0side\u00adeffect\u00adfree? To\u00a0be\nsure,\u00a0I\u2019d\u00a0need\u00a0to\u00a0look\u00a0inside\u00a0retrieveOrder()\u00a0to\u00a0ensure\u00a0there\u00a0are\u00a0no\u00a0side\u00a0effects\nthere\u00a0(and\u00a0inside\u00a0any\u00a0functions\u00a0it\u00a0calls,\u00a0and\u00a0inside\u00a0any\u00a0functions\u00a0its\u00a0functions\u00a0call,\u00a0and\nso\u00a0on). In\u00a0practice,\u00a0when\u00a0working\u00a0on\u00a0my\u00a0own\u00a0code,\u00a0I\u00a0know\u00a0that\u00a0I\u00a0generally\u00a0follow\u00a0the\nCommand\u00adQuery\u00a0Separation\u00a0[mf\u00adcqs]\u00a0principle,\u00a0so\u00a0any\u00a0function\u00a0that\u00a0returns\u00a0a\u00a0value\u00a0is\nfree\u00a0of\u00a0side\u00a0effects. But\u00a0I\u00a0can\u00a0only\u00a0be\u00a0confident\u00a0of\u00a0that\u00a0because\u00a0I\u00a0know\u00a0the\u00a0code\u00a0base\u037e\u00a0if\u00a0I\nwere\u00a0working\u00a0in\u00a0an\u00a0unknown\u00a0code\u00a0base,\u00a0I\u2019d\u00a0have\u00a0to\u00a0be\u00a0more\u00a0cautious. But\u00a0I\u00a0do\u00a0try\u00a0to\nfollow\u00a0the\u00a0Command\u00adQuery\u00a0Separation\u00a0in\u00a0my\u00a0own\u00a0code\u00a0because\u00a0it\u2019s\u00a0so\u00a0valuable\u00a0to\u00a0know\nthat\u00a0code\u00a0is\u00a0free\u00a0of\u00a0side\u00a0effects. When\u00a0sliding\u00a0code\u00a0that\u00a0has\u00a0a\u00a0side\u00a0effect,\u00a0or\u00a0sliding\u00a0over\u00a0code\u00a0with\u00a0side\u00a0effects,\u00a0I\u00a0have\u00a0to\nbe\u00a0much\u00a0more\u00a0careful. What\u00a0I\u2019m\u00a0looking\u00a0for\u00a0is\u00a0interference\u00a0between\u00a0the\u00a0two\u00a0code\nfragments. So,\u00a0let\u2019s\u00a0say\u00a0I\u00a0want\u00a0to\u00a0slide\u00a0line\u00a011\u00a0(`if\u00a0(order.isRepeat)\u00a0...`)\u00a0down\nto\u00a0the\u00a0end. I\u2019m\u00a0prevented\u00a0from\u00a0doing\u00a0that\u00a0by\u00a0line\u00a012\u00a0because\u00a0it\u00a0references\u00a0the\u00a0variable\nwhose\u00a0state\u00a0I\u2019m\u00a0changing\u00a0in\u00a0line\u00a011. Similarly,\u00a0I\u00a0can\u2019t\u00a0take\u00a0line\u00a013\n(`chargeOrder(charge)`)\u00a0and\u00a0move\u00a0it\u00a0up\u00a0because\u00a0line\u00a012\u00a0modifies\u00a0some\u00a0state\u00a0that\nline\u00a013\u00a0references.", "domains": ["Architectural Patterns and Styles", "Design Patterns"], "source": "Refactoring.Improving.the.Design.of.Existing.Code.pdf", "section": "Page 254", "position": 254, "chunk_type": "semantic", "token_estimate": 409}
{"text": "The\u00a0first\u00a0seven\u00a0lines\u00a0are\u00a0declarations,\u00a0and\u00a0it\u2019s\u00a0relatively\u00a0easy\u00a0to\u00a0move\u00a0these.\u00a0For: I\u2019m\u00a0prevented\u00a0from\u00a0doing\u00a0that\u00a0by\u00a0line\u00a012\u00a0because\u00a0it\u00a0references\u00a0the\u00a0variable\nwhose\u00a0state\u00a0I\u2019m\u00a0changing\u00a0in\u00a0line\u00a011. Similarly,\u00a0I\u00a0can\u2019t\u00a0take\u00a0line\u00a013\n(`chargeOrder(charge)`)\u00a0and\u00a0move\u00a0it\u00a0up\u00a0because\u00a0line\u00a012\u00a0modifies\u00a0some\u00a0state\u00a0that\nline\u00a013\u00a0references. However,\u00a0I\u00a0can\u00a0slide\u00a0line\u00a08\u00a0(`charge\u00a0=\u00a0baseCharge\u00a0+\u00a0...`)\nover\u00a0lines\u00a09\u201311\u00a0because\u00a0there\u00a0they\u00a0don\u2019t\u00a0modify\u00a0any\u00a0common\u00a0state. The\u00a0most\u00a0straightforward\u00a0rule\u00a0to\u00a0follow\u00a0is\u00a0that\u00a0I\u00a0can\u2019t\u00a0slide\u00a0one\u00a0fragment\u00a0of\u00a0code\u00a0over\nanother\u00a0if\u00a0any\u00a0data\u00a0that\u00a0both\u00a0fragments\u00a0refer\u00a0to\u00a0is\u00a0modified\u00a0by\u00a0either\u00a0one. But\u00a0that\u2019s\u00a0not\na\u00a0comprehensive\u00a0rule\u037e\u00a0I\u00a0can\u00a0happily\u00a0slide\u00a0either\u00a0of\u00a0the\u00a0following\u00a0two\u00a0lines\u00a0over\u00a0the\nother:\nwww.EBooksWorld.ir", "domains": ["Design Patterns"], "source": "Refactoring.Improving.the.Design.of.Existing.Code.pdf", "section": "Page 254", "position": 254, "chunk_type": "semantic", "token_estimate": 127}
{"text": "a\u00a0=\u00a0a\u00a0+\u00a010\u037e: a\u00a0=\u00a0a\u00a0+\u00a05\u037e\nBut\u00a0judging\u00a0whether\u00a0a\u00a0slide\u00a0is\u00a0safe\u00a0means\u00a0I\u00a0have\u00a0to\u00a0really\u00a0understand\u00a0the\u00a0operations\ninvolved\u00a0and\u00a0how\u00a0they\u00a0compose. Since\u00a0I\u00a0need\u00a0to\u00a0worry\u00a0so\u00a0much\u00a0about\u00a0updating\u00a0state,\u00a0I\u00a0look\u00a0to\u00a0remove\u00a0as\u00a0much\u00a0of\u00a0it\u00a0as\u00a0I\ncan. So\u00a0with\u00a0this\u00a0code,\u00a0I\u2019d\u00a0be\u00a0looking\u00a0to\u00a0apply\u00a0Split\u00a0Variable\u00a0(240)\u00a0on\u00a0charge\u00a0before\u00a0I\nindulge\u00a0in\u00a0any\u00a0sliding\u00a0around\u00a0of\u00a0that\u00a0code. Here,\u00a0the\u00a0analysis\u00a0is\u00a0relatively\u00a0simple\u00a0because\u00a0I\u2019m\u00a0mostly\u00a0just\u00a0modifying\u00a0local\u00a0variables. With\u00a0more\u00a0complex\u00a0data\u00a0structures,\u00a0it\u2019s\u00a0much\u00a0harder\u00a0to\u00a0be\u00a0sure\u00a0when\u00a0I\u00a0get\u00a0interference. So\u00a0tests\u00a0play\u00a0an\u00a0important\u00a0role:\u00a0Slide\u00a0the\u00a0fragment,\u00a0run\u00a0tests,\u00a0see\u00a0if\u00a0things\u00a0break. If\u00a0my\ntest\u00a0coverage\u00a0is\u00a0good,\u00a0I\u00a0can\u00a0feel\u00a0happy\u00a0with\u00a0the\u00a0refactoring. But\u00a0if\u00a0tests\u00a0aren\u2019t\u00a0reliable,\u00a0I\nneed\u00a0to\u00a0be\u00a0more\u00a0wary\u2014or,\u00a0more\u00a0likely,\u00a0to\u00a0improve\u00a0the\u00a0tests\u00a0for\u00a0the\u00a0code\u00a0I\u2019m\u00a0working\u00a0on. The\u00a0most\u00a0important\u00a0consequence\u00a0of\u00a0a\u00a0test\u00a0failure\u00a0after\u00a0a\u00a0slide\u00a0is\u00a0to\u00a0use\u00a0smaller\u00a0slides:\nInstead\u00a0of\u00a0sliding\u00a0over\u00a0ten\u00a0lines,\u00a0I\u2019ll\u00a0just\u00a0pick\u00a0five,\u00a0or\u00a0slide\u00a0up\u00a0to\u00a0what\u00a0I\u00a0reckon\u00a0is\u00a0a\ndangerous\u00a0line. It\u00a0may\u00a0also\u00a0mean\u00a0that\u00a0the\u00a0slide\u00a0isn\u2019t\u00a0worth\u00a0it,\u00a0and\u00a0I\u00a0need\u00a0to\u00a0work\u00a0on\nsomething\u00a0else\u00a0first. Example: Sliding with Conditionals\nI\u00a0can\u00a0also\u00a0do\u00a0slides\u00a0with\u00a0conditionals. This\u00a0will\u00a0either\u00a0involve\u00a0removing\u00a0duplicate\u00a0logic\nwhen\u00a0I\u00a0slide\u00a0out\u00a0of\u00a0a\u00a0conditional,\u00a0or\u00a0adding\u00a0duplicate\u00a0logic\u00a0when\u00a0I\u00a0slide\u00a0in. Here\u2019s\u00a0a\u00a0case\u00a0where\u00a0I\u00a0have\u00a0the\u00a0same\u00a0statements\u00a0in\u00a0both\u00a0legs\u00a0of\u00a0a\u00a0conditional:\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nlet\u00a0result\u037e\nif\u00a0(availableResources.length\u00a0===\u00a00)\u00a0{\n\u00a0\u00a0result\u00a0=\u00a0createResource()\u037e\n\u00a0\u00a0allocatedResources.push(result)\u037e\n}\u00a0else\u00a0{\n\u00a0\u00a0result\u00a0=\u00a0availableResources.pop()\u037e\n\u00a0\u00a0allocatedResources.push(result)\u037e\n}\nreturn\u00a0result\u037e\nI\u00a0can\u00a0slide\u00a0these\u00a0out\u00a0of\u00a0the\u00a0conditional,\u00a0in\u00a0which\u00a0case\u00a0they\u00a0turn\u00a0into\u00a0a\u00a0single\u00a0statement\noutside\u00a0of\u00a0the\u00a0conditional\u00a0block. www.EBooksWorld.ir", "domains": ["Design Patterns"], "source": "Refactoring.Improving.the.Design.of.Existing.Code.pdf", "section": "Page 255", "position": 255, "chunk_type": "semantic", "token_estimate": 308}
{"text": "Many\u00a0programmers\u00a0are\u00a0uncomfortable\u00a0with\u00a0this\u00a0refactoring,\u00a0as\u00a0it\u00a0forces\u00a0you\u00a0to\u00a0execute: the\u00a0loop\u00a0twice. My\u00a0reminder,\u00a0as\u00a0usual,\u00a0is\u00a0to\u00a0separate\u00a0refactoring\u00a0from\u00a0optimization\n(Refactoring\u00a0and\u00a0Performance\u00a0(64)). Once\u00a0I\u00a0have\u00a0my\u00a0code\u00a0clear,\u00a0I\u2019ll\u00a0optimize\u00a0it,\u00a0and\u00a0if\nthe\u00a0loop\u00a0traversal\u00a0is\u00a0a\u00a0bottleneck,\u00a0it\u2019s\u00a0easy\u00a0to\u00a0slam\u00a0the\u00a0loops\u00a0back\u00a0together. But\u00a0the\nactual\u00a0iteration\u00a0through\u00a0even\u00a0a\u00a0large\u00a0list\u00a0is\u00a0rarely\u00a0a\u00a0bottleneck,\u00a0and\u00a0splitting\u00a0the\u00a0loops\noften\u00a0enables\u00a0other,\u00a0more\u00a0powerful,\u00a0optimizations. Mechanics\nCopy\u00a0the\u00a0loop. Identify\u00a0and\u00a0eliminate\u00a0duplicate\u00a0side\u00a0effects. Test. When\u00a0done,\u00a0consider\u00a0Extract\u00a0Function\u00a0(106)\u00a0on\u00a0each\u00a0loop. Example\nI\u2019ll\u00a0start\u00a0with\u00a0a\u00a0little\u00a0bit\u00a0of\u00a0code\u00a0that\u00a0calculates\u00a0the\u00a0total\u00a0salary\u00a0and\u00a0youngest\u00a0age. Click\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nlet\u00a0youngest\u00a0=\u00a0people[0]\u00a0? people[0].age\u00a0:\u00a0Infinity\u037e\nlet\u00a0totalSalary\u00a0=\u00a00\u037e\nfor\u00a0(const\u00a0p\u00a0of\u00a0people)\u00a0{\n\u00a0\u00a0if\u00a0(p.age\u00a0<\u00a0youngest)\u00a0youngest\u00a0=\u00a0p.age\u037e\n\u00a0\u00a0totalSalary\u00a0+=\u00a0p.salary\u037e\n}\nreturn\u00a0`youngestAge:\u00a0${youngest},\u00a0totalSalary:\u00a0${totalSalary}`\u037e\nIt\u2019s\u00a0a\u00a0very\u00a0simple\u00a0loop,\u00a0but\u00a0it\u2019s\u00a0doing\u00a0two\u00a0different\u00a0calculations. To\u00a0split\u00a0them,\u00a0I\u00a0begin\nwith\u00a0just\u00a0copying\u00a0the\u00a0loop. Click\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nlet\u00a0youngest\u00a0=\u00a0people[0]\u00a0? people[0].age\u00a0:\u00a0Infinity\u037e\nlet\u00a0totalSalary\u00a0=\u00a00\u037e\nfor\u00a0(const\u00a0p\u00a0of\u00a0people)\u00a0{\n\u00a0\u00a0if\u00a0(p.age\u00a0<\u00a0youngest)\u00a0youngest\u00a0=\u00a0p.age\u037e\n\u00a0\u00a0totalSalary\u00a0+=\u00a0p.salary\u037e\n}\nfor\u00a0(const\u00a0p\u00a0of\u00a0people)\u00a0{\nwww.EBooksWorld.ir", "domains": ["Software Quality Attributes"], "source": "Refactoring.Improving.the.Design.of.Existing.Code.pdf", "section": "Page 258", "position": 258, "chunk_type": "semantic", "token_estimate": 218}
{"text": "class\u00a0Organization\u2026: Click\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nclass\u00a0Organization\u00a0{\n\u00a0\u00a0constructor(data)\u00a0{\n\u00a0\u00a0\u00a0\u00a0this._title\u00a0=\u00a0data.title\u037e\n\u00a0\u00a0\u00a0\u00a0this._country\u00a0=\u00a0data.country\u037e\n\u00a0\u00a0}\n\u00a0\u00a0get\u00a0name()\u00a0\u00a0\u00a0\u00a0{return\u00a0this._title\u037e}\n\u00a0\u00a0set\u00a0name(aString)\u00a0{this._title\u00a0=\u00a0aString\u037e}\n\u00a0\u00a0get\u00a0country()\u00a0\u00a0\u00a0\u00a0{return\u00a0this._country\u037e}\n\u00a0\u00a0set\u00a0country(aCountryCode)\u00a0{this._country\u00a0=\u00a0aCountryCode\u037e}\n}\nNow\u00a0that\u00a0the\u00a0constructor\u00a0and\u00a0data\u00a0use\u00a0the\u00a0new\u00a0name,\u00a0I\u00a0can\u00a0change\u00a0the\u00a0accessors,\u00a0which\nis\u00a0as\u00a0simple\u00a0as\u00a0applying\u00a0Rename\u00a0Function\u00a0(124)\u00a0to\u00a0each\u00a0one. class\u00a0Organization\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nclass\u00a0Organization\u00a0{\n\u00a0\u00a0constructor(data)\u00a0{\n\u00a0\u00a0\u00a0\u00a0this._title\u00a0=\u00a0data.title\u037e\n\u00a0\u00a0\u00a0\u00a0this._country\u00a0=\u00a0data.country\u037e\n\u00a0\u00a0}\n\u00a0\u00a0get\u00a0title()\u00a0\u00a0\u00a0\u00a0{return\u00a0this._title\u037e}\n\u00a0\u00a0set\u00a0title(aString)\u00a0{this._title\u00a0=\u00a0aString\u037e}\n\u00a0\u00a0get\u00a0country()\u00a0\u00a0\u00a0\u00a0{return\u00a0this._country\u037e}\n\u00a0\u00a0set\u00a0country(aCountryCode)\u00a0{this._country\u00a0=\u00a0aCountryCode\u037e}\n}\nI\u2019ve\u00a0shown\u00a0this\u00a0process\u00a0in\u00a0its\u00a0most\u00a0heavyweight\u00a0form\u00a0needed\u00a0for\u00a0a\u00a0widely\u00a0used\u00a0data\nstructure. If\u00a0it\u2019s\u00a0being\u00a0used\u00a0only\u00a0locally,\u00a0as\u00a0in\u00a0a\u00a0single\u00a0function,\u00a0I\u00a0can\u00a0probably\u00a0just\nrename\u00a0the\u00a0various\u00a0properties\u00a0in\u00a0one\u00a0go\u00a0without\u00a0doing\u00a0encapsulation. It\u2019s\u00a0a\u00a0matter\u00a0of\njudgment\u00a0when\u00a0to\u00a0apply\u00a0to\u00a0the\u00a0full\u00a0mechanics\u00a0here\u2014but,\u00a0as\u00a0usual\u00a0with\u00a0refactoring,\u00a0if\nmy\u00a0tests\u00a0break,\u00a0that\u2019s\u00a0a\u00a0sign\u00a0I\u00a0need\u00a0to\u00a0use\u00a0the\u00a0more\u00a0gradual\u00a0procedure. Some\u00a0languages\u00a0allow\u00a0me\u00a0to\u00a0make\u00a0a\u00a0data\u00a0structure\u00a0immutable. In\u00a0this\u00a0case,\u00a0rather\u00a0than\nencapsulating\u00a0it,\u00a0I\u00a0can\u00a0copy\u00a0the\u00a0value\u00a0to\u00a0the\u00a0new\u00a0name,\u00a0gradually\u00a0change\u00a0the\u00a0users,\u00a0then\nremove\u00a0the\u00a0old\u00a0name. Duplicating\u00a0data\u00a0is\u00a0a\u00a0recipe\u00a0for\u00a0disaster\u00a0with\u00a0mutable\u00a0data\nstructures\u037e\u00a0removing\u00a0such\u00a0disasters\u00a0is\u00a0why\u00a0immutable\u00a0data\u00a0is\u00a0so\u00a0popular.", "domains": ["Code Organization"], "source": "Refactoring.Improving.the.Design.of.Existing.Code.pdf", "section": "Page 276", "position": 276, "chunk_type": "semantic", "token_estimate": 234}
{"text": "inverse\u00a0of:\u00a0Change\u00a0Reference\u00a0to\u00a0Value\u00a0(252): Motivation\nA\u00a0data\u00a0structure\u00a0may\u00a0have\u00a0several\u00a0records\u00a0linked\u00a0to\u00a0the\u00a0same\u00a0logical\u00a0data\u00a0structure. I\nmight\u00a0read\u00a0in\u00a0a\u00a0list\u00a0of\u00a0orders,\u00a0some\u00a0of\u00a0which\u00a0are\u00a0for\u00a0the\u00a0same\u00a0customer. When\u00a0I\u00a0have\nsharing\u00a0like\u00a0this,\u00a0I\u00a0can\u00a0represent\u00a0it\u00a0by\u00a0treating\u00a0the\u00a0customer\u00a0either\u00a0as\u00a0a\u00a0value\u00a0or\u00a0as\u00a0a\nreference. With\u00a0a\u00a0value,\u00a0the\u00a0customer\u00a0data\u00a0is\u00a0copied\u00a0into\u00a0each\u00a0order\u037e\u00a0with\u00a0a\u00a0reference,\nthere\u00a0is\u00a0only\u00a0one\u00a0data\u00a0structure\u00a0that\u00a0multiple\u00a0orders\u00a0link\u00a0to. If\u00a0the\u00a0customer\u00a0never\u00a0needs\u00a0to\u00a0be\u00a0updated,\u00a0then\u00a0both\u00a0approaches\u00a0are\u00a0reasonable. It\u00a0is,\nperhaps,\u00a0a\u00a0bit\u00a0confusing\u00a0to\u00a0have\u00a0multiple\u00a0copies\u00a0of\u00a0the\u00a0same\u00a0data,\u00a0but\u00a0it\u2019s\u00a0common\nenough\u00a0to\u00a0not\u00a0be\u00a0a\u00a0problem. In\u00a0some\u00a0cases,\u00a0there\u00a0may\u00a0be\u00a0issues\u00a0with\u00a0memory\u00a0due\u00a0to\nmultiple\u00a0copies\u2014but,\u00a0like\u00a0any\u00a0performance\u00a0issue,\u00a0that\u2019s\u00a0relatively\u00a0rare. The\u00a0biggest\u00a0difficulty\u00a0in\u00a0having\u00a0physical\u00a0copies\u00a0of\u00a0the\u00a0same\u00a0logical\u00a0data\u00a0occurs\u00a0when\u00a0I\nwww.EBooksWorld.ir", "domains": ["Software Quality Attributes"], "source": "Refactoring.Improving.the.Design.of.Existing.Code.pdf", "section": "Page 285", "position": 285, "chunk_type": "semantic", "token_estimate": 157}
{"text": "need\u00a0to\u00a0update\u00a0the\u00a0shared\u00a0data.\u00a0I\u00a0then\u00a0have\u00a0to\u00a0find\u00a0all\u00a0the\u00a0copies\u00a0and\u00a0update\u00a0them\u00a0all.\u00a0If: I\u00a0miss\u00a0one,\u00a0I\u2019ll\u00a0get\u00a0a\u00a0troubling\u00a0inconsistency\u00a0in\u00a0my\u00a0data. In\u00a0this\u00a0case,\u00a0it\u2019s\u00a0often\nworthwhile\u00a0to\u00a0change\u00a0the\u00a0copied\u00a0data\u00a0into\u00a0a\u00a0single\u00a0reference. That\u00a0way,\u00a0any\u00a0change\u00a0is\nvisible\u00a0to\u00a0all\u00a0the\u00a0customer\u2019s\u00a0orders. Changing\u00a0a\u00a0value\u00a0to\u00a0a\u00a0reference\u00a0results\u00a0in\u00a0only\u00a0one\u00a0object\u00a0being\u00a0present\u00a0for\u00a0an\u00a0entity,\nand\u00a0it\u00a0usually\u00a0means\u00a0I\u00a0need\u00a0some\u00a0kind\u00a0of\u00a0repository\u00a0where\u00a0I\u00a0can\u00a0access\u00a0these\u00a0objects. I\nthen\u00a0only\u00a0create\u00a0the\u00a0object\u00a0for\u00a0an\u00a0entity\u00a0once,\u00a0and\u00a0everywhere\u00a0else\u00a0I\u00a0retrieve\u00a0it\u00a0from\u00a0the\nrepository. Mechanics\nCreate\u00a0a\u00a0repository\u00a0for\u00a0instances\u00a0of\u00a0the\u00a0related\u00a0object\u00a0(if\u00a0one\u00a0isn\u2019t\u00a0already\u00a0present). Ensure\u00a0the\u00a0constructor\u00a0has\u00a0a\u00a0way\u00a0of\u00a0looking\u00a0up\u00a0the\u00a0correct\u00a0instance\u00a0of\u00a0the\u00a0related\nobject. Change\u00a0the\u00a0constructors\u00a0for\u00a0the\u00a0host\u00a0object\u00a0to\u00a0use\u00a0the\u00a0repository\u00a0to\u00a0obtain\u00a0the\nrelated\u00a0object.\u00a0Test\u00a0after\u00a0each\u00a0change. Example\nI\u2019ll\u00a0begin\u00a0with\u00a0a\u00a0class\u00a0that\u00a0represents\u00a0orders,\u00a0which\u00a0I\u00a0might\u00a0create\u00a0from\u00a0an\u00a0incoming\nJSON\u00a0document. Part\u00a0of\u00a0the\u00a0order\u00a0data\u00a0is\u00a0a\u00a0customer\u00a0ID\u00a0from\u00a0which\u00a0I\u2019m\u00a0creating\u00a0a\ncustomer\u00a0object. class\u00a0Order\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nconstructor(data)\u00a0{\n\u00a0\u00a0this._number\u00a0=\u00a0data.number\u037e\n\u00a0\u00a0this._customer\u00a0=\u00a0new\u00a0Customer(data.customer)\u037e\n\u00a0\u00a0//\u00a0load\u00a0other\u00a0data\n}\nget\u00a0customer()\u00a0{return\u00a0this._customer\u037e}\nclass\u00a0Customer\u2026\nconstructor(id)\u00a0{\n\u00a0\u00a0this._id\u00a0=\u00a0id\u037e\n}\nget\u00a0id()\u00a0{return\u00a0this._id\u037e}\nwww.EBooksWorld.ir", "domains": ["Domain-Driven Design"], "source": "Refactoring.Improving.the.Design.of.Existing.Code.pdf", "section": "Page 286", "position": 286, "chunk_type": "semantic", "token_estimate": 231}
{"text": "The\u00a0customer\u00a0object\u00a0I\u00a0create\u00a0this\u00a0way\u00a0is\u00a0a\u00a0value.\u00a0If\u00a0I\u00a0have\u00a0five\u00a0orders\u00a0that\u00a0refer\u00a0to\u00a0the: customer\u00a0ID\u00a0of\u00a0123,\u00a0I\u2019ll\u00a0have\u00a0five\u00a0separate\u00a0customer\u00a0objects. Any\u00a0change\u00a0I\u00a0make\u00a0to\u00a0one\nof\u00a0them\u00a0will\u00a0not\u00a0be\u00a0reflected\u00a0in\u00a0the\u00a0others. Should\u00a0I\u00a0want\u00a0to\u00a0enrich\u00a0the\u00a0customer\u00a0objects,\nperhaps\u00a0by\u00a0gathering\u00a0data\u00a0from\u00a0a\u00a0customer\u00a0service,\u00a0I\u2019d\u00a0have\u00a0to\u00a0update\u00a0all\u00a0five\u00a0customers\nwith\u00a0the\u00a0same\u00a0data. Having\u00a0duplicate\u00a0objects\u00a0like\u00a0this\u00a0always\u00a0makes\u00a0me\u00a0nervous\u2014it\u2019s\nconfusing\u00a0to\u00a0have\u00a0multiple\u00a0objects\u00a0representing\u00a0the\u00a0same\u00a0entity,\u00a0such\u00a0as\u00a0a\u00a0customer. This\u00a0problem\u00a0is\u00a0particularly\u00a0awkward\u00a0if\u00a0the\u00a0customer\u00a0object\u00a0is\u00a0mutable,\u00a0which\u00a0can\u00a0lead\nto\u00a0inconsistencies\u00a0between\u00a0the\u00a0customer\u00a0objects. If\u00a0I\u00a0want\u00a0to\u00a0use\u00a0the\u00a0same\u00a0customer\u00a0object\u00a0each\u00a0time,\u00a0I\u2019ll\u00a0need\u00a0a\u00a0place\u00a0to\u00a0store\u00a0it. Exactly\nwhere\u00a0to\u00a0store\u00a0entities\u00a0like\u00a0this\u00a0will\u00a0vary\u00a0from\u00a0application\u00a0to\u00a0application,\u00a0but\u00a0for\u00a0a\nsimple\u00a0case\u00a0I\u00a0like\u00a0to\u00a0use\u00a0a\u00a0repository\u00a0object\u00a0[mf\u00adrepos]. Click\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nlet\u00a0_repositoryData\u037e\nexport\u00a0function\u00a0initialize()\u00a0{\n\u00a0\u00a0_repositoryData\u00a0=\u00a0{}\u037e\n\u00a0\u00a0_repositoryData.customers\u00a0=\u00a0new\u00a0Map()\u037e\n}\nexport\u00a0function\u00a0registerCustomer(id)\u00a0{\n\u00a0\u00a0if\u00a0(! _repositoryData.customers.has(id))\n\u00a0\u00a0\u00a0\u00a0_repositoryData.customers.set(id,\u00a0new\u00a0Customer(id))\u037e\n\u00a0\u00a0return\u00a0findCustomer(id)\u037e\n}\nexport\u00a0function\u00a0findCustomer(id)\u00a0{\n\u00a0\u00a0return\u00a0_repositoryData.customers.get(id)\u037e\n}\nThe\u00a0repository\u00a0allows\u00a0me\u00a0to\u00a0register\u00a0customer\u00a0objects\u00a0with\u00a0an\u00a0ID\u00a0and\u00a0ensures\u00a0I\u00a0only\ncreate\u00a0one\u00a0customer\u00a0object\u00a0with\u00a0the\u00a0same\u00a0ID. With\u00a0this\u00a0in\u00a0place,\u00a0I\u00a0can\u00a0change\u00a0the\norder\u2019s\u00a0constructor\u00a0to\u00a0use\u00a0it. Often,\u00a0when\u00a0doing\u00a0this\u00a0refactoring,\u00a0the\u00a0repository\u00a0already\u00a0exists,\u00a0so\u00a0I\u00a0can\u00a0just\u00a0use\u00a0it. The\u00a0next\u00a0step\u00a0is\u00a0to\u00a0figure\u00a0out\u00a0how\u00a0the\u00a0constructor\u00a0for\u00a0the\u00a0order\u00a0can\u00a0obtain\u00a0the\u00a0correct\ncustomer\u00a0object. In\u00a0this\u00a0case\u00a0it\u2019s\u00a0easy,\u00a0since\u00a0the\u00a0customer\u2019s\u00a0ID\u00a0is\u00a0present\u00a0in\u00a0the\u00a0input\ndata\u00a0stream. class\u00a0Order\u2026\nwww.EBooksWorld.ir", "domains": ["Domain-Driven Design"], "source": "Refactoring.Improving.the.Design.of.Existing.Code.pdf", "section": "Page 287", "position": 287, "chunk_type": "semantic", "token_estimate": 286}
{"text": "Click\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image: constructor(data)\u00a0{\n\u00a0\u00a0this._number\u00a0=\u00a0data.number\u037e\n\u00a0\u00a0this._customer\u00a0=\u00a0registerCustomer(data.customer)\u037e\n\u00a0\u00a0//\u00a0load\u00a0other\u00a0data\n}\nget\u00a0customer()\u00a0{return\u00a0this._customer\u037e}\nNow,\u00a0any\u00a0changes\u00a0I\u00a0make\u00a0to\u00a0the\u00a0customer\u00a0of\u00a0one\u00a0order\u00a0will\u00a0be\u00a0synchronized\u00a0across\u00a0all\nthe\u00a0orders\u00a0sharing\u00a0the\u00a0same\u00a0customer. For\u00a0this\u00a0example,\u00a0I\u00a0created\u00a0a\u00a0new\u00a0customer\u00a0object\u00a0with\u00a0the\u00a0first\u00a0order\u00a0that\u00a0referenced\u00a0it. Another\u00a0common\u00a0approach\u00a0is\u00a0to\u00a0get\u00a0a\u00a0list\u00a0of\u00a0customers,\u00a0populate\u00a0the\u00a0repository\u00a0with\nthem,\u00a0and\u00a0then\u00a0link\u00a0to\u00a0them\u00a0as\u00a0I\u00a0read\u00a0the\u00a0orders. In\u00a0that\u00a0case,\u00a0an\u00a0order\u00a0that\u00a0contains\u00a0a\ncustomer\u00a0ID\u00a0not\u00a0in\u00a0the\u00a0repository\u00a0would\u00a0indicate\u00a0an\u00a0error. One\u00a0problem\u00a0with\u00a0this\u00a0code\u00a0is\u00a0that\u00a0the\u00a0constructor\u00a0body\u00a0is\u00a0coupled\u00a0to\u00a0the\u00a0global\nrepository. Globals\u00a0should\u00a0be\u00a0treated\u00a0with\u00a0care\u2014like\u00a0a\u00a0powerful\u00a0drug,\u00a0they\u00a0can\u00a0be\nbeneficial\u00a0in\u00a0small\u00a0doses\u00a0but\u00a0a\u00a0poison\u00a0if\u00a0used\u00a0too\u00a0much. If\u00a0I\u2019m\u00a0concerned\u00a0about\u00a0it,\u00a0I\u00a0can\npass\u00a0the\u00a0repository\u00a0as\u00a0a\u00a0parameter\u00a0to\u00a0the\u00a0constructor. www.EBooksWorld.ir", "domains": ["Domain-Driven Design"], "source": "Refactoring.Improving.the.Design.of.Existing.Code.pdf", "section": "Page 288", "position": 288, "chunk_type": "semantic", "token_estimate": 160}
{"text": "Chapter 10: Simplifying Conditional Logic\nMuch\u00a0of\u00a0the\u00a0power\u00a0of\u00a0programs\u00a0comes\u00a0from\u00a0their\u00a0ability\u00a0to\u00a0implement\u00a0conditional\u00a0logic\n\u2014but,\u00a0sadly,\u00a0much\u00a0of\u00a0the\u00a0complexity\u00a0of\u00a0programs\u00a0lies\u00a0in\u00a0these\u00a0conditionals. I\u00a0often\u00a0use\nrefactoring\u00a0to\u00a0make\u00a0conditional\u00a0sections\u00a0easier\u00a0to\u00a0understand. I\u00a0regularly\u00a0apply\nDecompose\u00a0Conditional\u00a0(260)\u00a0to\u00a0complicated\u00a0conditionals,\u00a0and\u00a0I\u00a0use\u00a0Consolidate\nConditional\u00a0Expression\u00a0(263)\u00a0to\u00a0make\u00a0logical\u00a0combinations\u00a0clearer. I\u00a0use\u00a0Replace\nNested\u00a0Conditional\u00a0with\u00a0Guard\u00a0Clauses\u00a0(266)\u00a0to\u00a0clarify\u00a0cases\u00a0where\u00a0I\u00a0want\u00a0to\u00a0run\u00a0some\npre\u00adchecks\u00a0before\u00a0my\u00a0main\u00a0processing. If\u00a0I\u00a0see\u00a0several\u00a0conditions\u00a0using\u00a0the\u00a0same\nswitching\u00a0logic,\u00a0it\u2019s\u00a0a\u00a0good\u00a0time\u00a0to\u00a0pull\u00a0Replace\u00a0Conditional\u00a0with\u00a0Polymorphism\u00a0(272)\nout\u00a0the\u00a0box. A\u00a0lot\u00a0of\u00a0conditionals\u00a0are\u00a0used\u00a0to\u00a0handle\u00a0special\u00a0cases,\u00a0such\u00a0as\u00a0nulls\u037e\u00a0if\u00a0that\u00a0logic\u00a0is\nmostly\u00a0the\u00a0same,\u00a0then\u00a0Introduce\u00a0Special\u00a0Case\u00a0(289)\u00a0(often\u00a0referred\u00a0to\u00a0as\u00a0Introduce\u00a0Null\nObject\u00a0(289))\u00a0can\u00a0remove\u00a0a\u00a0lot\u00a0of\u00a0duplicate\u00a0code. And,\u00a0although\u00a0I\u00a0like\u00a0to\u00a0remove\nconditions\u00a0a\u00a0lot,\u00a0if\u00a0I\u00a0want\u00a0to\u00a0communicate\u00a0(and\u00a0check)\u00a0a\u00a0program\u2019s\u00a0state,\u00a0I\u00a0find\nIntroduce\u00a0Assertion\u00a0(302)\u00a0a\u00a0worthwhile\u00a0addition.", "domains": ["Design Patterns", "Design Principles"], "source": "Refactoring.Improving.the.Design.of.Existing.Code.pdf", "section": "Page 289", "position": 289, "chunk_type": "semantic", "token_estimate": 177}
{"text": "polymorphism\u00a0to\u00a0bring\u00a0out\u00a0the\u00a0type\u00adspecific\u00a0behavior.: Another\u00a0situation\u00a0is\u00a0where\u00a0I\u00a0can\u00a0think\u00a0of\u00a0the\u00a0logic\u00a0as\u00a0a\u00a0base\u00a0case\u00a0with\u00a0variants. The\u00a0base\ncase\u00a0may\u00a0be\u00a0the\u00a0most\u00a0common\u00a0or\u00a0most\u00a0straightforward. I\u00a0can\u00a0put\u00a0this\u00a0logic\u00a0into\u00a0a\nsuperclass\u00a0which\u00a0allows\u00a0me\u00a0to\u00a0reason\u00a0about\u00a0it\u00a0without\u00a0having\u00a0to\u00a0worry\u00a0about\u00a0the\nvariants. I\u00a0then\u00a0put\u00a0each\u00a0variant\u00a0case\u00a0into\u00a0a\u00a0subclass,\u00a0which\u00a0I\u00a0express\u00a0with\u00a0code\u00a0that\nemphasizes\u00a0its\u00a0difference\u00a0from\u00a0the\u00a0base\u00a0case. Polymorphism\u00a0is\u00a0one\u00a0of\u00a0the\u00a0key\u00a0features\u00a0of\u00a0object\u00adoriented\u00a0programming\u2014and,\u00a0like\u00a0any\nuseful\u00a0feature,\u00a0it\u2019s\u00a0prone\u00a0to\u00a0overuse. I\u2019ve\u00a0come\u00a0across\u00a0people\u00a0who\u00a0argue\u00a0that\u00a0all\nexamples\u00a0of\u00a0conditional\u00a0logic\u00a0should\u00a0be\u00a0replaced\u00a0with\u00a0polymorphism. I\u00a0don\u2019t\u00a0agree\u00a0with\nthat\u00a0view. Most\u00a0of\u00a0my\u00a0conditional\u00a0logic\u00a0uses\u00a0basic\u00a0conditional\u00a0statements\u2014if/else\u00a0and\nswitch/case. But\u00a0when\u00a0I\u00a0see\u00a0complex\u00a0conditional\u00a0logic\u00a0that\u00a0can\u00a0be\u00a0improved\u00a0as\ndiscussed\u00a0above,\u00a0I\u00a0find\u00a0polymorphism\u00a0a\u00a0powerful\u00a0tool. Mechanics\nIf\u00a0classes\u00a0do\u00a0not\u00a0exist\u00a0for\u00a0polymorphic\u00a0behavior,\u00a0create\u00a0them\u00a0together\u00a0with\u00a0a\u00a0factory\nfunction\u00a0to\u00a0return\u00a0the\u00a0correct\u00a0instance. Use\u00a0the\u00a0factory\u00a0function\u00a0in\u00a0calling\u00a0code. Move\u00a0the\u00a0conditional\u00a0function\u00a0to\u00a0the\u00a0superclass. If\u00a0the\u00a0conditional\u00a0logic\u00a0is\u00a0not\u00a0a\u00a0self\u00adcontained\u00a0function,\u00a0use\u00a0Extract\u00a0Function\u00a0(106)\nto\u00a0make\u00a0it\u00a0so. Pick\u00a0one\u00a0of\u00a0the\u00a0subclasses. Create\u00a0a\u00a0subclass\u00a0method\u00a0that\u00a0overrides\u00a0the\u00a0conditional\nstatement\u00a0method. Copy\u00a0the\u00a0body\u00a0of\u00a0that\u00a0leg\u00a0of\u00a0the\u00a0conditional\u00a0statement\u00a0into\u00a0the\nsubclass\u00a0method\u00a0and\u00a0adjust\u00a0it\u00a0to\u00a0fit. Repeat\u00a0for\u00a0each\u00a0leg\u00a0of\u00a0the\u00a0conditional. Leave\u00a0a\u00a0default\u00a0case\u00a0for\u00a0the\u00a0superclass\u00a0method. Or,\u00a0if\u00a0superclass\u00a0should\u00a0be\u00a0abstract,\ndeclare\u00a0that\u00a0method\u00a0as\u00a0abstract\u00a0or\u00a0throw\u00a0an\u00a0error\u00a0to\u00a0show\u00a0it\u00a0should\u00a0be\u00a0the\nresponsibility\u00a0of\u00a0a\u00a0subclass. Example\nMy\u00a0friend\u00a0has\u00a0a\u00a0collection\u00a0of\u00a0birds\u00a0and\u00a0wants\u00a0to\u00a0know\u00a0how\u00a0fast\u00a0they\u00a0can\u00a0fly\u00a0and\u00a0what\nthey\u00a0have\u00a0for\u00a0plumage. So\u00a0we\u00a0have\u00a0a\u00a0couple\u00a0of\u00a0small\u00a0programs\u00a0to\u00a0determine\u00a0the\ninformation. www.EBooksWorld.ir", "domains": ["Design Patterns", "Domain-Driven Design"], "source": "Refactoring.Improving.the.Design.of.Existing.Code.pdf", "section": "Page 303", "position": 303, "chunk_type": "semantic", "token_estimate": 312}
{"text": "}: class\u00a0Bird\u00a0{\n\u00a0\u00a0constructor(birdObject)\u00a0{\n\u00a0\u00a0\u00a0\u00a0Object.assign(this,\u00a0birdObject)\u037e\n\u00a0\u00a0}\n\u00a0\u00a0get\u00a0plumage()\u00a0{\n\u00a0\u00a0\u00a0\u00a0switch\u00a0(this.type)\u00a0{\n\u00a0\u00a0\u00a0\u00a0case\u00a0'EuropeanSwallow':\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0return\u00a0\"average\"\u037e\n\u00a0\u00a0\u00a0\u00a0case\u00a0'AfricanSwallow':\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0return\u00a0(this.numberOfCoconuts\u00a0>\u00a02)\u00a0? \"tired\"\u00a0:\u00a0\"average\"\u037e\n\u00a0\u00a0\u00a0\u00a0case\u00a0'NorwegianBlueParrot':\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0return\u00a0(this.voltage\u00a0>\u00a0100)\u00a0? \"scorched\"\u00a0:\u00a0\"beautiful\"\u037e\n\u00a0\u00a0\u00a0\u00a0default:\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0return\u00a0\"unknown\"\u037e\n\u00a0\u00a0\u00a0\u00a0}\n\u00a0\u00a0}\n\u00a0\u00a0get\u00a0airSpeedVelocity()\u00a0{\n\u00a0\u00a0\u00a0\u00a0switch\u00a0(this.type)\u00a0{\n\u00a0\u00a0\u00a0\u00a0case\u00a0'EuropeanSwallow':\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0return\u00a035\u037e\n\u00a0\u00a0\u00a0\u00a0case\u00a0'AfricanSwallow':\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0return\u00a040\u00a0\u00ad\u00a02\u00a0*\u00a0this.numberOfCoconuts\u037e\n\u00a0\u00a0\u00a0\u00a0case\u00a0'NorwegianBlueParrot':\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0return\u00a0(this.isNailed)\u00a0? 0\u00a0:\u00a010\u00a0+\u00a0this.voltage\u00a0/\u00a010\u037e\n\u00a0\u00a0\u00a0\u00a0default:\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0return\u00a0null\u037e\n\u00a0\u00a0\u00a0\u00a0}\n\u00a0\u00a0}\n}\nI\u00a0now\u00a0add\u00a0subclasses\u00a0for\u00a0each\u00a0kind\u00a0of\u00a0bird,\u00a0together\u00a0with\u00a0a\u00a0factory\u00a0function\u00a0to\ninstantiate\u00a0the\u00a0appropriate\u00a0subclass. Click\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0plumage(bird)\u00a0{\n\u00a0\u00a0return\u00a0createBird(bird).plumage\u037e\n}\nfunction\u00a0airSpeedVelocity(bird)\u00a0{\n\u00a0\u00a0return\u00a0createBird(bird).airSpeedVelocity\u037e\n}\n\u00a0\u00a0function\u00a0createBird(bird)\u00a0{\n\u00a0\u00a0\u00a0\u00a0switch\u00a0(bird.type)\u00a0{\n\u00a0\u00a0\u00a0\u00a0case\u00a0'EuropeanSwallow':\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0return\u00a0new\u00a0EuropeanSwallow(bird)\u037e\n\u00a0\u00a0\u00a0\u00a0case\u00a0'AfricanSwallow':\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0return\u00a0new\u00a0AfricanSwallow(bird)\u037e\nwww.EBooksWorld.ir", "domains": ["Design Patterns", "Domain-Driven Design"], "source": "Refactoring.Improving.the.Design.of.Existing.Code.pdf", "section": "Page 305", "position": 305, "chunk_type": "semantic", "token_estimate": 134}
{"text": "I\u00a0then\u00a0create\u00a0a\u00a0factory\u00a0function\u00a0to\u00a0return\u00a0the\u00a0variant\u00a0class\u00a0when\u00a0needed.: Click\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0createRating(voyage,\u00a0history)\u00a0{\n\u00a0\u00a0if\u00a0(voyage.zone\u00a0===\u00a0\"china\"\u00a0&&\u00a0history.some(v\u00a0=>\u00a0\"china\"\u00a0===\u00a0v.zone))\n\u00a0\u00a0\u00a0\u00a0return\u00a0new\u00a0ExperiencedChinaRating(voyage,\u00a0history)\u037e\n\u00a0\u00a0else\u00a0return\u00a0new\u00a0Rating(voyage,\u00a0history)\u037e\n}\nI\u00a0need\u00a0to\u00a0modify\u00a0any\u00a0callers\u00a0to\u00a0use\u00a0the\u00a0factory\u00a0function\u00a0instead\u00a0of\u00a0directly\u00a0invoking\u00a0the\nconstructor,\u00a0which\u00a0in\u00a0this\u00a0case\u00a0is\u00a0just\u00a0the\u00a0rating\u00a0function. Click\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0rating(voyage,\u00a0history)\u00a0{\n\u00a0\u00a0return\u00a0createRating(voyage,\u00a0history).value\u037e\n}\nThere\u00a0are\u00a0two\u00a0bits\u00a0of\u00a0behavior\u00a0I\u00a0need\u00a0to\u00a0move\u00a0into\u00a0a\u00a0subclass. I\u00a0begin\u00a0with\u00a0the\u00a0logic\u00a0in\ncaptainHistoryRisk:\nclass\u00a0Rating\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nget\u00a0captainHistoryRisk()\u00a0{\n\u00a0\u00a0let\u00a0result\u00a0=\u00a01\u037e\n\u00a0\u00a0if\u00a0(this.history.length\u00a0<\u00a05)\u00a0result\u00a0+=\u00a04\u037e\n\u00a0\u00a0result\u00a0+=\u00a0this.history.filter(v\u00a0=>\u00a0v.profit\u00a0<\u00a00).length\u037e\n\u00a0\u00a0if\u00a0(this.voyage.zone\u00a0===\u00a0\"china\"\u00a0&&\u00a0this.hasChinaHistory)\u00a0result\u00a0\u00ad=\u00a02\u037e\n\u00a0\u00a0return\u00a0Math.max(result,\u00a00)\u037e\n}\nI\u00a0write\u00a0the\u00a0overriding\u00a0method\u00a0in\u00a0the\u00a0subclass:\nclass\u00a0ExperiencedChinaRating\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nget\u00a0captainHistoryRisk()\u00a0{\nwww.EBooksWorld.ir", "domains": ["Design Patterns", "Domain-Driven Design"], "source": "Refactoring.Improving.the.Design.of.Existing.Code.pdf", "section": "Page 313", "position": 313, "chunk_type": "semantic", "token_estimate": 165}
{"text": "may\u00a0require\u00a0that\u00a0at\u00a0least\u00a0one\u00a0of\u00a0a\u00a0group\u00a0of\u00a0fields\u00a0has\u00a0a\u00a0value\u00a0in\u00a0it.: Such\u00a0assumptions\u00a0are\u00a0often\u00a0not\u00a0stated\u00a0but\u00a0can\u00a0only\u00a0be\u00a0deduced\u00a0by\u00a0looking\u00a0through\u00a0an\nalgorithm.\u00a0Sometimes,\u00a0the\u00a0assumptions\u00a0are\u00a0stated\u00a0with\u00a0a\u00a0comment. A\u00a0better\u00a0technique\nis\u00a0to\u00a0make\u00a0the\u00a0assumption\u00a0explicit\u00a0by\u00a0writing\u00a0an\u00a0assertion. An\u00a0assertion\u00a0is\u00a0a\u00a0conditional\u00a0statement\u00a0that\u00a0is\u00a0assumed\u00a0to\u00a0be\u00a0always\u00a0true. Failure\u00a0of\u00a0an\nassertion\u00a0indicates\u00a0a\u00a0programmer\u00a0error. Assertion\u00a0failures\u00a0should\u00a0never\u00a0be\u00a0checked\u00a0by\nother\u00a0parts\u00a0of\u00a0the\u00a0system. Assertions\u00a0should\u00a0be\u00a0written\u00a0so\u00a0that\u00a0the\u00a0program\u00a0functions\nequally\u00a0correctly\u00a0if\u00a0they\u00a0are\u00a0all\u00a0removed\u037e\u00a0indeed,\u00a0some\u00a0languages\u00a0provide\u00a0assertions\nthat\u00a0can\u00a0be\u00a0disabled\u00a0by\u00a0a\u00a0compile\u00adtime\u00a0switch. I\u00a0often\u00a0see\u00a0people\u00a0encourage\u00a0using\u00a0assertions\u00a0in\u00a0order\u00a0to\u00a0find\u00a0errors. While\u00a0this\u00a0is\ncertainly\u00a0a\u00a0Good\u00a0Thing,\u00a0it\u2019s\u00a0not\u00a0the\u00a0only\u00a0reason\u00a0to\u00a0use\u00a0them. I\u00a0find\u00a0assertions\u00a0to\u00a0be\u00a0a\nvaluable\u00a0form\u00a0of\u00a0communication\u2014they\u00a0tell\u00a0the\u00a0reader\u00a0something\u00a0about\u00a0the\u00a0assumed\nstate\u00a0of\u00a0the\u00a0program\u00a0at\u00a0this\u00a0point\u00a0of\u00a0execution. I\u00a0also\u00a0find\u00a0them\u00a0handy\u00a0for\u00a0debugging,\nand\u00a0their\u00a0communication\u00a0value\u00a0means\u00a0I\u2019m\u00a0inclined\u00a0to\u00a0leave\u00a0them\u00a0in\u00a0once\u00a0I\u2019ve\u00a0fixed\u00a0the\nerror\u00a0I\u2019m\u00a0chasing. Self\u00adtesting\u00a0code\u00a0reduces\u00a0their\u00a0value\u00a0for\u00a0debugging,\u00a0as\u00a0steadily\nnarrowing\u00a0unit\u00a0tests\u00a0often\u00a0do\u00a0the\u00a0job\u00a0better,\u00a0but\u00a0I\u00a0still\u00a0like\u00a0assertions\u00a0for\ncommunication. Mechanics\nWhen\u00a0you\u00a0see\u00a0that\u00a0a\u00a0condition\u00a0is\u00a0assumed\u00a0to\u00a0be\u00a0true,\u00a0add\u00a0an\u00a0assertion\u00a0to\u00a0state\u00a0it. Since\u00a0assertions\u00a0should\u00a0not\u00a0affect\u00a0the\u00a0running\u00a0of\u00a0a\u00a0system,\u00a0adding\u00a0one\u00a0is\u00a0always\nbehavior\u00adpreserving. Example\nHere\u2019s\u00a0a\u00a0simple\u00a0tale\u00a0of\u00a0discounts. A\u00a0customer\u00a0can\u00a0be\u00a0given\u00a0a\u00a0discount\u00a0rate\u00a0to\u00a0apply\u00a0to\u00a0all\ntheir\u00a0purchases:\nclass\u00a0Customer\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\napplyDiscount(aNumber)\u00a0{\n\u00a0\u00a0return\u00a0(this.discountRate)\n\u00a0\u00a0\u00a0\u00a0? aNumber\u00a0\u00ad\u00a0(this.discountRate\u00a0*\u00a0aNumber)\n\u00a0\u00a0\u00a0\u00a0:\u00a0aNumber\u037e\n}\nwww.EBooksWorld.ir", "domains": ["Design Patterns"], "source": "Refactoring.Improving.the.Design.of.Existing.Code.pdf", "section": "Page 339", "position": 339, "chunk_type": "semantic", "token_estimate": 293}
{"text": "Chapter 11: Refactoring APIs\nModules\u00a0and\u00a0their\u00a0functions\u00a0are\u00a0the\u00a0building\u00a0blocks\u00a0of\u00a0our\u00a0software. APIs\u00a0are\u00a0the\u00a0joints\nthat\u00a0we\u00a0use\u00a0to\u00a0plug\u00a0them\u00a0together. Making\u00a0these\u00a0APIs\u00a0easy\u00a0to\u00a0understand\u00a0and\u00a0use\u00a0is\nimportant\u00a0but\u00a0also\u00a0difficult:\u00a0I\u00a0need\u00a0to\u00a0refactor\u00a0them\u00a0as\u00a0I\u00a0learn\u00a0how\u00a0to\u00a0improve\u00a0them. A\u00a0good\u00a0API\u00a0clearly\u00a0separates\u00a0any\u00a0functions\u00a0that\u00a0update\u00a0data\u00a0from\u00a0those\u00a0that\u00a0only\u00a0read\ndata. If\u00a0I\u00a0see\u00a0them\u00a0combined,\u00a0I\u00a0use\u00a0Separate\u00a0Query\u00a0from\u00a0Modifier\u00a0(306)\u00a0to\u00a0tease\u00a0them\napart. I\u00a0can\u00a0unify\u00a0functions\u00a0that\u00a0only\u00a0vary\u00a0due\u00a0to\u00a0a\u00a0value\u00a0with\u00a0Parameterize\u00a0Function\n(310). Some\u00a0parameters,\u00a0however,\u00a0are\u00a0really\u00a0just\u00a0a\u00a0signal\u00a0of\u00a0an\u00a0entirely\u00a0different\nbehavior\u00a0and\u00a0are\u00a0best\u00a0excised\u00a0with\u00a0Remove\u00a0Flag\u00a0Argument\u00a0(314). Data\u00a0structures\u00a0are\u00a0often\u00a0unpacked\u00a0unnecessarily\u00a0when\u00a0passed\u00a0between\u00a0functions\u037e\u00a0I\nprefer\u00a0to\u00a0keep\u00a0them\u00a0together\u00a0with\u00a0Preserve\u00a0Whole\u00a0Object\u00a0(319). Decisions\u00a0on\u00a0what\nshould\u00a0be\u00a0passed\u00a0as\u00a0a\u00a0parameter,\u00a0and\u00a0what\u00a0can\u00a0be\u00a0resolved\u00a0by\u00a0the\u00a0called\u00a0function,\u00a0are\nones\u00a0I\u00a0often\u00a0need\u00a0to\u00a0revisit\u00a0with\u00a0Replace\u00a0Parameter\u00a0with\u00a0Query\u00a0(324)\u00a0and\u00a0Replace\nQuery\u00a0with\u00a0Parameter\u00a0(327). A\u00a0class\u00a0is\u00a0a\u00a0common\u00a0form\u00a0of\u00a0module. I\u00a0prefer\u00a0my\u00a0objects\u00a0to\u00a0be\u00a0as\u00a0immutable\u00a0as\u00a0possible,\nso\u00a0I\u00a0use\u00a0Remove\u00a0Setting\u00a0Method\u00a0(331)\u00a0whenever\u00a0I\u00a0can. Often,\u00a0when\u00a0a\u00a0caller\u00a0asks\u00a0for\u00a0a\nnew\u00a0object,\u00a0I\u00a0need\u00a0more\u00a0flexibility\u00a0than\u00a0a\u00a0simple\u00a0constructor\u00a0gives,\u00a0which\u00a0I\u00a0can\u00a0get\u00a0by\nusing\u00a0Replace\u00a0Constructor\u00a0with\u00a0Factory\u00a0Function\u00a0(334). The\u00a0last\u00a0two\u00a0refactorings\u00a0address\u00a0the\u00a0difficulty\u00a0of\u00a0breaking\u00a0down\u00a0a\u00a0particularly\u00a0complex\nfunction\u00a0that\u00a0passes\u00a0a\u00a0lot\u00a0of\u00a0data\u00a0around. I\u00a0can\u00a0turn\u00a0that\u00a0function\u00a0into\u00a0an\u00a0object\u00a0with\nReplace\u00a0Function\u00a0with\u00a0Command\u00a0(337),\u00a0which\u00a0makes\u00a0it\u00a0easier\u00a0to\u00a0use\u00a0Extract\u00a0Function\n(106)\u00a0on\u00a0the\u00a0function\u2019s\u00a0body. If\u00a0I\u00a0later\u00a0simplify\u00a0the\u00a0function\u00a0and\u00a0no\u00a0longer\u00a0need\u00a0it\u00a0as\u00a0a\ncommand\u00a0object,\u00a0I\u00a0turn\u00a0it\u00a0back\u00a0into\u00a0a\u00a0function\u00a0with\u00a0Replace\u00a0Command\u00a0with\u00a0Function\n(344).", "domains": ["Design Patterns", "Domain-Driven Design", "Code Organization"], "source": "Refactoring.Improving.the.Design.of.Existing.Code.pdf", "section": "Page 342", "position": 342, "chunk_type": "semantic", "token_estimate": 312}
{"text": "Motivation: When\u00a0I\u00a0have\u00a0a\u00a0function\u00a0that\u00a0gives\u00a0me\u00a0a\u00a0value\u00a0and\u00a0has\u00a0no\u00a0observable\u00a0side\u00a0effects,\u00a0I\u00a0have\na\u00a0very\u00a0valuable\u00a0thing.\u00a0I\u00a0can\u00a0call\u00a0this\u00a0function\u00a0as\u00a0often\u00a0as\u00a0I\u00a0like. I\u00a0can\u00a0move\u00a0the\u00a0call\u00a0to\nother\u00a0places\u00a0in\u00a0a\u00a0calling\u00a0function.\u00a0It\u2019s\u00a0easier\u00a0to\u00a0test. In\u00a0short,\u00a0I\u00a0have\u00a0a\u00a0lot\u00a0less\u00a0to\u00a0worry\nabout. It\u00a0is\u00a0a\u00a0good\u00a0idea\u00a0to\u00a0clearly\u00a0signal\u00a0the\u00a0difference\u00a0between\u00a0functions\u00a0with\u00a0side\u00a0effects\u00a0and\nthose\u00a0without. A\u00a0good\u00a0rule\u00a0to\u00a0follow\u00a0is\u00a0that\u00a0any\u00a0function\u00a0that\u00a0returns\u00a0a\u00a0value\u00a0should\u00a0not\nhave\u00a0observable\u00a0side\u00a0effects\u2014the\u00a0command\u00adquery\u00a0separation\u00a0[mf\u00adcqs]. Some\nprogrammers\u00a0treat\u00a0this\u00a0as\u00a0an\u00a0absolute\u00a0rule. I\u2019m\u00a0not\u00a0100\u00a0percent\u00a0pure\u00a0on\u00a0this\u00a0(as\u00a0on\nanything),\u00a0but\u00a0I\u00a0try\u00a0to\u00a0follow\u00a0it\u00a0most\u00a0of\u00a0the\u00a0time,\u00a0and\u00a0it\u00a0has\u00a0served\u00a0me\u00a0well. If\u00a0I\u00a0come\u00a0across\u00a0a\u00a0method\u00a0that\u00a0returns\u00a0a\u00a0value\u00a0but\u00a0also\u00a0has\u00a0side\u00a0effects,\u00a0I\u00a0always\u00a0try\u00a0to\nseparate\u00a0the\u00a0query\u00a0from\u00a0the\u00a0modifier. Note\u00a0that\u00a0I\u00a0use\u00a0the\u00a0phrase\u00a0observable\u00a0side\u00a0effects. A\u00a0common\u00a0optimization\u00a0is\u00a0to\u00a0cache\nthe\u00a0value\u00a0of\u00a0a\u00a0query\u00a0in\u00a0a\u00a0field\u00a0so\u00a0that\u00a0repeated\u00a0calls\u00a0go\u00a0quicker. Although\u00a0this\u00a0changes\nthe\u00a0state\u00a0of\u00a0the\u00a0object\u00a0with\u00a0the\u00a0cache,\u00a0the\u00a0change\u00a0is\u00a0not\u00a0observable. Any\u00a0sequence\u00a0of\nqueries\u00a0will\u00a0always\u00a0return\u00a0the\u00a0same\u00a0results\u00a0for\u00a0each\u00a0query. Mechanics\nwww.EBooksWorld.ir", "domains": ["Architectural Patterns and Styles", "Design Patterns"], "source": "Refactoring.Improving.the.Design.of.Existing.Code.pdf", "section": "Page 343", "position": 343, "chunk_type": "semantic", "token_estimate": 218}
{"text": "Consider\u00a0a\u00a0room\u00a0monitoring\u00a0system.\u00a0It\u00a0compares\u00a0its\u00a0daily\u00a0temperature\u00a0range\u00a0with\u00a0a: range\u00a0in\u00a0a\u00a0predefined\u00a0heating\u00a0plan. caller\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nconst\u00a0low\u00a0=\u00a0aRoom.daysTempRange.low\u037e\nconst\u00a0high\u00a0=\u00a0aRoom.daysTempRange.high\u037e\nif\u00a0(!aPlan.withinRange(low,\u00a0high))\n\u00a0\u00a0alerts.push(\"room\u00a0temperature\u00a0went\u00a0outside\u00a0range\")\u037e\nclass\u00a0HeatingPlan\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nwithinRange(bottom,\u00a0top)\u00a0{\n\u00a0\u00a0return\u00a0(bottom\u00a0>=\u00a0this._temperatureRange.low)\u00a0&&\u00a0(top\u00a0<=\u00a0this._temperatureRang\n}\nInstead\u00a0of\u00a0unpacking\u00a0the\u00a0range\u00a0information\u00a0when\u00a0I\u00a0pass\u00a0it\u00a0in,\u00a0I\u00a0can\u00a0pass\u00a0in\u00a0the\u00a0whole\nrange\u00a0object. I\u00a0begin\u00a0by\u00a0stating\u00a0the\u00a0interface\u00a0I\u00a0want\u00a0as\u00a0an\u00a0empty\u00a0function. class\u00a0HeatingPlan\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nxxNEWwithinRange(aNumberRange)\u00a0{\n}\nSince\u00a0I\u00a0intend\u00a0it\u00a0to\u00a0replace\u00a0the\u00a0existing\u00a0withinRange,\u00a0I\u00a0name\u00a0it\u00a0the\u00a0same\u00a0but\u00a0with\u00a0an\neasily\u00a0replaceable\u00a0prefix. I\u00a0then\u00a0add\u00a0the\u00a0body\u00a0of\u00a0the\u00a0function,\u00a0which\u00a0relies\u00a0on\u00a0calling\u00a0the\u00a0existing\u00a0withinRange. The\u00a0body\u00a0thus\u00a0consists\u00a0of\u00a0a\u00a0mapping\u00a0from\u00a0the\u00a0new\u00a0parameter\u00a0to\u00a0the\u00a0existing\u00a0ones. class\u00a0HeatingPlan\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nwww.EBooksWorld.ir", "domains": ["Code Organization"], "source": "Refactoring.Improving.the.Design.of.Existing.Code.pdf", "section": "Page 358", "position": 358, "chunk_type": "semantic", "token_estimate": 163}
{"text": "REPLACE QUERY WITH PARAMETER: inverse\u00a0of:\u00a0Replace\u00a0Parameter\u00a0with\u00a0Query\u00a0(324)\nMotivation\nWhen\u00a0looking\u00a0through\u00a0a\u00a0function\u2019s\u00a0body,\u00a0I\u00a0sometimes\u00a0see\u00a0references\u00a0to\u00a0something\u00a0in\nthe\u00a0function\u2019s\u00a0scope\u00a0that\u00a0I\u2019m\u00a0not\u00a0happy\u00a0with. This\u00a0might\u00a0be\u00a0a\u00a0reference\u00a0to\u00a0a\u00a0global\nvariable,\u00a0or\u00a0to\u00a0an\u00a0element\u00a0in\u00a0the\u00a0same\u00a0module\u00a0that\u00a0I\u00a0intend\u00a0to\u00a0move\u00a0away. To\u00a0resolve\nthis,\u00a0I\u00a0need\u00a0to\u00a0replace\u00a0the\u00a0internal\u00a0reference\u00a0with\u00a0a\u00a0parameter,\u00a0shifting\u00a0the\nresponsibility\u00a0of\u00a0resolving\u00a0the\u00a0reference\u00a0to\u00a0the\u00a0caller\u00a0of\u00a0the\u00a0function. Most\u00a0of\u00a0these\u00a0cases\u00a0are\u00a0due\u00a0to\u00a0my\u00a0wish\u00a0to\u00a0alter\u00a0the\u00a0dependency\u00a0relationships\u00a0in\u00a0the\u00a0code\n\u2014to\u00a0make\u00a0the\u00a0target\u00a0function\u00a0no\u00a0longer\u00a0dependent\u00a0on\u00a0the\u00a0element\u00a0I\u00a0want\u00a0to\nparameterize. There\u2019s\u00a0a\u00a0tension\u00a0here\u00a0between\u00a0converting\u00a0everything\u00a0to\u00a0parameters,\nwhich\u00a0results\u00a0in\u00a0long\u00a0repetitive\u00a0parameter\u00a0lists,\u00a0and\u00a0sharing\u00a0a\u00a0lot\u00a0of\u00a0scope\u00a0which\u00a0can\nlead\u00a0to\u00a0a\u00a0lot\u00a0of\u00a0coupling\u00a0between\u00a0functions. Like\u00a0most\u00a0tricky\u00a0decisions,\u00a0it\u2019s\u00a0not\nsomething\u00a0I\u00a0can\u00a0reliably\u00a0get\u00a0right,\u00a0so\u00a0it\u2019s\u00a0important\u00a0that\u00a0I\u00a0can\u00a0reliably\u00a0change\u00a0things\u00a0so\nthe\u00a0program\u00a0can\u00a0take\u00a0advantage\u00a0of\u00a0my\u00a0increasing\u00a0understanding. It\u2019s\u00a0easier\u00a0to\u00a0reason\u00a0about\u00a0a\u00a0function\u00a0that\u00a0will\u00a0always\u00a0give\u00a0the\u00a0same\u00a0result\u00a0when\u00a0called\nwith\u00a0same\u00a0parameter\u00a0values\u2014this\u00a0is\u00a0called\u00a0referential\u00a0transparency. If\u00a0a\u00a0function\naccesses\u00a0some\u00a0element\u00a0in\u00a0its\u00a0scope\u00a0that\u00a0isn\u2019t\u00a0referentially\u00a0transparent,\u00a0then\u00a0the\nwww.EBooksWorld.ir", "domains": ["Code Organization"], "source": "Refactoring.Improving.the.Design.of.Existing.Code.pdf", "section": "Page 366", "position": 366, "chunk_type": "semantic", "token_estimate": 217}
{"text": "setToCool()\u037e: )\u037e\nelse\n\u00a0\u00a0setOff()\u037e\nclass\u00a0HeatingPlan\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\ntargetTemperature(selectedTemperature)\u00a0{\n\u00a0\u00a0if\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0(selectedTemperature\u00a0>\u00a0\u00a0this._max)\u00a0return\u00a0this._max\u037e\n\u00a0\u00a0else\u00a0if\u00a0(selectedTemperature\u00a0<\u00a0\u00a0this._min)\u00a0return\u00a0this._min\u037e\n\u00a0\u00a0else\u00a0return\u00a0selectedTemperature\u037e\n}\nAs\u00a0is\u00a0often\u00a0the\u00a0case\u00a0with\u00a0this\u00a0refactoring,\u00a0the\u00a0calling\u00a0code\u00a0looks\u00a0more\u00a0unwieldy\u00a0than\nbefore. Moving\u00a0a\u00a0dependency\u00a0out\u00a0of\u00a0a\u00a0module\u00a0pushes\u00a0the\u00a0responsibility\u00a0of\u00a0dealing\u00a0with\nthat\u00a0dependency\u00a0back\u00a0to\u00a0the\u00a0caller.\u00a0That\u2019s\u00a0the\u00a0trade\u00adoff\u00a0for\u00a0the\u00a0reduced\u00a0coupling. But\u00a0removing\u00a0the\u00a0coupling\u00a0to\u00a0the\u00a0thermostat\u00a0object\u00a0isn\u2019t\u00a0the\u00a0only\u00a0gain\u00a0I\u2019ve\u00a0made\u00a0with\nthis\u00a0refactoring. The\u00a0HeatingPlan\u00a0class\u00a0is\u00a0immutable\u2014its\u00a0fields\u00a0are\u00a0set\u00a0in\u00a0the\nconstructor\u00a0with\u00a0no\u00a0methods\u00a0to\u00a0alter\u00a0them. (I\u2019ll\u00a0save\u00a0you\u00a0the\u00a0effort\u00a0of\u00a0looking\u00a0at\u00a0the\nwhole\u00a0class\u037e\u00a0just\u00a0trust\u00a0me\u00a0on\u00a0this.) Given\u00a0an\u00a0immutable\u00a0heating\u00a0plan,\u00a0by\u00a0moving\u00a0the\nthermostat\u00a0reference\u00a0out\u00a0of\u00a0the\u00a0function\u00a0body\u00a0I\u2019ve\u00a0also\u00a0made\u00a0targetTemperature\nreferentially\u00a0transparent. Every\u00a0time\u00a0I\u00a0call\u00a0targetTemperature\u00a0on\u00a0the\u00a0same\u00a0object,\nwith\u00a0the\u00a0same\u00a0argument,\u00a0I\u00a0will\u00a0get\u00a0the\u00a0same\u00a0result. If\u00a0all\u00a0the\u00a0methods\u00a0of\u00a0the\u00a0heating\nplan\u00a0have\u00a0referential\u00a0transparency,\u00a0that\u00a0makes\u00a0this\u00a0class\u00a0much\u00a0easier\u00a0to\u00a0test\u00a0and\u00a0reason\nabout. A\u00a0problem\u00a0with\u00a0JavaScript\u2019s\u00a0class\u00a0model\u00a0is\u00a0that\u00a0it\u2019s\u00a0impossible\u00a0to\u00a0enforce\u00a0an\u00a0immutable\nclass\u2014there\u2019s\u00a0always\u00a0a\u00a0way\u00a0to\u00a0get\u00a0at\u00a0an\u00a0object\u2019s\u00a0data. But\u00a0writing\u00a0a\u00a0class\u00a0to\u00a0signal\u00a0and\nencourage\u00a0immutability\u00a0is\u00a0often\u00a0good\u00a0enough. Creating\u00a0classes\u00a0that\u00a0have\u00a0this\ncharacteristic\u00a0is\u00a0often\u00a0a\u00a0sound\u00a0strategy\u00a0and\u00a0Replace\u00a0Query\u00a0with\u00a0Parameter\u00a0is\u00a0a\u00a0handy\ntool\u00a0for\u00a0doing\u00a0this.", "domains": ["Design Patterns", "Code Organization"], "source": "Refactoring.Improving.the.Design.of.Existing.Code.pdf", "section": "Page 370", "position": 370, "chunk_type": "semantic", "token_estimate": 245}
{"text": "formerly:\u00a0Replace\u00a0Constructor\u00a0with\u00a0Factory\u00a0Method: Motivation\nMany\u00a0object\u00adoriented\u00a0languages\u00a0have\u00a0a\u00a0special\u00a0constructor\u00a0function\u00a0that\u2019s\u00a0called\u00a0to\nwww.EBooksWorld.ir", "domains": ["Design Patterns", "Domain-Driven Design"], "source": "Refactoring.Improving.the.Design.of.Existing.Code.pdf", "section": "Page 373", "position": 373, "chunk_type": "semantic", "token_estimate": 19}
{"text": "initialize\u00a0an\u00a0object.\u00a0Clients\u00a0typically\u00a0call\u00a0this\u00a0constructor\u00a0when\u00a0they\u00a0want\u00a0to\u00a0create\u00a0a\u00a0new: object. But\u00a0these\u00a0constructors\u00a0often\u00a0come\u00a0with\u00a0awkward\u00a0limitations\u00a0that\u00a0aren\u2019t\u00a0there\u00a0for\nmore\u00a0general\u00a0functions. A\u00a0Java\u00a0constructor\u00a0must\u00a0return\u00a0an\u00a0instance\u00a0of\u00a0the\u00a0class\u00a0it\u00a0was\ncalled\u00a0with,\u00a0which\u00a0means\u00a0I\u00a0can\u2019t\u00a0replace\u00a0it\u00a0with\u00a0a\u00a0subclass\u00a0or\u00a0proxy\u00a0depending\u00a0on\u00a0the\nenvironment\u00a0or\u00a0parameters. Constructor\u00a0naming\u00a0is\u00a0fixed,\u00a0which\u00a0makes\u00a0it\u00a0impossible\u00a0for\nme\u00a0to\u00a0use\u00a0a\u00a0name\u00a0that\u00a0is\u00a0clearer\u00a0than\u00a0the\u00a0default. Constructors\u00a0often\u00a0require\u00a0a\u00a0special\noperator\u00a0to\u00a0invoke\u00a0(\u201cnew\u201d\u00a0in\u00a0many\u00a0languages)\u00a0which\u00a0makes\u00a0them\u00a0difficult\u00a0to\u00a0use\u00a0in\ncontexts\u00a0that\u00a0expect\u00a0normal\u00a0functions. A\u00a0factory\u00a0function\u00a0suffers\u00a0from\u00a0no\u00a0such\u00a0limitations. It\u00a0will\u00a0likely\u00a0call\u00a0the\u00a0constructor\u00a0as\npart\u00a0of\u00a0its\u00a0implementation,\u00a0but\u00a0I\u00a0can\u00a0freely\u00a0substitute\u00a0something\u00a0else. Mechanics\nCreate\u00a0a\u00a0factory\u00a0function,\u00a0its\u00a0body\u00a0being\u00a0a\u00a0call\u00a0to\u00a0the\u00a0constructor. Replace\u00a0each\u00a0call\u00a0to\u00a0the\u00a0constructor\u00a0with\u00a0a\u00a0call\u00a0to\u00a0the\u00a0factory\u00a0function. Test\u00a0after\u00a0each\u00a0change. Limit\u00a0the\u00a0constructor\u2019s\u00a0visibility\u00a0as\u00a0much\u00a0as\u00a0possible. Example\nA\u00a0quick\u00a0but\u00a0wearisome\u00a0example\u00a0uses\u00a0kinds\u00a0of\u00a0employees. Consider\u00a0an\u00a0employee\u00a0class:\nclass\u00a0Employee\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nconstructor\u00a0(name,\u00a0typeCode)\u00a0{\n\u00a0\u00a0this._name\u00a0=\u00a0name\u037e\n\u00a0\u00a0this._typeCode\u00a0=\u00a0typeCode\u037e\n}\nget\u00a0name()\u00a0{return\u00a0this._name\u037e}\nget\u00a0type()\u00a0{\n\u00a0\u00a0return\u00a0Employee.legalTypeCodes[this._typeCode]\u037e\n}\nstatic\u00a0get\u00a0legalTypeCodes()\u00a0{\n\u00a0\u00a0return\u00a0{\"E\":\u00a0\"Engineer\",\u00a0\"M\":\u00a0\"Manager\",\u00a0\"S\":\u00a0\"Salesman\"}\u037e\n}\nThis\u00a0is\u00a0used\u00a0from\nwww.EBooksWorld.ir", "domains": ["Design Patterns", "Domain-Driven Design"], "source": "Refactoring.Improving.the.Design.of.Existing.Code.pdf", "section": "Page 374", "position": 374, "chunk_type": "semantic", "token_estimate": 230}
{"text": "caller\u2026: Click\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\ncandidate\u00a0=\u00a0new\u00a0Employee(document.name,\u00a0document.empType)\u037e\nand\ncaller\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nconst\u00a0leadEngineer\u00a0=\u00a0new\u00a0Employee(document.leadEngineer,\u00a0'E')\u037e\nMy\u00a0first\u00a0step\u00a0is\u00a0to\u00a0create\u00a0the\u00a0factory\u00a0function. Its\u00a0body\u00a0is\u00a0a\u00a0simple\u00a0delegation\u00a0to\u00a0the\nconstructor. top\u00a0level\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0createEmployee(name,\u00a0typeCode)\u00a0{\n\u00a0\u00a0return\u00a0new\u00a0Employee(name,\u00a0typeCode)\u037e\n}\nI\u00a0then\u00a0find\u00a0the\u00a0callers\u00a0of\u00a0the\u00a0constructor\u00a0and\u00a0change\u00a0them,\u00a0one\u00a0at\u00a0a\u00a0time,\u00a0to\u00a0use\u00a0the\nfactory\u00a0function\u00a0instead. The\u00a0first\u00a0one\u00a0is\u00a0obvious:\ncaller\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\ncandidate\u00a0=\u00a0createEmployee(document.name,\u00a0document.empType)\u037e\nWith\u00a0the\u00a0second\u00a0case,\u00a0I\u00a0could\u00a0use\u00a0the\u00a0new\u00a0factory\u00a0function\u00a0like\u00a0this:\ncaller\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nwww.EBooksWorld.ir", "domains": ["Design Patterns", "Domain-Driven Design"], "source": "Refactoring.Improving.the.Design.of.Existing.Code.pdf", "section": "Page 375", "position": 375, "chunk_type": "semantic", "token_estimate": 119}
{"text": "const\u00a0leadEngineer\u00a0=\u00a0createEmployee(document.leadEngineer,\u00a0'E')\u037e: But\u00a0I\u00a0don\u2019t\u00a0like\u00a0using\u00a0the\u00a0type\u00a0code\u00a0here\u2014it\u2019s\u00a0generally\u00a0a\u00a0bad\u00a0smell\u00a0to\u00a0pass\u00a0a\u00a0code\u00a0as\u00a0a\nliteral\u00a0string. So\u00a0I\u00a0prefer\u00a0to\u00a0create\u00a0a\u00a0new\u00a0factory\u00a0function\u00a0that\u00a0embeds\u00a0the\u00a0kind\u00a0of\nemployee\u00a0I\u00a0want\u00a0into\u00a0its\u00a0name. caller\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nconst\u00a0leadEngineer\u00a0=\u00a0createEngineer(document.leadEngineer)\u037e\ntop\u00a0level\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0createEngineer(name)\u00a0{\n\u00a0\u00a0return\u00a0new\u00a0Employee(name,\u00a0'E')\u037e\n}", "domains": ["Design Patterns", "Domain-Driven Design"], "source": "Refactoring.Improving.the.Design.of.Existing.Code.pdf", "section": "Page 376", "position": 376, "chunk_type": "semantic", "token_estimate": 73}
{"text": "formerly:\u00a0Replace\u00a0Method\u00a0with\u00a0Method\u00a0Object: inverse\u00a0of:\u00a0Replace\u00a0Command\u00a0with\u00a0Function\u00a0(344)\nwww.EBooksWorld.ir", "domains": ["Design Patterns"], "source": "Refactoring.Improving.the.Design.of.Existing.Code.pdf", "section": "Page 376", "position": 376, "chunk_type": "semantic", "token_estimate": 14}
{"text": "Motivation: Functions\u2014either\u00a0freestanding\u00a0or\u00a0attached\u00a0to\u00a0objects\u00a0as\u00a0methods\u2014are\u00a0one\u00a0of\u00a0the\nfundamental\u00a0building\u00a0blocks\u00a0of\u00a0programming. But\u00a0there\u00a0are\u00a0times\u00a0when\u00a0it\u2019s\u00a0useful\u00a0to\nencapsulate\u00a0a\u00a0function\u00a0into\u00a0its\u00a0own\u00a0object,\u00a0which\u00a0I\u00a0refer\u00a0to\u00a0as\u00a0a\u00a0\u201ccommand\u00a0object\u201d\u00a0or\nsimply\u00a0a\u00a0command. Such\u00a0an\u00a0object\u00a0is\u00a0mostly\u00a0built\u00a0around\u00a0a\u00a0single\u00a0method,\u00a0whose\nrequest\u00a0and\u00a0execution\u00a0is\u00a0the\u00a0purpose\u00a0of\u00a0the\u00a0object. A\u00a0command\u00a0offers\u00a0a\u00a0greater\u00a0flexibility\u00a0for\u00a0the\u00a0control\u00a0and\u00a0expression\u00a0of\u00a0a\u00a0function\u00a0than\nthe\u00a0plain\u00a0function\u00a0mechanism. Commands\u00a0can\u00a0have\u00a0complimentary\u00a0operations,\u00a0such\u00a0as\nundo.\u00a0I\u00a0can\u00a0provide\u00a0methods\u00a0to\u00a0build\u00a0up\u00a0their\u00a0parameters\u00a0to\u00a0support\u00a0a\u00a0richer\u00a0lifecycle. I\ncan\u00a0build\u00a0in\u00a0customizations\u00a0using\u00a0inheritance\u00a0and\u00a0hooks. If\u00a0I\u2019m\u00a0working\u00a0in\u00a0a\u00a0language\nwith\u00a0objects\u00a0but\u00a0without\u00a0first\u00adclass\u00a0functions,\u00a0I\u00a0can\u00a0provide\u00a0much\u00a0of\u00a0that\u00a0capability\u00a0by\nusing\u00a0commands\u00a0instead. Similarly,\u00a0I\u00a0can\u00a0use\u00a0methods\u00a0and\u00a0fields\u00a0to\u00a0help\u00a0break\u00a0down\u00a0a\ncomplex\u00a0function,\u00a0even\u00a0in\u00a0a\u00a0language\u00a0that\u00a0lacks\u00a0nested\u00a0functions,\u00a0and\u00a0I\u00a0can\u00a0call\u00a0those\nmethods\u00a0directly\u00a0while\u00a0testing\u00a0and\u00a0debugging. All\u00a0these\u00a0are\u00a0good\u00a0reasons\u00a0to\u00a0use\u00a0commands,\u00a0and\u00a0I\u00a0need\u00a0to\u00a0be\u00a0ready\u00a0to\u00a0refactor\nwww.EBooksWorld.ir", "domains": ["Design Patterns"], "source": "Refactoring.Improving.the.Design.of.Existing.Code.pdf", "section": "Page 377", "position": 377, "chunk_type": "semantic", "token_estimate": 187}
{"text": "functions\u00a0into\u00a0commands\u00a0when\u00a0I\u00a0need\u00a0to.\u00a0But\u00a0we\u00a0must\u00a0not\u00a0forget\u00a0that\u00a0this\u00a0flexibility,\u00a0as: ever,\u00a0comes\u00a0at\u00a0a\u00a0price\u00a0paid\u00a0in\u00a0complexity. So,\u00a0given\u00a0the\u00a0choice\u00a0between\u00a0a\u00a0first\u00adclass\nfunction\u00a0and\u00a0a\u00a0command,\u00a0I\u2019ll\u00a0pick\u00a0the\u00a0function\u00a095%\u00a0of\u00a0the\u00a0time. I\u00a0only\u00a0use\u00a0a\u00a0command\nwhen\u00a0I\u00a0specifically\u00a0need\u00a0a\u00a0facility\u00a0that\u00a0simpler\u00a0approaches\u00a0can\u2019t\u00a0provide. Like\u00a0many\u00a0words\u00a0in\u00a0software\u00a0development,\u00a0\u201ccommand\u201d\u00a0is\u00a0rather\u00a0overloaded. In\u00a0the\ncontext\u00a0I\u2019m\u00a0using\u00a0it\u00a0here,\u00a0it\u00a0is\u00a0an\u00a0object\u00a0that\u00a0encapsulates\u00a0a\u00a0request,\u00a0following\u00a0the\ncommand\u00a0pattern\u00a0in\u00a0Design\u00a0Patterns\u00a0[gof]. When\u00a0I\u00a0use\u00a0\u201ccommand\u201d\u00a0in\u00a0this\u00a0sense,\u00a0I\u00a0use\n\u201ccommand\u00a0object\u201d\u00a0to\u00a0set\u00a0the\u00a0context,\u00a0and\u00a0\u201ccommand\u201d\u00a0afterwards. The\u00a0word\n\u201ccommand\u201d\u00a0is\u00a0also\u00a0used\u00a0in\u00a0the\u00a0command\u00adquery\u00a0separation\u00a0principle\u00a0[mf\u00adcqs],\u00a0where\u00a0a\ncommand\u00a0is\u00a0an\u00a0object\u00a0method\u00a0that\u00a0changes\u00a0observable\u00a0state. I\u2019ve\u00a0always\u00a0tried\u00a0to\u00a0avoid\nusing\u00a0command\u00a0in\u00a0that\u00a0sense,\u00a0preferring\u00a0\u201cmodifier\u201d\u00a0or\u00a0\u201cmutator.\u201d\nMechanics\nCreate\u00a0an\u00a0empty\u00a0class\u00a0for\u00a0the\u00a0function.\u00a0Name\u00a0it\u00a0based\u00a0on\u00a0the\u00a0function. Use\u00a0Move\u00a0Function\u00a0(198)\u00a0to\u00a0move\u00a0the\u00a0function\u00a0to\u00a0the\u00a0empty\u00a0class. Keep\u00a0the\u00a0original\u00a0function\u00a0as\u00a0a\u00a0forwarding\u00a0function\u00a0until\u00a0at\u00a0least\u00a0the\u00a0end\u00a0of\u00a0the\nrefactoring. Follow\u00a0any\u00a0convention\u00a0the\u00a0language\u00a0has\u00a0for\u00a0naming\u00a0commands. If\u00a0there\u00a0is\u00a0no\nconvention,\u00a0choose\u00a0a\u00a0generic\u00a0name\u00a0for\u00a0the\u00a0command\u2019s\u00a0execute\u00a0function,\u00a0such\u00a0as\n\u201cexecute\u201d\u00a0or\u00a0\u201ccall\u201d. Consider\u00a0making\u00a0a\u00a0field\u00a0for\u00a0each\u00a0argument,\u00a0and\u00a0move\u00a0these\u00a0arguments\u00a0to\u00a0the\nconstructor. Example\nThe\u00a0JavaScript\u00a0language\u00a0has\u00a0many\u00a0faults,\u00a0but\u00a0one\u00a0of\u00a0its\u00a0great\u00a0decisions\u00a0was\u00a0to\u00a0make\nfunctions\u00a0first\u00adclass\u00a0entities. I\u00a0thus\u00a0don\u2019t\u00a0have\u00a0to\u00a0go\u00a0through\u00a0all\u00a0the\u00a0hoops\u00a0of\u00a0creating\ncommands\u00a0for\u00a0common\u00a0tasks\u00a0that\u00a0I\u00a0need\u00a0to\u00a0do\u00a0in\u00a0languages\u00a0without\u00a0this\u00a0facility. But\nthere\u00a0are\u00a0still\u00a0times\u00a0when\u00a0a\u00a0command\u00a0is\u00a0the\u00a0right\u00a0tool\u00a0for\u00a0the\u00a0job. One\u00a0of\u00a0these\u00a0cases\u00a0is\u00a0breaking\u00a0up\u00a0a\u00a0complex\u00a0function\u00a0so\u00a0I\u00a0can\u00a0better\u00a0understand\u00a0and\nmodify\u00a0it. To\u00a0really\u00a0show\u00a0the\u00a0value\u00a0of\u00a0this\u00a0refactoring,\u00a0I\u00a0need\u00a0a\u00a0long\u00a0and\u00a0complicated\nfunction\u2014but\u00a0that\u00a0would\u00a0take\u00a0too\u00a0long\u00a0to\u00a0write,\u00a0let\u00a0alone\u00a0for\u00a0you\u00a0to\u00a0read. Instead,\u00a0I\u2019ll\u00a0go\nwith\u00a0a\u00a0function\u00a0that\u2019s\u00a0short\u00a0enough\u00a0not\u00a0to\u00a0need\u00a0it. This\u00a0one\u00a0scores\u00a0points\u00a0for\u00a0an\ninsurance\u00a0application:\nwww.EBooksWorld.ir", "domains": ["Architectural Patterns and Styles", "Design Patterns"], "source": "Refactoring.Improving.the.Design.of.Existing.Code.pdf", "section": "Page 378", "position": 378, "chunk_type": "semantic", "token_estimate": 359}
{"text": "Most\u00a0of\u00a0the\u00a0time,\u00a0I\u00a0prefer\u00a0to\u00a0pass\u00a0arguments\u00a0to\u00a0a\u00a0command\u00a0on\u00a0the\u00a0constructor\u00a0and\u00a0have: the\u00a0execute\u00a0method\u00a0take\u00a0no\u00a0parameters. While\u00a0this\u00a0matters\u00a0less\u00a0for\u00a0a\u00a0simple\ndecomposition\u00a0scenario\u00a0like\u00a0this,\u00a0it\u2019s\u00a0very\u00a0handy\u00a0when\u00a0I\u00a0want\u00a0to\u00a0manipulate\u00a0the\ncommand\u00a0with\u00a0a\u00a0more\u00a0complicated\u00a0parameter\u00a0setting\u00a0lifecycle\u00a0or\u00a0customizations. Different\u00a0command\u00a0classes\u00a0can\u00a0have\u00a0different\u00a0parameters\u00a0but\u00a0be\u00a0mixed\u00a0together\u00a0when\nqueued\u00a0for\u00a0execution. I\u00a0can\u00a0do\u00a0these\u00a0parameters\u00a0one\u00a0at\u00a0a\u00a0time. Click\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0score(candidate,\u00a0medicalExam,\u00a0scoringGuide)\u00a0{\n\u00a0\u00a0return\u00a0new\u00a0Scorer(candidate).execute(candidate,\u00a0medicalExam,\u00a0scoringGuide)\u037e\n}\nclass\u00a0Scorer\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nconstructor(candidate){\n\u00a0\u00a0this._candidate\u00a0=\u00a0candidate\u037e\n}\nexecute\u00a0(candidate,\u00a0medicalExam,\u00a0scoringGuide)\u00a0{\n\u00a0\u00a0let\u00a0result\u00a0=\u00a00\u037e\n\u00a0\u00a0let\u00a0healthLevel\u00a0=\u00a00\u037e\n\u00a0\u00a0let\u00a0highMedicalRiskFlag\u00a0=\u00a0false\u037e\n\u00a0\u00a0if\u00a0(medicalExam.isSmoker)\u00a0{\n\u00a0\u00a0\u00a0\u00a0healthLevel\u00a0+=\u00a010\u037e\n\u00a0\u00a0\u00a0\u00a0highMedicalRiskFlag\u00a0=\u00a0true\u037e\n\u00a0\u00a0}\n\u00a0\u00a0let\u00a0certificationGrade\u00a0=\u00a0\"regular\"\u037e\n\u00a0\u00a0if\u00a0(scoringGuide.stateWithLowCertification(this._candidate.originState))\u00a0{\n\u00a0\u00a0\u00a0\u00a0certificationGrade\u00a0=\u00a0\"low\"\u037e\n\u00a0\u00a0\u00a0\u00a0result\u00a0\u00ad=\u00a05\u037e\n\u00a0\u00a0}\n\u00a0\u00a0//\u00a0lots\u00a0more\u00a0code\u00a0like\u00a0this\n\u00a0\u00a0result\u00a0\u00ad=\u00a0Math.max(healthLevel\u00a0\u00ad\u00a05,\u00a00)\u037e\n\u00a0\u00a0return\u00a0result\u037e\n}\nI\u00a0continue\u00a0with\u00a0the\u00a0other\u00a0parameters\nwww.EBooksWorld.ir", "domains": ["Design Patterns"], "source": "Refactoring.Improving.the.Design.of.Existing.Code.pdf", "section": "Page 380", "position": 380, "chunk_type": "semantic", "token_estimate": 170}
{"text": "Click\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image: function\u00a0score(candidate,\u00a0medicalExam,\u00a0scoringGuide)\u00a0{\n\u00a0\u00a0return\u00a0new\u00a0Scorer(candidate,\u00a0medicalExam,\u00a0scoringGuide).execute()\u037e\n}\nclass\u00a0Scorer\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nconstructor(candidate,\u00a0medicalExam,\u00a0scoringGuide){\n\u00a0\u00a0this._candidate\u00a0=\u00a0candidate\u037e\n\u00a0\u00a0this._medicalExam\u00a0=\u00a0medicalExam\u037e\n\u00a0\u00a0this._scoringGuide\u00a0=\u00a0scoringGuide\u037e\n}\nexecute\u00a0()\u00a0{\n\u00a0\u00a0let\u00a0result\u00a0=\u00a00\u037e\n\u00a0\u00a0let\u00a0healthLevel\u00a0=\u00a00\u037e\n\u00a0\u00a0let\u00a0highMedicalRiskFlag\u00a0=\u00a0false\u037e\n\u00a0\u00a0if\u00a0(this._medicalExam.isSmoker)\u00a0{\n\u00a0\u00a0\u00a0\u00a0healthLevel\u00a0+=\u00a010\u037e\n\u00a0\u00a0\u00a0\u00a0highMedicalRiskFlag\u00a0=\u00a0true\u037e\n\u00a0\u00a0}\n\u00a0\u00a0let\u00a0certificationGrade\u00a0=\u00a0\"regular\"\u037e\n\u00a0\u00a0if\u00a0(this._scoringGuide.stateWithLowCertification(this._candidate.originState))\n\u00a0\u00a0\u00a0\u00a0certificationGrade\u00a0=\u00a0\"low\"\u037e\n\u00a0\u00a0\u00a0\u00a0result\u00a0\u00ad=\u00a05\u037e\n\u00a0\u00a0}\n\u00a0\u00a0//\u00a0lots\u00a0more\u00a0code\u00a0like\u00a0this\n\u00a0\u00a0result\u00a0\u00ad=\u00a0Math.max(healthLevel\u00a0\u00ad\u00a05,\u00a00)\u037e\n\u00a0\u00a0return\u00a0result\u037e\n}\nThat\u00a0completes\u00a0Replace\u00a0Function\u00a0with\u00a0Command,\u00a0but\u00a0the\u00a0whole\u00a0point\u00a0of\u00a0doing\u00a0this\nrefactoring\u00a0is\u00a0to\u00a0allow\u00a0me\u00a0to\u00a0break\u00a0down\u00a0the\u00a0complicated\u00a0functions\u2014so\u00a0let\u00a0me\u00a0outline\nsome\u00a0steps\u00a0to\u00a0achieve\u00a0that. My\u00a0next\u00a0move\u00a0here\u00a0is\u00a0to\u00a0change\u00a0all\u00a0the\u00a0local\u00a0variables\u00a0into\nfields.\u00a0Again,\u00a0I\u00a0do\u00a0these\u00a0one\u00a0at\u00a0a\u00a0time. class\u00a0Scorer\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nconstructor(candidate,\u00a0medicalExam,\u00a0scoringGuide){\nwww.EBooksWorld.ir", "domains": ["Design Patterns"], "source": "Refactoring.Improving.the.Design.of.Existing.Code.pdf", "section": "Page 381", "position": 381, "chunk_type": "semantic", "token_estimate": 156}
{"text": "this._certificationGrade\u00a0=\u00a0\"low\"\u037e: ow\"\u037e\n\u00a0\u00a0\u00a0\u00a0this._result\u00a0\u00ad=\u00a05\u037e\n\u00a0\u00a0}\n\u00a0\u00a0//\u00a0lots\u00a0more\u00a0code\u00a0like\u00a0this\n\u00a0\u00a0this._result\u00a0\u00ad=\u00a0Math.max(this._healthLevel\u00a0\u00ad\u00a05,\u00a00)\u037e\n\u00a0\u00a0return\u00a0this._result\u037e\n}\nNow\u00a0I\u2019ve\u00a0moved\u00a0all\u00a0the\u00a0function\u2019s\u00a0state\u00a0to\u00a0the\u00a0command\u00a0object,\u00a0I\u00a0can\u00a0use\u00a0refactorings\nlike\u00a0Extract\u00a0Function\u00a0(106)\u00a0without\u00a0getting\u00a0tangled\u00a0up\u00a0in\u00a0all\u00a0the\u00a0variables\u00a0and\u00a0their\nscopes. class\u00a0Scorer\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nexecute\u00a0()\u00a0{\n\u00a0\u00a0this._result\u00a0=\u00a00\u037e\n\u00a0\u00a0this._healthLevel\u00a0=\u00a00\u037e\n\u00a0\u00a0this._highMedicalRiskFlag\u00a0=\u00a0false\u037e\n\u00a0\u00a0this.scoreSmoking()\u037e\n\u00a0\u00a0this._certificationGrade\u00a0=\u00a0\"regular\"\u037e\n\u00a0\u00a0if\u00a0(this._scoringGuide.stateWithLowCertification(this._candidate.originState))\n\u00a0\u00a0\u00a0\u00a0this._certificationGrade\u00a0=\u00a0\"low\"\u037e\n\u00a0\u00a0\u00a0\u00a0this._result\u00a0\u00ad=\u00a05\u037e\n\u00a0\u00a0}\n\u00a0\u00a0//\u00a0lots\u00a0more\u00a0code\u00a0like\u00a0this\n\u00a0\u00a0this._result\u00a0\u00ad=\u00a0Math.max(this._healthLevel\u00a0\u00ad\u00a05,\u00a00)\u037e\n\u00a0\u00a0return\u00a0this._result\u037e\n\u00a0\u00a0}\nscoreSmoking()\u00a0{\n\u00a0\u00a0if\u00a0(this._medicalExam.isSmoker)\u00a0{\n\u00a0\u00a0\u00a0\u00a0this._healthLevel\u00a0+=\u00a010\u037e\n\u00a0\u00a0\u00a0\u00a0this._highMedicalRiskFlag\u00a0=\u00a0true\u037e\n\u00a0\u00a0}\n}\nThis\u00a0allows\u00a0me\u00a0to\u00a0treat\u00a0the\u00a0command\u00a0similarly\u00a0to\u00a0how\u00a0I\u2019d\u00a0deal\u00a0with\u00a0a\u00a0nested\u00a0function. Indeed,\u00a0when\u00a0doing\u00a0this\u00a0refactoring\u00a0in\u00a0JavaScript,\u00a0using\u00a0nested\u00a0functions\u00a0would\u00a0be\u00a0a\nreasonable\u00a0alternative\u00a0to\u00a0using\u00a0a\u00a0command. I\u2019d\u00a0still\u00a0use\u00a0a\u00a0command\u00a0for\u00a0this,\u00a0partly\nbecause\u00a0I\u2019m\u00a0more\u00a0familiar\u00a0with\u00a0commands\u00a0and\u00a0partly\u00a0because\u00a0with\u00a0a\u00a0command\u00a0I\u00a0can\nwrite\u00a0tests\u00a0and\u00a0debugging\u00a0calls\u00a0against\u00a0the\u00a0subfunctions.", "domains": ["Design Patterns"], "source": "Refactoring.Improving.the.Design.of.Existing.Code.pdf", "section": "Page 383", "position": 383, "chunk_type": "semantic", "token_estimate": 179}
{"text": "REPLACE COMMAND WITH FUNCTION: inverse\u00a0of:\u00a0Replace\u00a0Function\u00a0with\u00a0Command\u00a0(337)\nMotivation\nCommand\u00a0objects\u00a0provide\u00a0a\u00a0powerful\u00a0mechanism\u00a0for\u00a0handling\u00a0complex\u00a0computations. They\u00a0can\u00a0easily\u00a0be\u00a0broken\u00a0down\u00a0into\u00a0separate\u00a0methods\u00a0sharing\u00a0common\u00a0state\u00a0through\nthe\u00a0fields\u037e\u00a0they\u00a0can\u00a0be\u00a0invoked\u00a0via\u00a0different\u00a0methods\u00a0for\u00a0different\u00a0effects\u037e\u00a0they\u00a0can\u00a0have\ntheir\u00a0data\u00a0built\u00a0up\u00a0in\u00a0stages.\u00a0But\u00a0that\u00a0power\u00a0comes\u00a0at\u00a0a\u00a0cost. Most\u00a0of\u00a0the\u00a0time,\u00a0I\u00a0just\nwant\u00a0to\u00a0invoke\u00a0a\u00a0function\u00a0and\u00a0have\u00a0it\u00a0do\u00a0its\u00a0thing. If\u00a0that\u2019s\u00a0the\u00a0case,\u00a0and\u00a0the\u00a0function\nisn\u2019t\u00a0too\u00a0complex,\u00a0then\u00a0a\u00a0command\u00a0object\u00a0is\u00a0more\u00a0trouble\u00a0than\u00a0its\u00a0worth\u00a0and\u00a0should\u00a0be\nturned\u00a0into\u00a0a\u00a0regular\u00a0function. Mechanics\nApply\u00a0Extract\u00a0Function\u00a0(106)\u00a0to\u00a0the\u00a0creation\u00a0of\u00a0the\u00a0command\u00a0and\u00a0the\u00a0call\u00a0to\u00a0the\ncommand\u2019s\u00a0execution\u00a0method. This\u00a0creates\u00a0the\u00a0new\u00a0function\u00a0that\u00a0will\u00a0replace\u00a0the\u00a0command\u00a0in\u00a0due\u00a0course. For\u00a0each\u00a0method\u00a0called\u00a0by\u00a0the\u00a0command\u2019s\u00a0execution\u00a0method,\u00a0apply\u00a0Inline\u00a0Function\n(115). www.EBooksWorld.ir", "domains": ["Design Patterns"], "source": "Refactoring.Improving.the.Design.of.Existing.Code.pdf", "section": "Page 384", "position": 384, "chunk_type": "semantic", "token_estimate": 154}
{"text": "If\u00a0the\u00a0supporting\u00a0function\u00a0returns\u00a0a\u00a0value,\u00a0use\u00a0Extract\u00a0Variable\u00a0(119)\u00a0on\u00a0the\u00a0call: first\u00a0and\u00a0then\u00a0Inline\u00a0Function\u00a0(115). Use\u00a0Change\u00a0Function\u00a0Declaration\u00a0(124)\u00a0to\u00a0put\u00a0all\u00a0the\u00a0parameters\u00a0of\u00a0the\u00a0constructor\ninto\u00a0the\u00a0command\u2019s\u00a0execution\u00a0method\u00a0instead. For\u00a0each\u00a0field,\u00a0alter\u00a0the\u00a0references\u00a0in\u00a0the\u00a0command\u2019s\u00a0execution\u00a0method\u00a0to\u00a0use\u00a0the\nparameter\u00a0instead.\u00a0Test\u00a0after\u00a0each\u00a0change. Inline\u00a0the\u00a0constructor\u00a0call\u00a0and\u00a0command\u2019s\u00a0execution\u00a0method\u00a0call\u00a0into\u00a0the\u00a0caller\n(which\u00a0is\u00a0the\u00a0replacement\u00a0function). Test. Apply\u00a0Remove\u00a0Dead\u00a0Code\u00a0(237)\u00a0to\u00a0the\u00a0command\u00a0class. Example\nI\u2019ll\u00a0begin\u00a0with\u00a0this\u00a0small\u00a0command\u00a0object:\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nclass\u00a0ChargeCalculator\u00a0{\n\u00a0\u00a0constructor\u00a0(customer,\u00a0usage,\u00a0provider){\n\u00a0\u00a0\u00a0\u00a0this._customer\u00a0=\u00a0customer\u037e\n\u00a0\u00a0\u00a0\u00a0this._usage\u00a0=\u00a0usage\u037e\n\u00a0\u00a0\u00a0\u00a0this._provider\u00a0=\u00a0provider\u037e\n\u00a0\u00a0}\n\u00a0\u00a0get\u00a0baseCharge()\u00a0{\n\u00a0\u00a0\u00a0\u00a0return\u00a0this._customer.baseRate\u00a0*\u00a0this._usage\u037e\n\u00a0\u00a0}\n\u00a0\u00a0get\u00a0charge()\u00a0{\n\u00a0\u00a0\u00a0\u00a0return\u00a0this.baseCharge\u00a0+\u00a0this._provider.connectionCharge\u037e\n\u00a0\u00a0}\n}\nIt\u00a0is\u00a0used\u00a0by\u00a0code\u00a0like\u00a0this:\ncaller\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nmonthCharge\u00a0=\u00a0new\u00a0ChargeCalculator(customer,\u00a0usage,\u00a0provider).charge\u037e\nwww.EBooksWorld.ir", "domains": ["Design Patterns"], "source": "Refactoring.Improving.the.Design.of.Existing.Code.pdf", "section": "Page 385", "position": 385, "chunk_type": "semantic", "token_estimate": 155}
{"text": "The\u00a0command\u00a0class\u00a0is\u00a0small\u00a0and\u00a0simple\u00a0enough\u00a0to\u00a0be\u00a0better\u00a0off\u00a0as\u00a0a\u00a0function.: I\u00a0begin\u00a0by\u00a0using\u00a0Extract\u00a0Function\u00a0(106)\u00a0to\u00a0wrap\u00a0the\u00a0class\u00a0creation\u00a0and\u00a0invocation. caller\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nmonthCharge\u00a0=\u00a0charge(customer,\u00a0usage,\u00a0provider)\u037e\ntop\u00a0level\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0charge(customer,\u00a0usage,\u00a0provider)\u00a0{\n\u00a0\u00a0return\u00a0new\u00a0ChargeCalculator(customer,\u00a0usage,\u00a0provider).charge\u037e\n}\nI\u00a0have\u00a0to\u00a0decide\u00a0how\u00a0to\u00a0deal\u00a0with\u00a0any\u00a0supporting\u00a0functions,\u00a0in\u00a0this\u00a0case\u00a0baseCharge. My\u00a0usual\u00a0approach\u00a0for\u00a0a\u00a0function\u00a0that\u00a0returns\u00a0a\u00a0value\u00a0is\u00a0to\u00a0first\u00a0Extract\u00a0Variable\u00a0(119)\non\u00a0that\u00a0value. class\u00a0ChargeCalculator\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nget\u00a0baseCharge()\u00a0{\n\u00a0\u00a0return\u00a0this._customer.baseRate\u00a0*\u00a0this._usage\u037e\n}\nget\u00a0charge()\u00a0{\n\u00a0\u00a0const\u00a0baseCharge\u00a0=\u00a0this.baseCharge\u037e\n\u00a0\u00a0return\u00a0baseCharge\u00a0+\u00a0this._provider.connectionCharge\u037e\n}\nThen,\u00a0I\u00a0use\u00a0Inline\u00a0Function\u00a0(115)\u00a0on\u00a0the\u00a0supporting\u00a0function. class\u00a0ChargeCalculator\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nget\u00a0charge()\u00a0{\n\u00a0\u00a0const\u00a0baseCharge\u00a0=\u00a0this._customer.baseRate\u00a0*\u00a0this._usage\u037e\n\u00a0\u00a0return\u00a0baseCharge\u00a0+\u00a0this._provider.connectionCharge\u037e\nwww.EBooksWorld.ir", "domains": ["Design Patterns"], "source": "Refactoring.Improving.the.Design.of.Existing.Code.pdf", "section": "Page 386", "position": 386, "chunk_type": "semantic", "token_estimate": 154}
{"text": "return\u00a0baseCharge\u00a0+\u00a0this._provider.connectionCharge\u037e: e\u037e\n}\nI\u00a0don\u2019t\u00a0have\u00a0to\u00a0remove\u00a0the\u00a0assignment\u00a0to\u00a0this._customer\u00a0in\u00a0the\u00a0constructor,\u00a0as\u00a0it\nwill\u00a0just\u00a0be\u00a0ignored. But\u00a0I\u00a0prefer\u00a0to\u00a0do\u00a0it\u00a0since\u00a0that\u00a0will\u00a0make\u00a0a\u00a0test\u00a0fail\u00a0if\u00a0I\u00a0miss\nchanging\u00a0a\u00a0use\u00a0of\u00a0field\u00a0to\u00a0the\u00a0parameter. (And\u00a0if\u00a0a\u00a0test\u00a0doesn\u2019t\u00a0fail,\u00a0I\u00a0should\u00a0consider\nadding\u00a0a\u00a0new\u00a0test.) I\u00a0repeat\u00a0this\u00a0for\u00a0the\u00a0other\u00a0parameters,\u00a0ending\u00a0up\u00a0with\nclass\u00a0ChargeCalculator\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\ncharge(customer,\u00a0usage,\u00a0provider)\u00a0{\n\u00a0\u00a0const\u00a0baseCharge\u00a0=\u00a0customer.baseRate\u00a0*\u00a0usage\u037e\n\u00a0\u00a0return\u00a0baseCharge\u00a0+\u00a0provider.connectionCharge\u037e\n}\nOnce\u00a0I\u2019ve\u00a0done\u00a0all\u00a0of\u00a0these,\u00a0I\u00a0can\u00a0inline\u00a0into\u00a0the\u00a0top\u00adlevel\u00a0charge\u00a0function. This\u00a0is\u00a0a\nspecial\u00a0kind\u00a0of\u00a0Inline\u00a0Function\u00a0(115),\u00a0as\u00a0it\u2019s\u00a0inlining\u00a0both\u00a0the\u00a0constructor\u00a0and\u00a0method\ncall\u00a0together. top\u00a0level\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0charge(customer,\u00a0usage,\u00a0provider)\u00a0{\n\u00a0\u00a0const\u00a0baseCharge\u00a0=\u00a0customer.baseRate\u00a0*\u00a0usage\u037e\n\u00a0\u00a0return\u00a0baseCharge\u00a0+\u00a0provider.connectionCharge\u037e\n}\nThe\u00a0command\u00a0class\u00a0is\u00a0now\u00a0dead\u00a0code,\u00a0so\u00a0I\u2019ll\u00a0use\u00a0Remove\u00a0Dead\u00a0Code\u00a0(237)\u00a0to\u00a0give\u00a0it\u00a0an\nhonorable\u00a0burial. www.EBooksWorld.ir", "domains": ["Design Patterns"], "source": "Refactoring.Improving.the.Design.of.Existing.Code.pdf", "section": "Page 388", "position": 388, "chunk_type": "semantic", "token_estimate": 172}
{"text": "If\u00a0this\u00a0refactoring\u00a0starts\u00a0getting\u00a0messy,\u00a0I\u00a0reach\u00a0for\u00a0Replace\u00a0Constructor\u00a0with\u00a0Factory: Function\u00a0(334). Mechanics\nDefine\u00a0a\u00a0superclass\u00a0constructor,\u00a0if\u00a0one\u00a0doesn\u2019t\u00a0already\u00a0exist. Ensure\u00a0it\u2019s\u00a0called\u00a0by\nsubclass\u00a0constructors. Use\u00a0Slide\u00a0Statements\u00a0(223)\u00a0to\u00a0move\u00a0any\u00a0common\u00a0statements\u00a0to\u00a0just\u00a0after\u00a0the\u00a0super\ncall. Remove\u00a0the\u00a0common\u00a0code\u00a0from\u00a0each\u00a0subclass\u00a0and\u00a0put\u00a0it\u00a0in\u00a0the\u00a0superclass. Add\u00a0to\nthe\u00a0super\u00a0call\u00a0any\u00a0constructor\u00a0parameters\u00a0referenced\u00a0in\u00a0the\u00a0common\u00a0code. Test. If\u00a0there\u00a0is\u00a0any\u00a0common\u00a0code\u00a0that\u00a0cannot\u00a0move\u00a0to\u00a0the\u00a0start\u00a0of\u00a0the\u00a0constructor,\u00a0use\nExtract\u00a0Function\u00a0(106)\u00a0followed\u00a0by\u00a0Pull\u00a0Up\u00a0Method\u00a0(350). Example\nI\u00a0start\u00a0with\u00a0the\u00a0following\u00a0code:\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nclass\u00a0Party\u00a0{}\nclass\u00a0Employee\u00a0extends\u00a0Party\u00a0{\n\u00a0\u00a0constructor(name,\u00a0id,\u00a0monthlyCost)\u00a0{\n\u00a0\u00a0\u00a0\u00a0super()\u037e\n\u00a0\u00a0\u00a0\u00a0this._id\u00a0=\u00a0id\u037e\n\u00a0\u00a0\u00a0\u00a0this._name\u00a0=\u00a0name\u037e\n\u00a0\u00a0\u00a0\u00a0this._monthlyCost\u00a0=\u00a0monthlyCost\u037e\n\u00a0\u00a0}\n\u00a0\u00a0//\u00a0rest\u00a0of\u00a0class...\nclass\u00a0Department\u00a0extends\u00a0Party\u00a0{\n\u00a0\u00a0constructor(name,\u00a0staff){\n\u00a0\u00a0\u00a0\u00a0super()\u037e\n\u00a0\u00a0\u00a0\u00a0this._name\u00a0=\u00a0name\u037e\n\u00a0\u00a0\u00a0\u00a0this._staff\u00a0=\u00a0staff\u037e\n\u00a0\u00a0}\n\u00a0\u00a0//\u00a0rest\u00a0of\u00a0class... The\u00a0common\u00a0code\u00a0here\u00a0is\u00a0the\u00a0assignment\u00a0of\u00a0the\u00a0name. I\u00a0use\u00a0Slide\u00a0Statements\u00a0(223)\u00a0to\nwww.EBooksWorld.ir", "domains": ["Design Patterns", "Domain-Driven Design"], "source": "Refactoring.Improving.the.Design.of.Existing.Code.pdf", "section": "Page 396", "position": 396, "chunk_type": "semantic", "token_estimate": 174}
{"text": "subsumes:\u00a0Replace\u00a0Type\u00a0Code\u00a0with\u00a0State/Strategy: subsumes:\u00a0Extract\u00a0Subclass\ninverse\u00a0of:\u00a0Remove\u00a0Subclass\u00a0(369)\nMotivation\nSoftware\u00a0systems\u00a0often\u00a0need\u00a0to\u00a0represent\u00a0different\u00a0kinds\u00a0of\u00a0a\u00a0similar\u00a0thing. I\u00a0may\nclassify\u00a0employees\u00a0by\u00a0their\u00a0job\u00a0type\u00a0(engineer,\u00a0manager,\u00a0salesman),\u00a0or\u00a0orders\u00a0by\u00a0their\npriority\u00a0(rush,\u00a0regular). My\u00a0first\u00a0tool\u00a0for\u00a0handling\u00a0this\u00a0is\u00a0some\u00a0kind\u00a0of\u00a0type\u00a0code\u00a0field\u2014\nwww.EBooksWorld.ir", "domains": ["Design Patterns"], "source": "Refactoring.Improving.the.Design.of.Existing.Code.pdf", "section": "Page 401", "position": 401, "chunk_type": "semantic", "token_estimate": 59}
{"text": "depending\u00a0on\u00a0the\u00a0language,\u00a0that\u00a0might\u00a0be\u00a0an\u00a0enum,\u00a0symbol,\u00a0string,\u00a0or\u00a0number.\u00a0Often,: this\u00a0type\u00a0code\u00a0will\u00a0come\u00a0from\u00a0an\u00a0external\u00a0service\u00a0that\u00a0provides\u00a0me\u00a0with\u00a0the\u00a0data\u00a0I\u2019m\nworking\u00a0on. Most\u00a0of\u00a0the\u00a0time,\u00a0such\u00a0a\u00a0type\u00a0code\u00a0is\u00a0all\u00a0I\u00a0need. But\u00a0there\u00a0are\u00a0a\u00a0couple\u00a0of\u00a0situations\nwhere\u00a0I\u00a0could\u00a0do\u00a0with\u00a0something\u00a0more,\u00a0and\u00a0that\u00a0something\u00a0more\u00a0are\u00a0subclasses. There\nare\u00a0two\u00a0things\u00a0that\u00a0are\u00a0particularly\u00a0enticing\u00a0about\u00a0subclasses. First,\u00a0they\u00a0allow\u00a0me\u00a0to\nuse\u00a0polymorphism\u00a0to\u00a0handle\u00a0conditional\u00a0logic. I\u00a0find\u00a0this\u00a0most\u00a0helpful\u00a0when\u00a0I\u00a0have\nseveral\u00a0functions\u00a0that\u00a0invoke\u00a0different\u00a0behavior\u00a0depending\u00a0on\u00a0the\u00a0value\u00a0of\u00a0the\u00a0type\ncode. With\u00a0subclasses,\u00a0I\u00a0can\u00a0apply\u00a0Replace\u00a0Conditional\u00a0with\u00a0Polymorphism\u00a0(272)\u00a0to\nthese\u00a0functions. The\u00a0second\u00a0case\u00a0is\u00a0where\u00a0I\u00a0have\u00a0fields\u00a0or\u00a0methods\u00a0that\u00a0are\u00a0only\u00a0valid\u00a0for\u00a0particular\nvalues\u00a0of\u00a0a\u00a0type\u00a0code,\u00a0such\u00a0as\u00a0a\u00a0sales\u00a0quota\u00a0that\u2019s\u00a0only\u00a0applicable\u00a0to\u00a0the\u00a0\u201csalesman\u201d\u00a0type\ncode.\u00a0I\u00a0can\u00a0then\u00a0create\u00a0the\u00a0subclass\u00a0and\u00a0apply\u00a0Push\u00a0Down\u00a0Field\u00a0(361). While\u00a0I\u00a0can\ninclude\u00a0validation\u00a0logic\u00a0to\u00a0ensure\u00a0a\u00a0field\u00a0is\u00a0only\u00a0used\u00a0when\u00a0the\u00a0type\u00a0code\u00a0has\u00a0the\u00a0correct\nvalue,\u00a0using\u00a0a\u00a0subclass\u00a0makes\u00a0the\u00a0relationship\u00a0more\u00a0explicit. When\u00a0using\u00a0Replace\u00a0Type\u00a0Code\u00a0with\u00a0Subclasses,\u00a0I\u00a0need\u00a0to\u00a0consider\u00a0whether\u00a0to\u00a0apply\u00a0it\ndirectly\u00a0to\u00a0the\u00a0class\u00a0I\u2019m\u00a0looking\u00a0at,\u00a0or\u00a0to\u00a0the\u00a0type\u00a0code\u00a0itself. Do\u00a0I\u00a0make\u00a0engineer\u00a0a\nsubtype\u00a0of\u00a0employee,\u00a0or\u00a0should\u00a0I\u00a0give\u00a0the\u00a0employee\u00a0an\u00a0employee\u00a0type\u00a0property\u00a0which\ncan\u00a0have\u00a0subtypes\u00a0for\u00a0engineer\u00a0and\u00a0manager? Using\u00a0direct\u00a0subclassing\u00a0is\u00a0simpler,\u00a0but\u00a0I\ncan\u2019t\u00a0use\u00a0it\u00a0for\u00a0the\u00a0job\u00a0type\u00a0if\u00a0I\u00a0need\u00a0it\u00a0for\u00a0something\u00a0else. I\u00a0also\u00a0can\u2019t\u00a0use\u00a0direct\nsubclasses\u00a0if\u00a0the\u00a0type\u00a0is\u00a0mutable. If\u00a0I\u00a0need\u00a0to\u00a0move\u00a0the\u00a0subclasses\u00a0to\u00a0an\u00a0employee\u00a0type\nproperty,\u00a0I\u00a0can\u00a0do\u00a0that\u00a0by\u00a0using\u00a0Replace\u00a0Primitive\u00a0with\u00a0Object\u00a0(174)\u00a0on\u00a0the\u00a0type\u00a0code\u00a0to\ncreate\u00a0an\u00a0employee\u00a0type\u00a0class\u00a0and\u00a0then\u00a0using\u00a0Replace\u00a0Type\u00a0Code\u00a0with\u00a0Subclasses\u00a0on\nthat\u00a0new\u00a0class. Mechanics\nSelf\u00adencapsulate\u00a0the\u00a0type\u00a0code\u00a0field. Pick\u00a0one\u00a0type\u00a0code\u00a0value.\u00a0Create\u00a0a\u00a0subclass\u00a0for\u00a0that\u00a0type\u00a0code. Override\u00a0the\u00a0type\ncode\u00a0getter\u00a0to\u00a0return\u00a0the\u00a0literal\u00a0type\u00a0code\u00a0value. Create\u00a0selector\u00a0logic\u00a0to\u00a0map\u00a0from\u00a0the\u00a0type\u00a0code\u00a0parameter\u00a0to\u00a0the\u00a0new\u00a0subclass. With\u00a0direct\u00a0inheritance,\u00a0use\u00a0Replace\u00a0Constructor\u00a0with\u00a0Factory\u00a0Function\u00a0(334)\u00a0and\nput\u00a0the\u00a0selector\u00a0logic\u00a0in\u00a0the\u00a0factory. With\u00a0indirect\u00a0inheritance,\u00a0the\u00a0selector\u00a0logic\u00a0may\nstay\u00a0in\u00a0the\u00a0constructor. www.EBooksWorld.ir", "domains": ["Design Patterns", "Domain-Driven Design"], "source": "Refactoring.Improving.the.Design.of.Existing.Code.pdf", "section": "Page 402", "position": 402, "chunk_type": "semantic", "token_estimate": 400}
{"text": "employee\u00a0class\u00a0itself.\u00a0The\u00a0employee\u00a0subclass\u00a0is\u00a0simple\u2014just\u00a0overriding\u00a0the\u00a0type\u00a0code: getter\u00a0with\u00a0the\u00a0appropriate\u00a0literal\u00a0value. Click\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nclass\u00a0Engineer\u00a0extends\u00a0Employee\u00a0{\n\u00a0\u00a0get\u00a0type()\u00a0{return\u00a0\"engineer\"\u037e}\n}\nAlthough\u00a0JavaScript\u00a0constructors\u00a0can\u00a0return\u00a0other\u00a0objects,\u00a0things\u00a0will\u00a0get\u00a0messy\u00a0if\u00a0I\u00a0try\nto\u00a0put\u00a0selector\u00a0logic\u00a0in\u00a0there,\u00a0since\u00a0that\u00a0logic\u00a0gets\u00a0intertwined\u00a0with\u00a0field\u00a0initialization. So\nI\u00a0use\u00a0Replace\u00a0Constructor\u00a0with\u00a0Factory\u00a0Function\u00a0(334)\u00a0to\u00a0create\u00a0a\u00a0new\u00a0space\u00a0for\u00a0it. Click\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0createEmployee(name,\u00a0type)\u00a0{\n\u00a0\u00a0return\u00a0new\u00a0Employee(name,\u00a0type)\u037e\n}\nTo\u00a0use\u00a0the\u00a0new\u00a0subclass,\u00a0I\u00a0add\u00a0selector\u00a0logic\u00a0into\u00a0the\u00a0factory. Click\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0createEmployee(name,\u00a0type)\u00a0{\n\u00a0\u00a0switch\u00a0(type)\u00a0{\n\u00a0\u00a0\u00a0\u00a0case\u00a0\"engineer\":\u00a0return\u00a0new\u00a0Engineer(name,\u00a0type)\u037e\n\u00a0\u00a0}\n\u00a0\u00a0return\u00a0new\u00a0Employee(name,\u00a0type)\u037e\n}\nI\u00a0test\u00a0to\u00a0ensure\u00a0that\u00a0worked\u00a0out\u00a0correctly. But,\u00a0because\u00a0I\u2019m\u00a0paranoid,\u00a0I\u00a0then\u00a0alter\u00a0the\nreturn\u00a0value\u00a0of\u00a0the\u00a0engineer\u2019s\u00a0override\u00a0and\u00a0test\u00a0again\u00a0to\u00a0ensure\u00a0the\u00a0test\u00a0fails. That\u00a0way\u00a0I\nknow\u00a0the\u00a0subclass\u00a0is\u00a0being\u00a0used. I\u00a0correct\u00a0the\u00a0return\u00a0value\u00a0and\u00a0continue\u00a0with\u00a0the\u00a0other\ncases.\u00a0I\u00a0can\u00a0do\u00a0them\u00a0one\u00a0at\u00a0a\u00a0time,\u00a0testing\u00a0after\u00a0each\u00a0change. Click\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nclass\u00a0Salesman\u00a0extends\u00a0Employee\u00a0{\n\u00a0\u00a0get\u00a0type()\u00a0{return\u00a0\"salesman\"\u037e}\n}\nclass\u00a0Manager\u00a0extends\u00a0Employee\u00a0{\n\u00a0\u00a0get\u00a0type()\u00a0{return\u00a0\"manager\"\u037e}\nwww.EBooksWorld.ir", "domains": ["Design Patterns", "Domain-Driven Design"], "source": "Refactoring.Improving.the.Design.of.Existing.Code.pdf", "section": "Page 404", "position": 404, "chunk_type": "semantic", "token_estimate": 218}
{"text": "return\u00a0`${this._name}\u00a0(${this.type.capitalizedName})`\u037e: `\u037e\n}\nclass\u00a0EmployeeType\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nget\u00a0capitalizedName()\u00a0{\n\u00a0\u00a0return\u00a0this.toString().charAt(0).toUpperCase()\n\u00a0\u00a0\u00a0\u00a0+\u00a0this.toString().substr(1).toLowerCase()\u037e\n}\nFor\u00a0those\u00a0familiar\u00a0with\u00a0the\u00a0first\u00a0edition\u00a0of\u00a0the\u00a0book,\u00a0this\u00a0example\u00a0essentially\u00a0supersedes\nthe\u00a0Replace\u00a0Type\u00a0Code\u00a0with\u00a0State/Strategy. I\u00a0now\u00a0think\u00a0of\u00a0that\u00a0refactoring\u00a0as\u00a0Replace\nType\u00a0Code\u00a0with\u00a0Subclasses\u00a0using\u00a0indirect\u00a0inheritance,\u00a0so\u00a0didn\u2019t\u00a0consider\u00a0it\u00a0worth\u00a0its\nown\u00a0entry\u00a0in\u00a0the\u00a0catalog.\u00a0(I\u00a0never\u00a0liked\u00a0the\u00a0name\u00a0anyway.)", "domains": ["Design Patterns"], "source": "Refactoring.Improving.the.Design.of.Existing.Code.pdf", "section": "Page 409", "position": 409, "chunk_type": "semantic", "token_estimate": 73}
{"text": "Motivation: Subclasses\u00a0are\u00a0useful. They\u00a0support\u00a0variations\u00a0in\u00a0data\u00a0structure\u00a0and\u00a0polymorphic\nbehavior.\u00a0They\u00a0are\u00a0a\u00a0good\u00a0way\u00a0to\u00a0program\u00a0by\u00a0difference. But\u00a0as\u00a0a\u00a0software\u00a0system\nevolves,\u00a0subclasses\u00a0can\u00a0lose\u00a0their\u00a0value\u00a0as\u00a0the\u00a0variations\u00a0they\u00a0support\u00a0are\u00a0moved\u00a0to\nother\u00a0places\u00a0or\u00a0removed\u00a0altogether. Sometimes,\u00a0subclasses\u00a0are\u00a0added\u00a0in\u00a0anticipation\u00a0of\nfeatures\u00a0that\u00a0never\u00a0end\u00a0up\u00a0being\u00a0built,\u00a0or\u00a0end\u00a0up\u00a0being\u00a0built\u00a0in\u00a0a\u00a0way\u00a0that\u00a0doesn\u2019t\u00a0need\nthe\u00a0subclasses. A\u00a0subclass\u00a0that\u00a0does\u00a0too\u00a0little\u00a0incurs\u00a0a\u00a0cost\u00a0in\u00a0understanding\u00a0that\u00a0is\u00a0no\u00a0longer\nworthwhile. When\u00a0that\u00a0time\u00a0comes,\u00a0it\u2019s\u00a0best\u00a0to\u00a0remove\u00a0the\u00a0subclass,\u00a0replacing\u00a0it\u00a0with\u00a0a\nfield\u00a0on\u00a0its\u00a0superclass. Mechanics\nUse\u00a0Replace\u00a0Constructor\u00a0with\u00a0Factory\u00a0Function\u00a0(334)\u00a0on\u00a0the\u00a0subclass\u00a0constructor. If\u00a0the\u00a0clients\u00a0of\u00a0the\u00a0constructors\u00a0use\u00a0a\u00a0data\u00a0field\u00a0to\u00a0decide\u00a0which\u00a0subclass\u00a0to\u00a0create,\nput\u00a0that\u00a0decision\u00a0logic\u00a0into\u00a0a\u00a0superclass\u00a0factory\u00a0method. If\u00a0any\u00a0code\u00a0tests\u00a0against\u00a0the\u00a0subclass\u2019s\u00a0types,\u00a0use\u00a0Extract\u00a0Function\u00a0(106)\u00a0on\u00a0the\u00a0type\nwww.EBooksWorld.ir", "domains": ["Design Patterns", "Domain-Driven Design"], "source": "Refactoring.Improving.the.Design.of.Existing.Code.pdf", "section": "Page 410", "position": 410, "chunk_type": "semantic", "token_estimate": 160}
{"text": "test\u00a0and\u00a0Move\u00a0Function\u00a0(198)\u00a0to\u00a0move\u00a0it\u00a0to\u00a0the\u00a0superclass.\u00a0Test\u00a0after\u00a0each\u00a0change.: Create\u00a0a\u00a0field\u00a0to\u00a0represent\u00a0the\u00a0subclass\u00a0type. Change\u00a0the\u00a0methods\u00a0that\u00a0refer\u00a0to\u00a0the\u00a0subclass\u00a0to\u00a0use\u00a0the\u00a0new\u00a0type\u00a0field. Delete\u00a0the\u00a0subclass. Test. Often,\u00a0this\u00a0refactoring\u00a0is\u00a0used\u00a0on\u00a0a\u00a0group\u00a0of\u00a0subclasses\u00a0at\u00a0once\u2014in\u00a0which\u00a0case\u00a0carry\u00a0out\nthe\u00a0steps\u00a0to\u00a0encapsulate\u00a0them\u00a0(add\u00a0factory\u00a0function,\u00a0move\u00a0type\u00a0tests)\u00a0first,\u00a0then\nindividually\u00a0fold\u00a0them\u00a0into\u00a0the\u00a0superclass. Example\nI\u2019ll\u00a0start\u00a0with\u00a0this\u00a0stump\u00a0of\u00a0subclasses:\nclass\u00a0Person\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nconstructor(name)\u00a0{\n\u00a0\u00a0this._name\u00a0=\u00a0name\u037e\n}\nget\u00a0name()\u00a0\u00a0\u00a0\u00a0{return\u00a0this._name\u037e}\nget\u00a0genderCode()\u00a0{return\u00a0\"X\"\u037e}\n//\u00a0snip\nclass\u00a0Male\u00a0extends\u00a0Person\u00a0{\n\u00a0\u00a0get\u00a0genderCode()\u00a0{return\u00a0\"M\"\u037e}\n}\nclass\u00a0Female\u00a0extends\u00a0Person\u00a0{\n\u00a0\u00a0get\u00a0genderCode()\u00a0{return\u00a0\"F\"\u037e}\n}\nIf\u00a0that\u2019s\u00a0all\u00a0that\u00a0a\u00a0subclass\u00a0does,\u00a0it\u2019s\u00a0not\u00a0really\u00a0worth\u00a0having. But\u00a0before\u00a0I\u00a0remove\u00a0these\nsubclasses,\u00a0it\u2019s\u00a0usually\u00a0worth\u00a0checking\u00a0to\u00a0see\u00a0if\u00a0there\u2019s\u00a0any\u00a0subclass\u00addependent\u00a0behavior\nin\u00a0the\u00a0clients\u00a0that\u00a0should\u00a0be\u00a0moved\u00a0in\u00a0there. In\u00a0this\u00a0case,\u00a0I\u00a0don\u2019t\u00a0find\u00a0anything\u00a0worth\nkeeping\u00a0the\u00a0subclasses\u00a0for. client\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nwww.EBooksWorld.ir", "domains": ["Design Patterns", "Domain-Driven Design"], "source": "Refactoring.Improving.the.Design.of.Existing.Code.pdf", "section": "Page 411", "position": 411, "chunk_type": "semantic", "token_estimate": 186}
{"text": "const\u00a0numberOfMales\u00a0=\u00a0people.filter(p\u00a0=>\u00a0p\u00a0instanceof\u00a0Male).length\u037e: Whenever\u00a0I\u00a0want\u00a0to\u00a0change\u00a0how\u00a0I\u00a0represent\u00a0something,\u00a0I\u00a0try\u00a0to\u00a0first\u00a0encapsulate\u00a0the\ncurrent\u00a0representation\u00a0to\u00a0minimize\u00a0the\u00a0impact\u00a0on\u00a0any\u00a0client\u00a0code. When\u00a0it\u00a0comes\u00a0to\ncreating\u00a0subclasses,\u00a0the\u00a0way\u00a0to\u00a0encapsulate\u00a0is\u00a0to\u00a0use\u00a0Replace\u00a0Constructor\u00a0with\u00a0Factory\nFunction\u00a0(334).\u00a0In\u00a0this\u00a0case,\u00a0there\u2019s\u00a0a\u00a0couple\u00a0of\u00a0ways\u00a0I\u00a0could\u00a0make\u00a0the\u00a0factory. The\u00a0most\u00a0direct\u00a0way\u00a0is\u00a0to\u00a0create\u00a0a\u00a0factory\u00a0method\u00a0for\u00a0each\u00a0constructor. Click\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0createPerson(name)\u00a0{\n\u00a0\u00a0return\u00a0new\u00a0Person(name)\u037e\n}\nfunction\u00a0createMale(name)\u00a0{\n\u00a0\u00a0return\u00a0new\u00a0Male(name)\u037e\n}\nfunction\u00a0createFemale(name)\u00a0{\n\u00a0\u00a0return\u00a0new\u00a0Female(name)\u037e\n}\nBut\u00a0although\u00a0that\u2019s\u00a0the\u00a0direct\u00a0choice,\u00a0objects\u00a0like\u00a0this\u00a0are\u00a0often\u00a0loaded\u00a0from\u00a0a\u00a0source\nthat\u00a0uses\u00a0the\u00a0gender\u00a0codes\u00a0directly. Click\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0loadFromInput(data)\u00a0{\n\u00a0\u00a0const\u00a0result\u00a0=\u00a0[]\u037e\n\u00a0\u00a0data.forEach(aRecord\u00a0=>\u00a0{\n\u00a0\u00a0\u00a0\u00a0let\u00a0p\u037e\n\u00a0\u00a0\u00a0\u00a0switch\u00a0(aRecord.gender)\u00a0{\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0case\u00a0'M':\u00a0p\u00a0=\u00a0new\u00a0Male(aRecord.name)\u037e\u00a0break\u037e\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0case\u00a0'F':\u00a0p\u00a0=\u00a0new\u00a0Female(aRecord.name)\u037e\u00a0break\u037e\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0default:\u00a0p\u00a0=\u00a0new\u00a0Person(aRecord.name)\u037e\n\u00a0\u00a0\u00a0\u00a0}\n\u00a0\u00a0\u00a0\u00a0result.push(p)\u037e\n\u00a0\u00a0})\u037e\n\u00a0\u00a0return\u00a0result\u037e\n}\nIn\u00a0that\u00a0case,\u00a0I\u00a0find\u00a0it\u00a0better\u00a0to\u00a0use\u00a0Extract\u00a0Function\u00a0(106)\u00a0on\u00a0the\u00a0selection\u00a0logic\u00a0for\nwhich\u00a0class\u00a0to\u00a0create,\u00a0and\u00a0make\u00a0that\u00a0the\u00a0factory\u00a0function. Click\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nwww.EBooksWorld.ir", "domains": ["Design Patterns", "Domain-Driven Design"], "source": "Refactoring.Improving.the.Design.of.Existing.Code.pdf", "section": "Page 412", "position": 412, "chunk_type": "semantic", "token_estimate": 206}
{"text": "function\u00a0createPerson(aRecord)\u00a0{: let\u00a0p\u037e\n\u00a0\u00a0switch\u00a0(aRecord.gender)\u00a0{\n\u00a0\u00a0\u00a0\u00a0case\u00a0'M':\u00a0p\u00a0=\u00a0new\u00a0Male(aRecord.name)\u037e\u00a0break\u037e\n\u00a0\u00a0\u00a0\u00a0case\u00a0'F':\u00a0p\u00a0=\u00a0new\u00a0Female(aRecord.name)\u037e\u00a0break\u037e\n\u00a0\u00a0\u00a0\u00a0default:\u00a0p\u00a0=\u00a0new\u00a0Person(aRecord.name)\u037e\n\u00a0\u00a0}\n\u00a0\u00a0return\u00a0p\u037e\n}\nfunction\u00a0loadFromInput(data)\u00a0{\n\u00a0\u00a0const\u00a0result\u00a0=\u00a0[]\u037e\n\u00a0\u00a0data.forEach(aRecord\u00a0=>\u00a0{\n\u00a0\u00a0\u00a0\u00a0result.push(createPerson(aRecord))\u037e\n\u00a0\u00a0})\u037e\n\u00a0\u00a0return\u00a0result\u037e\n}\nWhile\u00a0I\u2019m\u00a0there,\u00a0I\u2019ll\u00a0clean\u00a0up\u00a0those\u00a0two\u00a0functions. I\u2019ll\u00a0use\u00a0Inline\u00a0Variable\u00a0(123)\u00a0on\ncreatePerson:\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0createPerson(aRecord)\u00a0{\n\u00a0\u00a0switch\u00a0(aRecord.gender)\u00a0{\n\u00a0\u00a0\u00a0\u00a0case\u00a0'M':\u00a0return\u00a0new\u00a0Male\u00a0\u00a0(aRecord.name)\u037e\n\u00a0\u00a0\u00a0\u00a0case\u00a0'F':\u00a0return\u00a0new\u00a0Female(aRecord.name)\u037e\n\u00a0\u00a0\u00a0\u00a0default:\u00a0\u00a0return\u00a0new\u00a0Person(aRecord.name)\u037e\n\u00a0\u00a0}\n}\nand\u00a0Replace\u00a0Loop\u00a0with\u00a0Pipeline\u00a0(231)\u00a0on\u00a0loadFromInput:\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0loadFromInput(data)\u00a0{\n\u00a0\u00a0return\u00a0data.map(aRecord\u00a0=>\u00a0createPerson(aRecord))\u037e\n}\nThe\u00a0factory\u00a0encapsulates\u00a0the\u00a0creation\u00a0of\u00a0the\u00a0subclasses,\u00a0but\u00a0there\u00a0is\u00a0also\u00a0the\u00a0use\u00a0of\ninstanceof\u2014which\u00a0never\u00a0smells\u00a0good. I\u00a0use\u00a0Extract\u00a0Function\u00a0(106)\u00a0on\u00a0the\u00a0type\ncheck. client\u2026\nwww.EBooksWorld.ir", "domains": ["Design Patterns", "Domain-Driven Design"], "source": "Refactoring.Improving.the.Design.of.Existing.Code.pdf", "section": "Page 413", "position": 413, "chunk_type": "semantic", "token_estimate": 143}
{"text": "Click\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image: const\u00a0numberOfMales\u00a0=\u00a0people.filter(p\u00a0=>\u00a0isMale(p)).length\u037e\nfunction\u00a0isMale(aPerson)\u00a0{return\u00a0aPerson\u00a0instanceof\u00a0Male\u037e}\nThen\u00a0I\u00a0use\u00a0Move\u00a0Function\u00a0(198)\u00a0to\u00a0move\u00a0it\u00a0into\u00a0Person. class\u00a0Person\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nget\u00a0isMale()\u00a0{return\u00a0this\u00a0instanceof\u00a0Male\u037e}\nclient\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nconst\u00a0numberOfMales\u00a0=\u00a0people.filter(p\u00a0=>\u00a0p.isMale).length\u037e\nWith\u00a0that\u00a0refactoring\u00a0done,\u00a0all\u00a0knowledge\u00a0of\u00a0the\u00a0subclasses\u00a0is\u00a0now\u00a0safely\u00a0encased\u00a0within\nthe\u00a0superclass\u00a0and\u00a0the\u00a0factory\u00a0function. (Usually\u00a0I\u2019m\u00a0wary\u00a0of\u00a0a\u00a0superclass\u00a0referring\u00a0to\u00a0a\nsubclass,\u00a0but\u00a0this\u00a0code\u00a0isn\u2019t\u00a0going\u00a0to\u00a0last\u00a0until\u00a0my\u00a0next\u00a0cup\u00a0of\u00a0tea,\u00a0so\u00a0I\u2019m\u00a0not\u00a0going\u00a0worry\nabout\u00a0it.) I\u00a0now\u00a0add\u00a0a\u00a0field\u00a0to\u00a0represent\u00a0the\u00a0difference\u00a0between\u00a0the\u00a0subclasses\u037e\u00a0since\u00a0I\u2019m\u00a0using\u00a0a\ncode\u00a0loaded\u00a0from\u00a0elsewhere,\u00a0I\u00a0might\u00a0as\u00a0well\u00a0just\u00a0use\u00a0that. class\u00a0Person\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nconstructor(name,\u00a0genderCode)\u00a0{\n\u00a0\u00a0this._name\u00a0=\u00a0name\u037e\n\u00a0\u00a0this._genderCode\u00a0=\u00a0genderCode\u00a0||\u00a0\"X\"\u037e\n}\nget\u00a0genderCode()\u00a0{return\u00a0this._genderCode\u037e}\nWhen\u00a0initializing\u00a0it,\u00a0I\u00a0set\u00a0it\u00a0to\u00a0the\u00a0default\u00a0case. (As\u00a0a\u00a0side\u00a0note,\u00a0although\u00a0most\u00a0people\ncan\u00a0be\u00a0classified\u00a0as\u00a0male\u00a0or\u00a0female,\u00a0there\u00a0are\u00a0people\u00a0who\u00a0can\u2019t. It\u2019s\u00a0a\u00a0common\u00a0modeling\nwww.EBooksWorld.ir", "domains": ["Design Patterns", "Domain-Driven Design"], "source": "Refactoring.Improving.the.Design.of.Existing.Code.pdf", "section": "Page 414", "position": 414, "chunk_type": "semantic", "token_estimate": 191}
{"text": "mistake\u00a0to\u00a0forget\u00a0that.): I\u00a0then\u00a0take\u00a0the\u00a0male\u00a0case\u00a0and\u00a0fold\u00a0its\u00a0logic\u00a0into\u00a0the\u00a0superclass. This\u00a0involves\u00a0modifying\nthe\u00a0factory\u00a0to\u00a0return\u00a0a\u00a0Person\u00a0and\u00a0modifying\u00a0any\u00a0instanceof\u00a0tests\u00a0to\u00a0use\u00a0the\u00a0gender\ncode\u00a0field. Click\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0createPerson(aRecord)\u00a0{\n\u00a0\u00a0switch\u00a0(aRecord.gender)\u00a0{\n\u00a0\u00a0\u00a0\u00a0case\u00a0'M':\u00a0return\u00a0new\u00a0Person(aRecord.name,\u00a0\"M\")\u037e\n\u00a0\u00a0\u00a0\u00a0case\u00a0'F':\u00a0return\u00a0new\u00a0Female(aRecord.name)\u037e\n\u00a0\u00a0\u00a0\u00a0default:\u00a0\u00a0return\u00a0new\u00a0Person(aRecord.name)\u037e\n\u00a0\u00a0}\n}\nclass\u00a0Person\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nget\u00a0isMale()\u00a0{return\u00a0\"M\"\u00a0===\u00a0this._genderCode\u037e}\nI\u00a0test,\u00a0remove\u00a0the\u00a0male\u00a0subclass,\u00a0test\u00a0again,\u00a0and\u00a0repeat\u00a0for\u00a0the\u00a0female\u00a0subclass. Click\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0createPerson(aRecord)\u00a0{\n\u00a0\u00a0switch\u00a0(aRecord.gender)\u00a0{\n\u00a0\u00a0\u00a0\u00a0case\u00a0'M':\u00a0return\u00a0new\u00a0Person(aRecord.name,\u00a0\"M\")\u037e\n\u00a0\u00a0\u00a0\u00a0case\u00a0'F':\u00a0return\u00a0new\u00a0Person(aRecord.name,\u00a0\"F\")\u037e\n\u00a0\u00a0\u00a0\u00a0default:\u00a0\u00a0return\u00a0new\u00a0Person(aRecord.name)\u037e\n\u00a0\u00a0}\n}\nI\u00a0find\u00a0the\u00a0lack\u00a0of\u00a0symmetry\u00a0with\u00a0the\u00a0gender\u00a0code\u00a0to\u00a0be\u00a0annoying. A\u00a0future\u00a0reader\u00a0of\u00a0the\ncode\u00a0will\u00a0always\u00a0wonder\u00a0about\u00a0this\u00a0lack\u00a0of\u00a0symmetry. So\u00a0I\u00a0prefer\u00a0to\u00a0change\u00a0the\u00a0code\u00a0to\nmake\u00a0it\u00a0symmetrical\u2014if\u00a0I\u00a0can\u00a0do\u00a0it\u00a0without\u00a0introducing\u00a0any\u00a0other\u00a0complexity,\u00a0which\u00a0is\nthe\u00a0case\u00a0here. Click\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0createPerson(aRecord)\u00a0{\n\u00a0\u00a0switch\u00a0(aRecord.gender)\u00a0{\nwww.EBooksWorld.ir", "domains": ["Design Patterns", "Domain-Driven Design"], "source": "Refactoring.Improving.the.Design.of.Existing.Code.pdf", "section": "Page 415", "position": 415, "chunk_type": "semantic", "token_estimate": 189}
{"text": "as\u00a0often\u00a0inheritance\u00a0is\u00a0something\u00a0I\u00a0realize\u00a0during\u00a0the\u00a0evolution\u00a0of\u00a0a\u00a0program,\u00a0as\u00a0I\u00a0find: common\u00a0elements\u00a0that\u00a0I\u00a0want\u00a0to\u00a0pull\u00a0together. An\u00a0alternative\u00a0to\u00a0Extract\u00a0Superclass\u00a0is\u00a0Extract\u00a0Class\u00a0(182). Here\u00a0you\u00a0have,\u00a0essentially,\u00a0a\nchoice\u00a0between\u00a0using\u00a0inheritance\u00a0or\u00a0delegation\u00a0as\u00a0a\u00a0way\u00a0to\u00a0unify\u00a0duplicate\u00a0behavior. Often\u00a0Extract\u00a0Superclass\u00a0is\u00a0the\u00a0simpler\u00a0approach,\u00a0so\u00a0I\u2019ll\u00a0do\u00a0this\u00a0first\u00a0knowing\u00a0I\u00a0can\u00a0use\nReplace\u00a0Superclass\u00a0with\u00a0Delegate\u00a0(399)\u00a0should\u00a0I\u00a0need\u00a0to\u00a0later. Mechanics\nCreate\u00a0an\u00a0empty\u00a0superclass.\u00a0Make\u00a0the\u00a0original\u00a0classes\u00a0its\u00a0subclasses. If\u00a0needed,\u00a0use\u00a0Change\u00a0Function\u00a0Declaration\u00a0(124)\u00a0on\u00a0the\u00a0constructors. Test. One\u00a0by\u00a0one,\u00a0use\u00a0Pull\u00a0Up\u00a0Constructor\u00a0Body\u00a0(355),\u00a0Pull\u00a0Up\u00a0Method\u00a0(350),\u00a0and\u00a0Pull\nUp\u00a0Field\u00a0(353)\u00a0to\u00a0move\u00a0common\u00a0elements\u00a0to\u00a0the\u00a0superclass. Examine\u00a0remaining\u00a0methods\u00a0on\u00a0the\u00a0subclasses.\u00a0See\u00a0if\u00a0there\u00a0are\u00a0common\u00a0parts. If\u00a0so,\nuse\u00a0Extract\u00a0Function\u00a0(106)\u00a0followed\u00a0by\u00a0Pull\u00a0Up\u00a0Method\u00a0(350). Check\u00a0clients\u00a0of\u00a0the\u00a0original\u00a0classes. Consider\u00a0adjusting\u00a0them\u00a0to\u00a0use\u00a0the\u00a0superclass\ninterface. Example\nI\u2019m\u00a0pondering\u00a0these\u00a0two\u00a0classes,\u00a0they\u00a0share\u00a0some\u00a0common\u00a0functionality\u2014their\u00a0name\nand\u00a0the\u00a0notions\u00a0of\u00a0annual\u00a0and\u00a0monthly\u00a0costs:\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nclass\u00a0Employee\u00a0{\n\u00a0\u00a0constructor(name,\u00a0id,\u00a0monthlyCost)\u00a0{\n\u00a0\u00a0\u00a0\u00a0this._id\u00a0=\u00a0id\u037e\n\u00a0\u00a0\u00a0\u00a0this._name\u00a0=\u00a0name\u037e\n\u00a0\u00a0\u00a0\u00a0this._monthlyCost\u00a0=\u00a0monthlyCost\u037e\n\u00a0\u00a0}\n\u00a0\u00a0get\u00a0monthlyCost()\u00a0{return\u00a0this._monthlyCost\u037e}\n\u00a0\u00a0get\u00a0name()\u00a0{return\u00a0this._name\u037e}\n\u00a0\u00a0get\u00a0id()\u00a0{return\u00a0this._id\u037e}\n\u00a0\u00a0get\u00a0annualCost()\u00a0{\n\u00a0\u00a0\u00a0\u00a0return\u00a0this.monthlyCost\u00a0*\u00a012\u037e\n\u00a0\u00a0}\nwww.EBooksWorld.ir", "domains": ["Code Organization"], "source": "Refactoring.Improving.the.Design.of.Existing.Code.pdf", "section": "Page 418", "position": 418, "chunk_type": "semantic", "token_estimate": 226}
{"text": "A\u00a0further\u00a0problem\u00a0is\u00a0that\u00a0inheritance\u00a0introduces\u00a0a\u00a0very\u00a0close\u00a0relationship\u00a0between: classes. Any\u00a0change\u00a0I\u00a0want\u00a0to\u00a0make\u00a0to\u00a0the\u00a0parent\u00a0can\u00a0easily\u00a0break\u00a0children,\u00a0so\u00a0I\u00a0have\u00a0to\nbe\u00a0careful\u00a0and\u00a0understand\u00a0how\u00a0children\u00a0derive\u00a0from\u00a0the\u00a0superclass. This\u00a0problem\u00a0is\nmade\u00a0worse\u00a0when\u00a0the\u00a0logic\u00a0of\u00a0the\u00a0two\u00a0classes\u00a0resides\u00a0in\u00a0different\u00a0modules\u00a0and\u00a0is\u00a0looked\nafter\u00a0by\u00a0different\u00a0teams. Delegation\u00a0handles\u00a0both\u00a0of\u00a0these\u00a0problems. I\u00a0can\u00a0delegate\u00a0to\u00a0many\u00a0different\u00a0classes\u00a0for\ndifferent\u00a0reasons. Delegation\u00a0is\u00a0a\u00a0regular\u00a0relationship\u00a0between\u00a0objects\u2014so\u00a0I\u00a0can\u00a0have\u00a0a\nclear\u00a0interface\u00a0to\u00a0work\u00a0with,\u00a0which\u00a0is\u00a0much\u00a0less\u00a0coupling\u00a0than\u00a0subclassing. It\u2019s\u00a0therefore\ncommon\u00a0to\u00a0run\u00a0into\u00a0the\u00a0problems\u00a0with\u00a0subclassing\u00a0and\u00a0apply\u00a0Replace\u00a0Subclass\u00a0with\nDelegate. There\u00a0is\u00a0a\u00a0popular\u00a0principle:\u00a0\u201cFavor\u00a0object\u00a0composition\u00a0over\u00a0class\u00a0inheritance\u201d\u00a0(where\ncomposition\u00a0is\u00a0effectively\u00a0the\u00a0same\u00a0as\u00a0delegation). Many\u00a0people\u00a0take\u00a0this\u00a0to\u00a0mean\n\u201cinheritance\u00a0considered\u00a0harmful\u201d\u00a0and\u00a0claim\u00a0that\u00a0we\u00a0should\u00a0never\u00a0use\u00a0inheritance. I\u00a0use\ninheritance\u00a0frequently,\u00a0partly\u00a0because\u00a0I\u00a0always\u00a0know\u00a0I\u00a0can\u00a0use\u00a0Replace\u00a0Subclass\u00a0with\nDelegate\u00a0should\u00a0I\u00a0need\u00a0to\u00a0change\u00a0it\u00a0later. Inheritance\u00a0is\u00a0a\u00a0valuable\u00a0mechanism\u00a0that\u00a0does\nthe\u00a0job\u00a0most\u00a0of\u00a0the\u00a0time\u00a0without\u00a0problems. So\u00a0I\u00a0reach\u00a0for\u00a0it\u00a0first,\u00a0and\u00a0move\u00a0onto\ndelegation\u00a0when\u00a0it\u00a0starts\u00a0to\u00a0rub\u00a0badly. This\u00a0usage\u00a0is\u00a0actually\u00a0consistent\u00a0with\u00a0the\nprinciple\u2014which\u00a0comes\u00a0from\u00a0the\u00a0Gang\u00a0of\u00a0Four\u00a0book\u00a0[gof]\u00a0that\u00a0explains\u00a0how\u00a0inheritance\nand\u00a0composition\u00a0work\u00a0together. The\u00a0principle\u00a0was\u00a0a\u00a0reaction\u00a0to\u00a0the\u00a0overuse\u00a0of\ninheritance. Those\u00a0who\u00a0are\u00a0familiar\u00a0with\u00a0the\u00a0Gang\u00a0of\u00a0Four\u00a0book\u00a0may\u00a0find\u00a0it\u00a0helpful\u00a0to\u00a0think\u00a0of\u00a0this\nrefactoring\u00a0as\u00a0replacing\u00a0subclasses\u00a0with\u00a0the\u00a0State\u00a0or\u00a0Strategy\u00a0patterns. Both\u00a0of\u00a0these\npatterns\u00a0are\u00a0structurally\u00a0the\u00a0same,\u00a0relying\u00a0on\u00a0the\u00a0host\u00a0delegating\u00a0to\u00a0a\u00a0separate\nhierarchy. Not\u00a0all\u00a0cases\u00a0of\u00a0Replace\u00a0Subclass\u00a0with\u00a0Delegate\u00a0involve\u00a0an\u00a0inheritance\nhierarchy\u00a0for\u00a0the\u00a0delegate\u00a0(as\u00a0the\u00a0first\u00a0example\u00a0below\u00a0illustrates),\u00a0but\u00a0setting\u00a0up\u00a0a\nhierarchy\u00a0for\u00a0states\u00a0or\u00a0strategies\u00a0is\u00a0often\u00a0useful. Mechanics\nIf\u00a0there\u00a0are\u00a0many\u00a0callers\u00a0for\u00a0the\u00a0constructors,\u00a0apply\u00a0Replace\u00a0Constructor\u00a0with\nFactory\u00a0Function\u00a0(334). Create\u00a0an\u00a0empty\u00a0class\u00a0for\u00a0the\u00a0delegate. Its\u00a0constructor\u00a0should\u00a0take\u00a0any\u00a0subclass\u00ad\nspecific\u00a0data\u00a0as\u00a0well\u00a0as,\u00a0usually,\u00a0a\u00a0back\u00adreference\u00a0to\u00a0the\u00a0superclass. Add\u00a0a\u00a0field\u00a0to\u00a0the\u00a0superclass\u00a0to\u00a0hold\u00a0the\u00a0delegate. Modify\u00a0the\u00a0creation\u00a0of\u00a0the\u00a0subclass\u00a0so\u00a0that\u00a0it\u00a0initializes\u00a0the\u00a0delegate\u00a0field\u00a0with\u00a0an\nwww.EBooksWorld.ir", "domains": ["Design Patterns", "Domain-Driven Design", "Code Organization"], "source": "Refactoring.Improving.the.Design.of.Existing.Code.pdf", "section": "Page 425", "position": 425, "chunk_type": "semantic", "token_estimate": 386}
{"text": "instance\u00a0of\u00a0the\u00a0delegate.: This\u00a0can\u00a0be\u00a0done\u00a0in\u00a0the\u00a0factory\u00a0function,\u00a0or\u00a0in\u00a0the\u00a0constructor\u00a0if\u00a0the\u00a0constructor\u00a0can\nreliably\u00a0tell\u00a0whether\u00a0to\u00a0create\u00a0the\u00a0correct\u00a0delegate. Choose\u00a0a\u00a0subclass\u00a0method\u00a0to\u00a0move\u00a0to\u00a0the\u00a0delegate\u00a0class. Use\u00a0Move\u00a0Function\u00a0(198)\u00a0to\u00a0move\u00a0it\u00a0to\u00a0the\u00a0delegate\u00a0class. Don\u2019t\u00a0remove\u00a0the\u00a0source\u2019s\ndelegating\u00a0code. If\u00a0the\u00a0method\u00a0needs\u00a0elements\u00a0that\u00a0should\u00a0move\u00a0to\u00a0the\u00a0delegate,\u00a0move\u00a0them. If\u00a0it\nneeds\u00a0elements\u00a0that\u00a0should\u00a0stay\u00a0in\u00a0the\u00a0superclass,\u00a0add\u00a0a\u00a0field\u00a0to\u00a0the\u00a0delegate\u00a0that\nrefers\u00a0to\u00a0the\u00a0superclass. If\u00a0the\u00a0source\u00a0method\u00a0has\u00a0callers\u00a0outside\u00a0the\u00a0class,\u00a0move\u00a0the\u00a0source\u2019s\u00a0delegating\u00a0code\nfrom\u00a0the\u00a0subclass\u00a0to\u00a0the\u00a0superclass,\u00a0guarding\u00a0it\u00a0with\u00a0a\u00a0check\u00a0for\u00a0the\u00a0presence\u00a0of\u00a0the\ndelegate.\u00a0If\u00a0not,\u00a0apply\u00a0Remove\u00a0Dead\u00a0Code\u00a0(237). If\u00a0there\u2019s\u00a0more\u00a0than\u00a0one\u00a0subclass,\u00a0and\u00a0you\u00a0start\u00a0duplicating\u00a0code\u00a0within\u00a0them,\u00a0use\nExtract\u00a0Superclass\u00a0(375). In\u00a0this\u00a0case,\u00a0any\u00a0delegating\u00a0methods\u00a0on\u00a0the\u00a0source\u00a0super\u00ad\nclass\u00a0no\u00a0longer\u00a0need\u00a0a\u00a0guard\u00a0if\u00a0the\u00a0default\u00a0behavior\u00a0is\u00a0moved\u00a0to\u00a0the\u00a0delegate\nsuperclass. Test. Repeat\u00a0until\u00a0all\u00a0the\u00a0methods\u00a0of\u00a0the\u00a0subclass\u00a0are\u00a0moved. Find\u00a0all\u00a0callers\u00a0of\u00a0the\u00a0subclasses\u2019s\u00a0constructor\u00a0and\u00a0change\u00a0them\u00a0to\u00a0use\u00a0the\nsuperclass\u00a0constructor. Test. Use\u00a0Remove\u00a0Dead\u00a0Code\u00a0(237)\u00a0on\u00a0the\u00a0subclass. Example\nI\u00a0have\u00a0a\u00a0class\u00a0that\u00a0makes\u00a0a\u00a0booking\u00a0for\u00a0a\u00a0show. class\u00a0Booking\u2026\nconstructor(show,\u00a0date)\u00a0{\n\u00a0\u00a0this._show\u00a0=\u00a0show\u037e\n\u00a0\u00a0this._date\u00a0=\u00a0date\u037e\nwww.EBooksWorld.ir", "domains": ["Design Patterns", "Domain-Driven Design"], "source": "Refactoring.Improving.the.Design.of.Existing.Code.pdf", "section": "Page 426", "position": 426, "chunk_type": "semantic", "token_estimate": 229}
{"text": "However,\u00a0if\u00a0these\u00a0occasions\u00a0are\u00a0not\u00a0too\u00a0common,\u00a0the\u00a0inheritance\u00a0pays\u00a0off\u2014provided\u00a0I: have\u00a0good\u00a0tests\u00a0to\u00a0detect\u00a0a\u00a0subclass\u00a0breakage. So\u00a0why\u00a0would\u00a0I\u00a0want\u00a0to\u00a0change\u00a0such\u00a0a\u00a0happy\u00a0situation\u00a0by\u00a0using\u00a0Replace\u00a0Subclass\u00a0with\nDelegate? Inheritance\u00a0is\u00a0a\u00a0tool\u00a0that\u00a0can\u00a0only\u00a0be\u00a0used\u00a0once\u2014so\u00a0if\u00a0I\u00a0have\u00a0another\u00a0reason\nto\u00a0use\u00a0inheritance,\u00a0and\u00a0I\u00a0think\u00a0it\u00a0will\u00a0benefit\u00a0me\u00a0more\u00a0than\u00a0the\u00a0premium\u00a0booking\nsubclass,\u00a0I\u2019ll\u00a0need\u00a0to\u00a0handle\u00a0premium\u00a0bookings\u00a0a\u00a0different\u00a0way. Also,\u00a0I\u00a0may\u00a0need\u00a0to\nchange\u00a0from\u00a0the\u00a0default\u00a0booking\u00a0to\u00a0the\u00a0premium\u00a0booking\u00a0dynamically\u2014i.e.,\u00a0support\u00a0a\nmethod\u00a0like\u00a0aBooking.bePremium(). In\u00a0some\u00a0cases,\u00a0I\u00a0can\u00a0avoid\u00a0this\u00a0by\u00a0creating\u00a0a\nwhole\u00a0new\u00a0object\u00a0(a\u00a0common\u00a0example\u00a0is\u00a0where\u00a0an\u00a0HTTP\u00a0request\u00a0loads\u00a0new\u00a0data\u00a0from\nthe\u00a0server). But\u00a0sometimes,\u00a0I\u00a0need\u00a0to\u00a0modify\u00a0a\u00a0data\u00a0structure\u00a0and\u00a0not\u00a0rebuild\u00a0it\u00a0from\nscratch,\u00a0and\u00a0it\u00a0is\u00a0difficult\u00a0to\u00a0just\u00a0replace\u00a0a\u00a0single\u00a0booking\u00a0that\u2019s\u00a0referred\u00a0to\u00a0from\u00a0many\ndifferent\u00a0places. In\u00a0such\u00a0situations,\u00a0it\u00a0can\u00a0be\u00a0useful\u00a0to\u00a0allow\u00a0a\u00a0booking\u00a0to\u00a0switch\u00a0from\ndefault\u00a0to\u00a0premium\u00a0and\u00a0back\u00a0again. When\u00a0these\u00a0needs\u00a0crop\u00a0up,\u00a0I\u00a0need\u00a0to\u00a0apply\u00a0Replace\u00a0Subclass\u00a0with\u00a0Delegate. I\u00a0have\nclients\u00a0call\u00a0the\u00a0constructors\u00a0of\u00a0the\u00a0two\u00a0classes\u00a0to\u00a0make\u00a0the\u00a0bookings:\nbooking\u00a0client\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\naBooking\u00a0=\u00a0new\u00a0Booking(show,date)\u037e\npremium\u00a0client\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\naBooking\u00a0=\u00a0new\u00a0PremiumBooking(show,\u00a0date,\u00a0extras)\u037e\nRemoving\u00a0subclasses\u00a0will\u00a0alter\u00a0all\u00a0of\u00a0this,\u00a0so\u00a0I\u00a0like\u00a0to\u00a0encapsulate\u00a0the\u00a0constructor\u00a0calls\nwith\u00a0Replace\u00a0Constructor\u00a0with\u00a0Factory\u00a0Function\u00a0(334). top\u00a0level\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0createBooking(show,\u00a0date)\u00a0{\n\u00a0\u00a0return\u00a0new\u00a0Booking(show,\u00a0date)\u037e\n}\nfunction\u00a0createPremiumBooking(show,\u00a0date,\u00a0extras)\u00a0{\nwww.EBooksWorld.ir", "domains": ["Design Patterns", "Domain-Driven Design"], "source": "Refactoring.Improving.the.Design.of.Existing.Code.pdf", "section": "Page 429", "position": 429, "chunk_type": "semantic", "token_estimate": 275}
{"text": "return\u00a0new\u00a0PremiumBooking\u00a0(show,\u00a0date,\u00a0extras)\u037e: )\u037e\n}\nbooking\u00a0client\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\naBooking\u00a0=\u00a0createBooking(show,\u00a0date)\u037e\npremium\u00a0client\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\naBooking\u00a0=\u00a0createPremiumBooking(show,\u00a0date,\u00a0extras)\u037e\nI\u00a0now\u00a0make\u00a0the\u00a0new\u00a0delegate\u00a0class. Its\u00a0constructor\u00a0parameters\u00a0are\u00a0those\u00a0parameters\nthat\u00a0are\u00a0only\u00a0used\u00a0in\u00a0the\u00a0subclass,\u00a0together\u00a0with\u00a0a\u00a0back\u00adreference\u00a0to\u00a0the\u00a0booking\u00a0object. I\u2019ll\u00a0need\u00a0this\u00a0because\u00a0several\u00a0subclass\u00a0methods\u00a0require\u00a0access\u00a0to\u00a0data\u00a0stored\u00a0in\u00a0the\nsuperclass. Inheritance\u00a0makes\u00a0this\u00a0easy\u00a0to\u00a0do,\u00a0but\u00a0with\u00a0a\u00a0delegate\u00a0I\u00a0need\u00a0a\u00a0back\u00ad\nreference. class\u00a0PremiumBookingDelegate\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nconstructor(hostBooking,\u00a0extras)\u00a0{\n\u00a0\u00a0this._host\u00a0=\u00a0hostBooking\u037e\n\u00a0\u00a0this._extras\u00a0=\u00a0extras\u037e\n}\nI\u00a0now\u00a0connect\u00a0the\u00a0new\u00a0delegate\u00a0to\u00a0the\u00a0booking\u00a0object. I\u00a0do\u00a0this\u00a0by\u00a0modifying\u00a0the\u00a0factory\nfunction\u00a0for\u00a0premium\u00a0bookings. top\u00a0level\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0createPremiumBooking(show,\u00a0date,\u00a0extras)\u00a0{\n\u00a0\u00a0const\u00a0result\u00a0=\u00a0new\u00a0PremiumBooking\u00a0(show,\u00a0date,\u00a0extras)\u037e\n\u00a0\u00a0result._bePremium(extras)\u037e\n\u00a0\u00a0return\u00a0result\u037e\n}\nwww.EBooksWorld.ir", "domains": ["Design Patterns", "Domain-Driven Design"], "source": "Refactoring.Improving.the.Design.of.Existing.Code.pdf", "section": "Page 430", "position": 430, "chunk_type": "semantic", "token_estimate": 156}
{"text": "class\u00a0Booking\u2026: Click\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\n_bePremium(extras)\u00a0{\n\u00a0\u00a0this._premiumDelegate\u00a0=\u00a0new\u00a0PremiumBookingDelegate(this,\u00a0extras)\u037e\n}\nI\u00a0use\u00a0a\u00a0leading\u00a0underscore\u00a0on\u00a0_bePremium\u00a0to\u00a0indicate\u00a0that\u00a0it\u00a0shouldn\u2019t\u00a0be\u00a0part\u00a0of\u00a0the\npublic\u00a0interface\u00a0for\u00a0Booking. Of\u00a0course,\u00a0if\u00a0the\u00a0point\u00a0of\u00a0doing\u00a0this\u00a0refactoring\u00a0is\u00a0to\u00a0allow\na\u00a0booking\u00a0to\u00a0mutate\u00a0to\u00a0premium,\u00a0it\u00a0can\u00a0be\u00a0a\u00a0public\u00a0method. Alternatively,\u00a0I\u00a0can\u00a0do\u00a0all\u00a0the\u00a0connections\u00a0in\u00a0the\u00a0constructor\u00a0for\u00a0Booking. In\u00a0order\u00a0to\ndo\u00a0that,\u00a0I\u00a0need\u00a0some\u00a0way\u00a0to\u00a0signal\u00a0to\u00a0the\u00a0constructor\u00a0that\u00a0we\u00a0have\u00a0a\u00a0premium\u00a0booking. That\u00a0could\u00a0be\u00a0an\u00a0extra\u00a0parameter,\u00a0or\u00a0just\u00a0the\u00a0use\u00a0of\u00a0extras\u00a0if\u00a0I\u00a0can\u00a0be\u00a0sure\u00a0that\u00a0it\u00a0is\nalways\u00a0present\u00a0when\u00a0used\u00a0with\u00a0a\u00a0premium\u00a0booking. Here,\u00a0I\u00a0prefer\u00a0the\u00a0explicitness\u00a0of\ndoing\u00a0this\u00a0through\u00a0the\u00a0factory\u00a0function. With\u00a0the\u00a0structures\u00a0set\u00a0up,\u00a0it\u2019s\u00a0time\u00a0to\u00a0start\u00a0moving\u00a0the\u00a0behavior. The\u00a0first\u00a0case\u00a0I\u2019ll\nconsider\u00a0is\u00a0the\u00a0simple\u00a0override\u00a0of\u00a0hasTalkback. Here\u2019s\u00a0the\u00a0existing\u00a0code:\nclass\u00a0Booking\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nget\u00a0hasTalkback()\u00a0{\n\u00a0\u00a0return\u00a0this._show.hasOwnProperty('talkback')\u00a0&&\u00a0!this.isPeakDay\u037e\n}\nclass\u00a0PremiumBooking\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nget\u00a0hasTalkback()\u00a0{\n\u00a0\u00a0return\u00a0this._show.hasOwnProperty('talkback')\u037e\n}\nI\u00a0use\u00a0Move\u00a0Function\u00a0(198)\u00a0to\u00a0move\u00a0the\u00a0subclass\u00a0method\u00a0to\u00a0the\u00a0delegate. To\u00a0make\u00a0it\u00a0fit\nits\u00a0home,\u00a0I\u00a0route\u00a0any\u00a0access\u00a0to\u00a0superclass\u00a0data\u00a0with\u00a0a\u00a0call\u00a0to\u00a0_host. www.EBooksWorld.ir", "domains": ["Design Patterns", "Domain-Driven Design", "Code Organization"], "source": "Refactoring.Improving.the.Design.of.Existing.Code.pdf", "section": "Page 431", "position": 431, "chunk_type": "semantic", "token_estimate": 221}
{"text": "class\u00a0PremiumBookingDelegate\u2026: Click\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nget\u00a0hasDinner()\u00a0{\n\u00a0\u00a0return\u00a0this._extras.hasOwnProperty('dinner')\u00a0&&\u00a0!this._host.isPeakDay\u037e\n}\nI\u00a0then\u00a0add\u00a0dispatch\u00a0logic\u00a0to\u00a0Booking:\nclass\u00a0Booking\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nget\u00a0hasDinner()\u00a0{\n\u00a0\u00a0return\u00a0(this._premiumDelegate)\n\u00a0\u00a0\u00a0\u00a0? this._premiumDelegate.hasDinner\n\u00a0\u00a0\u00a0\u00a0:\u00a0undefined\u037e\n}\nIn\u00a0JavaScript,\u00a0accessing\u00a0a\u00a0property\u00a0on\u00a0an\u00a0object\u00a0where\u00a0it\u00a0isn\u2019t\u00a0defined\u00a0returns\nundefined,\u00a0so\u00a0I\u00a0do\u00a0that\u00a0here. (Although\u00a0my\u00a0every\u00a0instinct\u00a0is\u00a0to\u00a0have\u00a0it\u00a0raise\u00a0an\u00a0error,\nwhich\u00a0would\u00a0be\u00a0the\u00a0case\u00a0in\u00a0other\u00a0object\u00adoriented\u00a0dynamic\u00a0languages\u00a0I\u2019m\u00a0used\u00a0to.) Once\u00a0I\u2019ve\u00a0moved\u00a0all\u00a0the\u00a0behavior\u00a0out\u00a0of\u00a0the\u00a0subclass,\u00a0I\u00a0can\u00a0change\u00a0the\u00a0factory\u00a0method\u00a0to\nreturn\u00a0the\u00a0superclass\u2014and,\u00a0once\u00a0I\u2019ve\u00a0run\u00a0tests\u00a0to\u00a0ensure\u00a0all\u00a0is\u00a0well,\u00a0delete\u00a0the\u00a0subclass. top\u00a0level\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0createPremiumBooking(show,\u00a0date,\u00a0extras)\u00a0{\n\u00a0\u00a0const\u00a0result\u00a0=\u00a0new\u00a0PremiumBooking\u00a0(show,\u00a0date,\u00a0extras)\u037e\n\u00a0\u00a0result._bePremium(extras)\u037e\n\u00a0\u00a0return\u00a0result\u037e\n}\nclass\u00a0PremiumBooking\u00a0extends\u00a0Booking\u00a0... This\u00a0is\u00a0one\u00a0of\u00a0those\u00a0refactorings\u00a0where\u00a0I\u00a0don\u2019t\u00a0feel\u00a0that\u00a0refactoring\u00a0alone\u00a0improves\u00a0the\ncode. Inheritance\u00a0handles\u00a0this\u00a0situation\u00a0very\u00a0well,\u00a0whereas\u00a0using\u00a0delegation\u00a0involves\nadding\u00a0dispatch\u00a0logic,\u00a0two\u00adway\u00a0references,\u00a0and\u00a0thus\u00a0extra\u00a0complexity. The\u00a0refactoring\nwww.EBooksWorld.ir", "domains": ["Design Patterns", "Domain-Driven Design"], "source": "Refactoring.Improving.the.Design.of.Existing.Code.pdf", "section": "Page 435", "position": 435, "chunk_type": "semantic", "token_estimate": 184}
{"text": "get\u00a0plumage()\u00a0{return\u00a0this._speciesDelegate.plumage\u037e}: get\u00a0airSpeedVelocity()\u00a0{return\u00a0this._speciesDelegate.airSpeedVelocity\u037e}\nclass\u00a0SpeciesDelegate\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nget\u00a0airSpeedVelocity()\u00a0{return\u00a0null\u037e}\nI\u00a0like\u00a0this,\u00a0as\u00a0it\u00a0simplifies\u00a0the\u00a0delegating\u00a0methods\u00a0on\u00a0Bird. I\u00a0can\u00a0easily\u00a0see\u00a0which\nbehavior\u00a0is\u00a0delegated\u00a0to\u00a0the\u00a0species\u00a0delegate\u00a0and\u00a0which\u00a0stays\u00a0behind. Here\u2019s\u00a0the\u00a0final\u00a0state\u00a0of\u00a0these\u00a0classes:\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0createBird(data)\u00a0{\n\u00a0\u00a0return\u00a0new\u00a0Bird(data)\u037e\n}\nclass\u00a0Bird\u00a0{\n\u00a0\u00a0constructor(data)\u00a0{\n\u00a0\u00a0\u00a0\u00a0this._name\u00a0=\u00a0data.name\u037e\n\u00a0\u00a0\u00a0\u00a0this._plumage\u00a0=\u00a0data.plumage\u037e\n\u00a0\u00a0\u00a0\u00a0this._speciesDelegate\u00a0=\u00a0this.selectSpeciesDelegate(data)\u037e\n\u00a0\u00a0}\n\u00a0\u00a0get\u00a0name()\u00a0\u00a0\u00a0\u00a0{return\u00a0this._name\u037e}\n\u00a0\u00a0get\u00a0plumage()\u00a0{return\u00a0this._speciesDelegate.plumage\u037e}\n\u00a0\u00a0get\u00a0airSpeedVelocity()\u00a0{return\u00a0this._speciesDelegate.airSpeedVelocity\u037e}\n\u00a0\u00a0selectSpeciesDelegate(data)\u00a0{\n\u00a0\u00a0\u00a0\u00a0switch(data.type)\u00a0{\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0case\u00a0'EuropeanSwallow':\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0return\u00a0new\u00a0EuropeanSwallowDelegate(data,\u00a0this)\u037e\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0case\u00a0'AfricanSwallow':\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0return\u00a0new\u00a0AfricanSwallowDelegate(data,\u00a0this)\u037e\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0case\u00a0'NorweigianBlueParrot':\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0return\u00a0new\u00a0NorwegianBlueParrotDelegate(data,\u00a0this)\u037e\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0default:\u00a0return\u00a0new\u00a0SpeciesDelegate(data,\u00a0this)\u037e\n\u00a0\u00a0\u00a0\u00a0}\n\u00a0\u00a0}\n\u00a0\u00a0//\u00a0rest\u00a0of\u00a0bird's\u00a0code...\n}\nclass\u00a0SpeciesDelegate\u00a0{\n\u00a0\u00a0constructor(data,\u00a0bird)\u00a0{\nwww.EBooksWorld.ir", "domains": ["Design Patterns"], "source": "Refactoring.Improving.the.Design.of.Existing.Code.pdf", "section": "Page 445", "position": 445, "chunk_type": "semantic", "token_estimate": 136}
{"text": "formerly:\u00a0Replace\u00a0Inheritance\u00a0with\u00a0Delegation: Motivation\nIn\u00a0object\u00adoriented\u00a0programs,\u00a0inheritance\u00a0is\u00a0a\u00a0powerful\u00a0and\u00a0easily\u00a0available\u00a0way\u00a0to\u00a0reuse\nexisting\u00a0functionality. I\u00a0inherit\u00a0from\u00a0some\u00a0existing\u00a0class,\u00a0then\u00a0override\u00a0and\u00a0add\nadditional\u00a0features. But\u00a0subclassing\u00a0can\u00a0be\u00a0done\u00a0in\u00a0a\u00a0way\u00a0that\u00a0leads\u00a0to\u00a0confusion\u00a0and\ncomplication. One\u00a0of\u00a0the\u00a0classic\u00a0examples\u00a0of\u00a0mis\u00adinheritance\u00a0from\u00a0the\u00a0early\u00a0days\u00a0of\u00a0objects\u00a0was\nmaking\u00a0a\u00a0stack\u00a0be\u00a0a\u00a0subclass\u00a0of\u00a0list. The\u00a0idea\u00a0that\u00a0led\u00a0to\u00a0this\u00a0was\u00a0reusing\u00a0of\u00a0list\u2019s\u00a0data\nstorage\u00a0and\u00a0operations\u00a0to\u00a0manipulate\u00a0it. While\u00a0it\u2019s\u00a0good\u00a0to\u00a0reuse,\u00a0this\u00a0inheritance\u00a0had\u00a0a\nproblem:\u00a0All\u00a0the\u00a0operations\u00a0of\u00a0the\u00a0list\u00a0were\u00a0present\u00a0on\u00a0the\u00a0interface\u00a0of\u00a0the\u00a0stack,\nalthough\u00a0most\u00a0of\u00a0them\u00a0were\u00a0not\u00a0applicable\u00a0to\u00a0a\u00a0stack. A\u00a0better\u00a0approach\u00a0is\u00a0to\u00a0make\u00a0the\nlist\u00a0into\u00a0a\u00a0field\u00a0of\u00a0the\u00a0stack\u00a0and\u00a0delegate\u00a0the\u00a0necessary\u00a0operations\u00a0to\u00a0it. This\u00a0is\u00a0an\u00a0example\u00a0of\u00a0one\u00a0reason\u00a0to\u00a0use\u00a0Replace\u00a0Superclass\u00a0with\u00a0Delegate\u2014if\u00a0functions\nwww.EBooksWorld.ir", "domains": ["Code Organization"], "source": "Refactoring.Improving.the.Design.of.Existing.Code.pdf", "section": "Page 447", "position": 447, "chunk_type": "semantic", "token_estimate": 156}
{"text": "this._lastCleaned\u00a0=\u00a0dateLastCleaned\u037e: ned\u037e\n\u00a0\u00a0}\nBreaking\u00a0the\u00a0inheritance\u00a0link\u00a0finishes\u00a0the\u00a0basic\u00a0Replace\u00a0Superclass\u00a0with\u00a0Delegate\nrefactoring,\u00a0but\u00a0there\u00a0is\u00a0something\u00a0more\u00a0I\u00a0need\u00a0to\u00a0do\u00a0in\u00a0this\u00a0case. The\u00a0refactoring\u00a0shifts\u00a0the\u00a0role\u00a0of\u00a0the\u00a0catalog\u00a0item\u00a0to\u00a0that\u00a0of\u00a0a\u00a0component\u00a0of\u00a0scroll\u037e\u00a0each\nscroll\u00a0contains\u00a0a\u00a0unique\u00a0instance\u00a0of\u00a0a\u00a0catalog\u00a0item. In\u00a0many\u00a0cases\u00a0where\u00a0I\u00a0do\u00a0this\nrefactoring,\u00a0this\u00a0is\u00a0enough. However,\u00a0in\u00a0this\u00a0situation\u00a0a\u00a0better\u00a0model\u00a0is\u00a0to\u00a0link\u00a0the\ngreyscale\u00a0catalog\u00a0item\u00a0to\u00a0the\u00a0six\u00a0scrolls\u00a0in\u00a0the\u00a0library\u00a0that\u00a0are\u00a0copies\u00a0of\u00a0that\u00a0writing. Doing\u00a0this\u00a0is,\u00a0essentially,\u00a0Change\u00a0Value\u00a0to\u00a0Reference\u00a0(256). There\u2019s\u00a0a\u00a0problem\u00a0that\u00a0I\u00a0have\u00a0to\u00a0fix,\u00a0however,\u00a0before\u00a0I\u00a0use\u00a0Change\u00a0Value\u00a0to\u00a0Reference\n(256). In\u00a0the\u00a0original\u00a0inheritance\u00a0structure,\u00a0the\u00a0scroll\u00a0used\u00a0the\u00a0catalog\u00a0item\u2019s\u00a0ID\u00a0field\u00a0to\nstore\u00a0its\u00a0ID. But\u00a0if\u00a0I\u00a0treat\u00a0the\u00a0catalog\u00a0item\u00a0as\u00a0a\u00a0reference,\u00a0it\u00a0needs\u00a0to\u00a0use\u00a0that\u00a0ID\u00a0for\u00a0the\ncatalog\u00a0item\u00a0ID\u00a0rather\u00a0than\u00a0the\u00a0scroll\u00a0ID. This\u00a0means\u00a0I\u00a0need\u00a0to\u00a0create\u00a0an\u00a0ID\u00a0field\u00a0on\nscroll\u00a0and\u00a0use\u00a0that\u00a0instead\u00a0of\u00a0one\u00a0in\u00a0catalog\u00a0item.\u00a0It\u2019s\u00a0a\u00a0sort\u00adof\u00a0move,\u00a0sort\u00adof\u00a0split. class\u00a0Scroll\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nconstructor(id,\u00a0title,\u00a0tags,\u00a0dateLastCleaned)\u00a0{\n\u00a0\u00a0this._id\u00a0=\u00a0id\u037e\n\u00a0\u00a0this._catalogItem\u00a0=\u00a0new\u00a0CatalogItem(null,\u00a0title,\u00a0tags)\u037e\n\u00a0\u00a0this._lastCleaned\u00a0=\u00a0dateLastCleaned\u037e\n}\nget\u00a0id()\u00a0{return\u00a0this._id\u037e}\nCreating\u00a0a\u00a0catalog\u00a0item\u00a0with\u00a0a\u00a0null\u00a0ID\u00a0would\u00a0usually\u00a0raise\u00a0red\u00a0flags\u00a0and\u00a0cause\u00a0alarms\u00a0to\nsound.\u00a0But\u00a0that\u2019s\u00a0just\u00a0temporary\u00a0while\u00a0I\u00a0get\u00a0things\u00a0into\u00a0shape. Once\u00a0I\u2019ve\u00a0done\u00a0that,\u00a0the\nscrolls\u00a0will\u00a0refer\u00a0to\u00a0a\u00a0shared\u00a0catalog\u00a0item\u00a0with\u00a0its\u00a0proper\u00a0ID. Currently\u00a0the\u00a0scrolls\u00a0are\u00a0loaded\u00a0as\u00a0part\u00a0of\u00a0a\u00a0load\u00a0routine. load\u00a0routine\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nconst\u00a0scrolls\u00a0=\u00a0aDocument\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0.map(record\u00a0=>\u00a0new\u00a0Scroll(record.id,\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0record.catalogData.title,\nwww.EBooksWorld.ir", "domains": ["Code Organization"], "source": "Refactoring.Improving.the.Design.of.Existing.Code.pdf", "section": "Page 451", "position": 451, "chunk_type": "semantic", "token_estimate": 292}
{"text": "record.catalogData.tags,: record.catalogData.tags,\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0LocalDate.parse(record.lastCleaned)))\u037e\nThe\u00a0first\u00a0step\u00a0in\u00a0Change\u00a0Value\u00a0to\u00a0Reference\u00a0(256)\u00a0is\u00a0finding\u00a0or\u00a0creating\u00a0a\u00a0repository. I\nfind\u00a0there\u00a0is\u00a0a\u00a0repository\u00a0that\u00a0I\u00a0can\u00a0easily\u00a0import\u00a0into\u00a0the\u00a0load\u00a0routine. The\u00a0repository\nsupplies\u00a0catalog\u00a0items\u00a0indexed\u00a0by\u00a0an\u00a0ID. My\u00a0next\u00a0task\u00a0is\u00a0to\u00a0see\u00a0how\u00a0to\u00a0get\u00a0that\u00a0ID\u00a0into\nthe\u00a0constructor\u00a0of\u00a0the\u00a0scroll. Fortunately,\u00a0it\u2019s\u00a0present\u00a0in\u00a0the\u00a0input\u00a0data\u00a0and\u00a0was\u00a0being\nignored\u00a0as\u00a0it\u00a0wasn\u2019t\u00a0useful\u00a0when\u00a0using\u00a0inheritance. With\u00a0that\u00a0sorted\u00a0out,\u00a0I\u00a0can\u00a0now\u00a0use\nChange\u00a0Function\u00a0Declaration\u00a0(124)\u00a0to\u00a0add\u00a0both\u00a0the\u00a0catalog\u00a0and\u00a0the\u00a0catalog\u00a0item\u2019s\u00a0ID\u00a0to\nthe\u00a0constructor\u00a0parameters. load\u00a0routine\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nconst\u00a0scrolls\u00a0=\u00a0aDocument\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0.map(record\u00a0=>\u00a0new\u00a0Scroll(record.id,\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0record.catalogData.title,\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0record.catalogData.tags,\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0LocalDate.parse(record.lastCleaned),\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0record.catalogData.id,\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0catalog))\u037e\nclass\u00a0Scroll\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nconstructor(id,\u00a0title,\u00a0tags,\u00a0dateLastCleaned,\u00a0catalogID,\u00a0catalog)\u00a0{\n\u00a0\u00a0this._id\u00a0=\u00a0id\u037e\n\u00a0\u00a0this._catalogItem\u00a0=\u00a0new\u00a0CatalogItem(null,\u00a0title,\u00a0tags)\u037e\n\u00a0\u00a0this._lastCleaned\u00a0=\u00a0dateLastCleaned\u037e\n}\nI\u00a0now\u00a0modify\u00a0the\u00a0constructor\u00a0to\u00a0use\u00a0the\u00a0catalog\u00a0ID\u00a0to\u00a0look\u00a0up\u00a0the\u00a0catalog\u00a0item\u00a0and\u00a0use\u00a0it\ninstead\u00a0of\u00a0creating\u00a0a\u00a0new\u00a0one. class\u00a0Scroll\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nconstructor(id,\u00a0title,\u00a0tags,\u00a0dateLastCleaned,\u00a0catalogID,\u00a0catalog)\u00a0{\n\u00a0\u00a0this._id\u00a0=\u00a0id\u037e\n\u00a0\u00a0this._catalogItem\u00a0=\u00a0catalog.get(catalogID)\u037e\nwww.EBooksWorld.ir", "domains": ["Domain-Driven Design"], "source": "Refactoring.Improving.the.Design.of.Existing.Code.pdf", "section": "Page 452", "position": 452, "chunk_type": "semantic", "token_estimate": 199}
