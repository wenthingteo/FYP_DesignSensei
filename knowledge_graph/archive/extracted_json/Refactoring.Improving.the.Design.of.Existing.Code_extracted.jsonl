{"text": "www.EBooksWorld.ir\n", "page": 1, "type": "text", "section": "Page 1"}
{"text": "Refactoring\nImproving\u00a0the\u00a0Design\u00a0of\u00a0Existing\u00a0Code\nSecond\u00a0Edition\nMartin\u00a0Fowler\nwith\u00a0contributions\u00a0by\nKent\u00a0Beck\nBoston\u00a0\u2022\u00a0Columbus\u00a0\u2022\u00a0New\u00a0York\u00a0\u2022\u00a0San\u00a0Francisco\u00a0\u2022\u00a0Amsterdam\u00a0\u2022\u00a0Cape\u00a0Town\nDubai\u00a0\u2022\u00a0London\u00a0\u2022\u00a0Madrid\u00a0\u2022\u00a0Milan\u00a0\u2022\u00a0Munich\u00a0\u2022\u00a0Paris\u00a0\u2022\u00a0Montreal\u00a0\u2022\u00a0Toronto\u00a0\u2022\u00a0Delhi\u00a0\u2022\nMexico\u00a0City\nS\u00e3o\u00a0Paulo\u00a0\u2022\u00a0Sydney\u00a0\u2022\u00a0Hong\u00a0Kong\u00a0\u2022\u00a0Seoul\u00a0\u2022\u00a0Singapore\u00a0\u2022\u00a0Taipei\u00a0\u2022\u00a0Tokyo\nHistory\nTopics\nTutorials\nOffers & Deals\nHighlights\nSettings\nSupport\nSign Out\nwww.EBooksWorld.ir\n", "page": 2, "type": "text", "section": "Page 2"}
{"text": "Many\u00a0of\u00a0the\u00a0designations\u00a0used\u00a0by\u00a0manufacturers\u00a0and\u00a0sellers\u00a0to\u00a0distinguish\u00a0their\nproducts\u00a0are\u00a0claimed\u00a0as\u00a0trademarks.\u00a0Where\u00a0those\u00a0designations\u00a0appear\u00a0in\u00a0this\u00a0book,\u00a0and\nthe\u00a0publisher\u00a0was\u00a0aware\u00a0of\u00a0a\u00a0trademark\u00a0claim,\u00a0the\u00a0designations\u00a0have\u00a0been\u00a0printed\u00a0with\ninitial\u00a0capital\u00a0letters\u00a0or\u00a0in\u00a0all\u00a0capitals.\nThe\u00a0author\u00a0and\u00a0publisher\u00a0have\u00a0taken\u00a0care\u00a0in\u00a0the\u00a0preparation\u00a0of\u00a0this\u00a0book,\u00a0but\u00a0make\u00a0no\nexpressed\u00a0or\u00a0implied\u00a0warranty\u00a0of\u00a0any\u00a0kind\u00a0and\u00a0assume\u00a0no\u00a0responsibility\u00a0for\u00a0errors\u00a0or\nomissions.\u00a0No\u00a0liability\u00a0is\u00a0assumed\u00a0for\u00a0incidental\u00a0or\u00a0consequential\u00a0damages\u00a0in\nconnection\u00a0with\u00a0or\u00a0arising\u00a0out\u00a0of\u00a0the\u00a0use\u00a0of\u00a0the\u00a0information\u00a0or\u00a0programs\u00a0contained\nherein.\nFor\u00a0information\u00a0about\u00a0buying\u00a0this\u00a0title\u00a0in\u00a0bulk\u00a0quantities,\u00a0or\u00a0for\u00a0special\u00a0sales\nopportunities\u00a0(which\u00a0may\u00a0include\u00a0electronic\u00a0versions\u037e\u00a0custom\u00a0cover\u00a0designs\u037e\u00a0and\ncontent\u00a0particular\u00a0to\u00a0your\u00a0business,\u00a0training\u00a0goals,\u00a0marketing\u00a0focus,\u00a0or\u00a0branding\ninterests),\u00a0please\u00a0contact\u00a0our\u00a0corporate\u00a0sales\u00a0department\u00a0at\u00a0corpsales@pearsoned.com\nor\u00a0(800)\u00a0382\u20133419.\nFor\u00a0government\u00a0sales\u00a0inquiries,\u00a0please\u00a0contact\u00a0governmentsales@pearsoned.com.\nFor\u00a0questions\u00a0about\u00a0sales\u00a0outside\u00a0the\u00a0U.S.,\u00a0please\u00a0contact\u00a0intlcs@pearson.com.\nVisit\u00a0us\u00a0on\u00a0the\u00a0Web:\u00a0informit.com/aw\nLibrary\u00a0of\u00a0Congress\u00a0Control\u00a0Number:\u00a02018950015\nCopyright\u00a0\u00a9\u00a02019\u00a0Pearson\u00a0Education,\u00a0Inc.\nCover\u00a0photo:\u00a0Waldo\u00adHancock\u00a0Bridge\u00a0&\u00a0Penobscot\u00a0Narrows\u00a0Bridge\u00a0by\u00a0Martin\u00a0Fowler\nLightbulb\u00a0graphic:\u00a0Irina\u00a0Adamovich/Shutterstock\nAll\u00a0rights\u00a0reserved.\u00a0Printed\u00a0in\u00a0the\u00a0United\u00a0States\u00a0of\u00a0America.\u00a0This\u00a0publication\u00a0is\nprotected\u00a0by\u00a0copyright,\u00a0and\u00a0permission\u00a0must\u00a0be\u00a0obtained\u00a0from\u00a0the\u00a0publisher\u00a0prior\u00a0to\nany\u00a0prohibited\u00a0reproduction,\u00a0storage\u00a0in\u00a0a\u00a0retrieval\u00a0system,\u00a0or\u00a0transmission\u00a0in\u00a0any\u00a0form\nor\u00a0by\u00a0any\u00a0means,\u00a0electronic,\u00a0mechanical,\u00a0photocopying,\u00a0recording,\u00a0or\u00a0likewise.\u00a0For\nPlaylists\nHistory\nTopics\nTutorials\nOffers & Deals\nHighlights\nSettings\nSupport\nSign Out\n \n  \n \n  \n \n \n \n \n \n \ni\nwww.EBooksWorld.ir\n", "page": 3, "type": "text", "section": "Page 3"}
{"text": "information\u00a0regarding\u00a0permissions,\u00a0request\u00a0forms\u00a0and\u00a0the\u00a0appropriate\u00a0contacts\u00a0within\nthe\u00a0Pearson\u00a0Education\u00a0Global\u00a0Rights\u00a0&\u00a0Permissions\u00a0Department,\u00a0please\u00a0visit\nwww.pearsoned.com/permissions/.\nISBN\u00ad13:\u00a0978\u00ad0\u00ad13\u00ad475759\u00ad9\nISBN\u00ad10:\u00a00\u00ad13\u00ad475759\u00ad9\n1\u00a0\u00a0\u00a018\nwww.EBooksWorld.ir\n", "page": 4, "type": "text", "section": "Page 4"}
{"text": "Chapter 1\nRefactoring: A First Example\nHow\u00a0do\u00a0I\u00a0begin\u00a0to\u00a0talk\u00a0about\u00a0refactoring?\u00a0The\u00a0traditional\u00a0way\u00a0is\u00a0by\u00a0introducing\u00a0the\nhistory\u00a0of\u00a0the\u00a0subject,\u00a0broad\u00a0principles,\u00a0and\u00a0the\u00a0like.\u00a0When\u00a0somebody\u00a0does\u00a0that\u00a0at\u00a0a\nconference,\u00a0I\u00a0get\u00a0slightly\u00a0sleepy.\u00a0My\u00a0mind\u00a0starts\u00a0wandering,\u00a0with\u00a0a\u00a0low\u00adpriority\nbackground\u00a0process\u00a0polling\u00a0the\u00a0speaker\u00a0until\u00a0they\u00a0give\u00a0an\u00a0example.\nThe\u00a0examples\u00a0wake\u00a0me\u00a0up\u00a0because\u00a0I\u00a0can\u00a0see\u00a0what\u00a0is\u00a0going\u00a0on.\u00a0With\u00a0principles,\u00a0it\u00a0is\u00a0too\neasy\u00a0to\u00a0make\u00a0broad\u00a0generalizations\u2014and\u00a0too\u00a0hard\u00a0to\u00a0figure\u00a0out\u00a0how\u00a0to\u00a0apply\u00a0things.\u00a0An\nexample\u00a0helps\u00a0make\u00a0things\u00a0clear.\nSo\u00a0I\u2019m\u00a0going\u00a0to\u00a0start\u00a0this\u00a0book\u00a0with\u00a0an\u00a0example\u00a0of\u00a0refactoring.\u00a0I\u2019ll\u00a0talk\u00a0about\u00a0how\nrefactoring\u00a0works\u00a0and\u00a0will\u00a0give\u00a0you\u00a0a\u00a0sense\u00a0of\u00a0the\u00a0refactoring\u00a0process.\u00a0I\u00a0can\u00a0then\u00a0do\u00a0the\nusual\u00a0principles\u00adstyle\u00a0introduction\u00a0in\u00a0the\u00a0next\u00a0chapter.\nWith\u00a0any\u00a0introductory\u00a0example,\u00a0however,\u00a0I\u00a0run\u00a0into\u00a0a\u00a0problem.\u00a0If\u00a0I\u00a0pick\u00a0a\u00a0large\nprogram,\u00a0describing\u00a0it\u00a0and\u00a0how\u00a0it\u00a0is\u00a0refactored\u00a0is\u00a0too\u00a0complicated\u00a0for\u00a0a\u00a0mortal\u00a0reader\u00a0to\nwork\u00a0through.\u00a0(I\u00a0tried\u00a0this\u00a0with\u00a0the\u00a0original\u00a0book\u2014and\u00a0ended\u00a0up\u00a0throwing\u00a0away\u00a0two\nexamples,\u00a0which\u00a0were\u00a0still\u00a0pretty\u00a0small\u00a0but\u00a0took\u00a0over\u00a0a\u00a0hundred\u00a0pages\u00a0each\u00a0to\u00a0describe.)\nHowever,\u00a0if\u00a0I\u00a0pick\u00a0a\u00a0program\u00a0that\u00a0is\u00a0small\u00a0enough\u00a0to\u00a0be\u00a0comprehensible,\u00a0refactoring\ndoes\u00a0not\u00a0look\u00a0like\u00a0it\u00a0is\u00a0worthwhile.\nI\u2019m\u00a0thus\u00a0in\u00a0the\u00a0classic\u00a0bind\u00a0of\u00a0anyone\u00a0who\u00a0wants\u00a0to\u00a0describe\u00a0techniques\u00a0that\u00a0are\u00a0useful\nfor\u00a0real\u00adworld\u00a0programs.\u00a0Frankly,\u00a0it\u00a0is\u00a0not\u00a0worth\u00a0the\u00a0effort\u00a0to\u00a0do\u00a0all\u00a0the\u00a0refactoring\u00a0that\nI\u2019m\u00a0going\u00a0to\u00a0show\u00a0you\u00a0on\u00a0the\u00a0small\u00a0program\u00a0I\u00a0will\u00a0be\u00a0using.\u00a0But\u00a0if\u00a0the\u00a0code\u00a0I\u2019m\u00a0showing\nyou\u00a0is\u00a0part\u00a0of\u00a0a\u00a0larger\u00a0system,\u00a0then\u00a0the\u00a0refactoring\u00a0becomes\u00a0important.\u00a0Just\u00a0look\u00a0at\u00a0my\nexample\u00a0and\u00a0imagine\u00a0it\u00a0in\u00a0the\u00a0context\u00a0of\u00a0a\u00a0much\u00a0larger\u00a0system.\nTHE STARTING POINT\nIn\u00a0the\u00a0first\u00a0edition\u00a0of\u00a0this\u00a0book,\u00a0my\u00a0starting\u00a0program\u00a0printed\u00a0a\u00a0bill\u00a0from\u00a0a\u00a0video\u00a0rental\nstore,\u00a0which\u00a0may\u00a0now\u00a0lead\u00a0many\u00a0of\u00a0you\u00a0to\u00a0ask:\u00a0\u201cWhat\u2019s\u00a0a\u00a0video\u00a0rental\u00a0store?\u201d\u00a0Rather\nthan\u00a0answer\u00a0that\u00a0question,\u00a0I\u2019ve\u00a0reskinned\u00a0the\u00a0example\u00a0to\u00a0something\u00a0that\u00a0is\u00a0both\u00a0older\nHistory\nTopics\nTutorials\nOffers & Deals\nHighlights\nSettings\nSupport\nSign Out\n \n  \n \n  \n \n \n \n \n \n \nwww.EBooksWorld.ir\n", "page": 5, "type": "text", "section": "Page 5"}
{"text": "and\u00a0still\u00a0current.\nImage\u00a0a\u00a0company\u00a0of\u00a0theatrical\u00a0players\u00a0who\u00a0go\u00a0out\u00a0to\u00a0various\u00a0events\u00a0performing\u00a0plays.\nTypically,\u00a0a\u00a0customer\u00a0will\u00a0request\u00a0a\u00a0few\u00a0plays\u00a0and\u00a0the\u00a0company\u00a0charges\u00a0them\u00a0based\u00a0on\nthe\u00a0size\u00a0of\u00a0the\u00a0audience\u00a0and\u00a0the\u00a0kind\u00a0of\u00a0play\u00a0they\u00a0perform.\u00a0There\u00a0are\u00a0currently\u00a0two\nkinds\u00a0of\u00a0plays\u00a0that\u00a0the\u00a0company\u00a0performs:\u00a0tragedies\u00a0and\u00a0comedies.\u00a0As\u00a0well\u00a0as\u00a0providing\na\u00a0bill\u00a0for\u00a0the\u00a0performance,\u00a0the\u00a0company\u00a0gives\u00a0its\u00a0customers\u00a0\u201cvolume\u00a0credits\u201d\u00a0which\u00a0they\ncan\u00a0use\u00a0for\u00a0discounts\u00a0on\u00a0future\u00a0performances\u2014think\u00a0of\u00a0it\u00a0as\u00a0a\u00a0customer\u00a0loyalty\nmechanism.\nThe\u00a0performers\u00a0store\u00a0data\u00a0about\u00a0their\u00a0plays\u00a0in\u00a0a\u00a0simple\u00a0JSON\u00a0file\u00a0that\u00a0looks\u00a0something\nlike\u00a0this:\nplays.json\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\n{\n\u00a0\u00a0\"hamlet\":\u00a0{\"name\":\u00a0\"Hamlet\",\u00a0\"type\":\u00a0\"tragedy\"},\n\u00a0\u00a0\"as\u00adlike\":\u00a0{\"name\":\u00a0\"As\u00a0You\u00a0Like\u00a0It\",\u00a0\"type\":\u00a0\"comedy\"},\n\u00a0\u00a0\"othello\":\u00a0{\"name\":\u00a0\"Othello\",\u00a0\"type\":\u00a0\"tragedy\"}\n}\nThe\u00a0data\u00a0for\u00a0their\u00a0bills\u00a0also\u00a0comes\u00a0in\u00a0a\u00a0JSON\u00a0file:\ninvoices.json\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\n[\n\u00a0\u00a0{\n\u00a0\u00a0\u00a0\u00a0\"customer\":\u00a0\"BigCo\",\n\u00a0\u00a0\u00a0\u00a0\"performances\":\u00a0[\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0{\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\"playID\":\u00a0\"hamlet\",\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\"audience\":\u00a055\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0},\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0{\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\"playID\":\u00a0\"as\u00adlike\",\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\"audience\":\u00a035\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0},\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0{\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\"playID\":\u00a0\"othello\",\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\"audience\":\u00a040\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0}\nwww.EBooksWorld.ir\n", "page": 6, "type": "text", "section": "Page 6"}
{"text": "\u00a0\u00a0\u00a0\u00a0]\n\u00a0\u00a0}\n]\nThe\u00a0code\u00a0that\u00a0prints\u00a0the\u00a0bill\u00a0is\u00a0this\u00a0simple\u00a0function:\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0statement\u00a0(invoice,\u00a0plays)\u00a0{\n\u00a0\u00a0let\u00a0totalAmount\u00a0=\u00a00\u037e\n\u00a0\u00a0let\u00a0volumeCredits\u00a0=\u00a00\u037e\n\u00a0\u00a0let\u00a0result\u00a0=\u00a0`Statement\u00a0for\u00a0${invoice.customer}\\n`\u037e\n\u00a0\u00a0const\u00a0format\u00a0=\u00a0new\u00a0Intl.NumberFormat(\"en\u00adUS\",\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0{\u00a0style:\u00a0\"currency\",\u00a0currency:\u00a0\"USD\",\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0minimumFractionDigits:\u00a02\u00a0}).format\u037e\n\u00a0\u00a0for\u00a0(let\u00a0perf\u00a0of\u00a0invoice.performances)\u00a0{\n\u00a0\u00a0\u00a0\u00a0const\u00a0play\u00a0=\u00a0plays[perf.playID]\u037e\n\u00a0\u00a0\u00a0\u00a0let\u00a0thisAmount\u00a0=\u00a00\u037e\n\u00a0\u00a0\u00a0\u00a0switch\u00a0(play.type)\u00a0{\n\u00a0\u00a0\u00a0\u00a0case\u00a0\"tragedy\":\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0thisAmount\u00a0=\u00a040000\u037e\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0if\u00a0(perf.audience\u00a0>\u00a030)\u00a0{\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0thisAmount\u00a0+=\u00a01000\u00a0*\u00a0(perf.audience\u00a0\u00ad\u00a030)\u037e\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0}\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0break\u037e\n\u00a0\u00a0\u00a0\u00a0case\u00a0\"comedy\":\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0thisAmount\u00a0=\u00a030000\u037e\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0if\u00a0(perf.audience\u00a0>\u00a020)\u00a0{\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0thisAmount\u00a0+=\u00a010000\u00a0+\u00a0500\u00a0*\u00a0(perf.audience\u00a0\u00ad\u00a020)\u037e\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0}\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0thisAmount\u00a0+=\u00a0300\u00a0*\u00a0perf.audience\u037e\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0break\u037e\n\u00a0\u00a0\u00a0\u00a0default:\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0throw\u00a0new\u00a0Error(`unknown\u00a0type:\u00a0${play.type}`)\u037e\n\u00a0\u00a0\u00a0\u00a0}\n\u00a0\u00a0\u00a0\u00a0//\u00a0add\u00a0volume\u00a0credits\n\u00a0\u00a0\u00a0\u00a0volumeCredits\u00a0+=\u00a0Math.max(perf.audience\u00a0\u00ad\u00a030,\u00a00)\u037e\n\u00a0\u00a0\u00a0\u00a0//\u00a0add\u00a0extra\u00a0credit\u00a0for\u00a0every\u00a0ten\u00a0comedy\u00a0attendees\n\u00a0\u00a0\u00a0\u00a0if\u00a0(\"comedy\"\u00a0===\u00a0play.type)\u00a0volumeCredits\u00a0+=\u00a0Math.floor(perf.audience\u00a0/\u00a05)\u037e\n\u00a0\u00a0\u00a0\u00a0//\u00a0print\u00a0line\u00a0for\u00a0this\u00a0order\n\u00a0\u00a0\u00a0\u00a0result\u00a0+=\u00a0`\u00a0\u00a0${play.name}:\u00a0${format(thisAmount/100)}\u00a0(${perf.audience}\u00a0seats\n\u00a0\u00a0\u00a0\u00a0totalAmount\u00a0+=\u00a0thisAmount\u037e\n\u00a0\u00a0}\n\u00a0\u00a0result\u00a0+=\u00a0`Amount\u00a0owed\u00a0is\u00a0${format(totalAmount/100)}\\n`\u037e\n\u00a0\u00a0result\u00a0+=\u00a0`You\u00a0earned\u00a0${volumeCredits}\u00a0credits\\n`\u037e\n\u00a0\u00a0return\u00a0result\u037e\n}\nwww.EBooksWorld.ir\n", "page": 7, "type": "text", "section": "Page 7"}
{"text": "Running\u00a0that\u00a0code\u00a0on\u00a0the\u00a0test\u00a0data\u00a0files\u00a0above\u00a0results\u00a0in\u00a0the\u00a0following\u00a0output:\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nStatement\u00a0for\u00a0BigCo\n\u00a0\u00a0Hamlet:\u00a0$650.00\u00a0(55\u00a0seats)\n\u00a0\u00a0As\u00a0You\u00a0Like\u00a0It:\u00a0$580.00\u00a0(35\u00a0seats)\n\u00a0\u00a0Othello:\u00a0$500.00\u00a0(40\u00a0seats)\nAmount\u00a0owed\u00a0is\u00a0$1,730.00\nYou\u00a0earned\u00a047\u00a0credits\nCOMMENTS ON THE STARTING PROGRAM\nWhat\u00a0are\u00a0your\u00a0thoughts\u00a0on\u00a0the\u00a0design\u00a0of\u00a0this\u00a0program?\u00a0The\u00a0first\u00a0thing\u00a0I\u2019d\u00a0say\u00a0is\u00a0that\u00a0it\u2019s\ntolerable\u00a0as\u00a0it\u00a0is\u2014a\u00a0program\u00a0so\u00a0short\u00a0doesn\u2019t\u00a0require\u00a0any\u00a0deep\u00a0structure\u00a0to\u00a0be\ncomprehensible.\u00a0But\u00a0remember\u00a0my\u00a0earlier\u00a0point\u00a0that\u00a0I\u00a0have\u00a0to\u00a0keep\u00a0examples\u00a0small.\nImagine\u00a0this\u00a0program\u00a0on\u00a0a\u00a0larger\u00a0scale\u2014perhaps\u00a0hundreds\u00a0of\u00a0lines\u00a0long.\u00a0At\u00a0that\u00a0size,\u00a0a\nsingle\u00a0inline\u00a0function\u00a0is\u00a0hard\u00a0to\u00a0understand.\nGiven\u00a0that\u00a0the\u00a0program\u00a0works,\u00a0isn\u2019t\u00a0any\u00a0statement\u00a0about\u00a0its\u00a0structure\u00a0merely\u00a0an\naesthetic\u00a0judgment,\u00a0a\u00a0dislike\u00a0of\u00a0\u201cugly\u201d\u00a0code?\u00a0After\u00a0all,\u00a0the\u00a0compiler\u00a0doesn\u2019t\u00a0care\u00a0whether\nthe\u00a0code\u00a0is\u00a0ugly\u00a0or\u00a0clean.\u00a0But\u00a0when\u00a0I\u00a0change\u00a0the\u00a0system,\u00a0there\u00a0is\u00a0a\u00a0human\u00a0involved,\u00a0and\nhumans\u00a0do\u00a0care.\u00a0A\u00a0poorly\u00a0designed\u00a0system\u00a0is\u00a0hard\u00a0to\u00a0change\u2014because\u00a0it\u00a0is\u00a0difficult\u00a0to\nfigure\u00a0out\u00a0what\u00a0to\u00a0change\u00a0and\u00a0how\u00a0these\u00a0changes\u00a0will\u00a0interact\u00a0with\u00a0the\u00a0existing\u00a0code\u00a0to\nget\u00a0the\u00a0behavior\u00a0I\u00a0want.\u00a0And\u00a0if\u00a0it\u00a0is\u00a0hard\u00a0to\u00a0figure\u00a0out\u00a0what\u00a0to\u00a0change,\u00a0there\u00a0is\u00a0a\u00a0good\nchance\u00a0that\u00a0I\u00a0will\u00a0make\u00a0mistakes\u00a0and\u00a0introduce\u00a0bugs.\nThus,\u00a0if\u00a0I\u2019m\u00a0faced\u00a0with\u00a0modifying\u00a0a\u00a0program\u00a0with\u00a0hundreds\u00a0of\u00a0lines\u00a0of\u00a0code,\u00a0I\u2019d\u00a0rather\u00a0it\nbe\u00a0structured\u00a0into\u00a0a\u00a0set\u00a0of\u00a0functions\u00a0and\u00a0other\u00a0program\u00a0elements\u00a0that\u00a0allow\u00a0me\u00a0to\nunderstand\u00a0more\u00a0easily\u00a0what\u00a0the\u00a0program\u00a0is\u00a0doing.\u00a0If\u00a0the\u00a0program\u00a0lacks\u00a0structure,\u00a0it\u2019s\nusually\u00a0easier\u00a0for\u00a0me\u00a0to\u00a0add\u00a0structure\u00a0to\u00a0the\u00a0program\u00a0first,\u00a0and\u00a0then\u00a0make\u00a0the\u00a0change\u00a0I\nneed.\n\u00a0When\u00a0you\u00a0have\u00a0to\u00a0add\u00a0a\u00a0feature\u00a0to\u00a0a\u00a0program\u00a0but\u00a0the\u00a0code\u00a0is\u00a0not\u00a0structured\u00a0in\na\u00a0convenient\u00a0way,\u00a0first\u00a0refactor\u00a0the\u00a0program\u00a0to\u00a0make\u00a0it\u00a0easy\u00a0to\u00a0add\u00a0the\u00a0feature,\u00a0then\nadd\u00a0the\u00a0feature.\nIn\u00a0this\u00a0case,\u00a0I\u00a0have\u00a0a\u00a0couple\u00a0of\u00a0changes\u00a0that\u00a0the\u00a0users\u00a0would\u00a0like\u00a0to\u00a0make.\u00a0First,\u00a0they\nwant\u00a0a\u00a0statement\u00a0printed\u00a0in\u00a0HTML.\u00a0Consider\u00a0what\u00a0impact\u00a0this\u00a0change\u00a0would\u00a0have.\u00a0I\u2019m\nfaced\u00a0with\u00a0adding\u00a0conditional\u00a0statements\u00a0around\u00a0every\u00a0statement\u00a0that\u00a0adds\u00a0a\u00a0string\u00a0to\nwww.EBooksWorld.ir\n", "page": 8, "type": "text", "section": "Page 8"}
{"text": "the\u00a0result.\u00a0That\u00a0will\u00a0add\u00a0a\u00a0host\u00a0of\u00a0complexity\u00a0to\u00a0the\u00a0function.\u00a0Faced\u00a0with\u00a0that,\u00a0most\npeople\u00a0prefer\u00a0to\u00a0copy\u00a0the\u00a0method\u00a0and\u00a0change\u00a0it\u00a0to\u00a0emit\u00a0HTML.\u00a0Making\u00a0a\u00a0copy\u00a0may\u00a0not\nseem\u00a0too\u00a0onerous\u00a0a\u00a0task,\u00a0but\u00a0it\u00a0sets\u00a0up\u00a0all\u00a0sorts\u00a0of\u00a0problems\u00a0for\u00a0the\u00a0future.\u00a0Any\u00a0changes\nto\u00a0the\u00a0charging\u00a0logic\u00a0would\u00a0force\u00a0me\u00a0to\u00a0update\u00a0both\u00a0methods\u2014and\u00a0to\u00a0ensure\u00a0they\u00a0are\nupdated\u00a0consistently.\u00a0If\u00a0I\u2019m\u00a0writing\u00a0a\u00a0program\u00a0that\u00a0will\u00a0never\u00a0change\u00a0again,\u00a0this\u00a0kind\u00a0of\ncopy\u00adand\u00adpaste\u00a0is\u00a0fine.\u00a0But\u00a0if\u00a0it\u2019s\u00a0a\u00a0long\u00adlived\u00a0program,\u00a0then\u00a0duplication\u00a0is\u00a0a\u00a0menace.\nThis\u00a0brings\u00a0me\u00a0to\u00a0a\u00a0second\u00a0change.\u00a0The\u00a0players\u00a0are\u00a0looking\u00a0to\u00a0perform\u00a0more\u00a0kinds\u00a0of\nplays:\u00a0they\u00a0hope\u00a0to\u00a0add\u00a0history,\u00a0pastoral,\u00a0pastoral\u00adcomical,\u00a0historical\u00adpastoral,\u00a0tragical\u00ad\nhistorical,\u00a0tragical\u00adcomical\u00adhistorical\u00adpastoral,\u00a0scene\u00a0individable,\u00a0and\u00a0poem\u00a0unlimited\nto\u00a0their\u00a0repertoire.\u00a0They\u00a0haven\u2019t\u00a0exactly\u00a0decided\u00a0yet\u00a0what\u00a0they\u00a0want\u00a0to\u00a0do\u00a0and\u00a0when.\nThis\u00a0change\u00a0will\u00a0affect\u00a0both\u00a0the\u00a0way\u00a0their\u00a0plays\u00a0are\u00a0charged\u00a0for\u00a0and\u00a0the\u00a0way\u00a0volume\ncredits\u00a0are\u00a0calculated.\u00a0As\u00a0an\u00a0experienced\u00a0developer\u00a0I\u00a0can\u00a0be\u00a0sure\u00a0that\u00a0whatever\u00a0scheme\nthey\u00a0come\u00a0up\u00a0with,\u00a0they\u00a0will\u00a0change\u00a0it\u00a0again\u00a0within\u00a0six\u00a0months.\u00a0After\u00a0all,\u00a0when\u00a0feature\nrequests\u00a0come,\u00a0they\u00a0come\u00a0not\u00a0as\u00a0single\u00a0spies\u00a0but\u00a0in\u00a0battalions.\nAgain,\u00a0that\u00a0statement\u00a0method\u00a0is\u00a0where\u00a0the\u00a0changes\u00a0need\u00a0to\u00a0be\u00a0made\u00a0to\u00a0deal\u00a0with\nchanges\u00a0in\u00a0classification\u00a0and\u00a0charging\u00a0rules.\u00a0But\u00a0if\u00a0I\u00a0copy\u00a0statement\u00a0to\nhtmlStatement,\u00a0I\u2019d\u00a0need\u00a0to\u00a0ensure\u00a0that\u00a0any\u00a0changes\u00a0are\u00a0consistent.\u00a0Furthermore,\u00a0as\nthe\u00a0rules\u00a0grow\u00a0in\u00a0complexity,\u00a0it\u2019s\u00a0going\u00a0to\u00a0be\u00a0harder\u00a0to\u00a0figure\u00a0out\u00a0where\u00a0to\u00a0make\u00a0the\nchanges\u00a0and\u00a0harder\u00a0to\u00a0do\u00a0them\u00a0without\u00a0making\u00a0a\u00a0mistake.\nLet\u00a0me\u00a0stress\u00a0that\u00a0it\u2019s\u00a0these\u00a0changes\u00a0that\u00a0drive\u00a0the\u00a0need\u00a0to\u00a0perform\u00a0refactoring.\u00a0If\u00a0the\ncode\u00a0works\u00a0and\u00a0doesn\u2019t\u00a0ever\u00a0need\u00a0to\u00a0change,\u00a0it\u2019s\u00a0perfectly\u00a0fine\u00a0to\u00a0leave\u00a0it\u00a0alone.\u00a0It\u00a0would\nbe\u00a0nice\u00a0to\u00a0improve\u00a0it,\u00a0but\u00a0unless\u00a0someone\u00a0needs\u00a0to\u00a0understand\u00a0it,\u00a0it\u00a0isn\u2019t\u00a0causing\u00a0any\nreal\u00a0harm.\u00a0Yet\u00a0as\u00a0soon\u00a0as\u00a0someone\u00a0does\u00a0need\u00a0to\u00a0understand\u00a0how\u00a0that\u00a0code\u00a0works,\u00a0and\nstruggles\u00a0to\u00a0follow\u00a0it,\u00a0then\u00a0you\u00a0have\u00a0to\u00a0do\u00a0something\u00a0about\u00a0it.\nTHE FIRST STEP IN REFACTORING\nWhenever\u00a0I\u00a0do\u00a0refactoring,\u00a0the\u00a0first\u00a0step\u00a0is\u00a0always\u00a0the\u00a0same.\u00a0I\u00a0need\u00a0to\u00a0ensure\u00a0I\u00a0have\u00a0a\nsolid\u00a0set\u00a0of\u00a0tests\u00a0for\u00a0that\u00a0section\u00a0of\u00a0code.\u00a0The\u00a0tests\u00a0are\u00a0essential\u00a0because\u00a0even\u00a0though\u00a0I\nwill\u00a0follow\u00a0refactorings\u00a0structured\u00a0to\u00a0avoid\u00a0most\u00a0of\u00a0the\u00a0opportunities\u00a0for\u00a0introducing\nbugs,\u00a0I\u2019m\u00a0still\u00a0human\u00a0and\u00a0still\u00a0make\u00a0mistakes.\u00a0The\u00a0larger\u00a0a\u00a0program,\u00a0the\u00a0more\u00a0likely\u00a0it\nis\u00a0that\u00a0my\u00a0changes\u00a0will\u00a0cause\u00a0something\u00a0to\u00a0break\u00a0inadvertently\u2014in\u00a0the\u00a0digital\u00a0age,\nfrailty\u2019s\u00a0name\u00a0is\u00a0software.\nSince\u00a0the\u00a0statement\u00a0returns\u00a0a\u00a0string,\u00a0what\u00a0I\u00a0do\u00a0is\u00a0create\u00a0a\u00a0few\u00a0invoices,\u00a0give\u00a0each\ninvoice\u00a0a\u00a0few\u00a0performances\u00a0of\u00a0various\u00a0kinds\u00a0of\u00a0plays,\u00a0and\u00a0generate\u00a0the\u00a0statement\nstrings.\u00a0I\u00a0then\u00a0do\u00a0a\u00a0string\u00a0comparison\u00a0between\u00a0the\u00a0new\u00a0string\u00a0and\u00a0some\u00a0reference\nwww.EBooksWorld.ir\n", "page": 9, "type": "text", "section": "Page 9"}
{"text": "strings\u00a0that\u00a0I\u00a0have\u00a0hand\u00adchecked.\u00a0I\u00a0set\u00a0up\u00a0all\u00a0of\u00a0these\u00a0tests\u00a0using\u00a0a\u00a0testing\u00a0framework\u00a0so\nI\u00a0can\u00a0run\u00a0them\u00a0with\u00a0just\u00a0a\u00a0simple\u00a0keystroke\u00a0in\u00a0my\u00a0development\u00a0environment.\u00a0The\u00a0tests\ntake\u00a0only\u00a0a\u00a0few\u00a0seconds\u00a0to\u00a0run,\u00a0and\u00a0as\u00a0you\u00a0will\u00a0see,\u00a0I\u00a0run\u00a0them\u00a0often.\nAn\u00a0important\u00a0part\u00a0of\u00a0the\u00a0tests\u00a0is\u00a0the\u00a0way\u00a0they\u00a0report\u00a0their\u00a0results.\u00a0They\u00a0either\u00a0go\u00a0green,\nmeaning\u00a0that\u00a0all\u00a0the\u00a0strings\u00a0are\u00a0identical\u00a0to\u00a0the\u00a0reference\u00a0strings,\u00a0or\u00a0red,\u00a0showing\u00a0a\u00a0list\nof\u00a0failures\u2014the\u00a0lines\u00a0that\u00a0turned\u00a0out\u00a0differently.\u00a0The\u00a0tests\u00a0are\u00a0thus\u00a0self\u00adchecking.\u00a0It\u00a0is\nvital\u00a0to\u00a0make\u00a0tests\u00a0self\u00adchecking.\u00a0If\u00a0I\u00a0don\u2019t,\u00a0I\u2019d\u00a0end\u00a0up\u00a0spending\u00a0time\u00a0hand\u00adchecking\nvalues\u00a0from\u00a0the\u00a0test\u00a0against\u00a0values\u00a0on\u00a0a\u00a0desk\u00a0pad,\u00a0and\u00a0that\u00a0would\u00a0slow\u00a0me\u00a0down.\nModern\u00a0testing\u00a0frameworks\u00a0provide\u00a0all\u00a0the\u00a0features\u00a0needed\u00a0to\u00a0write\u00a0and\u00a0run\u00a0self\u00ad\nchecking\u00a0tests.\n\u00a0Before\u00a0you\u00a0start\u00a0refactoring,\u00a0make\u00a0sure\u00a0you\u00a0have\u00a0a\u00a0solid\u00a0suite\u00a0of\u00a0tests.\u00a0These\ntests\u00a0must\u00a0be\u00a0self\u00adchecking.\nAs\u00a0I\u00a0do\u00a0the\u00a0refactoring,\u00a0I\u2019ll\u00a0lean\u00a0on\u00a0the\u00a0tests.\u00a0I\u00a0think\u00a0of\u00a0them\u00a0as\u00a0a\u00a0bug\u00a0detector\u00a0to\u00a0protect\nme\u00a0against\u00a0my\u00a0own\u00a0mistakes.\u00a0By\u00a0writing\u00a0what\u00a0I\u00a0want\u00a0twice,\u00a0in\u00a0the\u00a0code\u00a0and\u00a0in\u00a0the\u00a0test,\u00a0I\nhave\u00a0to\u00a0make\u00a0the\u00a0mistake\u00a0consistently\u00a0in\u00a0both\u00a0places\u00a0to\u00a0fool\u00a0the\u00a0detector.\u00a0By\u00a0double\u00ad\nchecking\u00a0my\u00a0work,\u00a0I\u00a0reduce\u00a0the\u00a0chance\u00a0of\u00a0doing\u00a0something\u00a0wrong.\u00a0Although\u00a0it\u00a0takes\ntime\u00a0to\u00a0build\u00a0the\u00a0tests,\u00a0I\u00a0end\u00a0up\u00a0saving\u00a0that\u00a0time,\u00a0with\u00a0considerable\u00a0interest,\u00a0by\nspending\u00a0less\u00a0time\u00a0debugging.\u00a0This\u00a0is\u00a0such\u00a0an\u00a0important\u00a0part\u00a0of\u00a0refactoring\u00a0that\u00a0I\ndevote\u00a0a\u00a0full\u00a0chapter\u00a0to\u00a0it\u00a0(Building\u00a0Tests\u00a0(85)).\nDECOMPOSING THE STATEMENT FUNCTION\nWhen\u00a0refactoring\u00a0a\u00a0long\u00a0function\u00a0like\u00a0this,\u00a0I\u00a0mentally\u00a0try\u00a0to\u00a0identify\u00a0points\u00a0that\u00a0separate\ndifferent\u00a0parts\u00a0of\u00a0the\u00a0overall\u00a0behavior.\u00a0The\u00a0first\u00a0chunk\u00a0that\u00a0leaps\u00a0to\u00a0my\u00a0eye\u00a0is\u00a0the\u00a0switch\nstatement\u00a0in\u00a0the\u00a0middle.\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0statement\u00a0(invoice,\u00a0plays)\u00a0{\n\u00a0\u00a0let\u00a0totalAmount\u00a0=\u00a00\u037e\n\u00a0\u00a0let\u00a0volumeCredits\u00a0=\u00a00\u037e\n\u00a0\u00a0let\u00a0result\u00a0=\u00a0`Statement\u00a0for\u00a0${invoice.customer}\\n`\u037e\n\u00a0\u00a0const\u00a0format\u00a0=\u00a0new\u00a0Intl.NumberFormat(\"en\u00adUS\",\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0{\u00a0style:\u00a0\"currency\",\u00a0currency:\u00a0\"USD\",\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0minimumFractionDigits:\u00a02\u00a0}).format\u037e\n\u00a0\u00a0for\u00a0(let\u00a0perf\u00a0of\u00a0invoice.performances)\u00a0{\n\u00a0\u00a0\u00a0\u00a0const\u00a0play\u00a0=\u00a0plays[perf.playID]\u037e\n\u00a0\u00a0\u00a0\u00a0let\u00a0thisAmount\u00a0=\u00a00\u037e\nwww.EBooksWorld.ir\n", "page": 10, "type": "text", "section": "Page 10"}
{"text": "\u00a0\u00a0\u00a0\u00a0switch\u00a0(play.type)\u00a0{\n\u00a0\u00a0\u00a0\u00a0case\u00a0\"tragedy\":\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0thisAmount\u00a0=\u00a040000\u037e\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0if\u00a0(perf.audience\u00a0>\u00a030)\u00a0{\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0thisAmount\u00a0+=\u00a01000\u00a0*\u00a0(perf.audience\u00a0\u00ad\u00a030)\u037e\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0}\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0break\u037e\n\u00a0\u00a0\u00a0\u00a0case\u00a0\"comedy\":\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0thisAmount\u00a0=\u00a030000\u037e\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0if\u00a0(perf.audience\u00a0>\u00a020)\u00a0{\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0thisAmount\u00a0+=\u00a010000\u00a0+\u00a0500\u00a0*\u00a0(perf.audience\u00a0\u00ad\u00a020)\u037e\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0}\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0thisAmount\u00a0+=\u00a0300\u00a0*\u00a0perf.audience\u037e\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0break\u037e\n\u00a0\u00a0\u00a0\u00a0default:\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0throw\u00a0new\u00a0Error(`unknown\u00a0type:\u00a0${play.type}`)\u037e\n\u00a0\u00a0\u00a0\u00a0}\n\u00a0\u00a0\u00a0\u00a0//\u00a0add\u00a0volume\u00a0credits\n\u00a0\u00a0\u00a0\u00a0volumeCredits\u00a0+=\u00a0Math.max(perf.audience\u00a0\u00ad\u00a030,\u00a00)\u037e\n\u00a0\u00a0\u00a0\u00a0//\u00a0add\u00a0extra\u00a0credit\u00a0for\u00a0every\u00a0ten\u00a0comedy\u00a0attendees\n\u00a0\u00a0\u00a0\u00a0if\u00a0(\"comedy\"\u00a0===\u00a0play.type)\u00a0volumeCredits\u00a0+=\u00a0Math.floor(perf.audience\u00a0/\u00a05)\u037e\n\u00a0\u00a0\u00a0\u00a0//\u00a0print\u00a0line\u00a0for\u00a0this\u00a0order\n\u00a0\u00a0\u00a0\u00a0result\u00a0+=\u00a0`\u00a0\u00a0${play.name}:\u00a0${format(thisAmount/100)}\u00a0(${perf.audience}\u00a0seats\n\u00a0\u00a0\u00a0\u00a0totalAmount\u00a0+=\u00a0thisAmount\u037e\n\u00a0\u00a0}\n\u00a0\u00a0result\u00a0+=\u00a0`Amount\u00a0owed\u00a0is\u00a0${format(totalAmount/100)}\\n`\u037e\n\u00a0\u00a0result\u00a0+=\u00a0`You\u00a0earned\u00a0${volumeCredits}\u00a0credits\\n`\u037e\n\u00a0\u00a0return\u00a0result\u037e\n}\nAs\u00a0I\u00a0look\u00a0at\u00a0this\u00a0chunk,\u00a0I\u00a0conclude\u00a0that\u00a0it\u2019s\u00a0calculating\u00a0the\u00a0charge\u00a0for\u00a0one\u00a0performance.\nThat\u00a0conclusion\u00a0is\u00a0a\u00a0piece\u00a0of\u00a0insight\u00a0about\u00a0the\u00a0code.\u00a0But\u00a0as\u00a0Ward\u00a0Cunningham\u00a0puts\u00a0it,\nthis\u00a0understanding\u00a0is\u00a0in\u00a0my\u00a0head\u2014a\u00a0notoriously\u00a0volatile\u00a0form\u00a0of\u00a0storage.\u00a0I\u00a0need\u00a0to\npersist\u00a0it\u00a0by\u00a0moving\u00a0it\u00a0from\u00a0my\u00a0head\u00a0back\u00a0into\u00a0the\u00a0code\u00a0itself.\u00a0That\u00a0way,\u00a0should\u00a0I\u00a0come\nback\u00a0to\u00a0it\u00a0later,\u00a0the\u00a0code\u00a0will\u00a0tell\u00a0me\u00a0what\u00a0it\u2019s\u00a0doing\u2014I\u00a0don\u2019t\u00a0have\u00a0to\u00a0figure\u00a0it\u00a0out\u00a0again.\nThe\u00a0way\u00a0to\u00a0put\u00a0that\u00a0understanding\u00a0into\u00a0code\u00a0is\u00a0to\u00a0turn\u00a0that\u00a0chunk\u00a0of\u00a0code\u00a0into\u00a0its\u00a0own\nfunction,\u00a0naming\u00a0it\u00a0after\u00a0what\u00a0it\u00a0does\u2014something\u00a0like\u00a0amountFor(aPerformance).\nWhen\u00a0I\u00a0want\u00a0to\u00a0turn\u00a0a\u00a0chunk\u00a0of\u00a0code\u00a0into\u00a0a\u00a0function\u00a0like\u00a0this,\u00a0I\u00a0have\u00a0a\u00a0procedure\u00a0for\ndoing\u00a0it\u00a0that\u00a0minimizes\u00a0my\u00a0chances\u00a0of\u00a0getting\u00a0it\u00a0wrong.\u00a0I\u00a0wrote\u00a0down\u00a0this\u00a0procedure\nand,\u00a0to\u00a0make\u00a0it\u00a0easy\u00a0to\u00a0reference,\u00a0named\u00a0it\u00a0Extract\u00a0Function\u00a0(106).\nFirst,\u00a0I\u00a0need\u00a0to\u00a0look\u00a0in\u00a0the\u00a0fragment\u00a0for\u00a0any\u00a0variables\u00a0that\u00a0will\u00a0no\u00a0longer\u00a0be\u00a0in\u00a0scope\nonce\u00a0I\u2019ve\u00a0extracted\u00a0the\u00a0code\u00a0into\u00a0its\u00a0own\u00a0function.\u00a0In\u00a0this\u00a0case,\u00a0I\u00a0have\u00a0three:\u00a0perf,\nwww.EBooksWorld.ir\n", "page": 11, "type": "text", "section": "Page 11"}
{"text": "play,\u00a0and\u00a0thisAmount.\u00a0The\u00a0first\u00a0two\u00a0are\u00a0used\u00a0by\u00a0the\u00a0extracted\u00a0code,\u00a0but\u00a0not\u00a0modified,\nso\u00a0I\u00a0can\u00a0pass\u00a0them\u00a0in\u00a0as\u00a0parameters.\u00a0Modified\u00a0variables\u00a0need\u00a0more\u00a0care.\u00a0Here,\u00a0there\u00a0is\nonly\u00a0one,\u00a0so\u00a0I\u00a0can\u00a0return\u00a0it.\u00a0I\u00a0can\u00a0also\u00a0bring\u00a0its\u00a0initialization\u00a0inside\u00a0the\u00a0extracted\u00a0code.\nAll\u00a0of\u00a0which\u00a0yields\u00a0this:\nfunction\u00a0statement\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0amountFor(perf,\u00a0play)\u00a0{\n\u00a0\u00a0let\u00a0thisAmount\u00a0=\u00a00\u037e\n\u00a0\u00a0switch\u00a0(play.type)\u00a0{\n\u00a0\u00a0case\u00a0\"tragedy\":\n\u00a0\u00a0\u00a0\u00a0thisAmount\u00a0=\u00a040000\u037e\n\u00a0\u00a0\u00a0\u00a0if\u00a0(perf.audience\u00a0>\u00a030)\u00a0{\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0thisAmount\u00a0+=\u00a01000\u00a0*\u00a0(perf.audience\u00a0\u00ad\u00a030)\u037e\n\u00a0\u00a0\u00a0\u00a0}\n\u00a0\u00a0\u00a0\u00a0break\u037e\n\u00a0\u00a0case\u00a0\"comedy\":\n\u00a0\u00a0\u00a0\u00a0thisAmount\u00a0=\u00a030000\u037e\n\u00a0\u00a0\u00a0\u00a0if\u00a0(perf.audience\u00a0>\u00a020)\u00a0{\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0thisAmount\u00a0+=\u00a010000\u00a0+\u00a0500\u00a0*\u00a0(perf.audience\u00a0\u00ad\u00a020)\u037e\n\u00a0\u00a0\u00a0\u00a0}\n\u00a0\u00a0\u00a0\u00a0thisAmount\u00a0+=\u00a0300\u00a0*\u00a0perf.audience\u037e\n\u00a0\u00a0\u00a0\u00a0break\u037e\n\u00a0\u00a0default:\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0throw\u00a0new\u00a0Error(`unknown\u00a0type:\u00a0${play.type}`)\u037e\n\u00a0\u00a0}\n\u00a0\u00a0return\u00a0thisAmount\u037e\n}\nWhen\u00a0I\u00a0use\u00a0a\u00a0header\u00a0like\u00a0\u201cfunction\u00a0someName\u2026\u201d\u00a0in\u00a0italics\u00a0for\u00a0some\u00a0code,\u00a0that\u00a0means\nthat\u00a0the\u00a0following\u00a0code\u00a0is\u00a0within\u00a0the\u00a0scope\u00a0of\u00a0the\u00a0function,\u00a0file,\u00a0or\u00a0class\u00a0named\u00a0in\u00a0the\nheader.\u00a0There\u00a0is\u00a0usually\u00a0other\u00a0code\u00a0within\u00a0that\u00a0scope\u00a0that\u00a0I\u00a0won\u2019t\u00a0show,\u00a0as\u00a0I\u2019m\u00a0not\ndiscussing\u00a0it\u00a0at\u00a0the\u00a0moment.\nThe\u00a0original\u00a0statement\u00a0code\u00a0now\u00a0calls\u00a0this\u00a0function\u00a0to\u00a0populate\u00a0thisAmount:\ntop\u00a0level\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0statement\u00a0(invoice,\u00a0plays)\u00a0{\n\u00a0\u00a0let\u00a0totalAmount\u00a0=\u00a00\u037e\n\u00a0\u00a0let\u00a0volumeCredits\u00a0=\u00a00\u037e\n\u00a0\u00a0let\u00a0result\u00a0=\u00a0`Statement\u00a0for\u00a0${invoice.customer}\\n`\u037e\nwww.EBooksWorld.ir\n", "page": 12, "type": "text", "section": "Page 12"}
{"text": "\u00a0\u00a0const\u00a0format\u00a0=\u00a0new\u00a0Intl.NumberFormat(\"en\u00adUS\",\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0{\u00a0style:\u00a0\"currency\",\u00a0currency:\u00a0\"USD\",\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0minimumFractionDigits:\u00a02\u00a0}).format\u037e\n\u00a0\u00a0for\u00a0(let\u00a0perf\u00a0of\u00a0invoice.performances)\u00a0{\n\u00a0\u00a0\u00a0\u00a0const\u00a0play\u00a0=\u00a0plays[perf.playID]\u037e\n\u00a0\u00a0\u00a0\u00a0let\u00a0thisAmount\u00a0=\u00a0amountFor(perf,\u00a0play)\u037e\n\u00a0\u00a0\u00a0\u00a0//\u00a0add\u00a0volume\u00a0credits\n\u00a0\u00a0\u00a0\u00a0volumeCredits\u00a0+=\u00a0Math.max(perf.audience\u00a0\u00ad\u00a030,\u00a00)\u037e\n\u00a0\u00a0\u00a0\u00a0//\u00a0add\u00a0extra\u00a0credit\u00a0for\u00a0every\u00a0ten\u00a0comedy\u00a0attendees\n\u00a0\u00a0\u00a0\u00a0if\u00a0(\"comedy\"\u00a0===\u00a0play.type)\u00a0volumeCredits\u00a0+=\u00a0Math.floor(perf.audience\u00a0/\u00a05)\u037e\n\u00a0\u00a0\u00a0\u00a0//\u00a0print\u00a0line\u00a0for\u00a0this\u00a0order\n\u00a0\u00a0\u00a0\u00a0result\u00a0+=\u00a0`\u00a0\u00a0${play.name}:\u00a0${format(thisAmount/100)}\u00a0(${perf.audience}\u00a0seats\n\u00a0\u00a0\u00a0\u00a0totalAmount\u00a0+=\u00a0thisAmount\u037e\n\u00a0\u00a0}\n\u00a0\u00a0result\u00a0+=\u00a0`Amount\u00a0owed\u00a0is\u00a0${format(totalAmount/100)}\\n`\u037e\n\u00a0\u00a0result\u00a0+=\u00a0`You\u00a0earned\u00a0${volumeCredits}\u00a0credits\\n`\u037e\n\u00a0\u00a0return\u00a0result\u037e\nOnce\u00a0I\u2019ve\u00a0made\u00a0this\u00a0change,\u00a0I\u00a0immediately\u00a0compile\u00a0and\u00a0test\u00a0to\u00a0see\u00a0if\u00a0I\u2019ve\u00a0broken\nanything.\u00a0It\u2019s\u00a0an\u00a0important\u00a0habit\u00a0to\u00a0test\u00a0after\u00a0every\u00a0refactoring,\u00a0however\u00a0simple.\nMistakes\u00a0are\u00a0easy\u00a0to\u00a0make\u2014at\u00a0least,\u00a0I\u00a0find\u00a0them\u00a0easy\u00a0to\u00a0make.\u00a0Testing\u00a0after\u00a0each\u00a0change\nmeans\u00a0that\u00a0when\u00a0I\u00a0make\u00a0a\u00a0mistake,\u00a0I\u00a0only\u00a0have\u00a0a\u00a0small\u00a0change\u00a0to\u00a0consider\u00a0in\u00a0order\u00a0to\nspot\u00a0the\u00a0error,\u00a0which\u00a0makes\u00a0it\u00a0far\u00a0easier\u00a0to\u00a0find\u00a0and\u00a0fix.\u00a0This\u00a0is\u00a0the\u00a0essence\u00a0of\u00a0the\nrefactoring\u00a0process:\u00a0small\u00a0changes\u00a0and\u00a0testing\u00a0after\u00a0each\u00a0change.\u00a0If\u00a0I\u00a0try\u00a0to\u00a0do\u00a0too\nmuch,\u00a0making\u00a0a\u00a0mistake\u00a0will\u00a0force\u00a0me\u00a0into\u00a0a\u00a0tricky\u00a0debugging\u00a0episode\u00a0that\u00a0can\u00a0take\u00a0a\nlong\u00a0time.\u00a0Small\u00a0changes,\u00a0enabling\u00a0a\u00a0tight\u00a0feedback\u00a0loop,\u00a0are\u00a0the\u00a0key\u00a0to\u00a0avoiding\u00a0that\nmess.\nI\u00a0use\u00a0compile\u00a0here\u00a0to\u00a0mean\u00a0doing\u00a0whatever\u00a0is\u00a0needed\u00a0to\u00a0make\u00a0the\u00a0JavaScript\nexecutable.\u00a0Since\u00a0JavaScript\u00a0is\u00a0directly\u00a0executable,\u00a0that\u00a0may\u00a0mean\u00a0nothing,\u00a0but\u00a0in\u00a0other\ncases\u00a0it\u00a0may\u00a0mean\u00a0moving\u00a0code\u00a0to\u00a0an\u00a0output\u00a0directory\u00a0and/or\u00a0using\u00a0a\u00a0processor\u00a0such\u00a0as\nBabel\u00a0[babel].\n\u00a0Refactoring\u00a0changes\u00a0the\u00a0programs\u00a0in\u00a0small\u00a0steps,\u00a0so\u00a0if\u00a0you\u00a0make\u00a0a\u00a0mistake,\u00a0it\nis\u00a0easy\u00a0to\u00a0find\u00a0where\u00a0the\u00a0bug\u00a0is.\nThis\u00a0being\u00a0JavaScript,\u00a0I\u00a0can\u00a0extract\u00a0amountFor\u00a0into\u00a0a\u00a0nested\u00a0function\u00a0of\u00a0statement.\nThis\u00a0is\u00a0helpful\u00a0as\u00a0it\u00a0means\u00a0I\u00a0don\u2019t\u00a0have\u00a0to\u00a0pass\u00a0data\u00a0that\u2019s\u00a0inside\u00a0the\u00a0scope\u00a0of\u00a0the\ncontaining\u00a0function\u00a0to\u00a0the\u00a0newly\u00a0extracted\u00a0function.\u00a0That\u00a0doesn\u2019t\u00a0make\u00a0a\u00a0difference\u00a0in\nthis\u00a0case,\u00a0but\u00a0it\u2019s\u00a0one\u00a0less\u00a0issue\u00a0to\u00a0deal\u00a0with.\nwww.EBooksWorld.ir\n", "page": 13, "type": "text", "section": "Page 13"}
{"text": "In\u00a0this\u00a0case\u00a0the\u00a0tests\u00a0passed,\u00a0so\u00a0my\u00a0next\u00a0step\u00a0is\u00a0to\u00a0commit\u00a0the\u00a0change\u00a0to\u00a0my\u00a0local\nversion\u00a0control\u00a0system.\u00a0I\u00a0use\u00a0a\u00a0version\u00a0control\u00a0system,\u00a0such\u00a0as\u00a0git\u00a0or\u00a0mercurial,\u00a0that\nallows\u00a0me\u00a0to\u00a0make\u00a0private\u00a0commits.\u00a0I\u00a0commit\u00a0after\u00a0each\u00a0successful\u00a0refactoring,\u00a0so\u00a0I\u00a0can\neasily\u00a0get\u00a0back\u00a0to\u00a0a\u00a0working\u00a0state\u00a0should\u00a0I\u00a0mess\u00a0up\u00a0later.\u00a0I\u00a0then\u00a0squash\u00a0changes\u00a0into\nmore\u00a0significant\u00a0commits\u00a0before\u00a0I\u00a0push\u00a0the\u00a0changes\u00a0to\u00a0a\u00a0shared\u00a0repository.\nExtract\u00a0Function\u00a0(106)\u00a0is\u00a0a\u00a0common\u00a0refactoring\u00a0to\u00a0automate.\u00a0If\u00a0I\u00a0was\u00a0programming\u00a0in\nJava,\u00a0I\u00a0would\u00a0have\u00a0instinctively\u00a0reached\u00a0for\u00a0the\u00a0key\u00a0sequence\u00a0for\u00a0my\u00a0IDE\u00a0to\u00a0perform\nthis\u00a0refactoring.\u00a0As\u00a0I\u00a0write\u00a0this,\u00a0there\u00a0is\u00a0no\u00a0such\u00a0robust\u00a0support\u00a0for\u00a0this\u00a0refactoring\u00a0in\nJavaScript\u00a0tools,\u00a0so\u00a0I\u00a0have\u00a0to\u00a0do\u00a0this\u00a0manually.\u00a0It\u2019s\u00a0not\u00a0hard,\u00a0although\u00a0I\u00a0have\u00a0to\u00a0be\ncareful\u00a0with\u00a0those\u00a0locally\u00a0scoped\u00a0variables.\nOnce\u00a0I\u2019ve\u00a0used\u00a0Extract\u00a0Function\u00a0(106),\u00a0I\u00a0take\u00a0a\u00a0look\u00a0at\u00a0what\u00a0I\u2019ve\u00a0extracted\u00a0to\u00a0see\u00a0if\u00a0there\nare\u00a0any\u00a0quick\u00a0and\u00a0easy\u00a0things\u00a0I\u00a0can\u00a0do\u00a0to\u00a0clarify\u00a0the\u00a0extracted\u00a0function.\u00a0The\u00a0first\u00a0thing\u00a0I\ndo\u00a0is\u00a0rename\u00a0some\u00a0of\u00a0the\u00a0variables\u00a0to\u00a0make\u00a0them\u00a0clearer,\u00a0such\u00a0as\u00a0changing\nthisAmount\u00a0to\u00a0result.\nfunction\u00a0statement\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0amountFor(perf,\u00a0play)\u00a0{\n\u00a0\u00a0let\u00a0result\u00a0=\u00a00\u037e\n\u00a0\u00a0switch\u00a0(play.type)\u00a0{\n\u00a0\u00a0case\u00a0\"tragedy\":\n\u00a0\u00a0\u00a0\u00a0result\u00a0=\u00a040000\u037e\n\u00a0\u00a0\u00a0\u00a0if\u00a0(perf.audience\u00a0>\u00a030)\u00a0{\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0result\u00a0+=\u00a01000\u00a0*\u00a0(perf.audience\u00a0\u00ad\u00a030)\u037e\n\u00a0\u00a0\u00a0\u00a0}\n\u00a0\u00a0\u00a0\u00a0break\u037e\n\u00a0\u00a0case\u00a0\"comedy\":\n\u00a0\u00a0\u00a0\u00a0result\u00a0=\u00a030000\u037e\n\u00a0\u00a0\u00a0\u00a0if\u00a0(perf.audience\u00a0>\u00a020)\u00a0{\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0result\u00a0+=\u00a010000\u00a0+\u00a0500\u00a0*\u00a0(perf.audience\u00a0\u00ad\u00a020)\u037e\n\u00a0\u00a0\u00a0\u00a0}\n\u00a0\u00a0\u00a0\u00a0result\u00a0+=\u00a0300\u00a0*\u00a0perf.audience\u037e\n\u00a0\u00a0\u00a0\u00a0break\u037e\n\u00a0\u00a0default:\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0throw\u00a0new\u00a0Error(`unknown\u00a0type:\u00a0${play.type}`)\u037e\n\u00a0\u00a0}\n\u00a0\u00a0return\u00a0result\u037e\n}\nIt\u2019s\u00a0my\u00a0coding\u00a0standard\u00a0to\u00a0always\u00a0call\u00a0the\u00a0return\u00a0value\u00a0from\u00a0a\u00a0function\u00a0\u201cresult\u201d.\u00a0That\nway\u00a0I\u00a0always\u00a0know\u00a0its\u00a0role.\u00a0Again,\u00a0I\u00a0compile,\u00a0test,\u00a0and\u00a0commit.\u00a0Then\u00a0I\u00a0move\u00a0onto\u00a0the\nwww.EBooksWorld.ir\n", "page": 14, "type": "text", "section": "Page 14"}
{"text": "first\u00a0argument.\nfunction\u00a0statement\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0amountFor(aPerformance,\u00a0play)\u00a0{\n\u00a0\u00a0let\u00a0result\u00a0=\u00a00\u037e\n\u00a0\u00a0switch\u00a0(play.type)\u00a0{\n\u00a0\u00a0case\u00a0\"tragedy\":\n\u00a0\u00a0\u00a0\u00a0result\u00a0=\u00a040000\u037e\n\u00a0\u00a0\u00a0\u00a0if\u00a0(aPerformance.audience\u00a0>\u00a030)\u00a0{\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0result\u00a0+=\u00a01000\u00a0*\u00a0(aPerformance.audience\u00a0\u00ad\u00a030)\u037e\n\u00a0\u00a0\u00a0\u00a0}\n\u00a0\u00a0\u00a0\u00a0break\u037e\n\u00a0\u00a0case\u00a0\"comedy\":\n\u00a0\u00a0\u00a0\u00a0result\u00a0=\u00a030000\u037e\n\u00a0\u00a0\u00a0\u00a0if\u00a0(aPerformance.audience\u00a0>\u00a020)\u00a0{\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0result\u00a0+=\u00a010000\u00a0+\u00a0500\u00a0*\u00a0(aPerformance.audience\u00a0\u00ad\u00a020)\u037e\n\u00a0\u00a0\u00a0\u00a0}\n\u00a0\u00a0\u00a0\u00a0result\u00a0+=\u00a0300\u00a0*\u00a0aPerformance.audience\u037e\n\u00a0\u00a0\u00a0\u00a0break\u037e\n\u00a0\u00a0default:\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0throw\u00a0new\u00a0Error(`unknown\u00a0type:\u00a0${play.type}`)\u037e\n\u00a0\u00a0}\n\u00a0\u00a0return\u00a0result\u037e\n}\nAgain,\u00a0this\u00a0is\u00a0following\u00a0my\u00a0coding\u00a0style.\u00a0With\u00a0a\u00a0dynamically\u00a0typed\u00a0language\u00a0such\u00a0as\nJavaScript,\u00a0it\u2019s\u00a0useful\u00a0to\u00a0keep\u00a0track\u00a0of\u00a0types\u2014hence,\u00a0my\u00a0default\u00a0name\u00a0for\u00a0a\u00a0parameter\nincludes\u00a0the\u00a0type\u00a0name.\u00a0I\u00a0use\u00a0an\u00a0indefinite\u00a0article\u00a0with\u00a0it\u00a0unless\u00a0there\u00a0is\u00a0some\u00a0specific\nrole\u00a0information\u00a0to\u00a0capture\u00a0in\u00a0the\u00a0name.\u00a0I\u00a0learned\u00a0this\u00a0convention\u00a0from\u00a0Kent\u00a0Beck\n[Beck\u00a0SBPP]\u00a0and\u00a0continue\u00a0to\u00a0find\u00a0it\u00a0helpful.\n\u00a0Any\u00a0fool\u00a0can\u00a0write\u00a0code\u00a0that\u00a0a\u00a0computer\u00a0can\u00a0understand.\u00a0Good\u00a0programmers\nwrite\u00a0code\u00a0that\u00a0humans\u00a0can\u00a0understand.\nIs\u00a0this\u00a0renaming\u00a0worth\u00a0the\u00a0effort?\u00a0Absolutely.\u00a0Good\u00a0code\u00a0should\u00a0clearly\u00a0communicate\nwhat\u00a0it\u00a0is\u00a0doing,\u00a0and\u00a0variable\u00a0names\u00a0are\u00a0a\u00a0key\u00a0to\u00a0clear\u00a0code.\u00a0Never\u00a0be\u00a0afraid\u00a0to\u00a0change\nnames\u00a0to\u00a0improve\u00a0clarity.\u00a0With\u00a0good\u00a0find\u00adand\u00adreplace\u00a0tools,\u00a0it\u00a0is\u00a0usually\u00a0not\u00a0difficult\u037e\ntesting,\u00a0and\u00a0static\u00a0typing\u00a0in\u00a0a\u00a0language\u00a0that\u00a0supports\u00a0it,\u00a0will\u00a0highlight\u00a0any\u00a0occurrences\nyou\u00a0miss.\u00a0And\u00a0with\u00a0automated\u00a0refactoring\u00a0tools,\u00a0it\u2019s\u00a0trivial\u00a0to\u00a0rename\u00a0even\u00a0widely\u00a0used\nfunctions.\nwww.EBooksWorld.ir\n", "page": 15, "type": "text", "section": "Page 15"}
{"text": "The\u00a0next\u00a0item\u00a0to\u00a0consider\u00a0for\u00a0renaming\u00a0is\u00a0the\u00a0play\u00a0parameter,\u00a0but\u00a0I\u00a0have\u00a0a\u00a0different\nfate\u00a0for\u00a0that.\nRemoving the play Variable\nAs\u00a0I\u00a0consider\u00a0the\u00a0parameters\u00a0to\u00a0amountFor,\u00a0I\u00a0look\u00a0to\u00a0see\u00a0where\u00a0they\u00a0come\u00a0from.\naPerformance\u00a0comes\u00a0from\u00a0the\u00a0loop\u00a0variable,\u00a0so\u00a0naturally\u00a0changes\u00a0with\u00a0each\u00a0iteration\nthrough\u00a0the\u00a0loop.\u00a0But\u00a0play\u00a0is\u00a0computed\u00a0from\u00a0the\u00a0performance,\u00a0so\u00a0there\u2019s\u00a0no\u00a0need\u00a0to\npass\u00a0it\u00a0in\u00a0as\u00a0a\u00a0parameter\u00a0at\u00a0all\u2014I\u00a0can\u00a0just\u00a0recalculate\u00a0it\u00a0within\u00a0amountFor.\u00a0When\u00a0I\u2019m\nbreaking\u00a0down\u00a0a\u00a0long\u00a0function,\u00a0I\u00a0like\u00a0to\u00a0get\u00a0rid\u00a0of\u00a0variables\u00a0like\u00a0play,\u00a0because\ntemporary\u00a0variables\u00a0create\u00a0a\u00a0lot\u00a0of\u00a0locally\u00a0scoped\u00a0names\u00a0that\u00a0complicate\u00a0extractions.\nThe\u00a0refactoring\u00a0I\u00a0will\u00a0use\u00a0here\u00a0is\u00a0Replace\u00a0Temp\u00a0with\u00a0Query\u00a0(178).\nI\u00a0begin\u00a0by\u00a0extracting\u00a0the\u00a0right\u00adhand\u00a0side\u00a0of\u00a0the\u00a0assignment\u00a0into\u00a0a\u00a0function.\nfunction\u00a0statement\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0playFor(aPerformance)\u00a0{\n\u00a0\u00a0return\u00a0plays[aPerformance.playID]\u037e\n}\ntop\u00a0level\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0statement\u00a0(invoice,\u00a0plays)\u00a0{\n\u00a0\u00a0let\u00a0totalAmount\u00a0=\u00a00\u037e\n\u00a0\u00a0let\u00a0volumeCredits\u00a0=\u00a00\u037e\n\u00a0\u00a0let\u00a0result\u00a0=\u00a0`Statement\u00a0for\u00a0${invoice.customer}\\n`\u037e\n\u00a0\u00a0const\u00a0format\u00a0=\u00a0new\u00a0Intl.NumberFormat(\"en\u00adUS\",\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0{\u00a0style:\u00a0\"currency\",\u00a0currency:\u00a0\"USD\",\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0minimumFractionDigits:\u00a02\u00a0}).format\u037e\n\u00a0\u00a0for\u00a0(let\u00a0perf\u00a0of\u00a0invoice.performances)\u00a0{\n\u00a0\u00a0\u00a0\u00a0const\u00a0play\u00a0=\u00a0playFor(perf)\u037e\n\u00a0\u00a0\u00a0\u00a0let\u00a0thisAmount\u00a0=\u00a0amountFor(perf,\u00a0play)\u037e\n\u00a0\u00a0\u00a0\u00a0//\u00a0add\u00a0volume\u00a0credits\n\u00a0\u00a0\u00a0\u00a0volumeCredits\u00a0+=\u00a0Math.max(perf.audience\u00a0\u00ad\u00a030,\u00a00)\u037e\n\u00a0\u00a0\u00a0\u00a0//\u00a0add\u00a0extra\u00a0credit\u00a0for\u00a0every\u00a0ten\u00a0comedy\u00a0attendees\n\u00a0\u00a0\u00a0\u00a0if\u00a0(\"comedy\"\u00a0===\u00a0play.type)\u00a0volumeCredits\u00a0+=\u00a0Math.floor(perf.audience\u00a0/\u00a05)\u037e\n\u00a0\u00a0\u00a0\u00a0//\u00a0print\u00a0line\u00a0for\u00a0this\u00a0order\n\u00a0\u00a0\u00a0\u00a0result\u00a0+=\u00a0`\u00a0\u00a0${play.name}:\u00a0${format(thisAmount/100)}\u00a0(${perf.audience}\u00a0seats\nwww.EBooksWorld.ir\n", "page": 16, "type": "text", "section": "Page 16"}
{"text": "\u00a0\u00a0\u00a0\u00a0totalAmount\u00a0+=\u00a0thisAmount\u037e\n\u00a0\u00a0}\n\u00a0\u00a0result\u00a0+=\u00a0`Amount\u00a0owed\u00a0is\u00a0${format(totalAmount/100)}\\n`\u037e\n\u00a0\u00a0result\u00a0+=\u00a0`You\u00a0earned\u00a0${volumeCredits}\u00a0credits\\n`\u037e\n\u00a0\u00a0return\u00a0result\u037e\nI\u00a0compile\u00adtest\u00adcommit,\u00a0and\u00a0then\u00a0use\u00a0Inline\u00a0Variable\u00a0(123).\ntop\u00a0level\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0statement\u00a0(invoice,\u00a0plays)\u00a0{\n\u00a0\u00a0let\u00a0totalAmount\u00a0=\u00a00\u037e\n\u00a0\u00a0let\u00a0volumeCredits\u00a0=\u00a00\u037e\n\u00a0\u00a0let\u00a0result\u00a0=\u00a0`Statement\u00a0for\u00a0${invoice.customer}\\n`\u037e\n\u00a0\u00a0const\u00a0format\u00a0=\u00a0new\u00a0Intl.NumberFormat(\"en\u00adUS\",\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0{\u00a0style:\u00a0\"currency\",\u00a0currency:\u00a0\"USD\",\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0minimumFractionDigits:\u00a02\u00a0}).format\u037e\n\u00a0\u00a0for\u00a0(let\u00a0perf\u00a0of\u00a0invoice.performances)\u00a0{\n\u00a0\u00a0\u00a0\u00a0const\u00a0play\u00a0=\u00a0playFor(perf)\u037e\n\u00a0\u00a0\u00a0\u00a0let\u00a0thisAmount\u00a0=\u00a0amountFor(perf,\u00a0playFor(perf))\u037e\n\u00a0\u00a0\u00a0\u00a0//\u00a0add\u00a0volume\u00a0credits\n\u00a0\u00a0\u00a0\u00a0volumeCredits\u00a0+=\u00a0Math.max(perf.audience\u00a0\u00ad\u00a030,\u00a00)\u037e\n\u00a0\u00a0\u00a0\u00a0//\u00a0add\u00a0extra\u00a0credit\u00a0for\u00a0every\u00a0ten\u00a0comedy\u00a0attendees\n\u00a0\u00a0\u00a0\u00a0if\u00a0(\"comedy\"\u00a0===\u00a0playFor(perf).type)\u00a0volumeCredits\u00a0+=\u00a0Math.floor(perf.audien\n\u00a0\u00a0\u00a0\u00a0//\u00a0print\u00a0line\u00a0for\u00a0this\u00a0order\n\u00a0\u00a0\u00a0\u00a0result\u00a0+=\u00a0`\u00a0\u00a0${playFor(perf).name}:\u00a0${format(thisAmount/100)}\u00a0(${perf.audien\n\u00a0\u00a0\u00a0\u00a0totalAmount\u00a0+=\u00a0thisAmount\u037e\n\u00a0\u00a0}\n\u00a0\u00a0result\u00a0+=\u00a0`Amount\u00a0owed\u00a0is\u00a0${format(totalAmount/100)}\\n`\u037e\n\u00a0\u00a0result\u00a0+=\u00a0`You\u00a0earned\u00a0${volumeCredits}\u00a0credits\\n`\u037e\n\u00a0\u00a0return\u00a0result\u037e\nI\u00a0compile\u00adtest\u00adcommit.\u00a0With\u00a0that\u00a0inlined,\u00a0I\u00a0can\u00a0then\u00a0apply\u00a0Change\u00a0Function\nDeclaration\u00a0(124)\u00a0to\u00a0amountFor\u00a0to\u00a0remove\u00a0the\u00a0play\u00a0parameter.\u00a0I\u00a0do\u00a0this\u00a0in\u00a0two\u00a0steps.\nFirst,\u00a0I\u00a0use\u00a0the\u00a0new\u00a0function\u00a0inside\u00a0amountFor.\nfunction\u00a0statement\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0amountFor(aPerformance,\u00a0play)\u00a0{\n\u00a0\u00a0let\u00a0result\u00a0=\u00a00\u037e\nwww.EBooksWorld.ir\n", "page": 17, "type": "text", "section": "Page 17"}
{"text": "\u00a0\u00a0switch\u00a0(playFor(aPerformance).type)\u00a0{\n\u00a0\u00a0case\u00a0\"tragedy\":\n\u00a0\u00a0\u00a0\u00a0result\u00a0=\u00a040000\u037e\n\u00a0\u00a0\u00a0\u00a0if\u00a0(aPerformance.audience\u00a0>\u00a030)\u00a0{\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0result\u00a0+=\u00a01000\u00a0*\u00a0(aPerformance.audience\u00a0\u00ad\u00a030)\u037e\n\u00a0\u00a0\u00a0\u00a0}\n\u00a0\u00a0\u00a0\u00a0break\u037e\n\u00a0\u00a0case\u00a0\"comedy\":\n\u00a0\u00a0\u00a0\u00a0result\u00a0=\u00a030000\u037e\n\u00a0\u00a0\u00a0\u00a0if\u00a0(aPerformance.audience\u00a0>\u00a020)\u00a0{\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0result\u00a0+=\u00a010000\u00a0+\u00a0500\u00a0*\u00a0(aPerformance.audience\u00a0\u00ad\u00a020)\u037e\n\u00a0\u00a0\u00a0\u00a0}\n\u00a0\u00a0\u00a0\u00a0result\u00a0+=\u00a0300\u00a0*\u00a0aPerformance.audience\u037e\n\u00a0\u00a0\u00a0\u00a0break\u037e\n\u00a0\u00a0default:\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0throw\u00a0new\u00a0Error(`unknown\u00a0type:\u00a0${playFor(aPerformance).type}`)\u037e\n\u00a0\u00a0}\n\u00a0\u00a0return\u00a0result\u037e\n}\nI\u00a0compile\u00adtest\u00adcommit,\u00a0and\u00a0then\u00a0delete\u00a0the\u00a0parameter.\ntop\u00a0level\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0statement\u00a0(invoice,\u00a0plays)\u00a0{\n\u00a0\u00a0let\u00a0totalAmount\u00a0=\u00a00\u037e\n\u00a0\u00a0let\u00a0volumeCredits\u00a0=\u00a00\u037e\n\u00a0\u00a0let\u00a0result\u00a0=\u00a0`Statement\u00a0for\u00a0${invoice.customer}\\n`\u037e\n\u00a0\u00a0const\u00a0format\u00a0=\u00a0new\u00a0Intl.NumberFormat(\"en\u00adUS\",\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0{\u00a0style:\u00a0\"currency\",\u00a0currency:\u00a0\"USD\",\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0minimumFractionDigits:\u00a02\u00a0}).format\u037e\n\u00a0\u00a0for\u00a0(let\u00a0perf\u00a0of\u00a0invoice.performances)\u00a0{\n\u00a0\u00a0\u00a0\u00a0let\u00a0thisAmount\u00a0=\u00a0amountFor(perf,\u00a0playFor(perf))\u037e\n\u00a0\u00a0\u00a0\u00a0//\u00a0add\u00a0volume\u00a0credits\n\u00a0\u00a0\u00a0\u00a0volumeCredits\u00a0+=\u00a0Math.max(perf.audience\u00a0\u00ad\u00a030,\u00a00)\u037e\n\u00a0\u00a0\u00a0\u00a0//\u00a0add\u00a0extra\u00a0credit\u00a0for\u00a0every\u00a0ten\u00a0comedy\u00a0attendees\n\u00a0\u00a0\u00a0\u00a0if\u00a0(\"comedy\"\u00a0===\u00a0playFor(perf).type)\u00a0volumeCredits\u00a0+=\u00a0Math.floor(perf.audien\n\u00a0\u00a0\u00a0\u00a0//\u00a0print\u00a0line\u00a0for\u00a0this\u00a0order\n\u00a0\u00a0\u00a0\u00a0result\u00a0+=\u00a0`\u00a0\u00a0${playFor(perf).name}:\u00a0${format(thisAmount/100)}\u00a0(${perf.audien\n\u00a0\u00a0\u00a0\u00a0totalAmount\u00a0+=\u00a0thisAmount\u037e\n\u00a0\u00a0}\n\u00a0\u00a0result\u00a0+=\u00a0`Amount\u00a0owed\u00a0is\u00a0${format(totalAmount/100)}\\n`\u037e\n\u00a0\u00a0result\u00a0+=\u00a0`You\u00a0earned\u00a0${volumeCredits}\u00a0credits\\n`\u037e\n\u00a0\u00a0return\u00a0result\u037e\nwww.EBooksWorld.ir\n", "page": 18, "type": "text", "section": "Page 18"}
{"text": "function\u00a0statement\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0amountFor(aPerformance,\u00a0play)\u00a0{\n\u00a0\u00a0let\u00a0result\u00a0=\u00a00\u037e\n\u00a0\u00a0switch\u00a0(playFor(aPerformance).type)\u00a0{\n\u00a0\u00a0case\u00a0\"tragedy\":\n\u00a0\u00a0\u00a0\u00a0result\u00a0=\u00a040000\u037e\n\u00a0\u00a0\u00a0\u00a0if\u00a0(aPerformance.audience\u00a0>\u00a030)\u00a0{\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0result\u00a0+=\u00a01000\u00a0*\u00a0(aPerformance.audience\u00a0\u00ad\u00a030)\u037e\n\u00a0\u00a0\u00a0\u00a0}\n\u00a0\u00a0\u00a0\u00a0break\u037e\n\u00a0\u00a0case\u00a0\"comedy\":\n\u00a0\u00a0\u00a0\u00a0result\u00a0=\u00a030000\u037e\n\u00a0\u00a0\u00a0\u00a0if\u00a0(aPerformance.audience\u00a0>\u00a020)\u00a0{\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0result\u00a0+=\u00a010000\u00a0+\u00a0500\u00a0*\u00a0(aPerformance.audience\u00a0\u00ad\u00a020)\u037e\n\u00a0\u00a0\u00a0\u00a0}\n\u00a0\u00a0\u00a0\u00a0result\u00a0+=\u00a0300\u00a0*\u00a0aPerformance.audience\u037e\n\u00a0\u00a0\u00a0\u00a0break\u037e\n\u00a0\u00a0default:\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0throw\u00a0new\u00a0Error(`unknown\u00a0type:\u00a0${playFor(aPerformance).type}`)\u037e\n\u00a0\u00a0}\n\u00a0\u00a0return\u00a0result\u037e\n}\nAnd\u00a0compile\u00adtest\u00adcommit\u00a0again.\nThis\u00a0refactoring\u00a0alarms\u00a0some\u00a0programmers.\u00a0Previously,\u00a0the\u00a0code\u00a0to\u00a0look\u00a0up\u00a0the\u00a0play\nwas\u00a0executed\u00a0once\u00a0in\u00a0each\u00a0loop\u00a0iteration\u037e\u00a0now,\u00a0it\u2019s\u00a0executed\u00a0thrice.\u00a0I\u2019ll\u00a0talk\u00a0about\u00a0the\ninterplay\u00a0of\u00a0refactoring\u00a0and\u00a0performance\u00a0later,\u00a0but\u00a0for\u00a0the\u00a0moment\u00a0I\u2019ll\u00a0just\u00a0observe\u00a0that\nthis\u00a0change\u00a0is\u00a0unlikely\u00a0to\u00a0significantly\u00a0affect\u00a0performance,\u00a0and\u00a0even\u00a0if\u00a0it\u00a0were,\u00a0it\u00a0is\u00a0much\neasier\u00a0to\u00a0improve\u00a0the\u00a0performance\u00a0of\u00a0a\u00a0well\u00adfactored\u00a0code\u00a0base.\nThe\u00a0great\u00a0benefit\u00a0of\u00a0removing\u00a0local\u00a0variables\u00a0is\u00a0that\u00a0it\u00a0makes\u00a0it\u00a0much\u00a0easier\u00a0to\u00a0do\nextractions,\u00a0since\u00a0there\u00a0is\u00a0less\u00a0local\u00a0scope\u00a0to\u00a0deal\u00a0with.\u00a0Indeed,\u00a0usually\u00a0I\u2019ll\u00a0take\u00a0out\u00a0local\nvariables\u00a0before\u00a0I\u00a0do\u00a0any\u00a0extractions.\nNow\u00a0that\u00a0I\u2019m\u00a0done\u00a0with\u00a0the\u00a0arguments\u00a0to\u00a0amountFor,\u00a0I\u00a0look\u00a0back\u00a0at\u00a0where\u00a0it\u2019s\u00a0called.\nIt\u2019s\u00a0being\u00a0used\u00a0to\u00a0set\u00a0a\u00a0temporary\u00a0variable\u00a0that\u2019s\u00a0not\u00a0updated\u00a0again,\u00a0so\u00a0I\u00a0apply\u00a0Inline\nVariable\u00a0(123).\ntop\u00a0level\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nwww.EBooksWorld.ir\n", "page": 19, "type": "text", "section": "Page 19"}
{"text": "function\u00a0statement\u00a0(invoice,\u00a0plays)\u00a0{\n\u00a0\u00a0let\u00a0totalAmount\u00a0=\u00a00\u037e\n\u00a0\u00a0let\u00a0volumeCredits\u00a0=\u00a00\u037e\n\u00a0\u00a0let\u00a0result\u00a0=\u00a0`Statement\u00a0for\u00a0${invoice.customer}\\n`\u037e\n\u00a0\u00a0const\u00a0format\u00a0=\u00a0new\u00a0Intl.NumberFormat(\"en\u00adUS\",\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0{\u00a0style:\u00a0\"currency\",\u00a0currency:\u00a0\"USD\",\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0minimumFractionDigits:\u00a02\u00a0}).format\u037e\n\u00a0\u00a0\u00a0\u00a0for\u00a0(let\u00a0perf\u00a0of\u00a0invoice.performances)\u00a0{\n\u00a0\u00a0\u00a0\u00a0//\u00a0add\u00a0volume\u00a0credits\n\u00a0\u00a0\u00a0\u00a0volumeCredits\u00a0+=\u00a0Math.max(perf.audience\u00a0\u00ad\u00a030,\u00a00)\u037e\n\u00a0\u00a0\u00a0\u00a0//\u00a0add\u00a0extra\u00a0credit\u00a0for\u00a0every\u00a0ten\u00a0comedy\u00a0attendees\n\u00a0\u00a0\u00a0\u00a0if\u00a0(\"comedy\"\u00a0===\u00a0playFor(perf).type)\u00a0volumeCredits\u00a0+=\u00a0Math.floor(perf.audien\n\u00a0\u00a0\u00a0\u00a0//\u00a0print\u00a0line\u00a0for\u00a0this\u00a0order\n\u00a0\u00a0\u00a0\u00a0result\u00a0+=\u00a0`\u00a0\u00a0${playFor(perf).name}:\u00a0${format(amountFor(perf)/100)}\u00a0(${perf.a\n\u00a0\u00a0\u00a0\u00a0totalAmount\u00a0+=\u00a0amountFor(perf)\u037e\n\u00a0\u00a0}\n\u00a0\u00a0result\u00a0+=\u00a0`Amount\u00a0owed\u00a0is\u00a0${format(totalAmount/100)}\\n`\u037e\n\u00a0\u00a0result\u00a0+=\u00a0`You\u00a0earned\u00a0${volumeCredits}\u00a0credits\\n`\u037e\n\u00a0\u00a0return\u00a0result\u037e\nExtracting Volume Credits\nHere\u2019s\u00a0the\u00a0current\u00a0state\u00a0of\u00a0the\u00a0statement\u00a0function\u00a0body:\ntop\u00a0level\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0statement\u00a0(invoice,\u00a0plays)\u00a0{\n\u00a0\u00a0let\u00a0totalAmount\u00a0=\u00a00\u037e\n\u00a0\u00a0let\u00a0volumeCredits\u00a0=\u00a00\u037e\n\u00a0\u00a0let\u00a0result\u00a0=\u00a0`Statement\u00a0for\u00a0${invoice.customer}\\n`\u037e\n\u00a0\u00a0const\u00a0format\u00a0=\u00a0new\u00a0Intl.NumberFormat(\"en\u00adUS\",\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0{\u00a0style:\u00a0\"currency\",\u00a0currency:\u00a0\"USD\",\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0minimumFractionDigits:\u00a02\u00a0}).format\u037e\n\u00a0\u00a0for\u00a0(let\u00a0perf\u00a0of\u00a0invoice.performances)\u00a0{\n\u00a0\u00a0\u00a0\u00a0//\u00a0add\u00a0volume\u00a0credits\n\u00a0\u00a0\u00a0\u00a0volumeCredits\u00a0+=\u00a0Math.max(perf.audience\u00a0\u00ad\u00a030,\u00a00)\u037e\n\u00a0\u00a0\u00a0\u00a0//\u00a0add\u00a0extra\u00a0credit\u00a0for\u00a0every\u00a0ten\u00a0comedy\u00a0attendees\n\u00a0\u00a0\u00a0\u00a0if\u00a0(\"comedy\"\u00a0===\u00a0playFor(perf).type)\u00a0volumeCredits\u00a0+=\u00a0Math.floor(perf.audien\n\u00a0\u00a0\u00a0\u00a0//\u00a0print\u00a0line\u00a0for\u00a0this\u00a0order\n\u00a0\u00a0\u00a0\u00a0result\u00a0+=\u00a0`\u00a0\u00a0${playFor(perf).name}:\u00a0${format(amountFor(perf)/100)}\u00a0(${perf.a\n\u00a0\u00a0\u00a0\u00a0totalAmount\u00a0+=\u00a0amountFor(perf)\u037e\n\u00a0\u00a0}\n\u00a0\u00a0result\u00a0+=\u00a0`Amount\u00a0owed\u00a0is\u00a0${format(totalAmount/100)}\\n`\u037e\nwww.EBooksWorld.ir\n", "page": 20, "type": "text", "section": "Page 20"}
{"text": "\u00a0\u00a0result\u00a0+=\u00a0`You\u00a0earned\u00a0${volumeCredits}\u00a0credits\\n`\u037e\n\u00a0\u00a0return\u00a0result\u037e\nNow\u00a0I\u00a0get\u00a0the\u00a0benefit\u00a0from\u00a0removing\u00a0the\u00a0play\u00a0variable\u00a0as\u00a0it\u00a0makes\u00a0it\u00a0easier\u00a0to\u00a0extract\nthe\u00a0volume\u00a0credits\u00a0calculation\u00a0by\u00a0removing\u00a0one\u00a0of\u00a0the\u00a0locally\u00a0scoped\u00a0variables.\nI\u00a0still\u00a0have\u00a0to\u00a0deal\u00a0with\u00a0the\u00a0other\u00a0two.\u00a0Again,\u00a0perf\u00a0is\u00a0easy\u00a0to\u00a0pass\u00a0in,\u00a0but\nvolumeCredits\u00a0is\u00a0a\u00a0bit\u00a0more\u00a0tricky\u00a0as\u00a0it\u00a0is\u00a0an\u00a0accumulator\u00a0updated\u00a0in\u00a0each\u00a0pass\u00a0of\u00a0the\nloop.\u00a0So\u00a0my\u00a0best\u00a0bet\u00a0is\u00a0to\u00a0initialize\u00a0a\u00a0shadow\u00a0of\u00a0it\u00a0inside\u00a0the\u00a0extracted\u00a0function\u00a0and\nreturn\u00a0it.\nfunction\u00a0statement\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0volumeCreditsFor(perf)\u00a0{\n\u00a0\u00a0let\u00a0volumeCredits\u00a0=\u00a00\u037e\n\u00a0\u00a0volumeCredits\u00a0+=\u00a0Math.max(perf.audience\u00a0\u00ad\u00a030,\u00a00)\u037e\n\u00a0\u00a0if\u00a0(\"comedy\"\u00a0===\u00a0playFor(perf).type)\u00a0volumeCredits\u00a0+=\u00a0Math.floor(perf.audience\n\u00a0\u00a0return\u00a0volumeCredits\u037e\n}\ntop\u00a0level\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0statement\u00a0(invoice,\u00a0plays)\u00a0{\n\u00a0\u00a0let\u00a0totalAmount\u00a0=\u00a00\u037e\n\u00a0\u00a0let\u00a0volumeCredits\u00a0=\u00a00\u037e\n\u00a0\u00a0let\u00a0result\u00a0=\u00a0`Statement\u00a0for\u00a0${invoice.customer}\\n`\u037e\n\u00a0\u00a0const\u00a0format\u00a0=\u00a0new\u00a0Intl.NumberFormat(\"en\u00adUS\",\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0{\u00a0style:\u00a0\"currency\",\u00a0currency:\u00a0\"USD\",\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0minimumFractionDigits:\u00a02\u00a0}).format\u037e\n\u00a0\u00a0for\u00a0(let\u00a0perf\u00a0of\u00a0invoice.performances)\u00a0{\n\u00a0\u00a0\u00a0\u00a0volumeCredits\u00a0+=\u00a0volumeCreditsFor(perf)\u037e\n\u00a0\u00a0\u00a0\u00a0//\u00a0print\u00a0line\u00a0for\u00a0this\u00a0order\n\u00a0\u00a0\u00a0\u00a0result\u00a0+=\u00a0`\u00a0\u00a0${playFor(perf).name}:\u00a0${format(amountFor(perf)/100)}\u00a0(${perf.a\n\u00a0\u00a0\u00a0\u00a0totalAmount\u00a0+=\u00a0amountFor(perf)\u037e\n\u00a0\u00a0}\n\u00a0\u00a0result\u00a0+=\u00a0`Amount\u00a0owed\u00a0is\u00a0${format(totalAmount/100)}\\n`\u037e\n\u00a0\u00a0result\u00a0+=\u00a0`You\u00a0earned\u00a0${volumeCredits}\u00a0credits\\n`\u037e\n\u00a0\u00a0return\u00a0result\u037e\nwww.EBooksWorld.ir\n", "page": 21, "type": "text", "section": "Page 21"}
{"text": "I\u00a0remove\u00a0the\u00a0unnecessary\u00a0(and,\u00a0in\u00a0this\u00a0case,\u00a0downright\u00a0misleading)\u00a0comment.\nI\u00a0compile\u00adtest\u00adcommit\u00a0that,\u00a0and\u00a0then\u00a0rename\u00a0the\u00a0variables\u00a0inside\u00a0the\u00a0new\u00a0function.\nfunction\u00a0statement\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0volumeCreditsFor(aPerformance)\u00a0{\n\u00a0\u00a0let\u00a0result\u00a0=\u00a00\u037e\n\u00a0\u00a0result\u00a0+=\u00a0Math.max(aPerformance.audience\u00a0\u00ad\u00a030,\u00a00)\u037e\n\u00a0\u00a0if\u00a0(\"comedy\"\u00a0===\u00a0playFor(aPerformance).type)\u00a0result\u00a0+=\u00a0Math.floor(aPerformance\n\u00a0\u00a0return\u00a0result\u037e\n}\nI\u2019ve\u00a0shown\u00a0it\u00a0in\u00a0one\u00a0step,\u00a0but\u00a0as\u00a0before\u00a0I\u00a0did\u00a0the\u00a0renames\u00a0one\u00a0at\u00a0a\u00a0time,\u00a0with\u00a0a\u00a0compile\u00ad\ntest\u00adcommit\u00a0after\u00a0each.\nRemoving the format Variable\nLet\u2019s\u00a0look\u00a0at\u00a0the\u00a0main\u00a0statement\u00a0method\u00a0again:\ntop\u00a0level\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0statement\u00a0(invoice,\u00a0plays)\u00a0{\n\u00a0\u00a0let\u00a0totalAmount\u00a0=\u00a00\u037e\n\u00a0\u00a0let\u00a0volumeCredits\u00a0=\u00a00\u037e\n\u00a0\u00a0let\u00a0result\u00a0=\u00a0`Statement\u00a0for\u00a0${invoice.customer}\\n`\u037e\n\u00a0\u00a0const\u00a0format\u00a0=\u00a0new\u00a0Intl.NumberFormat(\"en\u00adUS\",\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0{\u00a0style:\u00a0\"currency\",\u00a0currency:\u00a0\"USD\",\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0minimumFractionDigits:\u00a02\u00a0}).format\u037e\n\u00a0\u00a0for\u00a0(let\u00a0perf\u00a0of\u00a0invoice.performances)\u00a0{\n\u00a0\u00a0\u00a0\u00a0volumeCredits\u00a0+=\u00a0volumeCreditsFor(perf)\u037e\n\u00a0\u00a0\u00a0\u00a0//\u00a0print\u00a0line\u00a0for\u00a0this\u00a0order\n\u00a0\u00a0\u00a0\u00a0result\u00a0+=\u00a0`\u00a0\u00a0${playFor(perf).name}:\u00a0${format(amountFor(perf)/100)}\u00a0(${perf.a\n\u00a0\u00a0\u00a0\u00a0totalAmount\u00a0+=\u00a0amountFor(perf)\u037e\n\u00a0\u00a0}\n\u00a0\u00a0result\u00a0+=\u00a0`Amount\u00a0owed\u00a0is\u00a0${format(totalAmount/100)}\\n`\u037e\n\u00a0\u00a0result\u00a0+=\u00a0`You\u00a0earned\u00a0${volumeCredits}\u00a0credits\\n`\u037e\n\u00a0\u00a0return\u00a0result\u037e\nwww.EBooksWorld.ir\n", "page": 22, "type": "text", "section": "Page 22"}
{"text": "As\u00a0I\u00a0suggested\u00a0before,\u00a0temporary\u00a0variables\u00a0can\u00a0be\u00a0a\u00a0problem.\u00a0They\u00a0are\u00a0only\u00a0useful\nwithin\u00a0their\u00a0own\u00a0routine,\u00a0and\u00a0therefore\u00a0they\u00a0encourage\u00a0long,\u00a0complex\u00a0routines.\u00a0My\u00a0next\nmove,\u00a0then,\u00a0is\u00a0to\u00a0replace\u00a0some\u00a0of\u00a0them.\u00a0The\u00a0easiest\u00a0one\u00a0is\u00a0format.\u00a0This\u00a0is\u00a0a\u00a0case\u00a0of\nassigning\u00a0a\u00a0function\u00a0to\u00a0a\u00a0temp,\u00a0which\u00a0I\u00a0prefer\u00a0to\u00a0replace\u00a0with\u00a0a\u00a0declared\u00a0function.\nfunction\u00a0statement\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0format(aNumber)\u00a0{\n\u00a0\u00a0return\u00a0new\u00a0Intl.NumberFormat(\"en\u00adUS\",\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0{\u00a0style:\u00a0\"currency\",\u00a0currency:\u00a0\"USD\",\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0minimumFractionDigits:\u00a02\u00a0}).format(aNumber)\u037e\n}\ntop\u00a0level\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0statement\u00a0(invoice,\u00a0plays)\u00a0{\n\u00a0\u00a0let\u00a0totalAmount\u00a0=\u00a00\u037e\n\u00a0\u00a0let\u00a0volumeCredits\u00a0=\u00a00\u037e\n\u00a0\u00a0let\u00a0result\u00a0=\u00a0`Statement\u00a0for\u00a0${invoice.customer}\\n`\u037e\n\u00a0\u00a0for\u00a0(let\u00a0perf\u00a0of\u00a0invoice.performances)\u00a0{\n\u00a0\u00a0\u00a0\u00a0volumeCredits\u00a0+=\u00a0volumeCreditsFor(perf)\u037e\n\u00a0\u00a0\u00a0\u00a0//\u00a0print\u00a0line\u00a0for\u00a0this\u00a0order\n\u00a0\u00a0\u00a0\u00a0result\u00a0+=\u00a0`\u00a0\u00a0${playFor(perf).name}:\u00a0${format(amountFor(perf)/100)}\u00a0(${perf.a\n\u00a0\u00a0\u00a0\u00a0totalAmount\u00a0+=\u00a0amountFor(perf)\u037e\n\u00a0\u00a0}\n\u00a0\u00a0result\u00a0+=\u00a0`Amount\u00a0owed\u00a0is\u00a0${format(totalAmount/100)}\\n`\u037e\n\u00a0\u00a0result\u00a0+=\u00a0`You\u00a0earned\u00a0${volumeCredits}\u00a0credits\\n`\u037e\n\u00a0\u00a0return\u00a0result\u037e\nAlthough\u00a0changing\u00a0a\u00a0function\u00a0variable\u00a0to\u00a0a\u00a0declared\u00a0function\u00a0is\u00a0a\u00a0refactoring,\u00a0I\u00a0haven\u2019t\nnamed\u00a0it\u00a0and\u00a0included\u00a0it\u00a0in\u00a0the\u00a0catalog.\u00a0There\u00a0are\u00a0many\u00a0refactorings\u00a0that\u00a0I\u00a0didn\u2019t\u00a0feel\nimportant\u00a0enough\u00a0for\u00a0that.\u00a0This\u00a0one\u00a0is\u00a0both\u00a0simple\u00a0to\u00a0do\u00a0and\u00a0relatively\u00a0rare,\u00a0so\u00a0I\u00a0didn\u2019t\nthink\u00a0it\u00a0was\u00a0worthwhile.\nI\u2019m\u00a0not\u00a0keen\u00a0on\u00a0the\u00a0name\u2014\u201cformat\u201d\u00a0doesn\u2019t\u00a0really\u00a0convey\u00a0enough\u00a0of\u00a0what\u00a0it\u2019s\u00a0doing.\n\u201cformatAsUSD\u201d\u00a0would\u00a0be\u00a0a\u00a0bit\u00a0too\u00a0long\u00adwinded\u00a0since\u00a0it\u2019s\u00a0being\u00a0used\u00a0in\u00a0a\u00a0string\ntemplate,\u00a0particularly\u00a0within\u00a0this\u00a0small\u00a0scope.\u00a0I\u00a0think\u00a0the\u00a0fact\u00a0that\u00a0it\u2019s\u00a0formatting\u00a0a\ncurrency\u00a0amount\u00a0is\u00a0the\u00a0thing\u00a0to\u00a0highlight\u00a0here,\u00a0so\u00a0I\u00a0pick\u00a0a\u00a0name\u00a0that\u00a0suggests\u00a0that\u00a0and\nwww.EBooksWorld.ir\n", "page": 23, "type": "text", "section": "Page 23"}
{"text": "apply\u00a0Change\u00a0Function\u00a0Declaration\u00a0(124).\ntop\u00a0level\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0statement\u00a0(invoice,\u00a0plays)\u00a0{\n\u00a0\u00a0let\u00a0totalAmount\u00a0=\u00a00\u037e\n\u00a0\u00a0let\u00a0volumeCredits\u00a0=\u00a00\u037e\n\u00a0\u00a0let\u00a0result\u00a0=\u00a0`Statement\u00a0for\u00a0${invoice.customer}\\n`\u037e\n\u00a0\u00a0for\u00a0(let\u00a0perf\u00a0of\u00a0invoice.performances)\u00a0{\n\u00a0\u00a0\u00a0\u00a0volumeCredits\u00a0+=\u00a0volumeCreditsFor(perf)\u037e\n\u00a0\u00a0\u00a0\u00a0//\u00a0print\u00a0line\u00a0for\u00a0this\u00a0order\n\u00a0\u00a0\u00a0\u00a0result\u00a0+=\u00a0`\u00a0\u00a0${playFor(perf).name}:\u00a0${usd(amountFor(perf))}\u00a0(${perf.audience\n\u00a0\u00a0\u00a0\u00a0totalAmount\u00a0+=\u00a0amountFor(perf)\u037e\n\u00a0\u00a0}\n\u00a0\u00a0result\u00a0+=\u00a0`Amount\u00a0owed\u00a0is\u00a0${usd(totalAmount)}\\n`\u037e\n\u00a0\u00a0result\u00a0+=\u00a0`You\u00a0earned\u00a0${volumeCredits}\u00a0credits\\n`\u037e\n\u00a0\u00a0return\u00a0result\u037e\nfunction\u00a0statement\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0usd(aNumber)\u00a0{\n\u00a0\u00a0return\u00a0new\u00a0Intl.NumberFormat(\"en\u00adUS\",\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0{\u00a0style:\u00a0\"currency\",\u00a0currency:\u00a0\"USD\",\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0minimumFractionDigits:\u00a02\u00a0}).format(aNumber/100)\u037e\n}\nNaming\u00a0is\u00a0both\u00a0important\u00a0and\u00a0tricky.\u00a0Breaking\u00a0a\u00a0large\u00a0function\u00a0into\u00a0smaller\u00a0ones\u00a0only\nadds\u00a0value\u00a0if\u00a0the\u00a0names\u00a0are\u00a0good.\u00a0With\u00a0good\u00a0names,\u00a0I\u00a0don\u2019t\u00a0have\u00a0to\u00a0read\u00a0the\u00a0body\u00a0of\u00a0the\nfunction\u00a0to\u00a0see\u00a0what\u00a0it\u00a0does.\u00a0But\u00a0it\u2019s\u00a0hard\u00a0to\u00a0get\u00a0names\u00a0right\u00a0the\u00a0first\u00a0time,\u00a0so\u00a0I\u00a0use\u00a0the\nbest\u00a0name\u00a0I\u00a0can\u00a0think\u00a0of\u00a0for\u00a0the\u00a0moment,\u00a0and\u00a0don\u2019t\u00a0hesitate\u00a0to\u00a0rename\u00a0it\u00a0later.\u00a0Often,\u00a0it\ntakes\u00a0a\u00a0second\u00a0pass\u00a0through\u00a0some\u00a0code\u00a0to\u00a0realize\u00a0what\u00a0the\u00a0best\u00a0name\u00a0really\u00a0is.\nAs\u00a0I\u2019m\u00a0changing\u00a0the\u00a0name,\u00a0I\u00a0also\u00a0move\u00a0the\u00a0duplicated\u00a0division\u00a0by\u00a0100\u00a0into\u00a0the\u00a0function.\nStoring\u00a0money\u00a0as\u00a0integer\u00a0cents\u00a0is\u00a0a\u00a0common\u00a0approach\u2014it\u00a0avoids\u00a0the\u00a0dangers\u00a0of\u00a0storing\nfractional\u00a0monetary\u00a0values\u00a0as\u00a0floats\u00a0but\u00a0allows\u00a0me\u00a0to\u00a0use\u00a0arithmetic\u00a0operators.\nWhenever\u00a0I\u00a0want\u00a0to\u00a0display\u00a0such\u00a0a\u00a0penny\u00adinteger\u00a0number,\u00a0however,\u00a0I\u00a0need\u00a0a\u00a0decimal,\nso\u00a0my\u00a0formatting\u00a0function\u00a0should\u00a0take\u00a0care\u00a0of\u00a0the\u00a0division.\nRemoving Total Volume Credits\nwww.EBooksWorld.ir\n", "page": 24, "type": "text", "section": "Page 24"}
{"text": "Removing Total Volume Credits\nMy\u00a0next\u00a0target\u00a0variable\u00a0is\u00a0volumeCredits.\u00a0This\u00a0is\u00a0a\u00a0trickier\u00a0case,\u00a0as\u00a0it\u2019s\u00a0built\u00a0up\nduring\u00a0the\u00a0iterations\u00a0of\u00a0the\u00a0loop.\u00a0My\u00a0first\u00a0move,\u00a0then,\u00a0is\u00a0to\u00a0use\u00a0Split\u00a0Loop\u00a0(227)\u00a0to\nseparate\u00a0the\u00a0accumulation\u00a0of\u00a0volumeCredits.\ntop\u00a0level\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0statement\u00a0(invoice,\u00a0plays)\u00a0{\n\u00a0\u00a0let\u00a0totalAmount\u00a0=\u00a00\u037e\n\u00a0\u00a0let\u00a0volumeCredits\u00a0=\u00a00\u037e\n\u00a0\u00a0let\u00a0result\u00a0=\u00a0`Statement\u00a0for\u00a0${invoice.customer}\\n`\u037e\n\u00a0\u00a0for\u00a0(let\u00a0perf\u00a0of\u00a0invoice.performances)\u00a0{\n\u00a0\u00a0\u00a0\u00a0//\u00a0print\u00a0line\u00a0for\u00a0this\u00a0order\n\u00a0\u00a0\u00a0\u00a0result\u00a0+=\u00a0`\u00a0\u00a0${playFor(perf).name}:\u00a0${usd(amountFor(perf))}\u00a0(${perf.audience\n\u00a0\u00a0\u00a0\u00a0totalAmount\u00a0+=\u00a0amountFor(perf)\u037e\n\u00a0\u00a0}\n\u00a0\u00a0for\u00a0(let\u00a0perf\u00a0of\u00a0invoice.performances)\u00a0{\n\u00a0\u00a0\u00a0\u00a0volumeCredits\u00a0+=\u00a0volumeCreditsFor(perf)\u037e\n\u00a0\u00a0}\n\u00a0\u00a0result\u00a0+=\u00a0`Amount\u00a0owed\u00a0is\u00a0${usd(totalAmount)}\\n`\u037e\n\u00a0\u00a0result\u00a0+=\u00a0`You\u00a0earned\u00a0${volumeCredits}\u00a0credits\\n`\u037e\n\u00a0\u00a0return\u00a0result\u037e\nWith\u00a0that\u00a0done,\u00a0I\u00a0can\u00a0use\u00a0Slide\u00a0Statements\u00a0(223)\u00a0to\u00a0move\u00a0the\u00a0declaration\u00a0of\u00a0the\u00a0variable\nnext\u00a0to\u00a0the\u00a0loop.\ntop\u00a0level\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0statement\u00a0(invoice,\u00a0plays)\u00a0{\n\u00a0\u00a0let\u00a0totalAmount\u00a0=\u00a00\u037e\n\u00a0\u00a0let\u00a0result\u00a0=\u00a0`Statement\u00a0for\u00a0${invoice.customer}\\n`\u037e\n\u00a0\u00a0for\u00a0(let\u00a0perf\u00a0of\u00a0invoice.performances)\u00a0{\n\u00a0\u00a0\u00a0\u00a0//\u00a0print\u00a0line\u00a0for\u00a0this\u00a0order\n\u00a0\u00a0\u00a0\u00a0result\u00a0+=\u00a0`\u00a0\u00a0${playFor(perf).name}:\u00a0${usd(amountFor(perf))}\u00a0(${perf.audience\n\u00a0\u00a0\u00a0\u00a0totalAmount\u00a0+=\u00a0amountFor(perf)\u037e\n\u00a0\u00a0}\n\u00a0\u00a0let\u00a0volumeCredits\u00a0=\u00a00\u037e\n\u00a0\u00a0for\u00a0(let\u00a0perf\u00a0of\u00a0invoice.performances)\u00a0{\nwww.EBooksWorld.ir\n", "page": 25, "type": "text", "section": "Page 25"}
{"text": "\u00a0\u00a0\u00a0\u00a0volumeCredits\u00a0+=\u00a0volumeCreditsFor(perf)\u037e\n\u00a0\u00a0}\n\u00a0\u00a0result\u00a0+=\u00a0`Amount\u00a0owed\u00a0is\u00a0${usd(totalAmount)}\\n`\u037e\n\u00a0\u00a0result\u00a0+=\u00a0`You\u00a0earned\u00a0${volumeCredits}\u00a0credits\\n`\u037e\n\u00a0\u00a0return\u00a0result\u037e\nGathering\u00a0together\u00a0everything\u00a0that\u00a0updates\u00a0the\u00a0volumeCredits\u00a0variable\u00a0makes\u00a0it\neasier\u00a0to\u00a0do\u00a0Replace\u00a0Temp\u00a0with\u00a0Query\u00a0(178).\u00a0As\u00a0before,\u00a0the\u00a0first\u00a0step\u00a0is\u00a0to\u00a0apply\u00a0Extract\nFunction\u00a0(106)\u00a0to\u00a0the\u00a0overall\u00a0calculation\u00a0of\u00a0the\u00a0variable.\nfunction\u00a0statement\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0totalVolumeCredits()\u00a0{\n\u00a0\u00a0let\u00a0volumeCredits\u00a0=\u00a00\u037e\n\u00a0\u00a0for\u00a0(let\u00a0perf\u00a0of\u00a0invoice.performances)\u00a0{\n\u00a0\u00a0\u00a0\u00a0volumeCredits\u00a0+=\u00a0volumeCreditsFor(perf)\u037e\n\u00a0\u00a0}\n\u00a0\u00a0return\u00a0volumeCredits\u037e\n}\ntop\u00a0level\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0statement\u00a0(invoice,\u00a0plays)\u00a0{\n\u00a0\u00a0let\u00a0totalAmount\u00a0=\u00a00\u037e\n\u00a0\u00a0let\u00a0result\u00a0=\u00a0`Statement\u00a0for\u00a0${invoice.customer}\\n`\u037e\n\u00a0\u00a0for\u00a0(let\u00a0perf\u00a0of\u00a0invoice.performances)\u00a0{\n\u00a0\u00a0\u00a0\u00a0//\u00a0print\u00a0line\u00a0for\u00a0this\u00a0order\n\u00a0\u00a0\u00a0\u00a0result\u00a0+=\u00a0`\u00a0\u00a0${playFor(perf).name}:\u00a0${usd(amountFor(perf))}\u00a0(${perf.audience\n\u00a0\u00a0\u00a0\u00a0totalAmount\u00a0+=\u00a0amountFor(perf)\u037e\n\u00a0\u00a0}\n\u00a0\u00a0let\u00a0volumeCredits\u00a0=\u00a0totalVolumeCredits()\u037e\n\u00a0\u00a0result\u00a0+=\u00a0`Amount\u00a0owed\u00a0is\u00a0${usd(totalAmount)}\\n`\u037e\n\u00a0\u00a0result\u00a0+=\u00a0`You\u00a0earned\u00a0${volumeCredits}\u00a0credits\\n`\u037e\n\u00a0\u00a0return\u00a0result\u037e\nOnce\u00a0everything\u00a0is\u00a0extracted,\u00a0I\u00a0can\u00a0apply\u00a0Inline\u00a0Variable\u00a0(123):\ntop\u00a0level\u2026\nwww.EBooksWorld.ir\n", "page": 26, "type": "text", "section": "Page 26"}
{"text": "Click\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0statement\u00a0(invoice,\u00a0plays)\u00a0{\n\u00a0\u00a0let\u00a0totalAmount\u00a0=\u00a00\u037e\n\u00a0\u00a0let\u00a0result\u00a0=\u00a0`Statement\u00a0for\u00a0${invoice.customer}\\n`\u037e\n\u00a0\u00a0for\u00a0(let\u00a0perf\u00a0of\u00a0invoice.performances)\u00a0{\n\u00a0\u00a0\u00a0\u00a0//\u00a0print\u00a0line\u00a0for\u00a0this\u00a0order\n\u00a0\u00a0\u00a0\u00a0result\u00a0+=\u00a0`\u00a0\u00a0${playFor(perf).name}:\u00a0${usd(amountFor(perf))}\u00a0(${perf.audience\n\u00a0\u00a0\u00a0\u00a0totalAmount\u00a0+=\u00a0amountFor(perf)\u037e\n\u00a0\u00a0}\n\u00a0\u00a0result\u00a0+=\u00a0`Amount\u00a0owed\u00a0is\u00a0${usd(totalAmount)}\\n`\u037e\n\u00a0\u00a0result\u00a0+=\u00a0`You\u00a0earned\u00a0${totalVolumeCredits()}\u00a0credits\\n`\u037e\n\u00a0\u00a0return\u00a0result\u037e\nLet\u00a0me\u00a0pause\u00a0for\u00a0a\u00a0bit\u00a0to\u00a0talk\u00a0about\u00a0what\u00a0I\u2019ve\u00a0just\u00a0done\u00a0here.\u00a0Firstly,\u00a0I\u00a0know\u00a0readers\u00a0will\nagain\u00a0be\u00a0worrying\u00a0about\u00a0performance\u00a0with\u00a0this\u00a0change,\u00a0as\u00a0many\u00a0people\u00a0are\u00a0wary\u00a0of\nrepeating\u00a0a\u00a0loop.\u00a0But\u00a0most\u00a0of\u00a0the\u00a0time,\u00a0rerunning\u00a0a\u00a0loop\u00a0like\u00a0this\u00a0has\u00a0a\u00a0negligible\u00a0effect\non\u00a0performance.\u00a0If\u00a0you\u00a0timed\u00a0the\u00a0code\u00a0before\u00a0and\u00a0after\u00a0this\u00a0refactoring,\u00a0you\u00a0would\nprobably\u00a0not\u00a0notice\u00a0any\u00a0significant\u00a0change\u00a0in\u00a0speed\u2014and\u00a0that\u2019s\u00a0usually\u00a0the\u00a0case.\u00a0Most\nprogrammers,\u00a0even\u00a0experienced\u00a0ones,\u00a0are\u00a0poor\u00a0judges\u00a0of\u00a0how\u00a0code\u00a0actually\u00a0performs.\nMany\u00a0of\u00a0our\u00a0intuitions\u00a0are\u00a0broken\u00a0by\u00a0clever\u00a0compilers,\u00a0modern\u00a0caching\u00a0techniques,\u00a0and\nthe\u00a0like.\u00a0The\u00a0performance\u00a0of\u00a0software\u00a0usually\u00a0depends\u00a0on\u00a0just\u00a0a\u00a0few\u00a0parts\u00a0of\u00a0the\u00a0code,\nand\u00a0changes\u00a0anywhere\u00a0else\u00a0don\u2019t\u00a0make\u00a0an\u00a0appreciable\u00a0difference.\nBut\u00a0\u201cmostly\u201d\u00a0isn\u2019t\u00a0the\u00a0same\u00a0as\u00a0\u201calwaysly.\u201d\u00a0Sometimes\u00a0a\u00a0refactoring\u00a0will\u00a0have\u00a0a\nsignificant\u00a0performance\u00a0implication.\u00a0Even\u00a0then,\u00a0I\u00a0usually\u00a0go\u00a0ahead\u00a0and\u00a0do\u00a0it,\u00a0because\nit\u2019s\u00a0much\u00a0easier\u00a0to\u00a0tune\u00a0the\u00a0performance\u00a0of\u00a0well\u00adfactored\u00a0code.\u00a0If\u00a0I\u00a0introduce\u00a0a\nsignificant\u00a0performance\u00a0issue\u00a0during\u00a0refactoring,\u00a0I\u00a0spend\u00a0time\u00a0on\u00a0performance\u00a0tuning\nafterwards.\u00a0It\u00a0may\u00a0be\u00a0that\u00a0this\u00a0leads\u00a0to\u00a0reversing\u00a0some\u00a0of\u00a0the\u00a0refactoring\u00a0I\u00a0did\u00a0earlier\u2014\nbut\u00a0most\u00a0of\u00a0the\u00a0time,\u00a0due\u00a0to\u00a0the\u00a0refactoring,\u00a0I\u00a0can\u00a0apply\u00a0a\u00a0more\u00a0effective\u00a0performance\u00ad\ntuning\u00a0enhancement\u00a0instead.\u00a0I\u00a0end\u00a0up\u00a0with\u00a0code\u00a0that\u2019s\u00a0both\u00a0clearer\u00a0and\u00a0faster.\nSo,\u00a0my\u00a0overall\u00a0advice\u00a0on\u00a0performance\u00a0with\u00a0refactoring\u00a0is:\u00a0Most\u00a0of\u00a0the\u00a0time\u00a0you\u00a0should\nignore\u00a0it.\u00a0If\u00a0your\u00a0refactoring\u00a0introduces\u00a0performance\u00a0slow\u00addowns,\u00a0finish\u00a0refactoring\nfirst\u00a0and\u00a0do\u00a0performance\u00a0tuning\u00a0afterwards.\nThe\u00a0second\u00a0aspect\u00a0I\u00a0want\u00a0to\u00a0call\u00a0your\u00a0attention\u00a0to\u00a0is\u00a0how\u00a0small\u00a0the\u00a0steps\u00a0were\u00a0to\u00a0remove\nvolumeCredits.\u00a0Here\u00a0are\u00a0the\u00a0four\u00a0steps,\u00a0each\u00a0followed\u00a0by\u00a0compiling,\u00a0testing,\u00a0and\ncommitting\u00a0to\u00a0my\u00a0local\u00a0source\u00a0code\u00a0repository:\nwww.EBooksWorld.ir\n", "page": 27, "type": "text", "section": "Page 27"}
{"text": "Split\u00a0Loop\u00a0(227)\u00a0to\u00a0isolate\u00a0the\u00a0accumulation\nSlide\u00a0Statements\u00a0(223)\u00a0to\u00a0bring\u00a0the\u00a0initializing\u00a0code\u00a0next\u00a0to\u00a0the\u00a0accumulation\nExtract\u00a0Function\u00a0(106)\u00a0to\u00a0create\u00a0a\u00a0function\u00a0for\u00a0calculating\u00a0the\u00a0total\nInline\u00a0Variable\u00a0(123)\u00a0to\u00a0remove\u00a0the\u00a0variable\u00a0completely\nI\u00a0confess\u00a0I\u00a0don\u2019t\u00a0always\u00a0take\u00a0quite\u00a0as\u00a0short\u00a0steps\u00a0as\u00a0these\u2014but\u00a0whenever\u00a0things\u00a0get\ndifficult,\u00a0my\u00a0first\u00a0reaction\u00a0is\u00a0to\u00a0take\u00a0shorter\u00a0steps.\u00a0In\u00a0particular,\u00a0should\u00a0a\u00a0test\u00a0fail\u00a0during\na\u00a0refactoring,\u00a0if\u00a0I\u00a0can\u2019t\u00a0immediately\u00a0see\u00a0and\u00a0fix\u00a0the\u00a0problem,\u00a0I\u2019ll\u00a0revert\u00a0to\u00a0my\u00a0last\u00a0good\ncommit\u00a0and\u00a0redo\u00a0what\u00a0I\u00a0just\u00a0did\u00a0with\u00a0smaller\u00a0steps.\u00a0That\u00a0works\u00a0because\u00a0I\u00a0commit\u00a0so\nfrequently\u00a0and\u00a0because\u00a0small\u00a0steps\u00a0are\u00a0the\u00a0key\u00a0to\u00a0moving\u00a0quickly,\u00a0particularly\u00a0when\nworking\u00a0with\u00a0difficult\u00a0code.\nI\u00a0then\u00a0repeat\u00a0that\u00a0sequence\u00a0to\u00a0remove\u00a0totalAmount.\u00a0I\u00a0start\u00a0by\u00a0splitting\u00a0the\u00a0loop\n(compile\u00adtest\u00adcommit),\u00a0then\u00a0I\u00a0slide\u00a0the\u00a0variable\u00a0initialization\u00a0(compile\u00adtest\u00adcommit),\nand\u00a0then\u00a0I\u00a0extract\u00a0the\u00a0function.\u00a0There\u00a0is\u00a0a\u00a0wrinkle\u00a0here:\u00a0The\u00a0best\u00a0name\u00a0for\u00a0the\u00a0function\nis\u00a0\u201ctotalAmount\u201d,\u00a0but\u00a0that\u2019s\u00a0the\u00a0name\u00a0of\u00a0the\u00a0variable,\u00a0and\u00a0I\u00a0can\u2019t\u00a0have\u00a0both\u00a0at\u00a0the\u00a0same\ntime.\u00a0So\u00a0I\u00a0give\u00a0the\u00a0new\u00a0function\u00a0a\u00a0random\u00a0name\u00a0when\u00a0I\u00a0extract\u00a0it\u00a0(and\u00a0compile\u00adtest\u00ad\ncommit).\nfunction\u00a0statement\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0appleSauce()\u00a0{\n\u00a0\u00a0let\u00a0totalAmount\u00a0=\u00a00\u037e\n\u00a0\u00a0for\u00a0(let\u00a0perf\u00a0of\u00a0invoice.performances)\u00a0{\n\u00a0\u00a0\u00a0\u00a0totalAmount\u00a0+=\u00a0amountFor(perf)\u037e\n\u00a0\u00a0}\n\u00a0\u00a0return\u00a0totalAmount\u037e\n}\ntop\u00a0level\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0statement\u00a0(invoice,\u00a0plays)\u00a0{\n\u00a0\u00a0let\u00a0result\u00a0=\u00a0`Statement\u00a0for\u00a0${invoice.customer}\\n`\u037e\n\u00a0\u00a0for\u00a0(let\u00a0perf\u00a0of\u00a0invoice.performances)\u00a0{\n\u00a0\u00a0\u00a0\u00a0result\u00a0+=\u00a0`\u00a0\u00a0${playFor(perf).name}:\u00a0${usd(amountFor(perf))}\u00a0(${perf.audience\n\u00a0\u00a0}\nwww.EBooksWorld.ir\n", "page": 28, "type": "text", "section": "Page 28"}
{"text": "\u00a0\u00a0let\u00a0totalAmount\u00a0=\u00a0appleSauce()\u037e\n\u00a0\u00a0result\u00a0+=\u00a0`Amount\u00a0owed\u00a0is\u00a0${usd(totalAmount)}\\n`\u037e\n\u00a0\u00a0result\u00a0+=\u00a0`You\u00a0earned\u00a0${totalVolumeCredits()}\u00a0credits\\n`\u037e\n\u00a0\u00a0return\u00a0result\u037e\nThen\u00a0I\u00a0inline\u00a0the\u00a0variable\u00a0(compile\u00adtest\u00adcommit)\u00a0and\u00a0rename\u00a0the\u00a0function\u00a0to\u00a0something\nmore\u00a0sensible\u00a0(compile\u00adtest\u00adcommit).\ntop\u00a0level\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0statement\u00a0(invoice,\u00a0plays)\u00a0{\n\u00a0\u00a0let\u00a0result\u00a0=\u00a0`Statement\u00a0for\u00a0${invoice.customer}\\n`\u037e\n\u00a0\u00a0for\u00a0(let\u00a0perf\u00a0of\u00a0invoice.performances)\u00a0{\n\u00a0\u00a0\u00a0\u00a0result\u00a0+=\u00a0`\u00a0\u00a0${playFor(perf).name}:\u00a0${usd(amountFor(perf))}\u00a0(${perf.audience\n\u00a0\u00a0}\n\u00a0\u00a0result\u00a0+=\u00a0`Amount\u00a0owed\u00a0is\u00a0${usd(totalAmount())}\\n`\u037e\n\u00a0\u00a0result\u00a0+=\u00a0`You\u00a0earned\u00a0${totalVolumeCredits()}\u00a0credits\\n`\u037e\n\u00a0\u00a0return\u00a0result\u037e\nfunction\u00a0statement\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0totalAmount()\u00a0{\n\u00a0\u00a0let\u00a0totalAmount\u00a0=\u00a00\u037e\n\u00a0\u00a0for\u00a0(let\u00a0perf\u00a0of\u00a0invoice.performances)\u00a0{\n\u00a0\u00a0\u00a0\u00a0totalAmount\u00a0+=\u00a0amountFor(perf)\u037e\n\u00a0\u00a0}\n\u00a0\u00a0return\u00a0totalAmount\u037e\n}\nI\u00a0also\u00a0take\u00a0the\u00a0opportunity\u00a0to\u00a0change\u00a0the\u00a0names\u00a0inside\u00a0my\u00a0extracted\u00a0functions\u00a0to\u00a0adhere\nto\u00a0my\u00a0convention.\nfunction\u00a0statement\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0totalAmount()\u00a0{\n\u00a0\u00a0let\u00a0result\u00a0=\u00a00\u037e\nwww.EBooksWorld.ir\n", "page": 29, "type": "text", "section": "Page 29"}
{"text": "\u00a0\u00a0for\u00a0(let\u00a0perf\u00a0of\u00a0invoice.performances)\u00a0{\n\u00a0\u00a0\u00a0\u00a0result\u00a0+=\u00a0amountFor(perf)\u037e\n\u00a0\u00a0}\n\u00a0\u00a0return\u00a0result\u037e\n}\nfunction\u00a0totalVolumeCredits()\u00a0{\n\u00a0\u00a0let\u00a0result\u00a0=\u00a00\u037e\n\u00a0\u00a0for\u00a0(let\u00a0perf\u00a0of\u00a0invoice.performances)\u00a0{\n\u00a0\u00a0\u00a0\u00a0result\u00a0+=\u00a0volumeCreditsFor(perf)\u037e\n\u00a0\u00a0}\n\u00a0\u00a0return\u00a0result\u037e\n}\nSTATUS: LOTS OF NESTED FUNCTIONS\nNow\u00a0is\u00a0a\u00a0good\u00a0time\u00a0to\u00a0pause\u00a0and\u00a0take\u00a0a\u00a0look\u00a0at\u00a0the\u00a0overall\u00a0state\u00a0of\u00a0the\u00a0code:\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0statement\u00a0(invoice,\u00a0plays)\u00a0{\n\u00a0\u00a0let\u00a0result\u00a0=\u00a0`Statement\u00a0for\u00a0${invoice.customer}\\n`\u037e\n\u00a0\u00a0for\u00a0(let\u00a0perf\u00a0of\u00a0invoice.performances)\u00a0{\n\u00a0\u00a0\u00a0\u00a0result\u00a0+=\u00a0`\u00a0\u00a0${playFor(perf).name}:\u00a0${usd(amountFor(perf))}\u00a0(${perf.audience\n\u00a0\u00a0}\n\u00a0\u00a0result\u00a0+=\u00a0`Amount\u00a0owed\u00a0is\u00a0${usd(totalAmount())}\\n`\u037e\n\u00a0\u00a0result\u00a0+=\u00a0`You\u00a0earned\u00a0${totalVolumeCredits()}\u00a0credits\\n`\u037e\n\u00a0\u00a0return\u00a0result\u037e\n\u00a0\u00a0function\u00a0totalAmount()\u00a0{\n\u00a0\u00a0\u00a0\u00a0let\u00a0result\u00a0=\u00a00\u037e\n\u00a0\u00a0\u00a0\u00a0for\u00a0(let\u00a0perf\u00a0of\u00a0invoice.performances)\u00a0{\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0result\u00a0+=\u00a0amountFor(perf)\u037e\n\u00a0\u00a0\u00a0\u00a0}\n\u00a0\u00a0\u00a0\u00a0return\u00a0result\u037e\n\u00a0\u00a0}\n\u00a0\u00a0function\u00a0totalVolumeCredits()\u00a0{\n\u00a0\u00a0\u00a0\u00a0let\u00a0result\u00a0=\u00a00\u037e\n\u00a0\u00a0\u00a0\u00a0for\u00a0(let\u00a0perf\u00a0of\u00a0invoice.performances)\u00a0{\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0result\u00a0+=\u00a0volumeCreditsFor(perf)\u037e\n\u00a0\u00a0\u00a0\u00a0}\n\u00a0\u00a0\u00a0\u00a0return\u00a0result\u037e\n\u00a0\u00a0}\n\u00a0\u00a0function\u00a0usd(aNumber)\u00a0{\n\u00a0\u00a0\u00a0\u00a0return\u00a0new\u00a0Intl.NumberFormat(\"en\u00adUS\",\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0{\u00a0style:\u00a0\"currency\",\u00a0currency:\u00a0\"USD\",\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0minimumFractionDigits:\u00a02\u00a0}).format(aNumber/100)\u037e\n\u00a0\u00a0}\n\u00a0\u00a0function\u00a0volumeCreditsFor(aPerformance)\u00a0{\n\u00a0\u00a0\u00a0\u00a0let\u00a0result\u00a0=\u00a00\u037e\n\u00a0\u00a0\u00a0\u00a0result\u00a0+=\u00a0Math.max(aPerformance.audience\u00a0\u00ad\u00a030,\u00a00)\u037e\nwww.EBooksWorld.ir\n", "page": 30, "type": "text", "section": "Page 30"}
{"text": "\u00a0\u00a0\u00a0\u00a0if\u00a0(\"comedy\"\u00a0===\u00a0playFor(aPerformance).type)\u00a0result\u00a0+=\u00a0Math.floor(aPerforman\n\u00a0\u00a0\u00a0\u00a0return\u00a0result\u037e\n\u00a0\u00a0}\n\u00a0\u00a0function\u00a0playFor(aPerformance)\u00a0{\n\u00a0\u00a0\u00a0\u00a0return\u00a0plays[aPerformance.playID]\u037e\n\u00a0\u00a0}\n\u00a0\u00a0function\u00a0amountFor(aPerformance)\u00a0{\n\u00a0\u00a0\u00a0\u00a0let\u00a0result\u00a0=\u00a00\u037e\n\u00a0\u00a0\u00a0\u00a0switch\u00a0(playFor(aPerformance).type)\u00a0{\n\u00a0\u00a0\u00a0\u00a0case\u00a0\"tragedy\":\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0result\u00a0=\u00a040000\u037e\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0if\u00a0(aPerformance.audience\u00a0>\u00a030)\u00a0{\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0result\u00a0+=\u00a01000\u00a0*\u00a0(aPerformance.audience\u00a0\u00ad\u00a030)\u037e\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0}\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0break\u037e\n\u00a0\u00a0\u00a0\u00a0case\u00a0\"comedy\":\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0result\u00a0=\u00a030000\u037e\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0if\u00a0(aPerformance.audience\u00a0>\u00a020)\u00a0{\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0result\u00a0+=\u00a010000\u00a0+\u00a0500\u00a0*\u00a0(aPerformance.audience\u00a0\u00ad\u00a020)\u037e\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0}\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0result\u00a0+=\u00a0300\u00a0*\u00a0aPerformance.audience\u037e\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0break\u037e\n\u00a0\u00a0\u00a0\u00a0default:\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0throw\u00a0new\u00a0Error(`unknown\u00a0type:\u00a0${playFor(aPerformance).type}`)\u037e\n\u00a0\u00a0\u00a0\u00a0}\n\u00a0\u00a0\u00a0\u00a0return\u00a0result\u037e\n\u00a0\u00a0}\n}\nThe\u00a0structure\u00a0of\u00a0the\u00a0code\u00a0is\u00a0much\u00a0better\u00a0now.\u00a0The\u00a0top\u00adlevel\u00a0statement\u00a0function\u00a0is\u00a0now\njust\u00a0seven\u00a0lines\u00a0of\u00a0code,\u00a0and\u00a0all\u00a0it\u00a0does\u00a0is\u00a0laying\u00a0out\u00a0the\u00a0printing\u00a0of\u00a0the\u00a0statement.\u00a0All\u00a0the\ncalculation\u00a0logic\u00a0has\u00a0been\u00a0moved\u00a0out\u00a0to\u00a0a\u00a0handful\u00a0of\u00a0supporting\u00a0functions.\u00a0This\u00a0makes\nit\u00a0easier\u00a0to\u00a0understand\u00a0each\u00a0individual\u00a0calculation\u00a0as\u00a0well\u00a0as\u00a0the\u00a0overall\u00a0flow\u00a0of\u00a0the\nreport.\nSPLITTING THE PHASES OF CALCULATION AND\nFORMATTING\nSo\u00a0far,\u00a0my\u00a0refactoring\u00a0has\u00a0focused\u00a0on\u00a0adding\u00a0enough\u00a0structure\u00a0to\u00a0the\u00a0function\u00a0so\u00a0that\u00a0I\ncan\u00a0understand\u00a0it\u00a0and\u00a0see\u00a0it\u00a0in\u00a0terms\u00a0of\u00a0its\u00a0logical\u00a0parts.\u00a0This\u00a0is\u00a0often\u00a0the\u00a0case\u00a0early\u00a0in\nrefactoring.\u00a0Breaking\u00a0down\u00a0complicated\u00a0chunks\u00a0into\u00a0small\u00a0pieces\u00a0is\u00a0important,\u00a0as\u00a0is\nnaming\u00a0things\u00a0well.\u00a0Now,\u00a0I\u00a0can\u00a0begin\u00a0to\u00a0focus\u00a0more\u00a0on\u00a0the\u00a0functionality\u00a0change\u00a0I\u00a0want\nto\u00a0make\u2014specifically,\u00a0providing\u00a0an\u00a0HTML\u00a0version\u00a0of\u00a0this\u00a0statement.\u00a0In\u00a0many\u00a0ways,\u00a0it\u2019s\nnow\u00a0much\u00a0easier\u00a0to\u00a0do.\u00a0With\u00a0all\u00a0the\u00a0calculation\u00a0code\u00a0split\u00a0out,\u00a0all\u00a0I\u00a0have\u00a0to\u00a0do\u00a0is\u00a0write\u00a0an\nHTML\u00a0version\u00a0of\u00a0the\u00a0seven\u00a0lines\u00a0of\u00a0code\u00a0at\u00a0the\u00a0top.\u00a0The\u00a0problem\u00a0is\u00a0that\u00a0these\u00a0broken\u00ad\nout\u00a0functions\u00a0are\u00a0nested\u00a0within\u00a0the\u00a0textual\u00a0statement\u00a0method,\u00a0and\u00a0I\u00a0don\u2019t\u00a0want\u00a0to\u00a0copy\nwww.EBooksWorld.ir\n", "page": 31, "type": "text", "section": "Page 31"}
{"text": "and\u00a0paste\u00a0them\u00a0into\u00a0a\u00a0new\u00a0function,\u00a0however\u00a0well\u00a0organized.\u00a0I\u00a0want\u00a0the\u00a0same\ncalculation\u00a0functions\u00a0to\u00a0be\u00a0used\u00a0by\u00a0the\u00a0text\u00a0and\u00a0HTML\u00a0versions\u00a0of\u00a0the\u00a0statement.\nThere\u00a0are\u00a0various\u00a0ways\u00a0to\u00a0do\u00a0this,\u00a0but\u00a0one\u00a0of\u00a0my\u00a0favorite\u00a0techniques\u00a0is\u00a0Split\u00a0Phase\u00a0(154).\nMy\u00a0aim\u00a0here\u00a0is\u00a0to\u00a0divide\u00a0the\u00a0logic\u00a0into\u00a0two\u00a0parts:\u00a0one\u00a0that\u00a0calculates\u00a0the\u00a0data\u00a0required\nfor\u00a0the\u00a0statement,\u00a0the\u00a0other\u00a0that\u00a0renders\u00a0it\u00a0into\u00a0text\u00a0or\u00a0HTML.\u00a0The\u00a0first\u00a0phase\u00a0creates\nan\u00a0intermediate\u00a0data\u00a0structure\u00a0that\u00a0it\u00a0passes\u00a0to\u00a0the\u00a0second.\nI\u00a0start\u00a0a\u00a0Split\u00a0Phase\u00a0(154)\u00a0by\u00a0applying\u00a0Extract\u00a0Function\u00a0(106)\u00a0to\u00a0the\u00a0code\u00a0that\u00a0makes\u00a0up\nthe\u00a0second\u00a0phase.\u00a0In\u00a0this\u00a0case,\u00a0that\u2019s\u00a0the\u00a0statement\u00a0printing\u00a0code,\u00a0which\u00a0is\u00a0in\u00a0fact\u00a0the\nentire\u00a0content\u00a0of\u00a0statement.\u00a0This,\u00a0together\u00a0with\u00a0all\u00a0the\u00a0nested\u00a0functions,\u00a0goes\u00a0into\u00a0its\nown\u00a0top\u00adlevel\u00a0function\u00a0which\u00a0I\u00a0call\u00a0renderPlainText.\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0statement\u00a0(invoice,\u00a0plays)\u00a0{\n\u00a0\u00a0return\u00a0renderPlainText(invoice,\u00a0plays)\u037e\n}\nfunction\u00a0renderPlainText(invoice,\u00a0plays)\u00a0{\n\u00a0\u00a0let\u00a0result\u00a0=\u00a0`Statement\u00a0for\u00a0${invoice.customer}\\n`\u037e\n\u00a0\u00a0for\u00a0(let\u00a0perf\u00a0of\u00a0invoice.performances)\u00a0{\n\u00a0\u00a0\u00a0\u00a0result\u00a0+=\u00a0`\u00a0\u00a0${playFor(perf).name}:\u00a0${usd(amountFor(perf))}\u00a0(${perf.audience\n\u00a0\u00a0}\n\u00a0\u00a0result\u00a0+=\u00a0`Amount\u00a0owed\u00a0is\u00a0${usd(totalAmount())}\\n`\u037e\n\u00a0\u00a0result\u00a0+=\u00a0`You\u00a0earned\u00a0${totalVolumeCredits()}\u00a0credits\\n`\u037e\n\u00a0\u00a0return\u00a0result\u037e\nfunction\u00a0totalAmount()\u00a0{...}\n\u00a0\u00a0function\u00a0totalVolumeCredits()\u00a0{...}\n\u00a0\u00a0function\u00a0usd(aNumber)\u00a0{...}\n\u00a0\u00a0function\u00a0volumeCreditsFor(aPerformance)\u00a0{...}\n\u00a0\u00a0function\u00a0playFor(aPerformance)\u00a0{...}\n\u00a0\u00a0function\u00a0amountFor(aPerformance)\u00a0{...}\nI\u00a0do\u00a0my\u00a0usual\u00a0compile\u00adtest\u00adcommit,\u00a0then\u00a0create\u00a0an\u00a0object\u00a0that\u00a0will\u00a0act\u00a0as\u00a0my\nintermediate\u00a0data\u00a0structure\u00a0between\u00a0the\u00a0two\u00a0phases.\u00a0I\u00a0pass\u00a0this\u00a0data\u00a0object\u00a0in\u00a0as\u00a0an\nargument\u00a0to\u00a0renderPlainText\u00a0(compile\u00adtest\u00adcommit).\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0statement\u00a0(invoice,\u00a0plays)\u00a0{\n\u00a0\u00a0const\u00a0statementData\u00a0=\u00a0{}\u037e\n\u00a0\u00a0return\u00a0renderPlainText(statementData,\u00a0invoice,\u00a0plays)\u037e\n}\nwww.EBooksWorld.ir\n", "page": 32, "type": "text", "section": "Page 32"}
{"text": "function\u00a0renderPlainText(data,\u00a0invoice,\u00a0plays)\u00a0{\n\u00a0\u00a0let\u00a0result\u00a0=\u00a0`Statement\u00a0for\u00a0${invoice.customer}\\n`\u037e\n\u00a0\u00a0for\u00a0(let\u00a0perf\u00a0of\u00a0invoice.performances)\u00a0{\n\u00a0\u00a0\u00a0\u00a0result\u00a0+=\u00a0`\u00a0\u00a0${playFor(perf).name}:\u00a0${usd(amountFor(perf))}\u00a0(${perf.audience\n\u00a0\u00a0}\n\u00a0\u00a0result\u00a0+=\u00a0`Amount\u00a0owed\u00a0is\u00a0${usd(totalAmount())}\\n`\u037e\n\u00a0\u00a0result\u00a0+=\u00a0`You\u00a0earned\u00a0${totalVolumeCredits()}\u00a0credits\\n`\u037e\n\u00a0\u00a0return\u00a0result\u037e\nfunction\u00a0totalAmount()\u00a0{...}\n\u00a0\u00a0function\u00a0totalVolumeCredits()\u00a0{...}\n\u00a0\u00a0function\u00a0usd(aNumber)\u00a0{...}\n\u00a0\u00a0function\u00a0volumeCreditsFor(aPerformance)\u00a0{...}\n\u00a0\u00a0function\u00a0playFor(aPerformance)\u00a0{...}\n\u00a0\u00a0function\u00a0amountFor(aPerformance)\u00a0{...}\nI\u00a0now\u00a0examine\u00a0the\u00a0other\u00a0arguments\u00a0used\u00a0by\u00a0renderPlainText.\u00a0I\u00a0want\u00a0to\u00a0move\u00a0the\ndata\u00a0that\u00a0comes\u00a0from\u00a0them\u00a0into\u00a0the\u00a0intermediate\u00a0data\u00a0structure,\u00a0so\u00a0that\u00a0all\u00a0the\ncalculation\u00a0code\u00a0moves\u00a0into\u00a0the\u00a0statement\u00a0function\u00a0and\u00a0renderPlainText\u00a0operates\nsolely\u00a0on\u00a0data\u00a0passed\u00a0to\u00a0it\u00a0through\u00a0the\u00a0data\u00a0parameter.\nMy\u00a0first\u00a0move\u00a0is\u00a0to\u00a0take\u00a0the\u00a0customer\u00a0and\u00a0add\u00a0it\u00a0to\u00a0the\u00a0intermediate\u00a0object\u00a0(compile\u00ad\ntest\u00adcommit).\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0statement\u00a0(invoice,\u00a0plays)\u00a0{\n\u00a0\u00a0const\u00a0statementData\u00a0=\u00a0{}\u037e\n\u00a0\u00a0statementData.customer\u00a0=\u00a0invoice.customer\u037e\n\u00a0\u00a0return\u00a0renderPlainText(statementData,\u00a0invoice,\u00a0plays)\u037e\n}\nfunction\u00a0renderPlainText(data,\u00a0invoice,\u00a0plays)\u00a0{\n\u00a0\u00a0let\u00a0result\u00a0=\u00a0`Statement\u00a0for\u00a0${data.customer}\\n`\u037e\n\u00a0\u00a0for\u00a0(let\u00a0perf\u00a0of\u00a0invoice.performances)\u00a0{\n\u00a0\u00a0\u00a0\u00a0result\u00a0+=\u00a0`\u00a0\u00a0${playFor(perf).name}:\u00a0${usd(amountFor(perf))}\u00a0(${perf.audience\n\u00a0\u00a0}\n\u00a0\u00a0result\u00a0+=\u00a0`Amount\u00a0owed\u00a0is\u00a0${usd(totalAmount())}\\n`\u037e\n\u00a0\u00a0result\u00a0+=\u00a0`You\u00a0earned\u00a0${totalVolumeCredits()}\u00a0credits\\n`\u037e\n\u00a0\u00a0return\u00a0result\u037e\nSimilarly,\u00a0I\u00a0add\u00a0the\u00a0performances,\u00a0which\u00a0allows\u00a0me\u00a0to\u00a0delete\u00a0the\u00a0invoice\u00a0parameter\u00a0to\nrenderPlainText\u00a0(compile\u00adtest\u00adcommit).\nwww.EBooksWorld.ir\n", "page": 33, "type": "text", "section": "Page 33"}
{"text": "top\u00a0level\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0statement\u00a0(invoice,\u00a0plays)\u00a0{\n\u00a0\u00a0const\u00a0statementData\u00a0=\u00a0{}\u037e\n\u00a0\u00a0statementData.customer\u00a0=\u00a0invoice.customer\u037e\n\u00a0\u00a0statementData.performances\u00a0=\u00a0invoice.performances\u037e\n\u00a0\u00a0return\u00a0renderPlainText(statementData,\u00a0invoice,\u00a0plays)\u037e\n}\nfunction\u00a0renderPlainText(data,\u00a0plays)\u00a0{\n\u00a0\u00a0let\u00a0result\u00a0=\u00a0`Statement\u00a0for\u00a0${data.customer}\\n`\u037e\n\u00a0\u00a0for\u00a0(let\u00a0perf\u00a0of\u00a0data.performances)\u00a0{\n\u00a0\u00a0\u00a0\u00a0result\u00a0+=\u00a0`\u00a0\u00a0${playFor(perf).name}:\u00a0${usd(amountFor(perf))}\u00a0(${perf.audience\n\u00a0\u00a0}\n\u00a0\u00a0result\u00a0+=\u00a0`Amount\u00a0owed\u00a0is\u00a0${usd(totalAmount())}\\n`\u037e\n\u00a0\u00a0result\u00a0+=\u00a0`You\u00a0earned\u00a0${totalVolumeCredits()}\u00a0credits\\n`\u037e\n\u00a0\u00a0return\u00a0result\u037e\nfunction\u00a0renderPlainText\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0totalAmount()\u00a0{\n\u00a0\u00a0let\u00a0result\u00a0=\u00a00\u037e\n\u00a0\u00a0for\u00a0(let\u00a0perf\u00a0of\u00a0data.performances)\u00a0{\n\u00a0\u00a0\u00a0\u00a0result\u00a0+=\u00a0amountFor(perf)\u037e\n\u00a0\u00a0}\n\u00a0\u00a0return\u00a0result\u037e\n}\nfunction\u00a0totalVolumeCredits()\u00a0{\n\u00a0\u00a0let\u00a0result\u00a0=\u00a00\u037e\n\u00a0\u00a0for\u00a0(let\u00a0perf\u00a0of\u00a0data.performances)\u00a0{\n\u00a0\u00a0\u00a0\u00a0result\u00a0+=\u00a0volumeCreditsFor(perf)\u037e\n\u00a0\u00a0}\n\u00a0\u00a0return\u00a0result\u037e\n}\nNow\u00a0I\u2019d\u00a0like\u00a0the\u00a0play\u00a0name\u00a0to\u00a0come\u00a0from\u00a0the\u00a0intermediate\u00a0data.\u00a0To\u00a0do\u00a0this,\u00a0I\u00a0need\u00a0to\nenrich\u00a0the\u00a0performance\u00a0record\u00a0with\u00a0data\u00a0from\u00a0the\u00a0play\u00a0(compile\u00adtest\u00adcommit).\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0statement\u00a0(invoice,\u00a0plays)\u00a0{\n\u00a0\u00a0const\u00a0statementData\u00a0=\u00a0{}\u037e\nwww.EBooksWorld.ir\n", "page": 34, "type": "text", "section": "Page 34"}
{"text": "\u00a0\u00a0statementData.customer\u00a0=\u00a0invoice.customer\u037e\n\u00a0\u00a0statementData.performances\u00a0=\u00a0invoice.performances.map(enrichPerformance)\u037e\n\u00a0\u00a0return\u00a0renderPlainText(statementData,\u00a0plays)\u037e\n\u00a0\u00a0function\u00a0enrichPerformance(aPerformance)\u00a0{\n\u00a0\u00a0\u00a0\u00a0const\u00a0result\u00a0=\u00a0Object.assign({},\u00a0aPerformance)\u037e\n\u00a0\u00a0\u00a0\u00a0return\u00a0result\u037e\n\u00a0\u00a0}\nAt\u00a0the\u00a0moment,\u00a0I\u2019m\u00a0just\u00a0making\u00a0a\u00a0copy\u00a0of\u00a0the\u00a0performance\u00a0object,\u00a0but\u00a0I\u2019ll\u00a0shortly\u00a0add\ndata\u00a0to\u00a0this\u00a0new\u00a0record.\u00a0I\u00a0take\u00a0a\u00a0copy\u00a0because\u00a0I\u00a0don\u2019t\u00a0want\u00a0to\u00a0modify\u00a0the\u00a0data\u00a0passed\ninto\u00a0the\u00a0function.\u00a0I\u00a0prefer\u00a0to\u00a0treat\u00a0data\u00a0as\u00a0immutable\u00a0as\u00a0much\u00a0as\u00a0I\u00a0can\u2014mutable\u00a0state\nquickly\u00a0becomes\u00a0something\u00a0rotten.\nThe\u00a0idiom\u00a0result\u00a0=\u00a0Object.assign({},\u00a0aPerformance)\u00a0looks\u00a0very\u00a0odd\u00a0to\npeople\u00a0unfamiliar\u00a0to\u00a0JavaScript.\u00a0It\u00a0performs\u00a0a\u00a0shallow\u00a0copy.\u00a0I\u2019d\u00a0prefer\u00a0to\u00a0have\u00a0a\nfunction\u00a0for\u00a0this,\u00a0but\u00a0it\u2019s\u00a0one\u00a0of\u00a0those\u00a0cases\u00a0where\u00a0the\u00a0idiom\u00a0is\u00a0so\u00a0baked\u00a0into\u00a0JavaScript\nusage\u00a0that\u00a0writing\u00a0my\u00a0own\u00a0function\u00a0would\u00a0look\u00a0out\u00a0of\u00a0place\u00a0for\u00a0JavaScript\nprogrammers.\nNow\u00a0I\u00a0have\u00a0a\u00a0spot\u00a0for\u00a0the\u00a0play,\u00a0I\u00a0need\u00a0to\u00a0add\u00a0it.\u00a0To\u00a0do\u00a0that,\u00a0I\u00a0need\u00a0to\u00a0apply\u00a0Move\nFunction\u00a0(198)\u00a0to\u00a0playFor\u00a0and\u00a0statement\u00a0(compile\u00adtest\u00adcommit).\nfunction\u00a0statement\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0enrichPerformance(aPerformance)\u00a0{\n\u00a0\u00a0const\u00a0result\u00a0=\u00a0Object.assign({},\u00a0aPerformance)\u037e\n\u00a0\u00a0result.play\u00a0=\u00a0playFor(result)\u037e\n\u00a0\u00a0return\u00a0result\u037e\n}\nfunction\u00a0playFor(aPerformance)\u00a0{\n\u00a0\u00a0return\u00a0plays[aPerformance.playID]\u037e\n}\nI\u00a0then\u00a0replace\u00a0all\u00a0the\u00a0references\u00a0to\u00a0playFor\u00a0in\u00a0renderPlainText\u00a0to\u00a0use\u00a0the\u00a0data\ninstead\u00a0(compile\u00adtest\u00adcommit).\nfunction\u00a0renderPlainText\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nwww.EBooksWorld.ir\n", "page": 35, "type": "text", "section": "Page 35"}
{"text": "\u00a0let\u00a0result\u00a0=\u00a0`Statement\u00a0for\u00a0${data.customer}\\n`\u037e\n\u00a0for\u00a0(let\u00a0perf\u00a0of\u00a0data.performances)\u00a0{\n\u00a0\u00a0\u00a0result\u00a0+=\u00a0`\u00a0\u00a0${perf.play.name}:\u00a0${usd(amountFor(perf))}\u00a0(${perf.audience}\u00a0sea\n\u00a0}\n\u00a0result\u00a0+=\u00a0`Amount\u00a0owed\u00a0is\u00a0${usd(totalAmount())}\\n`\u037e\n\u00a0result\u00a0+=\u00a0`You\u00a0earned\u00a0${totalVolumeCredits()}\u00a0credits\\n`\u037e\n\u00a0return\u00a0result\u037e\nfunction\u00a0volumeCreditsFor(aPerformance)\u00a0{\n\u00a0\u00a0let\u00a0result\u00a0=\u00a00\u037e\n\u00a0\u00a0result\u00a0+=\u00a0Math.max(aPerformance.audience\u00a0\u00ad\u00a030,\u00a00)\u037e\n\u00a0\u00a0if\u00a0(\"comedy\"\u00a0===\u00a0aPerformance.play.type)\u00a0result\u00a0+=\u00a0Math.floor(aPerformance.aud\n\u00a0\u00a0return\u00a0result\u037e\n}\nfunction\u00a0amountFor(aPerformance)\u00a0{\n\u00a0\u00a0let\u00a0result\u00a0=\u00a00\u037e\n\u00a0\u00a0switch\u00a0(aPerformance.play.type)\u00a0{\n\u00a0\u00a0case\u00a0\"tragedy\":\n\u00a0\u00a0\u00a0\u00a0result\u00a0=\u00a040000\u037e\n\u00a0\u00a0\u00a0\u00a0if\u00a0(aPerformance.audience\u00a0>\u00a030)\u00a0{\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0result\u00a0+=\u00a01000\u00a0*\u00a0(aPerformance.audience\u00a0\u00ad\u00a030)\u037e\n\u00a0\u00a0\u00a0\u00a0}\n\u00a0\u00a0\u00a0\u00a0break\u037e\n\u00a0\u00a0case\u00a0\"comedy\":\n\u00a0\u00a0\u00a0\u00a0result\u00a0=\u00a030000\u037e\n\u00a0\u00a0\u00a0\u00a0if\u00a0(aPerformance.audience\u00a0>\u00a020)\u00a0{\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0result\u00a0+=\u00a010000\u00a0+\u00a0500\u00a0*\u00a0(aPerformance.audience\u00a0\u00ad\u00a020)\u037e\n\u00a0\u00a0\u00a0\u00a0}\n\u00a0\u00a0\u00a0\u00a0result\u00a0+=\u00a0300\u00a0*\u00a0aPerformance.audience\u037e\n\u00a0\u00a0\u00a0\u00a0break\u037e\n\u00a0\u00a0default:\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0throw\u00a0new\u00a0Error(`unknown\u00a0type:\u00a0${aPerformance.play.type}`)\u037e\n\u00a0\u00a0}\n\u00a0\u00a0return\u00a0result\u037e\n}\nI\u00a0then\u00a0move\u00a0amountFor\u00a0in\u00a0a\u00a0similar\u00a0way\u00a0(compile\u00adtest\u00adcommit).\nfunction\u00a0statement\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0enrichPerformance(aPerformance)\u00a0{\n\u00a0\u00a0const\u00a0result\u00a0=\u00a0Object.assign({},\u00a0aPerformance)\u037e\n\u00a0\u00a0result.play\u00a0=\u00a0playFor(result)\u037e\n\u00a0\u00a0result.amount\u00a0=\u00a0amountFor(result)\u037e\n\u00a0\u00a0return\u00a0result\u037e\n}\nwww.EBooksWorld.ir\n", "page": 36, "type": "text", "section": "Page 36"}
{"text": "function\u00a0amountFor(aPerformance)\u00a0{...}\nfunction\u00a0renderPlainText\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\n\u00a0let\u00a0result\u00a0=\u00a0`Statement\u00a0for\u00a0${data.customer}\\n`\u037e\n\u00a0for\u00a0(let\u00a0perf\u00a0of\u00a0data.performances)\u00a0{\n\u00a0\u00a0\u00a0result\u00a0+=\u00a0`\u00a0\u00a0${perf.play.name}:\u00a0${usd(perf.amount)}\u00a0(${perf.audience}\u00a0seats)\\\n\u00a0}\n\u00a0result\u00a0+=\u00a0`Amount\u00a0owed\u00a0is\u00a0${usd(totalAmount())}\\n`\u037e\n\u00a0result\u00a0+=\u00a0`You\u00a0earned\u00a0${totalVolumeCredits()}\u00a0credits\\n`\u037e\n\u00a0return\u00a0result\u037e\nfunction\u00a0totalAmount()\u00a0{\n\u00a0\u00a0let\u00a0result\u00a0=\u00a00\u037e\n\u00a0\u00a0for\u00a0(let\u00a0perf\u00a0of\u00a0data.performances)\u00a0{\n\u00a0\u00a0\u00a0\u00a0result\u00a0+=\u00a0perf.amount\u037e\n\u00a0\u00a0}\n\u00a0\u00a0return\u00a0result\u037e\n}\nNext,\u00a0I\u00a0move\u00a0the\u00a0volume\u00a0credits\u00a0calculation\u00a0(compile\u00adtest\u00adcommit).\nfunction\u00a0statement\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0enrichPerformance(aPerformance)\u00a0{\n\u00a0\u00a0const\u00a0result\u00a0=\u00a0Object.assign({},\u00a0aPerformance)\u037e\n\u00a0\u00a0result.play\u00a0=\u00a0playFor(result)\u037e\n\u00a0\u00a0result.amount\u00a0=\u00a0amountFor(result)\u037e\n\u00a0\u00a0result.volumeCredits\u00a0=\u00a0volumeCreditsFor(result)\u037e\n\u00a0\u00a0return\u00a0result\u037e\n}\nfunction\u00a0volumeCreditsFor(aPerformance)\u00a0{...}\nfunction\u00a0renderPlainText\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0totalVolumeCredits()\u00a0{\n\u00a0\u00a0let\u00a0result\u00a0=\u00a00\u037e\nwww.EBooksWorld.ir\n", "page": 37, "type": "text", "section": "Page 37"}
{"text": "\u00a0\u00a0for\u00a0(let\u00a0perf\u00a0of\u00a0data.performances)\u00a0{\n\u00a0\u00a0\u00a0\u00a0result\u00a0+=\u00a0perf.volumeCredits\u037e\n\u00a0\u00a0}\n\u00a0\u00a0return\u00a0result\u037e\n}\nFinally,\u00a0I\u00a0move\u00a0the\u00a0two\u00a0calculations\u00a0of\u00a0the\u00a0totals.\nfunction\u00a0statement\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nconst\u00a0statementData\u00a0=\u00a0{}\u037e\nstatementData.customer\u00a0=\u00a0invoice.customer\u037e\nstatementData.performances\u00a0=\u00a0invoice.performances.map(enrichPerformance)\u037e\nstatementData.totalAmount\u00a0=\u00a0totalAmount(statementData)\u037e\nstatementData.totalVolumeCredits\u00a0=\u00a0totalVolumeCredits(statementData)\u037e\nreturn\u00a0renderPlainText(statementData,\u00a0plays)\u037e\nfunction\u00a0totalAmount(data)\u00a0{...}\n\u00a0\u00a0function\u00a0totalVolumeCredits(data)\u00a0{...}\nfunction\u00a0renderPlainText\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nlet\u00a0result\u00a0=\u00a0`Statement\u00a0for\u00a0${data.customer}\\n`\u037e\nfor\u00a0(let\u00a0perf\u00a0of\u00a0data.performances)\u00a0{\n\u00a0\u00a0result\u00a0+=\u00a0`\u00a0\u00a0${perf.play.name}:\u00a0${usd(perf.amount)}\u00a0(${perf.audience}\u00a0seats)\\n\n}\nresult\u00a0+=\u00a0`Amount\u00a0owed\u00a0is\u00a0${usd(data.totalAmount)}\\n`\u037e\nresult\u00a0+=\u00a0`You\u00a0earned\u00a0${data.totalVolumeCredits}\u00a0credits\\n`\u037e\nreturn\u00a0result\u037e\nAlthough\u00a0I\u00a0could\u00a0have\u00a0modified\u00a0the\u00a0bodies\u00a0of\u00a0these\u00a0totals\u00a0functions\u00a0to\u00a0use\u00a0the\nstatementData\u00a0variable\u00a0(as\u00a0it\u2019s\u00a0within\u00a0scope),\u00a0I\u00a0prefer\u00a0to\u00a0pass\u00a0the\u00a0explicit\u00a0parameter.\nAnd,\u00a0once\u00a0I\u2019m\u00a0done\u00a0with\u00a0compile\u00adtest\u00adcommit\u00a0after\u00a0the\u00a0move,\u00a0I\u00a0can\u2019t\u00a0resist\u00a0a\u00a0couple\nquick\u00a0shots\u00a0of\u00a0Replace\u00a0Loop\u00a0with\u00a0Pipeline\u00a0(231).\nfunction\u00a0renderPlainText\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nwww.EBooksWorld.ir\n", "page": 38, "type": "text", "section": "Page 38"}
{"text": "function\u00a0totalAmount(data)\u00a0{\n\u00a0\u00a0return\u00a0data.performances\n\u00a0\u00a0\u00a0\u00a0.reduce((total,\u00a0p)\u00a0=>\u00a0total\u00a0+\u00a0p.amount,\u00a00)\u037e\n}\nfunction\u00a0totalVolumeCredits(data)\u00a0{\n\u00a0\u00a0return\u00a0data.performances\n\u00a0\u00a0\u00a0\u00a0.reduce((total,\u00a0p)\u00a0=>\u00a0total\u00a0+\u00a0p.volumeCredits,\u00a00)\u037e\n}\nI\u00a0now\u00a0extract\u00a0all\u00a0the\u00a0first\u00adphase\u00a0code\u00a0into\u00a0its\u00a0own\u00a0function\u00a0(compile\u00adtest\u00adcommit).\ntop\u00a0level\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0statement\u00a0(invoice,\u00a0plays)\u00a0{\n\u00a0\u00a0return\u00a0renderPlainText(createStatementData(invoice,\u00a0plays))\u037e\n}\nfunction\u00a0createStatementData(invoice,\u00a0plays)\u00a0{\n\u00a0\u00a0const\u00a0statementData\u00a0=\u00a0{}\u037e\n\u00a0\u00a0statementData.customer\u00a0=\u00a0invoice.customer\u037e\n\u00a0\u00a0statementData.performances\u00a0=\u00a0invoice.performances.map(enrichPerformance)\u037e\n\u00a0\u00a0statementData.totalAmount\u00a0=\u00a0totalAmount(statementData)\u037e\n\u00a0\u00a0statementData.totalVolumeCredits\u00a0=\u00a0totalVolumeCredits(statementData)\u037e\n\u00a0\u00a0return\u00a0statementData\u037e\nSince\u00a0it\u2019s\u00a0clearly\u00a0separate\u00a0now,\u00a0I\u00a0move\u00a0it\u00a0to\u00a0its\u00a0own\u00a0file\u00a0(and\u00a0alter\u00a0the\u00a0name\u00a0of\u00a0the\nreturned\u00a0result\u00a0to\u00a0match\u00a0my\u00a0usual\u00a0convention).\nstatement.js\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nimport\u00a0createStatementData\u00a0from\u00a0'./createStatementData.js'\u037e\ncreateStatementData.js\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nexport\u00a0default\u00a0function\u00a0createStatementData(invoice,\u00a0plays)\u00a0{\n\u00a0\u00a0const\u00a0result\u00a0=\u00a0{}\u037e\n\u00a0\u00a0result.customer\u00a0=\u00a0invoice.customer\u037e\n\u00a0\u00a0result.performances\u00a0=\u00a0invoice.performances.map(enrichPerformance)\u037e\nwww.EBooksWorld.ir\n", "page": 39, "type": "text", "section": "Page 39"}
{"text": "\u00a0\u00a0result.totalAmount\u00a0=\u00a0totalAmount(result)\u037e\n\u00a0\u00a0result.totalVolumeCredits\u00a0=\u00a0totalVolumeCredits(result)\u037e\n\u00a0\u00a0return\u00a0result\u037e\n\u00a0\u00a0function\u00a0enrichPerformance(aPerformance)\u00a0{...}\n\u00a0\u00a0\u00a0\u00a0function\u00a0playFor(aPerformance)\u00a0{...}\n\u00a0\u00a0\u00a0\u00a0function\u00a0amountFor(aPerformance)\u00a0{...}\n\u00a0\u00a0\u00a0\u00a0function\u00a0volumeCreditsFor(aPerformance)\u00a0{...}\n\u00a0\u00a0\u00a0\u00a0function\u00a0totalAmount(data)\u00a0{...}\n\u00a0\u00a0\u00a0\u00a0function\u00a0totalVolumeCredits(data)\u00a0{...}\nOne\u00a0final\u00a0swing\u00a0of\u00a0compile\u00adtest\u00adcommit\u2014and\u00a0now\u00a0it\u2019s\u00a0easy\u00a0to\u00a0write\u00a0an\u00a0HTML\u00a0version.\nstatement.js\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0htmlStatement\u00a0(invoice,\u00a0plays)\u00a0{\n\u00a0\u00a0return\u00a0renderHtml(createStatementData(invoice,\u00a0plays))\u037e\n}\nfunction\u00a0renderHtml\u00a0(data)\u00a0{\n\u00a0\u00a0let\u00a0result\u00a0=\u00a0`<h1>Statement\u00a0for\u00a0${data.customer}</h1>\\n`\u037e\n\u00a0\u00a0result\u00a0+=\u00a0\"<table>\\n\"\u037e\n\u00a0\u00a0result\u00a0+=\u00a0\"<tr><th>play</th><th>seats</th><th>cost</th></tr>\"\u037e\n\u00a0\u00a0for\u00a0(let\u00a0perf\u00a0of\u00a0data.performances)\u00a0{\n\u00a0\u00a0\u00a0\u00a0result\u00a0+=\u00a0`\u00a0\u00a0<tr><td>${perf.play.name}</td><td>${perf.audience}</td>`\u037e\n\u00a0\u00a0\u00a0\u00a0result\u00a0+=\u00a0`<td>${usd(perf.amount)}</td></tr>\\n`\u037e\n\u00a0\u00a0}\n\u00a0\u00a0result\u00a0+=\u00a0\"</table>\\n\"\u037e\n\u00a0\u00a0result\u00a0+=\u00a0`<p>Amount\u00a0owed\u00a0is\u00a0<em>${usd(data.totalAmount)}</em></p>\\n`\u037e\n\u00a0\u00a0result\u00a0+=\u00a0`<p>You\u00a0earned\u00a0<em>${data.totalVolumeCredits}</em>\u00a0credits</p>\\n`\u037e\n\u00a0\u00a0return\u00a0result\u037e\n}\nfunction\u00a0usd(aNumber)\u00a0{...}\n(I\u00a0moved\u00a0usd\u00a0to\u00a0the\u00a0top\u00a0level,\u00a0so\u00a0that\u00a0renderHtml\u00a0could\u00a0use\u00a0it.)\nSTATUS: SEPARATED INTO TWO FILES (AND PHASES)\nThis\u00a0is\u00a0a\u00a0good\u00a0moment\u00a0to\u00a0take\u00a0stock\u00a0again\u00a0and\u00a0think\u00a0about\u00a0where\u00a0the\u00a0code\u00a0is\u00a0now.\u00a0I\nhave\u00a0two\u00a0files\u00a0of\u00a0code.\nstatement.js\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nwww.EBooksWorld.ir\n", "page": 40, "type": "text", "section": "Page 40"}
{"text": "import\u00a0createStatementData\u00a0from\u00a0'./createStatementData.js'\u037e\nfunction\u00a0statement\u00a0(invoice,\u00a0plays)\u00a0{\n\u00a0\u00a0return\u00a0renderPlainText(createStatementData(invoice,\u00a0plays))\u037e\n}\nfunction\u00a0renderPlainText(data,\u00a0plays)\u00a0{\n\u00a0\u00a0let\u00a0result\u00a0=\u00a0`Statement\u00a0for\u00a0${data.customer}\\n`\u037e\n\u00a0\u00a0for\u00a0(let\u00a0perf\u00a0of\u00a0data.performances)\u00a0{\n\u00a0\u00a0\u00a0\u00a0result\u00a0+=\u00a0`\u00a0\u00a0${perf.play.name}:\u00a0${usd(perf.amount)}\u00a0(${perf.audience}\u00a0seats)\n\u00a0\u00a0}\n\u00a0\u00a0result\u00a0+=\u00a0`Amount\u00a0owed\u00a0is\u00a0${usd(data.totalAmount)}\\n`\u037e\n\u00a0\u00a0result\u00a0+=\u00a0`You\u00a0earned\u00a0${data.totalVolumeCredits}\u00a0credits\\n`\u037e\n\u00a0\u00a0return\u00a0result\u037e\n}\nfunction\u00a0htmlStatement\u00a0(invoice,\u00a0plays)\u00a0{\n\u00a0\u00a0return\u00a0renderHtml(createStatementData(invoice,\u00a0plays))\u037e\n}\nfunction\u00a0renderHtml\u00a0(data)\u00a0{\n\u00a0\u00a0let\u00a0result\u00a0=\u00a0`<h1>Statement\u00a0for\u00a0${data.customer}</h1>\\n`\u037e\n\u00a0\u00a0result\u00a0+=\u00a0\"<table>\\n\"\u037e\n\u00a0\u00a0result\u00a0+=\u00a0\"<tr><th>play</th><th>seats</th><th>cost</th></tr>\"\u037e\n\u00a0\u00a0for\u00a0(let\u00a0perf\u00a0of\u00a0data.performances)\u00a0{\n\u00a0\u00a0\u00a0\u00a0result\u00a0+=\u00a0`\u00a0\u00a0<tr><td>${perf.play.name}</td><td>${perf.audience}</td>`\u037e\n\u00a0\u00a0\u00a0\u00a0result\u00a0+=\u00a0`<td>${usd(perf.amount)}</td></tr>\\n`\u037e\n\u00a0\u00a0}\n\u00a0\u00a0result\u00a0+=\u00a0\"</table>\\n\"\u037e\n\u00a0\u00a0result\u00a0+=\u00a0`<p>Amount\u00a0owed\u00a0is\u00a0<em>${usd(data.totalAmount)}</em></p>\\n`\u037e\n\u00a0\u00a0result\u00a0+=\u00a0`<p>You\u00a0earned\u00a0<em>${data.totalVolumeCredits}</em>\u00a0credits</p>\\n`\u037e\n\u00a0\u00a0return\u00a0result\u037e\n}\nfunction\u00a0usd(aNumber)\u00a0{\n\u00a0\u00a0return\u00a0new\u00a0Intl.NumberFormat(\"en\u00adUS\",\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0{\u00a0style:\u00a0\"currency\",\u00a0currency:\u00a0\"USD\",\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0minimumFractionDigits:\u00a02\u00a0}).format(aNumber/100)\n}\ncreateStatementData.js\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nexport\u00a0default\u00a0function\u00a0createStatementData(invoice,\u00a0plays)\u00a0{\n\u00a0\u00a0const\u00a0result\u00a0=\u00a0{}\u037e\n\u00a0\u00a0result.customer\u00a0=\u00a0invoice.customer\u037e\n\u00a0\u00a0result.performances\u00a0=\u00a0invoice.performances.map(enrichPerformance)\u037e\n\u00a0\u00a0result.totalAmount\u00a0=\u00a0totalAmount(result)\u037e\n\u00a0\u00a0result.totalVolumeCredits\u00a0=\u00a0totalVolumeCredits(result)\u037e\n\u00a0\u00a0return\u00a0result\u037e\n\u00a0\u00a0function\u00a0enrichPerformance(aPerformance)\u00a0{\n\u00a0\u00a0\u00a0\u00a0const\u00a0result\u00a0=\u00a0Object.assign({},\u00a0aPerformance)\u037e\n\u00a0\u00a0\u00a0\u00a0result.play\u00a0=\u00a0playFor(result)\u037e\nwww.EBooksWorld.ir\n", "page": 41, "type": "text", "section": "Page 41"}
{"text": "\u00a0\u00a0\u00a0\u00a0result.amount\u00a0=\u00a0amountFor(result)\u037e\n\u00a0\u00a0\u00a0\u00a0result.volumeCredits\u00a0=\u00a0volumeCreditsFor(result)\u037e\n\u00a0\u00a0\u00a0\u00a0return\u00a0result\u037e\n\u00a0\u00a0}\n\u00a0\u00a0function\u00a0playFor(aPerformance)\u00a0{\n\u00a0\u00a0\u00a0\u00a0return\u00a0plays[aPerformance.playID]\n\u00a0\u00a0}\n\u00a0\u00a0function\u00a0amountFor(aPerformance)\u00a0{\n\u00a0\u00a0\u00a0\u00a0let\u00a0result\u00a0=\u00a00\u037e\n\u00a0\u00a0\u00a0\u00a0switch\u00a0(aPerformance.play.type)\u00a0{\n\u00a0\u00a0\u00a0\u00a0case\u00a0\"tragedy\":\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0result\u00a0=\u00a040000\u037e\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0if\u00a0(aPerformance.audience\u00a0>\u00a030)\u00a0{\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0result\u00a0+=\u00a01000\u00a0*\u00a0(aPerformance.audience\u00a0\u00ad\u00a030)\u037e\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0}\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0break\u037e\n\u00a0\u00a0\u00a0\u00a0case\u00a0\"comedy\":\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0result\u00a0=\u00a030000\u037e\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0if\u00a0(aPerformance.audience\u00a0>\u00a020)\u00a0{\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0result\u00a0+=\u00a010000\u00a0+\u00a0500\u00a0*\u00a0(aPerformance.audience\u00a0\u00ad\u00a020)\u037e\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0}\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0result\u00a0+=\u00a0300\u00a0*\u00a0aPerformance.audience\u037e\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0break\u037e\n\u00a0\u00a0\u00a0\u00a0default:\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0throw\u00a0new\u00a0Error(`unknown\u00a0type:\u00a0${aPerformance.play.type}`)\u037e\n\u00a0\u00a0\u00a0\u00a0}\n\u00a0\u00a0\u00a0\u00a0return\u00a0result\u037e\n\u00a0\u00a0}\n\u00a0\u00a0function\u00a0volumeCreditsFor(aPerformance)\u00a0{\n\u00a0\u00a0\u00a0\u00a0let\u00a0result\u00a0=\u00a00\u037e\n\u00a0\u00a0\u00a0\u00a0result\u00a0+=\u00a0Math.max(aPerformance.audience\u00a0\u00ad\u00a030,\u00a00)\u037e\n\u00a0\u00a0\u00a0\u00a0if\u00a0(\"comedy\"\u00a0===\u00a0aPerformance.play.type)\u00a0result\u00a0+=\u00a0Math.floor(aPerformance.a\n\u00a0\u00a0\u00a0\u00a0return\u00a0result\u037e\n\u00a0\u00a0}\n\u00a0\u00a0function\u00a0totalAmount(data)\u00a0{\n\u00a0\u00a0\u00a0\u00a0return\u00a0data.performances\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0.reduce((total,\u00a0p)\u00a0=>\u00a0total\u00a0+\u00a0p.amount,\u00a00)\u037e\n\u00a0\u00a0}\n\u00a0\u00a0function\u00a0totalVolumeCredits(data)\u00a0{\n\u00a0\u00a0\u00a0\u00a0return\u00a0data.performances\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0.reduce((total,\u00a0p)\u00a0=>\u00a0total\u00a0+\u00a0p.volumeCredits,\u00a00)\u037e\n\u00a0\u00a0}\nI\u00a0have\u00a0more\u00a0code\u00a0than\u00a0I\u00a0did\u00a0when\u00a0I\u00a0started:\u00a070\u00a0lines\u00a0(not\u00a0counting\u00a0htmlStatement)\u00a0as\nopposed\u00a0to\u00a044,\u00a0mostly\u00a0due\u00a0to\u00a0the\u00a0extra\u00a0wrapping\u00a0involved\u00a0in\u00a0putting\u00a0things\u00a0in\u00a0functions.\nIf\u00a0all\u00a0else\u00a0is\u00a0equal,\u00a0more\u00a0code\u00a0is\u00a0bad\u2014but\u00a0rarely\u00a0is\u00a0all\u00a0else\u00a0equal.\u00a0The\u00a0extra\u00a0code\u00a0breaks\nup\u00a0the\u00a0logic\u00a0into\u00a0identifiable\u00a0parts,\u00a0separating\u00a0the\u00a0calculations\u00a0of\u00a0the\u00a0statements\u00a0from\nthe\u00a0layout.\u00a0This\u00a0modularity\u00a0makes\u00a0it\u00a0easier\u00a0for\u00a0me\u00a0to\u00a0understand\u00a0the\u00a0parts\u00a0of\u00a0the\u00a0code\nand\u00a0how\u00a0they\u00a0fit\u00a0together.\u00a0Brevity\u00a0is\u00a0the\u00a0soul\u00a0of\u00a0wit,\u00a0but\u00a0clarity\u00a0is\u00a0the\u00a0soul\u00a0of\u00a0evolvable\nwww.EBooksWorld.ir\n", "page": 42, "type": "text", "section": "Page 42"}
{"text": "software.\u00a0Adding\u00a0this\u00a0modularity\u00a0allows\u00a0to\u00a0me\u00a0to\u00a0support\u00a0the\u00a0HTML\u00a0version\u00a0of\u00a0the\u00a0code\nwithout\u00a0any\u00a0duplication\u00a0of\u00a0the\u00a0calculations.\n\u00a0When\u00a0programming,\u00a0follow\u00a0the\u00a0camping\u00a0rule:\u00a0Always\u00a0leave\u00a0the\u00a0code\u00a0base\nhealthier\u00a0than\u00a0when\u00a0you\u00a0found\u00a0it.\nThere\u00a0are\u00a0more\u00a0things\u00a0I\u00a0could\u00a0do\u00a0to\u00a0simplify\u00a0the\u00a0printing\u00a0logic,\u00a0but\u00a0this\u00a0will\u00a0do\u00a0for\u00a0the\nmoment.\u00a0I\u00a0always\u00a0have\u00a0to\u00a0strike\u00a0a\u00a0balance\u00a0between\u00a0all\u00a0the\u00a0refactorings\u00a0I\u00a0could\u00a0do\u00a0and\nadding\u00a0new\u00a0features.\u00a0At\u00a0the\u00a0moment,\u00a0most\u00a0people\u00a0under\u00adprioritize\u00a0refactoring\u2014but\nthere\u00a0still\u00a0is\u00a0a\u00a0balance.\u00a0My\u00a0rule\u00a0is\u00a0a\u00a0variation\u00a0on\u00a0the\u00a0camping\u00a0rule:\u00a0Always\u00a0leave\u00a0the\u00a0code\nbase\u00a0healthier\u00a0than\u00a0when\u00a0you\u00a0found\u00a0it.\u00a0It\u00a0will\u00a0never\u00a0be\u00a0perfect,\u00a0but\u00a0it\u00a0should\u00a0be\u00a0better.\nREORGANIZING THE CALCULATIONS BY TYPE\nNow\u00a0I\u2019ll\u00a0turn\u00a0my\u00a0attention\u00a0to\u00a0the\u00a0next\u00a0feature\u00a0change:\u00a0supporting\u00a0more\u00a0categories\u00a0of\nplays,\u00a0each\u00a0with\u00a0its\u00a0own\u00a0charging\u00a0and\u00a0volume\u00a0credits\u00a0calculations.\u00a0At\u00a0the\u00a0moment,\u00a0to\nmake\u00a0changes\u00a0here\u00a0I\u00a0have\u00a0to\u00a0go\u00a0into\u00a0the\u00a0calculation\u00a0functions\u00a0and\u00a0edit\u00a0the\u00a0conditions\u00a0in\nthere.\u00a0The\u00a0amountFor\u00a0function\u00a0highlights\u00a0the\u00a0central\u00a0role\u00a0the\u00a0type\u00a0of\u00a0play\u00a0has\u00a0in\u00a0the\nchoice\u00a0of\u00a0calculations\u2014but\u00a0conditional\u00a0logic\u00a0like\u00a0this\u00a0tends\u00a0to\u00a0decay\u00a0as\u00a0further\nmodifications\u00a0are\u00a0made\u00a0unless\u00a0it\u2019s\u00a0reinforced\u00a0by\u00a0more\u00a0structural\u00a0elements\u00a0of\u00a0the\nprogramming\u00a0language.\nThere\u00a0are\u00a0various\u00a0ways\u00a0to\u00a0introduce\u00a0structure\u00a0to\u00a0make\u00a0this\u00a0explicit,\u00a0but\u00a0in\u00a0this\u00a0case\u00a0a\nnatural\u00a0approach\u00a0is\u00a0type\u00a0polymorphism\u2014a\u00a0prominent\u00a0feature\u00a0of\u00a0classical\u00a0object\u00ad\norientation.\u00a0Classical\u00a0OO\u00a0has\u00a0long\u00a0been\u00a0a\u00a0controversial\u00a0feature\u00a0in\u00a0the\u00a0JavaScript\u00a0world,\nbut\u00a0the\u00a0ECMAScript\u00a02015\u00a0version\u00a0provides\u00a0a\u00a0sound\u00a0syntax\u00a0and\u00a0structure\u00a0for\u00a0it.\u00a0So\u00a0it\nmakes\u00a0sense\u00a0to\u00a0use\u00a0it\u00a0in\u00a0a\u00a0right\u00a0situation\u2014like\u00a0this\u00a0one.\nMy\u00a0overall\u00a0plan\u00a0is\u00a0to\u00a0set\u00a0up\u00a0an\u00a0inheritance\u00a0hierarchy\u00a0with\u00a0comedy\u00a0and\u00a0tragedy\nsubclasses\u00a0that\u00a0contain\u00a0the\u00a0calculation\u00a0logic\u00a0for\u00a0those\u00a0cases.\u00a0Callers\u00a0call\u00a0a\u00a0polymorphic\namount\u00a0function\u00a0that\u00a0the\u00a0language\u00a0will\u00a0dispatch\u00a0to\u00a0the\u00a0different\u00a0calculations\u00a0for\u00a0the\ncomedies\u00a0and\u00a0tragedies.\u00a0I\u2019ll\u00a0make\u00a0a\u00a0similar\u00a0structure\u00a0for\u00a0the\u00a0volume\u00a0credits\u00a0calculation.\nTo\u00a0do\u00a0this,\u00a0I\u00a0utilize\u00a0a\u00a0couple\u00a0of\u00a0refactorings.\u00a0The\u00a0core\u00a0refactoring\u00a0is\u00a0Replace\u00a0Conditional\nwith\u00a0Polymorphism\u00a0(272),\u00a0which\u00a0changes\u00a0a\u00a0hunk\u00a0of\u00a0conditional\u00a0code\u00a0with\npolymorphism.\u00a0But\u00a0before\u00a0I\u00a0can\u00a0do\u00a0Replace\u00a0Conditional\u00a0with\u00a0Polymorphism\u00a0(272),\u00a0I\nneed\u00a0to\u00a0create\u00a0an\u00a0inheritance\u00a0structure\u00a0of\u00a0some\u00a0kind.\u00a0I\u00a0need\u00a0to\u00a0create\u00a0a\u00a0class\u00a0to\u00a0host\u00a0the\namount\u00a0and\u00a0volume\u00a0credit\u00a0functions.\nI\u00a0begin\u00a0by\u00a0reviewing\u00a0the\u00a0calculation\u00a0code.\u00a0(One\u00a0of\u00a0the\u00a0pleasant\u00a0consequences\u00a0of\u00a0the\nwww.EBooksWorld.ir\n", "page": 43, "type": "text", "section": "Page 43"}
{"text": "previous\u00a0refactoring\u00a0is\u00a0that\u00a0I\u00a0can\u00a0now\u00a0ignore\u00a0the\u00a0formatting\u00a0code,\u00a0so\u00a0long\u00a0as\u00a0I\u00a0produce\nthe\u00a0same\u00a0output\u00a0data\u00a0structure.\u00a0I\u00a0can\u00a0further\u00a0support\u00a0this\u00a0by\u00a0adding\u00a0tests\u00a0that\u00a0probe\u00a0the\nintermediate\u00a0data\u00a0structure.)\ncreateStatementData.js\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nexport\u00a0default\u00a0function\u00a0createStatementData(invoice,\u00a0plays)\u00a0{\n\u00a0\u00a0const\u00a0result\u00a0=\u00a0{}\u037e\n\u00a0\u00a0result.customer\u00a0=\u00a0invoice.customer\u037e\n\u00a0\u00a0result.performances\u00a0=\u00a0invoice.performances.map(enrichPerformance)\u037e\n\u00a0\u00a0result.totalAmount\u00a0=\u00a0totalAmount(result)\u037e\n\u00a0\u00a0result.totalVolumeCredits\u00a0=\u00a0totalVolumeCredits(result)\u037e\n\u00a0\u00a0return\u00a0result\u037e\n\u00a0\u00a0function\u00a0enrichPerformance(aPerformance)\u00a0{\n\u00a0\u00a0\u00a0\u00a0const\u00a0result\u00a0=\u00a0Object.assign({},\u00a0aPerformance)\u037e\n\u00a0\u00a0\u00a0\u00a0result.play\u00a0=\u00a0playFor(result)\u037e\n\u00a0\u00a0\u00a0\u00a0result.amount\u00a0=\u00a0amountFor(result)\u037e\n\u00a0\u00a0\u00a0\u00a0result.volumeCredits\u00a0=\u00a0volumeCreditsFor(result)\u037e\n\u00a0\u00a0\u00a0\u00a0return\u00a0result\u037e\n\u00a0\u00a0}\n\u00a0\u00a0function\u00a0playFor(aPerformance)\u00a0{\n\u00a0\u00a0\u00a0\u00a0return\u00a0plays[aPerformance.playID]\n\u00a0\u00a0}\n\u00a0\u00a0function\u00a0amountFor(aPerformance)\u00a0{\n\u00a0\u00a0\u00a0\u00a0let\u00a0result\u00a0=\u00a00\u037e\n\u00a0\u00a0\u00a0\u00a0switch\u00a0(aPerformance.play.type)\u00a0{\n\u00a0\u00a0\u00a0\u00a0case\u00a0\"tragedy\":\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0result\u00a0=\u00a040000\u037e\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0if\u00a0(aPerformance.audience\u00a0>\u00a030)\u00a0{\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0result\u00a0+=\u00a01000\u00a0*\u00a0(aPerformance.audience\u00a0\u00ad\u00a030)\u037e\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0}\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0break\u037e\n\u00a0\u00a0\u00a0\u00a0case\u00a0\"comedy\":\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0result\u00a0=\u00a030000\u037e\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0if\u00a0(aPerformance.audience\u00a0>\u00a020)\u00a0{\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0result\u00a0+=\u00a010000\u00a0+\u00a0500\u00a0*\u00a0(aPerformance.audience\u00a0\u00ad\u00a020)\u037e\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0}\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0result\u00a0+=\u00a0300\u00a0*\u00a0aPerformance.audience\u037e\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0break\u037e\n\u00a0\u00a0\u00a0\u00a0default:\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0throw\u00a0new\u00a0Error(`unknown\u00a0type:\u00a0${aPerformance.play.type}`)\u037e\n\u00a0\u00a0\u00a0\u00a0}\n\u00a0\u00a0\u00a0\u00a0return\u00a0result\u037e\n\u00a0\u00a0}\n\u00a0\u00a0function\u00a0volumeCreditsFor(aPerformance)\u00a0{\n\u00a0\u00a0\u00a0\u00a0let\u00a0result\u00a0=\u00a00\u037e\n\u00a0\u00a0\u00a0\u00a0result\u00a0+=\u00a0Math.max(aPerformance.audience\u00a0\u00ad\u00a030,\u00a00)\u037e\n\u00a0\u00a0\u00a0\u00a0if\u00a0(\"comedy\"\u00a0===\u00a0aPerformance.play.type)\u00a0result\u00a0+=\u00a0Math.floor(aPerformance.a\nwww.EBooksWorld.ir\n", "page": 44, "type": "text", "section": "Page 44"}
{"text": "\u00a0\u00a0\u00a0\u00a0return\u00a0result\u037e\n\u00a0\u00a0}\n\u00a0\u00a0function\u00a0totalAmount(data)\u00a0{\n\u00a0\u00a0\u00a0\u00a0return\u00a0data.performances\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0.reduce((total,\u00a0p)\u00a0=>\u00a0total\u00a0+\u00a0p.amount,\u00a00)\u037e\n\u00a0\u00a0}\n\u00a0\u00a0function\u00a0totalVolumeCredits(data)\u00a0{\n\u00a0\u00a0\u00a0\u00a0return\u00a0data.performances\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0.reduce((total,\u00a0p)\u00a0=>\u00a0total\u00a0+\u00a0p.volumeCredits,\u00a00)\u037e\n\u00a0\u00a0}\nCreating a Performance Calculator\nThe\u00a0enrichPerformance\u00a0function\u00a0is\u00a0the\u00a0key,\u00a0since\u00a0it\u00a0populates\u00a0the\u00a0intermediate\u00a0data\nstructure\u00a0with\u00a0the\u00a0data\u00a0for\u00a0each\u00a0performance.\u00a0Currently,\u00a0it\u00a0calls\u00a0the\u00a0conditional\nfunctions\u00a0for\u00a0amount\u00a0and\u00a0volume\u00a0credits.\u00a0What\u00a0I\u00a0need\u00a0it\u00a0to\u00a0do\u00a0is\u00a0call\u00a0those\u00a0functions\u00a0on\na\u00a0host\u00a0class.\u00a0Since\u00a0that\u00a0class\u00a0hosts\u00a0functions\u00a0for\u00a0calculating\u00a0data\u00a0about\u00a0performances,\nI\u2019ll\u00a0call\u00a0it\u00a0a\u00a0performance\u00a0calculator.\nfunction\u00a0createStatementData\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0enrichPerformance(aPerformance)\u00a0{\n\u00a0\u00a0const\u00a0calculator\u00a0=\u00a0new\u00a0PerformanceCalculator(aPerformance)\u037e\n\u00a0\u00a0const\u00a0result\u00a0=\u00a0Object.assign({},\u00a0aPerformance)\u037e\n\u00a0\u00a0result.play\u00a0=\u00a0playFor(result)\u037e\n\u00a0\u00a0result.amount\u00a0=\u00a0amountFor(result)\u037e\n\u00a0\u00a0result.volumeCredits\u00a0=\u00a0volumeCreditsFor(result)\u037e\n\u00a0\u00a0return\u00a0result\u037e\n}\ntop\u00a0level\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nclass\u00a0PerformanceCalculator\u00a0{\n\u00a0\u00a0constructor(aPerformance)\u00a0{\n\u00a0\u00a0\u00a0\u00a0this.performance\u00a0=\u00a0aPerformance\u037e\n\u00a0\u00a0}\n}\nSo\u00a0far,\u00a0this\u00a0new\u00a0object\u00a0isn\u2019t\u00a0doing\u00a0anything.\u00a0I\u00a0want\u00a0to\u00a0move\u00a0behavior\u00a0into\u00a0it\u2014and\u00a0I\u2019d\u00a0like\nto\u00a0start\u00a0with\u00a0the\u00a0simplest\u00a0thing\u00a0to\u00a0move,\u00a0which\u00a0is\u00a0the\u00a0play\u00a0record.\u00a0Strictly,\u00a0I\u00a0don\u2019t\u00a0need\nwww.EBooksWorld.ir\n", "page": 45, "type": "text", "section": "Page 45"}
{"text": "to\u00a0do\u00a0this,\u00a0as\u00a0it\u2019s\u00a0not\u00a0varying\u00a0polymorphically,\u00a0but\u00a0this\u00a0way\u00a0I\u2019ll\u00a0keep\u00a0all\u00a0the\u00a0data\ntransforms\u00a0in\u00a0one\u00a0place,\u00a0and\u00a0that\u00a0consistency\u00a0will\u00a0make\u00a0the\u00a0code\u00a0clearer.\nTo\u00a0make\u00a0this\u00a0work,\u00a0I\u00a0will\u00a0use\u00a0Change\u00a0Function\u00a0Declaration\u00a0(124)\u00a0to\u00a0pass\u00a0the\nperformance\u2019s\u00a0play\u00a0into\u00a0the\u00a0calculator.\nfunction\u00a0createStatementData\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0enrichPerformance(aPerformance)\u00a0{\n\u00a0\u00a0const\u00a0calculator\u00a0=\u00a0new\u00a0PerformanceCalculator(aPerformance,\u00a0playFor(aPerformanc\n\u00a0\u00a0const\u00a0result\u00a0=\u00a0Object.assign({},\u00a0aPerformance)\u037e\n\u00a0\u00a0result.play\u00a0=\u00a0calculator.play\u037e\n\u00a0\u00a0result.amount\u00a0=\u00a0amountFor(result)\u037e\n\u00a0\u00a0result.volumeCredits\u00a0=\u00a0volumeCreditsFor(result)\u037e\n\u00a0\u00a0return\u00a0result\u037e\n}\nclass\u00a0PerformanceCalculator\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nclass\u00a0PerformanceCalculator\u00a0{\n\u00a0\u00a0constructor(aPerformance,\u00a0aPlay)\u00a0{\n\u00a0\u00a0\u00a0\u00a0this.performance\u00a0=\u00a0aPerformance\u037e\n\u00a0\u00a0\u00a0\u00a0this.play\u00a0=\u00a0aPlay\u037e\n\u00a0\u00a0}\n}\n(I\u2019m\u00a0not\u00a0saying\u00a0compile\u00adtest\u00adcommit\u00a0all\u00a0the\u00a0time\u00a0any\u00a0more,\u00a0as\u00a0I\u00a0suspect\u00a0you\u2019re\u00a0getting\ntired\u00a0of\u00a0reading\u00a0it.\u00a0But\u00a0I\u00a0still\u00a0do\u00a0it\u00a0at\u00a0every\u00a0opportunity.\u00a0I\u00a0do\u00a0sometimes\u00a0get\u00a0tired\u00a0of\ndoing\u00a0it\u2014and\u00a0give\u00a0mistakes\u00a0the\u00a0chance\u00a0to\u00a0bite\u00a0me.\u00a0Then\u00a0I\u00a0learn\u00a0and\u00a0get\u00a0back\u00a0into\u00a0the\nrhythm.)\nMoving Functions into the Calculator\nThe\u00a0next\u00a0bit\u00a0of\u00a0logic\u00a0I\u00a0move\u00a0is\u00a0rather\u00a0more\u00a0substantial\u00a0for\u00a0calculating\u00a0the\u00a0amount\u00a0for\u00a0a\nperformance.\u00a0I\u2019ve\u00a0moved\u00a0functions\u00a0around\u00a0casually\u00a0while\u00a0rearranging\u00a0nested\u00a0functions\n\u2014but\u00a0this\u00a0is\u00a0a\u00a0deeper\u00a0change\u00a0in\u00a0the\u00a0context\u00a0of\u00a0the\u00a0function,\u00a0so\u00a0I\u2019ll\u00a0step\u00a0through\u00a0the\u00a0Move\nFunction\u00a0(198)\u00a0refactoring.\u00a0The\u00a0first\u00a0part\u00a0of\u00a0this\u00a0refactoring\u00a0is\u00a0to\u00a0copy\u00a0the\u00a0logic\u00a0over\u00a0to\nits\u00a0new\u00a0context\u2014the\u00a0calculator\u00a0class.\u00a0Then,\u00a0I\u00a0adjust\u00a0the\u00a0code\u00a0to\u00a0fit\u00a0into\u00a0its\u00a0new\u00a0home,\nwww.EBooksWorld.ir\n", "page": 46, "type": "text", "section": "Page 46"}
{"text": "changing\u00a0aPerformance\u00a0to\u00a0this.performance\u00a0and\u00a0playFor(aPerformance)\u00a0to\nthis.play.\nclass\u00a0PerformanceCalculator\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nget\u00a0amount()\u00a0{\n\u00a0\u00a0let\u00a0result\u00a0=\u00a00\u037e\n\u00a0\u00a0switch\u00a0(this.play.type)\u00a0{\n\u00a0\u00a0\u00a0\u00a0case\u00a0\"tragedy\":\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0result\u00a0=\u00a040000\u037e\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0if\u00a0(this.performance.audience\u00a0>\u00a030)\u00a0{\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0result\u00a0+=\u00a01000\u00a0*\u00a0(this.performance.audience\u00a0\u00ad\u00a030)\u037e\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0}\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0break\u037e\n\u00a0\u00a0\u00a0\u00a0case\u00a0\"comedy\":\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0result\u00a0=\u00a030000\u037e\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0if\u00a0(this.performance.audience\u00a0>\u00a020)\u00a0{\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0result\u00a0+=\u00a010000\u00a0+\u00a0500\u00a0*\u00a0(this.performance.audience\u00a0\u00ad\u00a020)\u037e\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0}\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0result\u00a0+=\u00a0300\u00a0*\u00a0this.performance.audience\u037e\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0break\u037e\n\u00a0\u00a0\u00a0\u00a0default:\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0throw\u00a0new\u00a0Error(`unknown\u00a0type:\u00a0${this.play.type}`)\u037e\n\u00a0\u00a0}\n\u00a0\u00a0return\u00a0result\u037e\n}\nI\u00a0can\u00a0compile\u00a0at\u00a0this\u00a0point\u00a0to\u00a0check\u00a0for\u00a0any\u00a0compile\u00adtime\u00a0errors.\u00a0\u201cCompiling\u201d\u00a0in\u00a0my\ndevelopment\u00a0environment\u00a0occurs\u00a0as\u00a0I\u00a0execute\u00a0the\u00a0code,\u00a0so\u00a0what\u00a0I\u00a0actually\u00a0do\u00a0is\u00a0run\nBabel\u00a0[babel].\u00a0That\u00a0will\u00a0be\u00a0enough\u00a0to\u00a0catch\u00a0any\u00a0syntax\u00a0errors\u00a0in\u00a0the\u00a0new\u00a0function\u2014but\nlittle\u00a0more\u00a0than\u00a0that.\u00a0Even\u00a0so,\u00a0that\u00a0can\u00a0be\u00a0a\u00a0useful\u00a0step.\nOnce\u00a0the\u00a0new\u00a0function\u00a0fits\u00a0its\u00a0home,\u00a0I\u00a0take\u00a0the\u00a0original\u00a0function\u00a0and\u00a0turn\u00a0it\u00a0into\u00a0a\ndelegating\u00a0function\u00a0so\u00a0it\u00a0calls\u00a0the\u00a0new\u00a0function.\nfunction\u00a0createStatementData\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0amountFor(aPerformance)\u00a0{\n\u00a0\u00a0return\u00a0new\u00a0PerformanceCalculator(aPerformance,\u00a0playFor(aPerformance)).amount\u037e\n}\nwww.EBooksWorld.ir\n", "page": 47, "type": "text", "section": "Page 47"}
{"text": "Now\u00a0I\u00a0can\u00a0compile\u00adtest\u00adcommit\u00a0to\u00a0ensure\u00a0the\u00a0code\u00a0is\u00a0working\u00a0properly\u00a0in\u00a0its\u00a0new\u00a0home.\nWith\u00a0that\u00a0done,\u00a0I\u00a0use\u00a0Inline\u00a0Function\u00a0(115)\u00a0to\u00a0call\u00a0the\u00a0new\u00a0function\u00a0directly\u00a0(compile\u00ad\ntest\u00adcommit).\nfunction\u00a0createStatementData\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0enrichPerformance(aPerformance)\u00a0{\n\u00a0\u00a0const\u00a0calculator\u00a0=\u00a0new\u00a0PerformanceCalculator(aPerformance,\u00a0playFor(aPerformanc\n\u00a0\u00a0const\u00a0result\u00a0=\u00a0Object.assign({},\u00a0aPerformance)\u037e\n\u00a0\u00a0result.play\u00a0=\u00a0calculator.play\u037e\n\u00a0\u00a0result.amount\u00a0=\u00a0calculator.amount\u037e\n\u00a0\u00a0result.volumeCredits\u00a0=\u00a0volumeCreditsFor(result)\u037e\n\u00a0\u00a0return\u00a0result\u037e\n}\nI\u00a0repeat\u00a0the\u00a0same\u00a0process\u00a0to\u00a0move\u00a0the\u00a0volume\u00a0credits\u00a0calculation.\nfunction\u00a0createStatementData\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0enrichPerformance(aPerformance)\u00a0{\n\u00a0\u00a0const\u00a0calculator\u00a0=\u00a0new\u00a0PerformanceCalculator(aPerformance,\u00a0playFor(aPerformanc\n\u00a0\u00a0const\u00a0result\u00a0=\u00a0Object.assign({},\u00a0aPerformance)\u037e\n\u00a0\u00a0result.play\u00a0=\u00a0calculator.play\u037e\n\u00a0\u00a0result.amount\u00a0=\u00a0calculator.amount\u037e\n\u00a0\u00a0result.volumeCredits\u00a0=\u00a0calculator.volumeCredits\u037e\n\u00a0\u00a0return\u00a0result\u037e\n}\nclass\u00a0PerformanceCalculator\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nget\u00a0volumeCredits()\u00a0{\n\u00a0\u00a0let\u00a0result\u00a0=\u00a00\u037e\n\u00a0\u00a0result\u00a0+=\u00a0Math.max(this.performance.audience\u00a0\u00ad\u00a030,\u00a00)\u037e\n\u00a0\u00a0if\u00a0(\"comedy\"\u00a0===\u00a0this.play.type)\u00a0result\u00a0+=\u00a0Math.floor(this.performance.audienc\n\u00a0\u00a0return\u00a0result\u037e\n}\nMaking the Performance Calculator Polymorphic\nwww.EBooksWorld.ir\n", "page": 48, "type": "text", "section": "Page 48"}
{"text": "Making the Performance Calculator Polymorphic\nNow\u00a0that\u00a0I\u00a0have\u00a0the\u00a0logic\u00a0in\u00a0a\u00a0class,\u00a0it\u2019s\u00a0time\u00a0to\u00a0apply\u00a0the\u00a0polymorphism.\u00a0The\u00a0first\u00a0step\u00a0is\nto\u00a0use\u00a0Replace\u00a0Type\u00a0Code\u00a0with\u00a0Subclasses\u00a0(362)\u00a0to\u00a0introduce\u00a0subclasses\u00a0instead\u00a0of\u00a0the\ntype\u00a0code.\u00a0For\u00a0this,\u00a0I\u00a0need\u00a0to\u00a0create\u00a0subclasses\u00a0of\u00a0the\u00a0performance\u00a0calculator\u00a0and\u00a0use\nthe\u00a0appropriate\u00a0subclass\u00a0in\u00a0createPerformanceData.\u00a0In\u00a0order\u00a0to\u00a0get\u00a0the\u00a0right\nsubclass,\u00a0I\u00a0need\u00a0to\u00a0replace\u00a0the\u00a0constructor\u00a0call\u00a0with\u00a0a\u00a0function,\u00a0since\u00a0JavaScript\nconstructors\u00a0can\u2019t\u00a0return\u00a0subclasses.\u00a0So\u00a0I\u00a0use\u00a0Replace\u00a0Constructor\u00a0with\u00a0Factory\nFunction\u00a0(334).\nfunction\u00a0createStatementData\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0enrichPerformance(aPerformance)\u00a0{\n\u00a0\u00a0const\u00a0calculator\u00a0=\u00a0createPerformanceCalculator(aPerformance,\u00a0playFor(aPerforma\n\u00a0\u00a0const\u00a0result\u00a0=\u00a0Object.assign({},\u00a0aPerformance)\u037e\n\u00a0\u00a0result.play\u00a0=\u00a0calculator.play\u037e\n\u00a0\u00a0result.amount\u00a0=\u00a0calculator.amount\u037e\n\u00a0\u00a0result.volumeCredits\u00a0=\u00a0calculator.volumeCredits\u037e\n\u00a0\u00a0return\u00a0result\u037e\n}\ntop\u00a0level\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0createPerformanceCalculator(aPerformance,\u00a0aPlay)\u00a0{\n\u00a0\u00a0return\u00a0new\u00a0PerformanceCalculator(aPerformance,\u00a0aPlay)\u037e\n}\nWith\u00a0that\u00a0now\u00a0a\u00a0function,\u00a0I\u00a0can\u00a0create\u00a0subclasses\u00a0of\u00a0the\u00a0performance\u00a0calculator\u00a0and\u00a0get\nthe\u00a0creation\u00a0function\u00a0to\u00a0select\u00a0which\u00a0one\u00a0to\u00a0return.\ntop\u00a0level\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0createPerformanceCalculator(aPerformance,\u00a0aPlay)\u00a0{\n\u00a0\u00a0\u00a0\u00a0switch(aPlay.type)\u00a0{\n\u00a0\u00a0\u00a0\u00a0case\u00a0\"tragedy\":\u00a0return\u00a0new\u00a0TragedyCalculator(aPerformance,\u00a0aPlay)\u037e\n\u00a0\u00a0\u00a0\u00a0case\u00a0\"comedy\"\u00a0:\u00a0return\u00a0new\u00a0ComedyCalculator(aPerformance,\u00a0aPlay)\u037e\n\u00a0\u00a0\u00a0\u00a0default:\nwww.EBooksWorld.ir\n", "page": 49, "type": "text", "section": "Page 49"}
{"text": "\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0throw\u00a0new\u00a0Error(`unknown\u00a0type:\u00a0${aPlay.type}`)\u037e\n\u00a0\u00a0\u00a0\u00a0}\n}\nclass\u00a0TragedyCalculator\u00a0extends\u00a0PerformanceCalculator\u00a0{\n}\nclass\u00a0ComedyCalculator\u00a0extends\u00a0PerformanceCalculator\u00a0{\n}\nThis\u00a0sets\u00a0up\u00a0the\u00a0structure\u00a0for\u00a0the\u00a0polymorphism,\u00a0so\u00a0I\u00a0can\u00a0now\u00a0move\u00a0on\u00a0to\u00a0Replace\nConditional\u00a0with\u00a0Polymorphism\u00a0(272).\nI\u00a0start\u00a0with\u00a0the\u00a0calculation\u00a0of\u00a0the\u00a0amount\u00a0for\u00a0tragedies.\nclass\u00a0TragedyCalculator\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nget\u00a0amount()\u00a0{\n\u00a0\u00a0let\u00a0result\u00a0=\u00a040000\u037e\n\u00a0\u00a0if\u00a0(this.performance.audience\u00a0>\u00a030)\u00a0{\n\u00a0\u00a0\u00a0\u00a0result\u00a0+=\u00a01000\u00a0*\u00a0(this.performance.audience\u00a0\u00ad\u00a030)\u037e\n\u00a0\u00a0}\n\u00a0\u00a0return\u00a0result\u037e\n}\nJust\u00a0having\u00a0this\u00a0method\u00a0in\u00a0the\u00a0subclass\u00a0is\u00a0enough\u00a0to\u00a0override\u00a0the\u00a0superclass\nconditional.\u00a0But\u00a0if\u00a0you\u2019re\u00a0as\u00a0paranoid\u00a0as\u00a0I\u00a0am,\u00a0you\u00a0might\u00a0do\u00a0this:\nclass\u00a0PerformanceCalculator\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nget\u00a0amount()\u00a0{\n\u00a0\u00a0let\u00a0result\u00a0=\u00a00\u037e\n\u00a0\u00a0switch\u00a0(this.play.type)\u00a0{\n\u00a0\u00a0\u00a0\u00a0case\u00a0\"tragedy\":\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0throw\u00a0'bad\u00a0thing'\u037e\n\u00a0\u00a0\u00a0\u00a0case\u00a0\"comedy\":\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0result\u00a0=\u00a030000\u037e\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0if\u00a0(this.performance.audience\u00a0>\u00a020)\u00a0{\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0result\u00a0+=\u00a010000\u00a0+\u00a0500\u00a0*\u00a0(this.performance.audience\u00a0\u00ad\u00a020)\u037e\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0}\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0result\u00a0+=\u00a0300\u00a0*\u00a0this.performance.audience\u037e\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0break\u037e\n\u00a0\u00a0\u00a0\u00a0default:\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0throw\u00a0new\u00a0Error(`unknown\u00a0type:\u00a0${this.play.type}`)\u037e\nwww.EBooksWorld.ir\n", "page": 50, "type": "text", "section": "Page 50"}
{"text": "\u00a0\u00a0}\n\u00a0\u00a0return\u00a0result\u037e\n}\nI\u00a0could\u00a0have\u00a0removed\u00a0the\u00a0case\u00a0for\u00a0tragedy\u00a0and\u00a0let\u00a0the\u00a0default\u00a0branch\u00a0throw\u00a0an\u00a0error.\u00a0But\nI\u00a0like\u00a0the\u00a0explicit\u00a0throw\u2014and\u00a0it\u00a0will\u00a0only\u00a0be\u00a0there\u00a0for\u00a0a\u00a0couple\u00a0more\u00a0minutes\u00a0(which\u00a0is\nwhy\u00a0I\u00a0threw\u00a0a\u00a0string,\u00a0not\u00a0a\u00a0better\u00a0error\u00a0object).\nAfter\u00a0a\u00a0compile\u00adtest\u00adcommit\u00a0of\u00a0that,\u00a0I\u00a0move\u00a0the\u00a0comedy\u00a0case\u00a0down\u00a0too.\nclass\u00a0ComedyCalculator\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nget\u00a0amount()\u00a0{\n\u00a0\u00a0let\u00a0result\u00a0=\u00a030000\u037e\n\u00a0\u00a0if\u00a0(this.performance.audience\u00a0>\u00a020)\u00a0{\n\u00a0\u00a0\u00a0\u00a0result\u00a0+=\u00a010000\u00a0+\u00a0500\u00a0*\u00a0(this.performance.audience\u00a0\u00ad\u00a020)\u037e\n\u00a0\u00a0}\n\u00a0\u00a0result\u00a0+=\u00a0300\u00a0*\u00a0this.performance.audience\u037e\n\u00a0\u00a0return\u00a0result\u037e\n}\nI\u00a0can\u00a0now\u00a0remove\u00a0the\u00a0superclass\u00a0amount\u00a0method,\u00a0as\u00a0it\u00a0should\u00a0never\u00a0be\u00a0called.\u00a0But\u00a0it\u2019s\nkinder\u00a0to\u00a0my\u00a0future\u00a0self\u00a0to\u00a0leave\u00a0a\u00a0tombstone.\nclass\u00a0PerformanceCalculator\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nget\u00a0amount()\u00a0{\n\u00a0\u00a0throw\u00a0new\u00a0Error('subclass\u00a0responsibility')\u037e\n}\nThe\u00a0next\u00a0conditional\u00a0to\u00a0replace\u00a0is\u00a0the\u00a0volume\u00a0credits\u00a0calculation.\u00a0Looking\u00a0at\u00a0the\ndiscussion\u00a0of\u00a0future\u00a0categories\u00a0of\u00a0plays,\u00a0I\u00a0notice\u00a0that\u00a0most\u00a0plays\u00a0expect\u00a0to\u00a0check\u00a0if\naudience\u00a0is\u00a0above\u00a030,\u00a0with\u00a0only\u00a0some\u00a0categories\u00a0introducing\u00a0a\u00a0variation.\u00a0So\u00a0it\u00a0makes\nsense\u00a0to\u00a0leave\u00a0the\u00a0more\u00a0common\u00a0case\u00a0on\u00a0the\u00a0superclass\u00a0as\u00a0a\u00a0default,\u00a0and\u00a0let\u00a0the\nvariations\u00a0override\u00a0it\u00a0as\u00a0necessary.\u00a0So\u00a0I\u00a0just\u00a0push\u00a0down\u00a0the\u00a0case\u00a0for\u00a0comedies:\nclass\u00a0PerformanceCalculator\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nwww.EBooksWorld.ir\n", "page": 51, "type": "text", "section": "Page 51"}
{"text": "get\u00a0volumeCredits()\u00a0{\n\u00a0\u00a0return\u00a0Math.max(this.performance.audience\u00a0\u00ad\u00a030,\u00a00)\u037e\n}\nclass\u00a0ComedyCalculator\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nget\u00a0volumeCredits()\u00a0{\n\u00a0\u00a0return\u00a0super.volumeCredits\u00a0+\u00a0Math.floor(this.performance.audience\u00a0/\u00a05)\u037e\n}\nSTATUS: CREATING THE DATA WITH THE POLYMORPHIC\nCALCULATOR\nTime\u00a0to\u00a0reflect\u00a0on\u00a0what\u00a0introducing\u00a0the\u00a0polymorphic\u00a0calculator\u00a0did\u00a0to\u00a0the\u00a0code.\ncreateStatementData.js\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nexport\u00a0default\u00a0function\u00a0createStatementData(invoice,\u00a0plays)\u00a0{\n\u00a0\u00a0const\u00a0result\u00a0=\u00a0{}\u037e\n\u00a0\u00a0result.customer\u00a0=\u00a0invoice.customer\u037e\n\u00a0\u00a0result.performances\u00a0=\u00a0invoice.performances.map(enrichPerformance)\u037e\n\u00a0\u00a0result.totalAmount\u00a0=\u00a0totalAmount(result)\u037e\n\u00a0\u00a0result.totalVolumeCredits\u00a0=\u00a0totalVolumeCredits(result)\u037e\n\u00a0\u00a0return\u00a0result\u037e\n\u00a0\u00a0function\u00a0enrichPerformance(aPerformance)\u00a0{\n\u00a0\u00a0\u00a0\u00a0const\u00a0calculator\u00a0=\u00a0createPerformanceCalculator(aPerformance,\u00a0playFor(aPerfor\n\u00a0\u00a0\u00a0\u00a0const\u00a0result\u00a0=\u00a0Object.assign({},\u00a0aPerformance)\u037e\n\u00a0\u00a0\u00a0\u00a0result.play\u00a0=\u00a0calculator.play\u037e\n\u00a0\u00a0\u00a0\u00a0result.amount\u00a0=\u00a0calculator.amount\u037e\n\u00a0\u00a0\u00a0\u00a0result.volumeCredits\u00a0=\u00a0calculator.volumeCredits\u037e\n\u00a0\u00a0\u00a0\u00a0return\u00a0result\u037e\n\u00a0\u00a0}\n\u00a0\u00a0function\u00a0playFor(aPerformance)\u00a0{\n\u00a0\u00a0\u00a0\u00a0return\u00a0plays[aPerformance.playID]\n\u00a0\u00a0}\n\u00a0\u00a0function\u00a0totalAmount(data)\u00a0{\n\u00a0\u00a0\u00a0\u00a0return\u00a0data.performances\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0.reduce((total,\u00a0p)\u00a0=>\u00a0total\u00a0+\u00a0p.amount,\u00a00)\u037e\n\u00a0\u00a0}\n\u00a0\u00a0function\u00a0totalVolumeCredits(data)\u00a0{\n\u00a0\u00a0\u00a0\u00a0return\u00a0data.performances\nwww.EBooksWorld.ir\n", "page": 52, "type": "text", "section": "Page 52"}
{"text": "\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0.reduce((total,\u00a0p)\u00a0=>\u00a0total\u00a0+\u00a0p.volumeCredits,\u00a00)\u037e\n\u00a0\u00a0}\n}\nfunction\u00a0createPerformanceCalculator(aPerformance,\u00a0aPlay)\u00a0{\n\u00a0\u00a0\u00a0\u00a0switch(aPlay.type)\u00a0{\n\u00a0\u00a0\u00a0\u00a0case\u00a0\"tragedy\":\u00a0return\u00a0new\u00a0TragedyCalculator(aPerformance,\u00a0aPlay)\u037e\n\u00a0\u00a0\u00a0\u00a0case\u00a0\"comedy\"\u00a0:\u00a0return\u00a0new\u00a0ComedyCalculator(aPerformance,\u00a0aPlay)\u037e\n\u00a0\u00a0\u00a0\u00a0default:\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0throw\u00a0new\u00a0Error(`unknown\u00a0type:\u00a0${aPlay.type}`)\u037e\n\u00a0\u00a0\u00a0\u00a0}\n}\nclass\u00a0PerformanceCalculator\u00a0{\n\u00a0\u00a0constructor(aPerformance,\u00a0aPlay)\u00a0{\n\u00a0\u00a0\u00a0\u00a0this.performance\u00a0=\u00a0aPerformance\u037e\n\u00a0\u00a0\u00a0\u00a0this.play\u00a0=\u00a0aPlay\u037e\n\u00a0\u00a0}\n\u00a0\u00a0get\u00a0amount()\u00a0{\n\u00a0\u00a0\u00a0\u00a0throw\u00a0new\u00a0Error('subclass\u00a0responsibility')\u037e}\n\u00a0\u00a0get\u00a0volumeCredits()\u00a0{\n\u00a0\u00a0\u00a0\u00a0return\u00a0Math.max(this.performance.audience\u00a0\u00ad\u00a030,\u00a00)\u037e\n\u00a0\u00a0}\n}\nclass\u00a0TragedyCalculator\u00a0extends\u00a0PerformanceCalculator\u00a0{\n\u00a0\u00a0get\u00a0amount()\u00a0{\n\u00a0\u00a0\u00a0\u00a0let\u00a0result\u00a0=\u00a040000\u037e\n\u00a0\u00a0\u00a0\u00a0if\u00a0(this.performance.audience\u00a0>\u00a030)\u00a0{\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0result\u00a0+=\u00a01000\u00a0*\u00a0(this.performance.audience\u00a0\u00ad\u00a030)\u037e\n\u00a0\u00a0\u00a0\u00a0}\n\u00a0\u00a0\u00a0\u00a0return\u00a0result\u037e\n\u00a0\u00a0}\n}\nclass\u00a0ComedyCalculator\u00a0extends\u00a0PerformanceCalculator\u00a0{\n\u00a0\u00a0get\u00a0amount()\u00a0{\n\u00a0\u00a0\u00a0\u00a0let\u00a0result\u00a0=\u00a030000\u037e\n\u00a0\u00a0\u00a0\u00a0if\u00a0(this.performance.audience\u00a0>\u00a020)\u00a0{\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0result\u00a0+=\u00a010000\u00a0+\u00a0500\u00a0*\u00a0(this.performance.audience\u00a0\u00ad\u00a020)\u037e\n\u00a0\u00a0\u00a0\u00a0}\n\u00a0\u00a0\u00a0\u00a0result\u00a0+=\u00a0300\u00a0*\u00a0this.performance.audience\u037e\n\u00a0\u00a0\u00a0\u00a0return\u00a0result\u037e\n\u00a0\u00a0}\n\u00a0\u00a0get\u00a0volumeCredits()\u00a0{\n\u00a0\u00a0\u00a0\u00a0return\u00a0super.volumeCredits\u00a0+\u00a0Math.floor(this.performance.audience\u00a0/\u00a05)\u037e\n\u00a0\u00a0}\n}\nAgain,\u00a0the\u00a0code\u00a0has\u00a0increased\u00a0in\u00a0size\u00a0as\u00a0I\u2019ve\u00a0introduced\u00a0structure.\u00a0The\u00a0benefit\u00a0here\u00a0is\nthat\u00a0the\u00a0calculations\u00a0for\u00a0each\u00a0kind\u00a0of\u00a0play\u00a0are\u00a0grouped\u00a0together.\u00a0If\u00a0most\u00a0of\u00a0the\u00a0changes\nwill\u00a0be\u00a0to\u00a0this\u00a0code,\u00a0it\u00a0will\u00a0be\u00a0helpful\u00a0to\u00a0have\u00a0it\u00a0clearly\u00a0separated\u00a0like\u00a0this.\u00a0Adding\u00a0a\u00a0new\nkind\u00a0of\u00a0play\u00a0requires\u00a0writing\u00a0a\u00a0new\u00a0subclass\u00a0and\u00a0adding\u00a0it\u00a0to\u00a0the\u00a0creation\u00a0function.\nwww.EBooksWorld.ir\n", "page": 53, "type": "text", "section": "Page 53"}
{"text": "The\u00a0example\u00a0gives\u00a0some\u00a0insight\u00a0as\u00a0to\u00a0when\u00a0using\u00a0subclasses\u00a0like\u00a0this\u00a0is\u00a0useful.\u00a0Here,\nI\u2019ve\u00a0moved\u00a0the\u00a0conditional\u00a0lookup\u00a0from\u00a0two\u00a0functions\u00a0(amountFor\u00a0and\nvolumeCreditsFor)\u00a0to\u00a0a\u00a0single\u00a0constructor\u00a0function\ncreatePerformanceCalculator.\u00a0The\u00a0more\u00a0functions\u00a0there\u00a0are\u00a0that\u00a0depend\u00a0on\u00a0the\nsame\u00a0type\u00a0of\u00a0polymorphism,\u00a0the\u00a0more\u00a0useful\u00a0this\u00a0approach\u00a0becomes.\nAn\u00a0alternative\u00a0to\u00a0what\u00a0I\u2019ve\u00a0done\u00a0here\u00a0would\u00a0be\u00a0to\u00a0have\u00a0createPerformanceData\nreturn\u00a0the\u00a0calculator\u00a0itself,\u00a0instead\u00a0of\u00a0the\u00a0calculator\u00a0populating\u00a0the\u00a0intermediate\u00a0data\nstructure.\u00a0One\u00a0of\u00a0the\u00a0nice\u00a0features\u00a0of\u00a0JavaScript\u2019s\u00a0class\u00a0system\u00a0is\u00a0that\u00a0with\u00a0it,\u00a0using\ngetters\u00a0looks\u00a0like\u00a0regular\u00a0data\u00a0access.\u00a0My\u00a0choice\u00a0on\u00a0whether\u00a0to\u00a0return\u00a0the\u00a0instance\u00a0or\ncalculate\u00a0separate\u00a0output\u00a0data\u00a0depends\u00a0on\u00a0who\u00a0is\u00a0using\u00a0the\u00a0downstream\u00a0data\u00a0structure.\nIn\u00a0this\u00a0case,\u00a0I\u00a0preferred\u00a0to\u00a0show\u00a0how\u00a0to\u00a0use\u00a0the\u00a0intermediate\u00a0data\u00a0structure\u00a0to\u00a0hide\u00a0the\ndecision\u00a0to\u00a0use\u00a0a\u00a0polymorphic\u00a0calculator.\nFINAL THOUGHTS\nThis\u00a0is\u00a0a\u00a0simple\u00a0example,\u00a0but\u00a0I\u00a0hope\u00a0it\u00a0will\u00a0give\u00a0you\u00a0a\u00a0feeling\u00a0for\u00a0what\u00a0refactoring\u00a0is\u00a0like.\nI\u2019ve\u00a0used\u00a0several\u00a0refactorings,\u00a0including\u00a0Extract\u00a0Function\u00a0(106),\u00a0Inline\u00a0Variable\u00a0(123),\nMove\u00a0Function\u00a0(198),\u00a0and\u00a0Replace\u00a0Conditional\u00a0with\u00a0Polymorphism\u00a0(272).\nThere\u00a0were\u00a0three\u00a0major\u00a0stages\u00a0to\u00a0this\u00a0refactoring\u00a0episode:\u00a0decomposing\u00a0the\u00a0original\nfunction\u00a0into\u00a0a\u00a0set\u00a0of\u00a0nested\u00a0functions,\u00a0using\u00a0Split\u00a0Phase\u00a0(154)\u00a0to\u00a0separate\u00a0the\ncalculation\u00a0and\u00a0printing\u00a0code,\u00a0and\u00a0finally\u00a0introducing\u00a0a\u00a0polymorphic\u00a0calculator\u00a0for\u00a0the\ncalculation\u00a0logic.\u00a0Each\u00a0of\u00a0these\u00a0added\u00a0structure\u00a0to\u00a0the\u00a0code,\u00a0enabling\u00a0me\u00a0to\u00a0better\ncommunicate\u00a0what\u00a0the\u00a0code\u00a0was\u00a0doing.\nAs\u00a0is\u00a0often\u00a0the\u00a0case\u00a0with\u00a0refactoring,\u00a0the\u00a0early\u00a0stages\u00a0were\u00a0mostly\u00a0driven\u00a0by\u00a0trying\u00a0to\nunderstand\u00a0what\u00a0was\u00a0going\u00a0on.\u00a0A\u00a0common\u00a0sequence\u00a0is:\u00a0Read\u00a0the\u00a0code,\u00a0gain\u00a0some\ninsight,\u00a0and\u00a0use\u00a0refactoring\u00a0to\u00a0move\u00a0that\u00a0insight\u00a0from\u00a0your\u00a0head\u00a0back\u00a0into\u00a0the\u00a0code.\u00a0The\nclearer\u00a0code\u00a0then\u00a0makes\u00a0it\u00a0easier\u00a0to\u00a0understand\u00a0it,\u00a0leading\u00a0to\u00a0deeper\u00a0insights\u00a0and\u00a0a\nbeneficial\u00a0positive\u00a0feedback\u00a0loop.\u00a0There\u00a0are\u00a0still\u00a0some\u00a0improvements\u00a0I\u00a0could\u00a0make,\u00a0but\nI\u00a0feel\u00a0I\u2019ve\u00a0done\u00a0enough\u00a0to\u00a0pass\u00a0my\u00a0test\u00a0of\u00a0leaving\u00a0the\u00a0code\u00a0significantly\u00a0better\u00a0than\u00a0how\nI\u00a0found\u00a0it.\n\u00a0The\u00a0true\u00a0test\u00a0of\u00a0good\u00a0code\u00a0is\u00a0how\u00a0easy\u00a0it\u00a0is\u00a0to\u00a0change\u00a0it.\nI\u2019m\u00a0talking\u00a0about\u00a0improving\u00a0the\u00a0code\u2014but\u00a0programmers\u00a0love\u00a0to\u00a0argue\u00a0about\u00a0what\u00a0good\ncode\u00a0looks\u00a0like.\u00a0I\u00a0know\u00a0some\u00a0people\u00a0object\u00a0to\u00a0my\u00a0preference\u00a0for\u00a0small,\u00a0well\u00adnamed\nfunctions.\u00a0If\u00a0we\u00a0consider\u00a0this\u00a0to\u00a0be\u00a0a\u00a0matter\u00a0of\u00a0aesthetics,\u00a0where\u00a0nothing\u00a0is\u00a0either\u00a0good\nwww.EBooksWorld.ir\n", "page": 54, "type": "text", "section": "Page 54"}
{"text": "or\u00a0bad\u00a0but\u00a0thinking\u00a0makes\u00a0it\u00a0so,\u00a0we\u00a0lack\u00a0any\u00a0guide\u00a0but\u00a0personal\u00a0taste.\u00a0I\u00a0believe,\nhowever,\u00a0that\u00a0we\u00a0can\u00a0go\u00a0beyond\u00a0taste\u00a0and\u00a0say\u00a0that\u00a0the\u00a0true\u00a0test\u00a0of\u00a0good\u00a0code\u00a0is\u00a0how\u00a0easy\nit\u00a0is\u00a0to\u00a0change\u00a0it.\u00a0Code\u00a0should\u00a0be\u00a0obvious:\u00a0When\u00a0someone\u00a0needs\u00a0to\u00a0make\u00a0a\u00a0change,\u00a0they\nshould\u00a0be\u00a0able\u00a0to\u00a0find\u00a0the\u00a0code\u00a0to\u00a0be\u00a0changed\u00a0easily\u00a0and\u00a0to\u00a0make\u00a0the\u00a0change\u00a0quickly\nwithout\u00a0introducing\u00a0any\u00a0errors.\u00a0A\u00a0healthy\u00a0code\u00a0base\u00a0maximizes\u00a0our\u00a0productivity,\nallowing\u00a0us\u00a0to\u00a0build\u00a0more\u00a0features\u00a0for\u00a0our\u00a0users\u00a0both\u00a0faster\u00a0and\u00a0more\u00a0cheaply.\u00a0To\u00a0keep\ncode\u00a0healthy,\u00a0pay\u00a0attention\u00a0to\u00a0what\u00a0is\u00a0getting\u00a0between\u00a0the\u00a0programming\u00a0team\u00a0and\u00a0that\nideal,\u00a0then\u00a0refactor\u00a0to\u00a0get\u00a0closer\u00a0to\u00a0the\u00a0ideal.\nBut\u00a0the\u00a0most\u00a0important\u00a0thing\u00a0to\u00a0learn\u00a0from\u00a0this\u00a0example\u00a0is\u00a0the\u00a0rhythm\u00a0of\u00a0refactoring.\nWhenever\u00a0I\u2019ve\u00a0shown\u00a0people\u00a0how\u00a0I\u00a0refactor,\u00a0they\u00a0are\u00a0surprised\u00a0by\u00a0how\u00a0small\u00a0my\u00a0steps\nare,\u00a0each\u00a0step\u00a0leaving\u00a0the\u00a0code\u00a0in\u00a0a\u00a0working\u00a0state\u00a0that\u00a0compiles\u00a0and\u00a0passes\u00a0its\u00a0tests.\u00a0I\nwas\u00a0just\u00a0as\u00a0surprised\u00a0myself\u00a0when\u00a0Kent\u00a0Beck\u00a0showed\u00a0me\u00a0how\u00a0to\u00a0do\u00a0this\u00a0in\u00a0a\u00a0hotel\u00a0room\nin\u00a0Detroit\u00a0two\u00a0decades\u00a0ago.\u00a0The\u00a0key\u00a0to\u00a0effective\u00a0refactoring\u00a0is\u00a0recognizing\u00a0that\u00a0you\u00a0go\nfaster\u00a0when\u00a0you\u00a0take\u00a0tiny\u00a0steps,\u00a0the\u00a0code\u00a0is\u00a0never\u00a0broken,\u00a0and\u00a0you\u00a0can\u00a0compose\u00a0those\nsmall\u00a0steps\u00a0into\u00a0substantial\u00a0changes.\u00a0Remember\u00a0that\u2014and\u00a0the\u00a0rest\u00a0is\u00a0silence.\nwww.EBooksWorld.ir\n", "page": 55, "type": "text", "section": "Page 55"}
{"text": "Chapter 2\nPrinciples in Refactoring\nThe\u00a0example\u00a0in\u00a0the\u00a0previous\u00a0chapter\u00a0should\u00a0have\u00a0given\u00a0you\u00a0a\u00a0decent\u00a0feel\u00a0of\u00a0what\nrefactoring\u00a0is.\u00a0Now\u00a0you\u00a0have\u00a0that,\u00a0it\u2019s\u00a0a\u00a0good\u00a0time\u00a0to\u00a0step\u00a0back\u00a0and\u00a0talk\u00a0about\u00a0some\u00a0of\nthe\u00a0broader\u00a0principles\u00a0in\u00a0refactoring.\nDEFINING REFACTORING\nLike\u00a0many\u00a0terms\u00a0in\u00a0software\u00a0development,\u00a0\u201crefactoring\u201d\u00a0is\u00a0often\u00a0used\u00a0very\u00a0loosely\u00a0by\npractitioners.\u00a0I\u00a0use\u00a0the\u00a0term\u00a0more\u00a0precisely,\u00a0and\u00a0find\u00a0it\u00a0useful\u00a0to\u00a0use\u00a0it\u00a0in\u00a0that\u00a0more\nprecise\u00a0form.\u00a0(These\u00a0definitions\u00a0are\u00a0the\u00a0same\u00a0as\u00a0those\u00a0I\u00a0gave\u00a0in\u00a0the\u00a0first\u00a0edition\u00a0of\u00a0this\nbook.)\u00a0The\u00a0term\u00a0\u201crefactoring\u201d\u00a0can\u00a0be\u00a0used\u00a0either\u00a0as\u00a0a\u00a0noun\u00a0or\u00a0a\u00a0verb.\u00a0The\u00a0noun\u2019s\ndefinition\u00a0is:\nRefactoring\u00a0(noun):\u00a0a\u00a0change\u00a0made\u00a0to\u00a0the\u00a0internal\u00a0structure\u00a0of\u00a0software\u00a0to\u00a0make\u00a0it\neasier\u00a0to\u00a0understand\u00a0and\u00a0cheaper\u00a0to\u00a0modify\u00a0without\u00a0changing\u00a0its\u00a0observable\u00a0behavior.\nThis\u00a0definition\u00a0corresponds\u00a0to\u00a0the\u00a0named\u00a0refactorings\u00a0I\u2019ve\u00a0mentioned\u00a0in\u00a0the\u00a0earlier\nexamples,\u00a0such\u00a0as\u00a0Extract\u00a0Function\u00a0(106)\u00a0and\u00a0Replace\u00a0Conditional\u00a0with\u00a0Polymorphism\n(272).\nThe\u00a0verb\u2019s\u00a0definition\u00a0is:\nRefactoring\u00a0(verb):\u00a0to\u00a0restructure\u00a0software\u00a0by\u00a0applying\u00a0a\u00a0series\u00a0of\u00a0refactorings\nwithout\u00a0changing\u00a0its\u00a0observable\u00a0behavior.\nSo\u00a0I\u00a0might\u00a0spend\u00a0a\u00a0couple\u00a0of\u00a0hours\u00a0refactoring,\u00a0during\u00a0which\u00a0I\u00a0would\u00a0apply\u00a0a\u00a0few\u00a0dozen\nindividual\u00a0refactorings.\nOver\u00a0the\u00a0years,\u00a0many\u00a0people\u00a0in\u00a0the\u00a0industry\u00a0have\u00a0taken\u00a0to\u00a0use\u00a0\u201crefactoring\u201d\u00a0to\u00a0mean\u00a0any\nkind\u00a0of\u00a0code\u00a0cleanup\u2014but\u00a0the\u00a0definitions\u00a0above\u00a0point\u00a0to\u00a0a\u00a0particular\u00a0approach\u00a0to\ncleaning\u00a0up\u00a0code.\u00a0Refactoring\u00a0is\u00a0all\u00a0about\u00a0applying\u00a0small\u00a0behavior\u00adpreserving\u00a0steps\u00a0and\nmaking\u00a0a\u00a0big\u00a0change\u00a0by\u00a0stringing\u00a0together\u00a0a\u00a0sequence\u00a0of\u00a0these\u00a0behavior\u00adpreserving\nHistory\nTopics\nTutorials\nOffers & Deals\nHighlights\nSettings\nSupport\nSign Out\n \n  \n \n  \n \n \n \n \n \n \nwww.EBooksWorld.ir\n", "page": 56, "type": "text", "section": "Page 56"}
{"text": "steps.\u00a0Each\u00a0individual\u00a0refactoring\u00a0is\u00a0either\u00a0pretty\u00a0small\u00a0itself\u00a0or\u00a0a\u00a0combination\u00a0of\u00a0small\nsteps.\u00a0As\u00a0a\u00a0result,\u00a0when\u00a0I\u2019m\u00a0refactoring,\u00a0my\u00a0code\u00a0doesn\u2019t\u00a0spend\u00a0much\u00a0time\u00a0in\u00a0a\u00a0broken\nstate,\u00a0allowing\u00a0me\u00a0to\u00a0stop\u00a0at\u00a0any\u00a0moment\u00a0even\u00a0if\u00a0I\u00a0haven\u2019t\u00a0finished.\n\u00a0If\u00a0someone\u00a0says\u00a0their\u00a0code\u00a0was\u00a0broken\u00a0for\u00a0a\u00a0couple\u00a0of\u00a0days\u00a0while\u00a0they\u00a0are\nrefactoring,\u00a0you\u00a0can\u00a0be\u00a0pretty\u00a0sure\u00a0they\u00a0were\u00a0not\u00a0refactoring.\nI\u00a0use\u00a0\u201crestructuring\u201d\u00a0as\u00a0a\u00a0general\u00a0term\u00a0to\u00a0mean\u00a0any\u00a0kind\u00a0of\u00a0reorganizing\u00a0or\u00a0cleaning\u00a0up\nof\u00a0a\u00a0code\u00a0base,\u00a0and\u00a0see\u00a0refactoring\u00a0as\u00a0a\u00a0particular\u00a0kind\u00a0of\u00a0restructuring.\u00a0Refactoring\nmay\u00a0seem\u00a0inefficient\u00a0to\u00a0people\u00a0who\u00a0first\u00a0come\u00a0across\u00a0it\u00a0and\u00a0watch\u00a0me\u00a0making\u00a0lots\u00a0of\ntiny\u00a0steps,\u00a0when\u00a0a\u00a0single\u00a0bigger\u00a0step\u00a0would\u00a0do.\u00a0But\u00a0the\u00a0tiny\u00a0steps\u00a0allow\u00a0me\u00a0to\u00a0go\u00a0faster\nbecause\u00a0they\u00a0compose\u00a0so\u00a0well\u2014and,\u00a0crucially,\u00a0because\u00a0I\u00a0don\u2019t\u00a0spend\u00a0any\u00a0time\ndebugging.\nIn\u00a0my\u00a0definitions,\u00a0I\u00a0use\u00a0the\u00a0phrase\u00a0\u201cobservable\u00a0behavior.\u201d\u00a0This\u00a0is\u00a0a\u00a0deliberately\u00a0loose\nterm,\u00a0indicating\u00a0that\u00a0the\u00a0code\u00a0should,\u00a0overall,\u00a0do\u00a0just\u00a0the\u00a0same\u00a0things\u00a0it\u00a0did\u00a0before\u00a0I\nstarted.\u00a0It\u00a0doesn\u2019t\u00a0mean\u00a0it\u00a0will\u00a0work\u00a0exactly\u00a0the\u00a0same\u2014for\u00a0example,\u00a0Extract\u00a0Function\n(106)\u00a0will\u00a0alter\u00a0the\u00a0call\u00a0stack,\u00a0so\u00a0performance\u00a0characteristics\u00a0might\u00a0change\u2014but\u00a0nothing\nshould\u00a0change\u00a0that\u00a0the\u00a0user\u00a0should\u00a0care\u00a0about.\u00a0In\u00a0particular,\u00a0interfaces\u00a0to\u00a0modules\noften\u00a0change\u00a0due\u00a0to\u00a0such\u00a0refactorings\u00a0as\u00a0Change\u00a0Function\u00a0Declaration\u00a0(124)\u00a0and\u00a0Move\nFunction\u00a0(198).\u00a0Any\u00a0bugs\u00a0that\u00a0I\u00a0notice\u00a0during\u00a0refactoring\u00a0should\u00a0still\u00a0be\u00a0present\u00a0after\nrefactoring\u00a0(though\u00a0I\u00a0can\u00a0fix\u00a0latent\u00a0bugs\u00a0that\u00a0nobody\u00a0has\u00a0observed\u00a0yet).\nRefactoring\u00a0is\u00a0very\u00a0similar\u00a0to\u00a0performance\u00a0optimization,\u00a0as\u00a0both\u00a0involve\u00a0carrying\u00a0out\ncode\u00a0manipulations\u00a0that\u00a0don\u2019t\u00a0change\u00a0the\u00a0overall\u00a0functionality\u00a0of\u00a0the\u00a0program.\u00a0The\ndifference\u00a0is\u00a0the\u00a0purpose:\u00a0Refactoring\u00a0is\u00a0always\u00a0done\u00a0to\u00a0make\u00a0the\u00a0code\u00a0\u201ceasier\u00a0to\nunderstand\u00a0and\u00a0cheaper\u00a0to\u00a0modify.\u201d\u00a0This\u00a0might\u00a0speed\u00a0things\u00a0up\u00a0or\u00a0slow\u00a0things\u00a0down.\nWith\u00a0performance\u00a0optimization,\u00a0I\u00a0only\u00a0care\u00a0about\u00a0speeding\u00a0up\u00a0the\u00a0program,\u00a0and\u00a0am\nprepared\u00a0to\u00a0end\u00a0up\u00a0with\u00a0code\u00a0that\u00a0is\u00a0harder\u00a0to\u00a0work\u00a0with\u00a0if\u00a0I\u00a0really\u00a0need\u00a0that\u00a0improved\nperformance.\nTHE TWO HATS\nKent\u00a0Beck\u00a0came\u00a0up\u00a0with\u00a0a\u00a0metaphor\u00a0of\u00a0the\u00a0two\u00a0hats.\u00a0When\u00a0I\u00a0use\u00a0refactoring\u00a0to\u00a0develop\nsoftware,\u00a0I\u00a0divide\u00a0my\u00a0time\u00a0between\u00a0two\u00a0distinct\u00a0activities:\u00a0adding\u00a0functionality\u00a0and\nrefactoring.\u00a0When\u00a0I\u00a0add\u00a0functionality,\u00a0I\u00a0shouldn\u2019t\u00a0be\u00a0changing\u00a0existing\u00a0code\u037e\u00a0I\u2019m\u00a0just\nadding\u00a0new\u00a0capabilities.\u00a0I\u00a0measure\u00a0my\u00a0progress\u00a0by\u00a0adding\u00a0tests\u00a0and\u00a0getting\u00a0the\u00a0tests\u00a0to\nwork.\u00a0When\u00a0I\u00a0refactor,\u00a0I\u00a0make\u00a0a\u00a0point\u00a0of\u00a0not\u00a0adding\u00a0functionality\u037e\u00a0I\u00a0only\u00a0restructure\u00a0the\ncode.\u00a0I\u00a0don\u2019t\u00a0add\u00a0any\u00a0tests\u00a0(unless\u00a0I\u00a0find\u00a0a\u00a0case\u00a0I\u00a0missed\u00a0earlier)\u037e\u00a0I\u00a0only\u00a0change\u00a0tests\nwww.EBooksWorld.ir\n", "page": 57, "type": "text", "section": "Page 57"}
{"text": "when\u00a0I\u00a0have\u00a0to\u00a0accommodate\u00a0a\u00a0change\u00a0in\u00a0an\u00a0interface.\nAs\u00a0I\u00a0develop\u00a0software,\u00a0I\u00a0find\u00a0myself\u00a0swapping\u00a0hats\u00a0frequently.\u00a0I\u00a0start\u00a0by\u00a0trying\u00a0to\u00a0add\u00a0a\nnew\u00a0capability,\u00a0then\u00a0I\u00a0realize\u00a0this\u00a0would\u00a0be\u00a0much\u00a0easier\u00a0if\u00a0the\u00a0code\u00a0were\u00a0structured\ndifferently.\u00a0So\u00a0I\u00a0swap\u00a0hats\u00a0and\u00a0refactor\u00a0for\u00a0a\u00a0while.\u00a0Once\u00a0the\u00a0code\u00a0is\u00a0better\u00a0structured,\u00a0I\nswap\u00a0hats\u00a0back\u00a0and\u00a0add\u00a0the\u00a0new\u00a0capability.\u00a0Once\u00a0I\u00a0get\u00a0the\u00a0new\u00a0capability\u00a0working,\u00a0I\nrealize\u00a0I\u00a0coded\u00a0it\u00a0in\u00a0a\u00a0way\u00a0that\u2019s\u00a0awkward\u00a0to\u00a0understand,\u00a0so\u00a0I\u00a0swap\u00a0hats\u00a0again\u00a0and\nrefactor.\u00a0All\u00a0this\u00a0might\u00a0take\u00a0only\u00a0ten\u00a0minutes,\u00a0but\u00a0during\u00a0this\u00a0time\u00a0I\u2019m\u00a0always\u00a0aware\u00a0of\nwhich\u00a0hat\u00a0I\u2019m\u00a0wearing\u00a0and\u00a0the\u00a0subtle\u00a0difference\u00a0that\u00a0makes\u00a0to\u00a0how\u00a0I\u00a0program.\nWHY SHOULD WE REFACTOR?\nI\u00a0don\u2019t\u00a0want\u00a0to\u00a0claim\u00a0refactoring\u00a0is\u00a0the\u00a0cure\u00a0for\u00a0all\u00a0software\u00a0ills.\u00a0It\u00a0is\u00a0no\u00a0\u201csilver\u00a0bullet.\u201d\nYet\u00a0it\u00a0is\u00a0a\u00a0valuable\u00a0tool\u2014a\u00a0pair\u00a0of\u00a0silver\u00a0pliers\u00a0that\u00a0helps\u00a0you\u00a0keep\u00a0a\u00a0good\u00a0grip\u00a0on\u00a0your\ncode.\u00a0Refactoring\u00a0is\u00a0a\u00a0tool\u00a0that\u00a0can\u2014and\u00a0should\u2014be\u00a0used\u00a0for\u00a0several\u00a0purposes.\nRefactoring Improves the Design of Software\nWithout\u00a0refactoring,\u00a0the\u00a0internal\u00a0design\u2014the\u00a0architecture\u2014of\u00a0software\u00a0tends\u00a0to\u00a0decay.\nAs\u00a0people\u00a0change\u00a0code\u00a0to\u00a0achieve\u00a0short\u00adterm\u00a0goals,\u00a0often\u00a0without\u00a0a\u00a0full\u00a0comprehension\nof\u00a0the\u00a0architecture,\u00a0the\u00a0code\u00a0loses\u00a0its\u00a0structure.\u00a0It\u00a0becomes\u00a0harder\u00a0for\u00a0me\u00a0to\u00a0see\u00a0the\ndesign\u00a0by\u00a0reading\u00a0the\u00a0code.\u00a0Loss\u00a0of\u00a0the\u00a0structure\u00a0of\u00a0code\u00a0has\u00a0a\u00a0cumulative\u00a0effect.\u00a0The\nharder\u00a0it\u00a0is\u00a0to\u00a0see\u00a0the\u00a0design\u00a0in\u00a0the\u00a0code,\u00a0the\u00a0harder\u00a0it\u00a0is\u00a0for\u00a0me\u00a0to\u00a0preserve\u00a0it,\u00a0and\u00a0the\nmore\u00a0rapidly\u00a0it\u00a0decays.\u00a0Regular\u00a0refactoring\u00a0helps\u00a0keep\u00a0the\u00a0code\u00a0in\u00a0shape.\nPoorly\u00a0designed\u00a0code\u00a0usually\u00a0takes\u00a0more\u00a0code\u00a0to\u00a0do\u00a0the\u00a0same\u00a0things,\u00a0often\u00a0because\u00a0the\ncode\u00a0quite\u00a0literally\u00a0does\u00a0the\u00a0same\u00a0thing\u00a0in\u00a0several\u00a0places.\u00a0Thus\u00a0an\u00a0important\u00a0aspect\u00a0of\nimproving\u00a0design\u00a0is\u00a0to\u00a0eliminate\u00a0duplicated\u00a0code.\u00a0It\u2019s\u00a0not\u00a0that\u00a0reducing\u00a0the\u00a0amount\u00a0of\ncode\u00a0will\u00a0make\u00a0the\u00a0system\u00a0run\u00a0any\u00a0faster\u2014the\u00a0effect\u00a0on\u00a0the\u00a0footprint\u00a0of\u00a0the\u00a0programs\nrarely\u00a0is\u00a0significant.\u00a0Reducing\u00a0the\u00a0amount\u00a0of\u00a0code\u00a0does,\u00a0however,\u00a0make\u00a0a\u00a0big\u00a0difference\nin\u00a0modification\u00a0of\u00a0the\u00a0code.\u00a0The\u00a0more\u00a0code\u00a0there\u00a0is,\u00a0the\u00a0harder\u00a0it\u00a0is\u00a0to\u00a0modify\u00a0correctly.\nThere\u2019s\u00a0more\u00a0code\u00a0for\u00a0me\u00a0to\u00a0understand.\u00a0I\u00a0change\u00a0this\u00a0bit\u00a0of\u00a0code\u00a0here,\u00a0but\u00a0the\u00a0system\ndoesn\u2019t\u00a0do\u00a0what\u00a0I\u00a0expect\u00a0because\u00a0I\u00a0didn\u2019t\u00a0change\u00a0that\u00a0bit\u00a0over\u00a0there\u00a0that\u00a0does\u00a0much\u00a0the\nsame\u00a0thing\u00a0in\u00a0a\u00a0slightly\u00a0different\u00a0context.\u00a0By\u00a0eliminating\u00a0duplication,\u00a0I\u00a0ensure\u00a0that\u00a0the\ncode\u00a0says\u00a0everything\u00a0once\u00a0and\u00a0only\u00a0once,\u00a0which\u00a0is\u00a0the\u00a0essence\u00a0of\u00a0good\u00a0design.\nRefactoring Makes Software Easier to Understand\nProgramming\u00a0is\u00a0in\u00a0many\u00a0ways\u00a0a\u00a0conversation\u00a0with\u00a0a\u00a0computer.\u00a0I\u00a0write\u00a0code\u00a0that\u00a0tells\nthe\u00a0computer\u00a0what\u00a0to\u00a0do,\u00a0and\u00a0it\u00a0responds\u00a0by\u00a0doing\u00a0exactly\u00a0what\u00a0I\u00a0tell\u00a0it.\u00a0In\u00a0time,\u00a0I\u00a0close\nthe\u00a0gap\u00a0between\u00a0what\u00a0I\u00a0want\u00a0it\u00a0to\u00a0do\u00a0and\u00a0what\u00a0I\u00a0tell\u00a0it\u00a0to\u00a0do.\u00a0Programming\u00a0is\u00a0all\u00a0about\nwww.EBooksWorld.ir\n", "page": 58, "type": "text", "section": "Page 58"}
{"text": "saying\u00a0exactly\u00a0what\u00a0I\u00a0want.\u00a0But\u00a0there\u00a0are\u00a0likely\u00a0to\u00a0be\u00a0other\u00a0users\u00a0of\u00a0my\u00a0source\u00a0code.\u00a0In\u00a0a\nfew\u00a0months,\u00a0a\u00a0human\u00a0will\u00a0try\u00a0to\u00a0read\u00a0my\u00a0code\u00a0to\u00a0make\u00a0some\u00a0changes.\u00a0That\u00a0user,\u00a0who\nwe\u00a0often\u00a0forget,\u00a0is\u00a0actually\u00a0the\u00a0most\u00a0important.\u00a0Who\u00a0cares\u00a0if\u00a0the\u00a0computer\u00a0takes\u00a0a\u00a0few\nmore\u00a0cycles\u00a0to\u00a0compile\u00a0something?\u00a0Yet\u00a0it\u00a0does\u00a0matter\u00a0if\u00a0it\u00a0takes\u00a0a\u00a0programmer\u00a0a\u00a0week\u00a0to\nmake\u00a0a\u00a0change\u00a0that\u00a0would\u00a0have\u00a0taken\u00a0only\u00a0an\u00a0hour\u00a0with\u00a0proper\u00a0understanding\u00a0of\u00a0my\ncode.\nThe\u00a0trouble\u00a0is\u00a0that\u00a0when\u00a0I\u2019m\u00a0trying\u00a0to\u00a0get\u00a0the\u00a0program\u00a0to\u00a0work,\u00a0I\u2019m\u00a0not\u00a0thinking\u00a0about\nthat\u00a0future\u00a0developer.\u00a0It\u00a0takes\u00a0a\u00a0change\u00a0of\u00a0rhythm\u00a0to\u00a0make\u00a0the\u00a0code\u00a0easier\u00a0to\nunderstand.\u00a0Refactoring\u00a0helps\u00a0me\u00a0make\u00a0my\u00a0code\u00a0more\u00a0readable.\u00a0Before\u00a0refactoring,\u00a0I\nhave\u00a0code\u00a0that\u00a0works\u00a0but\u00a0is\u00a0not\u00a0ideally\u00a0structured.\u00a0A\u00a0little\u00a0time\u00a0spent\u00a0on\u00a0refactoring\u00a0can\nmake\u00a0the\u00a0code\u00a0better\u00a0communicate\u00a0its\u00a0purpose\u2014say\u00a0more\u00a0clearly\u00a0what\u00a0I\u00a0want.\nI\u2019m\u00a0not\u00a0necessarily\u00a0being\u00a0altruistic\u00a0about\u00a0this.\u00a0Often,\u00a0this\u00a0future\u00a0developer\u00a0is\u00a0myself.\nThis\u00a0makes\u00a0refactoring\u00a0even\u00a0more\u00a0important.\u00a0I\u2019m\u00a0a\u00a0very\u00a0lazy\u00a0programmer.\u00a0One\u00a0of\u00a0my\nforms\u00a0of\u00a0laziness\u00a0is\u00a0that\u00a0I\u00a0never\u00a0remember\u00a0things\u00a0about\u00a0the\u00a0code\u00a0I\u00a0write.\u00a0Indeed,\u00a0I\ndeliberately\u00a0try\u00a0not\u00a0remember\u00a0anything\u00a0I\u00a0can\u00a0look\u00a0up,\u00a0because\u00a0I\u2019m\u00a0afraid\u00a0my\u00a0brain\u00a0will\nget\u00a0full.\u00a0I\u00a0make\u00a0a\u00a0point\u00a0of\u00a0trying\u00a0to\u00a0put\u00a0everything\u00a0I\u00a0should\u00a0remember\u00a0into\u00a0the\u00a0code\u00a0so\u00a0I\ndon\u2019t\u00a0have\u00a0to\u00a0remember\u00a0it.\u00a0That\u00a0way\u00a0I\u2019m\u00a0less\u00a0worried\u00a0about\u00a0Maudite\u00a0[maudite]\u00a0killing\noff\u00a0my\u00a0brain\u00a0cells.\nRefactoring Helps Me Find Bugs\nHelp\u00a0in\u00a0understanding\u00a0the\u00a0code\u00a0also\u00a0means\u00a0help\u00a0in\u00a0spotting\u00a0bugs.\u00a0I\u00a0admit\u00a0I\u2019m\u00a0not\nterribly\u00a0good\u00a0at\u00a0finding\u00a0bugs.\u00a0Some\u00a0people\u00a0can\u00a0read\u00a0a\u00a0lump\u00a0of\u00a0code\u00a0and\u00a0see\u00a0bugs\u037e\u00a0I\ncannot.\u00a0However,\u00a0I\u00a0find\u00a0that\u00a0if\u00a0I\u00a0refactor\u00a0code,\u00a0I\u00a0work\u00a0deeply\u00a0on\u00a0understanding\u00a0what\u00a0the\ncode\u00a0does,\u00a0and\u00a0I\u00a0put\u00a0that\u00a0new\u00a0understanding\u00a0right\u00a0back\u00a0into\u00a0the\u00a0code.\u00a0By\u00a0clarifying\u00a0the\nstructure\u00a0of\u00a0the\u00a0program,\u00a0I\u00a0clarify\u00a0certain\u00a0assumptions\u00a0I\u2019ve\u00a0made\u2014to\u00a0a\u00a0point\u00a0where\neven\u00a0I\u00a0can\u2019t\u00a0avoid\u00a0spotting\u00a0the\u00a0bugs.\nIt\u00a0reminds\u00a0me\u00a0of\u00a0a\u00a0statement\u00a0Kent\u00a0Beck\u00a0often\u00a0makes\u00a0about\u00a0himself:\u00a0\u201cI\u2019m\u00a0not\u00a0a\u00a0great\nprogrammer\u037e\u00a0I\u2019m\u00a0just\u00a0a\u00a0good\u00a0programmer\u00a0with\u00a0great\u00a0habits.\u201d\u00a0Refactoring\u00a0helps\u00a0me\u00a0be\nmuch\u00a0more\u00a0effective\u00a0at\u00a0writing\u00a0robust\u00a0code.\nRefactoring Helps Me Program Faster\nIn\u00a0the\u00a0end,\u00a0all\u00a0the\u00a0earlier\u00a0points\u00a0come\u00a0down\u00a0to\u00a0this:\u00a0Refactoring\u00a0helps\u00a0me\u00a0develop\u00a0code\nmore\u00a0quickly.\nThis\u00a0sounds\u00a0counterintuitive.\u00a0When\u00a0I\u00a0talk\u00a0about\u00a0refactoring,\u00a0people\u00a0can\u00a0easily\u00a0see\u00a0that\nit\u00a0improves\u00a0quality.\u00a0Better\u00a0internal\u00a0design,\u00a0readability,\u00a0reducing\u00a0bugs\u2014all\u00a0these\nwww.EBooksWorld.ir\n", "page": 59, "type": "text", "section": "Page 59"}
{"text": "improve\u00a0quality.\u00a0But\u00a0doesn\u2019t\u00a0the\u00a0time\u00a0I\u00a0spend\u00a0on\u00a0refactoring\u00a0reduce\u00a0the\u00a0speed\u00a0of\ndevelopment?\nWhen\u00a0I\u00a0talk\u00a0to\u00a0software\u00a0developers\u00a0who\u00a0have\u00a0been\u00a0working\u00a0on\u00a0a\u00a0system\u00a0for\u00a0a\u00a0while,\u00a0I\noften\u00a0hear\u00a0that\u00a0they\u00a0were\u00a0able\u00a0to\u00a0make\u00a0progress\u00a0rapidly\u00a0at\u00a0first,\u00a0but\u00a0now\u00a0it\u00a0takes\u00a0much\nlonger\u00a0to\u00a0add\u00a0new\u00a0features.\u00a0Every\u00a0new\u00a0feature\u00a0requires\u00a0more\u00a0and\u00a0more\u00a0time\u00a0to\nunderstand\u00a0how\u00a0to\u00a0fit\u00a0it\u00a0into\u00a0the\u00a0existing\u00a0code\u00a0base,\u00a0and\u00a0once\u00a0it\u2019s\u00a0added,\u00a0bugs\u00a0often\u00a0crop\nup\u00a0that\u00a0take\u00a0even\u00a0longer\u00a0to\u00a0fix.\u00a0The\u00a0code\u00a0base\u00a0starts\u00a0looking\u00a0like\u00a0a\u00a0series\u00a0of\u00a0patches\ncovering\u00a0patches,\u00a0and\u00a0it\u00a0takes\u00a0an\u00a0exercise\u00a0in\u00a0archaeology\u00a0to\u00a0figure\u00a0out\u00a0how\u00a0things\u00a0work.\nThis\u00a0burden\u00a0slows\u00a0down\u00a0adding\u00a0new\u00a0features\u2014to\u00a0the\u00a0point\u00a0that\u00a0developers\u00a0wish\u00a0they\ncould\u00a0start\u00a0again\u00a0from\u00a0a\u00a0blank\u00a0slate.\nI\u00a0can\u00a0visualize\u00a0this\u00a0state\u00a0of\u00a0affairs\u00a0with\u00a0the\u00a0following\u00a0pseudograph:\nBut\u00a0some\u00a0teams\u00a0report\u00a0a\u00a0different\u00a0experience.\u00a0They\u00a0find\u00a0they\u00a0can\u00a0add\u00a0new\u00a0features\nfaster\u00a0because\u00a0they\u00a0can\u00a0leverage\u00a0the\u00a0existing\u00a0things\u00a0by\u00a0quickly\u00a0building\u00a0on\u00a0what\u2019s\nalready\u00a0there.\nwww.EBooksWorld.ir\n", "page": 60, "type": "text", "section": "Page 60"}
{"text": "The\u00a0difference\u00a0between\u00a0these\u00a0two\u00a0is\u00a0the\u00a0internal\u00a0quality\u00a0of\u00a0the\u00a0software.\u00a0Software\u00a0with\u00a0a\ngood\u00a0internal\u00a0design\u00a0allows\u00a0me\u00a0to\u00a0easily\u00a0find\u00a0how\u00a0and\u00a0where\u00a0I\u00a0need\u00a0to\u00a0make\u00a0changes\u00a0to\nadd\u00a0a\u00a0new\u00a0feature.\u00a0Good\u00a0modularity\u00a0allows\u00a0me\u00a0to\u00a0only\u00a0have\u00a0to\u00a0understand\u00a0a\u00a0small\nsubset\u00a0of\u00a0the\u00a0code\u00a0base\u00a0to\u00a0make\u00a0a\u00a0change.\u00a0If\u00a0the\u00a0code\u00a0is\u00a0clear,\u00a0I\u2019m\u00a0less\u00a0likely\u00a0to\u00a0introduce\na\u00a0bug,\u00a0and\u00a0if\u00a0I\u00a0do,\u00a0the\u00a0debugging\u00a0effort\u00a0is\u00a0much\u00a0easier.\u00a0Done\u00a0well,\u00a0my\u00a0code\u00a0base\u00a0turns\ninto\u00a0a\u00a0platform\u00a0for\u00a0building\u00a0new\u00a0features\u00a0for\u00a0its\u00a0domain.\nI\u00a0refer\u00a0to\u00a0this\u00a0effect\u00a0as\u00a0the\u00a0Design\u00a0Stamina\u00a0Hypothesis\u00a0[mf\u00addsh]:\u00a0By\u00a0putting\u00a0our\u00a0effort\ninto\u00a0a\u00a0good\u00a0internal\u00a0design,\u00a0we\u00a0increase\u00a0the\u00a0stamina\u00a0of\u00a0the\u00a0software\u00a0effort,\u00a0allowing\u00a0us\nto\u00a0go\u00a0faster\u00a0for\u00a0longer.\u00a0I\u00a0can\u2019t\u00a0prove\u00a0that\u00a0this\u00a0is\u00a0the\u00a0case,\u00a0which\u00a0is\u00a0why\u00a0I\u00a0refer\u00a0to\u00a0it\u00a0as\u00a0a\nhypothesis.\u00a0But\u00a0it\u00a0explains\u00a0my\u00a0experience,\u00a0together\u00a0with\u00a0the\u00a0experience\u00a0of\u00a0hundreds\u00a0of\ngreat\u00a0programmers\u00a0that\u00a0I\u2019ve\u00a0got\u00a0to\u00a0know\u00a0over\u00a0my\u00a0career.\nTwenty\u00a0years\u00a0ago,\u00a0the\u00a0conventional\u00a0wisdom\u00a0was\u00a0that\u00a0to\u00a0get\u00a0this\u00a0kind\u00a0of\u00a0good\u00a0design,\u00a0it\nhad\u00a0to\u00a0be\u00a0completed\u00a0before\u00a0starting\u00a0to\u00a0program\u2014because\u00a0once\u00a0we\u00a0wrote\u00a0the\u00a0code,\u00a0we\ncould\u00a0only\u00a0face\u00a0decay.\u00a0Refactoring\u00a0changes\u00a0this\u00a0picture.\u00a0We\u00a0now\u00a0know\u00a0we\u00a0can\u00a0improve\nthe\u00a0design\u00a0of\u00a0existing\u00a0code\u2014so\u00a0we\u00a0can\u00a0form\u00a0and\u00a0improve\u00a0a\u00a0design\u00a0over\u00a0time,\u00a0even\u00a0as\u00a0the\nneeds\u00a0of\u00a0the\u00a0program\u00a0change.\u00a0Since\u00a0it\u00a0is\u00a0very\u00a0difficult\u00a0to\u00a0do\u00a0a\u00a0good\u00a0design\u00a0up\u00a0front,\nrefactoring\u00a0becomes\u00a0vital\u00a0to\u00a0achieving\u00a0that\u00a0virtuous\u00a0path\u00a0of\u00a0rapid\u00a0functionality.\nWHEN SHOULD WE REFACTOR?\nRefactoring\u00a0is\u00a0something\u00a0I\u00a0do\u00a0every\u00a0hour\u00a0I\u00a0program.\u00a0I\u00a0have\u00a0noticed\u00a0a\u00a0number\u00a0of\u00a0ways\u00a0it\nfits\u00a0into\u00a0my\u00a0workflow.\nwww.EBooksWorld.ir\n", "page": 61, "type": "text", "section": "Page 61"}
{"text": "The\u00a0Rule\u00a0of\u00a0Three\nHere\u2019s\u00a0a\u00a0guideline\u00a0Don\u00a0Roberts\u00a0gave\u00a0me:\u00a0The\u00a0first\u00a0time\u00a0you\u00a0do\u00a0something,\nyou\u00a0just\u00a0do\u00a0it.\u00a0The\u00a0second\u00a0time\u00a0you\u00a0do\u00a0something\u00a0similar,\u00a0you\u00a0wince\u00a0at\u00a0the\nduplication,\u00a0but\u00a0you\u00a0do\u00a0the\u00a0duplicate\u00a0thing\u00a0anyway.\u00a0The\u00a0third\u00a0time\u00a0you\u00a0do\nsomething\u00a0similar,\u00a0you\u00a0refactor.\nOr\u00a0for\u00a0those\u00a0who\u00a0like\u00a0baseball:\u00a0Three\u00a0strikes,\u00a0then\u00a0you\u00a0refactor.\nPreparatory Refactoring\u2014Making It Easier to Add a Feature\nThe\u00a0best\u00a0time\u00a0to\u00a0refactor\u00a0is\u00a0just\u00a0before\u00a0I\u00a0need\u00a0to\u00a0add\u00a0a\u00a0new\u00a0feature\u00a0to\u00a0the\u00a0code\u00a0base.\u00a0As\u00a0I\ndo\u00a0this,\u00a0I\u00a0look\u00a0at\u00a0the\u00a0existing\u00a0code\u00a0and,\u00a0often,\u00a0see\u00a0that\u00a0if\u00a0it\u00a0were\u00a0structured\u00a0a\u00a0little\ndifferently,\u00a0my\u00a0work\u00a0would\u00a0be\u00a0much\u00a0easier.\u00a0Perhaps\u00a0there\u2019s\u00a0function\u00a0that\u00a0does\u00a0almost\nall\u00a0that\u00a0I\u00a0need,\u00a0but\u00a0has\u00a0some\u00a0literal\u00a0values\u00a0that\u00a0conflict\u00a0with\u00a0my\u00a0needs.\u00a0Without\nrefactoring\u00a0I\u00a0might\u00a0copy\u00a0the\u00a0function\u00a0and\u00a0change\u00a0those\u00a0values.\u00a0But\u00a0that\u00a0leads\u00a0to\nduplicated\u00a0code\u2014if\u00a0I\u00a0need\u00a0to\u00a0change\u00a0it\u00a0in\u00a0the\u00a0future,\u00a0I\u2019ll\u00a0have\u00a0to\u00a0change\u00a0both\u00a0spots\u00a0(and,\nworse,\u00a0find\u00a0them).\u00a0And\u00a0copy\u00adpaste\u00a0won\u2019t\u00a0help\u00a0me\u00a0if\u00a0I\u00a0need\u00a0to\u00a0make\u00a0a\u00a0similar\u00a0variation\nfor\u00a0a\u00a0new\u00a0feature\u00a0in\u00a0the\u00a0future.\u00a0So\u00a0with\u00a0my\u00a0refactoring\u00a0hat\u00a0on,\u00a0I\u00a0use\u00a0Parameterize\nFunction\u00a0(310).\u00a0Once\u00a0I\u2019ve\u00a0done\u00a0that,\u00a0all\u00a0I\u00a0have\u00a0to\u00a0do\u00a0is\u00a0call\u00a0the\u00a0function\u00a0with\u00a0the\nparameters\u00a0I\u00a0need.\n\u201cIt\u2019s\u00a0like\u00a0I\u00a0want\u00a0to\u00a0go\u00a0100\u00a0miles\u00a0east\u00a0but\u00a0instead\u00a0of\u00a0just\u00a0traipsing\u00a0through\u00a0the\u00a0woods,\nI\u2019m\u00a0going\u00a0to\u00a0drive\u00a020\u00a0miles\u00a0north\u00a0to\u00a0the\u00a0highway\u00a0and\u00a0then\u00a0I\u2019m\u00a0going\u00a0to\u00a0go\u00a0100\u00a0miles\neast\u00a0at\u00a0three\u00a0times\u00a0the\u00a0speed\u00a0I\u00a0could\u00a0have\u00a0if\u00a0I\u00a0just\u00a0went\u00a0straight\u00a0there.\u00a0When\u00a0people\u00a0are\npushing\u00a0you\u00a0to\u00a0just\u00a0go\u00a0straight\u00a0there,\u00a0sometimes\u00a0you\u00a0need\u00a0to\u00a0say,\u00a0\u2018Wait,\u00a0I\u00a0need\u00a0to\ncheck\u00a0the\u00a0map\u00a0and\u00a0find\u00a0the\u00a0quickest\u00a0route.\u2019\u00a0The\u00a0preparatory\u00a0refactoring\u00a0does\u00a0that\u00a0for\nme.\u201d\n\u2014\u00a0Jessica\u00a0Kerr,\nhttps://martinfowler.com/articles/preparatory\u00adrefactoring\u00ad\nexample.html\nThe\u00a0same\u00a0happens\u00a0when\u00a0fixing\u00a0a\u00a0bug.\u00a0Once\u00a0I\u2019ve\u00a0found\u00a0the\u00a0cause\u00a0of\u00a0the\u00a0problem,\u00a0I\u00a0see\nthat\u00a0it\u00a0would\u00a0be\u00a0much\u00a0easier\u00a0to\u00a0fix\u00a0should\u00a0I\u00a0unify\u00a0the\u00a0three\u00a0bits\u00a0of\u00a0copied\u00a0code\u00a0causing\nthe\u00a0error\u00a0into\u00a0one.\u00a0Or\u00a0perhaps\u00a0separating\u00a0some\u00a0update\u00a0logic\u00a0from\u00a0queries\u00a0will\u00a0make\u00a0it\neasier\u00a0to\u00a0avoid\u00a0the\u00a0tangling\u00a0that\u2019s\u00a0causing\u00a0the\u00a0error.\u00a0By\u00a0refactoring\u00a0to\u00a0improve\u00a0the\nsituation,\u00a0I\u00a0also\u00a0increase\u00a0the\u00a0chances\u00a0that\u00a0the\u00a0bug\u00a0will\u00a0stay\u00a0fixed,\u00a0and\u00a0reduce\u00a0the\nchances\u00a0that\u00a0others\u00a0will\u00a0appear\u00a0in\u00a0the\u00a0same\u00a0crevices\u00a0of\u00a0the\u00a0code.\nComprehension Refactoring: Making Code Easier to Understand\nwww.EBooksWorld.ir\n", "page": 62, "type": "text", "section": "Page 62"}
{"text": "Comprehension Refactoring: Making Code Easier to Understand\nBefore\u00a0I\u00a0can\u00a0change\u00a0some\u00a0code,\u00a0I\u00a0need\u00a0to\u00a0understand\u00a0what\u00a0it\u00a0does.\u00a0This\u00a0code\u00a0may\u00a0have\nbeen\u00a0written\u00a0by\u00a0me\u00a0or\u00a0by\u00a0someone\u00a0else.\u00a0Whenever\u00a0I\u00a0have\u00a0to\u00a0think\u00a0to\u00a0understand\u00a0what\nthe\u00a0code\u00a0is\u00a0doing,\u00a0I\u00a0ask\u00a0myself\u00a0if\u00a0I\u00a0can\u00a0refactor\u00a0the\u00a0code\u00a0to\u00a0make\u00a0that\u00a0understanding\nmore\u00a0immediately\u00a0apparent.\u00a0I\u00a0may\u00a0be\u00a0looking\u00a0at\u00a0some\u00a0conditional\u00a0logic\u00a0that\u2019s\nstructured\u00a0awkwardly.\u00a0I\u00a0may\u00a0have\u00a0wanted\u00a0to\u00a0use\u00a0some\u00a0existing\u00a0functions\u00a0but\u00a0spent\nseveral\u00a0minutes\u00a0figuring\u00a0out\u00a0what\u00a0they\u00a0did\u00a0because\u00a0they\u00a0were\u00a0named\u00a0badly.\nAt\u00a0that\u00a0point\u00a0I\u00a0have\u00a0some\u00a0understanding\u00a0in\u00a0my\u00a0head,\u00a0but\u00a0my\u00a0head\u00a0isn\u2019t\u00a0a\u00a0very\u00a0good\nrecord\u00a0of\u00a0such\u00a0details.\u00a0As\u00a0Ward\u00a0Cunningham\u00a0puts\u00a0it,\u00a0by\u00a0refactoring\u00a0I\u00a0move\u00a0the\nunderstanding\u00a0from\u00a0my\u00a0head\u00a0into\u00a0the\u00a0code\u00a0itself.\u00a0I\u00a0then\u00a0test\u00a0that\u00a0understanding\u00a0by\nrunning\u00a0the\u00a0software\u00a0to\u00a0see\u00a0if\u00a0it\u00a0still\u00a0works.\u00a0If\u00a0I\u00a0move\u00a0my\u00a0understanding\u00a0into\u00a0the\u00a0code,\u00a0it\nwill\u00a0be\u00a0preserved\u00a0longer\u00a0and\u00a0be\u00a0visible\u00a0to\u00a0my\u00a0colleagues.\nThat\u00a0doesn\u2019t\u00a0just\u00a0help\u00a0me\u00a0in\u00a0the\u00a0future\u2014it\u00a0often\u00a0helps\u00a0me\u00a0right\u00a0now.\u00a0Early\u00a0on,\u00a0I\u00a0do\ncomprehension\u00a0refactoring\u00a0on\u00a0little\u00a0details.\u00a0I\u00a0rename\u00a0a\u00a0couple\u00a0variables\u00a0now\u00a0that\u00a0I\nunderstand\u00a0what\u00a0they\u00a0are,\u00a0or\u00a0I\u00a0chop\u00a0a\u00a0long\u00a0function\u00a0into\u00a0smaller\u00a0parts.\u00a0Then,\u00a0as\u00a0the\ncode\u00a0gets\u00a0clearer,\u00a0I\u00a0find\u00a0I\u00a0can\u00a0see\u00a0things\u00a0about\u00a0the\u00a0design\u00a0that\u00a0I\u00a0could\u00a0not\u00a0see\u00a0before.\nHad\u00a0I\u00a0not\u00a0changed\u00a0the\u00a0code,\u00a0I\u00a0probably\u00a0never\u00a0would\u00a0have\u00a0seen\u00a0these\u00a0things,\u00a0because\u00a0I\u2019m\njust\u00a0not\u00a0clever\u00a0enough\u00a0to\u00a0visualize\u00a0all\u00a0these\u00a0changes\u00a0in\u00a0my\u00a0head.\u00a0Ralph\u00a0Johnson\ndescribes\u00a0these\u00a0early\u00a0refactorings\u00a0as\u00a0wiping\u00a0the\u00a0dirt\u00a0off\u00a0a\u00a0window\u00a0so\u00a0you\u00a0can\u00a0see\nbeyond.\u00a0When\u00a0I\u2019m\u00a0studying\u00a0code,\u00a0refactoring\u00a0leads\u00a0me\u00a0to\u00a0higher\u00a0levels\u00a0of\nunderstanding\u00a0that\u00a0I\u00a0would\u00a0otherwise\u00a0miss.\u00a0Those\u00a0who\u00a0dismiss\u00a0comprehension\nrefactoring\u00a0as\u00a0useless\u00a0fiddling\u00a0with\u00a0the\u00a0code\u00a0don\u2019t\u00a0realize\u00a0that\u00a0by\u00a0foregoing\u00a0it\u00a0they\u00a0never\nsee\u00a0the\u00a0opportunities\u00a0hidden\u00a0behind\u00a0the\u00a0confusion.\nLitter-Pickup Refactoring\nA\u00a0variation\u00a0of\u00a0comprehension\u00a0refactoring\u00a0is\u00a0when\u00a0I\u00a0understand\u00a0what\u00a0the\u00a0code\u00a0is\u00a0doing,\nbut\u00a0realize\u00a0that\u00a0it\u2019s\u00a0doing\u00a0it\u00a0badly.\u00a0The\u00a0logic\u00a0is\u00a0unnecessarily\u00a0convoluted,\u00a0or\u00a0I\u00a0see\nfunctions\u00a0that\u00a0are\u00a0nearly\u00a0identical\u00a0and\u00a0can\u00a0be\u00a0replaced\u00a0by\u00a0a\u00a0single\u00a0parameterized\nfunction.\u00a0There\u2019s\u00a0a\u00a0bit\u00a0of\u00a0a\u00a0tradeoff\u00a0here.\u00a0I\u00a0don\u2019t\u00a0want\u00a0to\u00a0spend\u00a0a\u00a0lot\u00a0of\u00a0time\u00a0distracted\nfrom\u00a0the\u00a0task\u00a0I\u2019m\u00a0currently\u00a0doing,\u00a0but\u00a0I\u00a0also\u00a0don\u2019t\u00a0want\u00a0to\u00a0leave\u00a0the\u00a0trash\u00a0lying\u00a0around\nand\u00a0getting\u00a0in\u00a0the\u00a0way\u00a0of\u00a0future\u00a0changes.\u00a0If\u00a0it\u2019s\u00a0easy\u00a0to\u00a0change,\u00a0I\u2019ll\u00a0do\u00a0it\u00a0right\u00a0away.\u00a0If\u00a0it\u2019s\na\u00a0bit\u00a0more\u00a0effort\u00a0to\u00a0fix,\u00a0I\u00a0might\u00a0make\u00a0a\u00a0note\u00a0of\u00a0it\u00a0and\u00a0fix\u00a0it\u00a0when\u00a0I\u2019m\u00a0done\u00a0with\u00a0my\nimmediate\u00a0task.\nSometimes,\u00a0of\u00a0course,\u00a0it\u2019s\u00a0going\u00a0to\u00a0take\u00a0a\u00a0few\u00a0hours\u00a0to\u00a0fix,\u00a0and\u00a0I\u00a0have\u00a0more\u00a0urgent\nthings\u00a0to\u00a0do.\u00a0Even\u00a0then,\u00a0however,\u00a0it\u2019s\u00a0usually\u00a0worthwhile\u00a0to\u00a0make\u00a0it\u00a0a\u00a0little\u00a0bit\u00a0better.\u00a0As\nthe\u00a0old\u00a0camping\u00a0adage\u00a0says,\u00a0always\u00a0leave\u00a0the\u00a0camp\u00a0site\u00a0cleaner\u00a0than\u00a0when\u00a0you\u00a0found\u00a0it.\nwww.EBooksWorld.ir\n", "page": 63, "type": "text", "section": "Page 63"}
{"text": "If\u00a0I\u00a0make\u00a0it\u00a0a\u00a0little\u00a0better\u00a0each\u00a0time\u00a0I\u00a0pass\u00a0through\u00a0the\u00a0code,\u00a0over\u00a0time\u00a0it\u00a0will\u00a0get\u00a0fixed.\nThe\u00a0nice\u00a0thing\u00a0about\u00a0refactoring\u00a0is\u00a0that\u00a0I\u00a0don\u2019t\u00a0break\u00a0the\u00a0code\u00a0with\u00a0each\u00a0small\u00a0step\u2014so,\nsometimes,\u00a0it\u00a0takes\u00a0months\u00a0to\u00a0complete\u00a0the\u00a0job\u00a0but\u00a0the\u00a0code\u00a0is\u00a0never\u00a0broken\u00a0even\u00a0when\nI\u2019m\u00a0part\u00a0way\u00a0through\u00a0it.\nPlanned and Opportunistic Refactoring\nThe\u00a0examples\u00a0above\u2014preparatory,\u00a0comprehension,\u00a0litter\u00adpickup\u00a0refactoring\u2014are\u00a0all\nopportunistic.\u00a0I\u00a0don\u2019t\u00a0set\u00a0aside\u00a0time\u00a0at\u00a0the\u00a0beginning\u00a0to\u00a0spend\u00a0on\u00a0refactoring\u2014instead,\u00a0I\ndo\u00a0refactoring\u00a0as\u00a0part\u00a0of\u00a0adding\u00a0a\u00a0feature\u00a0or\u00a0fixing\u00a0a\u00a0bug.\u00a0It\u2019s\u00a0part\u00a0of\u00a0my\u00a0natural\u00a0flow\u00a0of\nprogramming.\u00a0Whether\u00a0I\u2019m\u00a0adding\u00a0a\u00a0feature\u00a0or\u00a0fixing\u00a0a\u00a0bug,\u00a0refactoring\u00a0helps\u00a0me\u00a0do\nthe\u00a0immediate\u00a0task\u00a0and\u00a0also\u00a0sets\u00a0me\u00a0up\u00a0to\u00a0make\u00a0future\u00a0work\u00a0easier.\u00a0This\u00a0is\u00a0an\nimportant\u00a0point\u00a0that\u2019s\u00a0frequently\u00a0missed.\u00a0Refactoring\u00a0isn\u2019t\u00a0an\u00a0activity\u00a0that\u2019s\u00a0separated\nfrom\u00a0programming\u2014any\u00a0more\u00a0than\u00a0you\u00a0set\u00a0aside\u00a0time\u00a0to\u00a0write\u00a0if\u00a0statements.\u00a0I\u00a0don\u2019t\nput\u00a0time\u00a0on\u00a0my\u00a0plans\u00a0to\u00a0do\u00a0refactoring\u037e\u00a0most\u00a0refactoring\u00a0happens\u00a0while\u00a0I\u2019m\u00a0doing\u00a0other\nthings.\n\u00a0You\u00a0have\u00a0to\u00a0refactor\u00a0when\u00a0you\u00a0run\u00a0into\u00a0ugly\u00a0code\u2014but\u00a0excellent\u00a0code\u00a0needs\nplenty\u00a0of\u00a0refactoring\u00a0too.\nIt\u2019s\u00a0also\u00a0a\u00a0common\u00a0error\u00a0to\u00a0see\u00a0refactoring\u00a0as\u00a0something\u00a0people\u00a0do\u00a0to\u00a0fix\u00a0past\u00a0mistakes\nor\u00a0clean\u00a0up\u00a0ugly\u00a0code.\u00a0Certainly\u00a0you\u00a0have\u00a0to\u00a0refactor\u00a0when\u00a0you\u00a0run\u00a0into\u00a0ugly\u00a0code,\u00a0but\nexcellent\u00a0code\u00a0needs\u00a0plenty\u00a0of\u00a0refactoring\u00a0too.\u00a0Whenever\u00a0I\u00a0write\u00a0code,\u00a0I\u2019m\u00a0making\ntradeoffs\u2014how\u00a0much\u00a0do\u00a0I\u00a0need\u00a0to\u00a0parameterize,\u00a0where\u00a0to\u00a0draw\u00a0the\u00a0lines\u00a0between\nfunctions?\u00a0The\u00a0tradeoffs\u00a0I\u00a0made\u00a0correctly\u00a0for\u00a0yesterday\u2019s\u00a0feature\u00a0set\u00a0may\u00a0no\u00a0longer\u00a0be\nthe\u00a0right\u00a0ones\u00a0for\u00a0the\u00a0new\u00a0features\u00a0I\u2019m\u00a0adding\u00a0today.\u00a0The\u00a0advantage\u00a0is\u00a0that\u00a0clean\u00a0code\u00a0is\neasier\u00a0to\u00a0refactor\u00a0when\u00a0I\u00a0need\u00a0to\u00a0change\u00a0those\u00a0tradeoffs\u00a0to\u00a0reflect\u00a0the\u00a0new\u00a0reality.\n\u201cfor\u00a0each\u00a0desired\u00a0change,\u00a0make\u00a0the\u00a0change\u00a0easy\u00a0(warning:\u00a0this\u00a0may\u00a0be\u00a0hard),\u00a0then\nmake\u00a0the\u00a0easy\u00a0change\u201d\n\u2014\u00a0Kent\u00a0Beck,\nhttps://twitter.com/kentbeck/status/250733358307500032\nFor\u00a0a\u00a0long\u00a0time,\u00a0people\u00a0thought\u00a0of\u00a0writing\u00a0software\u00a0as\u00a0a\u00a0process\u00a0of\u00a0accretion:\u00a0To\u00a0add\nnew\u00a0features,\u00a0we\u00a0should\u00a0be\u00a0mostly\u00a0adding\u00a0new\u00a0code.\u00a0But\u00a0good\u00a0developers\u00a0know\u00a0that,\noften,\u00a0the\u00a0fastest\u00a0way\u00a0to\u00a0add\u00a0a\u00a0new\u00a0feature\u00a0is\u00a0to\u00a0change\u00a0the\u00a0code\u00a0to\u00a0make\u00a0it\u00a0easy\u00a0to\u00a0add.\nSoftware\u00a0should\u00a0thus\u00a0be\u00a0never\u00a0thought\u00a0of\u00a0as\u00a0\u201cdone.\u201d\u00a0As\u00a0new\u00a0capabilities\u00a0are\u00a0needed,\u00a0the\nsoftware\u00a0changes\u00a0to\u00a0reflect\u00a0that.\u00a0Those\u00a0changes\u00a0can\u00a0often\u00a0be\u00a0greater\u00a0in\u00a0the\u00a0existing\u00a0code\nwww.EBooksWorld.ir\n", "page": 64, "type": "text", "section": "Page 64"}
{"text": "than\u00a0in\u00a0the\u00a0new\u00a0code.\nAll\u00a0this\u00a0doesn\u2019t\u00a0mean\u00a0that\u00a0planned\u00a0refactoring\u00a0is\u00a0always\u00a0wrong.\u00a0If\u00a0a\u00a0team\u00a0has\u00a0neglected\nrefactoring,\u00a0it\u00a0often\u00a0needs\u00a0dedicated\u00a0time\u00a0to\u00a0get\u00a0their\u00a0code\u00a0base\u00a0into\u00a0a\u00a0better\u00a0state\u00a0for\nnew\u00a0features,\u00a0and\u00a0a\u00a0week\u00a0spent\u00a0refactoring\u00a0now\u00a0can\u00a0repay\u00a0itself\u00a0over\u00a0the\u00a0next\u00a0couple\u00a0of\nmonths.\u00a0Sometimes,\u00a0even\u00a0with\u00a0regular\u00a0refactoring\u00a0I\u2019ll\u00a0see\u00a0a\u00a0problem\u00a0area\u00a0grow\u00a0to\u00a0the\npoint\u00a0when\u00a0it\u00a0needs\u00a0some\u00a0concerted\u00a0effort\u00a0to\u00a0fix.\u00a0But\u00a0such\u00a0planned\u00a0refactoring\u00a0episodes\nshould\u00a0be\u00a0rare.\u00a0Most\u00a0refactoring\u00a0effort\u00a0should\u00a0be\u00a0the\u00a0unremarkable,\u00a0opportunistic\u00a0kind.\nOne\u00a0bit\u00a0of\u00a0advice\u00a0I\u2019ve\u00a0heard\u00a0is\u00a0to\u00a0separate\u00a0refactoring\u00a0work\u00a0and\u00a0new\u00a0feature\u00a0additions\ninto\u00a0different\u00a0version\u00adcontrol\u00a0commits.\u00a0The\u00a0big\u00a0advantage\u00a0of\u00a0this\u00a0is\u00a0that\u00a0they\u00a0can\u00a0be\nreviewed\u00a0and\u00a0approved\u00a0independently.\u00a0I\u2019m\u00a0not\u00a0convinced\u00a0of\u00a0this,\u00a0however.\u00a0Too\u00a0often,\nthe\u00a0refactorings\u00a0are\u00a0closely\u00a0interwoven\u00a0with\u00a0adding\u00a0new\u00a0features,\u00a0and\u00a0it\u2019s\u00a0not\u00a0worth\u00a0the\ntime\u00a0to\u00a0separate\u00a0them\u00a0out.\u00a0This\u00a0can\u00a0also\u00a0remove\u00a0the\u00a0context\u00a0for\u00a0the\u00a0refactoring,\u00a0making\nthe\u00a0refactoring\u00a0commits\u00a0hard\u00a0to\u00a0justify.\u00a0Each\u00a0team\u00a0should\u00a0experiment\u00a0to\u00a0find\u00a0what\nworks\u00a0for\u00a0them\u037e\u00a0just\u00a0remember\u00a0that\u00a0separating\u00a0refactoring\u00a0commits\u00a0is\u00a0not\u00a0a\u00a0self\u00adevident\nprinciple\u2014it\u2019s\u00a0only\u00a0worthwhile\u00a0if\u00a0it\u00a0makes\u00a0life\u00a0easier.\nLong-Term Refactoring\nMost\u00a0refactoring\u00a0can\u00a0be\u00a0completed\u00a0within\u00a0a\u00a0few\u00a0minutes\u2014hours\u00a0at\u00a0most.\u00a0But\u00a0there\u00a0are\nsome\u00a0larger\u00a0refactoring\u00a0efforts\u00a0that\u00a0can\u00a0take\u00a0a\u00a0team\u00a0weeks\u00a0to\u00a0complete.\u00a0Perhaps\u00a0they\nneed\u00a0to\u00a0replace\u00a0an\u00a0existing\u00a0library\u00a0with\u00a0a\u00a0new\u00a0one.\u00a0Or\u00a0pull\u00a0some\u00a0section\u00a0of\u00a0code\u00a0out\u00a0into\na\u00a0component\u00a0that\u00a0they\u00a0can\u00a0share\u00a0with\u00a0another\u00a0team.\u00a0Or\u00a0fix\u00a0some\u00a0nasty\u00a0mess\u00a0of\ndependencies\u00a0that\u00a0they\u00a0had\u00a0allowed\u00a0to\u00a0build\u00a0up.\nEven\u00a0in\u00a0such\u00a0cases,\u00a0I\u2019m\u00a0reluctant\u00a0to\u00a0have\u00a0a\u00a0team\u00a0do\u00a0dedicated\u00a0refactoring.\u00a0Often,\u00a0a\nuseful\u00a0strategy\u00a0is\u00a0to\u00a0agree\u00a0to\u00a0gradually\u00a0work\u00a0on\u00a0the\u00a0problem\u00a0over\u00a0the\u00a0course\u00a0of\u00a0the\u00a0next\nfew\u00a0weeks.\u00a0Whenever\u00a0anyone\u00a0goes\u00a0near\u00a0any\u00a0code\u00a0that\u2019s\u00a0in\u00a0the\u00a0refactoring\u00a0zone,\u00a0they\nmove\u00a0it\u00a0a\u00a0little\u00a0way\u00a0in\u00a0the\u00a0direction\u00a0they\u00a0want\u00a0to\u00a0improve.\u00a0This\u00a0takes\u00a0advantage\u00a0of\u00a0the\nfact\u00a0that\u00a0refactoring\u00a0doesn\u2019t\u00a0break\u00a0the\u00a0code\u2014each\u00a0small\u00a0change\u00a0leaves\u00a0everything\u00a0in\u00a0a\nstill\u00adworking\u00a0state.\u00a0To\u00a0change\u00a0from\u00a0one\u00a0library\u00a0to\u00a0another,\u00a0start\u00a0by\u00a0introducing\u00a0a\u00a0new\nabstraction\u00a0that\u00a0can\u00a0act\u00a0as\u00a0an\u00a0interface\u00a0to\u00a0either\u00a0library.\u00a0Once\u00a0the\u00a0calling\u00a0code\u00a0uses\u00a0this\nabstraction,\u00a0it\u2019s\u00a0much\u00a0easier\u00a0to\u00a0switch\u00a0one\u00a0library\u00a0for\u00a0another.\u00a0(This\u00a0tactic\u00a0is\u00a0called\nBranch\u00a0By\u00a0Abstraction\u00a0[mf\u00adbba].)\nRefactoring in a Code Review\nSome\u00a0organizations\u00a0do\u00a0regular\u00a0code\u00a0reviews\u037e\u00a0those\u00a0that\u00a0don\u2019t\u00a0would\u00a0do\u00a0better\u00a0if\u00a0they\ndid.\u00a0Code\u00a0reviews\u00a0help\u00a0spread\u00a0knowledge\u00a0through\u00a0a\u00a0development\u00a0team.\u00a0Reviews\u00a0help\nmore\u00a0experienced\u00a0developers\u00a0pass\u00a0knowledge\u00a0to\u00a0those\u00a0less\u00a0experienced.\u00a0They\u00a0help\u00a0more\nwww.EBooksWorld.ir\n", "page": 65, "type": "text", "section": "Page 65"}
{"text": "people\u00a0understand\u00a0more\u00a0aspects\u00a0of\u00a0a\u00a0large\u00a0software\u00a0system.\u00a0They\u00a0are\u00a0also\u00a0very\nimportant\u00a0in\u00a0writing\u00a0clear\u00a0code.\u00a0My\u00a0code\u00a0may\u00a0look\u00a0clear\u00a0to\u00a0me\u00a0but\u00a0not\u00a0to\u00a0my\u00a0team.\nThat\u2019s\u00a0inevitable\u2014it\u2019s\u00a0hard\u00a0for\u00a0people\u00a0to\u00a0put\u00a0themselves\u00a0in\u00a0the\u00a0shoes\u00a0of\u00a0someone\nunfamiliar\u00a0with\u00a0whatever\u00a0they\u00a0are\u00a0working\u00a0on.\u00a0Reviews\u00a0also\u00a0give\u00a0the\u00a0opportunity\u00a0for\nmore\u00a0people\u00a0to\u00a0suggest\u00a0useful\u00a0ideas.\u00a0I\u00a0can\u00a0only\u00a0think\u00a0of\u00a0so\u00a0many\u00a0good\u00a0ideas\u00a0in\u00a0a\u00a0week.\nHaving\u00a0other\u00a0people\u00a0contribute\u00a0makes\u00a0my\u00a0life\u00a0easier,\u00a0so\u00a0I\u00a0always\u00a0look\u00a0for\u00a0reviews.\nI\u2019ve\u00a0found\u00a0that\u00a0refactoring\u00a0helps\u00a0me\u00a0review\u00a0someone\u00a0else\u2019s\u00a0code.\u00a0Before\u00a0I\u00a0started\u00a0using\nrefactoring,\u00a0I\u00a0could\u00a0read\u00a0the\u00a0code,\u00a0understand\u00a0it\u00a0to\u00a0some\u00a0degree,\u00a0and\u00a0make\u00a0suggestions.\nNow,\u00a0when\u00a0I\u00a0come\u00a0up\u00a0with\u00a0ideas,\u00a0I\u00a0consider\u00a0whether\u00a0they\u00a0can\u00a0be\u00a0easily\u00a0implemented\nthen\u00a0and\u00a0there\u00a0with\u00a0refactoring.\u00a0If\u00a0so,\u00a0I\u00a0refactor.\u00a0When\u00a0I\u00a0do\u00a0it\u00a0a\u00a0few\u00a0times,\u00a0I\u00a0can\u00a0see\nmore\u00a0clearly\u00a0what\u00a0the\u00a0code\u00a0looks\u00a0like\u00a0with\u00a0the\u00a0suggestions\u00a0in\u00a0place.\u00a0I\u00a0don\u2019t\u00a0have\u00a0to\nimagine\u00a0what\u00a0it\u00a0would\u00a0be\u00a0like\u2014I\u00a0can\u00a0see\u00a0it.\u00a0As\u00a0a\u00a0result,\u00a0I\u00a0can\u00a0come\u00a0up\u00a0with\u00a0a\u00a0second\nlevel\u00a0of\u00a0ideas\u00a0that\u00a0I\u00a0would\u00a0never\u00a0have\u00a0realized\u00a0had\u00a0I\u00a0not\u00a0refactored.\nRefactoring\u00a0also\u00a0helps\u00a0get\u00a0more\u00a0concrete\u00a0results\u00a0from\u00a0the\u00a0code\u00a0review.\u00a0Not\u00a0only\u00a0are\nthere\u00a0suggestions\u037e\u00a0many\u00a0suggestions\u00a0are\u00a0implemented\u00a0there\u00a0and\u00a0then.\u00a0You\u00a0end\u00a0up\u00a0with\nmuch\u00a0more\u00a0of\u00a0a\u00a0sense\u00a0of\u00a0accomplishment\u00a0from\u00a0the\u00a0exercise.\nHow\u00a0I\u2019d\u00a0embed\u00a0refactoring\u00a0into\u00a0a\u00a0code\u00a0review\u00a0depends\u00a0on\u00a0the\u00a0nature\u00a0of\u00a0the\u00a0review.\u00a0The\ncommon\u00a0pull\u00a0request\u00a0model,\u00a0where\u00a0a\u00a0reviewer\u00a0looks\u00a0at\u00a0code\u00a0without\u00a0the\u00a0original\nauthor,\u00a0doesn\u2019t\u00a0work\u00a0too\u00a0well.\u00a0It\u2019s\u00a0better\u00a0to\u00a0have\u00a0the\u00a0original\u00a0author\u00a0of\u00a0the\u00a0code\u00a0present\nbecause\u00a0the\u00a0author\u00a0can\u00a0provide\u00a0context\u00a0on\u00a0the\u00a0code\u00a0and\u00a0fully\u00a0appreciate\u00a0the\u00a0reviewers\u2019\nintentions\u00a0for\u00a0their\u00a0changes.\u00a0I\u2019ve\u00a0had\u00a0my\u00a0best\u00a0experiences\u00a0with\u00a0this\u00a0by\u00a0sitting\u00a0one\u00adon\u00ad\none\u00a0with\u00a0the\u00a0original\u00a0author,\u00a0going\u00a0through\u00a0the\u00a0code\u00a0and\u00a0refactoring\u00a0as\u00a0we\u00a0go.\u00a0The\nlogical\u00a0conclusion\u00a0of\u00a0this\u00a0style\u00a0is\u00a0pair\u00a0programming:\u00a0continuous\u00a0code\u00a0review\u00a0embedded\nwithin\u00a0the\u00a0process\u00a0of\u00a0programming.\nWhat Do I Tell My Manager?\nOne\u00a0of\u00a0the\u00a0most\u00a0common\u00a0questions\u00a0I\u2019ve\u00a0been\u00a0asked\u00a0is,\u00a0\u201cHow\u00a0to\u00a0tell\u00a0a\u00a0manager\u00a0about\nrefactoring?\u201d\u00a0I\u2019ve\u00a0certainly\u00a0seen\u00a0places\u00a0were\u00a0refactoring\u00a0has\u00a0become\u00a0a\u00a0dirty\u00a0word\u2014with\nmanagers\u00a0(and\u00a0customers)\u00a0believing\u00a0that\u00a0refactoring\u00a0is\u00a0either\u00a0correcting\u00a0errors\u00a0made\nearlier,\u00a0or\u00a0work\u00a0that\u00a0doesn\u2019t\u00a0yield\u00a0valuable\u00a0features.\u00a0This\u00a0is\u00a0exacerbated\u00a0by\u00a0teams\nscheduling\u00a0weeks\u00a0of\u00a0pure\u00a0refactoring\u2014especially\u00a0if\u00a0what\u00a0they\u00a0are\u00a0really\u00a0doing\u00a0is\u00a0not\nrefactoring\u00a0but\u00a0less\u00a0careful\u00a0restructuring\u00a0that\u00a0causes\u00a0breakages\u00a0in\u00a0the\u00a0code\u00a0base.\nTo\u00a0a\u00a0manager\u00a0who\u00a0is\u00a0genuinely\u00a0savvy\u00a0about\u00a0technology\u00a0and\u00a0understands\u00a0the\u00a0design\nstamina\u00a0hypothesis,\u00a0refactoring\u00a0isn\u2019t\u00a0hard\u00a0to\u00a0justify.\u00a0Such\u00a0managers\u00a0should\u00a0be\nencouraging\u00a0refactoring\u00a0on\u00a0a\u00a0regular\u00a0basis\u00a0and\u00a0be\u00a0looking\u00a0for\u00a0signs\u00a0that\u00a0indicate\u00a0a\u00a0team\nisn\u2019t\u00a0doing\u00a0enough.\u00a0While\u00a0it\u00a0does\u00a0happen\u00a0that\u00a0teams\u00a0do\u00a0too\u00a0much\u00a0refactoring,\u00a0it\u2019s\u00a0much\nwww.EBooksWorld.ir\n", "page": 66, "type": "text", "section": "Page 66"}
{"text": "rarer\u00a0than\u00a0teams\u00a0not\u00a0doing\u00a0enough.\nOf\u00a0course,\u00a0many\u00a0managers\u00a0and\u00a0customer\u00a0don\u2019t\u00a0have\u00a0the\u00a0technical\u00a0awareness\u00a0to\u00a0know\nhow\u00a0code\u00a0base\u00a0health\u00a0impacts\u00a0productivity.\u00a0In\u00a0these\u00a0cases\u00a0I\u00a0give\u00a0my\u00a0more\u00a0controversial\nadvice:\u00a0Don\u2019t\u00a0tell!\nSubversive?\u00a0I\u00a0don\u2019t\u00a0think\u00a0so.\u00a0Software\u00a0developers\u00a0are\u00a0professionals.\u00a0Our\u00a0job\u00a0is\u00a0to\u00a0build\neffective\u00a0software\u00a0as\u00a0rapidly\u00a0as\u00a0we\u00a0can.\u00a0My\u00a0experience\u00a0is\u00a0that\u00a0refactoring\u00a0is\u00a0a\u00a0big\u00a0aid\u00a0to\nbuilding\u00a0software\u00a0quickly.\u00a0If\u00a0I\u00a0need\u00a0to\u00a0add\u00a0a\u00a0new\u00a0function\u00a0and\u00a0the\u00a0design\u00a0does\u00a0not\u00a0suit\nthe\u00a0change,\u00a0I\u00a0find\u00a0it\u2019s\u00a0quicker\u00a0to\u00a0refactor\u00a0first\u00a0and\u00a0then\u00a0add\u00a0the\u00a0function.\u00a0If\u00a0I\u00a0need\u00a0to\u00a0fix\na\u00a0bug,\u00a0I\u00a0need\u00a0to\u00a0understand\u00a0how\u00a0the\u00a0software\u00a0works\u2014and\u00a0I\u00a0find\u00a0refactoring\u00a0is\u00a0the\nfastest\u00a0way\u00a0to\u00a0do\u00a0this.\u00a0A\u00a0schedule\u00addriven\u00a0manager\u00a0wants\u00a0me\u00a0to\u00a0do\u00a0things\u00a0the\u00a0fastest\u00a0way\nI\u00a0can\u037e\u00a0how\u00a0I\u00a0do\u00a0it\u00a0is\u00a0my\u00a0responsibility.\u00a0I\u2019m\u00a0being\u00a0paid\u00a0for\u00a0my\u00a0expertise\u00a0in\u00a0programming\nnew\u00a0capabilities\u00a0fast,\u00a0and\u00a0the\u00a0fastest\u00a0way\u00a0is\u00a0by\u00a0refactoring\u2014therefore\u00a0I\u00a0refactor.\nWhen Should I Not Refactor?\nIt\u00a0may\u00a0sound\u00a0like\u00a0I\u00a0always\u00a0recommend\u00a0refactoring\u2014but\u00a0there\u00a0are\u00a0cases\u00a0when\u00a0it\u2019s\u00a0not\nworthwhile.\nIf\u00a0I\u00a0run\u00a0across\u00a0code\u00a0that\u00a0is\u00a0a\u00a0mess,\u00a0but\u00a0I\u00a0don\u2019t\u00a0need\u00a0to\u00a0modify\u00a0it,\u00a0then\u00a0I\u00a0don\u2019t\u00a0need\u00a0to\nrefactor\u00a0it.\u00a0Some\u00a0ugly\u00a0code\u00a0that\u00a0I\u00a0can\u00a0treat\u00a0as\u00a0an\u00a0API\u00a0may\u00a0remain\u00a0ugly.\u00a0It\u2019s\u00a0only\u00a0when\u00a0I\nneed\u00a0to\u00a0understand\u00a0how\u00a0it\u00a0works\u00a0that\u00a0refactoring\u00a0gives\u00a0me\u00a0any\u00a0benefit.\nAnother\u00a0case\u00a0is\u00a0when\u00a0it\u2019s\u00a0easier\u00a0to\u00a0rewrite\u00a0it\u00a0than\u00a0to\u00a0refactor\u00a0it.\u00a0This\u00a0is\u00a0a\u00a0tricky\u00a0decision.\nOften,\u00a0I\u00a0can\u2019t\u00a0tell\u00a0how\u00a0easy\u00a0it\u00a0is\u00a0to\u00a0refactor\u00a0some\u00a0code\u00a0unless\u00a0I\u00a0spend\u00a0some\u00a0time\u00a0trying\nand\u00a0thus\u00a0get\u00a0a\u00a0sense\u00a0of\u00a0how\u00a0difficult\u00a0it\u00a0is.\u00a0The\u00a0decision\u00a0to\u00a0refactor\u00a0or\u00a0rewrite\u00a0requires\ngood\u00a0judgment\u00a0and\u00a0experience,\u00a0and\u00a0I\u00a0can\u2019t\u00a0really\u00a0boil\u00a0it\u00a0down\u00a0into\u00a0a\u00a0piece\u00a0of\u00a0simple\nadvice.\nPROBLEMS WITH REFACTORING\nWhenever\u00a0anyone\u00a0advocates\u00a0for\u00a0some\u00a0technique,\u00a0tool,\u00a0or\u00a0architecture,\u00a0I\u00a0always\u00a0look\u00a0for\nproblems.\u00a0Few\u00a0things\u00a0in\u00a0life\u00a0are\u00a0all\u00a0sunshine\u00a0and\u00a0clear\u00a0skies.\u00a0You\u00a0need\u00a0to\u00a0understand\nthe\u00a0tradeoffs\u00a0to\u00a0decide\u00a0when\u00a0and\u00a0where\u00a0to\u00a0apply\u00a0something.\u00a0I\u00a0do\u00a0think\u00a0refactoring\u00a0is\u00a0a\nvaluable\u00a0technique\u2014one\u00a0that\u00a0should\u00a0be\u00a0used\u00a0more\u00a0by\u00a0most\u00a0teams.\u00a0But\u00a0there\u00a0are\nproblems\u00a0associated\u00a0with\u00a0it,\u00a0and\u00a0it\u2019s\u00a0important\u00a0to\u00a0understand\u00a0how\u00a0they\u00a0manifest\nthemselves\u00a0and\u00a0how\u00a0we\u00a0can\u00a0react\u00a0to\u00a0them.\nSlowing Down New Features\nwww.EBooksWorld.ir\n", "page": 67, "type": "text", "section": "Page 67"}
{"text": "If\u00a0you\u00a0read\u00a0the\u00a0previous\u00a0section,\u00a0you\u00a0should\u00a0already\u00a0know\u00a0my\u00a0response.\u00a0Although\u00a0many\npeople\u00a0see\u00a0time\u00a0spent\u00a0refactoring\u00a0as\u00a0slowing\u00a0down\u00a0the\u00a0development\u00a0of\u00a0new\u00a0features,\u00a0the\nwhole\u00a0purpose\u00a0of\u00a0refactoring\u00a0is\u00a0to\u00a0speed\u00a0things\u00a0up.\u00a0But\u00a0while\u00a0this\u00a0is\u00a0true,\u00a0it\u2019s\u00a0also\u00a0true\nthat\u00a0the\u00a0perception\u00a0of\u00a0refactoring\u00a0as\u00a0slowing\u00a0things\u00a0down\u00a0is\u00a0still\u00a0common\u2014and\u00a0perhaps\nthe\u00a0biggest\u00a0barrier\u00a0to\u00a0people\u00a0doing\u00a0enough\u00a0refactoring.\n\u00a0The\u00a0whole\u00a0purpose\u00a0of\u00a0refactoring\u00a0is\u00a0to\u00a0make\u00a0us\u00a0program\u00a0faster,\u00a0producing\nmore\u00a0value\u00a0with\u00a0less\u00a0effort.\nThere\u00a0is\u00a0a\u00a0genuine\u00a0tradeoff\u00a0here.\u00a0I\u00a0do\u00a0run\u00a0into\u00a0situations\u00a0where\u00a0I\u00a0see\u00a0a\u00a0(large\u00adscale)\nrefactoring\u00a0that\u00a0really\u00a0needs\u00a0to\u00a0be\u00a0done,\u00a0but\u00a0the\u00a0new\u00a0feature\u00a0I\u00a0want\u00a0to\u00a0add\u00a0is\u00a0so\u00a0small\nthat\u00a0I\u00a0prefer\u00a0to\u00a0add\u00a0it\u00a0and\u00a0leave\u00a0the\u00a0larger\u00a0refactoring\u00a0alone.\u00a0That\u2019s\u00a0a\u00a0judgment\u00a0call\u2014\npart\u00a0of\u00a0my\u00a0professional\u00a0skills\u00a0as\u00a0a\u00a0programmer.\u00a0I\u00a0can\u2019t\u00a0easily\u00a0describe,\u00a0let\u00a0alone\nquantify,\u00a0how\u00a0I\u00a0make\u00a0that\u00a0tradeoff.\nI\u2019m\u00a0very\u00a0conscious\u00a0that\u00a0preparatory\u00a0refactoring\u00a0often\u00a0makes\u00a0a\u00a0change\u00a0easier,\u00a0so\u00a0I\ncertainly\u00a0will\u00a0do\u00a0it\u00a0if\u00a0I\u00a0see\u00a0that\u00a0it\u00a0makes\u00a0my\u00a0new\u00a0feature\u00a0easier\u00a0to\u00a0implement.\u00a0I\u2019m\u00a0also\nmore\u00a0inclined\u00a0to\u00a0refactor\u00a0if\u00a0this\u00a0is\u00a0a\u00a0problem\u00a0I\u2019ve\u00a0seen\u00a0before\u2014sometimes\u00a0it\u00a0takes\u00a0me\u00a0a\ncouple\u00a0of\u00a0times\u00a0seeing\u00a0some\u00a0particular\u00a0ugliness\u00a0before\u00a0I\u00a0decide\u00a0to\u00a0refactor\u00a0it\u00a0away.\nConversely,\u00a0I\u2019m\u00a0more\u00a0likely\u00a0to\u00a0not\u00a0refactor\u00a0if\u00a0it\u2019s\u00a0part\u00a0of\u00a0the\u00a0code\u00a0I\u00a0rarely\u00a0touch\u00a0and\u00a0the\ncost\u00a0of\u00a0the\u00a0inconvenience\u00a0isn\u2019t\u00a0something\u00a0I\u00a0feel\u00a0very\u00a0often.\u00a0Sometimes,\u00a0I\u00a0delay\u00a0a\nrefactoring\u00a0because\u00a0I\u2019m\u00a0not\u00a0sure\u00a0what\u00a0improvement\u00a0to\u00a0do,\u00a0although\u00a0at\u00a0other\u00a0times\u00a0I\u2019ll\ntry\u00a0something\u00a0as\u00a0an\u00a0experiment\u00a0to\u00a0see\u00a0if\u00a0it\u00a0makes\u00a0things\u00a0better.\nStill,\u00a0the\u00a0evidence\u00a0I\u00a0hear\u00a0from\u00a0my\u00a0colleagues\u00a0in\u00a0the\u00a0industry\u00a0is\u00a0that\u00a0too\u00a0little\u00a0refactoring\nis\u00a0far\u00a0more\u00a0prevalent\u00a0than\u00a0too\u00a0much.\u00a0In\u00a0other\u00a0words,\u00a0most\u00a0people\u00a0should\u00a0try\u00a0to\u00a0refactor\nmore\u00a0often.\u00a0You\u00a0may\u00a0have\u00a0trouble\u00a0telling\u00a0the\u00a0difference\u00a0in\u00a0productivity\u00a0between\u00a0a\nhealthy\u00a0and\u00a0a\u00a0sickly\u00a0code\u00a0base\u00a0because\u00a0you\u00a0haven\u2019t\u00a0had\u00a0enough\u00a0experience\u00a0of\u00a0a\u00a0healthy\ncode\u00a0base\u2014of\u00a0the\u00a0power\u00a0that\u00a0comes\u00a0from\u00a0easily\u00a0combining\u00a0existing\u00a0parts\u00a0into\u00a0new\nconfigurations\u00a0to\u00a0quickly\u00a0enable\u00a0complicated\u00a0new\u00a0features.\nAlthough\u00a0it\u2019s\u00a0often\u00a0managers\u00a0that\u00a0are\u00a0criticized\u00a0for\u00a0the\u00a0counter\u00adproductive\u00a0habit\u00a0of\nsquelching\u00a0refactoring\u00a0in\u00a0the\u00a0name\u00a0of\u00a0speed,\u00a0I\u2019ve\u00a0often\u00a0seen\u00a0developers\u00a0do\u00a0it\u00a0to\nthemselves.\u00a0Sometimes,\u00a0they\u00a0think\u00a0they\u00a0shouldn\u2019t\u00a0be\u00a0refactoring\u00a0even\u00a0though\u00a0their\nleadership\u00a0is\u00a0actually\u00a0in\u00a0favor.\u00a0If\u00a0you\u2019re\u00a0a\u00a0tech\u00a0lead\u00a0in\u00a0a\u00a0team,\u00a0it\u2019s\u00a0important\u00a0to\u00a0show\nteam\u00a0members\u00a0that\u00a0you\u00a0value\u00a0improving\u00a0the\u00a0health\u00a0of\u00a0a\u00a0code\u00a0base.\u00a0That\u00a0judgment\u00a0I\nmentioned\u00a0earlier\u00a0on\u00a0whether\u00a0to\u00a0refactor\u00a0or\u00a0not\u00a0is\u00a0something\u00a0that\u00a0takes\u00a0years\u00a0of\nexperience\u00a0to\u00a0build\u00a0up.\u00a0Those\u00a0with\u00a0less\u00a0experience\u00a0in\u00a0refactoring\u00a0need\u00a0lots\u00a0of\u00a0mentoring\nto\u00a0accelerate\u00a0them\u00a0through\u00a0the\u00a0process.\nwww.EBooksWorld.ir\n", "page": 68, "type": "text", "section": "Page 68"}
{"text": "But\u00a0I\u00a0think\u00a0the\u00a0most\u00a0dangerous\u00a0way\u00a0that\u00a0people\u00a0get\u00a0trapped\u00a0is\u00a0when\u00a0they\u00a0try\u00a0to\u00a0justify\nrefactoring\u00a0in\u00a0terms\u00a0of\u00a0\u201cclean\u00a0code,\u201d\u00a0\u201cgood\u00a0engineering\u00a0practice,\u201d\u00a0or\u00a0similar\u00a0moral\nreasons.\u00a0The\u00a0point\u00a0of\u00a0refactoring\u00a0isn\u2019t\u00a0to\u00a0show\u00a0how\u00a0sparkly\u00a0a\u00a0code\u00a0base\u00a0is\u2014it\u00a0is\u00a0purely\neconomic.\u00a0We\u00a0refactor\u00a0because\u00a0it\u00a0makes\u00a0us\u00a0faster\u2014faster\u00a0to\u00a0add\u00a0features,\u00a0faster\u00a0to\u00a0fix\nbugs.\u00a0It\u2019s\u00a0important\u00a0to\u00a0keep\u00a0that\u00a0in\u00a0front\u00a0of\u00a0your\u00a0mind\u00a0and\u00a0in\u00a0front\u00a0of\u00a0communication\nwith\u00a0others.\u00a0The\u00a0economic\u00a0benefits\u00a0of\u00a0refactoring\u00a0should\u00a0always\u00a0be\u00a0the\u00a0driving\u00a0factor,\nand\u00a0the\u00a0more\u00a0that\u00a0is\u00a0understood\u00a0by\u00a0developers,\u00a0managers,\u00a0and\u00a0customers,\u00a0the\u00a0more\u00a0of\nthe\u00a0\u201cgood\u00a0design\u201d\u00a0curve\u00a0we\u2019ll\u00a0see.\nCode Ownership\nMany\u00a0refactorings\u00a0involve\u00a0making\u00a0changes\u00a0that\u00a0affect\u00a0not\u00a0just\u00a0the\u00a0internals\u00a0of\u00a0a\u00a0module\nbut\u00a0its\u00a0relationships\u00a0with\u00a0other\u00a0parts\u00a0of\u00a0a\u00a0system.\u00a0If\u00a0I\u00a0want\u00a0to\u00a0rename\u00a0a\u00a0function,\u00a0and\u00a0I\ncan\u00a0find\u00a0all\u00a0the\u00a0callers\u00a0to\u00a0a\u00a0function,\u00a0I\u00a0simply\u00a0apply\u00a0Change\u00a0Function\u00a0Declaration\u00a0(124)\nand\u00a0change\u00a0the\u00a0declaration\u00a0and\u00a0the\u00a0callers\u00a0in\u00a0one\u00a0change.\u00a0But\u00a0sometimes\u00a0this\u00a0simple\nrefactoring\u00a0isn\u2019t\u00a0possible.\u00a0Perhaps\u00a0the\u00a0calling\u00a0code\u00a0is\u00a0owned\u00a0by\u00a0a\u00a0different\u00a0team\u00a0and\u00a0I\ndon\u2019t\u00a0have\u00a0write\u00a0access\u00a0to\u00a0their\u00a0repository.\u00a0Perhaps\u00a0the\u00a0function\u00a0is\u00a0a\u00a0declared\u00a0API\u00a0used\nby\u00a0my\u00a0customers\u2014so\u00a0I\u00a0can\u2019t\u00a0even\u00a0tell\u00a0if\u00a0it\u2019s\u00a0being\u00a0used,\u00a0let\u00a0alone\u00a0by\u00a0who\u00a0and\u00a0how\u00a0much.\nSuch\u00a0functions\u00a0are\u00a0part\u00a0of\u00a0a\u00a0published\u00a0interface\u2014an\u00a0interface\u00a0that\u00a0is\u00a0used\u00a0by\u00a0clients\nindependent\u00a0of\u00a0those\u00a0who\u00a0declare\u00a0the\u00a0interface.\nCode\u00a0ownership\u00a0boundaries\u00a0get\u00a0in\u00a0the\u00a0way\u00a0of\u00a0refactoring\u00a0because\u00a0I\u00a0cannot\u00a0make\u00a0the\nkinds\u00a0of\u00a0changes\u00a0I\u00a0want\u00a0without\u00a0breaking\u00a0my\u00a0clients.\u00a0This\u00a0doesn\u2019t\u00a0prevent\u00a0refactoring\u2014\nI\u00a0can\u00a0still\u00a0do\u00a0a\u00a0great\u00a0deal\u2014but\u00a0it\u00a0does\u00a0impose\u00a0limitations.\u00a0When\u00a0renaming\u00a0a\u00a0function,\u00a0I\nneed\u00a0to\u00a0use\u00a0Rename\u00a0Function\u00a0(124)\u00a0and\u00a0to\u00a0retain\u00a0the\u00a0old\u00a0declaration\u00a0as\u00a0a\u00a0pass\u00adthrough\nto\u00a0the\u00a0new\u00a0one.\u00a0This\u00a0complicates\u00a0the\u00a0interface\u2014but\u00a0it\u00a0is\u00a0the\u00a0price\u00a0I\u00a0must\u00a0pay\u00a0to\u00a0avoid\nbreaking\u00a0my\u00a0clients.\u00a0I\u00a0may\u00a0be\u00a0able\u00a0to\u00a0mark\u00a0the\u00a0old\u00a0interface\u00a0as\u00a0deprecated\u00a0and,\u00a0in\u00a0time,\nretire\u00a0it,\u00a0but\u00a0sometimes\u00a0I\u00a0have\u00a0to\u00a0retain\u00a0that\u00a0interface\u00a0forever.\nDue\u00a0to\u00a0these\u00a0complexities,\u00a0I\u00a0recommend\u00a0against\u00a0fine\u00adgrained\u00a0strong\u00a0code\u00a0ownership.\nSome\u00a0organizations\u00a0like\u00a0any\u00a0piece\u00a0of\u00a0code\u00a0to\u00a0have\u00a0a\u00a0single\u00a0programmer\u00a0as\u00a0an\u00a0owner,\nand\u00a0only\u00a0allow\u00a0that\u00a0programmer\u00a0to\u00a0change\u00a0it.\u00a0I\u2019ve\u00a0seen\u00a0a\u00a0team\u00a0of\u00a0three\u00a0people\u00a0operate\nin\u00a0such\u00a0a\u00a0way\u00a0that\u00a0each\u00a0one\u00a0published\u00a0interfaces\u00a0to\u00a0the\u00a0other\u00a0two.\u00a0This\u00a0led\u00a0to\u00a0all\u00a0sorts\u00a0of\ngyrations\u00a0to\u00a0maintain\u00a0interfaces\u00a0when\u00a0it\u00a0would\u00a0have\u00a0been\u00a0much\u00a0easier\u00a0to\u00a0go\u00a0into\u00a0the\ncode\u00a0base\u00a0and\u00a0make\u00a0the\u00a0edits.\u00a0My\u00a0preference\u00a0is\u00a0to\u00a0allow\u00a0team\u00a0ownership\u00a0of\u00a0code\u2014so\nthat\u00a0anyone\u00a0in\u00a0the\u00a0same\u00a0team\u00a0can\u00a0modify\u00a0the\u00a0team\u2019s\u00a0code,\u00a0even\u00a0if\u00a0originally\u00a0written\u00a0by\nsomeone\u00a0else.\u00a0Programmers\u00a0may\u00a0have\u00a0individual\u00a0responsibility\u00a0for\u00a0areas\u00a0of\u00a0a\u00a0system,\nbut\u00a0that\u00a0should\u00a0imply\u00a0that\u00a0they\u00a0monitor\u00a0changes\u00a0to\u00a0their\u00a0area\u00a0of\u00a0responsibility,\u00a0not\nblock\u00a0them\u00a0by\u00a0default.\nwww.EBooksWorld.ir\n", "page": 69, "type": "text", "section": "Page 69"}
{"text": "Such\u00a0a\u00a0more\u00a0permissive\u00a0ownership\u00a0scheme\u00a0can\u00a0even\u00a0exist\u00a0across\u00a0teams.\u00a0Some\u00a0teams\nencourage\u00a0an\u00a0open\u00adsource\u00adlike\u00a0model\u00a0where\u00a0people\u00a0from\u00a0other\u00a0teams\u00a0can\u00a0change\u00a0a\nbranch\u00a0of\u00a0their\u00a0code\u00a0and\u00a0send\u00a0the\u00a0commit\u00a0in\u00a0to\u00a0be\u00a0approved.\u00a0This\u00a0allows\u00a0one\u00a0team\u00a0to\nchange\u00a0the\u00a0clients\u00a0of\u00a0their\u00a0functions\u2014they\u00a0can\u00a0delete\u00a0the\u00a0old\u00a0declarations\u00a0once\u00a0their\ncommits\u00a0to\u00a0their\u00a0clients\u00a0have\u00a0been\u00a0accepted.\u00a0This\u00a0can\u00a0often\u00a0be\u00a0a\u00a0good\u00a0compromise\nbetween\u00a0strong\u00a0code\u00a0ownership\u00a0and\u00a0chaotic\u00a0changes\u00a0in\u00a0large\u00a0systems.\nBranches\nAs\u00a0I\u00a0write\u00a0this,\u00a0a\u00a0common\u00a0approach\u00a0in\u00a0teams\u00a0is\u00a0for\u00a0each\u00a0team\u00a0member\u00a0to\u00a0work\u00a0on\u00a0a\nbranch\u00a0of\u00a0the\u00a0code\u00a0base\u00a0using\u00a0a\u00a0version\u00a0control\u00a0system,\u00a0and\u00a0do\u00a0considerable\u00a0work\u00a0on\nthat\u00a0branch\u00a0before\u00a0integrating\u00a0with\u00a0a\u00a0mainline\u00a0(often\u00a0called\u00a0master\u00a0or\u00a0trunk)\u00a0shared\nacross\u00a0the\u00a0team.\u00a0Often,\u00a0this\u00a0involves\u00a0building\u00a0a\u00a0whole\u00a0feature\u00a0on\u00a0a\u00a0branch,\u00a0not\nintegrating\u00a0into\u00a0the\u00a0mainline\u00a0until\u00a0the\u00a0feature\u00a0is\u00a0ready\u00a0to\u00a0be\u00a0released\u00a0into\u00a0production.\nFans\u00a0of\u00a0this\u00a0approach\u00a0claim\u00a0that\u00a0it\u00a0keeps\u00a0the\u00a0mainline\u00a0clear\u00a0of\u00a0any\u00a0in\u00adprocess\u00a0code,\nprovides\u00a0a\u00a0clear\u00a0version\u00a0history\u00a0of\u00a0feature\u00a0additions,\u00a0and\u00a0allows\u00a0features\u00a0to\u00a0be\u00a0reverted\neasily\u00a0should\u00a0they\u00a0cause\u00a0problems.\nThere\u00a0are\u00a0downsides\u00a0to\u00a0feature\u00a0branches\u00a0like\u00a0this.\u00a0The\u00a0longer\u00a0I\u00a0work\u00a0on\u00a0an\u00a0isolated\nbranch,\u00a0the\u00a0harder\u00a0the\u00a0job\u00a0of\u00a0integrating\u00a0my\u00a0work\u00a0with\u00a0mainline\u00a0is\u00a0going\u00a0to\u00a0be\u00a0when\u00a0I\u2019m\ndone.\u00a0Most\u00a0people\u00a0reduce\u00a0this\u00a0pain\u00a0by\u00a0frequently\u00a0merging\u00a0or\u00a0re\u00adbasing\u00a0from\u00a0mainline\nto\u00a0my\u00a0branch.\u00a0But\u00a0this\u00a0doesn\u2019t\u00a0really\u00a0solve\u00a0the\u00a0problem\u00a0when\u00a0several\u00a0people\u00a0are\nworking\u00a0on\u00a0individual\u00a0feature\u00a0branches.\u00a0I\u00a0distinguish\u00a0between\u00a0merging\u00a0and\u00a0integration.\nIf\u00a0I\u00a0merge\u00a0mainline\u00a0into\u00a0my\u00a0code,\u00a0this\u00a0is\u00a0a\u00a0oneway\u00a0movement\u2014my\u00a0branch\u00a0changes\u00a0but\nthe\u00a0mainline\u00a0doesn\u2019t.\u00a0I\u00a0use\u00a0\u201cintegrate\u201d\u00a0to\u00a0mean\u00a0a\u00a0two\u00adway\u00a0process\u00a0that\u00a0pulls\u00a0changes\nfrom\u00a0mainline\u00a0into\u00a0my\u00a0branch\u00a0and\u00a0then\u00a0pushes\u00a0the\u00a0result\u00a0back\u00a0into\u00a0mainline,\u00a0changing\nboth.\u00a0If\u00a0Rachel\u00a0is\u00a0working\u00a0on\u00a0her\u00a0branch\u00a0I\u00a0don\u2019t\u00a0see\u00a0her\u00a0changes\u00a0until\u00a0she\u00a0integrates\nwith\u00a0mainline\u037e\u00a0at\u00a0that\u00a0point,\u00a0I\u00a0have\u00a0to\u00a0merge\u00a0her\u00a0changes\u00a0into\u00a0my\u00a0feature\u00a0branch,\u00a0which\nmay\u00a0mean\u00a0considerable\u00a0work.\u00a0The\u00a0hard\u00a0part\u00a0of\u00a0this\u00a0work\u00a0is\u00a0dealing\u00a0with\u00a0semantic\nchanges.\u00a0Modern\u00a0version\u00a0control\u00a0systems\u00a0can\u00a0do\u00a0wonders\u00a0with\u00a0merging\u00a0complex\nchanges\u00a0to\u00a0the\u00a0program\u00a0text,\u00a0but\u00a0they\u00a0are\u00a0blind\u00a0to\u00a0the\u00a0semantics\u00a0of\u00a0the\u00a0code.\u00a0If\u00a0I\u2019ve\nchanged\u00a0the\u00a0name\u00a0of\u00a0a\u00a0function,\u00a0my\u00a0version\u00a0control\u00a0tool\u00a0may\u00a0easily\u00a0integrate\u00a0my\nchanges\u00a0with\u00a0Rachel\u2019s.\u00a0But\u00a0if,\u00a0in\u00a0her\u00a0branch,\u00a0she\u00a0added\u00a0a\u00a0call\u00a0to\u00a0a\u00a0function\u00a0that\u00a0I\u2019ve\nrenamed\u00a0in\u00a0mine,\u00a0the\u00a0code\u00a0will\u00a0fail.\nThe\u00a0problem\u00a0of\u00a0complicated\u00a0merges\u00a0gets\u00a0exponentially\u00a0worse\u00a0as\u00a0the\u00a0length\u00a0of\u00a0feature\nbranches\u00a0increases.\u00a0Integrating\u00a0branches\u00a0that\u00a0are\u00a0four\u00a0weeks\u00a0old\u00a0is\u00a0more\u00a0than\u00a0twice\u00a0as\nhard\u00a0as\u00a0those\u00a0that\u00a0are\u00a0a\u00a0couple\u00a0of\u00a0weeks\u00a0old.\u00a0Many\u00a0people,\u00a0therefore,\u00a0argue\u00a0for\u00a0keeping\nfeature\u00a0branches\u00a0short\u2014perhaps\u00a0just\u00a0a\u00a0couple\u00a0of\u00a0days.\u00a0Others,\u00a0such\u00a0as\u00a0me,\u00a0want\u00a0them\neven\u00a0shorter\u00a0than\u00a0that.\u00a0This\u00a0is\u00a0an\u00a0approach\u00a0called\u00a0Continuous\u00a0Integration\u00a0(CI),\u00a0also\nwww.EBooksWorld.ir\n", "page": 70, "type": "text", "section": "Page 70"}
{"text": "known\u00a0as\u00a0Trunk\u00adBased\u00a0Development.\u00a0With\u00a0CI,\u00a0each\u00a0team\u00a0member\u00a0integrates\u00a0with\nmainline\u00a0at\u00a0least\u00a0once\u00a0per\u00a0day.\u00a0This\u00a0prevents\u00a0any\u00a0branches\u00a0diverting\u00a0too\u00a0far\u00a0from\u00a0each\nother\u00a0and\u00a0thus\u00a0greatly\u00a0reduces\u00a0the\u00a0complexity\u00a0of\u00a0merges.\u00a0CI\u00a0doesn\u2019t\u00a0come\u00a0for\u00a0free:\u00a0It\nmeans\u00a0you\u00a0use\u00a0practices\u00a0to\u00a0ensure\u00a0the\u00a0mainline\u00a0is\u00a0healthy,\u00a0learn\u00a0to\u00a0break\u00a0large\u00a0features\ninto\u00a0smaller\u00a0chunks,\u00a0and\u00a0use\u00a0feature\u00a0toggles\u00a0(aka\u00a0feature\u00a0flags)\u00a0to\u00a0switch\u00a0off\u00a0any\u00a0in\u00ad\nprocess\u00a0features\u00a0that\u00a0can\u2019t\u00a0be\u00a0broken\u00a0down.\nFans\u00a0of\u00a0CI\u00a0like\u00a0it\u00a0partly\u00a0because\u00a0it\u00a0reduces\u00a0the\u00a0complexity\u00a0of\u00a0merges,\u00a0but\u00a0the\u00a0dominant\nreason\u00a0to\u00a0favor\u00a0CI\u00a0is\u00a0that\u00a0it\u2019s\u00a0far\u00a0more\u00a0compatible\u00a0with\u00a0refactoring.\u00a0Refactorings\u00a0often\ninvolve\u00a0making\u00a0lots\u00a0of\u00a0little\u00a0changes\u00a0all\u00a0over\u00a0the\u00a0code\u00a0base\u2014which\u00a0are\u00a0particularly\nprone\u00a0to\u00a0semantic\u00a0merge\u00a0conflicts\u00a0(such\u00a0as\u00a0renaming\u00a0a\u00a0widely\u00a0used\u00a0function).\u00a0Many\u00a0of\nus\u00a0have\u00a0seen\u00a0feature\u00adbranching\u00a0teams\u00a0that\u00a0find\u00a0refactorings\u00a0so\u00a0exacerbate\u00a0merge\nproblems\u00a0that\u00a0they\u00a0stop\u00a0refactoring.\u00a0CI\u00a0and\u00a0re\u00adfactoring\u00a0work\u00a0well\u00a0together,\u00a0which\u00a0is\nwhy\u00a0Kent\u00a0Beck\u00a0combined\u00a0them\u00a0in\u00a0Extreme\u00a0Programming.\nI\u2019m\u00a0not\u00a0saying\u00a0that\u00a0you\u00a0should\u00a0never\u00a0use\u00a0feature\u00a0branches.\u00a0If\u00a0they\u00a0are\u00a0sufficiently\u00a0short,\ntheir\u00a0problems\u00a0are\u00a0much\u00a0reduced.\u00a0(Indeed,\u00a0users\u00a0of\u00a0CI\u00a0usually\u00a0also\u00a0use\u00a0branches,\u00a0but\nintegrate\u00a0them\u00a0with\u00a0mainline\u00a0each\u00a0day.)\u00a0Feature\u00a0branches\u00a0may\u00a0be\u00a0the\u00a0right\u00a0technique\nfor\u00a0open\u00a0source\u00a0projects\u00a0where\u00a0you\u00a0have\u00a0infrequent\u00a0commits\u00a0from\u00a0programmers\u00a0who\nyou\u00a0don\u2019t\u00a0know\u00a0well\u00a0(and\u00a0thus\u00a0don\u2019t\u00a0trust).\u00a0But\u00a0in\u00a0a\u00a0full\u00adtime\u00a0development\u00a0team,\u00a0the\ncost\u00a0that\u00a0feature\u00a0branches\u00a0impose\u00a0on\u00a0refactoring\u00a0is\u00a0excessive.\u00a0Even\u00a0if\u00a0you\u00a0don\u2019t\u00a0go\u00a0to\u00a0full\nCI,\u00a0I\u00a0certainly\u00a0urge\u00a0you\u00a0to\u00a0integrate\u00a0as\u00a0frequently\u00a0as\u00a0possible.\u00a0You\u00a0should\u00a0also\u00a0consider\nthe\u00a0objective\u00a0evidence\u00a0[Forsgren\u00a0et\u00a0al.]\u00a0that\u00a0teams\u00a0that\u00a0use\u00a0CI\u00a0are\u00a0more\u00a0effective\u00a0in\nsoftware\u00a0delivery.\nTesting\nOne\u00a0of\u00a0the\u00a0key\u00a0characteristics\u00a0of\u00a0refactoring\u00a0is\u00a0that\u00a0it\u00a0doesn\u2019t\u00a0change\u00a0the\u00a0observable\nbehavior\u00a0of\u00a0the\u00a0program.\u00a0If\u00a0I\u00a0follow\u00a0the\u00a0refactorings\u00a0carefully,\u00a0I\u00a0shouldn\u2019t\u00a0break\nanything\u2014but\u00a0what\u00a0if\u00a0I\u00a0make\u00a0a\u00a0mistake?\u00a0(Or,\u00a0knowing\u00a0me,\u00a0s/if/when.)\u00a0Mistakes\nhappen,\u00a0but\u00a0they\u00a0aren\u2019t\u00a0a\u00a0problem\u00a0provided\u00a0I\u00a0catch\u00a0them\u00a0quickly.\u00a0Since\u00a0each\u00a0refactoring\nis\u00a0a\u00a0small\u00a0change,\u00a0if\u00a0I\u00a0break\u00a0anything,\u00a0I\u00a0only\u00a0have\u00a0a\u00a0small\u00a0change\u00a0to\u00a0look\u00a0at\u00a0to\u00a0find\u00a0the\nfault\u2014and\u00a0if\u00a0I\u00a0still\u00a0can\u2019t\u00a0spot\u00a0it,\u00a0I\u00a0can\u00a0revert\u00a0my\u00a0version\u00a0control\u00a0to\u00a0the\u00a0last\u00a0working\nversion.\nThe\u00a0key\u00a0here\u00a0is\u00a0being\u00a0able\u00a0to\u00a0catch\u00a0an\u00a0error\u00a0quickly.\u00a0To\u00a0do\u00a0this,\u00a0realistically,\u00a0I\u00a0need\u00a0to\u00a0be\nable\u00a0to\u00a0run\u00a0a\u00a0comprehensive\u00a0test\u00a0suite\u00a0on\u00a0the\u00a0code\u2014and\u00a0run\u00a0it\u00a0quickly,\u00a0so\u00a0that\u00a0I\u2019m\u00a0not\ndeterred\u00a0from\u00a0running\u00a0it\u00a0frequently.\u00a0This\u00a0means\u00a0that\u00a0in\u00a0most\u00a0cases,\u00a0if\u00a0I\u00a0want\u00a0to\u00a0refactor,\nI\u00a0need\u00a0to\u00a0have\u00a0self\u00adtesting\u00a0code\u00a0[mf\u00adstc].\nwww.EBooksWorld.ir\n", "page": 71, "type": "text", "section": "Page 71"}
{"text": "To\u00a0some\u00a0readers,\u00a0self\u00adtesting\u00a0code\u00a0sounds\u00a0like\u00a0a\u00a0requirement\u00a0so\u00a0steep\u00a0as\u00a0to\u00a0be\nunrealizable.\u00a0But\u00a0over\u00a0the\u00a0last\u00a0couple\u00a0of\u00a0decades,\u00a0I\u2019ve\u00a0seen\u00a0many\u00a0teams\u00a0build\u00a0software\nthis\u00a0way.\u00a0It\u00a0takes\u00a0attention\u00a0and\u00a0dedication\u00a0to\u00a0testing,\u00a0but\u00a0the\u00a0benefits\u00a0make\u00a0it\u00a0really\nworthwhile.\u00a0Self\u00adtesting\u00a0code\u00a0not\u00a0only\u00a0enables\u00a0refactoring\u2014it\u00a0also\u00a0makes\u00a0it\u00a0much\u00a0safer\nto\u00a0add\u00a0new\u00a0features,\u00a0since\u00a0I\u00a0can\u00a0quickly\u00a0find\u00a0and\u00a0kill\u00a0any\u00a0bugs\u00a0I\u00a0introduce.\u00a0The\u00a0key\u00a0point\nhere\u00a0is\u00a0that\u00a0when\u00a0a\u00a0test\u00a0fails,\u00a0I\u00a0can\u00a0look\u00a0at\u00a0the\u00a0change\u00a0I\u2019ve\u00a0made\u00a0between\u00a0when\u00a0the\u00a0tests\nwere\u00a0last\u00a0running\u00a0correctly\u00a0and\u00a0the\u00a0current\u00a0code.\u00a0With\u00a0frequent\u00a0test\u00a0runs,\u00a0that\u00a0will\u00a0be\nonly\u00a0a\u00a0few\u00a0lines\u00a0of\u00a0code.\u00a0By\u00a0knowing\u00a0it\u00a0was\u00a0those\u00a0few\u00a0lines\u00a0that\u00a0caused\u00a0the\u00a0failure,\u00a0I\u00a0can\nmuch\u00a0more\u00a0easily\u00a0find\u00a0the\u00a0bug.\nThis\u00a0also\u00a0answers\u00a0those\u00a0who\u00a0are\u00a0concerned\u00a0that\u00a0refactoring\u00a0carries\u00a0too\u00a0much\u00a0risk\u00a0of\nintroducing\u00a0bugs.\u00a0Without\u00a0self\u00adtesting\u00a0code,\u00a0that\u2019s\u00a0a\u00a0reasonable\u00a0worry\u2014which\u00a0is\u00a0why\u00a0I\nput\u00a0so\u00a0much\u00a0emphasis\u00a0on\u00a0having\u00a0solid\u00a0tests.\nThere\u00a0is\u00a0another\u00a0way\u00a0to\u00a0deal\u00a0with\u00a0the\u00a0testing\u00a0problem.\u00a0If\u00a0I\u00a0use\u00a0an\u00a0environment\u00a0that\u00a0has\ngood\u00a0automated\u00a0refactorings,\u00a0I\u00a0can\u00a0trust\u00a0those\u00a0refactorings\u00a0even\u00a0without\u00a0running\u00a0tests.\nI\u00a0can\u00a0then\u00a0refactor,\u00a0providing\u00a0I\u00a0only\u00a0use\u00a0those\u00a0refactorings\u00a0that\u00a0are\u00a0safely\u00a0automated.\nThis\u00a0removes\u00a0a\u00a0lot\u00a0of\u00a0nice\u00a0refactorings\u00a0from\u00a0my\u00a0menu,\u00a0but\u00a0still\u00a0leaves\u00a0me\u00a0enough\u00a0to\ndeliver\u00a0some\u00a0useful\u00a0benefits.\u00a0I\u2019d\u00a0still\u00a0rather\u00a0have\u00a0self\u00adtesting\u00a0code,\u00a0but\u00a0it\u2019s\u00a0an\u00a0option\u00a0that\nis\u00a0useful\u00a0to\u00a0have\u00a0in\u00a0the\u00a0toolkit.\nThis\u00a0also\u00a0inspires\u00a0a\u00a0style\u00a0of\u00a0refactoring\u00a0that\u00a0only\u00a0uses\u00a0a\u00a0limited\u00a0set\u00a0of\u00a0refactorings\u00a0that\ncan\u00a0be\u00a0proven\u00a0safe.\u00a0Such\u00a0refactorings\u00a0require\u00a0carefully\u00a0following\u00a0the\u00a0steps,\u00a0and\u00a0are\nlanguage\u00adspecific.\u00a0But\u00a0teams\u00a0using\u00a0them\u00a0have\u00a0found\u00a0they\u00a0can\u00a0do\u00a0useful\u00a0refactoring\u00a0on\nlarge\u00a0code\u00a0bases\u00a0with\u00a0poor\u00a0test\u00a0coverage.\u00a0I\u00a0don\u2019t\u00a0focus\u00a0on\u00a0that\u00a0in\u00a0this\u00a0book,\u00a0as\u00a0it\u2019s\u00a0a\nnewer,\u00a0less\u00a0described\u00a0and\u00a0understood\u00a0technique\u00a0that\u00a0involves\u00a0detailed,\u00a0language\u00ad\nspecific\u00a0activity.\u00a0(It\u00a0is,\u00a0however,\u00a0something\u00a0I\u00a0hope\u00a0talk\u00a0about\u00a0more\u00a0on\u00a0my\u00a0web\u00a0site\u00a0in\u00a0the\nfuture.\u00a0For\u00a0a\u00a0taste\u00a0of\u00a0it,\u00a0see\u00a0Jay\u00a0Bazuzi\u2019s\u00a0description\u00a0[Bazuzi]\u00a0of\u00a0a\u00a0safer\u00a0way\u00a0to\u00a0do\nExtract\u00a0Method\u00a0(106)\u00a0in\u00a0C++.)\nSelf\u00adtesting\u00a0code\u00a0is,\u00a0unsurprisingly,\u00a0closely\u00a0associated\u00a0with\u00a0Continuous\u00a0Integration\u2014it\nis\u00a0the\u00a0mechanism\u00a0that\u00a0we\u00a0use\u00a0to\u00a0catch\u00a0semantic\u00a0integration\u00a0conflicts.\u00a0Such\u00a0testing\npractices\u00a0are\u00a0another\u00a0component\u00a0of\u00a0Extreme\u00a0Programming\u00a0and\u00a0a\u00a0key\u00a0part\u00a0of\nContinuous\u00a0Delivery.\nLegacy Code\nMost\u00a0people\u00a0would\u00a0regard\u00a0a\u00a0big\u00a0legacy\u00a0as\u00a0a\u00a0Good\u00a0Thing\u2014but\u00a0that\u2019s\u00a0one\u00a0of\u00a0the\u00a0cases\nwhere\u00a0programmers\u2019\u00a0view\u00a0is\u00a0different.\u00a0Legacy\u00a0code\u00a0is\u00a0often\u00a0complex,\u00a0frequently\u00a0comes\nwith\u00a0poor\u00a0tests,\u00a0and,\u00a0above\u00a0all,\u00a0is\u00a0written\u00a0by\u00a0Someone\u00a0Else\u00a0(shudder).\nwww.EBooksWorld.ir\n", "page": 72, "type": "text", "section": "Page 72"}
{"text": "Refactoring\u00a0can\u00a0be\u00a0a\u00a0fantastic\u00a0tool\u00a0to\u00a0help\u00a0understand\u00a0a\u00a0legacy\u00a0system.\u00a0Functions\u00a0with\nmisleading\u00a0names\u00a0can\u00a0be\u00a0renamed\u00a0so\u00a0they\u00a0make\u00a0sense,\u00a0awkward\u00a0programming\nconstructs\u00a0smoothed\u00a0out,\u00a0and\u00a0the\u00a0program\u00a0turned\u00a0from\u00a0a\u00a0rough\u00a0rock\u00a0to\u00a0a\u00a0polished\u00a0gem.\nBut\u00a0the\u00a0dragon\u00a0guarding\u00a0this\u00a0happy\u00a0tale\u00a0is\u00a0the\u00a0common\u00a0lack\u00a0of\u00a0tests.\u00a0If\u00a0you\u00a0have\u00a0a\u00a0big\nlegacy\u00a0system\u00a0with\u00a0no\u00a0tests,\u00a0you\u00a0can\u2019t\u00a0safely\u00a0refactor\u00a0it\u00a0into\u00a0clarity.\nThe\u00a0obvious\u00a0answer\u00a0to\u00a0this\u00a0problem\u00a0is\u00a0that\u00a0you\u00a0add\u00a0tests.\u00a0But\u00a0while\u00a0this\u00a0sounds\u00a0a\nsimple,\u00a0if\u00a0laborious,\u00a0procedure,\u00a0it\u2019s\u00a0often\u00a0much\u00a0more\u00a0tricky\u00a0in\u00a0practice.\u00a0Usually,\u00a0a\nsystem\u00a0is\u00a0only\u00a0easy\u00a0to\u00a0put\u00a0under\u00a0test\u00a0if\u00a0it\u00a0was\u00a0designed\u00a0with\u00a0testing\u00a0in\u00a0mind\u2014in\u00a0which\ncase\u00a0it\u00a0would\u00a0have\u00a0the\u00a0tests\u00a0and\u00a0I\u00a0wouldn\u2019t\u00a0be\u00a0worrying\u00a0about\u00a0it.\nThere\u2019s\u00a0no\u00a0simple\u00a0route\u00a0to\u00a0dealing\u00a0with\u00a0this.\u00a0The\u00a0best\u00a0advice\u00a0I\u00a0can\u00a0give\u00a0is\u00a0to\u00a0get\u00a0a\u00a0copy\u00a0of\nWorking\u00a0Effectively\u00a0with\u00a0Legacy\u00a0Code\u00a0[Feathers]\u00a0and\u00a0follow\u00a0its\u00a0guidance.\u00a0Don\u2019t\u00a0be\nworried\u00a0by\u00a0the\u00a0age\u00a0of\u00a0the\u00a0book\u2014its\u00a0advice\u00a0is\u00a0just\u00a0as\u00a0true\u00a0more\u00a0than\u00a0a\u00a0decade\u00a0later.\u00a0To\nsummarize\u00a0crudely,\u00a0it\u00a0advises\u00a0you\u00a0to\u00a0get\u00a0the\u00a0system\u00a0under\u00a0test\u00a0by\u00a0finding\u00a0seams\u00a0in\u00a0the\nprogram\u00a0where\u00a0you\u00a0can\u00a0insert\u00a0tests.\u00a0Creating\u00a0these\u00a0seams\u00a0involves\u00a0refactoring\u2014which\nis\u00a0much\u00a0more\u00a0dangerous\u00a0since\u00a0it\u2019s\u00a0done\u00a0without\u00a0tests,\u00a0but\u00a0is\u00a0a\u00a0necessary\u00a0risk\u00a0to\u00a0make\nprogress.\u00a0This\u00a0is\u00a0a\u00a0situation\u00a0where\u00a0safe,\u00a0automated\u00a0refactorings\u00a0can\u00a0be\u00a0a\u00a0godsend.\u00a0If\u00a0all\nthis\u00a0sounds\u00a0difficult,\u00a0that\u2019s\u00a0because\u00a0it\u00a0is.\u00a0Sadly,\u00a0there\u2019s\u00a0no\u00a0shortcut\u00a0to\u00a0getting\u00a0out\u00a0of\u00a0a\nhole\u00a0this\u00a0deep\u2014which\u00a0is\u00a0why\u00a0I\u2019m\u00a0such\u00a0a\u00a0strong\u00a0proponent\u00a0of\u00a0writing\u00a0self\u00adtesting\u00a0code\nfrom\u00a0the\u00a0start.\nEven\u00a0when\u00a0I\u00a0do\u00a0have\u00a0tests,\u00a0I\u00a0don\u2019t\u00a0advocate\u00a0trying\u00a0to\u00a0refactor\u00a0a\u00a0complicated\u00a0legacy\u00a0mess\ninto\u00a0beautiful\u00a0code\u00a0all\u00a0at\u00a0once.\u00a0What\u00a0I\u00a0prefer\u00a0to\u00a0do\u00a0is\u00a0tackle\u00a0it\u00a0in\u00a0relevant\u00a0pieces.\u00a0Each\ntime\u00a0I\u00a0pass\u00a0through\u00a0a\u00a0section\u00a0of\u00a0the\u00a0code,\u00a0I\u00a0try\u00a0to\u00a0make\u00a0it\u00a0a\u00a0little\u00a0bit\u00a0better\u2014again,\u00a0like\nleaving\u00a0a\u00a0camp\u00a0site\u00a0cleaner\u00a0than\u00a0when\u00a0I\u00a0found\u00a0it.\u00a0If\u00a0this\u00a0is\u00a0a\u00a0large\u00a0system,\u00a0I\u2019ll\u00a0do\u00a0more\nrefactoring\u00a0in\u00a0areas\u00a0I\u00a0visit\u00a0frequently\u2014which\u00a0is\u00a0the\u00a0right\u00a0thing\u00a0to\u00a0do\u00a0because,\u00a0if\u00a0I\u00a0need\u00a0to\nvisit\u00a0code\u00a0frequently,\u00a0I\u2019ll\u00a0get\u00a0a\u00a0bigger\u00a0payoff\u00a0by\u00a0making\u00a0it\u00a0easier\u00a0to\u00a0understand.\nDatabases\nWhen\u00a0I\u00a0wrote\u00a0the\u00a0first\u00a0edition\u00a0of\u00a0this\u00a0book,\u00a0I\u00a0said\u00a0that\u00a0refactoring\u00a0databases\u00a0was\u00a0a\nproblem\u00a0area.\u00a0But,\u00a0within\u00a0a\u00a0year\u00a0of\u00a0the\u00a0book\u2019s\u00a0publication,\u00a0that\u00a0was\u00a0no\u00a0longer\u00a0the\u00a0case.\nMy\u00a0colleague\u00a0Pramod\u00a0Sadalage\u00a0developed\u00a0an\u00a0approach\u00a0to\u00a0evolutionary\u00a0database\u00a0design\n[mf\u00adevodb]\u00a0and\u00a0database\u00a0refactoring\u00a0[Ambler\u00a0&\u00a0Sadalage]\u00a0that\u00a0is\u00a0now\u00a0widely\u00a0used.\u00a0The\nessence\u00a0of\u00a0the\u00a0technique\u00a0is\u00a0to\u00a0combine\u00a0the\u00a0structural\u00a0changes\u00a0to\u00a0a\u00a0database\u2019s\u00a0schema\nand\u00a0access\u00a0code\u00a0with\u00a0data\u00a0migration\u00a0scripts\u00a0that\u00a0can\u00a0easily\u00a0compose\u00a0to\u00a0handle\u00a0large\nchanges.\nConsider\u00a0a\u00a0simple\u00a0example\u00a0of\u00a0renaming\u00a0a\u00a0field\u00a0(column).\u00a0As\u00a0in\u00a0Change\u00a0Function\nDeclaration\u00a0(124),\u00a0I\u00a0need\u00a0to\u00a0find\u00a0the\u00a0original\u00a0declaration\u00a0of\u00a0the\u00a0structure\u00a0and\u00a0all\u00a0the\nwww.EBooksWorld.ir\n", "page": 73, "type": "text", "section": "Page 73"}
{"text": "callers\u00a0of\u00a0this\u00a0structure\u00a0and\u00a0change\u00a0them\u00a0in\u00a0a\u00a0single\u00a0change.\u00a0The\u00a0complication,\nhowever,\u00a0is\u00a0that\u00a0I\u00a0also\u00a0have\u00a0to\u00a0transform\u00a0any\u00a0data\u00a0that\u00a0uses\u00a0the\u00a0old\u00a0field\u00a0to\u00a0use\u00a0the\u00a0new\none.\u00a0I\u00a0write\u00a0a\u00a0small\u00a0hunk\u00a0of\u00a0code\u00a0that\u00a0carries\u00a0out\u00a0this\u00a0transform\u00a0and\u00a0store\u00a0it\u00a0in\u00a0version\ncontrol,\u00a0together\u00a0with\u00a0the\u00a0code\u00a0that\u00a0changes\u00a0any\u00a0declared\u00a0structure\u00a0and\u00a0access\u00a0routines.\nThen,\u00a0whenever\u00a0I\u00a0need\u00a0to\u00a0migrate\u00a0between\u00a0two\u00a0versions\u00a0of\u00a0the\u00a0database,\u00a0I\u00a0run\u00a0all\u00a0the\nmigration\u00a0scripts\u00a0that\u00a0exist\u00a0between\u00a0my\u00a0current\u00a0copy\u00a0of\u00a0the\u00a0database\u00a0and\u00a0my\u00a0desired\nversion.\nAs\u00a0with\u00a0regular\u00a0refactoring,\u00a0the\u00a0key\u00a0here\u00a0is\u00a0that\u00a0each\u00a0individual\u00a0change\u00a0is\u00a0small\u00a0yet\ncaptures\u00a0a\u00a0complete\u00a0change,\u00a0so\u00a0the\u00a0system\u00a0still\u00a0runs\u00a0after\u00a0applying\u00a0the\u00a0migration.\nKeeping\u00a0them\u00a0small\u00a0means\u00a0they\u00a0are\u00a0easy\u00a0to\u00a0write,\u00a0but\u00a0I\u00a0can\u00a0string\u00a0many\u00a0of\u00a0them\u00a0into\u00a0a\nsequence\u00a0that\u00a0can\u00a0make\u00a0a\u00a0significant\u00a0change\u00a0to\u00a0the\u00a0database\u2019s\u00a0structure\u00a0and\u00a0the\u00a0data\nstored\u00a0in\u00a0it.\nOne\u00a0difference\u00a0from\u00a0regular\u00a0refactorings\u00a0is\u00a0that\u00a0database\u00a0changes\u00a0often\u00a0are\u00a0best\nseparated\u00a0over\u00a0multiple\u00a0releases\u00a0to\u00a0production.\u00a0This\u00a0makes\u00a0it\u00a0easy\u00a0to\u00a0reverse\u00a0any\nchange\u00a0that\u00a0causes\u00a0a\u00a0problem\u00a0in\u00a0production.\u00a0So,\u00a0when\u00a0renaming\u00a0a\u00a0field,\u00a0my\u00a0first\ncommit\u00a0would\u00a0add\u00a0the\u00a0new\u00a0database\u00a0field\u00a0but\u00a0not\u00a0use\u00a0it.\u00a0I\u00a0may\u00a0then\u00a0set\u00a0up\u00a0the\u00a0updates\nso\u00a0they\u00a0update\u00a0both\u00a0old\u00a0and\u00a0new\u00a0fields\u00a0at\u00a0once.\u00a0I\u00a0can\u00a0then\u00a0gradually\u00a0move\u00a0the\u00a0readers\nover\u00a0to\u00a0the\u00a0new\u00a0field.\u00a0Only\u00a0once\u00a0they\u00a0have\u00a0all\u00a0moved\u00a0to\u00a0the\u00a0new\u00a0field,\u00a0and\u00a0I\u2019ve\u00a0given\u00a0a\nlittle\u00a0time\u00a0for\u00a0any\u00a0bugs\u00a0to\u00a0show\u00a0themselves,\u00a0would\u00a0I\u00a0remove\u00a0the\u00a0now\u00adunused\u00a0old\u00a0field.\nThis\u00a0approach\u00a0to\u00a0database\u00a0changes\u00a0is\u00a0an\u00a0example\u00a0of\u00a0a\u00a0general\u00a0approach\u00a0of\u00a0parallel\nchange\u00a0[mf\u00adpc]\u00a0(also\u00a0called\u00a0expand\u00adcontract).\nREFACTORING, ARCHITECTURE, AND YAGNI\nRefactoring\u00a0has\u00a0profoundly\u00a0changed\u00a0how\u00a0people\u00a0think\u00a0about\u00a0software\u00a0architecture.\nEarly\u00a0in\u00a0my\u00a0career,\u00a0I\u00a0was\u00a0taught\u00a0that\u00a0software\u00a0design\u00a0and\u00a0architecture\u00a0was\u00a0something\u00a0to\nbe\u00a0worked\u00a0on,\u00a0and\u00a0mostly\u00a0completed,\u00a0before\u00a0anyone\u00a0started\u00a0writing\u00a0code.\u00a0Once\u00a0the\ncode\u00a0was\u00a0written,\u00a0its\u00a0architecture\u00a0was\u00a0fixed\u00a0and\u00a0could\u00a0only\u00a0decay\u00a0due\u00a0to\u00a0carelessness.\nRefactoring\u00a0changes\u00a0this\u00a0perspective.\u00a0It\u00a0allows\u00a0me\u00a0to\u00a0significantly\u00a0alter\u00a0the\u00a0architecture\nof\u00a0software\u00a0that\u2019s\u00a0been\u00a0running\u00a0in\u00a0production\u00a0for\u00a0years.\u00a0Refactoring\u00a0can\u00a0improve\u00a0the\ndesign\u00a0of\u00a0existing\u00a0code,\u00a0as\u00a0this\u00a0book\u2019s\u00a0subtitle\u00a0implies.\u00a0But\u00a0as\u00a0I\u00a0indicated\u00a0earlier,\nchanging\u00a0legacy\u00a0code\u00a0is\u00a0often\u00a0challenging,\u00a0especially\u00a0when\u00a0it\u00a0lacks\u00a0decent\u00a0tests.\nThe\u00a0real\u00a0impact\u00a0of\u00a0refactoring\u00a0on\u00a0architecture\u00a0is\u00a0in\u00a0how\u00a0it\u00a0can\u00a0be\u00a0used\u00a0to\u00a0form\u00a0a\u00a0well\u00ad\ndesigned\u00a0code\u00a0base\u00a0that\u00a0can\u00a0respond\u00a0gracefully\u00a0to\u00a0changing\u00a0needs.\u00a0The\u00a0biggest\u00a0issue\nwith\u00a0finishing\u00a0architecture\u00a0before\u00a0coding\u00a0is\u00a0that\u00a0such\u00a0an\u00a0approach\u00a0assumes\u00a0the\nrequirements\u00a0for\u00a0the\u00a0software\u00a0can\u00a0be\u00a0understood\u00a0early\u00a0on.\u00a0But\u00a0experience\u00a0shows\u00a0that\nwww.EBooksWorld.ir\n", "page": 74, "type": "text", "section": "Page 74"}
{"text": "this\u00a0is\u00a0often,\u00a0even\u00a0usually,\u00a0an\u00a0unachievable\u00a0goal.\u00a0Repeatedly,\u00a0I\u00a0saw\u00a0people\u00a0only\nunderstand\u00a0what\u00a0they\u00a0really\u00a0needed\u00a0from\u00a0software\u00a0once\u00a0they\u2019d\u00a0had\u00a0a\u00a0chance\u00a0to\u00a0use\u00a0it,\nand\u00a0saw\u00a0the\u00a0impact\u00a0it\u00a0made\u00a0to\u00a0their\u00a0work.\nOne\u00a0way\u00a0of\u00a0dealing\u00a0with\u00a0future\u00a0changes\u00a0is\u00a0to\u00a0put\u00a0flexibility\u00a0mechanisms\u00a0into\u00a0the\nsoftware.\u00a0As\u00a0I\u00a0write\u00a0some\u00a0function,\u00a0I\u00a0can\u00a0see\u00a0that\u00a0it\u00a0has\u00a0a\u00a0general\u00a0applicability.\u00a0To\nhandle\u00a0the\u00a0different\u00a0circumstances\u00a0that\u00a0I\u00a0anticipate\u00a0it\u00a0to\u00a0be\u00a0used\u00a0in,\u00a0I\u00a0can\u00a0see\u00a0a\u00a0dozen\nparameters\u00a0I\u00a0could\u00a0add\u00a0to\u00a0that\u00a0function.\u00a0These\u00a0parameters\u00a0are\u00a0flexibility\u00a0mechanisms\u2014\nand,\u00a0like\u00a0most\u00a0mechanisms,\u00a0they\u00a0are\u00a0not\u00a0a\u00a0free\u00a0lunch.\u00a0Adding\u00a0all\u00a0those\u00a0parameters\ncomplicates\u00a0the\u00a0function\u00a0for\u00a0the\u00a0one\u00a0case\u00a0it\u2019s\u00a0used\u00a0right\u00a0now.\u00a0If\u00a0I\u00a0miss\u00a0a\u00a0parameter,\u00a0all\nthe\u00a0parameterization\u00a0I\u00a0have\u00a0added\u00a0makes\u00a0it\u00a0harder\u00a0for\u00a0me\u00a0to\u00a0add\u00a0more.\u00a0I\u00a0find\u00a0I\u00a0often\u00a0get\nmy\u00a0flexibility\u00a0mechanisms\u00a0wrong\u2014either\u00a0because\u00a0the\u00a0changing\u00a0needs\u00a0didn\u2019t\u00a0work\u00a0out\nthe\u00a0way\u00a0I\u00a0expected\u00a0or\u00a0my\u00a0mechanism\u00a0design\u00a0was\u00a0faulty.\u00a0Once\u00a0I\u00a0take\u00a0all\u00a0that\u00a0into\naccount,\u00a0most\u00a0of\u00a0the\u00a0time\u00a0my\u00a0flexibility\u00a0mechanisms\u00a0actually\u00a0slow\u00a0down\u00a0my\u00a0ability\u00a0to\nreact\u00a0to\u00a0change.\nWith\u00a0refactoring,\u00a0I\u00a0can\u00a0use\u00a0a\u00a0different\u00a0strategy.\u00a0Instead\u00a0of\u00a0speculating\u00a0on\u00a0what\nflexibility\u00a0I\u00a0will\u00a0need\u00a0in\u00a0the\u00a0future\u00a0and\u00a0what\u00a0mechanisms\u00a0will\u00a0best\u00a0enable\u00a0that,\u00a0I\u00a0build\nsoftware\u00a0that\u00a0solves\u00a0only\u00a0the\u00a0currently\u00a0understood\u00a0needs,\u00a0but\u00a0I\u00a0make\u00a0this\u00a0software\nexcellently\u00a0designed\u00a0for\u00a0those\u00a0needs.\u00a0As\u00a0my\u00a0understanding\u00a0of\u00a0the\u00a0users\u2019\u00a0needs\u00a0changes,\nI\u00a0use\u00a0refactoring\u00a0to\u00a0adapt\u00a0the\u00a0architecture\u00a0to\u00a0those\u00a0new\u00a0demands.\u00a0I\u00a0can\u00a0happily\u00a0include\nmechanisms\u00a0that\u00a0don\u2019t\u00a0increase\u00a0complexity\u00a0(such\u00a0as\u00a0small,\u00a0well\u00adnamed\u00a0functions)\u00a0but\nany\u00a0flexibility\u00a0that\u00a0complicates\u00a0the\u00a0software\u00a0has\u00a0to\u00a0prove\u00a0itself\u00a0before\u00a0I\u00a0include\u00a0it.\u00a0If\u00a0I\ndon\u2019t\u00a0have\u00a0different\u00a0values\u00a0for\u00a0a\u00a0parameter\u00a0from\u00a0the\u00a0callers,\u00a0I\u00a0don\u2019t\u00a0add\u00a0it\u00a0to\u00a0the\nparameter\u00a0list.\u00a0Should\u00a0the\u00a0time\u00a0come\u00a0that\u00a0I\u00a0need\u00a0to\u00a0add\u00a0it,\u00a0then\u00a0Parameterize\u00a0Function\n(310)\u00a0is\u00a0an\u00a0easy\u00a0refactoring\u00a0to\u00a0apply.\u00a0I\u00a0often\u00a0find\u00a0it\u00a0useful\u00a0to\u00a0estimate\u00a0how\u00a0hard\u00a0it\u00a0would\nbe\u00a0to\u00a0use\u00a0refactoring\u00a0later\u00a0to\u00a0support\u00a0an\u00a0anticipated\u00a0change.\u00a0Only\u00a0if\u00a0I\u00a0can\u00a0see\u00a0that\u00a0it\nwould\u00a0be\u00a0substantially\u00a0harder\u00a0to\u00a0refactor\u00a0later\u00a0do\u00a0I\u00a0consider\u00a0adding\u00a0a\u00a0flexibility\nmechanism\u00a0now.\nThis\u00a0approach\u00a0to\u00a0design\u00a0goes\u00a0under\u00a0various\u00a0names:\u00a0simple\u00a0design,\u00a0incremental\u00a0design,\nor\u00a0yagni\u00a0[mf\u00adyagni]\u00a0(originally\u00a0an\u00a0acronym\u00a0for\u00a0\u201cyou\u00a0aren\u2019t\u00a0going\u00a0to\u00a0need\u00a0it\u201d).\u00a0Yagni\ndoesn\u2019t\u00a0imply\u00a0that\u00a0architectural\u00a0thinking\u00a0disappears,\u00a0although\u00a0it\u00a0is\u00a0sometimes\u00a0naively\napplied\u00a0that\u00a0way.\u00a0I\u00a0think\u00a0of\u00a0yagni\u00a0as\u00a0a\u00a0different\u00a0style\u00a0of\u00a0incorporating\u00a0architecture\u00a0and\ndesign\u00a0into\u00a0the\u00a0development\u00a0process\u2014a\u00a0style\u00a0that\u00a0isn\u2019t\u00a0credible\u00a0without\u00a0the\u00a0foundation\nof\u00a0refactoring.\nAdopting\u00a0yagni\u00a0doesn\u2019t\u00a0mean\u00a0I\u00a0neglect\u00a0all\u00a0upfront\u00a0architectural\u00a0thinking.\u00a0There\u00a0are\u00a0still\ncases\u00a0where\u00a0refactoring\u00a0changes\u00a0are\u00a0difficult\u00a0and\u00a0some\u00a0preparatory\u00a0thinking\u00a0can\u00a0save\ntime.\u00a0But\u00a0the\u00a0balance\u00a0has\u00a0shifted\u00a0a\u00a0long\u00a0way\u2014I\u2019m\u00a0much\u00a0more\u00a0inclined\u00a0to\u00a0deal\u00a0with\nwww.EBooksWorld.ir\n", "page": 75, "type": "text", "section": "Page 75"}
{"text": "issues\u00a0later\u00a0when\u00a0I\u00a0understand\u00a0them\u00a0better.\u00a0All\u00a0this\u00a0has\u00a0led\u00a0to\u00a0a\u00a0growing\u00a0discipline\u00a0of\nevolutionary\u00a0architecture\u00a0[Ford\u00a0et\u00a0al.]\u00a0where\u00a0architects\u00a0explore\u00a0the\u00a0patterns\u00a0and\npractices\u00a0that\u00a0take\u00a0advantage\u00a0of\u00a0our\u00a0ability\u00a0to\u00a0iterate\u00a0over\u00a0architectural\u00a0decisions.\nREFACTORING AND THE WIDER SOFTWARE DEVELOPMENT\nPROCESS\nIf\u00a0you\u2019ve\u00a0read\u00a0the\u00a0earlier\u00a0section\u00a0on\u00a0problems,\u00a0one\u00a0lesson\u00a0you\u2019ve\u00a0probably\u00a0drawn\u00a0is\u00a0that\nthe\u00a0effectiveness\u00a0of\u00a0refactoring\u00a0is\u00a0tied\u00a0to\u00a0other\u00a0software\u00a0practices\u00a0that\u00a0a\u00a0team\u00a0uses.\nIndeed,\u00a0refactoring\u2019s\u00a0early\u00a0adoption\u00a0was\u00a0as\u00a0part\u00a0of\u00a0Extreme\u00a0Programming\u00a0[mf\u00adxp]\u00a0(XP),\na\u00a0process\u00a0which\u00a0was\u00a0notable\u00a0for\u00a0putting\u00a0together\u00a0a\u00a0set\u00a0of\u00a0relatively\u00a0unusual\u00a0and\ninterdependent\u00a0practices\u2014such\u00a0as\u00a0continuous\u00a0integration,\u00a0self\u00adtesting\u00a0code,\u00a0and\nrefactoring\u00a0(the\u00a0latter\u00a0two\u00a0woven\u00a0into\u00a0test\u00addriven\u00a0development).\nExtreme\u00a0Programming\u00a0was\u00a0one\u00a0of\u00a0the\u00a0first\u00a0agile\u00a0software\u00a0methods\u00a0[mf\u00adnm]\u00a0and,\u00a0for\nseveral\u00a0years,\u00a0led\u00a0the\u00a0rise\u00a0of\u00a0agile\u00a0techniques.\u00a0Enough\u00a0projects\u00a0now\u00a0use\u00a0agile\u00a0methods\nthat\u00a0agile\u00a0thinking\u00a0is\u00a0generally\u00a0regarded\u00a0as\u00a0mainstream\u2014but\u00a0in\u00a0reality\u00a0most\u00a0\u201cagile\u201d\nprojects\u00a0only\u00a0use\u00a0the\u00a0name.\u00a0To\u00a0really\u00a0operate\u00a0in\u00a0an\u00a0agile\u00a0way,\u00a0a\u00a0team\u00a0has\u00a0to\u00a0be\u00a0capable\nand\u00a0enthusiastic\u00a0refactorers\u2014and\u00a0for\u00a0that,\u00a0many\u00a0aspects\u00a0of\u00a0their\u00a0process\u00a0have\u00a0to\u00a0align\nwith\u00a0making\u00a0refactoring\u00a0a\u00a0regular\u00a0part\u00a0of\u00a0their\u00a0work.\nThe\u00a0first\u00a0foundation\u00a0for\u00a0refactoring\u00a0is\u00a0self\u00adtesting\u00a0code.\u00a0By\u00a0this,\u00a0I\u00a0mean\u00a0that\u00a0there\u00a0is\u00a0a\nsuite\u00a0of\u00a0automated\u00a0tests\u00a0that\u00a0I\u00a0can\u00a0run\u00a0and\u00a0be\u00a0confident\u00a0that,\u00a0if\u00a0I\u00a0made\u00a0an\u00a0error\u00a0in\u00a0my\nprogramming,\u00a0some\u00a0test\u00a0will\u00a0fail.\u00a0This\u00a0is\u00a0such\u00a0an\u00a0important\u00a0foundation\u00a0for\u00a0refactoring\nthat\u00a0I\u2019ll\u00a0spend\u00a0a\u00a0chapter\u00a0talking\u00a0more\u00a0about\u00a0this.\nTo\u00a0refactor\u00a0on\u00a0a\u00a0team,\u00a0it\u2019s\u00a0important\u00a0that\u00a0each\u00a0member\u00a0can\u00a0refactor\u00a0when\u00a0they\u00a0need\u00a0to\nwithout\u00a0interfering\u00a0with\u00a0others\u2019\u00a0work.\u00a0This\u00a0is\u00a0why\u00a0I\u00a0encourage\u00a0Continuous\u00a0Integration.\nWith\u00a0CI,\u00a0each\u00a0member\u2019s\u00a0refactoring\u00a0efforts\u00a0are\u00a0quickly\u00a0shared\u00a0with\u00a0their\u00a0colleagues.\u00a0No\none\u00a0ends\u00a0up\u00a0building\u00a0new\u00a0work\u00a0on\u00a0interfaces\u00a0that\u00a0are\u00a0being\u00a0removed,\u00a0and\u00a0if\u00a0the\nrefactoring\u00a0is\u00a0going\u00a0to\u00a0cause\u00a0a\u00a0problem\u00a0with\u00a0someone\u00a0else\u2019s\u00a0work,\u00a0we\u00a0know\u00a0about\u00a0this\nquickly.\u00a0Self\u00adtesting\u00a0code\u00a0is\u00a0also\u00a0a\u00a0key\u00a0element\u00a0of\u00a0Continuous\u00a0Integration,\u00a0so\u00a0there\u00a0is\u00a0a\nstrong\u00a0synergy\u00a0between\u00a0the\u00a0three\u00a0practices\u00a0of\u00a0self\u00adtesting\u00a0code,\u00a0continuous\u00a0integration,\nand\u00a0refactoring.\nWith\u00a0this\u00a0trio\u00a0of\u00a0practices\u00a0in\u00a0place,\u00a0we\u00a0enable\u00a0the\u00a0Yagni\u00a0design\u00a0approach\u00a0that\u00a0I\u00a0talked\nabout\u00a0in\u00a0the\u00a0previous\u00a0section.\u00a0Refactoring\u00a0and\u00a0yagni\u00a0positively\u00a0reinforce\u00a0each\u00a0other:\nNot\u00a0just\u00a0is\u00a0refactoring\u00a0(and\u00a0its\u00a0prerequisites)\u00a0a\u00a0foundation\u00a0for\u00a0yagni\u2014yagni\u00a0makes\u00a0it\neasier\u00a0to\u00a0do\u00a0refactoring.\u00a0This\u00a0is\u00a0because\u00a0it\u2019s\u00a0easier\u00a0to\u00a0change\u00a0a\u00a0simple\u00a0system\u00a0than\u00a0one\nthat\u00a0has\u00a0lots\u00a0of\u00a0speculative\u00a0flexibility\u00a0included.\u00a0Balance\u00a0these\u00a0practices,\u00a0and\u00a0you\u00a0can\u00a0get\nwww.EBooksWorld.ir\n", "page": 76, "type": "text", "section": "Page 76"}
{"text": "into\u00a0a\u00a0virtuous\u00a0circle\u00a0with\u00a0a\u00a0code\u00a0base\u00a0that\u00a0responds\u00a0rapidly\u00a0to\u00a0changing\u00a0needs\u00a0and\u00a0is\nreliable.\nWith\u00a0these\u00a0core\u00a0practices\u00a0in\u00a0place,\u00a0we\u00a0have\u00a0the\u00a0foundation\u00a0to\u00a0take\u00a0advantage\u00a0of\u00a0the\nother\u00a0elements\u00a0of\u00a0the\u00a0agile\u00a0mindset.\u00a0Continuous\u00a0Delivery\u00a0keeps\u00a0our\u00a0software\u00a0in\u00a0an\nalways\u00adreleasable\u00a0state.\u00a0This\u00a0is\u00a0what\u00a0allows\u00a0many\u00a0web\u00a0organizations\u00a0to\u00a0release\u00a0updates\nmany\u00a0times\u00a0a\u00a0day\u2014but\u00a0even\u00a0if\u00a0we\u00a0don\u2019t\u00a0need\u00a0that,\u00a0it\u00a0reduces\u00a0risk\u00a0and\u00a0allows\u00a0us\u00a0to\nschedule\u00a0our\u00a0releases\u00a0to\u00a0satisfy\u00a0business\u00a0needs\u00a0rather\u00a0than\u00a0technological\u00a0constraints.\nWith\u00a0a\u00a0firm\u00a0technical\u00a0foundation,\u00a0we\u00a0can\u00a0drastically\u00a0reduce\u00a0the\u00a0time\u00a0it\u00a0takes\u00a0to\u00a0get\u00a0a\ngood\u00a0idea\u00a0into\u00a0production\u00a0code,\u00a0allowing\u00a0us\u00a0to\u00a0better\u00a0serve\u00a0our\u00a0customers.\nFurthermore,\u00a0these\u00a0practices\u00a0increase\u00a0the\u00a0reliability\u00a0of\u00a0our\u00a0software,\u00a0with\u00a0less\u00a0bugs\u00a0to\nspend\u00a0time\u00a0fixing.\nStated\u00a0like\u00a0this,\u00a0it\u00a0all\u00a0sounds\u00a0rather\u00a0simple\u2014but\u00a0in\u00a0practice\u00a0it\u00a0isn\u2019t.\u00a0Software\ndevelopment,\u00a0whatever\u00a0the\u00a0approach,\u00a0is\u00a0a\u00a0tricky\u00a0business,\u00a0with\u00a0complex\u00a0interactions\nbetween\u00a0people\u00a0and\u00a0machines.\u00a0The\u00a0approach\u00a0I\u00a0describe\u00a0here\u00a0is\u00a0a\u00a0proven\u00a0way\u00a0to\u00a0handle\nthis\u00a0complexity,\u00a0but\u00a0like\u00a0any\u00a0approach,\u00a0it\u00a0requires\u00a0practice\u00a0and\u00a0skill.\nREFACTORING AND PERFORMANCE\nA\u00a0common\u00a0concern\u00a0with\u00a0refactoring\u00a0is\u00a0the\u00a0effect\u00a0it\u00a0has\u00a0on\u00a0the\u00a0performance\u00a0of\u00a0a\nprogram.\u00a0To\u00a0make\u00a0the\u00a0software\u00a0easier\u00a0to\u00a0understand,\u00a0I\u00a0often\u00a0make\u00a0changes\u00a0that\u00a0will\ncause\u00a0the\u00a0program\u00a0to\u00a0run\u00a0slower.\u00a0This\u00a0is\u00a0an\u00a0important\u00a0issue.\u00a0I\u00a0don\u2019t\u00a0belong\u00a0to\u00a0the\u00a0school\nof\u00a0thought\u00a0that\u00a0ignores\u00a0performance\u00a0in\u00a0favor\u00a0of\u00a0design\u00a0purity\u00a0or\u00a0in\u00a0hopes\u00a0of\u00a0faster\nhardware.\u00a0Software\u00a0has\u00a0been\u00a0rejected\u00a0for\u00a0being\u00a0too\u00a0slow,\u00a0and\u00a0faster\u00a0machines\u00a0merely\nmove\u00a0the\u00a0goalposts.\u00a0Refactoring\u00a0can\u00a0certainly\u00a0make\u00a0software\u00a0go\u00a0more\u00a0slowly\u2014but\u00a0it\nalso\u00a0makes\u00a0the\u00a0software\u00a0more\u00a0amenable\u00a0to\u00a0performance\u00a0tuning.\u00a0The\u00a0secret\u00a0to\u00a0fast\nsoftware,\u00a0in\u00a0all\u00a0but\u00a0hard\u00a0real\u00adtime\u00a0contexts,\u00a0is\u00a0to\u00a0write\u00a0tunable\u00a0software\u00a0first\u00a0and\u00a0then\ntune\u00a0it\u00a0for\u00a0sufficient\u00a0speed.\nI\u2019ve\u00a0seen\u00a0three\u00a0general\u00a0approaches\u00a0to\u00a0writing\u00a0fast\u00a0software.\u00a0The\u00a0most\u00a0serious\u00a0of\u00a0these\u00a0is\ntime\u00a0budgeting,\u00a0often\u00a0used\u00a0in\u00a0hard\u00a0real\u00adtime\u00a0systems.\u00a0As\u00a0you\u00a0decompose\u00a0the\u00a0design,\nyou\u00a0give\u00a0each\u00a0component\u00a0a\u00a0budget\u00a0for\u00a0resources\u2014time\u00a0and\u00a0footprint.\u00a0That\u00a0component\nmust\u00a0not\u00a0exceed\u00a0its\u00a0budget,\u00a0although\u00a0a\u00a0mechanism\u00a0for\u00a0exchanging\u00a0budgeted\u00a0resources\nis\u00a0allowed.\u00a0Time\u00a0budgeting\u00a0focuses\u00a0attention\u00a0on\u00a0hard\u00a0performance\u00a0times.\u00a0It\u00a0is\u00a0essential\nfor\u00a0systems,\u00a0such\u00a0as\u00a0heart\u00a0pacemakers,\u00a0in\u00a0which\u00a0late\u00a0data\u00a0is\u00a0always\u00a0bad\u00a0data.\u00a0This\ntechnique\u00a0is\u00a0inappropriate\u00a0for\u00a0other\u00a0kinds\u00a0of\u00a0systems,\u00a0such\u00a0as\u00a0the\u00a0corporate\ninformation\u00a0systems\u00a0with\u00a0which\u00a0I\u00a0usually\u00a0work.\nThe\u00a0second\u00a0approach\u00a0is\u00a0the\u00a0constant\u00a0attention\u00a0approach.\u00a0Here,\u00a0every\u00a0programmer,\u00a0all\nwww.EBooksWorld.ir\n", "page": 77, "type": "text", "section": "Page 77"}
{"text": "the\u00a0time,\u00a0does\u00a0whatever\u00a0she\u00a0can\u00a0to\u00a0keep\u00a0performance\u00a0high.\u00a0This\u00a0is\u00a0a\u00a0common\u00a0approach\nthat\u00a0is\u00a0intuitively\u00a0attractive\u2014but\u00a0it\u00a0does\u00a0not\u00a0work\u00a0very\u00a0well.\u00a0Changes\u00a0that\u00a0improve\nperformance\u00a0usually\u00a0make\u00a0the\u00a0program\u00a0harder\u00a0to\u00a0work\u00a0with.\u00a0This\u00a0slows\u00a0development.\nThis\u00a0would\u00a0be\u00a0a\u00a0cost\u00a0worth\u00a0paying\u00a0if\u00a0the\u00a0resulting\u00a0software\u00a0were\u00a0quicker\u2014but\u00a0usually\u00a0it\nis\u00a0not.\u00a0The\u00a0performance\u00a0improvements\u00a0are\u00a0spread\u00a0all\u00a0around\u00a0the\u00a0program\u037e\u00a0each\nimprovement\u00a0is\u00a0made\u00a0with\u00a0a\u00a0narrow\u00a0perspective\u00a0of\u00a0the\u00a0program\u2019s\u00a0behavior,\u00a0and\u00a0often\nwith\u00a0a\u00a0misunderstanding\u00a0of\u00a0how\u00a0a\u00a0compiler,\u00a0runtime,\u00a0and\u00a0hardware\u00a0behaves.\nIt\u00a0Takes\u00a0Awhile\u00a0to\u00a0Create\u00a0Nothing\nThe\u00a0Chrysler\u00a0Comprehensive\u00a0Compensation\u00a0pay\u00a0process\u00a0was\u00a0running\u00a0too\nslowly.\u00a0Although\u00a0we\u00a0were\u00a0still\u00a0in\u00a0development,\u00a0it\u00a0began\u00a0to\u00a0bother\u00a0us,\u00a0because\nit\u00a0was\u00a0slowing\u00a0down\u00a0the\u00a0tests.\nKent\u00a0Beck,\u00a0Martin\u00a0Fowler,\u00a0and\u00a0I\u00a0decided\u00a0we\u2019d\u00a0fix\u00a0it\u00a0up.\u00a0While\u00a0I\u00a0waited\u00a0for\u00a0us\nto\u00a0get\u00a0together,\u00a0I\u00a0was\u00a0speculating,\u00a0on\u00a0the\u00a0basis\u00a0of\u00a0my\u00a0extensive\u00a0knowledge\u00a0of\nthe\u00a0system,\u00a0about\u00a0what\u00a0was\u00a0probably\u00a0slowing\u00a0it\u00a0down.\u00a0I\u00a0thought\u00a0of\u00a0several\npossibilities\u00a0and\u00a0chatted\u00a0with\u00a0folks\u00a0about\u00a0the\u00a0changes\u00a0that\u00a0were\u00a0probably\nnecessary.\u00a0We\u00a0came\u00a0up\u00a0with\u00a0some\u00a0really\u00a0good\u00a0ideas\u00a0about\u00a0what\u00a0would\u00a0make\nthe\u00a0system\u00a0go\u00a0faster.\nThen\u00a0we\u00a0measured\u00a0performance\u00a0using\u00a0Kent\u2019s\u00a0profiler.\u00a0None\u00a0of\u00a0the\npossibilities\u00a0I\u00a0had\u00a0thought\u00a0of\u00a0had\u00a0anything\u00a0to\u00a0do\u00a0with\u00a0the\u00a0problem.\u00a0Instead,\u00a0we\nfound\u00a0that\u00a0the\u00a0system\u00a0was\u00a0spending\u00a0half\u00a0its\u00a0time\u00a0creating\u00a0instances\u00a0of\u00a0date.\nEven\u00a0more\u00a0interesting\u00a0was\u00a0that\u00a0all\u00a0the\u00a0instances\u00a0had\u00a0the\u00a0same\u00a0couple\u00a0of\nvalues.\nWhen\u00a0we\u00a0looked\u00a0at\u00a0the\u00a0date\u00adcreation\u00a0logic,\u00a0we\u00a0saw\u00a0some\u00a0opportunities\u00a0for\noptimizing\u00a0how\u00a0these\u00a0dates\u00a0were\u00a0created.\u00a0They\u00a0were\u00a0all\u00a0going\u00a0through\u00a0a\nstring\u00a0conversion\u00a0even\u00a0though\u00a0no\u00a0external\u00a0inputs\u00a0were\u00a0involved.\u00a0The\u00a0code\nwas\u00a0just\u00a0using\u00a0string\u00a0conversion\u00a0for\u00a0convenience\u00a0of\u00a0typing.\u00a0Maybe\u00a0we\u00a0could\noptimize\u00a0that.\nThen\u00a0we\u00a0looked\u00a0at\u00a0how\u00a0these\u00a0dates\u00a0were\u00a0being\u00a0used.\u00a0It\u00a0turned\u00a0out\u00a0that\u00a0the\nhuge\u00a0bulk\u00a0of\u00a0them\u00a0were\u00a0all\u00a0creating\u00a0instances\u00a0of\u00a0date\u00a0range,\u00a0an\u00a0object\u00a0with\u00a0a\nfrom\u00a0date\u00a0and\u00a0a\u00a0to\u00a0date.\u00a0Looking\u00a0around\u00a0little\u00a0more,\u00a0we\u00a0realized\u00a0that\u00a0most\u00a0of\nthese\u00a0date\u00a0ranges\u00a0were\u00a0empty!\nAs\u00a0we\u00a0worked\u00a0with\u00a0date\u00a0range,\u00a0we\u00a0used\u00a0the\u00a0convention\u00a0that\u00a0any\u00a0date\u00a0range\nthat\u00a0ended\u00a0before\u00a0it\u00a0started\u00a0was\u00a0empty.\u00a0It\u2019s\u00a0a\u00a0good\u00a0convention\u00a0and\u00a0fits\u00a0in\u00a0well\nwith\u00a0how\u00a0the\u00a0class\u00a0works.\u00a0Soon\u00a0after\u00a0we\u00a0started\u00a0using\u00a0this\u00a0convention,\u00a0we\nrealized\u00a0that\u00a0just\u00a0creating\u00a0a\u00a0date\u00a0range\u00a0that\u00a0starts\u00a0after\u00a0it\u00a0ends\u00a0wasn\u2019t\u00a0clear\ncode,\u00a0so\u00a0we\u00a0extracted\u00a0that\u00a0behavior\u00a0into\u00a0a\u00a0factory\u00a0method\u00a0for\u00a0empty\u00a0date\nwww.EBooksWorld.ir\n", "page": 78, "type": "text", "section": "Page 78"}
{"text": "\u2014\u00a0Ron\u00a0Jeffries\nranges.\nWe\u00a0had\u00a0made\u00a0that\u00a0change\u00a0to\u00a0make\u00a0the\u00a0code\u00a0clearer,\u00a0but\u00a0we\u00a0received\u00a0an\nunexpected\u00a0payoff.\u00a0We\u00a0created\u00a0a\u00a0constant\u00a0empty\u00a0date\u00a0range\u00a0and\u00a0adjusted\nthe\u00a0factory\u00a0method\u00a0to\u00a0return\u00a0that\u00a0object\u00a0instead\u00a0of\u00a0creating\u00a0it\u00a0every\u00a0time.\u00a0That\nchange\u00a0doubled\u00a0the\u00a0speed\u00a0of\u00a0the\u00a0system,\u00a0enough\u00a0for\u00a0the\u00a0tests\u00a0to\u00a0be\nbearable.\u00a0It\u00a0took\u00a0us\u00a0about\u00a0five\u00a0minutes.\nI\u00a0had\u00a0speculated\u00a0with\u00a0various\u00a0members\u00a0of\u00a0the\u00a0team\u00a0(Kent\u00a0and\u00a0Martin\u00a0deny\nparticipating\u00a0in\u00a0the\u00a0speculation)\u00a0on\u00a0what\u00a0was\u00a0likely\u00a0wrong\u00a0with\u00a0code\u00a0we\u00a0knew\nvery\u00a0well.\u00a0We\u00a0had\u00a0even\u00a0sketched\u00a0some\u00a0designs\u00a0for\u00a0improvements\u00a0without\nfirst\u00a0measuring\u00a0what\u00a0was\u00a0going\u00a0on.\nWe\u00a0were\u00a0completely\u00a0wrong.\u00a0Aside\u00a0from\u00a0having\u00a0a\u00a0really\u00a0interesting\nconversation,\u00a0we\u00a0were\u00a0doing\u00a0no\u00a0good\u00a0at\u00a0all.\nThe\u00a0lesson\u00a0is:\u00a0Even\u00a0if\u00a0you\u00a0know\u00a0exactly\u00a0what\u00a0is\u00a0going\u00a0on\u00a0in\u00a0your\u00a0system,\nmeasure\u00a0performance,\u00a0don\u2019t\u00a0speculate.\u00a0You\u2019ll\u00a0learn\u00a0something,\u00a0and\u00a0nine\ntimes\u00a0out\u00a0of\u00a0ten,\u00a0it\u00a0won\u2019t\u00a0be\u00a0that\u00a0you\u00a0were\u00a0right!\nThe\u00a0interesting\u00a0thing\u00a0about\u00a0performance\u00a0is\u00a0that\u00a0in\u00a0most\nprograms,\u00a0most\u00a0of\u00a0their\u00a0time\u00a0is\u00a0spent\u00a0in\u00a0a\u00a0small\u00a0fraction\u00a0of\u00a0the\u00a0code.\u00a0If\u00a0I\u00a0optimize\u00a0all\u00a0the\ncode\u00a0equally,\u00a0I\u2019ll\u00a0end\u00a0up\u00a0with\u00a090\u00a0percent\u00a0of\u00a0my\u00a0work\u00a0wasted\u00a0because\u00a0it\u2019s\u00a0optimizing\ncode\u00a0that\u00a0isn\u2019t\u00a0run\u00a0much.\u00a0The\u00a0time\u00a0spent\u00a0making\u00a0the\u00a0program\u00a0fast\u2014the\u00a0time\u00a0lost\nbecause\u00a0of\u00a0lack\u00a0of\u00a0clarity\u2014is\u00a0all\u00a0wasted\u00a0time.\nThe\u00a0third\u00a0approach\u00a0to\u00a0performance\u00a0improvement\u00a0takes\u00a0advantage\u00a0of\u00a0this\u00a090\u00adpercent\nstatistic.\u00a0In\u00a0this\u00a0approach,\u00a0I\u00a0build\u00a0my\u00a0program\u00a0in\u00a0a\u00a0well\u00adfactored\u00a0manner\u00a0without\npaying\u00a0attention\u00a0to\u00a0performance\u00a0until\u00a0I\u00a0begin\u00a0a\u00a0deliberate\u00a0performance\u00a0optimization\nexercise.\u00a0During\u00a0this\u00a0performance\u00a0optimization,\u00a0I\u00a0follow\u00a0a\u00a0specific\u00a0process\u00a0to\u00a0tune\u00a0the\nprogram.\nI\u00a0begin\u00a0by\u00a0running\u00a0the\u00a0program\u00a0under\u00a0a\u00a0profiler\u00a0that\u00a0monitors\u00a0the\u00a0program\u00a0and\u00a0tells\u00a0me\nwhere\u00a0it\u00a0is\u00a0consuming\u00a0time\u00a0and\u00a0space.\u00a0This\u00a0way\u00a0I\u00a0can\u00a0find\u00a0that\u00a0small\u00a0part\u00a0of\u00a0the\nprogram\u00a0where\u00a0the\u00a0performance\u00a0hot\u00a0spots\u00a0lie.\u00a0I\u00a0then\u00a0focus\u00a0on\u00a0those\u00a0performance\u00a0hot\nspots\u00a0using\u00a0the\u00a0same\u00a0optimizations\u00a0I\u00a0would\u00a0use\u00a0in\u00a0the\u00a0constant\u00adattention\u00a0approach.\u00a0But\nsince\u00a0I\u2019m\u00a0focusing\u00a0my\u00a0attention\u00a0on\u00a0a\u00a0hot\u00a0spot,\u00a0I\u2019m\u00a0getting\u00a0much\u00a0more\u00a0effect\u00a0with\u00a0less\nwork.\u00a0Even\u00a0so,\u00a0I\u00a0remain\u00a0cautious.\u00a0As\u00a0in\u00a0refactoring,\u00a0I\u00a0make\u00a0the\u00a0changes\u00a0in\u00a0small\u00a0steps.\nAfter\u00a0each\u00a0step\u00a0I\u00a0compile,\u00a0test,\u00a0and\u00a0rerun\u00a0the\u00a0profiler.\u00a0If\u00a0I\u00a0haven\u2019t\u00a0improved\nperformance,\u00a0I\u00a0back\u00a0out\u00a0the\u00a0change.\u00a0I\u00a0continue\u00a0the\u00a0process\u00a0of\u00a0finding\u00a0and\u00a0removing\u00a0hot\nspots\u00a0until\u00a0I\u00a0get\u00a0the\u00a0performance\u00a0that\u00a0satisfies\u00a0my\u00a0users.\nwww.EBooksWorld.ir\n", "page": 79, "type": "text", "section": "Page 79"}
{"text": "Having\u00a0a\u00a0well\u00adfactored\u00a0program\u00a0helps\u00a0with\u00a0this\u00a0style\u00a0of\u00a0optimization\u00a0in\u00a0two\u00a0ways.\u00a0First,\nit\u00a0gives\u00a0me\u00a0time\u00a0to\u00a0spend\u00a0on\u00a0performance\u00a0tuning.\u00a0With\u00a0well\u00adfactored\u00a0code,\u00a0I\u00a0can\u00a0add\nfunctionality\u00a0more\u00a0quickly.\u00a0This\u00a0gives\u00a0me\u00a0more\u00a0time\u00a0to\u00a0focus\u00a0on\u00a0performance.\u00a0(Profiling\nensures\u00a0I\u00a0spend\u00a0that\u00a0time\u00a0on\u00a0the\u00a0right\u00a0place.)\u00a0Second,\u00a0with\u00a0a\u00a0well\u00adfactored\u00a0program\u00a0I\nhave\u00a0finer\u00a0granularity\u00a0for\u00a0my\u00a0performance\u00a0analysis.\u00a0My\u00a0profiler\u00a0leads\u00a0me\u00a0to\u00a0smaller\nparts\u00a0of\u00a0the\u00a0code,\u00a0which\u00a0are\u00a0easier\u00a0to\u00a0tune.\u00a0With\u00a0clearer\u00a0code,\u00a0I\u00a0have\u00a0a\u00a0better\nunderstanding\u00a0of\u00a0my\u00a0options\u00a0and\u00a0of\u00a0what\u00a0kind\u00a0of\u00a0tuning\u00a0will\u00a0work.\nI\u2019ve\u00a0found\u00a0that\u00a0refactoring\u00a0helps\u00a0me\u00a0write\u00a0fast\u00a0software.\u00a0It\u00a0slows\u00a0the\u00a0software\u00a0in\u00a0the\nshort\u00a0term\u00a0while\u00a0I\u2019m\u00a0refactoring,\u00a0but\u00a0makes\u00a0it\u00a0easier\u00a0to\u00a0tune\u00a0during\u00a0optimization.\u00a0I\u00a0end\nup\u00a0well\u00a0ahead.\nWHERE DID REFACTORING COME FROM?\nI\u2019ve\u00a0not\u00a0succeeded\u00a0in\u00a0pinning\u00a0down\u00a0the\u00a0birth\u00a0of\u00a0the\u00a0term\u00a0\u201crefactoring.\u201d\u00a0Good\nprogrammers\u00a0have\u00a0always\u00a0spent\u00a0at\u00a0least\u00a0some\u00a0time\u00a0cleaning\u00a0up\u00a0their\u00a0code.\u00a0They\u00a0do\u00a0this\nbecause\u00a0they\u00a0have\u00a0learned\u00a0that\u00a0clean\u00a0code\u00a0is\u00a0easier\u00a0to\u00a0change\u00a0than\u00a0complex\u00a0and\u00a0messy\ncode,\u00a0and\u00a0good\u00a0programmers\u00a0know\u00a0that\u00a0they\u00a0rarely\u00a0write\u00a0clean\u00a0code\u00a0the\u00a0first\u00a0time\naround.\nRefactoring\u00a0goes\u00a0beyond\u00a0this.\u00a0In\u00a0this\u00a0book,\u00a0I\u2019m\u00a0advocating\u00a0refactoring\u00a0as\u00a0a\u00a0key\u00a0element\nin\u00a0the\u00a0whole\u00a0process\u00a0of\u00a0software\u00a0development.\u00a0Two\u00a0of\u00a0the\u00a0first\u00a0people\u00a0to\u00a0recognize\u00a0the\nimportance\u00a0of\u00a0refactoring\u00a0were\u00a0Ward\u00a0Cunningham\u00a0and\u00a0Kent\u00a0Beck,\u00a0who\u00a0worked\u00a0with\nSmalltalk\u00a0from\u00a0the\u00a01980s\u00a0onward.\u00a0Smalltalk\u00a0is\u00a0an\u00a0environment\u00a0that\u00a0even\u00a0then\u00a0was\nparticularly\u00a0hospitable\u00a0to\u00a0refactoring.\u00a0It\u00a0is\u00a0a\u00a0very\u00a0dynamic\u00a0environment\u00a0that\u00a0allows\u00a0you\nto\u00a0quickly\u00a0write\u00a0highly\u00a0functional\u00a0software.\u00a0Smalltalk\u00a0had\u00a0a\u00a0very\u00a0short\u00a0compile\u00adlink\u00ad\nexecute\u00a0cycle\u00a0for\u00a0its\u00a0time,\u00a0which\u00a0made\u00a0it\u00a0easy\u00a0to\u00a0change\u00a0things\u00a0quickly\u00a0at\u00a0a\u00a0time\u00a0where\novernight\u00a0compile\u00a0cycles\u00a0were\u00a0not\u00a0unknown.\u00a0It\u00a0is\u00a0also\u00a0object\u00adoriented\u00a0and\u00a0thus\u00a0provides\npowerful\u00a0tools\u00a0for\u00a0minimizing\u00a0the\u00a0impact\u00a0of\u00a0change\u00a0behind\u00a0well\u00addefined\u00a0interfaces.\nWard\u00a0and\u00a0Kent\u00a0explored\u00a0software\u00a0development\u00a0approaches\u00a0geared\u00a0to\u00a0this\u00a0kind\u00a0of\nenvironment,\u00a0and\u00a0their\u00a0work\u00a0developed\u00a0into\u00a0Extreme\u00a0Programming.\u00a0They\u00a0realized\u00a0that\nrefactoring\u00a0was\u00a0important\u00a0in\u00a0improving\u00a0their\u00a0productivity\u00a0and,\u00a0ever\u00a0since,\u00a0have\u00a0been\nworking\u00a0with\u00a0refactoring,\u00a0applying\u00a0it\u00a0to\u00a0serious\u00a0software\u00a0projects\u00a0and\u00a0refining\u00a0it.\nWard\u00a0and\u00a0Kent\u2019s\u00a0ideas\u00a0were\u00a0a\u00a0strong\u00a0influence\u00a0on\u00a0the\u00a0Smalltalk\u00a0community,\u00a0and\u00a0the\nnotion\u00a0of\u00a0refactoring\u00a0became\u00a0an\u00a0important\u00a0element\u00a0in\u00a0the\u00a0Smalltalk\u00a0culture.\u00a0Another\nleading\u00a0figure\u00a0in\u00a0the\u00a0Smalltalk\u00a0community\u00a0is\u00a0Ralph\u00a0Johnson,\u00a0a\u00a0professor\u00a0at\u00a0the\nUniversity\u00a0of\u00a0Illinois\u00a0at\u00a0Urbana\u00adChampaign,\u00a0who\u00a0is\u00a0famous\u00a0as\u00a0one\u00a0of\u00a0the\u00a0authors\u00a0of\u00a0the\n\u201cGang\u00a0of\u00a0Four\u201d\u00a0[gof]\u00a0book\u00a0on\u00a0design\u00a0patterns.\u00a0One\u00a0of\u00a0Ralph\u2019s\u00a0biggest\u00a0interests\u00a0is\u00a0in\ndeveloping\u00a0software\u00a0frameworks.\u00a0He\u00a0explored\u00a0how\u00a0refactoring\u00a0can\u00a0help\u00a0develop\u00a0an\nwww.EBooksWorld.ir\n", "page": 80, "type": "text", "section": "Page 80"}
{"text": "efficient\u00a0and\u00a0flexible\u00a0framework.\nBill\u00a0Opdyke\u00a0was\u00a0one\u00a0of\u00a0Ralph\u2019s\u00a0doctoral\u00a0students\u00a0and\u00a0was\u00a0particularly\u00a0interested\u00a0in\nframeworks.\u00a0He\u00a0saw\u00a0the\u00a0potential\u00a0value\u00a0of\u00a0refactoring\u00a0and\u00a0saw\u00a0that\u00a0it\u00a0could\u00a0be\u00a0applied\nto\u00a0much\u00a0more\u00a0than\u00a0Smalltalk.\u00a0His\u00a0background\u00a0was\u00a0in\u00a0telephone\u00a0switch\u00a0development,\u00a0in\nwhich\u00a0a\u00a0great\u00a0deal\u00a0of\u00a0complexity\u00a0accrues\u00a0over\u00a0time\u00a0and\u00a0changes\u00a0are\u00a0difficult\u00a0to\u00a0make.\nBill\u2019s\u00a0doctoral\u00a0research\u00a0looked\u00a0at\u00a0refactoring\u00a0from\u00a0a\u00a0tool\u00a0builder\u2019s\u00a0perspective.\u00a0Bill\u00a0was\ninterested\u00a0in\u00a0refactorings\u00a0that\u00a0would\u00a0be\u00a0useful\u00a0for\u00a0C++\u00a0framework\u00a0development\u037e\u00a0he\nresearched\u00a0the\u00a0necessary\u00a0semantics\u00adpreserving\u00a0refactorings\u00a0and\u00a0showed\u00a0how\u00a0to\u00a0prove\nthey\u00a0were\u00a0semantics\u00adpreserving\u00a0and\u00a0how\u00a0a\u00a0tool\u00a0could\u00a0implement\u00a0these\u00a0ideas.\u00a0Bill\u2019s\ndoctoral\u00a0thesis\u00a0[Opdyke]\u00a0was\u00a0the\u00a0first\u00a0substantial\u00a0work\u00a0on\u00a0refactoring.\nI\u00a0remember\u00a0meeting\u00a0Bill\u00a0at\u00a0the\u00a0OOPSLA\u00a0conference\u00a0in\u00a01992.\u00a0We\u00a0sat\u00a0in\u00a0a\u00a0caf\u00e9\u00a0and\u00a0he\ntold\u00a0me\u00a0about\u00a0his\u00a0research.\u00a0I\u00a0remember\u00a0thinking,\u00a0\u201cInteresting,\u00a0but\u00a0not\u00a0really\u00a0that\nimportant.\u201d\u00a0Boy,\u00a0was\u00a0I\u00a0wrong!\nJohn\u00a0Brant\u00a0and\u00a0Don\u00a0Roberts\u00a0took\u00a0the\u00a0refactoring\u00a0tool\u00a0ideas\u00a0much\u00a0further\u00a0to\u00a0produce\nthe\u00a0Refactoring\u00a0Browser,\u00a0the\u00a0first\u00a0refactoring\u00a0tool,\u00a0appropriately\u00a0for\u00a0the\u00a0Smalltalk\nenvironment.\nAnd\u00a0me?\u00a0I\u2019d\u00a0always\u00a0been\u00a0inclined\u00a0to\u00a0clean\u00a0code,\u00a0but\u00a0I\u2019d\u00a0never\u00a0considered\u00a0it\u00a0to\u00a0be\u00a0that\nimportant.\u00a0Then,\u00a0I\u00a0worked\u00a0on\u00a0a\u00a0project\u00a0with\u00a0Kent\u00a0and\u00a0saw\u00a0the\u00a0way\u00a0he\u00a0used\u00a0refactoring.\nI\u00a0saw\u00a0the\u00a0difference\u00a0it\u00a0made\u00a0in\u00a0productivity\u00a0and\u00a0quality.\u00a0That\u00a0experience\u00a0convinced\u00a0me\nthat\u00a0refactoring\u00a0was\u00a0a\u00a0very\u00a0important\u00a0technique.\u00a0I\u00a0was\u00a0frustrated,\u00a0however,\u00a0because\nthere\u00a0was\u00a0no\u00a0book\u00a0that\u00a0I\u00a0could\u00a0give\u00a0to\u00a0a\u00a0working\u00a0programmer,\u00a0and\u00a0none\u00a0of\u00a0the\u00a0experts\nabove\u00a0had\u00a0any\u00a0plans\u00a0to\u00a0write\u00a0such\u00a0a\u00a0book.\u00a0So,\u00a0with\u00a0their\u00a0help,\u00a0I\u00a0did\u2014which\u00a0led\u00a0to\u00a0the\nfirst\u00a0edition\u00a0of\u00a0this\u00a0book.\nFortunately,\u00a0the\u00a0concept\u00a0of\u00a0refactoring\u00a0caught\u00a0on\u00a0in\u00a0the\u00a0industry.\u00a0The\u00a0book\u00a0sold\u00a0well,\nand\u00a0refactoring\u00a0entered\u00a0the\u00a0vocabulary\u00a0of\u00a0most\u00a0programmers.\u00a0More\u00a0tools\u00a0appeared,\nespecially\u00a0for\u00a0Java.\u00a0One\u00a0downside\u00a0of\u00a0this\u00a0popularity\u00a0has\u00a0been\u00a0people\u00a0using\u00a0\u201crefactoring\u201d\nloosely,\u00a0to\u00a0mean\u00a0any\u00a0kind\u00a0of\u00a0restructuring.\u00a0Despite\u00a0this,\u00a0however,\u00a0it\u00a0has\u00a0become\u00a0a\nmainstream\u00a0practice.\nAUTOMATED REFACTORINGS\nPerhaps\u00a0the\u00a0biggest\u00a0change\u00a0to\u00a0refactoring\u00a0in\u00a0the\u00a0last\u00a0decade\u00a0or\u00a0so\u00a0is\u00a0the\u00a0availability\u00a0of\ntools\u00a0that\u00a0support\u00a0automated\u00a0refactoring.\u00a0If\u00a0I\u00a0want\u00a0to\u00a0rename\u00a0a\u00a0method\u00a0in\u00a0Java\u00a0and\u00a0I\u2019m\nusing\u00a0IntelliJ\u00a0IDEA\u00a0[intellij]\u00a0or\u00a0Eclipse\u00a0[eclipse]\u00a0(to\u00a0mention\u00a0just\u00a0two),\u00a0I\u00a0can\u00a0do\u00a0it\u00a0by\npicking\u00a0an\u00a0item\u00a0off\u00a0the\u00a0menu.\u00a0The\u00a0tool\u00a0completes\u00a0the\u00a0refactoring\u00a0for\u00a0me\u2014and\u00a0I\u2019m\nusually\u00a0sufficiently\u00a0confident\u00a0in\u00a0its\u00a0work\u00a0that\u00a0I\u00a0don\u2019t\u00a0bother\u00a0running\u00a0the\u00a0test\u00a0suite.\nwww.EBooksWorld.ir\n", "page": 81, "type": "text", "section": "Page 81"}
{"text": "The\u00a0first\u00a0tool\u00a0that\u00a0did\u00a0this\u00a0was\u00a0the\u00a0Smalltalk\u00a0Refactoring\u00a0Browser,\u00a0written\u00a0by\u00a0John\nBrandt\u00a0and\u00a0Don\u00a0Roberts.\u00a0The\u00a0idea\u00a0took\u00a0off\u00a0in\u00a0the\u00a0Java\u00a0community\u00a0very\u00a0rapidly\u00a0at\u00a0the\nbeginning\u00a0of\u00a0the\u00a0century.\u00a0When\u00a0JetBrains\u00a0launched\u00a0their\u00a0IntelliJ\u00a0IDEA\u00a0IDE,\u00a0automated\nrefactoring\u00a0was\u00a0one\u00a0of\u00a0the\u00a0compelling\u00a0features.\u00a0IBM\u00a0followed\u00a0suit\u00a0shortly\u00a0afterwards\nwith\u00a0refactoring\u00a0tools\u00a0in\u00a0Visual\u00a0Age\u00a0for\u00a0Java.\u00a0Visual\u00a0Age\u00a0didn\u2019t\u00a0have\u00a0a\u00a0big\u00a0impact,\u00a0but\nmuch\u00a0of\u00a0its\u00a0capabilities\u00a0were\u00a0reimplemented\u00a0in\u00a0Eclipse,\u00a0including\u00a0the\u00a0refactoring\nsupport.\nRefactoring\u00a0also\u00a0came\u00a0to\u00a0C#,\u00a0initially\u00a0via\u00a0JetBrains\u2019s\u00a0Resharper,\u00a0a\u00a0plug\u00adin\u00a0for\u00a0Visual\nStudio.\u00a0Later\u00a0on,\u00a0the\u00a0Visual\u00a0Studio\u00a0team\u00a0added\u00a0some\u00a0refactoring\u00a0capabilities.\nIt\u2019s\u00a0now\u00a0pretty\u00a0common\u00a0to\u00a0find\u00a0some\u00a0kind\u00a0of\u00a0refactoring\u00a0support\u00a0in\u00a0editors\u00a0and\u00a0tools,\nalthough\u00a0the\u00a0actual\u00a0capabilities\u00a0vary\u00a0a\u00a0fair\u00a0bit.\u00a0Some\u00a0of\u00a0this\u00a0variation\u00a0is\u00a0due\u00a0to\u00a0the\u00a0tool,\nsome\u00a0is\u00a0caused\u00a0by\u00a0the\u00a0limitations\u00a0of\u00a0what\u00a0you\u00a0can\u00a0do\u00a0with\u00a0automated\u00a0refactoring\u00a0in\ndifferent\u00a0languages.\u00a0I\u2019m\u00a0not\u00a0going\u00a0to\u00a0analyze\u00a0the\u00a0capabilities\u00a0of\u00a0different\u00a0tools\u00a0here,\u00a0but\nI\u00a0think\u00a0it\u00a0is\u00a0worth\u00a0talking\u00a0a\u00a0bit\u00a0about\u00a0some\u00a0of\u00a0the\u00a0underlying\u00a0principles.\nA\u00a0crude\u00a0way\u00a0to\u00a0automate\u00a0a\u00a0refactoring\u00a0is\u00a0to\u00a0do\u00a0text\u00a0manipulation,\u00a0such\u00a0as\u00a0a\nsearch/replace\u00a0to\u00a0change\u00a0a\u00a0name,\u00a0or\u00a0some\u00a0simple\u00a0reorganizing\u00a0of\u00a0code\u00a0for\u00a0Extract\nVariable\u00a0(119).\u00a0This\u00a0is\u00a0a\u00a0very\u00a0crude\u00a0approach\u00a0that\u00a0certainly\u00a0can\u2019t\u00a0be\u00a0trusted\u00a0without\nrerunning\u00a0tests.\u00a0It\u00a0can,\u00a0however,\u00a0be\u00a0a\u00a0handy\u00a0first\u00a0step.\u00a0I\u2019ll\u00a0use\u00a0such\u00a0macros\u00a0in\u00a0Emacs\u00a0to\nspeed\u00a0up\u00a0my\u00a0refactoring\u00a0work\u00a0when\u00a0I\u00a0don\u2019t\u00a0have\u00a0more\u00a0sophisticated\u00a0refactorings\navailable\u00a0to\u00a0me.\nTo\u00a0do\u00a0refactoring\u00a0properly,\u00a0the\u00a0tool\u00a0has\u00a0to\u00a0operate\u00a0on\u00a0the\u00a0syntax\u00a0tree\u00a0of\u00a0the\u00a0code,\u00a0not\u00a0on\nthe\u00a0text.\u00a0Manipulating\u00a0the\u00a0syntax\u00a0tree\u00a0is\u00a0much\u00a0more\u00a0reliable\u00a0to\u00a0preserve\u00a0what\u00a0the\u00a0code\nis\u00a0doing.\u00a0This\u00a0is\u00a0why\u00a0at\u00a0the\u00a0moment,\u00a0most\u00a0refactoring\u00a0capabilities\u00a0are\u00a0part\u00a0of\u00a0powerful\nIDEs\u2014they\u00a0use\u00a0the\u00a0syntax\u00a0tree\u00a0not\u00a0just\u00a0for\u00a0refactoring\u00a0but\u00a0also\u00a0for\u00a0code\u00a0navigation,\nlinting,\u00a0and\u00a0the\u00a0like.\u00a0This\u00a0collaboration\u00a0between\u00a0text\u00a0and\u00a0syntax\u00a0tree\u00a0is\u00a0what\u00a0takes\u00a0them\nbeyond\u00a0text\u00a0editors.\nRefactoring\u00a0isn\u2019t\u00a0just\u00a0understanding\u00a0and\u00a0updating\u00a0the\u00a0syntax\u00a0tree.\u00a0The\u00a0tool\u00a0also\u00a0needs\nto\u00a0figure\u00a0out\u00a0how\u00a0to\u00a0rerender\u00a0the\u00a0code\u00a0into\u00a0text\u00a0back\u00a0in\u00a0the\u00a0editor\u00a0view.\u00a0All\u00a0in\u00a0all,\nimplementing\u00a0decent\u00a0refactoring\u00a0is\u00a0a\u00a0challenging\u00a0programming\u00a0exercise\u2014one\u00a0that\u00a0I\u2019m\nmostly\u00a0unaware\u00a0of\u00a0as\u00a0I\u00a0gaily\u00a0use\u00a0the\u00a0tools.\nMany\u00a0refactorings\u00a0are\u00a0made\u00a0much\u00a0safer\u00a0when\u00a0applied\u00a0in\u00a0a\u00a0language\u00a0with\u00a0static\u00a0typing.\nConsider\u00a0the\u00a0simple\u00a0Rename\u00a0Function\u00a0(124).\u00a0I\u00a0might\u00a0have\u00a0addClient\u00a0methods\u00a0on\u00a0my\nSalesman\u00a0class\u00a0and\u00a0on\u00a0my\u00a0Server\u00a0class.\u00a0I\u00a0want\u00a0to\u00a0rename\u00a0the\u00a0one\u00a0on\u00a0my\u00a0salesman,\nbut\u00a0it\u00a0is\u00a0different\u00a0in\u00a0intent\u00a0from\u00a0the\u00a0one\u00a0on\u00a0my\u00a0server,\u00a0which\u00a0I\u00a0don\u2019t\u00a0want\u00a0to\u00a0rename.\nwww.EBooksWorld.ir\n", "page": 82, "type": "text", "section": "Page 82"}
{"text": "Without\u00a0static\u00a0typing,\u00a0the\u00a0tool\u00a0will\u00a0find\u00a0it\u00a0difficult\u00a0to\u00a0tell\u00a0whether\u00a0any\u00a0call\u00a0to\u00a0addClient\nis\u00a0intended\u00a0for\u00a0the\u00a0salesman.\u00a0In\u00a0the\u00a0refactoring\u00a0browser,\u00a0it\u00a0would\u00a0generate\u00a0a\u00a0list\u00a0of\u00a0call\nsites\u00a0and\u00a0I\u00a0would\u00a0manually\u00a0decide\u00a0which\u00a0ones\u00a0to\u00a0change.\u00a0This\u00a0makes\u00a0it\u00a0a\u00a0nonsafe\nrefactoring\u00a0that\u00a0forces\u00a0me\u00a0to\u00a0rerun\u00a0the\u00a0tests.\u00a0Such\u00a0a\u00a0tool\u00a0is\u00a0still\u00a0helpful\u2014but\u00a0the\nequivalent\u00a0operation\u00a0in\u00a0Java\u00a0can\u00a0be\u00a0completely\u00a0safe\u00a0and\u00a0automatic.\u00a0Since\u00a0the\u00a0tool\u00a0can\nresolve\u00a0the\u00a0method\u00a0to\u00a0the\u00a0correct\u00a0class\u00a0with\u00a0static\u00a0typing,\u00a0I\u00a0can\u00a0be\u00a0confident\u00a0that\u00a0the\ntool\u00a0changes\u00a0only\u00a0the\u00a0methods\u00a0it\u00a0ought\u00a0to.\nTools\u00a0often\u00a0go\u00a0further.\u00a0If\u00a0I\u00a0rename\u00a0a\u00a0variable,\u00a0I\u00a0can\u00a0be\u00a0prompted\u00a0for\u00a0changes\u00a0to\ncomments\u00a0that\u00a0use\u00a0that\u00a0name.\u00a0If\u00a0I\u00a0use\u00a0Extract\u00a0Function\u00a0(106),\u00a0the\u00a0tool\u00a0spots\u00a0some\u00a0code\nthat\u00a0duplicates\u00a0the\u00a0new\u00a0function\u2019s\u00a0body\u00a0and\u00a0offers\u00a0to\u00a0replace\u00a0it\u00a0with\u00a0a\u00a0call.\nProgramming\u00a0with\u00a0powerful\u00a0refactorings\u00a0like\u00a0this\u00a0is\u00a0a\u00a0compelling\u00a0reason\u00a0to\u00a0use\u00a0an\u00a0IDE\nrather\u00a0than\u00a0stick\u00a0with\u00a0a\u00a0familiar\u00a0text\u00a0editor.\u00a0Personally\u00a0I\u2019m\u00a0a\u00a0big\u00a0user\u00a0of\u00a0Emacs,\u00a0but\nwhen\u00a0working\u00a0in\u00a0Java\u00a0I\u00a0prefer\u00a0IntelliJ\u00a0IDEA\u00a0or\u00a0Eclipse\u2014in\u00a0large\u00a0part\u00a0due\u00a0to\u00a0the\nrefactoring\u00a0support.\nWhile\u00a0sophisticated\u00a0refactoring\u00a0tools\u00a0are\u00a0almost\u00a0magical\u00a0in\u00a0their\u00a0ability\u00a0to\u00a0safely\nrefactor\u00a0code,\u00a0there\u00a0are\u00a0some\u00a0edge\u00a0cases\u00a0where\u00a0they\u00a0slip\u00a0up.\u00a0Less\u00a0mature\u00a0tools\u00a0struggle\nwith\u00a0reflective\u00a0calls,\u00a0such\u00a0as\u00a0Method.invoke\u00a0in\u00a0Java\u00a0(although\u00a0more\u00a0mature\u00a0tools\nhandle\u00a0this\u00a0quite\u00a0well).\u00a0So\u00a0even\u00a0with\u00a0mostly\u00a0safe\u00a0refactorings,\u00a0it\u2019s\u00a0wise\u00a0to\u00a0run\u00a0the\u00a0test\nsuite\u00a0every\u00a0so\u00a0often\u00a0to\u00a0ensure\u00a0nothing\u00a0has\u00a0gone\u00a0pear\u00adshaped.\u00a0Usually\u00a0I\u2019m\u00a0refactoring\nwith\u00a0a\u00a0mix\u00a0of\u00a0automated\u00a0and\u00a0manual\u00a0refactorings,\u00a0so\u00a0I\u00a0run\u00a0my\u00a0tests\u00a0often\u00a0enough.\nThe\u00a0power\u00a0of\u00a0using\u00a0the\u00a0syntax\u00a0tree\u00a0to\u00a0analyze\u00a0and\u00a0refactor\u00a0programs\u00a0is\u00a0a\u00a0compelling\nadvantage\u00a0for\u00a0IDEs\u00a0over\u00a0simple\u00a0text\u00a0editors,\u00a0but\u00a0many\u00a0programmers\u00a0prefer\u00a0the\nflexibility\u00a0of\u00a0their\u00a0favorite\u00a0text\u00a0editor\u00a0and\u00a0would\u00a0like\u00a0to\u00a0have\u00a0both.\u00a0A\u00a0technology\u00a0that\u2019s\ncurrently\u00a0gaining\u00a0momentum\u00a0is\u00a0Language\u00a0Servers\u00a0[langserver]:\u00a0software\u00a0that\u00a0will\u00a0form\na\u00a0syntax\u00a0tree\u00a0and\u00a0present\u00a0an\u00a0API\u00a0to\u00a0text\u00a0editors.\u00a0Such\u00a0language\u00a0servers\u00a0can\u00a0support\nmany\u00a0text\u00a0editors\u00a0and\u00a0provide\u00a0commands\u00a0to\u00a0do\u00a0sophisticated\u00a0code\u00a0analysis\u00a0and\nrefactoring\u00a0operations.\nGOING FURTHER\nIt\u00a0seems\u00a0a\u00a0little\u00a0strange\u00a0to\u00a0be\u00a0talking\u00a0about\u00a0further\u00a0reading\u00a0in\u00a0only\u00a0the\u00a0second\u00a0chapter,\nbut\u00a0this\u00a0is\u00a0as\u00a0good\u00a0a\u00a0spot\u00a0as\u00a0any\u00a0to\u00a0point\u00a0out\u00a0there\u00a0is\u00a0more\u00a0material\u00a0out\u00a0there\u00a0on\nrefactoring\u00a0that\u00a0goes\u00a0beyond\u00a0the\u00a0basics\u00a0in\u00a0this\u00a0book.\nThis\u00a0book\u00a0has\u00a0taught\u00a0refactoring\u00a0to\u00a0many\u00a0people,\u00a0but\u00a0I\u00a0have\u00a0focused\u00a0more\u00a0on\u00a0a\nrefactoring\u00a0reference\u00a0than\u00a0on\u00a0taking\u00a0readers\u00a0through\u00a0the\u00a0learning\u00a0process.\u00a0If\u00a0you\u00a0are\nlooking\u00a0for\u00a0such\u00a0a\u00a0book,\u00a0I\u00a0suggest\u00a0Bill\u00a0Wake\u2019s\u00a0Refactoring\u00a0Workbook\u00a0[Wake]\u00a0that\nwww.EBooksWorld.ir\n", "page": 83, "type": "text", "section": "Page 83"}
{"text": "contains\u00a0many\u00a0exercises\u00a0to\u00a0practice\u00a0refactoring.\nMany\u00a0of\u00a0those\u00a0who\u00a0pioneered\u00a0refactoring\u00a0were\u00a0also\u00a0active\u00a0in\u00a0the\u00a0software\u00a0patterns\ncommunity.\u00a0Josh\u00a0Kerievsky\u00a0tied\u00a0these\u00a0two\u00a0worlds\u00a0closely\u00a0together\u00a0with\u00a0Refactoring\u00a0to\nPatterns\u00a0[Kerievsky],\u00a0which\u00a0looks\u00a0at\u00a0the\u00a0most\u00a0valuable\u00a0patterns\u00a0from\u00a0the\u00a0hugely\ninfluential\u00a0\u201cGang\u00a0of\u00a0Four\u201d\u00a0book\u00a0[gof]\u00a0and\u00a0shows\u00a0how\u00a0to\u00a0use\u00a0refactoring\u00a0to\u00a0evolve\ntowards\u00a0them.\nThis\u00a0book\u00a0concentrates\u00a0on\u00a0refactoring\u00a0in\u00a0general\u00adpurpose\u00a0programming,\u00a0but\nrefactoring\u00a0also\u00a0applies\u00a0in\u00a0specialized\u00a0areas.\u00a0Two\u00a0that\u00a0have\u00a0got\u00a0useful\u00a0attention\u00a0are\nRefactoring\u00a0Databases\u00a0[Ambler\u00a0&\u00a0Sadalage]\u00a0(by\u00a0Scott\u00a0Ambler\u00a0and\u00a0Pramod\u00a0Sadalage)\nand\u00a0Refactoring\u00a0HTML\u00a0[Harold]\u00a0(by\u00a0Elliotte\u00a0Rusty\u00a0Harold).\nAlthough\u00a0it\u00a0doesn\u2019t\u00a0have\u00a0refactoring\u00a0in\u00a0the\u00a0title,\u00a0also\u00a0worth\u00a0including\u00a0is\u00a0Michael\nFeathers\u2019s\u00a0Working\u00a0Effectively\u00a0with\u00a0Legacy\u00a0Code\u00a0[Feathers],\u00a0which\u00a0is\u00a0primarily\u00a0a\u00a0book\nabout\u00a0how\u00a0to\u00a0think\u00a0about\u00a0refactoring\u00a0an\u00a0older\u00a0codebase\u00a0with\u00a0poor\u00a0test\u00a0coverage.\nAlthough\u00a0this\u00a0book\u00a0(and\u00a0its\u00a0predecessor)\u00a0are\u00a0intended\u00a0for\u00a0programmers\u00a0with\u00a0any\nlanguage,\u00a0there\u00a0is\u00a0a\u00a0place\u00a0for\u00a0language\u00adspecific\u00a0refactoring\u00a0books.\u00a0Two\u00a0of\u00a0my\u00a0former\ncolleagues,\u00a0Jay\u00a0Fields\u00a0and\u00a0Shane\u00a0Harvey,\u00a0did\u00a0this\u00a0for\u00a0the\u00a0Ruby\u00a0programming\u00a0language\n[Fields\u00a0et\u00a0al.].\nFor\u00a0more\u00a0up\u00adto\u00addate\u00a0material,\u00a0look\u00a0up\u00a0the\u00a0web\u00a0representation\u00a0of\u00a0this\u00a0book,\u00a0as\u00a0well\u00a0as\nthe\u00a0main\u00a0refactoring\u00a0web\u00a0site:\u00a0refactoring.com\u00a0[ref.com].\nwww.EBooksWorld.ir\n", "page": 84, "type": "text", "section": "Page 84"}
{"text": "Chapter 3\nBad Smells in Code\nby\u00a0Kent\u00a0Beck\u00a0and\u00a0Martin\u00a0Fowler\n\u201cIf\u00a0it\u00a0stinks,\u00a0change\u00a0it.\u201d\n\u2014\u00a0Grandma\u00a0Beck,\u00a0discussing\u00a0child\u00adrearing\u00a0philosophy\nBy\u00a0now\u00a0you\u00a0have\u00a0a\u00a0good\u00a0idea\u00a0of\u00a0how\u00a0refactoring\u00a0works.\u00a0But\u00a0just\u00a0because\u00a0you\u00a0know\u00a0how\ndoesn\u2019t\u00a0mean\u00a0you\u00a0know\u00a0when.\u00a0Deciding\u00a0when\u00a0to\u00a0start\u00a0refactoring\u2014and\u00a0when\u00a0to\u00a0stop\u2014is\njust\u00a0as\u00a0important\u00a0to\u00a0refactoring\u00a0as\u00a0knowing\u00a0how\u00a0to\u00a0operate\u00a0the\u00a0mechanics\u00a0of\u00a0it.\nNow\u00a0comes\u00a0the\u00a0dilemma.\u00a0It\u00a0is\u00a0easy\u00a0to\u00a0explain\u00a0how\u00a0to\u00a0delete\u00a0an\u00a0instance\u00a0variable\u00a0or\ncreate\u00a0a\u00a0hierarchy.\u00a0These\u00a0are\u00a0simple\u00a0matters.\u00a0Trying\u00a0to\u00a0explain\u00a0when\u00a0you\u00a0should\u00a0do\nthese\u00a0things\u00a0is\u00a0not\u00a0so\u00a0cut\u00adand\u00addried.\u00a0Instead\u00a0of\u00a0appealing\u00a0to\u00a0some\u00a0vague\u00a0notion\u00a0of\nprogramming\u00a0aesthetics\u00a0(which,\u00a0frankly,\u00a0is\u00a0what\u00a0we\u00a0consultants\u00a0usually\u00a0do),\u00a0I\u00a0wanted\nsomething\u00a0a\u00a0bit\u00a0more\u00a0solid.\nWhen\u00a0I\u00a0was\u00a0writing\u00a0the\u00a0first\u00a0edition\u00a0of\u00a0this\u00a0book,\u00a0I\u00a0was\u00a0mulling\u00a0over\u00a0this\u00a0issue\u00a0as\u00a0I\nvisited\u00a0Kent\u00a0Beck\u00a0in\u00a0Zurich.\u00a0Perhaps\u00a0he\u00a0was\u00a0under\u00a0the\u00a0influence\u00a0of\u00a0the\u00a0odors\u00a0of\u00a0his\nnewborn\u00a0daughter\u00a0at\u00a0the\u00a0time,\u00a0but\u00a0he\u00a0had\u00a0come\u00a0up\u00a0with\u00a0the\u00a0notion\u00a0of\u00a0describing\u00a0the\n\u201cwhen\u201d\u00a0of\u00a0refactoring\u00a0in\u00a0terms\u00a0of\u00a0smells.\n\u201cSmells,\u201d\u00a0you\u00a0say,\u00a0\u201cand\u00a0that\u00a0is\u00a0supposed\u00a0to\u00a0be\u00a0better\u00a0than\u00a0vague\u00a0aesthetics?\u201d\u00a0Well,\u00a0yes.\nWe\u00a0have\u00a0looked\u00a0at\u00a0lots\u00a0of\u00a0code,\u00a0written\u00a0for\u00a0projects\u00a0that\u00a0span\u00a0the\u00a0gamut\u00a0from\u00a0wildly\nsuccessful\u00a0to\u00a0nearly\u00a0dead.\u00a0In\u00a0doing\u00a0so,\u00a0we\u00a0have\u00a0learned\u00a0to\u00a0look\u00a0for\u00a0certain\u00a0structures\u00a0in\nthe\u00a0code\u00a0that\u00a0suggest\u2014sometimes,\u00a0scream\u00a0for\u2014the\u00a0possibility\u00a0of\u00a0refactoring.\u00a0(We\u00a0are\nswitching\u00a0over\u00a0to\u00a0\u201cwe\u201d\u00a0in\u00a0this\u00a0chapter\u00a0to\u00a0reflect\u00a0the\u00a0fact\u00a0that\u00a0Kent\u00a0and\u00a0I\u00a0wrote\u00a0this\nchapter\u00a0jointly.\u00a0You\u00a0can\u00a0tell\u00a0the\u00a0difference\u00a0because\u00a0the\u00a0funny\u00a0jokes\u00a0are\u00a0mine\u00a0and\u00a0the\nothers\u00a0are\u00a0his.)\nOne\u00a0thing\u00a0we\u00a0won\u2019t\u00a0try\u00a0to\u00a0give\u00a0you\u00a0is\u00a0precise\u00a0criteria\u00a0for\u00a0when\u00a0a\u00a0refactoring\u00a0is\u00a0overdue.\nIn\u00a0our\u00a0experience,\u00a0no\u00a0set\u00a0of\u00a0metrics\u00a0rivals\u00a0informed\u00a0human\u00a0intuition.\u00a0What\u00a0we\u00a0will\u00a0do\u00a0is\ngive\u00a0you\u00a0indications\u00a0that\u00a0there\u00a0is\u00a0trouble\u00a0that\u00a0can\u00a0be\u00a0solved\u00a0by\u00a0a\u00a0refactoring.\u00a0You\u00a0will\nHistory\nTopics\nTutorials\nOffers & Deals\nHighlights\nSettings\nSupport\nSign Out\n \n  \n \n  \n \n \n \n \n \n \nwww.EBooksWorld.ir\n", "page": 85, "type": "text", "section": "Page 85"}
{"text": "have\u00a0to\u00a0develop\u00a0your\u00a0own\u00a0sense\u00a0of\u00a0how\u00a0many\u00a0instance\u00a0variables\u00a0or\u00a0how\u00a0many\u00a0lines\u00a0of\ncode\u00a0in\u00a0a\u00a0method\u00a0are\u00a0too\u00a0many.\nUse\u00a0this\u00a0chapter\u00a0and\u00a0the\u00a0table\u00a0on\u00a0the\u00a0inside\u00a0back\u00a0cover\u00a0as\u00a0a\u00a0way\u00a0to\u00a0give\u00a0you\u00a0inspiration\nwhen\u00a0you\u2019re\u00a0not\u00a0sure\u00a0what\u00a0refactorings\u00a0to\u00a0do.\u00a0Read\u00a0the\u00a0chapter\u00a0(or\u00a0skim\u00a0the\u00a0table)\u00a0and\ntry\u00a0to\u00a0identify\u00a0what\u00a0it\u00a0is\u00a0you\u2019re\u00a0smelling,\u00a0then\u00a0go\u00a0to\u00a0the\u00a0refactorings\u00a0we\u00a0suggest\u00a0to\u00a0see\nwhether\u00a0they\u00a0will\u00a0help\u00a0you.\u00a0You\u00a0may\u00a0not\u00a0find\u00a0the\u00a0exact\u00a0smell\u00a0you\u00a0can\u00a0detect,\u00a0but\nhopefully\u00a0it\u00a0should\u00a0point\u00a0you\u00a0in\u00a0the\u00a0right\u00a0direction.\nMYSTERIOUS NAME\nPuzzling\u00a0over\u00a0some\u00a0text\u00a0to\u00a0understand\u00a0what\u2019s\u00a0going\u00a0on\u00a0is\u00a0a\u00a0great\u00a0thing\u00a0if\u00a0you\u2019re\u00a0reading\na\u00a0detective\u00a0novel,\u00a0but\u00a0not\u00a0when\u00a0you\u2019re\u00a0reading\u00a0code.\u00a0We\u00a0may\u00a0fantasize\u00a0about\u00a0being\nInternational\u00a0Men\u00a0of\u00a0Mystery,\u00a0but\u00a0our\u00a0code\u00a0needs\u00a0to\u00a0be\u00a0mundane\u00a0and\u00a0clear.\u00a0One\u00a0of\u00a0the\nmost\u00a0important\u00a0parts\u00a0of\u00a0clear\u00a0code\u00a0is\u00a0good\u00a0names,\u00a0so\u00a0we\u00a0put\u00a0a\u00a0lot\u00a0of\u00a0thought\u00a0into\nnaming\u00a0functions,\u00a0modules,\u00a0variables,\u00a0classes,\u00a0so\u00a0they\u00a0clearly\u00a0communicate\u00a0what\u00a0they\ndo\u00a0and\u00a0how\u00a0to\u00a0use\u00a0them.\nSadly,\u00a0however,\u00a0naming\u00a0is\u00a0one\u00a0of\u00a0the\u00a0two\u00a0hard\u00a0things\u00a0[mf\u00ad2h]\u00a0in\u00a0programming.\u00a0So,\nperhaps\u00a0the\u00a0most\u00a0common\u00a0refactorings\u00a0we\u00a0do\u00a0are\u00a0the\u00a0renames:\u00a0Change\u00a0Function\nDeclaration\u00a0(124)\u00a0(to\u00a0rename\u00a0a\u00a0function),\u00a0Rename\u00a0Variable\u00a0(137),\u00a0and\u00a0Rename\u00a0Field\n(244).\u00a0People\u00a0are\u00a0often\u00a0afraid\u00a0to\u00a0rename\u00a0things,\u00a0thinking\u00a0it\u2019s\u00a0not\u00a0worth\u00a0the\u00a0trouble,\u00a0but\na\u00a0good\u00a0name\u00a0can\u00a0save\u00a0hours\u00a0of\u00a0puzzled\u00a0incomprehension\u00a0in\u00a0the\u00a0future.\nRenaming\u00a0is\u00a0not\u00a0just\u00a0an\u00a0exercise\u00a0in\u00a0changing\u00a0names.\u00a0When\u00a0you\u00a0can\u2019t\u00a0think\u00a0of\u00a0a\u00a0good\nname\u00a0for\u00a0something,\u00a0it\u2019s\u00a0often\u00a0a\u00a0sign\u00a0of\u00a0a\u00a0deeper\u00a0design\u00a0malaise.\u00a0Puzzling\u00a0over\u00a0a\u00a0tricky\nname\u00a0has\u00a0often\u00a0led\u00a0us\u00a0to\u00a0significant\u00a0simplifications\u00a0to\u00a0our\u00a0code.\nDUPLICATED CODE\nIf\u00a0you\u00a0see\u00a0the\u00a0same\u00a0code\u00a0structure\u00a0in\u00a0more\u00a0than\u00a0one\u00a0place,\u00a0you\u00a0can\u00a0be\u00a0sure\u00a0that\u00a0your\nprogram\u00a0will\u00a0be\u00a0better\u00a0if\u00a0you\u00a0find\u00a0a\u00a0way\u00a0to\u00a0unify\u00a0them.\u00a0Duplication\u00a0means\u00a0that\u00a0every\ntime\u00a0you\u00a0read\u00a0these\u00a0copies,\u00a0you\u00a0need\u00a0to\u00a0read\u00a0them\u00a0carefully\u00a0to\u00a0see\u00a0if\u00a0there\u2019s\u00a0any\ndifference.\u00a0If\u00a0you\u00a0need\u00a0to\u00a0change\u00a0the\u00a0duplicated\u00a0code,\u00a0you\u00a0have\u00a0to\u00a0find\u00a0and\u00a0catch\u00a0each\nduplication.\nThe\u00a0simplest\u00a0duplicated\u00a0code\u00a0problem\u00a0is\u00a0when\u00a0you\u00a0have\u00a0the\u00a0same\u00a0expression\u00a0in\u00a0two\nmethods\u00a0of\u00a0the\u00a0same\u00a0class.\u00a0Then\u00a0all\u00a0you\u00a0have\u00a0to\u00a0do\u00a0is\u00a0Extract\u00a0Function\u00a0(106)\u00a0and\u00a0invoke\nthe\u00a0code\u00a0from\u00a0both\u00a0places.\u00a0If\u00a0you\u00a0have\u00a0code\u00a0that\u2019s\u00a0similar,\u00a0but\u00a0not\u00a0quite\u00a0identical,\u00a0see\u00a0if\nyou\u00a0can\u00a0use\u00a0Slide\u00a0Statements\u00a0(223)\u00a0to\u00a0arrange\u00a0the\u00a0code\u00a0so\u00a0the\u00a0similar\u00a0items\u00a0are\u00a0all\ntogether\u00a0for\u00a0easy\u00a0extraction.\u00a0If\u00a0the\u00a0duplicate\u00a0fragments\u00a0are\u00a0in\u00a0subclasses\u00a0of\u00a0a\u00a0common\nwww.EBooksWorld.ir\n", "page": 86, "type": "text", "section": "Page 86"}
{"text": "base\u00a0class,\u00a0you\u00a0can\u00a0use\u00a0Pull\u00a0Up\u00a0Method\u00a0(350)\u00a0to\u00a0avoid\u00a0calling\u00a0one\u00a0from\u00a0another.\nLONG FUNCTION\nIn\u00a0our\u00a0experience,\u00a0the\u00a0programs\u00a0that\u00a0live\u00a0best\u00a0and\u00a0longest\u00a0are\u00a0those\u00a0with\u00a0short\nfunctions.\u00a0Programmers\u00a0new\u00a0to\u00a0such\u00a0a\u00a0code\u00a0base\u00a0often\u00a0feel\u00a0that\u00a0no\u00a0computation\u00a0ever\ntakes\u00a0place\u2014that\u00a0the\u00a0program\u00a0is\u00a0an\u00a0endless\u00a0sequence\u00a0of\u00a0delegation.\u00a0When\u00a0you\u00a0have\nlived\u00a0with\u00a0such\u00a0a\u00a0program\u00a0for\u00a0a\u00a0few\u00a0years,\u00a0however,\u00a0you\u00a0learn\u00a0just\u00a0how\u00a0valuable\u00a0all\nthose\u00a0little\u00a0functions\u00a0are.\u00a0All\u00a0of\u00a0the\u00a0payoffs\u00a0of\u00a0indirection\u2014explanation,\u00a0sharing,\u00a0and\nchoosing\u2014are\u00a0supported\u00a0by\u00a0small\u00a0functions.\nSince\u00a0the\u00a0early\u00a0days\u00a0of\u00a0programming,\u00a0people\u00a0have\u00a0realized\u00a0that\u00a0the\u00a0longer\u00a0a\u00a0function\u00a0is,\nthe\u00a0more\u00a0difficult\u00a0it\u00a0is\u00a0to\u00a0understand.\u00a0Older\u00a0languages\u00a0carried\u00a0an\u00a0overhead\u00a0in\nsubroutine\u00a0calls,\u00a0which\u00a0deterred\u00a0people\u00a0from\u00a0small\u00a0functions.\u00a0Modern\u00a0languages\u00a0have\npretty\u00a0much\u00a0eliminated\u00a0that\u00a0overhead\u00a0for\u00a0in\u00adprocess\u00a0calls.\u00a0There\u00a0is\u00a0still\u00a0overhead\u00a0for\u00a0the\nreader\u00a0of\u00a0the\u00a0code\u00a0because\u00a0you\u00a0have\u00a0to\u00a0switch\u00a0context\u00a0to\u00a0see\u00a0what\u00a0the\u00a0function\u00a0does.\nDevelopment\u00a0environments\u00a0that\u00a0allow\u00a0you\u00a0to\u00a0quickly\u00a0jump\u00a0between\u00a0a\u00a0function\u00a0call\u00a0and\nits\u00a0declaration,\u00a0or\u00a0to\u00a0see\u00a0both\u00a0functions\u00a0at\u00a0once,\u00a0help\u00a0eliminate\u00a0this\u00a0step,\u00a0but\u00a0the\u00a0real\nkey\u00a0to\u00a0making\u00a0it\u00a0easy\u00a0to\u00a0understand\u00a0small\u00a0functions\u00a0is\u00a0good\u00a0naming.\u00a0If\u00a0you\u00a0have\u00a0a\u00a0good\nname\u00a0for\u00a0a\u00a0function,\u00a0you\u00a0mostly\u00a0don\u2019t\u00a0need\u00a0to\u00a0look\u00a0at\u00a0its\u00a0body.\nThe\u00a0net\u00a0effect\u00a0is\u00a0that\u00a0you\u00a0should\u00a0be\u00a0much\u00a0more\u00a0aggressive\u00a0about\u00a0decomposing\nfunctions.\u00a0A\u00a0heuristic\u00a0we\u00a0follow\u00a0is\u00a0that\u00a0whenever\u00a0we\u00a0feel\u00a0the\u00a0need\u00a0to\u00a0comment\nsomething,\u00a0we\u00a0write\u00a0a\u00a0function\u00a0instead.\u00a0Such\u00a0a\u00a0function\u00a0contains\u00a0the\u00a0code\u00a0that\u00a0we\nwanted\u00a0to\u00a0comment\u00a0but\u00a0is\u00a0named\u00a0after\u00a0the\u00a0intention\u00a0of\u00a0the\u00a0code\u00a0rather\u00a0than\u00a0the\u00a0way\u00a0it\nworks.\u00a0We\u00a0may\u00a0do\u00a0this\u00a0on\u00a0a\u00a0group\u00a0of\u00a0lines\u00a0or\u00a0even\u00a0on\u00a0a\u00a0single\u00a0line\u00a0of\u00a0code.\u00a0We\u00a0do\u00a0this\neven\u00a0if\u00a0the\u00a0method\u00a0call\u00a0is\u00a0longer\u00a0than\u00a0the\u00a0code\u00a0it\u00a0replaces\u2014provided\u00a0the\u00a0method\u00a0name\nexplains\u00a0the\u00a0purpose\u00a0of\u00a0the\u00a0code.\u00a0The\u00a0key\u00a0here\u00a0is\u00a0not\u00a0function\u00a0length\u00a0but\u00a0the\u00a0semantic\ndistance\u00a0between\u00a0what\u00a0the\u00a0method\u00a0does\u00a0and\u00a0how\u00a0it\u00a0does\u00a0it.\nNinety\u00adnine\u00a0percent\u00a0of\u00a0the\u00a0time,\u00a0all\u00a0you\u00a0have\u00a0to\u00a0do\u00a0to\u00a0shorten\u00a0a\u00a0function\u00a0is\u00a0Extract\nFunction\u00a0(106).\u00a0Find\u00a0parts\u00a0of\u00a0the\u00a0function\u00a0that\u00a0seem\u00a0to\u00a0go\u00a0nicely\u00a0together\u00a0and\u00a0make\u00a0a\nnew\u00a0one.\nIf\u00a0you\u00a0have\u00a0a\u00a0function\u00a0with\u00a0lots\u00a0of\u00a0parameters\u00a0and\u00a0temporary\u00a0variables,\u00a0they\u00a0get\u00a0in\u00a0the\nway\u00a0of\u00a0extracting.\u00a0If\u00a0you\u00a0try\u00a0to\u00a0use\u00a0Extract\u00a0Function\u00a0(106),\u00a0you\u00a0end\u00a0up\u00a0passing\u00a0so\u00a0many\nparameters\u00a0to\u00a0the\u00a0extracted\u00a0method\u00a0that\u00a0the\u00a0result\u00a0is\u00a0scarcely\u00a0more\u00a0readable\u00a0than\u00a0the\noriginal.\u00a0You\u00a0can\u00a0often\u00a0use\u00a0Replace\u00a0Temp\u00a0with\u00a0Query\u00a0(178)\u00a0to\u00a0eliminate\u00a0the\u00a0temps.\nLong\u00a0lists\u00a0of\u00a0parameters\u00a0can\u00a0be\u00a0slimmed\u00a0down\u00a0with\u00a0Introduce\u00a0Parameter\u00a0Object\u00a0(140)\nand\u00a0Preserve\u00a0Whole\u00a0Object\u00a0(319).\nwww.EBooksWorld.ir\n", "page": 87, "type": "text", "section": "Page 87"}
{"text": "If\u00a0you\u2019ve\u00a0tried\u00a0that\u00a0and\u00a0you\u00a0still\u00a0have\u00a0too\u00a0many\u00a0temps\u00a0and\u00a0parameters,\u00a0it\u2019s\u00a0time\u00a0to\u00a0get\nout\u00a0the\u00a0heavy\u00a0artillery:\u00a0Replace\u00a0Function\u00a0with\u00a0Command\u00a0(337).\nHow\u00a0do\u00a0you\u00a0identify\u00a0the\u00a0clumps\u00a0of\u00a0code\u00a0to\u00a0extract?\u00a0A\u00a0good\u00a0technique\u00a0is\u00a0to\u00a0look\u00a0for\ncomments.\u00a0They\u00a0often\u00a0signal\u00a0this\u00a0kind\u00a0of\u00a0semantic\u00a0distance.\u00a0A\u00a0block\u00a0of\u00a0code\u00a0with\u00a0a\ncomment\u00a0that\u00a0tells\u00a0you\u00a0what\u00a0it\u00a0is\u00a0doing\u00a0can\u00a0be\u00a0replaced\u00a0by\u00a0a\u00a0method\u00a0whose\u00a0name\u00a0is\nbased\u00a0on\u00a0the\u00a0comment.\u00a0Even\u00a0a\u00a0single\u00a0line\u00a0is\u00a0worth\u00a0extracting\u00a0if\u00a0it\u00a0needs\u00a0explanation.\nConditionals\u00a0and\u00a0loops\u00a0also\u00a0give\u00a0signs\u00a0for\u00a0extractions.\u00a0Use\u00a0Decompose\u00a0Conditional\n(260)\u00a0to\u00a0deal\u00a0with\u00a0conditional\u00a0expressions.\u00a0A\u00a0big\u00a0switch\u00a0statement\u00a0should\u00a0have\u00a0its\u00a0legs\nturned\u00a0into\u00a0single\u00a0function\u00a0calls\u00a0with\u00a0Extract\u00a0Function\u00a0(106).\u00a0If\u00a0there\u2019s\u00a0more\u00a0than\u00a0one\nswitch\u00a0statement\u00a0switching\u00a0on\u00a0the\u00a0same\u00a0condition,\u00a0you\u00a0should\u00a0apply\u00a0Replace\nConditional\u00a0with\u00a0Polymorphism\u00a0(272).\nWith\u00a0loops,\u00a0extract\u00a0the\u00a0loop\u00a0and\u00a0the\u00a0code\u00a0within\u00a0the\u00a0loop\u00a0into\u00a0its\u00a0own\u00a0method.\u00a0If\u00a0you\nfind\u00a0it\u00a0hard\u00a0to\u00a0give\u00a0an\u00a0extracted\u00a0loop\u00a0a\u00a0name,\u00a0that\u00a0may\u00a0be\u00a0because\u00a0it\u2019s\u00a0doing\u00a0two\ndifferent\u00a0things\u2014in\u00a0which\u00a0case\u00a0don\u2019t\u00a0be\u00a0afraid\u00a0to\u00a0use\u00a0Split\u00a0Loop\u00a0(227)\u00a0to\u00a0break\u00a0out\u00a0the\nseparate\u00a0tasks.\nLONG PARAMETER LIST\nIn\u00a0our\u00a0early\u00a0programming\u00a0days,\u00a0we\u00a0were\u00a0taught\u00a0to\u00a0pass\u00a0in\u00a0as\u00a0parameters\u00a0everything\nneeded\u00a0by\u00a0a\u00a0function.\u00a0This\u00a0was\u00a0understandable\u00a0because\u00a0the\u00a0alternative\u00a0was\u00a0global\u00a0data,\nand\u00a0global\u00a0data\u00a0quickly\u00a0becomes\u00a0evil.\u00a0But\u00a0long\u00a0parameter\u00a0lists\u00a0are\u00a0often\u00a0confusing\u00a0in\ntheir\u00a0own\u00a0right.\nIf\u00a0you\u00a0can\u00a0obtain\u00a0one\u00a0parameter\u00a0by\u00a0asking\u00a0another\u00a0parameter\u00a0for\u00a0it,\u00a0you\u00a0can\u00a0use\nReplace\u00a0Parameter\u00a0with\u00a0Query\u00a0(324)\u00a0to\u00a0remove\u00a0the\u00a0second\u00a0parameter.\u00a0Rather\u00a0than\npulling\u00a0lots\u00a0of\u00a0data\u00a0out\u00a0of\u00a0an\u00a0existing\u00a0data\u00a0structure,\u00a0you\u00a0can\u00a0use\u00a0Preserve\u00a0Whole\u00a0Object\n(319)\u00a0to\u00a0pass\u00a0the\u00a0original\u00a0data\u00a0structure\u00a0instead.\u00a0If\u00a0several\u00a0parameters\u00a0always\u00a0fit\ntogether,\u00a0combine\u00a0them\u00a0with\u00a0Introduce\u00a0Parameter\u00a0Object\u00a0(140).\u00a0If\u00a0a\u00a0parameter\u00a0is\u00a0used\nas\u00a0a\u00a0flag\u00a0to\u00a0dispatch\u00a0different\u00a0behavior,\u00a0use\u00a0Remove\u00a0Flag\u00a0Argument\u00a0(314).\nClasses\u00a0are\u00a0a\u00a0great\u00a0way\u00a0to\u00a0reduce\u00a0parameter\u00a0list\u00a0sizes.\u00a0They\u00a0are\u00a0particularly\u00a0useful\u00a0when\nmultiple\u00a0functions\u00a0share\u00a0several\u00a0parameter\u00a0values.\u00a0Then,\u00a0you\u00a0can\u00a0use\u00a0Combine\nFunctions\u00a0into\u00a0Class\u00a0(144)\u00a0to\u00a0capture\u00a0those\u00a0common\u00a0values\u00a0as\u00a0fields.\u00a0If\u00a0we\u00a0put\u00a0on\u00a0our\nfunctional\u00a0programming\u00a0hats,\u00a0we\u2019d\u00a0say\u00a0this\u00a0creates\u00a0a\u00a0set\u00a0of\u00a0partially\u00a0applied\u00a0functions.\nGLOBAL DATA\nSince\u00a0our\u00a0earliest\u00a0days\u00a0of\u00a0writing\u00a0software,\u00a0we\u00a0were\u00a0warned\u00a0of\u00a0the\u00a0perils\u00a0of\u00a0global\u00a0data\u2014\nwww.EBooksWorld.ir\n", "page": 88, "type": "text", "section": "Page 88"}
{"text": "how\u00a0it\u00a0was\u00a0invented\u00a0by\u00a0demons\u00a0from\u00a0the\u00a0fourth\u00a0plane\u00a0of\u00a0hell,\u00a0which\u00a0is\u00a0the\u00a0resting\u00a0place\nof\u00a0any\u00a0programmer\u00a0who\u00a0dares\u00a0to\u00a0use\u00a0it.\u00a0And,\u00a0although\u00a0we\u00a0are\u00a0somewhat\u00a0skeptical\u00a0about\nfire\u00a0and\u00a0brimstone,\u00a0it\u2019s\u00a0still\u00a0one\u00a0of\u00a0the\u00a0most\u00a0pungent\u00a0odors\u00a0we\u00a0are\u00a0likely\u00a0to\u00a0run\u00a0into.\u00a0The\nproblem\u00a0with\u00a0global\u00a0data\u00a0is\u00a0that\u00a0it\u00a0can\u00a0be\u00a0modified\u00a0from\u00a0anywhere\u00a0in\u00a0the\u00a0code\u00a0base,\u00a0and\nthere\u2019s\u00a0no\u00a0mechanism\u00a0to\u00a0discover\u00a0which\u00a0bit\u00a0of\u00a0code\u00a0touched\u00a0it.\u00a0Time\u00a0and\u00a0again,\u00a0this\nleads\u00a0to\u00a0bugs\u00a0that\u00a0breed\u00a0from\u00a0a\u00a0form\u00a0of\u00a0spooky\u00a0action\u00a0from\u00a0a\u00a0distance\u2014and\u00a0it\u2019s\u00a0very\nhard\u00a0to\u00a0find\u00a0out\u00a0where\u00a0the\u00a0errant\u00a0bit\u00a0of\u00a0program\u00a0is.\u00a0The\u00a0most\u00a0obvious\u00a0form\u00a0of\u00a0global\ndata\u00a0is\u00a0global\u00a0variables,\u00a0but\u00a0we\u00a0also\u00a0see\u00a0this\u00a0problem\u00a0with\u00a0class\u00a0variables\u00a0and\u00a0singletons.\nOur\u00a0key\u00a0defense\u00a0here\u00a0is\u00a0Encapsulate\u00a0Variable\u00a0(132),\u00a0which\u00a0is\u00a0always\u00a0our\u00a0first\u00a0move\nwhen\u00a0confronted\u00a0with\u00a0data\u00a0that\u00a0is\u00a0open\u00a0to\u00a0contamination\u00a0by\u00a0any\u00a0part\u00a0of\u00a0a\u00a0program.\u00a0At\nleast\u00a0when\u00a0you\u00a0have\u00a0it\u00a0wrapped\u00a0by\u00a0a\u00a0function,\u00a0you\u00a0can\u00a0start\u00a0seeing\u00a0where\u00a0it\u2019s\u00a0modified\nand\u00a0start\u00a0to\u00a0control\u00a0its\u00a0access.\u00a0Then,\u00a0it\u2019s\u00a0good\u00a0to\u00a0limit\u00a0its\u00a0scope\u00a0as\u00a0much\u00a0as\u00a0possible\u00a0by\nmoving\u00a0it\u00a0within\u00a0a\u00a0class\u00a0or\u00a0module\u00a0where\u00a0only\u00a0that\u00a0module\u2019s\u00a0code\u00a0can\u00a0see\u00a0it.\nGlobal\u00a0data\u00a0is\u00a0especially\u00a0nasty\u00a0when\u00a0it\u2019s\u00a0mutable.\u00a0Global\u00a0data\u00a0that\u00a0you\u00a0can\u00a0guarantee\nnever\u00a0changes\u00a0after\u00a0the\u00a0program\u00a0starts\u00a0is\u00a0relatively\u00a0safe\u2014if\u00a0you\u00a0have\u00a0a\u00a0language\u00a0that\u00a0can\nenforce\u00a0that\u00a0guarantee.\nGlobal\u00a0data\u00a0illustrates\u00a0Paracelsus\u2019s\u00a0maxim:\u00a0The\u00a0difference\u00a0between\u00a0a\u00a0poison\u00a0and\nsomething\u00a0benign\u00a0is\u00a0the\u00a0dose.\u00a0You\u00a0can\u00a0get\u00a0away\u00a0with\u00a0small\u00a0doses\u00a0of\u00a0global\u00a0data,\u00a0but\u00a0it\ngets\u00a0exponentially\u00a0harder\u00a0to\u00a0deal\u00a0with\u00a0the\u00a0more\u00a0you\u00a0have.\u00a0Even\u00a0with\u00a0little\u00a0bits,\u00a0we\u00a0like\nto\u00a0keep\u00a0it\u00a0encapsulated\u2014that\u2019s\u00a0the\u00a0key\u00a0to\u00a0coping\u00a0with\u00a0changes\u00a0as\u00a0the\u00a0software\u00a0evolves.\nMUTABLE DATA\nChanges\u00a0to\u00a0data\u00a0can\u00a0often\u00a0lead\u00a0to\u00a0unexpected\u00a0consequences\u00a0and\u00a0tricky\u00a0bugs.\u00a0I\u00a0can\nupdate\u00a0some\u00a0data\u00a0here,\u00a0not\u00a0realizing\u00a0that\u00a0another\u00a0part\u00a0of\u00a0the\u00a0software\u00a0expects\nsomething\u00a0different\u00a0and\u00a0now\u00a0fails\u2014a\u00a0failure\u00a0that\u2019s\u00a0particularly\u00a0hard\u00a0to\u00a0spot\u00a0if\u00a0it\u00a0only\nhappens\u00a0under\u00a0rare\u00a0conditions.\u00a0For\u00a0this\u00a0reason,\u00a0an\u00a0entire\u00a0school\u00a0of\u00a0software\ndevelopment\u2014functional\u00a0programming\u2014is\u00a0based\u00a0on\u00a0the\u00a0notion\u00a0that\u00a0data\u00a0should\u00a0never\nchange\u00a0and\u00a0that\u00a0updating\u00a0a\u00a0data\u00a0structure\u00a0should\u00a0always\u00a0return\u00a0a\u00a0new\u00a0copy\u00a0of\u00a0the\nstructure\u00a0with\u00a0the\u00a0change,\u00a0leaving\u00a0the\u00a0old\u00a0data\u00a0pristine.\nThese\u00a0kinds\u00a0of\u00a0languages,\u00a0however,\u00a0are\u00a0still\u00a0a\u00a0relatively\u00a0small\u00a0part\u00a0of\u00a0programming\u037e\nmany\u00a0of\u00a0us\u00a0work\u00a0in\u00a0languages\u00a0that\u00a0allow\u00a0variables\u00a0to\u00a0vary.\u00a0But\u00a0this\u00a0doesn\u2019t\u00a0mean\u00a0we\nshould\u00a0ignore\u00a0the\u00a0advantages\u00a0of\u00a0immutability\u2014there\u00a0are\u00a0still\u00a0many\u00a0things\u00a0we\u00a0can\u00a0do\u00a0to\nlimit\u00a0the\u00a0risks\u00a0on\u00a0unrestricted\u00a0data\u00a0updates.\nYou\u00a0can\u00a0use\u00a0Encapsulate\u00a0Variable\u00a0(132)\u00a0to\u00a0ensure\u00a0that\u00a0all\u00a0updates\u00a0occur\u00a0through\nnarrow\u00a0functions\u00a0that\u00a0can\u00a0be\u00a0easier\u00a0to\u00a0monitor\u00a0and\u00a0evolve.\u00a0If\u00a0a\u00a0variable\u00a0is\u00a0being\u00a0updated\nwww.EBooksWorld.ir\n", "page": 89, "type": "text", "section": "Page 89"}
{"text": "to\u00a0store\u00a0different\u00a0things,\u00a0use\u00a0Split\u00a0Variable\u00a0(240)\u00a0both\u00a0to\u00a0keep\u00a0them\u00a0separate\u00a0and\u00a0avoid\nthe\u00a0risky\u00a0update.\u00a0Try\u00a0as\u00a0much\u00a0as\u00a0possible\u00a0to\u00a0move\u00a0logic\u00a0out\u00a0of\u00a0code\u00a0that\u00a0processes\u00a0the\nupdate\u00a0by\u00a0using\u00a0Slide\u00a0Statements\u00a0(223)\u00a0and\u00a0Extract\u00a0Function\u00a0(106)\u00a0to\u00a0separate\u00a0the\nside\u00adeffect\u00adfree\u00a0code\u00a0from\u00a0anything\u00a0that\u00a0performs\u00a0the\u00a0update.\u00a0In\u00a0APIs,\u00a0use\u00a0Separate\nQuery\u00a0from\u00a0Modifier\u00a0(306)\u00a0to\u00a0ensure\u00a0callers\u00a0don\u2019t\u00a0need\u00a0to\u00a0call\u00a0code\u00a0that\u00a0has\u00a0side\u00a0effects\nunless\u00a0they\u00a0really\u00a0need\u00a0to.\u00a0We\u00a0like\u00a0to\u00a0use\u00a0Remove\u00a0Setting\u00a0Method\u00a0(331)\u00a0as\u00a0soon\u00a0as\u00a0we\ncan\u2014sometimes,\u00a0just\u00a0trying\u00a0to\u00a0find\u00a0clients\u00a0of\u00a0a\u00a0setter\u00a0helps\u00a0spot\u00a0opportunities\u00a0to\u00a0reduce\nthe\u00a0scope\u00a0of\u00a0a\u00a0variable.\nMutable\u00a0data\u00a0that\u00a0can\u00a0be\u00a0calculated\u00a0elsewhere\u00a0is\u00a0particularly\u00a0pungent.\u00a0It\u2019s\u00a0not\u00a0just\u00a0a\nrich\u00a0source\u00a0of\u00a0confusion,\u00a0bugs,\u00a0and\u00a0missed\u00a0dinners\u00a0at\u00a0home\u2014it\u2019s\u00a0also\u00a0unnecessary.\u00a0We\nspray\u00a0it\u00a0with\u00a0a\u00a0concentrated\u00a0solution\u00a0of\u00a0vinegar\u00a0and\u00a0Replace\u00a0Derived\u00a0Variable\u00a0with\nQuery\u00a0(248).\nMutable\u00a0data\u00a0isn\u2019t\u00a0a\u00a0big\u00a0problem\u00a0when\u00a0it\u2019s\u00a0a\u00a0variable\u00a0whose\u00a0scope\u00a0is\u00a0just\u00a0a\u00a0couple\u00a0of\nlines\u2014but\u00a0its\u00a0risk\u00a0increases\u00a0as\u00a0its\u00a0scope\u00a0grows.\u00a0Use\u00a0Combine\u00a0Functions\u00a0into\u00a0Class\u00a0(144)\nor\u00a0Combine\u00a0Functions\u00a0into\u00a0Transform\u00a0(149)\u00a0to\u00a0limit\u00a0how\u00a0much\u00a0code\u00a0needs\u00a0to\u00a0update\u00a0a\nvariable.\u00a0If\u00a0a\u00a0variable\u00a0contains\u00a0some\u00a0data\u00a0with\u00a0internal\u00a0structure,\u00a0it\u2019s\u00a0usually\u00a0better\u00a0to\nreplace\u00a0the\u00a0entire\u00a0structure\u00a0rather\u00a0than\u00a0modify\u00a0it\u00a0in\u00a0place,\u00a0using\u00a0Change\u00a0Reference\u00a0to\nValue\u00a0(252).\nDIVERGENT CHANGE\nWe\u00a0structure\u00a0our\u00a0software\u00a0to\u00a0make\u00a0change\u00a0easier\u037e\u00a0after\u00a0all,\u00a0software\u00a0is\u00a0meant\u00a0to\u00a0be\u00a0soft.\nWhen\u00a0we\u00a0make\u00a0a\u00a0change,\u00a0we\u00a0want\u00a0to\u00a0be\u00a0able\u00a0to\u00a0jump\u00a0to\u00a0a\u00a0single\u00a0clear\u00a0point\u00a0in\u00a0the\nsystem\u00a0and\u00a0make\u00a0the\u00a0change.\u00a0When\u00a0you\u00a0can\u2019t\u00a0do\u00a0this,\u00a0you\u00a0are\u00a0smelling\u00a0one\u00a0of\u00a0two\nclosely\u00a0related\u00a0pungencies.\nDivergent\u00a0change\u00a0occurs\u00a0when\u00a0one\u00a0module\u00a0is\u00a0often\u00a0changed\u00a0in\u00a0different\u00a0ways\u00a0for\ndifferent\u00a0reasons.\u00a0If\u00a0you\u00a0look\u00a0at\u00a0a\u00a0module\u00a0and\u00a0say,\u00a0\u201cWell,\u00a0I\u00a0will\u00a0have\u00a0to\u00a0change\u00a0these\nthree\u00a0functions\u00a0every\u00a0time\u00a0I\u00a0get\u00a0a\u00a0new\u00a0database\u037e\u00a0I\u00a0have\u00a0to\u00a0change\u00a0these\u00a0four\u00a0functions\nevery\u00a0time\u00a0there\u00a0is\u00a0a\u00a0new\u00a0financial\u00a0instrument,\u201d\u00a0this\u00a0is\u00a0an\u00a0indication\u00a0of\u00a0divergent\nchange.\u00a0The\u00a0database\u00a0interaction\u00a0and\u00a0financial\u00a0processing\u00a0problems\u00a0are\u00a0separate\ncontexts,\u00a0and\u00a0we\u00a0can\u00a0make\u00a0our\u00a0programming\u00a0life\u00a0better\u00a0by\u00a0moving\u00a0such\u00a0contexts\u00a0into\nseparate\u00a0modules.\u00a0That\u00a0way,\u00a0when\u00a0we\u00a0have\u00a0a\u00a0change\u00a0to\u00a0one\u00a0context,\u00a0we\u00a0only\u00a0have\u00a0to\nunderstand\u00a0that\u00a0one\u00a0context\u00a0and\u00a0ignore\u00a0the\u00a0other.\u00a0We\u00a0always\u00a0found\u00a0this\u00a0to\u00a0be\nimportant,\u00a0but\u00a0now,\u00a0with\u00a0our\u00a0brains\u00a0shrinking\u00a0with\u00a0age,\u00a0it\u00a0becomes\u00a0all\u00a0the\u00a0more\nimperative.\u00a0Of\u00a0course,\u00a0you\u00a0often\u00a0discover\u00a0this\u00a0only\u00a0after\u00a0you\u2019ve\u00a0added\u00a0a\u00a0few\u00a0databases\nor\u00a0financial\u00a0instruments\u037e\u00a0context\u00a0boundaries\u00a0are\u00a0usually\u00a0unclear\u00a0in\u00a0the\u00a0early\u00a0days\u00a0of\u00a0a\nprogram\u00a0and\u00a0continue\u00a0to\u00a0shift\u00a0as\u00a0a\u00a0software\u00a0system\u2019s\u00a0capabilities\u00a0change.\nwww.EBooksWorld.ir\n", "page": 90, "type": "text", "section": "Page 90"}
{"text": "If\u00a0the\u00a0two\u00a0aspects\u00a0naturally\u00a0form\u00a0a\u00a0sequence\u2014for\u00a0example,\u00a0you\u00a0get\u00a0data\u00a0from\u00a0the\ndatabase\u00a0and\u00a0then\u00a0apply\u00a0your\u00a0financial\u00a0processing\u00a0on\u00a0it\u2014then\u00a0Split\u00a0Phase\u00a0(154)\nseparates\u00a0the\u00a0two\u00a0with\u00a0a\u00a0clear\u00a0data\u00a0structure\u00a0between\u00a0them.\u00a0If\u00a0there\u2019s\u00a0more\u00a0back\u00adand\u00ad\nforth\u00a0in\u00a0the\u00a0calls,\u00a0then\u00a0create\u00a0appropriate\u00a0modules\u00a0and\u00a0use\u00a0Move\u00a0Function\u00a0(198)\u00a0to\ndivide\u00a0the\u00a0processing\u00a0up.\u00a0If\u00a0functions\u00a0mix\u00a0the\u00a0two\u00a0types\u00a0of\u00a0processing\u00a0within\nthemselves,\u00a0use\u00a0Extract\u00a0Function\u00a0(106)\u00a0to\u00a0separate\u00a0them\u00a0before\u00a0moving.\u00a0If\u00a0the\u00a0modules\nare\u00a0classes,\u00a0then\u00a0Extract\u00a0Class\u00a0(182)\u00a0helps\u00a0formalize\u00a0how\u00a0to\u00a0do\u00a0the\u00a0split.\nSHOTGUN SURGERY\nShotgun\u00a0surgery\u00a0is\u00a0similar\u00a0to\u00a0divergent\u00a0change\u00a0but\u00a0is\u00a0the\u00a0opposite.\u00a0You\u00a0whiff\u00a0this\u00a0when,\nevery\u00a0time\u00a0you\u00a0make\u00a0a\u00a0change,\u00a0you\u00a0have\u00a0to\u00a0make\u00a0a\u00a0lot\u00a0of\u00a0little\u00a0edits\u00a0to\u00a0a\u00a0lot\u00a0of\u00a0different\nclasses.\u00a0When\u00a0the\u00a0changes\u00a0are\u00a0all\u00a0over\u00a0the\u00a0place,\u00a0they\u00a0are\u00a0hard\u00a0to\u00a0find,\u00a0and\u00a0it\u2019s\u00a0easy\u00a0to\nmiss\u00a0an\u00a0important\u00a0change.\nIn\u00a0this\u00a0case,\u00a0you\u00a0want\u00a0to\u00a0use\u00a0Move\u00a0Function\u00a0(198)\u00a0and\u00a0Move\u00a0Field\u00a0(207)\u00a0to\u00a0put\u00a0all\u00a0the\nchanges\u00a0into\u00a0a\u00a0single\u00a0module.\u00a0If\u00a0you\u00a0have\u00a0a\u00a0bunch\u00a0of\u00a0functions\u00a0operating\u00a0on\u00a0similar\ndata,\u00a0use\u00a0Combine\u00a0Functions\u00a0into\u00a0Class\u00a0(144).\u00a0If\u00a0you\u00a0have\u00a0functions\u00a0that\u00a0are\ntransforming\u00a0or\u00a0enriching\u00a0a\u00a0data\u00a0structure,\u00a0use\u00a0Combine\u00a0Functions\u00a0into\u00a0Transform\n(149).\u00a0Split\u00a0Phase\u00a0(154)\u00a0is\u00a0often\u00a0useful\u00a0here\u00a0if\u00a0the\u00a0common\u00a0functions\u00a0can\u00a0combine\u00a0their\noutput\u00a0for\u00a0a\u00a0consuming\u00a0phase\u00a0of\u00a0logic.\nA\u00a0useful\u00a0tactic\u00a0for\u00a0shotgun\u00a0surgery\u00a0is\u00a0to\u00a0use\u00a0inlining\u00a0refactorings,\u00a0such\u00a0as\u00a0Inline\nFunction\u00a0(115)\u00a0or\u00a0Inline\u00a0Class\u00a0(186),\u00a0to\u00a0pull\u00a0together\u00a0poorly\u00a0separated\u00a0logic.\u00a0You\u2019ll\u00a0end\nup\u00a0with\u00a0a\u00a0Long\u00a0Method\u00a0or\u00a0a\u00a0Large\u00a0Class,\u00a0but\u00a0can\u00a0then\u00a0use\u00a0extractions\u00a0to\u00a0break\u00a0it\u00a0up\u00a0into\nmore\u00a0sensible\u00a0pieces.\u00a0Even\u00a0though\u00a0we\u00a0are\u00a0inordinately\u00a0fond\u00a0of\u00a0small\u00a0functions\u00a0and\nclasses\u00a0in\u00a0our\u00a0code,\u00a0we\u00a0aren\u2019t\u00a0afraid\u00a0of\u00a0creating\u00a0something\u00a0large\u00a0as\u00a0an\u00a0intermediate\u00a0step\nto\u00a0reorganization.\nFEATURE ENVY\nWhen\u00a0we\u00a0modularize\u00a0a\u00a0program,\u00a0we\u00a0are\u00a0trying\u00a0to\u00a0separate\u00a0the\u00a0code\u00a0into\u00a0zones\u00a0to\nmaximize\u00a0the\u00a0interaction\u00a0inside\u00a0a\u00a0zone\u00a0and\u00a0minimize\u00a0interaction\u00a0between\u00a0zones.\u00a0A\nclassic\u00a0case\u00a0of\u00a0Feature\u00a0Envy\u00a0occurs\u00a0when\u00a0a\u00a0function\u00a0in\u00a0one\u00a0module\u00a0spends\u00a0more\u00a0time\ncommunicating\u00a0with\u00a0functions\u00a0or\u00a0data\u00a0inside\u00a0another\u00a0module\u00a0than\u00a0it\u00a0does\u00a0within\u00a0its\nown\u00a0module.\u00a0We\u2019ve\u00a0lost\u00a0count\u00a0of\u00a0the\u00a0times\u00a0we\u2019ve\u00a0seen\u00a0a\u00a0function\u00a0invoking\u00a0half\u00ada\u00addozen\ngetter\u00a0methods\u00a0on\u00a0another\u00a0object\u00a0to\u00a0calculate\u00a0some\u00a0value.\u00a0Fortunately,\u00a0the\u00a0cure\u00a0for\u00a0that\ncase\u00a0is\u00a0obvious:\u00a0The\u00a0function\u00a0clearly\u00a0wants\u00a0to\u00a0be\u00a0with\u00a0the\u00a0data,\u00a0so\u00a0use\u00a0Move\u00a0Function\n(198)\u00a0to\u00a0get\u00a0it\u00a0there.\u00a0Sometimes,\u00a0only\u00a0a\u00a0part\u00a0of\u00a0a\u00a0function\u00a0suffers\u00a0from\u00a0envy,\u00a0in\u00a0which\ncase\u00a0use\u00a0Extract\u00a0Function\u00a0(106)\u00a0on\u00a0the\u00a0jealous\u00a0bit,\u00a0and\u00a0Move\u00a0Function\u00a0(198)\u00a0to\u00a0give\u00a0it\u00a0a\nwww.EBooksWorld.ir\n", "page": 91, "type": "text", "section": "Page 91"}
{"text": "dream\u00a0home.\nOf\u00a0course\u00a0not\u00a0all\u00a0cases\u00a0are\u00a0cut\u00adand\u00addried.\u00a0Often,\u00a0a\u00a0function\u00a0uses\u00a0features\u00a0of\u00a0several\nmodules,\u00a0so\u00a0which\u00a0one\u00a0should\u00a0it\u00a0live\u00a0with?\u00a0The\u00a0heuristic\u00a0we\u00a0use\u00a0is\u00a0to\u00a0determine\u00a0which\nmodule\u00a0has\u00a0most\u00a0of\u00a0the\u00a0data\u00a0and\u00a0put\u00a0the\u00a0function\u00a0with\u00a0that\u00a0data.\u00a0This\u00a0step\u00a0is\u00a0often\nmade\u00a0easier\u00a0if\u00a0you\u00a0use\u00a0Extract\u00a0Function\u00a0(106)\u00a0to\u00a0break\u00a0the\u00a0function\u00a0into\u00a0pieces\u00a0that\u00a0go\ninto\u00a0different\u00a0places.\nOf\u00a0course,\u00a0there\u00a0are\u00a0several\u00a0sophisticated\u00a0patterns\u00a0that\u00a0break\u00a0this\u00a0rule.\u00a0From\u00a0the\u00a0Gang\nof\u00a0Four\u00a0[gof],\u00a0Strategy\u00a0and\u00a0Visitor\u00a0immediately\u00a0leap\u00a0to\u00a0mind.\u00a0Kent\u00a0Beck\u2019s\u00a0Self\nDelegation\u00a0[Beck\u00a0SBPP]\u00a0is\u00a0another.\u00a0Use\u00a0these\u00a0to\u00a0combat\u00a0the\u00a0divergent\u00a0change\u00a0smell.\nThe\u00a0fundamental\u00a0rule\u00a0of\u00a0thumb\u00a0is\u00a0to\u00a0put\u00a0things\u00a0together\u00a0that\u00a0change\u00a0together.\u00a0Data\u00a0and\nthe\u00a0behavior\u00a0that\u00a0references\u00a0that\u00a0data\u00a0usually\u00a0change\u00a0together\u2014but\u00a0there\u00a0are\nexceptions.\u00a0When\u00a0the\u00a0exceptions\u00a0occur,\u00a0we\u00a0move\u00a0the\u00a0behavior\u00a0to\u00a0keep\u00a0changes\u00a0in\u00a0one\nplace.\u00a0Strategy\u00a0and\u00a0Visitor\u00a0allow\u00a0you\u00a0to\u00a0change\u00a0behavior\u00a0easily\u00a0because\u00a0they\u00a0isolate\u00a0the\nsmall\u00a0amount\u00a0of\u00a0behavior\u00a0that\u00a0needs\u00a0to\u00a0be\u00a0overridden,\u00a0at\u00a0the\u00a0cost\u00a0of\u00a0further\u00a0indirection.\nDATA CLUMPS\nData\u00a0items\u00a0tend\u00a0to\u00a0be\u00a0like\u00a0children:\u00a0They\u00a0enjoy\u00a0hanging\u00a0around\u00a0together.\u00a0Often,\u00a0you\u2019ll\nsee\u00a0the\u00a0same\u00a0three\u00a0or\u00a0four\u00a0data\u00a0items\u00a0together\u00a0in\u00a0lots\u00a0of\u00a0places:\u00a0as\u00a0fields\u00a0in\u00a0a\u00a0couple\u00a0of\nclasses,\u00a0as\u00a0parameters\u00a0in\u00a0many\u00a0method\u00a0signatures.\u00a0Bunches\u00a0of\u00a0data\u00a0that\u00a0hang\u00a0around\ntogether\u00a0really\u00a0ought\u00a0to\u00a0find\u00a0a\u00a0home\u00a0together.\u00a0The\u00a0first\u00a0step\u00a0is\u00a0to\u00a0look\u00a0for\u00a0where\u00a0the\nclumps\u00a0appear\u00a0as\u00a0fields.\u00a0Use\u00a0Extract\u00a0Class\u00a0(182)\u00a0on\u00a0the\u00a0fields\u00a0to\u00a0turn\u00a0the\u00a0clumps\u00a0into\u00a0an\nobject.\u00a0Then\u00a0turn\u00a0your\u00a0attention\u00a0to\u00a0method\u00a0signatures\u00a0using\u00a0Introduce\u00a0Parameter\nObject\u00a0(140)\u00a0or\u00a0Preserve\u00a0Whole\u00a0Object\u00a0(319)\u00a0to\u00a0slim\u00a0them\u00a0down.\u00a0The\u00a0immediate\u00a0benefit\nis\u00a0that\u00a0you\u00a0can\u00a0shrink\u00a0a\u00a0lot\u00a0of\u00a0parameter\u00a0lists\u00a0and\u00a0simplify\u00a0method\u00a0calling.\u00a0Don\u2019t\u00a0worry\nabout\u00a0data\u00a0clumps\u00a0that\u00a0use\u00a0only\u00a0some\u00a0of\u00a0the\u00a0fields\u00a0of\u00a0the\u00a0new\u00a0object.\u00a0As\u00a0long\u00a0as\u00a0you\u00a0are\nreplacing\u00a0two\u00a0or\u00a0more\u00a0fields\u00a0with\u00a0the\u00a0new\u00a0object,\u00a0you\u2019ll\u00a0come\u00a0out\u00a0ahead.\nA\u00a0good\u00a0test\u00a0is\u00a0to\u00a0consider\u00a0deleting\u00a0one\u00a0of\u00a0the\u00a0data\u00a0values.\u00a0If\u00a0you\u00a0did\u00a0this,\u00a0would\u00a0the\nothers\u00a0make\u00a0any\u00a0sense?\u00a0If\u00a0they\u00a0don\u2019t,\u00a0it\u2019s\u00a0a\u00a0sure\u00a0sign\u00a0that\u00a0you\u00a0have\u00a0an\u00a0object\u00a0that\u2019s\u00a0dying\nto\u00a0be\u00a0born.\nYou\u2019ll\u00a0notice\u00a0that\u00a0we\u00a0advocate\u00a0creating\u00a0a\u00a0class\u00a0here,\u00a0not\u00a0a\u00a0simple\u00a0record\u00a0structure.\u00a0We\ndo\u00a0this\u00a0because\u00a0using\u00a0a\u00a0class\u00a0gives\u00a0you\u00a0the\u00a0opportunity\u00a0to\u00a0make\u00a0a\u00a0nice\u00a0perfume.\u00a0You\u00a0can\nnow\u00a0look\u00a0for\u00a0cases\u00a0of\u00a0feature\u00a0envy,\u00a0which\u00a0will\u00a0suggest\u00a0behavior\u00a0that\u00a0can\u00a0be\u00a0moved\u00a0into\nyour\u00a0new\u00a0classes.\u00a0We\u2019ve\u00a0often\u00a0seen\u00a0this\u00a0as\u00a0a\u00a0powerful\u00a0dynamic\u00a0that\u00a0creates\u00a0useful\nclasses\u00a0and\u00a0can\u00a0remove\u00a0a\u00a0lot\u00a0of\u00a0duplication\u00a0and\u00a0accelerate\u00a0future\u00a0development,\u00a0allowing\nthe\u00a0data\u00a0to\u00a0become\u00a0productive\u00a0members\u00a0of\u00a0society.\nPRIMITIVE OBSESSION\nwww.EBooksWorld.ir\n", "page": 92, "type": "text", "section": "Page 92"}
{"text": "PRIMITIVE OBSESSION\nMost\u00a0programming\u00a0environments\u00a0are\u00a0built\u00a0on\u00a0a\u00a0widely\u00a0used\u00a0set\u00a0of\u00a0primitive\u00a0types:\nintegers,\u00a0floating\u00a0point\u00a0numbers,\u00a0and\u00a0strings.\u00a0Libraries\u00a0may\u00a0add\u00a0some\u00a0additional\u00a0small\nobjects\u00a0such\u00a0as\u00a0dates.\u00a0We\u00a0find\u00a0many\u00a0programmers\u00a0are\u00a0curiously\u00a0reluctant\u00a0to\u00a0create\ntheir\u00a0own\u00a0fundamental\u00a0types\u00a0which\u00a0are\u00a0useful\u00a0for\u00a0their\u00a0domain\u2014such\u00a0as\u00a0money,\ncoordinates,\u00a0or\u00a0ranges.\u00a0We\u00a0thus\u00a0see\u00a0calculations\u00a0that\u00a0treat\u00a0monetary\u00a0amounts\u00a0as\u00a0plain\nnumbers,\u00a0or\u00a0calculations\u00a0of\u00a0physical\u00a0quantities\u00a0that\u00a0ignore\u00a0units\u00a0(adding\u00a0inches\u00a0to\nmillimeters),\u00a0or\u00a0lots\u00a0of\u00a0code\u00a0doing\u00a0if\u00a0(a\u00a0<\u00a0upper\u00a0&&\u00a0a\u00a0>\u00a0lower).\nStrings\u00a0are\u00a0particularly\u00a0common\u00a0petri\u00a0dishes\u00a0for\u00a0this\u00a0kind\u00a0of\u00a0odor:\u00a0A\u00a0telephone\u00a0number\nis\u00a0more\u00a0than\u00a0just\u00a0a\u00a0collection\u00a0of\u00a0characters.\u00a0If\u00a0nothing\u00a0else,\u00a0a\u00a0proper\u00a0type\u00a0can\u00a0often\ninclude\u00a0consistent\u00a0display\u00a0logic\u00a0for\u00a0when\u00a0it\u00a0needs\u00a0to\u00a0be\u00a0displayed\u00a0in\u00a0a\u00a0user\u00a0interface.\nRepresenting\u00a0such\u00a0types\u00a0as\u00a0strings\u00a0is\u00a0such\u00a0a\u00a0common\u00a0stench\u00a0that\u00a0people\u00a0call\u00a0them\n\u201cstringly\u00a0typed\u201d\u00a0variables.\nYou\u00a0can\u00a0move\u00a0out\u00a0of\u00a0the\u00a0primitive\u00a0cave\u00a0into\u00a0the\u00a0centrally\u00a0heated\u00a0world\u00a0of\u00a0meaningful\ntypes\u00a0by\u00a0using\u00a0Replace\u00a0Primitive\u00a0with\u00a0Object\u00a0(174).\u00a0If\u00a0the\u00a0primitive\u00a0is\u00a0a\u00a0type\u00a0code\ncontrolling\u00a0conditional\u00a0behavior,\u00a0use\u00a0Replace\u00a0Type\u00a0Code\u00a0with\u00a0Subclasses\u00a0(362)\nfollowed\u00a0by\u00a0Replace\u00a0Conditional\u00a0with\u00a0Polymorphism\u00a0(272).\nGroups\u00a0of\u00a0primitives\u00a0that\u00a0commonly\u00a0appear\u00a0together\u00a0are\u00a0data\u00a0clumps\u00a0and\u00a0should\u00a0be\ncivilized\u00a0with\u00a0Extract\u00a0Class\u00a0(182)\u00a0and\u00a0Introduce\u00a0Parameter\u00a0Object\u00a0(140).\nREPEATED SWITCHES\nTalk\u00a0to\u00a0a\u00a0true\u00a0object\u00adoriented\u00a0evangelist\u00a0and\u00a0they\u2019ll\u00a0soon\u00a0get\u00a0onto\u00a0the\u00a0evils\u00a0of\u00a0switch\nstatements.\u00a0They\u2019ll\u00a0argue\u00a0that\u00a0any\u00a0switch\u00a0statement\u00a0you\u00a0see\u00a0is\u00a0begging\u00a0for\u00a0Replace\nConditional\u00a0with\u00a0Polymorphism\u00a0(272).\u00a0We\u2019ve\u00a0even\u00a0heard\u00a0some\u00a0people\u00a0argue\u00a0that\u00a0all\nconditional\u00a0logic\u00a0should\u00a0be\u00a0replaced\u00a0with\u00a0polymorphism,\u00a0tossing\u00a0most\u00a0ifs\u00a0into\u00a0the\ndustbin\u00a0of\u00a0history.\nEven\u00a0in\u00a0our\u00a0more\u00a0wild\u00adeyed\u00a0youth,\u00a0we\u00a0were\u00a0never\u00a0unconditionally\u00a0opposed\u00a0to\u00a0the\nconditional.\u00a0Indeed,\u00a0the\u00a0first\u00a0edition\u00a0of\u00a0this\u00a0book\u00a0had\u00a0a\u00a0smell\u00a0entitled\u00a0\u201cswitch\nstatements.\u201d\u00a0The\u00a0smell\u00a0was\u00a0there\u00a0because\u00a0in\u00a0the\u00a0late\u00a090\u2019s\u00a0we\u00a0found\u00a0polymorphism\u00a0sadly\nunderappreciated,\u00a0and\u00a0saw\u00a0benefit\u00a0in\u00a0getting\u00a0people\u00a0to\u00a0switch\u00a0over.\nThese\u00a0days\u00a0there\u00a0is\u00a0more\u00a0polymorphism\u00a0about,\u00a0and\u00a0it\u00a0isn\u2019t\u00a0the\u00a0simple\u00a0red\u00a0flag\u00a0that\u00a0it\noften\u00a0was\u00a0fifteen\u00a0years\u00a0ago.\u00a0Furthermore,\u00a0many\u00a0languages\u00a0support\u00a0more\u00a0sophisticated\nforms\u00a0of\u00a0switch\u00a0statements\u00a0that\u00a0use\u00a0more\u00a0than\u00a0some\u00a0primitive\u00a0code\u00a0as\u00a0their\u00a0base.\u00a0So\u00a0we\nnow\u00a0focus\u00a0on\u00a0the\u00a0repeated\u00a0switch,\u00a0where\u00a0the\u00a0same\u00a0conditional\u00a0switching\u00a0logic\u00a0(either\u00a0in\nwww.EBooksWorld.ir\n", "page": 93, "type": "text", "section": "Page 93"}
{"text": "a\u00a0switch/case\u00a0statement\u00a0or\u00a0in\u00a0a\u00a0cascade\u00a0of\u00a0if/else\u00a0statements)\u00a0pops\u00a0up\u00a0in\u00a0different\nplaces.\u00a0The\u00a0problem\u00a0with\u00a0such\u00a0duplicate\u00a0switches\u00a0is\u00a0that,\u00a0whenever\u00a0you\u00a0add\u00a0a\u00a0clause,\nyou\u00a0have\u00a0to\u00a0find\u00a0all\u00a0the\u00a0switches\u00a0and\u00a0update\u00a0them.\u00a0Against\u00a0the\u00a0dark\u00a0forces\u00a0of\u00a0such\nrepetition,\u00a0polymorphism\u00a0provides\u00a0an\u00a0elegant\u00a0weapon\u00a0for\u00a0a\u00a0more\u00a0civilized\u00a0codebase.\nLOOPS\nLoops\u00a0have\u00a0been\u00a0a\u00a0core\u00a0part\u00a0of\u00a0programming\u00a0since\u00a0the\u00a0earliest\u00a0languages.\u00a0But\u00a0we\u00a0feel\nthey\u00a0are\u00a0no\u00a0more\u00a0relevant\u00a0today\u00a0than\u00a0bell\u00adbottoms\u00a0and\u00a0flock\u00a0wallpaper.\u00a0We\u00a0disdained\nthem\u00a0at\u00a0the\u00a0time\u00a0of\u00a0the\u00a0first\u00a0edition\u2014but\u00a0Java,\u00a0like\u00a0most\u00a0other\u00a0languages\u00a0at\u00a0the\u00a0time,\ndidn\u2019t\u00a0provide\u00a0a\u00a0better\u00a0alternative.\u00a0These\u00a0days,\u00a0however,\u00a0first\u00adclass\u00a0functions\u00a0are\u00a0widely\nsupported,\u00a0so\u00a0we\u00a0can\u00a0use\u00a0Replace\u00a0Loop\u00a0with\u00a0Pipeline\u00a0(231)\u00a0to\u00a0retire\u00a0those\nanachronisms.\u00a0We\u00a0find\u00a0that\u00a0pipeline\u00a0operations,\u00a0such\u00a0as\u00a0filter\u00a0and\u00a0map,\u00a0help\u00a0us\u00a0quickly\nsee\u00a0the\u00a0elements\u00a0that\u00a0are\u00a0included\u00a0in\u00a0the\u00a0processing\u00a0and\u00a0what\u00a0is\u00a0done\u00a0with\u00a0them.\nLAZY ELEMENT\nWe\u00a0like\u00a0using\u00a0program\u00a0elements\u00a0to\u00a0add\u00a0structure\u2014providing\u00a0opportunities\u00a0for\nvariation,\u00a0reuse,\u00a0or\u00a0just\u00a0having\u00a0more\u00a0helpful\u00a0names.\u00a0But\u00a0sometimes\u00a0the\u00a0structure\u00a0isn\u2019t\nneeded.\u00a0It\u00a0may\u00a0be\u00a0a\u00a0function\u00a0that\u2019s\u00a0named\u00a0the\u00a0same\u00a0as\u00a0its\u00a0body\u00a0code\u00a0reads,\u00a0or\u00a0a\u00a0class\nthat\u00a0is\u00a0essentially\u00a0one\u00a0simple\u00a0function.\u00a0Sometimes,\u00a0this\u00a0reflects\u00a0a\u00a0function\u00a0that\u00a0was\nexpected\u00a0to\u00a0grow\u00a0and\u00a0be\u00a0popular\u00a0later,\u00a0but\u00a0never\u00a0realized\u00a0its\u00a0dreams.\u00a0Sometimes,\u00a0it\u2019s\u00a0a\nclass\u00a0that\u00a0used\u00a0to\u00a0pay\u00a0its\u00a0way,\u00a0but\u00a0has\u00a0been\u00a0downsized\u00a0with\u00a0refactoring.\u00a0Either\u00a0way,\nsuch\u00a0program\u00a0elements\u00a0need\u00a0to\u00a0die\u00a0with\u00a0dignity.\u00a0Usually\u00a0this\u00a0means\u00a0using\u00a0Inline\nFunction\u00a0(115)\u00a0or\u00a0Inline\u00a0Class\u00a0(186).\u00a0With\u00a0inheritance,\u00a0you\u00a0can\u00a0use\u00a0Collapse\u00a0Hierarchy\n(380).\nSPECULATIVE GENERALITY\nBrian\u00a0Foote\u00a0suggested\u00a0this\u00a0name\u00a0for\u00a0a\u00a0smell\u00a0to\u00a0which\u00a0we\u00a0are\u00a0very\u00a0sensitive.\u00a0You\u00a0get\u00a0it\nwhen\u00a0people\u00a0say,\u00a0\u201cOh,\u00a0I\u00a0think\u00a0we\u2019ll\u00a0need\u00a0the\u00a0ability\u00a0to\u00a0do\u00a0this\u00a0kind\u00a0of\u00a0thing\u00a0someday\u201d\nand\u00a0thus\u00a0add\u00a0all\u00a0sorts\u00a0of\u00a0hooks\u00a0and\u00a0special\u00a0cases\u00a0to\u00a0handle\u00a0things\u00a0that\u00a0aren\u2019t\u00a0required.\nThe\u00a0result\u00a0is\u00a0often\u00a0harder\u00a0to\u00a0understand\u00a0and\u00a0maintain.\u00a0If\u00a0all\u00a0this\u00a0machinery\u00a0were\u00a0being\nused,\u00a0it\u00a0would\u00a0be\u00a0worth\u00a0it.\u00a0But\u00a0if\u00a0it\u00a0isn\u2019t,\u00a0it\u00a0isn\u2019t.\u00a0The\u00a0machinery\u00a0just\u00a0gets\u00a0in\u00a0the\u00a0way,\u00a0so\nget\u00a0rid\u00a0of\u00a0it.\nIf\u00a0you\u00a0have\u00a0abstract\u00a0classes\u00a0that\u00a0aren\u2019t\u00a0doing\u00a0much,\u00a0use\u00a0Collapse\u00a0Hierarchy\u00a0(380).\nUnnecessary\u00a0delegation\u00a0can\u00a0be\u00a0removed\u00a0with\u00a0Inline\u00a0Function\u00a0(115)\u00a0and\u00a0Inline\u00a0Class\n(186).\u00a0Functions\u00a0with\u00a0unused\u00a0parameters\u00a0should\u00a0be\u00a0subject\u00a0to\u00a0Change\u00a0Function\nDeclaration\u00a0(124)\u00a0to\u00a0remove\u00a0those\u00a0parameters.\u00a0You\u00a0should\u00a0also\u00a0apply\u00a0Change\u00a0Function\nwww.EBooksWorld.ir\n", "page": 94, "type": "text", "section": "Page 94"}
{"text": "Declaration\u00a0(124)\u00a0to\u00a0remove\u00a0any\u00a0unneeded\u00a0parameters,\u00a0which\u00a0often\u00a0get\u00a0tossed\u00a0in\u00a0for\nfuture\u00a0variations\u00a0that\u00a0never\u00a0come\u00a0to\u00a0pass.\nSpeculative\u00a0generality\u00a0can\u00a0be\u00a0spotted\u00a0when\u00a0the\u00a0only\u00a0users\u00a0of\u00a0a\u00a0function\u00a0or\u00a0class\u00a0are\u00a0test\ncases.\u00a0If\u00a0you\u00a0find\u00a0such\u00a0an\u00a0animal,\u00a0delete\u00a0the\u00a0test\u00a0case\u00a0and\u00a0apply\u00a0Remove\u00a0Dead\u00a0Code\n(237).\nTEMPORARY FIELD\nSometimes\u00a0you\u00a0see\u00a0a\u00a0class\u00a0in\u00a0which\u00a0a\u00a0field\u00a0is\u00a0set\u00a0only\u00a0in\u00a0certain\u00a0circumstances.\u00a0Such\ncode\u00a0is\u00a0difficult\u00a0to\u00a0understand,\u00a0because\u00a0you\u00a0expect\u00a0an\u00a0object\u00a0to\u00a0need\u00a0all\u00a0of\u00a0its\u00a0fields.\nTrying\u00a0to\u00a0understand\u00a0why\u00a0a\u00a0field\u00a0is\u00a0there\u00a0when\u00a0it\u00a0doesn\u2019t\u00a0seem\u00a0to\u00a0be\u00a0used\u00a0can\u00a0drive\u00a0you\nnuts.\nUse\u00a0Extract\u00a0Class\u00a0(182)\u00a0to\u00a0create\u00a0a\u00a0home\u00a0for\u00a0the\u00a0poor\u00a0orphan\u00a0variables.\u00a0Use\u00a0Move\nFunction\u00a0(198)\u00a0to\u00a0put\u00a0all\u00a0the\u00a0code\u00a0that\u00a0concerns\u00a0the\u00a0fields\u00a0into\u00a0this\u00a0new\u00a0class.\u00a0You\u00a0may\nalso\u00a0be\u00a0able\u00a0to\u00a0eliminate\u00a0conditional\u00a0code\u00a0by\u00a0using\u00a0Introduce\u00a0Special\u00a0Case\u00a0(289)\u00a0to\ncreate\u00a0an\u00a0alternative\u00a0class\u00a0for\u00a0when\u00a0the\u00a0variables\u00a0aren\u2019t\u00a0valid.\nMESSAGE CHAINS\nYou\u00a0see\u00a0message\u00a0chains\u00a0when\u00a0a\u00a0client\u00a0asks\u00a0one\u00a0object\u00a0for\u00a0another\u00a0object,\u00a0which\u00a0the\nclient\u00a0then\u00a0asks\u00a0for\u00a0yet\u00a0another\u00a0object,\u00a0which\u00a0the\u00a0client\u00a0then\u00a0asks\u00a0for\u00a0yet\u00a0another\nanother\u00a0object,\u00a0and\u00a0so\u00a0on.\u00a0You\u00a0may\u00a0see\u00a0these\u00a0as\u00a0a\u00a0long\u00a0line\u00a0of\u00a0getThis\u00a0methods,\u00a0or\u00a0as\na\u00a0sequence\u00a0of\u00a0temps.\u00a0Navigating\u00a0this\u00a0way\u00a0means\u00a0the\u00a0client\u00a0is\u00a0coupled\u00a0to\u00a0the\u00a0structure\u00a0of\nthe\u00a0navigation.\u00a0Any\u00a0change\u00a0to\u00a0the\u00a0intermediate\u00a0relationships\u00a0causes\u00a0the\u00a0client\u00a0to\u00a0have\u00a0to\nchange.\nThe\u00a0move\u00a0to\u00a0use\u00a0here\u00a0is\u00a0Hide\u00a0Delegate\u00a0(189).\u00a0You\u00a0can\u00a0do\u00a0this\u00a0at\u00a0various\u00a0points\u00a0in\u00a0the\nchain.\u00a0In\u00a0principle,\u00a0you\u00a0can\u00a0do\u00a0this\u00a0to\u00a0every\u00a0object\u00a0in\u00a0the\u00a0chain,\u00a0but\u00a0doing\u00a0this\u00a0often\nturns\u00a0every\u00a0intermediate\u00a0object\u00a0into\u00a0a\u00a0middle\u00a0man.\u00a0Often,\u00a0a\u00a0better\u00a0alternative\u00a0is\u00a0to\u00a0see\nwhat\u00a0the\u00a0resulting\u00a0object\u00a0is\u00a0used\u00a0for.\u00a0See\u00a0whether\u00a0you\u00a0can\u00a0use\u00a0Extract\u00a0Function\u00a0(106)\u00a0to\ntake\u00a0a\u00a0piece\u00a0of\u00a0the\u00a0code\u00a0that\u00a0uses\u00a0it\u00a0and\u00a0then\u00a0Move\u00a0Function\u00a0(198)\u00a0to\u00a0push\u00a0it\u00a0down\u00a0the\nchain.\u00a0If\u00a0several\u00a0clients\u00a0of\u00a0one\u00a0of\u00a0the\u00a0objects\u00a0in\u00a0the\u00a0chain\u00a0want\u00a0to\u00a0navigate\u00a0the\u00a0rest\u00a0of\u00a0the\nway,\u00a0add\u00a0a\u00a0method\u00a0to\u00a0do\u00a0that.\nSome\u00a0people\u00a0consider\u00a0any\u00a0method\u00a0chain\u00a0to\u00a0be\u00a0a\u00a0terrible\u00a0thing.\u00a0We\u00a0are\u00a0known\u00a0for\u00a0our\ncalm,\u00a0reasoned\u00a0moderation.\u00a0Well,\u00a0at\u00a0least\u00a0in\u00a0this\u00a0case\u00a0we\u00a0are.\nMIDDLE MAN\nwww.EBooksWorld.ir\n", "page": 95, "type": "text", "section": "Page 95"}
{"text": "One\u00a0of\u00a0the\u00a0prime\u00a0features\u00a0of\u00a0objects\u00a0is\u00a0encapsulation\u2014hiding\u00a0internal\u00a0details\u00a0from\u00a0the\nrest\u00a0of\u00a0the\u00a0world.\u00a0Encapsulation\u00a0often\u00a0comes\u00a0with\u00a0delegation.\u00a0You\u00a0ask\u00a0a\u00a0director\nwhether\u00a0she\u00a0is\u00a0free\u00a0for\u00a0a\u00a0meeting\u037e\u00a0she\u00a0delegates\u00a0the\u00a0message\u00a0to\u00a0her\u00a0diary\u00a0and\u00a0gives\u00a0you\nan\u00a0answer.\u00a0All\u00a0well\u00a0and\u00a0good.\u00a0There\u00a0is\u00a0no\u00a0need\u00a0to\u00a0know\u00a0whether\u00a0the\u00a0director\u00a0uses\u00a0a\ndiary,\u00a0an\u00a0electronic\u00a0gizmo,\u00a0or\u00a0a\u00a0secretary\u00a0to\u00a0keep\u00a0track\u00a0of\u00a0her\u00a0appointments.\nc\u00a0However,\u00a0this\u00a0can\u00a0go\u00a0too\u00a0far.\u00a0You\u00a0look\u00a0at\u00a0a\u00a0class\u2019s\u00a0interface\u00a0and\u00a0find\u00a0half\u00a0the\u00a0methods\nare\u00a0delegating\u00a0to\u00a0this\u00a0other\u00a0class.\u00a0After\u00a0a\u00a0while,\u00a0it\u00a0is\u00a0time\u00a0to\u00a0use\u00a0Remove\u00a0Middle\u00a0Man\n(192)\u00a0and\u00a0talk\u00a0to\u00a0the\u00a0object\u00a0that\u00a0really\u00a0knows\u00a0what\u2019s\u00a0going\u00a0on.\u00a0If\u00a0only\u00a0a\u00a0few\u00a0methods\naren\u2019t\u00a0doing\u00a0much,\u00a0use\u00a0Inline\u00a0Function\u00a0(115)\u00a0to\u00a0inline\u00a0them\u00a0into\u00a0the\u00a0caller.\u00a0If\u00a0there\u00a0is\nadditional\u00a0behavior,\u00a0you\u00a0can\u00a0use\u00a0Replace\u00a0Superclass\u00a0with\u00a0Delegate\u00a0(399)\u00a0or\u00a0Replace\nSubclass\u00a0with\u00a0Delegate\u00a0(381)\u00a0to\u00a0fold\u00a0the\u00a0middle\u00a0man\u00a0into\u00a0the\u00a0real\u00a0object.\u00a0That\u00a0allows\nyou\u00a0to\u00a0extend\u00a0behavior\u00a0without\u00a0chasing\u00a0all\u00a0that\u00a0delegation.\nINSIDER TRADING\nSoftware\u00a0people\u00a0like\u00a0strong\u00a0walls\u00a0between\u00a0their\u00a0modules\u00a0and\u00a0complain\u00a0bitterly\u00a0about\nhow\u00a0trading\u00a0data\u00a0around\u00a0too\u00a0much\u00a0increases\u00a0coupling.\u00a0To\u00a0make\u00a0things\u00a0work,\u00a0some\ntrade\u00a0has\u00a0to\u00a0occur,\u00a0but\u00a0we\u00a0need\u00a0to\u00a0reduce\u00a0it\u00a0to\u00a0a\u00a0minimum\u00a0and\u00a0keep\u00a0it\u00a0all\u00a0above\u00a0board.\nModules\u00a0that\u00a0whisper\u00a0to\u00a0each\u00a0other\u00a0by\u00a0the\u00a0coffee\u00a0machine\u00a0need\u00a0to\u00a0be\u00a0separated\u00a0by\u00a0using\nMove\u00a0Function\u00a0(198)\u00a0and\u00a0Move\u00a0Field\u00a0(207)\u00a0to\u00a0reduce\u00a0the\u00a0need\u00a0to\u00a0chat.\u00a0If\u00a0modules\u00a0have\ncommon\u00a0interests,\u00a0try\u00a0to\u00a0create\u00a0a\u00a0third\u00a0module\u00a0to\u00a0keep\u00a0that\u00a0commonality\u00a0in\u00a0a\u00a0well\u00ad\nregulated\u00a0vehicle,\u00a0or\u00a0use\u00a0Hide\u00a0Delegate\u00a0(189)\u00a0to\u00a0make\u00a0another\u00a0module\u00a0act\u00a0as\u00a0an\nintermediary.\nInheritance\u00a0can\u00a0often\u00a0lead\u00a0to\u00a0collusion.\u00a0Subclasses\u00a0are\u00a0always\u00a0going\u00a0to\u00a0know\u00a0more\nabout\u00a0their\u00a0parents\u00a0than\u00a0their\u00a0parents\u00a0would\u00a0like\u00a0them\u00a0to\u00a0know.\u00a0If\u00a0it\u2019s\u00a0time\u00a0to\u00a0leave\nhome,\u00a0apply\u00a0Replace\u00a0Subclass\u00a0with\u00a0Delegate\u00a0(381)\u00a0or\u00a0Replace\u00a0Superclass\u00a0with\nDelegate\u00a0(399).\nLARGE CLASS\nWhen\u00a0a\u00a0class\u00a0is\u00a0trying\u00a0to\u00a0do\u00a0too\u00a0much,\u00a0it\u00a0often\u00a0shows\u00a0up\u00a0as\u00a0too\u00a0many\u00a0fields.\u00a0When\u00a0a\nclass\u00a0has\u00a0too\u00a0many\u00a0fields,\u00a0duplicated\u00a0code\u00a0cannot\u00a0be\u00a0far\u00a0behind.\nYou\u00a0can\u00a0Extract\u00a0Class\u00a0(182)\u00a0to\u00a0bundle\u00a0a\u00a0number\u00a0of\u00a0the\u00a0variables.\u00a0Choose\u00a0variables\u00a0to\u00a0go\ntogether\u00a0in\u00a0the\u00a0component\u00a0that\u00a0makes\u00a0sense\u00a0for\u00a0each.\u00a0For\u00a0example,\u00a0\u201cdepositAmount\u201d\nand\u00a0\u201cdepositCurrency\u201d\u00a0are\u00a0likely\u00a0to\u00a0belong\u00a0together\u00a0in\u00a0a\u00a0component.\u00a0More\u00a0generally,\ncommon\u00a0prefixes\u00a0or\u00a0suffixes\u00a0for\u00a0some\u00a0subset\u00a0of\u00a0the\u00a0variables\u00a0in\u00a0a\u00a0class\u00a0suggest\u00a0the\nopportunity\u00a0for\u00a0a\u00a0component.\u00a0If\u00a0the\u00a0component\u00a0makes\u00a0sense\u00a0with\u00a0inheritance,\u00a0you\u2019ll\nwww.EBooksWorld.ir\n", "page": 96, "type": "text", "section": "Page 96"}
{"text": "find\u00a0Extract\u00a0Superclass\u00a0(375)\u00a0or\u00a0Replace\u00a0Type\u00a0Code\u00a0with\u00a0Subclasses\u00a0(362)\u00a0(which\nessentially\u00a0is\u00a0extracting\u00a0a\u00a0subclass)\u00a0are\u00a0often\u00a0easier.\nSometimes\u00a0a\u00a0class\u00a0does\u00a0not\u00a0use\u00a0all\u00a0of\u00a0its\u00a0fields\u00a0all\u00a0of\u00a0the\u00a0time.\u00a0If\u00a0so,\u00a0you\u00a0may\u00a0be\u00a0able\u00a0to\ndo\u00a0these\u00a0extractions\u00a0many\u00a0times.\nAs\u00a0with\u00a0a\u00a0class\u00a0with\u00a0too\u00a0many\u00a0instance\u00a0variables,\u00a0a\u00a0class\u00a0with\u00a0too\u00a0much\u00a0code\u00a0is\u00a0a\u00a0prime\nbreeding\u00a0ground\u00a0for\u00a0duplicated\u00a0code,\u00a0chaos,\u00a0and\u00a0death.\u00a0The\u00a0simplest\u00a0solution\u00a0(have\u00a0we\nmentioned\u00a0that\u00a0we\u00a0like\u00a0simple\u00a0solutions?)\u00a0is\u00a0to\u00a0eliminate\u00a0redundancy\u00a0in\u00a0the\u00a0class\u00a0itself.\nIf\u00a0you\u00a0have\u00a0five\u00a0hundred\u00adline\u00a0methods\u00a0with\u00a0lots\u00a0of\u00a0code\u00a0in\u00a0common,\u00a0you\u00a0may\u00a0be\u00a0able\u00a0to\nturn\u00a0them\u00a0into\u00a0five\u00a0ten\u00adline\u00a0methods\u00a0with\u00a0another\u00a0ten\u00a0two\u00adline\u00a0methods\u00a0extracted\u00a0from\nthe\u00a0original.\nThe\u00a0clients\u00a0of\u00a0such\u00a0a\u00a0class\u00a0are\u00a0often\u00a0the\u00a0best\u00a0clue\u00a0for\u00a0splitting\u00a0up\u00a0the\u00a0class.\u00a0Look\u00a0at\nwhether\u00a0clients\u00a0use\u00a0a\u00a0subset\u00a0of\u00a0the\u00a0features\u00a0of\u00a0the\u00a0class.\u00a0Each\u00a0subset\u00a0is\u00a0a\u00a0possible\nseparate\u00a0class.\u00a0Once\u00a0you\u2019ve\u00a0identified\u00a0a\u00a0useful\u00a0subset,\u00a0use\u00a0Extract\u00a0Class\u00a0(182),\u00a0Extract\nSuperclass\u00a0(375),\u00a0or\u00a0Replace\u00a0Type\u00a0Code\u00a0with\u00a0Subclasses\u00a0(362)\u00a0to\u00a0break\u00a0it\u00a0out.\nALTERNATIVE CLASSES WITH DIFFERENT INTERFACES\nOne\u00a0of\u00a0the\u00a0great\u00a0benefits\u00a0of\u00a0using\u00a0classes\u00a0is\u00a0the\u00a0support\u00a0for\u00a0substitution,\u00a0allowing\u00a0one\nclass\u00a0to\u00a0swap\u00a0in\u00a0for\u00a0another\u00a0in\u00a0times\u00a0of\u00a0need.\u00a0But\u00a0this\u00a0only\u00a0works\u00a0if\u00a0their\u00a0interfaces\u00a0are\nthe\u00a0same.\u00a0Use\u00a0Change\u00a0Function\u00a0Declaration\u00a0(124)\u00a0to\u00a0make\u00a0functions\u00a0match\u00a0up.\u00a0Often,\nthis\u00a0doesn\u2019t\u00a0go\u00a0far\u00a0enough\u037e\u00a0keep\u00a0using\u00a0Move\u00a0Function\u00a0(198)\u00a0to\u00a0move\u00a0behavior\u00a0into\nclasses\u00a0until\u00a0the\u00a0protocols\u00a0match.\u00a0If\u00a0this\u00a0leads\u00a0to\u00a0duplication,\u00a0you\u00a0may\u00a0be\u00a0able\u00a0to\u00a0use\nExtract\u00a0Superclass\u00a0(375)\u00a0to\u00a0atone.\nDATA CLASS\nThese\u00a0are\u00a0classes\u00a0that\u00a0have\u00a0fields,\u00a0getting\u00a0and\u00a0setting\u00a0methods\u00a0for\u00a0the\u00a0fields,\u00a0and\nnothing\u00a0else.\u00a0Such\u00a0classes\u00a0are\u00a0dumb\u00a0data\u00a0holders\u00a0and\u00a0are\u00a0often\u00a0being\u00a0manipulated\u00a0in\nfar\u00a0too\u00a0much\u00a0detail\u00a0by\u00a0other\u00a0classes.\u00a0In\u00a0some\u00a0stages,\u00a0these\u00a0classes\u00a0may\u00a0have\u00a0public\nfields.\u00a0If\u00a0so,\u00a0you\u00a0should\u00a0immediately\u00a0apply\u00a0Encapsulate\u00a0Record\u00a0(162)\u00a0before\u00a0anyone\nnotices.\u00a0Use\u00a0Remove\u00a0Setting\u00a0Method\u00a0(331)\u00a0on\u00a0any\u00a0field\u00a0that\u00a0should\u00a0not\u00a0be\u00a0changed.\nLook\u00a0for\u00a0where\u00a0these\u00a0getting\u00a0and\u00a0setting\u00a0methods\u00a0are\u00a0used\u00a0by\u00a0other\u00a0classes.\u00a0Try\u00a0to\u00a0use\nMove\u00a0Function\u00a0(198)\u00a0to\u00a0move\u00a0behavior\u00a0into\u00a0the\u00a0data\u00a0class.\u00a0If\u00a0you\u00a0can\u2019t\u00a0move\u00a0a\u00a0whole\nfunction,\u00a0use\u00a0Extract\u00a0Function\u00a0(106)\u00a0to\u00a0create\u00a0a\u00a0function\u00a0that\u00a0can\u00a0be\u00a0moved.\nData\u00a0classes\u00a0are\u00a0often\u00a0a\u00a0sign\u00a0of\u00a0behavior\u00a0in\u00a0the\u00a0wrong\u00a0place,\u00a0which\u00a0means\u00a0you\u00a0can\u00a0make\nbig\u00a0progress\u00a0by\u00a0moving\u00a0it\u00a0from\u00a0the\u00a0client\u00a0into\u00a0the\u00a0data\u00a0class\u00a0itself.\u00a0But\u00a0there\u00a0are\nwww.EBooksWorld.ir\n", "page": 97, "type": "text", "section": "Page 97"}
{"text": "exceptions,\u00a0and\u00a0one\u00a0of\u00a0the\u00a0best\u00a0exceptions\u00a0is\u00a0a\u00a0record\u00a0that\u2019s\u00a0being\u00a0used\u00a0as\u00a0a\u00a0result\nrecord\u00a0from\u00a0a\u00a0distinct\u00a0function\u00a0invocation.\u00a0A\u00a0good\u00a0example\u00a0of\u00a0this\u00a0is\u00a0the\u00a0intermediate\ndata\u00a0structure\u00a0after\u00a0you\u2019ve\u00a0applied\u00a0Split\u00a0Phase\u00a0(154).\u00a0A\u00a0key\u00a0characteristic\u00a0of\u00a0such\u00a0a\nresult\u00a0record\u00a0is\u00a0that\u00a0it\u2019s\u00a0immutable\u00a0(at\u00a0least\u00a0in\u00a0practice).\u00a0Immutable\u00a0fields\u00a0don\u2019t\u00a0need\u00a0to\nbe\u00a0encapsulated\u00a0and\u00a0information\u00a0derived\u00a0from\u00a0immutable\u00a0data\u00a0can\u00a0be\u00a0represented\u00a0as\nfields\u00a0rather\u00a0than\u00a0getting\u00a0methods.\nREFUSED BEQUEST\nSubclasses\u00a0get\u00a0to\u00a0inherit\u00a0the\u00a0methods\u00a0and\u00a0data\u00a0of\u00a0their\u00a0parents.\u00a0But\u00a0what\u00a0if\u00a0they\u00a0don\u2019t\nwant\u00a0or\u00a0need\u00a0what\u00a0they\u00a0are\u00a0given?\u00a0They\u00a0are\u00a0given\u00a0all\u00a0these\u00a0great\u00a0gifts\u00a0and\u00a0pick\u00a0just\u00a0a\u00a0few\nto\u00a0play\u00a0with.\nThe\u00a0traditional\u00a0story\u00a0is\u00a0that\u00a0this\u00a0means\u00a0the\u00a0hierarchy\u00a0is\u00a0wrong.\u00a0You\u00a0need\u00a0to\u00a0create\u00a0a\u00a0new\nsibling\u00a0class\u00a0and\u00a0use\u00a0Push\u00a0Down\u00a0Method\u00a0(359)\u00a0and\u00a0Push\u00a0Down\u00a0Field\u00a0(361)\u00a0to\u00a0push\u00a0all\nthe\u00a0unused\u00a0code\u00a0to\u00a0the\u00a0sibling.\u00a0That\u00a0way\u00a0the\u00a0parent\u00a0holds\u00a0only\u00a0what\u00a0is\u00a0common.\u00a0Often,\nyou\u2019ll\u00a0hear\u00a0advice\u00a0that\u00a0all\u00a0superclasses\u00a0should\u00a0be\u00a0abstract.\nYou\u2019ll\u00a0guess\u00a0from\u00a0our\u00a0snide\u00a0use\u00a0of\u00a0\u201ctraditional\u201d\u00a0that\u00a0we\u00a0aren\u2019t\u00a0going\u00a0to\u00a0advise\u00a0this\u2014at\nleast\u00a0not\u00a0all\u00a0the\u00a0time.\u00a0We\u00a0do\u00a0subclassing\u00a0to\u00a0reuse\u00a0a\u00a0bit\u00a0of\u00a0behavior\u00a0all\u00a0the\u00a0time,\u00a0and\u00a0we\nfind\u00a0it\u00a0a\u00a0perfectly\u00a0good\u00a0way\u00a0of\u00a0doing\u00a0business.\u00a0There\u00a0is\u00a0a\u00a0smell\u2014we\u00a0can\u2019t\u00a0deny\u00a0it\u2014but\nusually\u00a0it\u00a0isn\u2019t\u00a0a\u00a0strong\u00a0smell.\u00a0So,\u00a0we\u00a0say\u00a0that\u00a0if\u00a0the\u00a0refused\u00a0bequest\u00a0is\u00a0causing\u00a0confusion\nand\u00a0problems,\u00a0follow\u00a0the\u00a0traditional\u00a0advice.\u00a0However,\u00a0don\u2019t\u00a0feel\u00a0you\u00a0have\u00a0to\u00a0do\u00a0it\u00a0all\u00a0the\ntime.\u00a0Nine\u00a0times\u00a0out\u00a0of\u00a0ten\u00a0this\u00a0smell\u00a0is\u00a0too\u00a0faint\u00a0to\u00a0be\u00a0worth\u00a0cleaning.\nThe\u00a0smell\u00a0of\u00a0refused\u00a0bequest\u00a0is\u00a0much\u00a0stronger\u00a0if\u00a0the\u00a0subclass\u00a0is\u00a0reusing\u00a0behavior\u00a0but\ndoes\u00a0not\u00a0want\u00a0to\u00a0support\u00a0the\u00a0interface\u00a0of\u00a0the\u00a0superclass.\u00a0We\u00a0don\u2019t\u00a0mind\u00a0refusing\nimplementations\u2014but\u00a0refusing\u00a0interface\u00a0gets\u00a0us\u00a0on\u00a0our\u00a0high\u00a0horses.\u00a0In\u00a0this\u00a0case,\nhowever,\u00a0don\u2019t\u00a0fiddle\u00a0with\u00a0the\u00a0hierarchy\u037e\u00a0you\u00a0want\u00a0to\u00a0gut\u00a0it\u00a0by\u00a0applying\u00a0Replace\nSubclass\u00a0with\u00a0Delegate\u00a0(381)\u00a0or\u00a0Replace\u00a0Superclass\u00a0with\u00a0Delegate\u00a0(399).\nCOMMENTS\nDon\u2019t\u00a0worry,\u00a0we\u00a0aren\u2019t\u00a0saying\u00a0that\u00a0people\u00a0shouldn\u2019t\u00a0write\u00a0comments.\u00a0In\u00a0our\u00a0olfac\u00adtory\nanalogy,\u00a0comments\u00a0aren\u2019t\u00a0a\u00a0bad\u00a0smell\u037e\u00a0indeed\u00a0they\u00a0are\u00a0a\u00a0sweet\u00a0smell.\u00a0The\u00a0reason\u00a0we\nmention\u00a0comments\u00a0here\u00a0is\u00a0that\u00a0comments\u00a0are\u00a0often\u00a0used\u00a0as\u00a0a\u00a0deodorant.\u00a0It\u2019s\u00a0surprising\nhow\u00a0often\u00a0you\u00a0look\u00a0at\u00a0thickly\u00a0commented\u00a0code\u00a0and\u00a0notice\u00a0that\u00a0the\u00a0comments\u00a0are\u00a0there\nbecause\u00a0the\u00a0code\u00a0is\u00a0bad.\nComments\u00a0lead\u00a0us\u00a0to\u00a0bad\u00a0code\u00a0that\u00a0has\u00a0all\u00a0the\u00a0rotten\u00a0whiffs\u00a0we\u2019ve\u00a0discussed\u00a0in\u00a0the\u00a0rest\nof\u00a0this\u00a0chapter.\u00a0Our\u00a0first\u00a0action\u00a0is\u00a0to\u00a0remove\u00a0the\u00a0bad\u00a0smells\u00a0by\u00a0refactoring.\u00a0When\u00a0we\u2019re\nwww.EBooksWorld.ir\n", "page": 98, "type": "text", "section": "Page 98"}
{"text": "finished,\u00a0we\u00a0often\u00a0find\u00a0that\u00a0the\u00a0comments\u00a0are\u00a0superfluous.\nIf\u00a0you\u00a0need\u00a0a\u00a0comment\u00a0to\u00a0explain\u00a0what\u00a0a\u00a0block\u00a0of\u00a0code\u00a0does,\u00a0try\u00a0Extract\u00a0Function\u00a0(106).\nIf\u00a0the\u00a0method\u00a0is\u00a0already\u00a0extracted\u00a0but\u00a0you\u00a0still\u00a0need\u00a0a\u00a0comment\u00a0to\u00a0explain\u00a0what\u00a0it\u00a0does,\nuse\u00a0Change\u00a0Function\u00a0Declaration\u00a0(124)\u00a0to\u00a0rename\u00a0it.\u00a0If\u00a0you\u00a0need\u00a0to\u00a0state\u00a0some\u00a0rules\nabout\u00a0the\u00a0required\u00a0state\u00a0of\u00a0the\u00a0system,\u00a0use\u00a0Introduce\u00a0Assertion\u00a0(302).\n\u00a0When\u00a0you\u00a0feel\u00a0the\u00a0need\u00a0to\u00a0write\u00a0a\u00a0comment,\u00a0first\u00a0try\u00a0to\u00a0refactor\u00a0the\u00a0code\u00a0so\nthat\u00a0any\u00a0comment\u00a0becomes\u00a0superfluous.\nA\u00a0good\u00a0time\u00a0to\u00a0use\u00a0a\u00a0comment\u00a0is\u00a0when\u00a0you\u00a0don\u2019t\u00a0know\u00a0what\u00a0to\u00a0do.\u00a0In\u00a0addition\u00a0to\ndescribing\u00a0what\u00a0is\u00a0going\u00a0on,\u00a0comments\u00a0can\u00a0indicate\u00a0areas\u00a0in\u00a0which\u00a0you\u00a0aren\u2019t\u00a0sure.\u00a0A\ncomment\u00a0can\u00a0also\u00a0explain\u00a0why\u00a0you\u00a0did\u00a0something.\u00a0This\u00a0kind\u00a0of\u00a0information\u00a0helps\nfuture\u00a0modifiers,\u00a0especially\u00a0forgetful\u00a0ones.\nwww.EBooksWorld.ir\n", "page": 99, "type": "text", "section": "Page 99"}
{"text": "Chapter 4\nBuilding Tests\nRefactoring\u00a0is\u00a0a\u00a0valuable\u00a0tool,\u00a0but\u00a0it\u00a0can\u2019t\u00a0come\u00a0alone.\u00a0To\u00a0do\u00a0refactoring\u00a0properly,\u00a0I\u00a0need\na\u00a0solid\u00a0suite\u00a0of\u00a0tests\u00a0to\u00a0spot\u00a0my\u00a0inevitable\u00a0mistakes.\u00a0Even\u00a0with\u00a0automated\u00a0refactoring\ntools,\u00a0many\u00a0of\u00a0my\u00a0refactorings\u00a0will\u00a0still\u00a0need\u00a0checking\u00a0via\u00a0a\u00a0test\u00a0suite.\nI\u00a0don\u2019t\u00a0find\u00a0this\u00a0to\u00a0be\u00a0a\u00a0disadvantage.\u00a0Even\u00a0without\u00a0refactoring,\u00a0writing\u00a0good\u00a0tests\nincreases\u00a0my\u00a0effectiveness\u00a0as\u00a0a\u00a0programmer.\u00a0This\u00a0was\u00a0a\u00a0surprise\u00a0for\u00a0me\u00a0and\u00a0is\ncounterintuitive\u00a0for\u00a0most\u00a0programmers\u2014so\u00a0it\u2019s\u00a0worth\u00a0explaining\u00a0why.\nTHE VALUE OF SELF-TESTING CODE\nIf\u00a0you\u00a0look\u00a0at\u00a0how\u00a0most\u00a0programmers\u00a0spend\u00a0their\u00a0time,\u00a0you\u2019ll\u00a0find\u00a0that\u00a0writing\u00a0code\u00a0is\nactually\u00a0quite\u00a0a\u00a0small\u00a0fraction.\u00a0Some\u00a0time\u00a0is\u00a0spent\u00a0figuring\u00a0out\u00a0what\u00a0ought\u00a0to\u00a0be\u00a0going\non,\u00a0some\u00a0time\u00a0is\u00a0spent\u00a0designing,\u00a0but\u00a0most\u00a0time\u00a0is\u00a0spent\u00a0debugging.\u00a0I\u2019m\u00a0sure\u00a0every\nreader\u00a0can\u00a0remember\u00a0long\u00a0hours\u00a0of\u00a0debugging\u2014often,\u00a0well\u00a0into\u00a0the\u00a0night.\u00a0Every\nprogrammer\u00a0can\u00a0tell\u00a0a\u00a0story\u00a0of\u00a0a\u00a0bug\u00a0that\u00a0took\u00a0a\u00a0whole\u00a0day\u00a0(or\u00a0more)\u00a0to\u00a0find.\u00a0Fixing\u00a0the\nbug\u00a0is\u00a0usually\u00a0pretty\u00a0quick,\u00a0but\u00a0finding\u00a0it\u00a0is\u00a0a\u00a0nightmare.\u00a0And\u00a0then,\u00a0when\u00a0you\u00a0do\u00a0fix\u00a0a\nbug,\u00a0there\u2019s\u00a0always\u00a0a\u00a0chance\u00a0that\u00a0another\u00a0one\u00a0will\u00a0appear\u00a0and\u00a0that\u00a0you\u00a0might\u00a0not\u00a0even\nnotice\u00a0it\u00a0till\u00a0much\u00a0later.\u00a0And\u00a0you\u2019ll\u00a0spend\u00a0ages\u00a0finding\u00a0that\u00a0bug.\nThe\u00a0event\u00a0that\u00a0started\u00a0me\u00a0on\u00a0the\u00a0road\u00a0to\u00a0self\u00adtesting\u00a0code\u00a0was\u00a0a\u00a0talk\u00a0at\u00a0OOPSLA\u00a0in\n1992.\u00a0Someone\u00a0(I\u00a0think\u00a0it\u00a0was\u00a0\u201cBedarra\u201d\u00a0Dave\u00a0Thomas)\u00a0said\u00a0offhandedly,\u00a0\u201cClasses\nshould\u00a0contain\u00a0their\u00a0own\u00a0tests.\u201d\u00a0So\u00a0I\u00a0decided\u00a0to\u00a0incorporate\u00a0tests\u00a0into\u00a0the\u00a0code\u00a0base\ntogether\u00a0with\u00a0the\u00a0production\u00a0code.\u00a0As\u00a0I\u00a0was\u00a0also\u00a0doing\u00a0iterative\u00a0development,\u00a0I\u00a0tried\nadding\u00a0tests\u00a0as\u00a0I\u00a0completed\u00a0each\u00a0iteration.\u00a0The\u00a0project\u00a0on\u00a0which\u00a0I\u00a0was\u00a0working\u00a0at\u00a0that\ntime\u00a0was\u00a0quite\u00a0small,\u00a0so\u00a0we\u00a0put\u00a0out\u00a0iterations\u00a0every\u00a0week\u00a0or\u00a0so.\u00a0Running\u00a0the\u00a0tests\nbecame\u00a0fairly\u00a0straightforward\u2014but\u00a0although\u00a0it\u00a0was\u00a0easy,\u00a0it\u00a0was\u00a0still\u00a0pretty\u00a0boring.\u00a0This\nwas\u00a0because\u00a0every\u00a0test\u00a0produced\u00a0output\u00a0to\u00a0the\u00a0console\u00a0that\u00a0I\u00a0had\u00a0to\u00a0check.\u00a0Now\u00a0I\u2019m\u00a0a\npretty\u00a0lazy\u00a0person\u00a0and\u00a0am\u00a0prepared\u00a0to\u00a0work\u00a0quite\u00a0hard\u00a0in\u00a0order\u00a0to\u00a0avoid\u00a0work.\u00a0I\nrealized\u00a0that,\u00a0instead\u00a0of\u00a0looking\u00a0at\u00a0the\u00a0screen\u00a0to\u00a0see\u00a0if\u00a0it\u00a0printed\u00a0out\u00a0some\u00a0information\nfrom\u00a0the\u00a0model,\u00a0I\u00a0could\u00a0get\u00a0the\u00a0computer\u00a0to\u00a0make\u00a0that\u00a0test.\u00a0All\u00a0I\u00a0had\u00a0to\u00a0do\u00a0was\u00a0put\u00a0the\nHistory\nTopics\nTutorials\nOffers & Deals\nHighlights\nSettings\nSupport\nSign Out\n \n  \n \n  \n \n \n \n \n \n \nwww.EBooksWorld.ir\n", "page": 100, "type": "text", "section": "Page 100"}
{"text": "output\u00a0I\u00a0expected\u00a0in\u00a0the\u00a0test\u00a0code\u00a0and\u00a0do\u00a0a\u00a0comparison.\u00a0Now\u00a0I\u00a0could\u00a0run\u00a0the\u00a0tests\u00a0and\nthey\u00a0would\u00a0just\u00a0print\u00a0\u201cOK\u201d\u00a0to\u00a0the\u00a0screen\u00a0if\u00a0all\u00a0was\u00a0well.\u00a0The\u00a0software\u00a0was\u00a0now\u00a0self\u00ad\ntesting.\n\u00a0Make\u00a0sure\u00a0all\u00a0tests\u00a0are\u00a0fully\u00a0automatic\u00a0and\u00a0that\u00a0they\u00a0check\u00a0their\u00a0own\u00a0results.\nNow\u00a0it\u00a0was\u00a0easy\u00a0to\u00a0run\u00a0tests\u2014as\u00a0easy\u00a0as\u00a0compiling.\u00a0So\u00a0I\u00a0started\u00a0to\u00a0run\u00a0tests\u00a0every\u00a0time\u00a0I\ncompiled.\u00a0Soon,\u00a0I\u00a0began\u00a0to\u00a0notice\u00a0my\u00a0productivity\u00a0had\u00a0shot\u00a0upward.\u00a0I\u00a0realized\u00a0that\u00a0I\nwasn\u2019t\u00a0spending\u00a0so\u00a0much\u00a0time\u00a0debugging.\u00a0If\u00a0I\u00a0added\u00a0a\u00a0bug\u00a0that\u00a0was\u00a0caught\u00a0by\u00a0a\nprevious\u00a0test,\u00a0it\u00a0would\u00a0show\u00a0up\u00a0as\u00a0soon\u00a0as\u00a0I\u00a0ran\u00a0that\u00a0test.\u00a0The\u00a0test\u00a0had\u00a0worked\u00a0before,\u00a0so\nI\u00a0would\u00a0know\u00a0that\u00a0the\u00a0bug\u00a0was\u00a0in\u00a0the\u00a0work\u00a0I\u00a0had\u00a0done\u00a0since\u00a0I\u00a0last\u00a0tested.\u00a0And\u00a0I\u00a0ran\u00a0the\ntests\u00a0frequently\u2014which\u00a0means\u00a0only\u00a0a\u00a0few\u00a0minutes\u00a0had\u00a0elapsed.\u00a0I\u00a0thus\u00a0knew\u00a0that\u00a0the\nsource\u00a0of\u00a0the\u00a0bug\u00a0was\u00a0the\u00a0code\u00a0I\u00a0had\u00a0just\u00a0written.\u00a0As\u00a0it\u00a0was\u00a0a\u00a0small\u00a0amount\u00a0of\u00a0code\u00a0that\nwas\u00a0still\u00a0fresh\u00a0in\u00a0my\u00a0mind,\u00a0the\u00a0bug\u00a0was\u00a0easy\u00a0to\u00a0find.\u00a0Bugs\u00a0that\u00a0would\u00a0have\u00a0otherwise\ntaken\u00a0an\u00a0hour\u00a0or\u00a0more\u00a0to\u00a0find\u00a0now\u00a0took\u00a0a\u00a0couple\u00a0of\u00a0minutes\u00a0at\u00a0most.\u00a0Not\u00a0only\u00a0was\u00a0my\nsoftware\u00a0self\u00adtesting,\u00a0but\u00a0by\u00a0running\u00a0the\u00a0tests\u00a0frequently\u00a0I\u00a0had\u00a0a\u00a0powerful\u00a0bug\u00a0detector.\nAs\u00a0I\u00a0noticed\u00a0this,\u00a0I\u00a0became\u00a0more\u00a0aggressive\u00a0about\u00a0doing\u00a0the\u00a0tests.\u00a0Instead\u00a0of\u00a0waiting\u00a0for\nthe\u00a0end\u00a0of\u00a0an\u00a0increment,\u00a0I\u00a0would\u00a0add\u00a0the\u00a0tests\u00a0immediately\u00a0after\u00a0writing\u00a0a\u00a0bit\u00a0of\nfunction.\u00a0Every\u00a0day\u00a0I\u00a0would\u00a0add\u00a0a\u00a0couple\u00a0of\u00a0new\u00a0features\u00a0and\u00a0the\u00a0tests\u00a0to\u00a0test\u00a0them.\u00a0I\nhardly\u00a0ever\u00a0spent\u00a0more\u00a0than\u00a0a\u00a0few\u00a0minutes\u00a0hunting\u00a0for\u00a0a\u00a0regression\u00a0bug.\n\u00a0A\u00a0suite\u00a0of\u00a0tests\u00a0is\u00a0a\u00a0powerful\u00a0bug\u00a0detector\u00a0that\u00a0decapitates\u00a0the\u00a0time\u00a0it\u00a0takes\u00a0to\nfind\u00a0bugs.\nTools\u00a0for\u00a0writing\u00a0and\u00a0organizing\u00a0these\u00a0tests\u00a0have\u00a0developed\u00a0a\u00a0great\u00a0deal\u00a0since\u00a0my\nexperiments.\u00a0While\u00a0flying\u00a0from\u00a0Switzerland\u00a0to\u00a0Atlanta\u00a0for\u00a0OOPSLA\u00a01997,\u00a0Kent\u00a0Beck\npaired\u00a0with\u00a0Erich\u00a0Gamma\u00a0to\u00a0port\u00a0his\u00a0unit\u00a0testing\u00a0framework\u00a0from\u00a0Smalltalk\u00a0to\u00a0Java.\nThe\u00a0resulting\u00a0framework,\u00a0called\u00a0JUnit,\u00a0has\u00a0been\u00a0enormously\u00a0influential\u00a0for\u00a0program\ntesting,\u00a0inspiring\u00a0a\u00a0huge\u00a0variety\u00a0of\u00a0similar\u00a0tools\u00a0[mf\u00adxunit]\u00a0in\u00a0lots\u00a0of\u00a0different\u00a0languages.\nAdmittedly,\u00a0it\u00a0is\u00a0not\u00a0so\u00a0easy\u00a0to\u00a0persuade\u00a0others\u00a0to\u00a0follow\u00a0this\u00a0route.\u00a0Writing\u00a0the\u00a0tests\nmeans\u00a0a\u00a0lot\u00a0of\u00a0extra\u00a0code\u00a0to\u00a0write.\u00a0Unless\u00a0you\u00a0have\u00a0actually\u00a0experienced\u00a0how\u00a0it\u00a0speeds\nprogramming,\u00a0self\u00adtesting\u00a0does\u00a0not\u00a0seem\u00a0to\u00a0make\u00a0sense.\u00a0This\u00a0is\u00a0not\u00a0helped\u00a0by\u00a0the\u00a0fact\nthat\u00a0many\u00a0people\u00a0have\u00a0never\u00a0learned\u00a0to\u00a0write\u00a0tests\u00a0or\u00a0even\u00a0to\u00a0think\u00a0about\u00a0tests.\u00a0When\ntests\u00a0are\u00a0manual,\u00a0they\u00a0are\u00a0gut\u00adwrenchingly\u00a0boring.\u00a0But\u00a0when\u00a0they\u00a0are\u00a0automatic,\u00a0tests\ncan\u00a0actually\u00a0be\u00a0quite\u00a0fun\u00a0to\u00a0write.\nwww.EBooksWorld.ir\n", "page": 101, "type": "text", "section": "Page 101"}
{"text": "In\u00a0fact,\u00a0one\u00a0of\u00a0the\u00a0most\u00a0useful\u00a0times\u00a0to\u00a0write\u00a0tests\u00a0is\u00a0before\u00a0I\u00a0start\u00a0programming.\u00a0When\nI\u00a0need\u00a0to\u00a0add\u00a0a\u00a0feature,\u00a0I\u00a0begin\u00a0by\u00a0writing\u00a0the\u00a0test.\u00a0This\u00a0isn\u2019t\u00a0as\u00a0backward\u00a0as\u00a0it\u00a0sounds.\nBy\u00a0writing\u00a0the\u00a0test,\u00a0I\u2019m\u00a0asking\u00a0myself\u00a0what\u00a0needs\u00a0to\u00a0be\u00a0done\u00a0to\u00a0add\u00a0the\u00a0function.\nWriting\u00a0the\u00a0test\u00a0also\u00a0concentrates\u00a0me\u00a0on\u00a0the\u00a0interface\u00a0rather\u00a0than\u00a0the\u00a0implementation\n(always\u00a0a\u00a0good\u00a0thing).\u00a0It\u00a0also\u00a0means\u00a0I\u00a0have\u00a0a\u00a0clear\u00a0point\u00a0at\u00a0which\u00a0I\u2019m\u00a0done\u00a0coding\u2014\nwhen\u00a0the\u00a0test\u00a0works.\nKent\u00a0Beck\u00a0baked\u00a0this\u00a0habit\u00a0of\u00a0writing\u00a0the\u00a0test\u00a0first\u00a0into\u00a0a\u00a0technique\u00a0called\u00a0Test\u00adDriven\nDevelopment\u00a0(TDD)\u00a0[mf\u00adtdd].\u00a0The\u00a0Test\u00adDriven\u00a0Development\u00a0approach\u00a0to\nprogramming\u00a0relies\u00a0on\u00a0short\u00a0cycles\u00a0of\u00a0writing\u00a0a\u00a0(failing)\u00a0test,\u00a0writing\u00a0the\u00a0code\u00a0to\u00a0make\nthat\u00a0test\u00a0work,\u00a0and\u00a0refactoring\u00a0to\u00a0ensure\u00a0the\u00a0result\u00a0is\u00a0as\u00a0clean\u00a0as\u00a0possible.\u00a0This\u00a0test\u00ad\ncode\u00adrefactor\u00a0cycle\u00a0should\u00a0occur\u00a0many\u00a0times\u00a0per\u00a0hour,\u00a0and\u00a0can\u00a0be\u00a0a\u00a0very\u00a0productive\u00a0and\ncalming\u00a0way\u00a0to\u00a0write\u00a0code.\u00a0I\u2019m\u00a0not\u00a0going\u00a0to\u00a0discuss\u00a0it\u00a0further\u00a0here,\u00a0but\u00a0I\u00a0do\u00a0use\u00a0and\nwarmly\u00a0recommend\u00a0it.\nThat\u2019s\u00a0enough\u00a0of\u00a0the\u00a0polemic.\u00a0Although\u00a0I\u00a0believe\u00a0everyone\u00a0would\u00a0benefit\u00a0by\u00a0writing\u00a0self\u00ad\ntesting\u00a0code,\u00a0it\u00a0is\u00a0not\u00a0the\u00a0point\u00a0of\u00a0this\u00a0book.\u00a0This\u00a0book\u00a0is\u00a0about\u00a0refactoring.\u00a0Refactoring\nrequires\u00a0tests.\u00a0If\u00a0you\u00a0want\u00a0to\u00a0refactor,\u00a0you\u00a0have\u00a0to\u00a0write\u00a0tests.\u00a0This\u00a0chapter\u00a0gives\u00a0you\u00a0a\nstart\u00a0in\u00a0doing\u00a0this\u00a0for\u00a0JavaScript.\u00a0This\u00a0is\u00a0not\u00a0a\u00a0testing\u00a0book,\u00a0so\u00a0I\u2019m\u00a0not\u00a0going\u00a0to\u00a0go\u00a0into\nmuch\u00a0detail.\u00a0I\u2019ve\u00a0found,\u00a0however,\u00a0that\u00a0with\u00a0testing\u00a0a\u00a0remarkably\u00a0small\u00a0amount\u00a0of\u00a0work\ncan\u00a0have\u00a0surprisingly\u00a0big\u00a0benefits.\nAs\u00a0with\u00a0everything\u00a0else\u00a0in\u00a0this\u00a0book,\u00a0I\u00a0describe\u00a0the\u00a0testing\u00a0approach\u00a0using\u00a0examples.\nWhen\u00a0I\u00a0develop\u00a0code,\u00a0I\u00a0write\u00a0the\u00a0tests\u00a0as\u00a0I\u00a0go.\u00a0But\u00a0sometimes,\u00a0I\u00a0need\u00a0to\u00a0refactor\u00a0some\ncode\u00a0without\u00a0tests\u2014then\u00a0I\u00a0have\u00a0to\u00a0make\u00a0the\u00a0code\u00a0self\u00adtesting\u00a0before\u00a0I\u00a0begin.\nSAMPLE CODE TO TEST\nHere\u2019s\u00a0some\u00a0code\u00a0to\u00a0look\u00a0at\u00a0and\u00a0test.\u00a0The\u00a0code\u00a0supports\u00a0a\u00a0simple\u00a0application\u00a0that\u00a0allows\na\u00a0user\u00a0to\u00a0examine\u00a0and\u00a0manipulate\u00a0a\u00a0production\u00a0plan.\u00a0The\u00a0(crude)\u00a0UI\u00a0looks\u00a0like\u00a0this:\nwww.EBooksWorld.ir\n", "page": 102, "type": "text", "section": "Page 102"}
{"text": "The\u00a0production\u00a0plan\u00a0has\u00a0a\u00a0demand\u00a0and\u00a0price\u00a0for\u00a0each\u00a0province.\u00a0Each\u00a0province\u00a0has\nproducers,\u00a0each\u00a0of\u00a0which\u00a0can\u00a0produce\u00a0a\u00a0certain\u00a0number\u00a0of\u00a0units\u00a0at\u00a0a\u00a0particular\u00a0price.\nThe\u00a0UI\u00a0also\u00a0shows\u00a0how\u00a0much\u00a0revenue\u00a0each\u00a0producer\u00a0would\u00a0earn\u00a0if\u00a0they\u00a0sell\u00a0all\u00a0their\nproduction.\u00a0At\u00a0the\u00a0bottom,\u00a0the\u00a0screen\u00a0shows\u00a0the\u00a0shortfall\u00a0in\u00a0production\u00a0(the\u00a0demand\nminus\u00a0the\u00a0total\u00a0production)\u00a0and\u00a0the\u00a0profit\u00a0for\u00a0this\u00a0plan.\u00a0The\u00a0UI\u00a0allows\u00a0the\u00a0user\u00a0to\nmanipulate\u00a0the\u00a0demand,\u00a0price,\u00a0and\u00a0the\u00a0individual\u00a0producer\u2019s\u00a0production\u00a0and\u00a0costs\u00a0to\nsee\u00a0the\u00a0effect\u00a0on\u00a0the\u00a0production\u00a0shortfall\u00a0and\u00a0profits.\u00a0Whenever\u00a0a\u00a0user\u00a0changes\u00a0any\nnumber\u00a0in\u00a0the\u00a0display,\u00a0all\u00a0the\u00a0others\u00a0update\u00a0immediately.\nI\u2019m\u00a0showing\u00a0a\u00a0user\u00a0interface\u00a0here,\u00a0so\u00a0you\u00a0can\u00a0sense\u00a0how\u00a0the\u00a0software\u00a0is\u00a0used,\u00a0but\u00a0I\u2019m\nonly\u00a0going\u00a0to\u00a0concentrate\u00a0on\u00a0the\u00a0business\u00a0logic\u00a0part\u00a0of\u00a0the\u00a0software\u2014that\u00a0is,\u00a0the\u00a0classes\nthat\u00a0calculate\u00a0the\u00a0profit\u00a0and\u00a0the\u00a0shortfall,\u00a0not\u00a0the\u00a0code\u00a0that\u00a0generates\u00a0the\u00a0HTML\u00a0and\nhooks\u00a0up\u00a0the\u00a0field\u00a0changes\u00a0to\u00a0the\u00a0underlying\u00a0business\u00a0logic.\u00a0This\u00a0chapter\u00a0is\u00a0just\u00a0an\nintroduction\u00a0to\u00a0the\u00a0world\u00a0of\u00a0self\u00adtesting\u00a0code,\u00a0so\u00a0it\u00a0makes\u00a0sense\u00a0for\u00a0me\u00a0to\u00a0start\u00a0with\u00a0the\neasiest\u00a0case\u2014which\u00a0is\u00a0code\u00a0that\u00a0doesn\u2019t\u00a0involve\u00a0user\u00a0interface,\u00a0persistence,\u00a0or\u00a0external\nservice\u00a0interaction.\u00a0Such\u00a0separation,\u00a0however,\u00a0is\u00a0a\u00a0good\u00a0idea\u00a0in\u00a0any\u00a0case:\u00a0Once\u00a0this\u00a0kind\nof\u00a0business\u00a0logic\u00a0gets\u00a0at\u00a0all\u00a0complicated,\u00a0I\u00a0will\u00a0separate\u00a0it\u00a0from\u00a0the\u00a0UI\u00a0mechanics\u00a0so\u00a0I\ncan\u00a0more\u00a0easily\u00a0reason\u00a0about\u00a0it\u00a0and\u00a0test\u00a0it.\nThis\u00a0business\u00a0logic\u00a0code\u00a0involves\u00a0two\u00a0classes:\u00a0one\u00a0that\u00a0represents\u00a0a\u00a0single\u00a0producer,\u00a0and\nthe\u00a0other\u00a0that\u00a0represents\u00a0a\u00a0whole\u00a0province.\u00a0The\u00a0province\u2019s\u00a0constructor\u00a0takes\u00a0a\nJavaScript\u00a0object\u2014one\u00a0we\u00a0could\u00a0imagine\u00a0being\u00a0supplied\u00a0by\u00a0a\u00a0JSON\u00a0document.\nHere\u2019s\u00a0the\u00a0code\u00a0that\u00a0loads\u00a0the\u00a0province\u00a0from\u00a0the\u00a0JSON\u00a0data:\nclass\u00a0Province\u2026\nwww.EBooksWorld.ir\n", "page": 103, "type": "text", "section": "Page 103"}
{"text": "Click\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nconstructor(doc)\u00a0{\n\u00a0\u00a0this._name\u00a0=\u00a0doc.name\u037e\n\u00a0\u00a0this._producers\u00a0=\u00a0[]\u037e\n\u00a0\u00a0this._totalProduction\u00a0=\u00a00\u037e\n\u00a0\u00a0this._demand\u00a0=\u00a0doc.demand\u037e\n\u00a0\u00a0this._price\u00a0=\u00a0doc.price\u037e\n\u00a0\u00a0doc.producers.forEach(d\u00a0=>\u00a0this.addProducer(new\u00a0Producer(this,\u00a0d)))\u037e\n}\naddProducer(arg)\u00a0{\n\u00a0\u00a0this._producers.push(arg)\u037e\n\u00a0\u00a0this._totalProduction\u00a0+=\u00a0arg.production\u037e\n}\nThis\u00a0function\u00a0creates\u00a0suitable\u00a0JSON\u00a0data.\u00a0I\u00a0can\u00a0create\u00a0a\u00a0sample\u00a0province\u00a0for\u00a0testing\u00a0by\nconstructing\u00a0a\u00a0province\u00a0object\u00a0with\u00a0the\u00a0result\u00a0of\u00a0this\u00a0function.\ntop\u00a0level\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0sampleProvinceData()\u00a0{\n\u00a0\u00a0return\u00a0{\n\u00a0\u00a0\u00a0\u00a0name:\u00a0\"Asia\",\n\u00a0\u00a0\u00a0\u00a0producers:\u00a0[\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0{name:\u00a0\"Byzantium\",\u00a0cost:\u00a010,\u00a0production:\u00a09},\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0{name:\u00a0\"Attalia\",\u00a0\u00a0\u00a0cost:\u00a012,\u00a0production:\u00a010},\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0{name:\u00a0\"Sinope\",\u00a0\u00a0\u00a0\u00a0cost:\u00a010,\u00a0production:\u00a06},\n\u00a0\u00a0\u00a0\u00a0],\n\u00a0\u00a0\u00a0\u00a0demand:\u00a030,\n\u00a0\u00a0\u00a0\u00a0price:\u00a020\n\u00a0\u00a0}\u037e\n}\nThe\u00a0province\u00a0class\u00a0has\u00a0accessors\u00a0for\u00a0the\u00a0various\u00a0data\u00a0values:\nclass\u00a0Province\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nget\u00a0name()\u00a0\u00a0\u00a0\u00a0{return\u00a0this._name\u037e}\nget\u00a0producers()\u00a0{return\u00a0this._producers.slice()\u037e}\nget\u00a0totalProduction()\u00a0\u00a0\u00a0\u00a0{return\u00a0this._totalProduction\u037e}\nset\u00a0totalProduction(arg)\u00a0{this._totalProduction\u00a0=\u00a0arg\u037e}\nget\u00a0demand()\u00a0\u00a0\u00a0\u00a0{return\u00a0this._demand\u037e}\nset\u00a0demand(arg)\u00a0{this._demand\u00a0=\u00a0parseInt(arg)\u037e}\nwww.EBooksWorld.ir\n", "page": 104, "type": "text", "section": "Page 104"}
{"text": "get\u00a0price()\u00a0\u00a0\u00a0\u00a0{return\u00a0this._price\u037e}\nset\u00a0price(arg)\u00a0{this._price\u00a0=\u00a0parseInt(arg)\u037e}\nThe\u00a0setters\u00a0will\u00a0be\u00a0called\u00a0with\u00a0strings\u00a0from\u00a0the\u00a0UI\u00a0that\u00a0contain\u00a0the\u00a0numbers,\u00a0so\u00a0I\u00a0need\nto\u00a0parse\u00a0the\u00a0numbers\u00a0to\u00a0use\u00a0them\u00a0reliably\u00a0in\u00a0calculations.\nThe\u00a0producer\u00a0class\u00a0is\u00a0mostly\u00a0a\u00a0simple\u00a0data\u00a0holder:\nclass\u00a0Producer\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nconstructor(aProvince,\u00a0data)\u00a0{\n\u00a0\u00a0this._province\u00a0=\u00a0aProvince\u037e\n\u00a0\u00a0this._cost\u00a0=\u00a0data.cost\u037e\n\u00a0\u00a0this._name\u00a0=\u00a0data.name\u037e\n\u00a0\u00a0this._production\u00a0=\u00a0data.production\u00a0||\u00a00\u037e\n}\nget\u00a0name()\u00a0{return\u00a0this._name\u037e}\nget\u00a0cost()\u00a0\u00a0\u00a0\u00a0{return\u00a0this._cost\u037e}\nset\u00a0cost(arg)\u00a0{this._cost\u00a0=\u00a0parseInt(arg)\u037e}\nget\u00a0production()\u00a0{return\u00a0this._production\u037e}\nset\u00a0production(amountStr)\u00a0{\n\u00a0\u00a0const\u00a0amount\u00a0=\u00a0parseInt(amountStr)\u037e\n\u00a0\u00a0const\u00a0newProduction\u00a0=\u00a0Number.isNaN(amount)\u00a0?\u00a00\u00a0:\u00a0amount\u037e\n\u00a0\u00a0this._province.totalProduction\u00a0+=\u00a0newProduction\u00a0\u00ad\u00a0this._production\u037e\n\u00a0\u00a0this._production\u00a0=\u00a0newProduction\u037e\n}\nThe\u00a0way\u00a0that\u00a0set\u00a0production\u00a0updates\u00a0the\u00a0derived\u00a0data\u00a0in\u00a0the\u00a0province\u00a0is\u00a0ugly,\u00a0and\nwhenever\u00a0I\u00a0see\u00a0that\u00a0I\u00a0want\u00a0to\u00a0refactor\u00a0to\u00a0remove\u00a0it.\u00a0But\u00a0I\u00a0have\u00a0to\u00a0write\u00a0tests\u00a0before\u00a0that\u00a0I\ncan\u00a0refactor\u00a0it.\nThe\u00a0calculation\u00a0for\u00a0the\u00a0shortfall\u00a0is\u00a0simple.\nclass\u00a0Province\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nget\u00a0shortfall()\u00a0{\n\u00a0\u00a0return\u00a0this._demand\u00a0\u00ad\u00a0this.totalProduction\u037e\n}\nThat\u00a0for\u00a0the\u00a0profit\u00a0is\u00a0a\u00a0bit\u00a0more\u00a0involved.\nwww.EBooksWorld.ir\n", "page": 105, "type": "text", "section": "Page 105"}
{"text": "class\u00a0Province\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nget\u00a0profit()\u00a0{\n\u00a0\u00a0return\u00a0this.demandValue\u00a0\u00ad\u00a0this.demandCost\u037e\n}\nget\u00a0demandCost()\u00a0{\n\u00a0\u00a0let\u00a0remainingDemand\u00a0=\u00a0this.demand\u037e\n\u00a0\u00a0let\u00a0result\u00a0=\u00a00\u037e\n\u00a0\u00a0this.producers\n\u00a0\u00a0\u00a0\u00a0.sort((a,b)\u00a0=>\u00a0a.cost\u00a0\u00ad\u00a0b.cost)\n\u00a0\u00a0\u00a0\u00a0.forEach(p\u00a0=>\u00a0{\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0const\u00a0contribution\u00a0=\u00a0Math.min(remainingDemand,\u00a0p.production)\u037e\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0remainingDemand\u00a0\u00ad=\u00a0contribution\u037e\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0result\u00a0+=\u00a0contribution\u00a0*\u00a0p.cost\u037e\n\u00a0\u00a0\u00a0\u00a0})\u037e\n\u00a0\u00a0return\u00a0result\u037e\n}\nget\u00a0demandValue()\u00a0{\n\u00a0\u00a0return\u00a0this.satisfiedDemand\u00a0*\u00a0this.price\u037e\n}\nget\u00a0satisfiedDemand()\u00a0{\n\u00a0\u00a0return\u00a0Math.min(this._demand,\u00a0this.totalProduction)\u037e\n}\nA FIRST TEST\nTo\u00a0test\u00a0this\u00a0code,\u00a0I\u2019ll\u00a0need\u00a0some\u00a0sort\u00a0of\u00a0testing\u00a0framework.\u00a0There\u00a0are\u00a0many\u00a0out\u00a0there,\neven\u00a0just\u00a0for\u00a0JavaScript.\u00a0The\u00a0one\u00a0I\u2019ll\u00a0use\u00a0is\u00a0Mocha\u00a0[mocha],\u00a0which\u00a0is\u00a0reasonably\ncommon\u00a0and\u00a0well\u00adregarded.\u00a0I\u00a0won\u2019t\u00a0go\u00a0into\u00a0a\u00a0full\u00a0explanation\u00a0of\u00a0how\u00a0to\u00a0use\u00a0the\nframework,\u00a0just\u00a0show\u00a0some\u00a0example\u00a0tests\u00a0with\u00a0it.\u00a0You\u00a0should\u00a0be\u00a0able\u00a0to\u00a0adapt,\u00a0easily\nenough,\u00a0a\u00a0different\u00a0framework\u00a0to\u00a0build\u00a0similar\u00a0tests.\nHere\u00a0is\u00a0a\u00a0simple\u00a0test\u00a0for\u00a0the\u00a0shortfall\u00a0calculation:\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\ndescribe('province',\u00a0function()\u00a0{\n\u00a0\u00a0it('shortfall',\u00a0function()\u00a0{\n\u00a0\u00a0\u00a0\u00a0const\u00a0asia\u00a0=\u00a0new\u00a0Province(sampleProvinceData())\u037e\n\u00a0\u00a0\u00a0\u00a0assert.equal(asia.shortfall,\u00a05)\u037e\n\u00a0\u00a0})\u037e\n})\u037e\nThe\u00a0Mocha\u00a0framework\u00a0divides\u00a0up\u00a0the\u00a0test\u00a0code\u00a0into\u00a0blocks,\u00a0each\u00a0grouping\u00a0together\u00a0a\nwww.EBooksWorld.ir\n", "page": 106, "type": "text", "section": "Page 106"}
{"text": "suite\u00a0of\u00a0tests.\u00a0Each\u00a0test\u00a0appears\u00a0in\u00a0an\u00a0it\u00a0block.\u00a0For\u00a0this\u00a0simple\u00a0case,\u00a0the\u00a0test\u00a0has\u00a0two\nsteps.\u00a0The\u00a0first\u00a0step\u00a0sets\u00a0up\u00a0some\u00a0fixture\u2014data\u00a0and\u00a0objects\u00a0that\u00a0are\u00a0needed\u00a0for\u00a0the\u00a0test:\nin\u00a0this\u00a0case,\u00a0a\u00a0loaded\u00a0province\u00a0object.\u00a0The\u00a0second\u00a0line\u00a0verifies\u00a0some\u00a0characteristic\u00a0of\nthat\u00a0fixture\u2014in\u00a0this\u00a0case,\u00a0that\u00a0the\u00a0shortfall\u00a0is\u00a0the\u00a0amount\u00a0that\u00a0should\u00a0be\u00a0expected\u00a0given\nthe\u00a0initial\u00a0data.\nDifferent\u00a0developers\u00a0use\u00a0the\u00a0descriptive\u00a0strings\u00a0in\u00a0the\u00a0describe\u00a0and\u00a0it\u00a0blocks\ndifferently.\u00a0Some\u00a0would\u00a0write\u00a0a\u00a0sentence\u00a0that\u00a0explains\u00a0what\u00a0the\u00a0test\u00a0is\u00a0testing,\u00a0but\nothers\u00a0prefer\u00a0to\u00a0leave\u00a0them\u00a0empty,\u00a0arguing\u00a0that\u00a0the\u00a0descriptive\u00a0sentence\u00a0is\u00a0just\nduplicating\u00a0the\u00a0code\u00a0in\u00a0the\u00a0same\u00a0way\u00a0a\u00a0comment\u00a0does.\u00a0I\u00a0like\u00a0to\u00a0put\u00a0in\u00a0just\u00a0enough\u00a0to\nidentify\u00a0which\u00a0test\u00a0is\u00a0which\u00a0when\u00a0I\u00a0get\u00a0failures.\nIf\u00a0I\u00a0run\u00a0this\u00a0test\u00a0in\u00a0a\u00a0NodeJS\u00a0console,\u00a0the\u00a0output\u00a0looks\u00a0like\u00a0this:\n\u2019\u2019\u2019\u2019\u2019\u2019\u2019\u2019\u2019\u2019\u2019\u2019\u2019\u2019\n\u00a0\u00a01\u00a0passing\u00a0(61ms)\nNote\u00a0the\u00a0simplicity\u00a0of\u00a0the\u00a0feedback\u2014just\u00a0a\u00a0summary\u00a0of\u00a0how\u00a0many\u00a0tests\u00a0are\u00a0run\u00a0and\u00a0how\nmany\u00a0have\u00a0passed.\n\u00a0Always\u00a0make\u00a0sure\u00a0a\u00a0test\u00a0will\u00a0fail\u00a0when\u00a0it\u00a0should.\nWhen\u00a0I\u00a0write\u00a0a\u00a0test\u00a0against\u00a0existing\u00a0code\u00a0like\u00a0this,\u00a0it\u2019s\u00a0nice\u00a0to\u00a0see\u00a0that\u00a0all\u00a0is\u00a0well\u2014but\u00a0I\u2019m\nnaturally\u00a0skeptical.\u00a0Particularly,\u00a0once\u00a0I\u00a0have\u00a0a\u00a0lot\u00a0of\u00a0tests\u00a0running,\u00a0I\u2019m\u00a0always\u00a0nervous\nthat\u00a0a\u00a0test\u00a0isn\u2019t\u00a0really\u00a0exercising\u00a0the\u00a0code\u00a0the\u00a0way\u00a0I\u00a0think\u00a0it\u00a0is,\u00a0and\u00a0thus\u00a0won\u2019t\u00a0catch\u00a0a\nbug\u00a0when\u00a0I\u00a0need\u00a0it\u00a0to.\u00a0So\u00a0I\u00a0like\u00a0to\u00a0see\u00a0every\u00a0test\u00a0fail\u00a0at\u00a0least\u00a0once\u00a0when\u00a0I\u00a0write\u00a0it.\u00a0My\nfavorite\u00a0way\u00a0of\u00a0doing\u00a0that\u00a0is\u00a0to\u00a0temporarily\u00a0inject\u00a0a\u00a0fault\u00a0into\u00a0the\u00a0code,\u00a0for\u00a0example:\nclass\u00a0Province\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nget\u00a0shortfall()\u00a0{\n\u00a0\u00a0return\u00a0this._demand\u00a0\u00ad\u00a0this.totalProduction\u00a0*\u00a02\u037e\n}\nHere\u2019s\u00a0what\u00a0the\u00a0console\u00a0now\u00a0looks\u00a0like:\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nwww.EBooksWorld.ir\n", "page": 107, "type": "text", "section": "Page 107"}
{"text": "!\n\u00a0\u00a00\u00a0passing\u00a0(72ms)\n\u00a0\u00a01\u00a0failing\n\u00a0\u00a01)\u00a0province\u00a0shortfall:\n\u00a0\u00a0\u00a0\u00a0\u00a0AssertionError:\u00a0expected\u00a0\u00ad20\u00a0to\u00a0equal\u00a05\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0at\u00a0Context.<anonymous>\u00a0(src/tester.js:10:12)\nThe\u00a0framework\u00a0indicates\u00a0which\u00a0test\u00a0failed\u00a0and\u00a0gives\u00a0some\u00a0information\u00a0about\u00a0the\u00a0nature\nof\u00a0the\u00a0failure\u2014in\u00a0this\u00a0case,\u00a0what\u00a0value\u00a0was\u00a0expected\u00a0and\u00a0what\u00a0value\u00a0actually\u00a0turned\u00a0up.\nI\u00a0therefore\u00a0notice\u00a0at\u00a0once\u00a0that\u00a0something\u00a0failed\u2014and\u00a0I\u00a0can\u00a0immediately\u00a0see\u00a0which\u00a0tests\nfailed,\u00a0giving\u00a0me\u00a0a\u00a0clue\u00a0as\u00a0to\u00a0what\u00a0went\u00a0wrong\u00a0(and,\u00a0in\u00a0this\u00a0case,\u00a0confirming\u00a0the\u00a0failure\nwas\u00a0where\u00a0I\u00a0injected\u00a0it).\n\u00a0Run\u00a0tests\u00a0frequently.\u00a0Run\u00a0those\u00a0exercising\u00a0the\u00a0code\u00a0you\u2019re\u00a0working\u00a0on\u00a0at\u00a0least\nevery\u00a0few\u00a0minutes\u037e\u00a0run\u00a0all\u00a0tests\u00a0at\u00a0least\u00a0daily.\nIn\u00a0a\u00a0real\u00a0system,\u00a0I\u00a0might\u00a0have\u00a0thousands\u00a0of\u00a0tests.\u00a0A\u00a0good\u00a0test\u00a0framework\u00a0allows\u00a0me\u00a0to\nrun\u00a0them\u00a0easily\u00a0and\u00a0to\u00a0quickly\u00a0see\u00a0if\u00a0any\u00a0have\u00a0failed.\u00a0This\u00a0simple\u00a0feedback\u00a0is\u00a0essential\u00a0to\nself\u00adtesting\u00a0code.\u00a0When\u00a0I\u00a0work,\u00a0I\u2019ll\u00a0be\u00a0running\u00a0tests\u00a0very\u00a0frequently\u2014checking\u00a0progress\nwith\u00a0new\u00a0code\u00a0or\u00a0checking\u00a0for\u00a0mistakes\u00a0with\u00a0refactoring.\nThe\u00a0Mocha\u00a0framework\u00a0can\u00a0use\u00a0different\u00a0libraries,\u00a0which\u00a0it\u00a0calls\u00a0assertion\u00a0libraries,\u00a0to\nverify\u00a0the\u00a0fixture\u00a0for\u00a0a\u00a0test.\u00a0Being\u00a0JavaScript,\u00a0there\u00a0are\u00a0a\u00a0quadzillion\u00a0of\u00a0them\u00a0out\u00a0there,\nsome\u00a0of\u00a0which\u00a0may\u00a0still\u00a0be\u00a0current\u00a0when\u00a0you\u2019re\u00a0reading\u00a0this.\u00a0The\u00a0one\u00a0I\u2019m\u00a0using\u00a0at\u00a0the\nmoment\u00a0is\u00a0Chai\u00a0[chai].\u00a0Chai\u00a0allows\u00a0me\u00a0to\u00a0write\u00a0my\u00a0validations\u00a0either\u00a0using\u00a0an\u00a0\u201cassert\u201d\nstyle:\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\ndescribe('province',\u00a0function()\u00a0{\n\u00a0\u00a0it('shortfall',\u00a0function()\u00a0{\n\u00a0\u00a0\u00a0\u00a0const\u00a0asia\u00a0=\u00a0new\u00a0Province(sampleProvinceData())\u037e\n\u00a0\u00a0\u00a0\u00a0assert.equal(asia.shortfall,\u00a05)\u037e\n\u00a0\u00a0})\u037e\n})\u037e\nor\u00a0an\u00a0\u201cexpect\u201d\u00a0style:\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nwww.EBooksWorld.ir\n", "page": 108, "type": "text", "section": "Page 108"}
{"text": "describe('province',\u00a0function()\u00a0{\n\u00a0\u00a0it('shortfall',\u00a0function()\u00a0{\n\u00a0\u00a0\u00a0\u00a0const\u00a0asia\u00a0=\u00a0new\u00a0Province(sampleProvinceData())\u037e\n\u00a0\u00a0\u00a0\u00a0expect(asia.shortfall).equal(5)\u037e\n\u00a0\u00a0})\u037e\n})\u037e\nI\u00a0usually\u00a0prefer\u00a0the\u00a0assert\u00a0style,\u00a0but\u00a0at\u00a0the\u00a0moment\u00a0I\u00a0mostly\u00a0use\u00a0the\u00a0expect\u00a0style\u00a0while\nworking\u00a0in\u00a0JavaScript.\nDifferent\u00a0environments\u00a0provide\u00a0different\u00a0ways\u00a0to\u00a0run\u00a0tests.\u00a0When\u00a0I\u2019m\u00a0programming\u00a0in\nJava,\u00a0I\u00a0use\u00a0an\u00a0IDE\u00a0that\u00a0gives\u00a0me\u00a0a\u00a0graphical\u00a0test\u00a0runner.\u00a0Its\u00a0progress\u00a0bar\u00a0is\u00a0green\u00a0as\nlong\u00a0as\u00a0all\u00a0the\u00a0tests\u00a0pass,\u00a0and\u00a0turns\u00a0red\u00a0should\u00a0any\u00a0of\u00a0them\u00a0fail.\u00a0My\u00a0colleagues\u00a0often\u00a0use\nthe\u00a0phrases\u00a0\u201cgreen\u00a0bar\u201d\u00a0and\u00a0\u201cred\u00a0bar\u201d\u00a0to\u00a0describe\u00a0the\u00a0state\u00a0of\u00a0tests.\u00a0I\u00a0might\u00a0say,\u00a0\u201cNever\nrefactor\u00a0on\u00a0a\u00a0red\u00a0bar,\u201d\u00a0meaning\u00a0you\u00a0shouldn\u2019t\u00a0be\u00a0refactoring\u00a0if\u00a0your\u00a0test\u00a0suite\u00a0has\u00a0a\nfailing\u00a0test.\u00a0Or,\u00a0I\u00a0might\u00a0say,\u00a0\u201cRevert\u00a0to\u00a0green\u201d\u00a0to\u00a0say\u00a0you\u00a0should\u00a0undo\u00a0recent\u00a0changes\nand\u00a0go\u00a0back\u00a0to\u00a0the\u00a0last\u00a0state\u00a0where\u00a0you\u00a0had\u00a0all\u00adpassing\u00a0test\u00a0suite\u00a0(usually\u00a0by\u00a0going\u00a0back\nto\u00a0a\u00a0recent\u00a0version\u00adcontrol\u00a0checkpoint).\nGraphical\u00a0test\u00a0runners\u00a0are\u00a0nice,\u00a0but\u00a0not\u00a0essential.\u00a0I\u00a0usually\u00a0have\u00a0my\u00a0tests\u00a0set\u00a0to\u00a0run\nfrom\u00a0a\u00a0single\u00a0key\u00a0in\u00a0Emacs,\u00a0and\u00a0observe\u00a0the\u00a0text\u00a0feedback\u00a0in\u00a0my\u00a0compilation\u00a0window.\nThe\u00a0key\u00a0point\u00a0is\u00a0that\u00a0I\u00a0can\u00a0quickly\u00a0see\u00a0if\u00a0my\u00a0tests\u00a0are\u00a0all\u00a0OK.\nADD ANOTHER TEST\nNow\u00a0I\u2019ll\u00a0continue\u00a0adding\u00a0more\u00a0tests.\u00a0The\u00a0style\u00a0I\u00a0follow\u00a0is\u00a0to\u00a0look\u00a0at\u00a0all\u00a0the\u00a0things\u00a0the\nclass\u00a0should\u00a0do\u00a0and\u00a0test\u00a0each\u00a0one\u00a0of\u00a0them\u00a0for\u00a0any\u00a0conditions\u00a0that\u00a0might\u00a0cause\u00a0the\u00a0class\nto\u00a0fail.\u00a0This\u00a0is\u00a0not\u00a0the\u00a0same\u00a0as\u00a0testing\u00a0every\u00a0public\u00a0method,\u00a0which\u00a0is\u00a0what\u00a0some\nprogrammers\u00a0advocate.\u00a0Testing\u00a0should\u00a0be\u00a0risk\u00addriven\u037e\u00a0remember,\u00a0I\u2019m\u00a0trying\u00a0to\u00a0find\nbugs,\u00a0now\u00a0or\u00a0in\u00a0the\u00a0future.\u00a0Therefore\u00a0I\u00a0don\u2019t\u00a0test\u00a0accessors\u00a0that\u00a0just\u00a0read\u00a0and\u00a0write\u00a0a\nfield:\u00a0They\u00a0are\u00a0so\u00a0simple\u00a0that\u00a0I\u2019m\u00a0not\u00a0likely\u00a0to\u00a0find\u00a0a\u00a0bug\u00a0there.\nThis\u00a0is\u00a0important\u00a0because\u00a0trying\u00a0to\u00a0write\u00a0too\u00a0many\u00a0tests\u00a0usually\u00a0leads\u00a0to\u00a0not\u00a0writing\nenough.\u00a0I\u00a0get\u00a0many\u00a0benefits\u00a0from\u00a0testing\u00a0even\u00a0if\u00a0I\u00a0do\u00a0only\u00a0a\u00a0little\u00a0testing.\u00a0My\u00a0focus\u00a0is\u00a0to\ntest\u00a0the\u00a0areas\u00a0that\u00a0I\u2019m\u00a0most\u00a0worried\u00a0about\u00a0going\u00a0wrong.\u00a0That\u00a0way\u00a0I\u00a0get\u00a0the\u00a0most\u00a0benefit\nfor\u00a0my\u00a0testing\u00a0effort.\n\u00a0It\u00a0is\u00a0better\u00a0to\u00a0write\u00a0and\u00a0run\u00a0incomplete\u00a0tests\u00a0than\u00a0not\u00a0to\u00a0run\u00a0complete\u00a0tests.\nSo\u00a0I\u2019ll\u00a0start\u00a0by\u00a0hitting\u00a0the\u00a0other\u00a0main\u00a0output\u00a0for\u00a0this\u00a0code\u2014the\u00a0profit\u00a0calculation.\u00a0Again,\nwww.EBooksWorld.ir\n", "page": 109, "type": "text", "section": "Page 109"}
{"text": "I\u2019ll\u00a0just\u00a0do\u00a0a\u00a0basic\u00a0test\u00a0for\u00a0profit\u00a0on\u00a0my\u00a0initial\u00a0fixture.\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\ndescribe('province',\u00a0function()\u00a0{\n\u00a0\u00a0it('shortfall',\u00a0function()\u00a0{\n\u00a0\u00a0\u00a0\u00a0const\u00a0asia\u00a0=\u00a0new\u00a0Province(sampleProvinceData())\u037e\n\u00a0\u00a0\u00a0\u00a0expect(asia.shortfall).equal(5)\u037e\n\u00a0\u00a0})\u037e\n\u00a0\u00a0it('profit',\u00a0function()\u00a0{\n\u00a0\u00a0\u00a0\u00a0const\u00a0asia\u00a0=\u00a0new\u00a0Province(sampleProvinceData())\u037e\n\u00a0\u00a0\u00a0\u00a0expect(asia.profit).equal(230)\u037e\n\u00a0\u00a0})\u037e\n})\u037e\nThat\u00a0shows\u00a0the\u00a0final\u00a0result,\u00a0but\u00a0the\u00a0way\u00a0I\u00a0got\u00a0it\u00a0was\u00a0by\u00a0first\u00a0setting\u00a0the\u00a0expected\u00a0value\u00a0to\na\u00a0placeholder,\u00a0then\u00a0replacing\u00a0it\u00a0with\u00a0whatever\u00a0the\u00a0program\u00a0produced\u00a0(230).\u00a0I\u00a0could\nhave\u00a0calculated\u00a0it\u00a0by\u00a0hand\u00a0myself,\u00a0but\u00a0since\u00a0the\u00a0code\u00a0is\u00a0supposed\u00a0to\u00a0be\u00a0working\ncorrectly,\u00a0I\u2019ll\u00a0just\u00a0trust\u00a0it\u00a0for\u00a0now.\u00a0Once\u00a0I\u00a0have\u00a0that\u00a0new\u00a0test\u00a0working\u00a0correctly,\u00a0I\u00a0break\u00a0it\nby\u00a0altering\u00a0the\u00a0profit\u00a0calculation\u00a0with\u00a0a\u00a0spurious\u00a0*\u00a02.\u00a0I\u00a0satisfy\u00a0myself\u00a0that\u00a0the\u00a0test\u00a0fails\nas\u00a0it\u00a0should,\u00a0then\u00a0revert\u00a0my\u00a0injected\u00a0fault.\u00a0This\u00a0pattern\u2014write\u00a0with\u00a0a\u00a0placeholder\u00a0for\u00a0the\nexpected\u00a0value,\u00a0replace\u00a0the\u00a0placeholder\u00a0with\u00a0the\u00a0code\u2019s\u00a0actual\u00a0value,\u00a0inject\u00a0a\u00a0fault,\u00a0revert\nthe\u00a0fault\u2014is\u00a0a\u00a0common\u00a0one\u00a0I\u00a0use\u00a0when\u00a0adding\u00a0tests\u00a0to\u00a0existing\u00a0code.\nThere\u00a0is\u00a0some\u00a0duplication\u00a0between\u00a0these\u00a0tests\u2014both\u00a0of\u00a0them\u00a0set\u00a0up\u00a0the\u00a0fixture\u00a0with\u00a0the\nsame\u00a0first\u00a0line.\u00a0Just\u00a0as\u00a0I\u2019m\u00a0suspicious\u00a0of\u00a0duplicated\u00a0code\u00a0in\u00a0regular\u00a0code,\u00a0I\u2019m\u00a0suspicious\nof\u00a0it\u00a0in\u00a0test\u00a0code,\u00a0so\u00a0will\u00a0look\u00a0to\u00a0remove\u00a0it\u00a0by\u00a0factoring\u00a0to\u00a0a\u00a0common\u00a0place.\u00a0One\u00a0option\u00a0is\nto\u00a0raise\u00a0the\u00a0constant\u00a0to\u00a0the\u00a0outer\u00a0scope.\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\ndescribe('province',\u00a0function()\u00a0{\n\u00a0\u00a0const\u00a0asia\u00a0=\u00a0new\u00a0Province(sampleProvinceData())\u037e\u00a0\u00a0\u00a0//\u00a0DON'T\u00a0DO\u00a0THIS\n\u00a0\u00a0it('shortfall',\u00a0function()\u00a0{\n\u00a0\u00a0\u00a0\u00a0expect(asia.shortfall).equal(5)\u037e\n\u00a0\u00a0})\u037e\n\u00a0\u00a0it('profit',\u00a0function()\u00a0{\n\u00a0\u00a0\u00a0\u00a0expect(asia.profit).equal(230)\u037e\n\u00a0\u00a0})\u037e\n})\u037e\nBut\u00a0as\u00a0the\u00a0comment\u00a0indicates,\u00a0I\u00a0never\u00a0do\u00a0this.\u00a0It\u00a0will\u00a0work\u00a0for\u00a0the\u00a0moment,\u00a0but\u00a0it\nintroduces\u00a0a\u00a0petri\u00a0dish\u00a0that\u2019s\u00a0primed\u00a0for\u00a0one\u00a0of\u00a0the\u00a0nastiest\u00a0bugs\u00a0in\u00a0testing\u2014a\u00a0shared\nfixture\u00a0which\u00a0causes\u00a0tests\u00a0to\u00a0interact.\u00a0The\u00a0const\u00a0keyword\u00a0in\u00a0JavaScript\u00a0only\u00a0means\u00a0the\nwww.EBooksWorld.ir\n", "page": 110, "type": "text", "section": "Page 110"}
{"text": "reference\u00a0to\u00a0asia\u00a0is\u00a0constant,\u00a0not\u00a0the\u00a0content\u00a0of\u00a0that\u00a0object.\u00a0Should\u00a0a\u00a0future\u00a0test\nchange\u00a0that\u00a0common\u00a0object,\u00a0I\u2019ll\u00a0end\u00a0up\u00a0with\u00a0intermittent\u00a0test\u00a0failures\u00a0due\u00a0to\u00a0tests\ninteracting\u00a0through\u00a0the\u00a0shared\u00a0fixture,\u00a0yielding\u00a0different\u00a0results\u00a0depending\u00a0on\u00a0what\norder\u00a0the\u00a0tests\u00a0are\u00a0run\u00a0in.\u00a0That\u2019s\u00a0a\u00a0nondeterminism\u00a0in\u00a0the\u00a0tests\u00a0that\u00a0can\u00a0lead\u00a0to\u00a0long\u00a0and\ndifficult\u00a0debugging\u00a0at\u00a0best,\u00a0and\u00a0a\u00a0collapse\u00a0of\u00a0confidence\u00a0in\u00a0the\u00a0tests\u00a0at\u00a0worst.\u00a0Instead,\u00a0I\nprefer\u00a0to\u00a0do\u00a0this:\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\ndescribe('province',\u00a0function()\u00a0{\n\u00a0\u00a0let\u00a0asia\u037e\n\u00a0\u00a0beforeEach(function()\u00a0{\n\u00a0\u00a0\u00a0\u00a0asia\u00a0=\u00a0new\u00a0Province(sampleProvinceData())\u037e\n\u00a0\u00a0})\u037e\n\u00a0\u00a0it('shortfall',\u00a0function()\u00a0{\n\u00a0\u00a0\u00a0\u00a0expect(asia.shortfall).equal(5)\u037e\n\u00a0\u00a0})\u037e\n\u00a0\u00a0it('profit',\u00a0function()\u00a0{\n\u00a0\u00a0\u00a0\u00a0expect(asia.profit).equal(230)\u037e\n\u00a0\u00a0})\u037e\n})\u037e\nThe\u00a0beforeEach\u00a0clause\u00a0is\u00a0run\u00a0before\u00a0each\u00a0test\u00a0runs,\u00a0clearing\u00a0out\u00a0asia\u00a0and\u00a0setting\u00a0it\u00a0to\na\u00a0fresh\u00a0value\u00a0each\u00a0time.\u00a0This\u00a0way\u00a0I\u00a0build\u00a0a\u00a0fresh\u00a0fixture\u00a0before\u00a0each\u00a0test\u00a0is\u00a0run,\u00a0which\nkeeps\u00a0the\u00a0tests\u00a0isolated\u00a0and\u00a0prevents\u00a0the\u00a0nondeterminism\u00a0that\u00a0causes\u00a0so\u00a0much\u00a0trouble.\nWhen\u00a0I\u00a0give\u00a0this\u00a0advice,\u00a0some\u00a0people\u00a0are\u00a0concerned\u00a0that\u00a0building\u00a0a\u00a0fresh\u00a0fixture\u00a0every\ntime\u00a0will\u00a0slow\u00a0down\u00a0the\u00a0tests.\u00a0Most\u00a0of\u00a0the\u00a0time,\u00a0it\u00a0won\u2019t\u00a0be\u00a0noticeable.\u00a0If\u00a0it\u00a0is\u00a0a\u00a0problem,\nI\u2019d\u00a0consider\u00a0a\u00a0shared\u00a0fixture,\u00a0but\u00a0then\u00a0I\u00a0will\u00a0need\u00a0to\u00a0be\u00a0really\u00a0careful\u00a0that\u00a0no\u00a0test\u00a0ever\nchanges\u00a0it.\u00a0I\u00a0can\u00a0also\u00a0use\u00a0a\u00a0shared\u00a0fixture\u00a0if\u00a0I\u2019m\u00a0sure\u00a0it\u00a0is\u00a0truly\u00a0immutable.\u00a0But\u00a0my\u00a0reflex\nis\u00a0to\u00a0use\u00a0a\u00a0fresh\u00a0fixture\u00a0because\u00a0the\u00a0debugging\u00a0cost\u00a0of\u00a0making\u00a0a\u00a0mistake\u00a0with\u00a0a\u00a0shared\nfixture\u00a0has\u00a0bit\u00a0me\u00a0too\u00a0often\u00a0in\u00a0the\u00a0past.\nGiven\u00a0I\u00a0run\u00a0the\u00a0setup\u00a0code\u00a0in\u00a0beforeEach\u00a0with\u00a0every\u00a0test,\u00a0why\u00a0not\u00a0leave\u00a0the\u00a0setup\ncode\u00a0inside\u00a0the\u00a0individual\u00a0it\u00a0blocks?\u00a0I\u00a0like\u00a0my\u00a0tests\u00a0to\u00a0all\u00a0operate\u00a0on\u00a0a\u00a0common\u00a0bit\u00a0of\nfixture,\u00a0so\u00a0I\u00a0can\u00a0become\u00a0familiar\u00a0with\u00a0that\u00a0standard\u00a0fixture\u00a0and\u00a0see\u00a0the\u00a0various\ncharacteristics\u00a0to\u00a0test\u00a0on\u00a0it.\u00a0The\u00a0presence\u00a0of\u00a0the\u00a0beforeEach\u00a0block\u00a0signals\u00a0to\u00a0the\nreader\u00a0that\u00a0I\u2019m\u00a0using\u00a0a\u00a0standard\u00a0fixture.\u00a0You\u00a0can\u00a0then\u00a0look\u00a0at\u00a0all\u00a0the\u00a0tests\u00a0within\u00a0the\nscope\u00a0of\u00a0that\u00a0describe\u00a0block\u00a0and\u00a0know\u00a0they\u00a0all\u00a0take\u00a0the\u00a0same\u00a0base\u00a0data\u00a0as\u00a0a\u00a0starting\npoint.\nMODIFYING THE FIXTURE\nwww.EBooksWorld.ir\n", "page": 111, "type": "text", "section": "Page 111"}
{"text": "So\u00a0far,\u00a0the\u00a0tests\u00a0I\u2019ve\u00a0written\u00a0show\u00a0how\u00a0I\u00a0probe\u00a0the\u00a0properties\u00a0of\u00a0the\u00a0fixture\u00a0once\u00a0I\u2019ve\nloaded\u00a0it.\u00a0But\u00a0in\u00a0use,\u00a0that\u00a0fixture\u00a0will\u00a0be\u00a0regularly\u00a0updated\u00a0by\u00a0the\u00a0users\u00a0as\u00a0they\u00a0change\nvalues.\nMost\u00a0of\u00a0the\u00a0updates\u00a0are\u00a0simple\u00a0setters,\u00a0and\u00a0I\u00a0don\u2019t\u00a0usually\u00a0bother\u00a0to\u00a0test\u00a0those\u00a0as\u00a0there\u2019s\nlittle\u00a0chance\u00a0they\u00a0will\u00a0be\u00a0the\u00a0source\u00a0of\u00a0a\u00a0bug.\u00a0But\u00a0there\u00a0is\u00a0some\u00a0complicated\u00a0behavior\naround\u00a0Producer\u2019s\u00a0production\u00a0setter,\u00a0so\u00a0I\u00a0think\u00a0that\u2019s\u00a0worth\u00a0a\u00a0test.\ndescribe(\u2019province\u2019\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nit('change\u00a0production',\u00a0function()\u00a0{\n\u00a0\u00a0\u00a0\u00a0asia.producers[0].production\u00a0=\u00a020\u037e\n\u00a0\u00a0\u00a0\u00a0expect(asia.shortfall).equal(\u00ad6)\u037e\n\u00a0\u00a0\u00a0\u00a0expect(asia.profit).equal(292)\u037e\n})\u037e\nThis\u00a0is\u00a0a\u00a0common\u00a0pattern.\u00a0I\u00a0take\u00a0the\u00a0initial\u00a0standard\u00a0fixture\u00a0that\u2019s\u00a0set\u00a0up\u00a0by\u00a0the\nbeforeEach\u00a0block,\u00a0I\u00a0exercise\u00a0that\u00a0fixture\u00a0for\u00a0the\u00a0test,\u00a0then\u00a0I\u00a0verify\u00a0the\u00a0fixture\u00a0has\ndone\u00a0what\u00a0I\u00a0think\u00a0it\u00a0should\u00a0have\u00a0done.\u00a0If\u00a0you\u00a0read\u00a0much\u00a0about\u00a0testing,\u00a0you\u2019ll\u00a0hear\u00a0these\nphases\u00a0described\u00a0variously\u00a0as\u00a0setup\u00adexercise\u00adverify,\u00a0given\u00adwhen\u00adthen,\u00a0or\u00a0arrange\u00adact\u00ad\nassert.\u00a0Sometimes\u00a0you\u2019ll\u00a0see\u00a0all\u00a0the\u00a0steps\u00a0present\u00a0within\u00a0the\u00a0test\u00a0itself,\u00a0in\u00a0other\u00a0cases\u00a0the\ncommon\u00a0early\u00a0phases\u00a0can\u00a0be\u00a0pushed\u00a0out\u00a0into\u00a0standard\u00a0setup\u00a0routines\u00a0such\u00a0as\nbeforeEach.\n(There\u00a0is\u00a0an\u00a0implicit\u00a0fourth\u00a0phase\u00a0that\u2019s\u00a0usually\u00a0not\u00a0mentioned:\u00a0teardown.\u00a0Teardown\nremoves\u00a0the\u00a0fixture\u00a0between\u00a0tests\u00a0so\u00a0that\u00a0different\u00a0tests\u00a0don\u2019t\u00a0interact\u00a0with\u00a0each\u00a0other.\nBy\u00a0doing\u00a0all\u00a0my\u00a0setup\u00a0in\u00a0beforeEach,\u00a0I\u00a0allow\u00a0the\u00a0test\u00a0framework\u00a0to\u00a0implicitly\u00a0tear\ndown\u00a0my\u00a0fixture\u00a0between\u00a0tests,\u00a0so\u00a0I\u00a0can\u00a0take\u00a0the\u00a0teardown\u00a0phase\u00a0for\u00a0granted.\u00a0Most\nwriters\u00a0on\u00a0tests\u00a0gloss\u00a0over\u00a0teardown\u2014reasonably\u00a0so,\u00a0since\u00a0most\u00a0of\u00a0the\u00a0time\u00a0we\u00a0ignore\u00a0it.\nBut\u00a0occasionally,\u00a0it\u00a0can\u00a0be\u00a0important\u00a0to\u00a0have\u00a0an\u00a0explicit\u00a0teardown\u00a0operation,\nparticularly\u00a0if\u00a0we\u00a0have\u00a0a\u00a0fixture\u00a0that\u00a0we\u00a0have\u00a0to\u00a0share\u00a0between\u00a0tests\u00a0because\u00a0it\u2019s\u00a0slow\u00a0to\ncreate.)\nIn\u00a0this\u00a0test,\u00a0I\u2019m\u00a0verifying\u00a0two\u00a0different\u00a0characteristics\u00a0in\u00a0a\u00a0single\u00a0it\u00a0clause.\u00a0As\u00a0a\u00a0general\nrule,\u00a0it\u2019s\u00a0wise\u00a0to\u00a0have\u00a0only\u00a0a\u00a0single\u00a0verify\u00a0statement\u00a0in\u00a0each\u00a0it\u00a0clause.\u00a0This\u00a0is\u00a0because\nthe\u00a0test\u00a0will\u00a0fail\u00a0on\u00a0the\u00a0first\u00a0verification\u00a0failure\u2014which\u00a0can\u00a0often\u00a0hide\u00a0useful\u00a0information\nwhen\u00a0you\u2019re\u00a0figuring\u00a0out\u00a0why\u00a0a\u00a0test\u00a0is\u00a0broken.\u00a0In\u00a0this\u00a0case,\u00a0I\u00a0feel\u00a0the\u00a0two\u00a0are\u00a0closely\nenough\u00a0connected\u00a0that\u00a0I\u2019m\u00a0happy\u00a0to\u00a0have\u00a0them\u00a0in\u00a0the\u00a0same\u00a0test.\u00a0Should\u00a0I\u00a0wish\u00a0to\nseparate\u00a0them\u00a0into\u00a0separate\u00a0it\u00a0clauses,\u00a0I\u00a0can\u00a0do\u00a0that\u00a0later.\nPROBING THE BOUNDARIES\nwww.EBooksWorld.ir\n", "page": 112, "type": "text", "section": "Page 112"}
{"text": "PROBING THE BOUNDARIES\nSo\u00a0far\u00a0my\u00a0tests\u00a0have\u00a0focused\u00a0on\u00a0regular\u00a0usage,\u00a0often\u00a0referred\u00a0to\u00a0as\u00a0\u201chappy\u00a0path\u201d\nconditions\u00a0where\u00a0everything\u00a0is\u00a0going\u00a0OK\u00a0and\u00a0things\u00a0are\u00a0used\u00a0as\u00a0expected.\u00a0But\u00a0it\u2019s\u00a0also\ngood\u00a0to\u00a0throw\u00a0tests\u00a0at\u00a0the\u00a0boundaries\u00a0of\u00a0these\u00a0conditions\u2014to\u00a0see\u00a0what\u00a0happens\u00a0when\nthings\u00a0might\u00a0go\u00a0wrong.\nWhenever\u00a0I\u00a0have\u00a0a\u00a0collection\u00a0of\u00a0something,\u00a0such\u00a0as\u00a0producers\u00a0in\u00a0this\u00a0example,\u00a0I\u00a0like\u00a0to\nsee\u00a0what\u00a0happens\u00a0when\u00a0it\u2019s\u00a0empty.\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\ndescribe('no\u00a0producers',\u00a0function()\u00a0{\n\u00a0\u00a0let\u00a0noProducers\u037e\n\u00a0\u00a0beforeEach(function()\u00a0{\n\u00a0\u00a0\u00a0\u00a0const\u00a0data\u00a0=\u00a0{\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0name:\u00a0\"No\u00a0proudcers\",\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0producers:\u00a0[],\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0demand:\u00a030,\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0price:\u00a020\n\u00a0\u00a0\u00a0\u00a0}\u037e\n\u00a0\u00a0\u00a0\u00a0noProducers\u00a0=\u00a0new\u00a0Province(data)\u037e\n\u00a0\u00a0})\u037e\n\u00a0\u00a0it('shortfall',\u00a0function()\u00a0{\n\u00a0\u00a0\u00a0\u00a0expect(noProducers.shortfall).equal(30)\u037e\n\u00a0\u00a0})\u037e\n\u00a0\u00a0it('profit',\u00a0function()\u00a0{\n\u00a0\u00a0\u00a0\u00a0expect(noProducers.profit).equal(0)\u037e\n\u00a0\u00a0})\u037e\nWith\u00a0numbers,\u00a0zeros\u00a0are\u00a0good\u00a0things\u00a0to\u00a0probe:\ndescribe(\u2019province\u2019\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nit('zero\u00a0demand',\u00a0function()\u00a0{\n\u00a0\u00a0asia.demand\u00a0=\u00a00\u037e\n\u00a0\u00a0\u00a0\u00a0expect(asia.shortfall).equal(\u00ad25)\u037e\n\u00a0\u00a0\u00a0\u00a0expect(asia.profit).equal(0)\u037e\n})\u037e\nas\u00a0are\u00a0negatives:\ndescribe(\u2019province\u2019\u2026\nwww.EBooksWorld.ir\n", "page": 113, "type": "text", "section": "Page 113"}
{"text": "Click\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nit('negative\u00a0demand',\u00a0function()\u00a0{\n\u00a0\u00a0asia.demand\u00a0=\u00a0\u00ad1\u037e\n\u00a0\u00a0expect(asia.shortfall).equal(\u00ad26)\u037e\n\u00a0\u00a0expect(asia.profit).equal(\u00ad10)\u037e\n})\u037e\nAt\u00a0this\u00a0point,\u00a0I\u00a0may\u00a0start\u00a0to\u00a0wonder\u00a0if\u00a0a\u00a0negative\u00a0demand\u00a0resulting\u00a0in\u00a0a\u00a0negative\u00a0profit\nreally\u00a0makes\u00a0any\u00a0sense\u00a0for\u00a0the\u00a0domain.\u00a0Shouldn\u2019t\u00a0the\u00a0minimum\u00a0demand\u00a0be\u00a0zero?\u00a0In\nwhich\u00a0case,\u00a0perhaps,\u00a0the\u00a0setter\u00a0should\u00a0react\u00a0differently\u00a0to\u00a0a\u00a0negative\u00a0argument\u2014raising\nan\u00a0error\u00a0or\u00a0setting\u00a0the\u00a0value\u00a0to\u00a0zero\u00a0anyway.\u00a0These\u00a0are\u00a0good\u00a0questions\u00a0to\u00a0ask,\u00a0and\nwriting\u00a0tests\u00a0like\u00a0this\u00a0helps\u00a0me\u00a0think\u00a0about\u00a0how\u00a0the\u00a0code\u00a0ought\u00a0to\u00a0react\u00a0to\u00a0boundary\ncases.\n\u00a0Think\u00a0of\u00a0the\u00a0boundary\u00a0conditions\u00a0under\u00a0which\u00a0things\u00a0might\u00a0go\u00a0wrong\u00a0and\nconcentrate\u00a0your\u00a0tests\u00a0there.\nThe\u00a0setters\u00a0take\u00a0a\u00a0string\u00a0from\u00a0the\u00a0fields\u00a0in\u00a0the\u00a0UI,\u00a0which\u00a0are\u00a0constrained\u00a0to\u00a0only\u00a0accept\nnumbers\u2014but\u00a0they\u00a0can\u00a0still\u00a0be\u00a0blank,\u00a0so\u00a0I\u00a0should\u00a0have\u00a0tests\u00a0that\u00a0ensure\u00a0the\u00a0code\nresponds\u00a0to\u00a0the\u00a0blanks\u00a0the\u00a0way\u00a0I\u00a0want\u00a0it\u00a0to.\ndescribe(\u2019province\u2019\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nit('empty\u00a0string\u00a0demand',\u00a0function()\u00a0{\n\u00a0\u00a0asia.demand\u00a0=\u00a0\"\"\u037e\n\u00a0\u00a0expect(asia.shortfall).NaN\u037e\n\u00a0\u00a0expect(asia.profit).NaN\u037e\n})\u037e\nNotice\u00a0how\u00a0I\u2019m\u00a0playing\u00a0the\u00a0part\u00a0of\u00a0an\u00a0enemy\u00a0to\u00a0my\u00a0code.\u00a0I\u2019m\u00a0actively\u00a0thinking\u00a0about\nhow\u00a0I\u00a0can\u00a0break\u00a0it.\u00a0I\u00a0find\u00a0that\u00a0state\u00a0of\u00a0mind\u00a0to\u00a0be\u00a0both\u00a0productive\u00a0and\u00a0fun.\u00a0It\u00a0indulges\nthe\u00a0mean\u00adspirited\u00a0part\u00a0of\u00a0my\u00a0psyche.\nThis\u00a0one\u00a0is\u00a0interesting:\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\ndescribe('string\u00a0for\u00a0producers',\u00a0function()\u00a0{\nwww.EBooksWorld.ir\n", "page": 114, "type": "text", "section": "Page 114"}
{"text": "\u00a0\u00a0it('',\u00a0function()\u00a0{\n\u00a0\u00a0\u00a0\u00a0const\u00a0data\u00a0=\u00a0{\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0name:\u00a0\"String\u00a0producers\",\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0producers:\u00a0\"\",\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0demand:\u00a030,\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0price:\u00a020\n\u00a0\u00a0\u00a0\u00a0}\u037e\n\u00a0\u00a0\u00a0\u00a0const\u00a0prov\u00a0=\u00a0new\u00a0Province(data)\u037e\n\u00a0\u00a0\u00a0\u00a0expect(prov.shortfall).equal(0)\u037e\n\u00a0\u00a0})\u037e\nThis\u00a0doesn\u2019t\u00a0produce\u00a0a\u00a0simple\u00a0failure\u00a0reporting\u00a0that\u00a0the\u00a0shortfall\u00a0isn\u2019t\u00a00.\u00a0Here\u2019s\u00a0the\nconsole\u00a0output:\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\n\u2019\u2019\u2019\u2019\u2019\u2019\u2019\u2019\u2019!\n\u00a0\u00a09\u00a0passing\u00a0(74ms)\n\u00a0\u00a01\u00a0failing\n\u00a0\u00a01)\u00a0string\u00a0for\u00a0producers\u00a0:\n\u00a0\u00a0\u00a0\u00a0\u00a0TypeError:\u00a0doc.producers.forEach\u00a0is\u00a0not\u00a0a\u00a0function\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0at\u00a0new\u00a0Province\u00a0(src/main.js:22:19)\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0at\u00a0Context.<anonymous>\u00a0(src/tester.js:86:18)\nMocha\u00a0treats\u00a0this\u00a0as\u00a0a\u00a0failure\u2014but\u00a0many\u00a0testing\u00a0frameworks\u00a0distinguish\u00a0between\u00a0this\nsituation,\u00a0which\u00a0they\u00a0call\u00a0an\u00a0error,\u00a0and\u00a0a\u00a0regular\u00a0failure.\u00a0A\u00a0failure\u00a0indicates\u00a0a\u00a0verify\u00a0step\nwhere\u00a0the\u00a0actual\u00a0value\u00a0is\u00a0outside\u00a0the\u00a0bounds\u00a0expected\u00a0by\u00a0the\u00a0verify\u00a0statement.\u00a0But\u00a0this\nerror\u00a0is\u00a0a\u00a0different\u00a0animal\u2014it\u2019s\u00a0an\u00a0exception\u00a0raised\u00a0during\u00a0an\u00a0earlier\u00a0phase\u00a0(in\u00a0this\ncase,\u00a0the\u00a0setup).\u00a0This\u00a0looks\u00a0like\u00a0an\u00a0exception\u00a0that\u00a0the\u00a0authors\u00a0of\u00a0the\u00a0code\u00a0hadn\u2019t\nanticipated,\u00a0so\u00a0we\u00a0get\u00a0an\u00a0error\u00a0sadly\u00a0familiar\u00a0to\u00a0JavaScript\u00a0programmers\u00a0(\u201c\u2026\u00a0is\u00a0not\u00a0a\nfunction\u201d).\nHow\u00a0should\u00a0the\u00a0code\u00a0respond\u00a0to\u00a0such\u00a0a\u00a0case?\u00a0One\u00a0approach\u00a0is\u00a0to\u00a0add\u00a0some\u00a0handling\nthat\u00a0would\u00a0give\u00a0a\u00a0better\u00a0error\u00a0response\u2014either\u00a0raising\u00a0a\u00a0more\u00a0meaningful\u00a0error\nmessage,\u00a0or\u00a0just\u00a0setting\u00a0producers\u00a0to\u00a0an\u00a0empty\u00a0array\u00a0(with\u00a0perhaps\u00a0a\u00a0log\u00a0message).\nBut\u00a0there\u00a0may\u00a0also\u00a0be\u00a0valid\u00a0reasons\u00a0to\u00a0leave\u00a0it\u00a0as\u00a0it\u00a0is.\u00a0Perhaps\u00a0the\u00a0input\u00a0object\u00a0is\nproduced\u00a0by\u00a0a\u00a0trusted\u00a0source\u2014such\u00a0as\u00a0another\u00a0part\u00a0of\u00a0the\u00a0same\u00a0code\u00a0base.\u00a0Putting\u00a0in\nlots\u00a0of\u00a0validation\u00a0checks\u00a0between\u00a0modules\u00a0in\u00a0the\u00a0same\u00a0code\u00a0base\u00a0can\u00a0result\u00a0in\u00a0duplicate\nchecks\u00a0that\u00a0cause\u00a0more\u00a0trouble\u00a0than\u00a0they\u00a0are\u00a0worth,\u00a0especially\u00a0if\u00a0they\u00a0duplicate\nvalidation\u00a0done\u00a0elsewhere.\u00a0But\u00a0if\u00a0that\u00a0input\u00a0object\u00a0is\u00a0coming\u00a0in\u00a0from\u00a0an\u00a0external\u00a0source,\nsuch\u00a0as\u00a0a\u00a0JSON\u00adencoded\u00a0request,\u00a0then\u00a0validation\u00a0checks\u00a0are\u00a0needed,\u00a0and\u00a0should\u00a0be\ntested.\u00a0In\u00a0either\u00a0case,\u00a0writing\u00a0tests\u00a0like\u00a0this\u00a0raises\u00a0these\u00a0kinds\u00a0of\u00a0questions.\nwww.EBooksWorld.ir\n", "page": 115, "type": "text", "section": "Page 115"}
{"text": "If\u00a0I\u2019m\u00a0writing\u00a0tests\u00a0like\u00a0this\u00a0before\u00a0refactoring,\u00a0I\u00a0would\u00a0probably\u00a0discard\u00a0this\u00a0test.\nRefactoring\u00a0should\u00a0preserve\u00a0observable\u00a0behavior\u037e\u00a0an\u00a0error\u00a0like\u00a0this\u00a0is\u00a0outside\u00a0the\nbounds\u00a0of\u00a0observable,\u00a0so\u00a0I\u00a0need\u00a0not\u00a0be\u00a0concerned\u00a0if\u00a0my\u00a0refactoring\u00a0changes\u00a0the\u00a0code\u2019s\nresponse\u00a0to\u00a0this\u00a0condition.\nIf\u00a0this\u00a0error\u00a0could\u00a0lead\u00a0to\u00a0bad\u00a0data\u00a0running\u00a0around\u00a0the\u00a0program,\u00a0causing\u00a0a\u00a0failure\u00a0that\nwill\u00a0be\u00a0hard\u00a0to\u00a0debug,\u00a0I\u00a0might\u00a0use\u00a0Introduce\u00a0Assertion\u00a0(302)\u00a0to\u00a0fail\u00a0fast.\u00a0I\u00a0don\u2019t\u00a0add\ntests\u00a0to\u00a0catch\u00a0such\u00a0assertion\u00a0failures,\u00a0as\u00a0they\u00a0are\u00a0themselves\u00a0a\u00a0form\u00a0of\u00a0test.\n\u00a0Don\u2019t\u00a0let\u00a0the\u00a0fear\u00a0that\u00a0testing\u00a0can\u2019t\u00a0catch\u00a0all\u00a0bugs\u00a0stop\u00a0you\u00a0from\u00a0writing\u00a0tests\nthat\u00a0catch\u00a0most\u00a0bugs.\nWhen\u00a0do\u00a0you\u00a0stop?\u00a0I\u2019m\u00a0sure\u00a0you\u00a0have\u00a0heard\u00a0many\u00a0times\u00a0that\u00a0you\u00a0cannot\u00a0prove\u00a0that\u00a0a\nprogram\u00a0has\u00a0no\u00a0bugs\u00a0by\u00a0testing.\u00a0That\u2019s\u00a0true,\u00a0but\u00a0it\u00a0does\u00a0not\u00a0affect\u00a0the\u00a0ability\u00a0of\u00a0testing\nto\u00a0speed\u00a0up\u00a0programming.\u00a0I\u2019ve\u00a0seen\u00a0various\u00a0proposed\u00a0rules\u00a0to\u00a0ensure\u00a0you\u00a0have\u00a0tested\nevery\u00a0combination\u00a0of\u00a0everything.\u00a0It\u2019s\u00a0worth\u00a0taking\u00a0a\u00a0look\u00a0at\u00a0these\u2014but\u00a0don\u2019t\u00a0let\u00a0them\nget\u00a0to\u00a0you.\u00a0There\u00a0is\u00a0a\u00a0law\u00a0of\u00a0diminishing\u00a0returns\u00a0in\u00a0testing,\u00a0and\u00a0there\u00a0is\u00a0the\u00a0danger\u00a0that\nby\u00a0trying\u00a0to\u00a0write\u00a0too\u00a0many\u00a0tests\u00a0you\u00a0become\u00a0discouraged\u00a0and\u00a0end\u00a0up\u00a0not\u00a0writing\u00a0any.\nYou\u00a0should\u00a0concentrate\u00a0on\u00a0where\u00a0the\u00a0risk\u00a0is.\u00a0Look\u00a0at\u00a0the\u00a0code\u00a0and\u00a0see\u00a0where\u00a0it\u00a0becomes\ncomplex.\u00a0Look\u00a0at\u00a0a\u00a0function\u00a0and\u00a0consider\u00a0the\u00a0likely\u00a0areas\u00a0of\u00a0error.\u00a0Your\u00a0tests\u00a0will\u00a0not\nfind\u00a0every\u00a0bug,\u00a0but\u00a0as\u00a0you\u00a0refactor,\u00a0you\u00a0will\u00a0understand\u00a0the\u00a0program\u00a0better\u00a0and\u00a0thus\nfind\u00a0more\u00a0bugs.\u00a0Although\u00a0I\u00a0always\u00a0start\u00a0refactoring\u00a0with\u00a0a\u00a0test\u00a0suite,\u00a0I\u00a0invariably\u00a0add\u00a0to\nit\u00a0as\u00a0I\u00a0go\u00a0along.\nMUCH MORE THAN THIS\nThat\u2019s\u00a0as\u00a0far\u00a0as\u00a0I\u2019m\u00a0going\u00a0to\u00a0go\u00a0with\u00a0this\u00a0chapter\u2014after\u00a0all,\u00a0this\u00a0is\u00a0a\u00a0book\u00a0on\u00a0refactoring,\nnot\u00a0on\u00a0testing.\u00a0But\u00a0testing\u00a0is\u00a0an\u00a0important\u00a0topic,\u00a0both\u00a0because\u00a0it\u2019s\u00a0a\u00a0necessary\nfoundation\u00a0for\u00a0refactoring\u00a0and\u00a0because\u00a0it\u2019s\u00a0a\u00a0valuable\u00a0tool\u00a0in\u00a0its\u00a0own\u00a0right.\u00a0While\u00a0I\u2019ve\nbeen\u00a0happy\u00a0to\u00a0see\u00a0the\u00a0growth\u00a0of\u00a0refactoring\u00a0as\u00a0a\u00a0programming\u00a0practice\u00a0since\u00a0I\u00a0wrote\nthis\u00a0book,\u00a0I\u2019ve\u00a0been\u00a0even\u00a0happier\u00a0to\u00a0see\u00a0the\u00a0change\u00a0in\u00a0attitudes\u00a0to\u00a0testing.\u00a0Previously\nseen\u00a0as\u00a0the\u00a0responsibility\u00a0of\u00a0a\u00a0separate\u00a0(and\u00a0inferior)\u00a0group,\u00a0testing\u00a0is\u00a0now\u00a0increasingly\na\u00a0first\u00adclass\u00a0concern\u00a0of\u00a0any\u00a0decent\u00a0software\u00a0developer.\u00a0Architectures\u00a0often\u00a0are,\u00a0rightly,\njudged\u00a0on\u00a0their\u00a0testability.\nThe\u00a0kinds\u00a0of\u00a0tests\u00a0I\u2019ve\u00a0shown\u00a0here\u00a0are\u00a0unit\u00a0tests,\u00a0designed\u00a0to\u00a0operate\u00a0on\u00a0a\u00a0small\u00a0area\u00a0of\nthe\u00a0code\u00a0and\u00a0run\u00a0fast.\u00a0They\u00a0are\u00a0the\u00a0backbone\u00a0of\u00a0self\u00adtesting\u00a0code\u037e\u00a0most\u00a0tests\u00a0in\u00a0such\u00a0a\nsystem\u00a0are\u00a0unit\u00a0tests.\u00a0There\u00a0are\u00a0other\u00a0kinds\u00a0of\u00a0tests\u00a0too,\u00a0focusing\u00a0on\u00a0integration\nbetween\u00a0components,\u00a0exercising\u00a0multiple\u00a0levels\u00a0of\u00a0the\u00a0software\u00a0together,\u00a0looking\u00a0for\nwww.EBooksWorld.ir\n", "page": 116, "type": "text", "section": "Page 116"}
{"text": "performance\u00a0issues,\u00a0etc.\u00a0(And\u00a0even\u00a0more\u00a0varied\u00a0than\u00a0the\u00a0types\u00a0of\u00a0tests\u00a0are\u00a0the\narguments\u00a0people\u00a0get\u00a0into\u00a0about\u00a0how\u00a0to\u00a0classify\u00a0tests.)\nLike\u00a0most\u00a0aspects\u00a0of\u00a0programming,\u00a0testing\u00a0is\u00a0an\u00a0iterative\u00a0activity.\u00a0Unless\u00a0you\u00a0are\u00a0either\nvery\u00a0skilled\u00a0or\u00a0very\u00a0lucky,\u00a0you\u00a0won\u2019t\u00a0get\u00a0your\u00a0tests\u00a0right\u00a0the\u00a0first\u00a0time.\u00a0I\u00a0find\u00a0I\u2019m\nconstantly\u00a0working\u00a0on\u00a0the\u00a0test\u00a0suite\u2014just\u00a0as\u00a0much\u00a0as\u00a0I\u00a0work\u00a0on\u00a0the\u00a0main\u00a0code.\nNaturally,\u00a0this\u00a0means\u00a0adding\u00a0new\u00a0tests\u00a0as\u00a0I\u00a0add\u00a0new\u00a0features,\u00a0but\u00a0it\u00a0also\u00a0involves\nlooking\u00a0at\u00a0the\u00a0existing\u00a0tests.\u00a0Are\u00a0they\u00a0clear\u00a0enough?\u00a0Do\u00a0I\u00a0need\u00a0to\u00a0refactor\u00a0them\u00a0so\u00a0I\u00a0can\nmore\u00a0easily\u00a0understand\u00a0what\u00a0they\u00a0are\u00a0doing?\u00a0Have\u00a0I\u00a0got\u00a0the\u00a0right\u00a0tests?\u00a0An\u00a0important\nhabit\u00a0to\u00a0get\u00a0into\u00a0is\u00a0to\u00a0respond\u00a0to\u00a0a\u00a0bug\u00a0by\u00a0first\u00a0writing\u00a0a\u00a0test\u00a0that\u00a0clearly\u00a0reveals\u00a0the\u00a0bug.\nOnly\u00a0after\u00a0I\u00a0have\u00a0the\u00a0test\u00a0do\u00a0I\u00a0fix\u00a0the\u00a0bug.\u00a0By\u00a0having\u00a0the\u00a0test,\u00a0I\u00a0know\u00a0the\u00a0bug\u00a0will\u00a0stay\ndead.\u00a0I\u00a0also\u00a0think\u00a0about\u00a0that\u00a0bug\u00a0and\u00a0its\u00a0test:\u00a0Does\u00a0it\u00a0give\u00a0me\u00a0clues\u00a0to\u00a0other\u00a0gaps\u00a0in\u00a0the\ntest\u00a0suite?\n\u00a0When\u00a0you\u00a0get\u00a0a\u00a0bug\u00a0report,\u00a0start\u00a0by\u00a0writing\u00a0a\u00a0unit\u00a0test\u00a0that\u00a0exposes\u00a0the\u00a0bug.\nA\u00a0common\u00a0question\u00a0is,\u00a0\u201cHow\u00a0much\u00a0testing\u00a0is\u00a0enough?\u201d\u00a0There\u2019s\u00a0no\u00a0good\u00a0measurement\nfor\u00a0this.\u00a0Some\u00a0people\u00a0advocate\u00a0using\u00a0test\u00a0coverage\u00a0[mf\u00adtc]\u00a0as\u00a0a\u00a0measure,\u00a0but\u00a0test\ncoverage\u00a0analysis\u00a0is\u00a0only\u00a0good\u00a0for\u00a0identifying\u00a0untested\u00a0areas\u00a0of\u00a0the\u00a0code,\u00a0not\u00a0for\nassessing\u00a0the\u00a0quality\u00a0of\u00a0a\u00a0test\u00a0suite.\nThe\u00a0best\u00a0measure\u00a0for\u00a0a\u00a0good\u00a0enough\u00a0test\u00a0suite\u00a0is\u00a0subjective:\u00a0How\u00a0confident\u00a0are\u00a0you\u00a0that\nif\u00a0someone\u00a0introduces\u00a0a\u00a0defect\u00a0into\u00a0the\u00a0code,\u00a0some\u00a0test\u00a0will\u00a0fail?\u00a0This\u00a0isn\u2019t\u00a0something\nthat\u00a0can\u00a0be\u00a0objectively\u00a0analyzed,\u00a0and\u00a0it\u00a0doesn\u2019t\u00a0account\u00a0for\u00a0false\u00a0confidence,\u00a0but\u00a0the\u00a0aim\nof\u00a0self\u00adtesting\u00a0code\u00a0is\u00a0to\u00a0get\u00a0that\u00a0confidence.\u00a0If\u00a0I\u00a0can\u00a0refactor\u00a0my\u00a0code\u00a0and\u00a0be\u00a0pretty\u00a0sure\nthat\u00a0I\u2019ve\u00a0not\u00a0introduced\u00a0a\u00a0bug\u00a0because\u00a0my\u00a0tests\u00a0come\u00a0back\u00a0green\u2014then\u00a0I\u00a0can\u00a0be\u00a0happy\nthat\u00a0I\u00a0have\u00a0good\u00a0enough\u00a0tests.\nIt\u00a0is\u00a0possible\u00a0to\u00a0write\u00a0too\u00a0many\u00a0tests.\u00a0One\u00a0sign\u00a0of\u00a0that\u00a0is\u00a0when\u00a0I\u00a0spend\u00a0more\u00a0time\nchanging\u00a0the\u00a0tests\u00a0than\u00a0the\u00a0code\u00a0under\u00a0test\u2014and\u00a0I\u00a0feel\u00a0the\u00a0tests\u00a0are\u00a0slowing\u00a0me\u00a0down.\nBut\u00a0while\u00a0over\u00adtesting\u00a0does\u00a0happen,\u00a0it\u2019s\u00a0vanishingly\u00a0rare\u00a0compared\u00a0to\u00a0under\u00adtesting.\nwww.EBooksWorld.ir\n", "page": 117, "type": "text", "section": "Page 117"}
{"text": "Chapter 5\nIntroducing the Catalog\nThe\u00a0rest\u00a0of\u00a0this\u00a0book\u00a0is\u00a0a\u00a0catalog\u00a0of\u00a0refactorings.\u00a0This\u00a0catalog\u00a0started\u00a0from\u00a0my\u00a0personal\nnotes\u00a0that\u00a0I\u00a0made\u00a0to\u00a0remind\u00a0myself\u00a0how\u00a0to\u00a0do\u00a0refactorings\u00a0in\u00a0a\u00a0safe\u00a0and\u00a0efficient\u00a0way.\nSince\u00a0then,\u00a0I\u2019ve\u00a0refined\u00a0the\u00a0catalog,\u00a0and\u00a0there\u2019s\u00a0more\u00a0of\u00a0it\u00a0that\u00a0comes\u00a0from\u00a0deliberate\nexploration\u00a0of\u00a0some\u00a0refactoring\u00a0moves.\u00a0It\u2019s\u00a0still\u00a0something\u00a0I\u00a0use\u00a0when\u00a0I\u00a0do\u00a0a\u00a0refactoring\nI\u00a0haven\u2019t\u00a0done\u00a0in\u00a0a\u00a0while.\nFORMAT OF THE REFACTORINGS\nAs\u00a0I\u00a0describe\u00a0the\u00a0refactorings\u00a0in\u00a0the\u00a0catalog,\u00a0I\u00a0use\u00a0a\u00a0standard\u00a0format.\u00a0Each\u00a0refactoring\nhas\u00a0five\u00a0parts,\u00a0as\u00a0follows:\nI\u00a0begin\u00a0with\u00a0a\u00a0name.\u00a0The\u00a0name\u00a0is\u00a0important\u00a0to\u00a0building\u00a0a\u00a0vocabulary\u00a0of\nrefactorings.\u00a0This\u00a0is\u00a0the\u00a0name\u00a0I\u00a0use\u00a0elsewhere\u00a0in\u00a0the\u00a0book.\u00a0Refactorings\u00a0often\u00a0go\u00a0by\ndifferent\u00a0names\u00a0now,\u00a0so\u00a0I\u00a0also\u00a0list\u00a0any\u00a0aliases\u00a0that\u00a0seem\u00a0to\u00a0be\u00a0common.\nI\u00a0follow\u00a0the\u00a0name\u00a0with\u00a0a\u00a0short\u00a0sketch\u00a0of\u00a0the\u00a0refactoring.\u00a0This\u00a0helps\u00a0you\u00a0find\u00a0a\nrefactoring\u00a0more\u00a0quickly.\nThe\u00a0motivation\u00a0describes\u00a0why\u00a0the\u00a0refactoring\u00a0should\u00a0be\u00a0done\u00a0and\u00a0describes\ncircumstances\u00a0in\u00a0which\u00a0it\u00a0shouldn\u2019t\u00a0be\u00a0done.\nThe\u00a0mechanics\u00a0are\u00a0a\u00a0concise,\u00a0step\u00adby\u00adstep\u00a0description\u00a0of\u00a0how\u00a0to\u00a0carry\u00a0out\u00a0the\nrefactoring.\nThe\u00a0examples\u00a0show\u00a0a\u00a0very\u00a0simple\u00a0use\u00a0of\u00a0the\u00a0refactoring\u00a0to\u00a0illustrate\u00a0how\u00a0it\u00a0works.\nThe\u00a0sketch\u00a0shows\u00a0a\u00a0code\u00a0example\u00a0of\u00a0the\u00a0transformation\u00a0of\u00a0the\u00a0refactoring.\u00a0It\u2019s\u00a0not\nmeant\u00a0to\u00a0explain\u00a0what\u00a0the\u00a0refactoring\u00a0is,\u00a0let\u00a0alone\u00a0how\u00a0to\u00a0do\u00a0it,\u00a0but\u00a0it\u00a0should\u00a0remind\u00a0you\nwhat\u00a0the\u00a0refactoring\u00a0is\u00a0if\u00a0you\u2019ve\u00a0come\u00a0across\u00a0it\u00a0before.\u00a0If\u00a0not,\u00a0you\u2019ll\u00a0probably\u00a0need\u00a0to\nwork\u00a0through\u00a0the\u00a0example\u00a0to\u00a0get\u00a0a\u00a0better\u00a0idea.\u00a0I\u00a0also\u00a0include\u00a0a\u00a0small\u00a0graphic\u037e\u00a0again,\u00a0I\ndon\u2019t\u00a0intend\u00a0it\u00a0to\u00a0be\u00a0explanatory\u2014it\u2019s\u00a0more\u00a0of\u00a0a\u00a0graphic\u00a0memory\u00adjogger.\nHistory\nTopics\nTutorials\nOffers & Deals\nHighlights\nSettings\nSupport\nSign Out\n \n  \n \n  \n \n \n \n \n \n \ni\nwww.EBooksWorld.ir\n", "page": 118, "type": "text", "section": "Page 118"}
{"text": "The\u00a0mechanics\u00a0come\u00a0from\u00a0my\u00a0own\u00a0notes\u00a0to\u00a0remember\u00a0how\u00a0to\u00a0do\u00a0the\u00a0refactoring\u00a0when\u00a0I\nhaven\u2019t\u00a0done\u00a0it\u00a0for\u00a0a\u00a0while.\u00a0As\u00a0such,\u00a0they\u00a0are\u00a0somewhat\u00a0terse,\u00a0usually\u00a0without\nexplanations\u00a0of\u00a0why\u00a0the\u00a0steps\u00a0are\u00a0done\u00a0that\u00a0way.\u00a0I\u00a0give\u00a0a\u00a0more\u00a0expansive\u00a0explanation\u00a0in\nthe\u00a0example.\u00a0This\u00a0way,\u00a0the\u00a0mechanics\u00a0are\u00a0short\u00a0notes\u00a0you\u00a0can\u00a0refer\u00a0to\u00a0easily\u00a0when\u00a0you\nknow\u00a0the\u00a0refactoring\u00a0but\u00a0need\u00a0to\u00a0look\u00a0up\u00a0the\u00a0steps\u00a0(at\u00a0least\u00a0this\u00a0is\u00a0how\u00a0I\u00a0use\u00a0them).\nYou\u2019ll\u00a0probably\u00a0need\u00a0to\u00a0read\u00a0the\u00a0examples\u00a0when\u00a0you\u00a0first\u00a0do\u00a0the\u00a0refactoring.\nI\u2019ve\u00a0written\u00a0the\u00a0mechanics\u00a0in\u00a0such\u00a0a\u00a0way\u00a0that\u00a0each\u00a0step\u00a0of\u00a0each\u00a0refactoring\u00a0is\u00a0as\u00a0small\u00a0as\npossible.\u00a0I\u00a0emphasize\u00a0the\u00a0safe\u00a0way\u00a0of\u00a0doing\u00a0the\u00a0refactoring\u2014which\u00a0is\u00a0to\u00a0take\u00a0very\u00a0small\nsteps\u00a0and\u00a0test\u00a0after\u00a0every\u00a0one.\u00a0At\u00a0work,\u00a0I\u00a0usually\u00a0take\u00a0larger\u00a0steps\u00a0than\u00a0some\u00a0of\u00a0the\u00a0baby\nsteps\u00a0described,\u00a0but\u00a0if\u00a0I\u00a0run\u00a0into\u00a0a\u00a0bug,\u00a0I\u00a0back\u00a0out\u00a0the\u00a0last\u00a0step\u00a0and\u00a0take\u00a0the\u00a0smaller\nsteps.\u00a0The\u00a0steps\u00a0include\u00a0a\u00a0number\u00a0of\u00a0references\u00a0to\u00a0special\u00a0cases.\u00a0The\u00a0steps\u00a0thus\u00a0also\nfunction\u00a0as\u00a0a\u00a0checklist\u037e\u00a0I\u00a0often\u00a0forget\u00a0these\u00a0things\u00a0myself.\nAlthough\u00a0I\u00a0(with\u00a0few\u00a0exceptions)\u00a0only\u00a0list\u00a0one\u00a0set\u00a0of\u00a0mechanics,\u00a0they\u00a0aren\u2019t\u00a0the\u00a0only\u00a0way\nto\u00a0carry\u00a0out\u00a0the\u00a0refactoring.\u00a0I\u00a0selected\u00a0the\u00a0mechanics\u00a0in\u00a0the\u00a0book\u00a0because\u00a0they\u00a0work\npretty\u00a0well\u00a0most\u00a0of\u00a0the\u00a0time.\u00a0It\u2019s\u00a0likely\u00a0you\u2019ll\u00a0vary\u00a0them\u00a0as\u00a0you\u00a0get\u00a0more\u00a0practice\u00a0in\nrefactoring,\u00a0and\u00a0that\u2019s\u00a0fine.\u00a0Just\u00a0remember\u00a0that\u00a0the\u00a0key\u00a0is\u00a0to\u00a0take\u00a0small\u00a0steps\u2014and\u00a0the\ntrickier\u00a0the\u00a0situation,\u00a0the\u00a0smaller\u00a0the\u00a0steps.\nThe\u00a0examples\u00a0are\u00a0of\u00a0the\u00a0laughably\u00a0simple\u00a0textbook\u00a0kind.\u00a0My\u00a0aim\u00a0with\u00a0the\u00a0examples\u00a0is\nto\u00a0help\u00a0explain\u00a0the\u00a0basic\u00a0refactoring\u00a0with\u00a0minimal\u00a0distractions,\u00a0so\u00a0I\u00a0hope\u00a0you\u2019ll\u00a0forgive\nthe\u00a0simplicity.\u00a0(They\u00a0are\u00a0certainly\u00a0not\u00a0examples\u00a0of\u00a0good\u00a0business\u00a0modeling.)\u00a0I\u2019m\u00a0sure\nyou\u2019ll\u00a0be\u00a0able\u00a0to\u00a0apply\u00a0them\u00a0to\u00a0your\u00a0rather\u00a0more\u00a0complex\u00a0situations.\u00a0Some\u00a0very\u00a0simple\nrefactorings\u00a0don\u2019t\u00a0have\u00a0examples\u00a0because\u00a0I\u00a0didn\u2019t\u00a0think\u00a0an\u00a0example\u00a0would\u00a0add\u00a0much.\nIn\u00a0particular,\u00a0remember\u00a0that\u00a0the\u00a0examples\u00a0are\u00a0included\u00a0only\u00a0to\u00a0illustrate\u00a0the\u00a0one\nrefactoring\u00a0under\u00a0discussion.\u00a0In\u00a0most\u00a0cases,\u00a0there\u00a0are\u00a0still\u00a0problems\u00a0with\u00a0the\u00a0code\u00a0at\nthe\u00a0end\u2014but\u00a0fixing\u00a0these\u00a0problems\u00a0requires\u00a0other\u00a0refactorings.\u00a0In\u00a0a\u00a0few\u00a0cases\u00a0in\u00a0which\nrefactorings\u00a0often\u00a0go\u00a0together,\u00a0I\u00a0carry\u00a0examples\u00a0from\u00a0one\u00a0re\u00adfactoring\u00a0to\u00a0another.\u00a0In\nmost\u00a0cases,\u00a0I\u00a0leave\u00a0the\u00a0code\u00a0as\u00a0it\u00a0is\u00a0after\u00a0the\u00a0single\u00a0refactoring.\u00a0I\u00a0do\u00a0this\u00a0to\u00a0make\u00a0each\nrefactoring\u00a0self\u00adcontained,\u00a0because\u00a0the\u00a0primary\u00a0role\u00a0of\u00a0the\u00a0catalog\u00a0is\u00a0to\u00a0be\u00a0a\u00a0reference.\nI\u00a0use\u00a0color\u00a0to\u00a0highlight\u00a0changed\u00a0code\u00a0where\u00a0it\u00a0may\u00a0be\u00a0difficult\u00a0to\u00a0spot\u00a0among\u00a0code\u00a0that\nhas\u00a0not\u00a0been\u00a0changed.\u00a0I\u00a0do\u00a0not\u00a0use\u00a0highlighting\u00a0for\u00a0all\u00a0changed\u00a0code,\u00a0because\u00a0too\u00a0much\ndefeats\u00a0the\u00a0purpose.\nTHE CHOICE OF REFACTORINGS\nThis\u00a0is\u00a0by\u00a0no\u00a0means\u00a0a\u00a0complete\u00a0catalog\u00a0of\u00a0refactorings.\u00a0It\u00a0is,\u00a0I\u00a0hope,\u00a0a\u00a0collection\u00a0of\u00a0those\nmost\u00a0useful\u00a0to\u00a0have\u00a0them\u00a0written\u00a0down.\u00a0By\u00a0\u201cmost\u00a0useful\u201d\u00a0I\u00a0mean\u00a0those\u00a0that\u00a0are\u00a0both\nwww.EBooksWorld.ir\n", "page": 119, "type": "text", "section": "Page 119"}
{"text": "commonly\u00a0used\u00a0and\u00a0worthwhile\u00a0to\u00a0name\u00a0and\u00a0describe.\u00a0I\u00a0find\u00a0something\u00a0worthwhile\u00a0to\ndescribe\u00a0for\u00a0a\u00a0combination\u00a0of\u00a0reasons:\u00a0Some\u00a0have\u00a0interesting\u00a0mechanics\u00a0which\u00a0help\ngeneral\u00a0refactoring\u00a0skills,\u00a0some\u00a0have\u00a0a\u00a0strong\u00a0effect\u00a0on\u00a0improving\u00a0the\u00a0design\u00a0of\u00a0code.\nSome\u00a0refactorings\u00a0are\u00a0missing\u00a0because\u00a0they\u00a0are\u00a0so\u00a0small\u00a0and\u00a0straightforward\u00a0that\u00a0I\ndon\u2019t\u00a0feel\u00a0they\u00a0are\u00a0worth\u00a0writing\u00a0up.\u00a0An\u00a0example\u00a0in\u00a0the\u00a0first\u00a0edition\u00a0was\u00a0Slide\nStatements\u00a0(223)\u2014which\u00a0I\u00a0use\u00a0frequently\u00a0but\u00a0didn\u2019t\u00a0recognize\u00a0as\u00a0something\u00a0I\u00a0should\ninclude\u00a0in\u00a0the\u00a0catalog\u00a0(obviously,\u00a0I\u00a0changed\u00a0my\u00a0mind\u00a0for\u00a0this\u00a0edition).\u00a0These\u00a0may\u00a0well\nget\u00a0added\u00a0to\u00a0the\u00a0book\u00a0over\u00a0time,\u00a0depending\u00a0on\u00a0how\u00a0much\u00a0energy\u00a0I\u00a0devote\u00a0to\u00a0new\nrefactorings\u00a0in\u00a0the\u00a0future.\nAnother\u00a0category\u00a0is\u00a0refactorings\u00a0that\u00a0logically\u00a0exist,\u00a0but\u00a0either\u00a0aren\u2019t\u00a0used\u00a0much\u00a0by\u00a0me\nor\u00a0show\u00a0a\u00a0simple\u00a0similarity\u00a0to\u00a0other\u00a0refactorings.\u00a0Every\u00a0refactoring\u00a0in\u00a0this\u00a0book\u00a0has\u00a0a\nlogical\u00a0inverse\u00a0refactoring,\u00a0but\u00a0I\u00a0didn\u2019t\u00a0write\u00a0all\u00a0of\u00a0them\u00a0up\u00a0because\u00a0I\u00a0don\u2019t\u00a0find\u00a0many\ninverses\u00a0interesting.\u00a0Encapsulate\u00a0Variable\u00a0(132)\u00a0is\u00a0a\u00a0common\u00a0and\u00a0powerful\u00a0refactoring\nbut\u00a0its\u00a0inverse\u00a0is\u00a0something\u00a0I\u00a0hardly\u00a0ever\u00a0do\u00a0(and\u00a0it\u00a0is\u00a0easy\u00a0to\u00a0perform\u00a0anyway)\u00a0so\u00a0I\ndidn\u2019t\u00a0think\u00a0we\u00a0need\u00a0a\u00a0catalog\u00a0entry\u00a0for\u00a0it.\nwww.EBooksWorld.ir\n", "page": 120, "type": "text", "section": "Page 120"}
{"text": "Chapter 6\nA First Set of Refactorings\nI\u2019m\u00a0starting\u00a0the\u00a0catalog\u00a0with\u00a0a\u00a0set\u00a0of\u00a0refactorings\u00a0that\u00a0I\u00a0consider\u00a0the\u00a0most\u00a0useful\u00a0to\u00a0learn\nfirst.\nProbably\u00a0the\u00a0most\u00a0common\u00a0refactoring\u00a0I\u00a0do\u00a0is\u00a0extracting\u00a0code\u00a0into\u00a0a\u00a0function\u00a0(Extract\nFunction\u00a0(106))\u00a0or\u00a0a\u00a0variable\u00a0(Extract\u00a0Variable\u00a0(119)).\u00a0Since\u00a0refactoring\u00a0is\u00a0all\u00a0about\nchange,\u00a0it\u2019s\u00a0no\u00a0surprise\u00a0that\u00a0I\u00a0also\u00a0frequently\u00a0use\u00a0the\u00a0inverses\u00a0of\u00a0those\u00a0two\u00a0(Inline\nFunction\u00a0(115)\u00a0and\u00a0Inline\u00a0Variable\u00a0(123)).\nExtraction\u00a0is\u00a0all\u00a0about\u00a0giving\u00a0names,\u00a0and\u00a0I\u00a0often\u00a0need\u00a0to\u00a0change\u00a0the\u00a0names\u00a0as\u00a0I\u00a0learn.\nChange\u00a0Function\u00a0Declaration\u00a0(124)\u00a0changes\u00a0names\u00a0of\u00a0functions\u037e\u00a0I\u00a0also\u00a0use\u00a0that\nrefactoring\u00a0to\u00a0add\u00a0or\u00a0remove\u00a0a\u00a0function\u2019s\u00a0arguments.\u00a0For\u00a0variables,\u00a0I\u00a0use\u00a0Rename\nVariable\u00a0(137),\u00a0which\u00a0relies\u00a0on\u00a0Encapsulate\u00a0Variable\u00a0(132).\u00a0When\u00a0changing\u00a0function\narguments,\u00a0I\u00a0often\u00a0find\u00a0it\u00a0useful\u00a0to\u00a0combine\u00a0a\u00a0common\u00a0clump\u00a0of\u00a0arguments\u00a0into\u00a0a\nsingle\u00a0object\u00a0with\u00a0Introduce\u00a0Parameter\u00a0Object\u00a0(140).\nForming\u00a0and\u00a0naming\u00a0functions\u00a0are\u00a0essential\u00a0low\u00adlevel\u00a0refactorings\u2014but,\u00a0once\u00a0created,\nit\u2019s\u00a0necessary\u00a0to\u00a0group\u00a0functions\u00a0into\u00a0higher\u00adlevel\u00a0modules.\u00a0I\u00a0use\u00a0Combine\u00a0Functions\ninto\u00a0Class\u00a0(144)\u00a0to\u00a0group\u00a0functions,\u00a0together\u00a0with\u00a0the\u00a0data\u00a0they\u00a0operate\u00a0on,\u00a0into\u00a0a\u00a0class.\nAnother\u00a0path\u00a0I\u00a0take\u00a0is\u00a0to\u00a0combine\u00a0them\u00a0into\u00a0a\u00a0transform\u00a0(Combine\u00a0Functions\u00a0into\nTransform\u00a0(149)),\u00a0which\u00a0is\u00a0particularly\u00a0handy\u00a0with\u00a0read\u00adonly\u00a0data.\u00a0At\u00a0a\u00a0step\u00a0further\u00a0in\nscale,\u00a0I\u00a0can\u00a0often\u00a0form\u00a0these\u00a0modules\u00a0into\u00a0distinct\u00a0processing\u00a0phases\u00a0using\u00a0Split\u00a0Phase\n(154).\nEXTRACT FUNCTION\nformerly:\u00a0Extract\u00a0Method\n\u00a0\n\u00a0\n\u00a0\n\u00a0\nHistory\nTopics\nTutorials\nOffers & Deals\nHighlights\nSettings\nSupport\nSign Out\n \n  \n \n  \n \n \n \n \n \n \ninverse of: Inline Function (115)\nwww.EBooksWorld.ir\n", "page": 121, "type": "text", "section": "Page 121"}
{"text": "Motivation\nExtract\u00a0Function\u00a0is\u00a0one\u00a0of\u00a0the\u00a0most\u00a0common\u00a0refactorings\u00a0I\u00a0do.\u00a0(Here,\u00a0I\u00a0use\u00a0the\u00a0term\n\u201cfunction\u201d\u00a0but\u00a0the\u00a0same\u00a0is\u00a0true\u00a0for\u00a0a\u00a0method\u00a0in\u00a0an\u00a0object\u00adoriented\u00a0language,\u00a0or\u00a0any\u00a0kind\nof\u00a0procedure\u00a0or\u00a0subroutine.)\u00a0I\u00a0look\u00a0at\u00a0a\u00a0fragment\u00a0of\u00a0code,\u00a0understand\u00a0what\u00a0it\u00a0is\u00a0doing,\nthen\u00a0extract\u00a0it\u00a0into\u00a0its\u00a0own\u00a0function\u00a0named\u00a0after\u00a0its\u00a0purpose.\nDuring\u00a0my\u00a0career,\u00a0I\u2019ve\u00a0heard\u00a0many\u00a0arguments\u00a0about\u00a0when\u00a0to\u00a0enclose\u00a0code\u00a0in\u00a0its\u00a0own\nfunction.\u00a0Some\u00a0of\u00a0these\u00a0guidelines\u00a0were\u00a0based\u00a0on\u00a0length:\u00a0Functions\u00a0should\u00a0be\u00a0no\u00a0larger\nthan\u00a0fit\u00a0on\u00a0a\u00a0screen.\u00a0Some\u00a0were\u00a0based\u00a0on\u00a0reuse:\u00a0Any\u00a0code\u00a0used\u00a0more\u00a0than\u00a0once\u00a0should\nbe\u00a0put\u00a0in\u00a0its\u00a0own\u00a0function,\u00a0but\u00a0code\u00a0only\u00a0used\u00a0once\u00a0should\u00a0be\u00a0left\u00a0inline.\u00a0The\u00a0argument\nthat\u00a0makes\u00a0most\u00a0sense\u00a0to\u00a0me,\u00a0however,\u00a0is\u00a0the\u00a0separation\u00a0between\u00a0intention\u00a0and\nimplementation.\u00a0If\u00a0you\u00a0have\u00a0to\u00a0spend\u00a0effort\u00a0looking\u00a0at\u00a0a\u00a0fragment\u00a0of\u00a0code\u00a0and\u00a0figuring\nout\u00a0what\u00a0it\u2019s\u00a0doing,\u00a0then\u00a0you\u00a0should\u00a0extract\u00a0it\u00a0into\u00a0a\u00a0function\u00a0and\u00a0name\u00a0the\u00a0function\nafter\u00a0the\u00a0\u201cwhat.\u201d\u00a0Then,\u00a0when\u00a0you\u00a0read\u00a0it\u00a0again,\u00a0the\u00a0purpose\u00a0of\u00a0the\u00a0function\u00a0leaps\u00a0right\nout\u00a0at\u00a0you,\u00a0and\u00a0most\u00a0of\u00a0the\u00a0time\u00a0you\u00a0won\u2019t\u00a0need\u00a0to\u00a0care\u00a0about\u00a0how\u00a0the\u00a0function\u00a0fulfills\nits\u00a0purpose\u00a0(which\u00a0is\u00a0the\u00a0body\u00a0of\u00a0the\u00a0function).\nwww.EBooksWorld.ir\n", "page": 122, "type": "text", "section": "Page 122"}
{"text": "Once\u00a0I\u00a0accepted\u00a0this\u00a0principle,\u00a0I\u00a0developed\u00a0a\u00a0habit\u00a0of\u00a0writing\u00a0very\u00a0small\u00a0functions\u2014\ntypically,\u00a0only\u00a0a\u00a0few\u00a0lines\u00a0long.\u00a0To\u00a0me,\u00a0any\u00a0function\u00a0with\u00a0more\u00a0than\u00a0half\u00ada\u00addozen\u00a0lines\nof\u00a0code\u00a0starts\u00a0to\u00a0smell,\u00a0and\u00a0it\u2019s\u00a0not\u00a0unusual\u00a0for\u00a0me\u00a0to\u00a0have\u00a0functions\u00a0that\u00a0are\u00a0a\u00a0single\nline\u00a0of\u00a0code.\u00a0The\u00a0fact\u00a0that\u00a0size\u00a0isn\u2019t\u00a0important\u00a0was\u00a0brought\u00a0home\u00a0to\u00a0me\u00a0by\u00a0an\u00a0example\nthat\u00a0Kent\u00a0Beck\u00a0showed\u00a0me\u00a0from\u00a0the\u00a0original\u00a0Smalltalk\u00a0system.\u00a0Smalltalk\u00a0in\u00a0those\u00a0days\nran\u00a0on\u00a0black\u00adand\u00adwhite\u00a0systems.\u00a0If\u00a0you\u00a0wanted\u00a0to\u00a0highlight\u00a0some\u00a0text\u00a0or\u00a0graphics,\u00a0you\nwould\u00a0reverse\u00a0the\u00a0video.\u00a0Smalltalk\u2019s\u00a0graphics\u00a0class\u00a0had\u00a0a\u00a0method\u00a0for\u00a0this\u00a0called\nhighlight,\u00a0whose\u00a0implementation\u00a0was\u00a0just\u00a0a\u00a0call\u00a0to\u00a0the\u00a0method\u00a0reverse.\u00a0The\u00a0name\nof\u00a0the\u00a0method\u00a0was\u00a0longer\u00a0than\u00a0its\u00a0implementation\u2014but\u00a0that\u00a0didn\u2019t\u00a0matter\u00a0because\nthere\u00a0was\u00a0a\u00a0big\u00a0distance\u00a0between\u00a0the\u00a0intention\u00a0of\u00a0the\u00a0code\u00a0and\u00a0its\u00a0implementation.\nSome\u00a0people\u00a0are\u00a0concerned\u00a0about\u00a0short\u00a0functions\u00a0because\u00a0they\u00a0worry\u00a0about\u00a0the\nperformance\u00a0cost\u00a0of\u00a0a\u00a0function\u00a0call.\u00a0When\u00a0I\u00a0was\u00a0young,\u00a0that\u00a0was\u00a0occasionally\u00a0a\u00a0factor,\nbut\u00a0that\u2019s\u00a0very\u00a0rare\u00a0now.\u00a0Optimizing\u00a0compilers\u00a0often\u00a0work\u00a0better\u00a0with\u00a0shorter\u00a0functions\nwhich\u00a0can\u00a0be\u00a0cached\u00a0more\u00a0easily.\u00a0As\u00a0always,\u00a0follow\u00a0the\u00a0general\u00a0guidelines\u00a0on\nperformance\u00a0optimization.\nSmall\u00a0functions\u00a0like\u00a0this\u00a0only\u00a0work\u00a0if\u00a0the\u00a0names\u00a0are\u00a0good,\u00a0so\u00a0you\u00a0need\u00a0to\u00a0pay\u00a0good\nattention\u00a0to\u00a0naming.\u00a0This\u00a0takes\u00a0practice\u2014but\u00a0once\u00a0you\u00a0get\u00a0good\u00a0at\u00a0it,\u00a0this\u00a0approach\u00a0can\nmake\u00a0code\u00a0remarkably\u00a0self\u00addocumenting.\nOften,\u00a0I\u00a0see\u00a0fragments\u00a0of\u00a0code\u00a0in\u00a0a\u00a0larger\u00a0function\u00a0that\u00a0start\u00a0with\u00a0a\u00a0comment\u00a0to\u00a0say\u00a0what\nthey\u00a0do.\u00a0The\u00a0comment\u00a0is\u00a0often\u00a0a\u00a0good\u00a0hint\u00a0for\u00a0the\u00a0name\u00a0of\u00a0the\u00a0function\u00a0when\u00a0I\u00a0extract\nthat\u00a0fragment.\nMechanics\nCreate\u00a0a\u00a0new\u00a0function,\u00a0and\u00a0name\u00a0it\u00a0after\u00a0the\u00a0intent\u00a0of\u00a0the\u00a0function\u00a0(name\u00a0it\u00a0by\u00a0what\nit\u00a0does,\u00a0not\u00a0by\u00a0how\u00a0it\u00a0does\u00a0it).\nIf\u00a0the\u00a0code\u00a0I\u00a0want\u00a0to\u00a0extract\u00a0is\u00a0very\u00a0simple,\u00a0such\u00a0as\u00a0a\u00a0single\u00a0function\u00a0call,\u00a0I\u00a0still\nextract\u00a0it\u00a0if\u00a0the\u00a0name\u00a0of\u00a0the\u00a0new\u00a0function\u00a0will\u00a0reveal\u00a0the\u00a0intent\u00a0of\u00a0the\u00a0code\u00a0in\u00a0a\u00a0better\nway.\u00a0If\u00a0I\u00a0can\u2019t\u00a0come\u00a0up\u00a0with\u00a0a\u00a0more\u00a0meaningful\u00a0name,\u00a0that\u2019s\u00a0a\u00a0sign\u00a0that\u00a0I\u00a0shouldn\u2019t\nextract\u00a0the\u00a0code.\u00a0However,\u00a0I\u00a0don\u2019t\u00a0have\u00a0to\u00a0come\u00a0up\u00a0with\u00a0the\u00a0best\u00a0name\u00a0right\u00a0away\u037e\nsometimes\u00a0a\u00a0good\u00a0name\u00a0only\u00a0appears\u00a0as\u00a0I\u00a0work\u00a0with\u00a0the\u00a0extraction.\u00a0It\u2019s\u00a0OK\u00a0to\nextract\u00a0a\u00a0function,\u00a0try\u00a0to\u00a0work\u00a0with\u00a0it,\u00a0realize\u00a0it\u00a0isn\u2019t\u00a0helping,\u00a0and\u00a0then\u00a0inline\u00a0it\u00a0back\nagain.\u00a0As\u00a0long\u00a0as\u00a0I\u2019ve\u00a0learned\u00a0something,\u00a0my\u00a0time\u00a0wasn\u2019t\u00a0wasted.\nIf\u00a0the\u00a0language\u00a0supports\u00a0nested\u00a0functions,\u00a0nest\u00a0the\u00a0extracted\u00a0function\u00a0inside\u00a0the\nsource\u00a0function.\u00a0That\u00a0will\u00a0reduce\u00a0the\u00a0amount\u00a0of\u00a0out\u00adof\u00adscope\u00a0variables\u00a0to\u00a0deal\u00a0with\nafter\u00a0the\u00a0next\u00a0couple\u00a0of\u00a0steps.\u00a0I\u00a0can\u00a0always\u00a0use\u00a0Move\u00a0Function\u00a0(198)\u00a0later.\nwww.EBooksWorld.ir\n", "page": 123, "type": "text", "section": "Page 123"}
{"text": "Copy\u00a0the\u00a0extracted\u00a0code\u00a0from\u00a0the\u00a0source\u00a0function\u00a0into\u00a0the\u00a0new\u00a0target\u00a0function.\nScan\u00a0the\u00a0extracted\u00a0code\u00a0for\u00a0references\u00a0to\u00a0any\u00a0variables\u00a0that\u00a0are\u00a0local\u00a0in\u00a0scope\u00a0to\u00a0the\nsource\u00a0function\u00a0and\u00a0will\u00a0not\u00a0be\u00a0in\u00a0scope\u00a0for\u00a0the\u00a0extracted\u00a0function.\u00a0Pass\u00a0them\u00a0as\nparameters.\nIf\u00a0I\u00a0extract\u00a0into\u00a0a\u00a0nested\u00a0function\u00a0of\u00a0the\u00a0source\u00a0function,\u00a0I\u00a0don\u2019t\u00a0run\u00a0into\u00a0these\nproblems.\nUsually,\u00a0these\u00a0are\u00a0local\u00a0variables\u00a0and\u00a0parameters\u00a0to\u00a0the\u00a0function.\u00a0The\u00a0most\u00a0general\napproach\u00a0is\u00a0to\u00a0pass\u00a0all\u00a0such\u00a0parameters\u00a0in\u00a0as\u00a0arguments.\u00a0There\u00a0are\u00a0usually\u00a0no\ndifficulties\u00a0for\u00a0variables\u00a0that\u00a0are\u00a0used\u00a0but\u00a0not\u00a0assigned\u00a0to.\nIf\u00a0a\u00a0variable\u00a0is\u00a0only\u00a0used\u00a0inside\u00a0the\u00a0extracted\u00a0code\u00a0but\u00a0is\u00a0declared\u00a0outside,\u00a0move\u00a0the\ndeclaration\u00a0into\u00a0the\u00a0extracted\u00a0code.\nAny\u00a0variables\u00a0that\u00a0are\u00a0assigned\u00a0to\u00a0need\u00a0more\u00a0care\u00a0if\u00a0they\u00a0are\u00a0passed\u00a0by\u00a0value.\u00a0If\nthere\u2019s\u00a0only\u00a0one\u00a0of\u00a0them,\u00a0I\u00a0try\u00a0to\u00a0treat\u00a0the\u00a0extracted\u00a0code\u00a0as\u00a0a\u00a0query\u00a0and\u00a0assign\u00a0the\nresult\u00a0to\u00a0the\u00a0variable\u00a0concerned.\nSometimes,\u00a0I\u00a0find\u00a0that\u00a0too\u00a0many\u00a0local\u00a0variables\u00a0are\u00a0being\u00a0assigned\u00a0by\u00a0the\u00a0extracted\ncode.\u00a0It\u2019s\u00a0better\u00a0to\u00a0abandon\u00a0the\u00a0extraction\u00a0at\u00a0this\u00a0point.\u00a0When\u00a0this\u00a0happens,\u00a0I\nconsider\u00a0other\u00a0refactorings\u00a0such\u00a0as\u00a0Split\u00a0Variable\u00a0(240)\u00a0or\u00a0Replace\u00a0Temp\u00a0with\nQuery\u00a0(178)\u00a0to\u00a0simplify\u00a0variable\u00a0usage\u00a0and\u00a0revisit\u00a0the\u00a0extraction\u00a0later.\nCompile\u00a0after\u00a0all\u00a0variables\u00a0are\u00a0dealt\u00a0with.\nOnce\u00a0all\u00a0the\u00a0variables\u00a0are\u00a0dealt\u00a0with,\u00a0it\u00a0can\u00a0be\u00a0useful\u00a0to\u00a0compile\u00a0if\u00a0the\u00a0language\nenvironment\u00a0does\u00a0compile\u00adtime\u00a0checks.\u00a0Often,\u00a0this\u00a0will\u00a0help\u00a0find\u00a0any\u00a0variables\u00a0that\nhaven\u2019t\u00a0been\u00a0dealt\u00a0with\u00a0properly.\nReplace\u00a0the\u00a0extracted\u00a0code\u00a0in\u00a0the\u00a0source\u00a0function\u00a0with\u00a0a\u00a0call\u00a0to\u00a0the\u00a0target\u00a0function.\nTest.\nLook\u00a0for\u00a0other\u00a0code\u00a0that\u2019s\u00a0the\u00a0same\u00a0or\u00a0similar\u00a0to\u00a0the\u00a0code\u00a0just\u00a0extracted,\u00a0and\nconsider\u00a0using\u00a0Replace\u00a0Inline\u00a0Code\u00a0with\u00a0Function\u00a0Call\u00a0(222)\u00a0to\u00a0call\u00a0the\u00a0new\nfunction.\nSome\u00a0refactoring\u00a0tools\u00a0support\u00a0this\u00a0directly.\u00a0Otherwise,\u00a0it\u00a0can\u00a0be\u00a0worth\u00a0doing\u00a0some\nquick\u00a0searches\u00a0to\u00a0see\u00a0if\u00a0duplicate\u00a0code\u00a0exists\u00a0elsewhere.\nExample: No Variables Out of Scope\nwww.EBooksWorld.ir\n", "page": 124, "type": "text", "section": "Page 124"}
{"text": "Example: No Variables Out of Scope\nIn\u00a0the\u00a0simplest\u00a0case,\u00a0Extract\u00a0Function\u00a0is\u00a0trivially\u00a0easy.\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0printOwing(invoice)\u00a0{\n\u00a0\u00a0let\u00a0outstanding\u00a0=\u00a00\u037e\n\u00a0\u00a0console.log(\"***********************\")\u037e\n\u00a0\u00a0console.log(\"****\u00a0Customer\u00a0Owes\u00a0****\")\u037e\n\u00a0\u00a0console.log(\"***********************\")\u037e\n\u00a0\u00a0//\u00a0calculate\u00a0outstanding\n\u00a0\u00a0for\u00a0(const\u00a0o\u00a0of\u00a0invoice.orders)\u00a0{\n\u00a0\u00a0\u00a0\u00a0outstanding\u00a0+=\u00a0o.amount\u037e\n\u00a0\u00a0}\n\u00a0\u00a0//\u00a0record\u00a0due\u00a0date\n\u00a0\u00a0const\u00a0today\u00a0=\u00a0Clock.today\u037e\n\u00a0\u00a0invoice.dueDate\u00a0=\u00a0new\u00a0Date(today.getFullYear(),\u00a0today.getMonth(),\u00a0today.getDat\n\u00a0\u00a0//print\u00a0details\n\u00a0\u00a0console.log(`name:\u00a0${invoice.customer}`)\u037e\n\u00a0\u00a0console.log(`amount:\u00a0${outstanding}`)\u037e\n\u00a0\u00a0console.log(`due:\u00a0${invoice.dueDate.toLocaleDateString()}`)\u037e\n}\nYou\u00a0may\u00a0be\u00a0wondering\u00a0what\u00a0the\u00a0Clock.today\u00a0is\u00a0about.\u00a0It\u00a0is\u00a0a\u00a0Clock\u00a0Wrapper\u00a0[mf\u00ad\ncw]\u2014an\u00a0object\u00a0that\u00a0wraps\u00a0calls\u00a0to\u00a0the\u00a0system\u00a0clock.\u00a0I\u00a0avoid\u00a0putting\u00a0direct\u00a0calls\u00a0to\nthings\u00a0like\u00a0Date.now()\u00a0in\u00a0my\u00a0code,\u00a0because\u00a0it\u00a0leads\u00a0to\u00a0nondeterministic\u00a0tests\u00a0and\nmakes\u00a0it\u00a0difficult\u00a0to\u00a0reproduce\u00a0error\u00a0conditions\u00a0when\u00a0diagnosing\u00a0failures.\nIt\u2019s\u00a0easy\u00a0to\u00a0extract\u00a0the\u00a0code\u00a0that\u00a0prints\u00a0the\u00a0banner.\u00a0I\u00a0just\u00a0cut,\u00a0paste,\u00a0and\u00a0put\u00a0in\u00a0a\u00a0call:\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0printOwing(invoice)\u00a0{\n\u00a0\u00a0let\u00a0outstanding\u00a0=\u00a00\u037e\n\u00a0\u00a0printBanner()\u037e\n\u00a0\u00a0//\u00a0calculate\u00a0outstanding\n\u00a0\u00a0for\u00a0(const\u00a0o\u00a0of\u00a0invoice.orders)\u00a0{\n\u00a0\u00a0\u00a0\u00a0outstanding\u00a0+=\u00a0o.amount\u037e\n\u00a0\u00a0}\nwww.EBooksWorld.ir\n", "page": 125, "type": "text", "section": "Page 125"}
{"text": "\u00a0\u00a0//\u00a0record\u00a0due\u00a0date\n\u00a0\u00a0const\u00a0today\u00a0=\u00a0Clock.today\u037e\n\u00a0\u00a0invoice.dueDate\u00a0=\u00a0new\u00a0Date(today.getFullYear(),\u00a0today.getMonth(),\u00a0today.getDat\n\u00a0\u00a0//print\u00a0details\n\u00a0\u00a0console.log(`name:\u00a0${invoice.customer}`)\u037e\n\u00a0\u00a0console.log(`amount:\u00a0${outstanding}`)\u037e\n\u00a0\u00a0console.log(`due:\u00a0${invoice.dueDate.toLocaleDateString()}`)\u037e\n}\nfunction\u00a0printBanner()\u00a0{\n\u00a0\u00a0console.log(\"***********************\")\u037e\n\u00a0\u00a0console.log(\"****\u00a0Customer\u00a0Owes\u00a0****\")\u037e\n\u00a0\u00a0console.log(\"***********************\")\u037e\n}\nSimilarly,\u00a0I\u00a0can\u00a0take\u00a0the\u00a0printing\u00a0of\u00a0details\u00a0and\u00a0extract\u00a0that\u00a0too:\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0printOwing(invoice)\u00a0{\n\u00a0\u00a0let\u00a0outstanding\u00a0=\u00a00\u037e\n\u00a0\u00a0printBanner()\u037e\n\u00a0\u00a0//\u00a0calculate\u00a0outstanding\n\u00a0\u00a0for\u00a0(const\u00a0o\u00a0of\u00a0invoice.orders)\u00a0{\n\u00a0\u00a0\u00a0\u00a0outstanding\u00a0+=\u00a0o.amount\u037e\n\u00a0\u00a0}\n\u00a0\u00a0//\u00a0record\u00a0due\u00a0date\n\u00a0\u00a0const\u00a0today\u00a0=\u00a0Clock.today\u037e\n\u00a0\u00a0invoice.dueDate\u00a0=\u00a0new\u00a0Date(today.getFullYear(),\u00a0today.getMonth(),\u00a0today.getDat\n\u00a0\u00a0printDetails()\u037e\n\u00a0\u00a0function\u00a0printDetails()\u00a0{\n\u00a0\u00a0\u00a0\u00a0console.log(`name:\u00a0${invoice.customer}`)\u037e\n\u00a0\u00a0\u00a0\u00a0console.log(`amount:\u00a0${outstanding}`)\u037e\n\u00a0\u00a0\u00a0\u00a0console.log(`due:\u00a0${invoice.dueDate.toLocaleDateString()}`)\u037e\n\u00a0\u00a0}\nThis\u00a0makes\u00a0Extract\u00a0Function\u00a0seem\u00a0like\u00a0a\u00a0trivially\u00a0easy\u00a0refactoring.\u00a0But\u00a0in\u00a0many\nsituations,\u00a0it\u00a0turns\u00a0out\u00a0to\u00a0be\u00a0rather\u00a0more\u00a0tricky.\nIn\u00a0the\u00a0case\u00a0above,\u00a0I\u00a0defined\u00a0printDetails\u00a0so\u00a0it\u00a0was\u00a0nested\u00a0inside\u00a0printOwing.\u00a0That\nway\u00a0it\u00a0was\u00a0able\u00a0to\u00a0access\u00a0all\u00a0the\u00a0variables\u00a0defined\u00a0in\u00a0printOwing.\u00a0But\u00a0that\u2019s\u00a0not\u00a0an\noption\u00a0to\u00a0me\u00a0if\u00a0I\u2019m\u00a0programming\u00a0in\u00a0a\u00a0language\u00a0that\u00a0doesn\u2019t\u00a0allow\u00a0nested\u00a0functions.\nwww.EBooksWorld.ir\n", "page": 126, "type": "text", "section": "Page 126"}
{"text": "Then\u00a0I\u2019m\u00a0faced,\u00a0essentially,\u00a0with\u00a0the\u00a0problem\u00a0of\u00a0extracting\u00a0the\u00a0function\u00a0to\u00a0the\u00a0top\u00a0level,\nwhich\u00a0means\u00a0I\u00a0have\u00a0to\u00a0pay\u00a0attention\u00a0to\u00a0any\u00a0variables\u00a0that\u00a0exist\u00a0only\u00a0in\u00a0the\u00a0scope\u00a0of\u00a0the\nsource\u00a0function.\u00a0These\u00a0are\u00a0the\u00a0arguments\u00a0to\u00a0the\u00a0original\u00a0function\u00a0and\u00a0the\u00a0temporary\nvariables\u00a0defined\u00a0in\u00a0the\u00a0function.\nExample: Using Local Variables\nThe\u00a0easiest\u00a0case\u00a0with\u00a0local\u00a0variables\u00a0is\u00a0when\u00a0they\u00a0are\u00a0used\u00a0but\u00a0not\u00a0reassigned.\u00a0In\u00a0this\ncase,\u00a0I\u00a0can\u00a0just\u00a0pass\u00a0them\u00a0in\u00a0as\u00a0parameters.\u00a0So\u00a0if\u00a0I\u00a0have\u00a0the\u00a0following\u00a0function:\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0printOwing(invoice)\u00a0{\n\u00a0\u00a0let\u00a0outstanding\u00a0=\u00a00\u037e\n\u00a0\u00a0printBanner()\u037e\n\u00a0\u00a0//\u00a0calculate\u00a0outstanding\n\u00a0\u00a0for\u00a0(const\u00a0o\u00a0of\u00a0invoice.orders)\u00a0{\n\u00a0\u00a0\u00a0\u00a0outstanding\u00a0+=\u00a0o.amount\u037e\n\u00a0\u00a0}\n\u00a0\u00a0//\u00a0record\u00a0due\u00a0date\n\u00a0\u00a0const\u00a0today\u00a0=\u00a0Clock.today\u037e\n\u00a0\u00a0invoice.dueDate\u00a0=\u00a0new\u00a0Date(today.getFullYear(),\u00a0today.getMonth(),\u00a0today.getDat\n\u00a0\u00a0//print\u00a0details\n\u00a0\u00a0console.log(`name:\u00a0${invoice.customer}`)\u037e\n\u00a0\u00a0console.log(`amount:\u00a0${outstanding}`)\u037e\n\u00a0\u00a0console.log(`due:\u00a0${invoice.dueDate.toLocaleDateString()}`)\u037e\n}\nI\u00a0can\u00a0extract\u00a0the\u00a0printing\u00a0of\u00a0details\u00a0passing\u00a0two\u00a0parameters:\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0printOwing(invoice)\u00a0{\n\u00a0\u00a0let\u00a0outstanding\u00a0=\u00a00\u037e\n\u00a0\u00a0printBanner()\u037e\n\u00a0\u00a0//\u00a0calculate\u00a0outstanding\n\u00a0\u00a0for\u00a0(const\u00a0o\u00a0of\u00a0invoice.orders)\u00a0{\n\u00a0\u00a0\u00a0\u00a0outstanding\u00a0+=\u00a0o.amount\u037e\n\u00a0\u00a0}\n\u00a0\u00a0//\u00a0record\u00a0due\u00a0date\nwww.EBooksWorld.ir\n", "page": 127, "type": "text", "section": "Page 127"}
{"text": "\u00a0\u00a0const\u00a0today\u00a0=\u00a0Clock.today\u037e\n\u00a0\u00a0invoice.dueDate\u00a0=\u00a0new\u00a0Date(today.getFullYear(),\u00a0today.getMonth(),\u00a0today.getDat\n\u00a0\u00a0printDetails(invoice,\u00a0outstanding)\u037e\n}\nfunction\u00a0printDetails(invoice,\u00a0outstanding)\u00a0{\n\u00a0\u00a0console.log(`name:\u00a0${invoice.customer}`)\u037e\n\u00a0\u00a0console.log(`amount:\u00a0${outstanding}`)\u037e\n\u00a0\u00a0console.log(`due:\u00a0${invoice.dueDate.toLocaleDateString()}`)\u037e\n}\nThe\u00a0same\u00a0is\u00a0true\u00a0if\u00a0the\u00a0local\u00a0variable\u00a0is\u00a0a\u00a0structure\u00a0(such\u00a0as\u00a0an\u00a0array,\u00a0record,\u00a0or\u00a0object)\nand\u00a0I\u00a0modify\u00a0that\u00a0structure.\u00a0So,\u00a0I\u00a0can\u00a0similarly\u00a0extract\u00a0the\u00a0setting\u00a0of\u00a0the\u00a0due\u00a0date:\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0printOwing(invoice)\u00a0{\n\u00a0\u00a0let\u00a0outstanding\u00a0=\u00a00\u037e\n\u00a0\u00a0printBanner()\u037e\n\u00a0\u00a0//\u00a0calculate\u00a0outstanding\n\u00a0\u00a0for\u00a0(const\u00a0o\u00a0of\u00a0invoice.orders)\u00a0{\n\u00a0\u00a0\u00a0\u00a0outstanding\u00a0+=\u00a0o.amount\u037e\n\u00a0\u00a0}\n\u00a0\u00a0recordDueDate(invoice)\u037e\n\u00a0\u00a0printDetails(invoice,\u00a0outstanding)\u037e\n}\nfunction\u00a0recordDueDate(invoice)\u00a0{\n\u00a0\u00a0const\u00a0today\u00a0=\u00a0Clock.today\u037e\n\u00a0\u00a0invoice.dueDate\u00a0=\u00a0new\u00a0Date(today.getFullYear(),\u00a0today.getMonth(),\u00a0today.getDat\n}\nExample: Reassigning a Local Variable\nIt\u2019s\u00a0the\u00a0assignment\u00a0to\u00a0local\u00a0variables\u00a0that\u00a0becomes\u00a0complicated.\u00a0In\u00a0this\u00a0case,\u00a0we\u2019re\u00a0only\ntalking\u00a0about\u00a0temps.\u00a0If\u00a0I\u00a0see\u00a0an\u00a0assignment\u00a0to\u00a0a\u00a0parameter,\u00a0I\u00a0immediately\u00a0use\u00a0Split\nVariable\u00a0(240),\u00a0which\u00a0turns\u00a0it\u00a0into\u00a0a\u00a0temp.\nFor\u00a0temps\u00a0that\u00a0are\u00a0assigned\u00a0to,\u00a0there\u00a0are\u00a0two\u00a0cases.\u00a0The\u00a0simpler\u00a0case\u00a0is\u00a0where\u00a0the\nvariable\u00a0is\u00a0a\u00a0temporary\u00a0variable\u00a0used\u00a0only\u00a0within\u00a0the\u00a0extracted\u00a0code.\u00a0When\u00a0that\nhappens,\u00a0the\u00a0variable\u00a0just\u00a0exists\u00a0within\u00a0the\u00a0extracted\u00a0code.\u00a0Sometimes,\u00a0particularly\nwhen\u00a0variables\u00a0are\u00a0initialized\u00a0at\u00a0some\u00a0distance\u00a0before\u00a0they\u00a0are\u00a0used,\u00a0it\u2019s\u00a0handy\u00a0to\u00a0use\nSlide\u00a0Statements\u00a0(223)\u00a0to\u00a0get\u00a0all\u00a0the\u00a0variable\u00a0manipulation\u00a0together.\nwww.EBooksWorld.ir\n", "page": 128, "type": "text", "section": "Page 128"}
{"text": "The\u00a0more\u00a0awkward\u00a0case\u00a0is\u00a0where\u00a0the\u00a0variable\u00a0is\u00a0used\u00a0outside\u00a0the\u00a0extracted\u00a0function.\u00a0In\nthat\u00a0case,\u00a0I\u00a0need\u00a0to\u00a0return\u00a0the\u00a0new\u00a0value.\u00a0I\u00a0can\u00a0illustrate\u00a0this\u00a0with\u00a0the\u00a0following\nfamiliar\u00adlooking\u00a0function:\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0printOwing(invoice)\u00a0{\n\u00a0\u00a0let\u00a0outstanding\u00a0=\u00a00\u037e\n\u00a0\u00a0printBanner()\u037e\n\u00a0\u00a0//\u00a0calculate\u00a0outstanding\n\u00a0\u00a0for\u00a0(const\u00a0o\u00a0of\u00a0invoice.orders)\u00a0{\n\u00a0\u00a0\u00a0\u00a0outstanding\u00a0+=\u00a0o.amount\u037e\n\u00a0\u00a0}\n\u00a0\u00a0recordDueDate(invoice)\u037e\n\u00a0\u00a0printDetails(invoice,\u00a0outstanding)\u037e\n}\nI\u2019ve\u00a0shown\u00a0the\u00a0previous\u00a0refactorings\u00a0all\u00a0in\u00a0one\u00a0step,\u00a0since\u00a0they\u00a0were\u00a0straightforward,\nbut\u00a0this\u00a0time\u00a0I\u2019ll\u00a0take\u00a0it\u00a0one\u00a0step\u00a0at\u00a0a\u00a0time\u00a0from\u00a0the\u00a0mechanics.\nFirst,\u00a0I\u2019ll\u00a0slide\u00a0the\u00a0declaration\u00a0next\u00a0to\u00a0its\u00a0use.\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0printOwing(invoice)\u00a0{\n\u00a0\u00a0printBanner()\u037e\n\u00a0\u00a0//\u00a0calculate\u00a0outstanding\n\u00a0\u00a0let\u00a0outstanding\u00a0=\u00a00\u037e\n\u00a0\u00a0for\u00a0(const\u00a0o\u00a0of\u00a0invoice.orders)\u00a0{\n\u00a0\u00a0\u00a0\u00a0outstanding\u00a0+=\u00a0o.amount\u037e\n\u00a0\u00a0}\n\u00a0\u00a0recordDueDate(invoice)\u037e\n\u00a0\u00a0printDetails(invoice,\u00a0outstanding)\u037e\n}\nI\u00a0then\u00a0copy\u00a0the\u00a0code\u00a0I\u00a0want\u00a0to\u00a0extract\u00a0into\u00a0a\u00a0target\u00a0function.\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0printOwing(invoice)\u00a0{\n\u00a0\u00a0printBanner()\u037e\nwww.EBooksWorld.ir\n", "page": 129, "type": "text", "section": "Page 129"}
{"text": "\u00a0\u00a0//\u00a0calculate\u00a0outstanding\n\u00a0\u00a0let\u00a0outstanding\u00a0=\u00a00\u037e\n\u00a0\u00a0for\u00a0(const\u00a0o\u00a0of\u00a0invoice.orders)\u00a0{\n\u00a0\u00a0\u00a0\u00a0outstanding\u00a0+=\u00a0o.amount\u037e\n\u00a0\u00a0}\n\u00a0\u00a0recordDueDate(invoice)\u037e\n\u00a0\u00a0printDetails(invoice,\u00a0outstanding)\u037e\n}\nfunction\u00a0calculateOutstanding(invoice)\u00a0{\n\u00a0\u00a0let\u00a0outstanding\u00a0=\u00a00\u037e\n\u00a0\u00a0for\u00a0(const\u00a0o\u00a0of\u00a0invoice.orders)\u00a0{\n\u00a0\u00a0\u00a0\u00a0outstanding\u00a0+=\u00a0o.amount\u037e\n\u00a0\u00a0}\n\u00a0\u00a0return\u00a0outstanding\u037e\n}\nSince\u00a0I\u00a0moved\u00a0the\u00a0declaration\u00a0of\u00a0outstanding\u00a0into\u00a0the\u00a0extracted\u00a0code,\u00a0I\u00a0don\u2019t\u00a0need\u00a0to\npass\u00a0it\u00a0in\u00a0as\u00a0a\u00a0parameter.\u00a0The\u00a0outstanding\u00a0variable\u00a0is\u00a0the\u00a0only\u00a0one\u00a0reassigned\u00a0in\u00a0the\nextracted\u00a0code,\u00a0so\u00a0I\u00a0can\u00a0return\u00a0it.\nMy\u00a0JavaScript\u00a0environment\u00a0doesn\u2019t\u00a0yield\u00a0any\u00a0value\u00a0by\u00a0compiling\u2014indeed\u00a0less\u00a0than\u00a0I\u2019m\ngetting\u00a0from\u00a0the\u00a0syntax\u00a0analysis\u00a0in\u00a0my\u00a0editor\u2014so\u00a0there\u2019s\u00a0no\u00a0step\u00a0to\u00a0do\u00a0here.\u00a0My\u00a0next\nthing\u00a0to\u00a0do\u00a0is\u00a0to\u00a0replace\u00a0the\u00a0original\u00a0code\u00a0with\u00a0a\u00a0call\u00a0to\u00a0the\u00a0new\u00a0function.\u00a0Since\u00a0I\u2019m\nreturning\u00a0the\u00a0value,\u00a0I\u00a0need\u00a0to\u00a0store\u00a0it\u00a0in\u00a0the\u00a0original\u00a0variable.\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0printOwing(invoice)\u00a0{\n\u00a0\u00a0printBanner()\u037e\n\u00a0\u00a0let\u00a0outstanding\u00a0=\u00a0calculateOutstanding(invoice)\u037e\n\u00a0\u00a0recordDueDate(invoice)\u037e\n\u00a0\u00a0printDetails(invoice,\u00a0outstanding)\u037e\n}\nfunction\u00a0calculateOutstanding(invoice)\u00a0{\n\u00a0\u00a0let\u00a0outstanding\u00a0=\u00a00\u037e\n\u00a0\u00a0for\u00a0(const\u00a0o\u00a0of\u00a0invoice.orders)\u00a0{\n\u00a0\u00a0\u00a0\u00a0outstanding\u00a0+=\u00a0o.amount\u037e\n\u00a0\u00a0}\n\u00a0\u00a0return\u00a0outstanding\u037e\n}\nBefore\u00a0I\u00a0consider\u00a0myself\u00a0done,\u00a0I\u00a0rename\u00a0the\u00a0return\u00a0value\u00a0to\u00a0follow\u00a0my\u00a0usual\u00a0coding\nstyle.\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nwww.EBooksWorld.ir\n", "page": 130, "type": "text", "section": "Page 130"}
{"text": "function\u00a0printOwing(invoice)\u00a0{\n\u00a0\u00a0printBanner()\u037e\n\u00a0\u00a0const\u00a0outstanding\u00a0=\u00a0calculateOutstanding(invoice)\u037e\n\u00a0\u00a0recordDueDate(invoice)\u037e\n\u00a0\u00a0printDetails(invoice,\u00a0outstanding)\u037e\n}\nfunction\u00a0calculateOutstanding(invoice)\u00a0{\n\u00a0\u00a0let\u00a0result\u00a0=\u00a00\u037e\n\u00a0\u00a0for\u00a0(const\u00a0o\u00a0of\u00a0invoice.orders)\u00a0{\n\u00a0\u00a0\u00a0\u00a0result\u00a0+=\u00a0o.amount\u037e\n\u00a0\u00a0}\n\u00a0\u00a0return\u00a0result\u037e\n}\nI\u00a0also\u00a0take\u00a0the\u00a0opportunity\u00a0to\u00a0change\u00a0the\u00a0original\u00a0outstanding\u00a0into\u00a0a\u00a0const.\nAt\u00a0this\u00a0point\u00a0you\u00a0may\u00a0be\u00a0wondering,\u00a0\u201cWhat\u00a0happens\u00a0if\u00a0more\u00a0than\u00a0one\u00a0variable\u00a0needs\u00a0to\nbe\u00a0returned?\u201d\nHere,\u00a0I\u00a0have\u00a0several\u00a0options.\u00a0Usually\u00a0I\u00a0prefer\u00a0to\u00a0pick\u00a0different\u00a0code\u00a0to\u00a0extract.\u00a0I\u00a0like\u00a0a\nfunction\u00a0to\u00a0return\u00a0one\u00a0value,\u00a0so\u00a0I\u00a0would\u00a0try\u00a0to\u00a0arrange\u00a0for\u00a0multiple\u00a0functions\u00a0for\u00a0the\ndifferent\u00a0values.\u00a0If\u00a0I\u00a0really\u00a0need\u00a0to\u00a0extract\u00a0with\u00a0multiple\u00a0values,\u00a0I\u00a0can\u00a0form\u00a0a\u00a0record\u00a0and\nreturn\u00a0that\u2014but\u00a0usually\u00a0I\u00a0find\u00a0it\u00a0better\u00a0to\u00a0rework\u00a0the\u00a0temporary\u00a0variables\u00a0instead.\u00a0Here\nI\u00a0like\u00a0using\u00a0Replace\u00a0Temp\u00a0with\u00a0Query\u00a0(178)\u00a0and\u00a0Split\u00a0Variable\u00a0(240).\nThis\u00a0raises\u00a0an\u00a0interesting\u00a0question\u00a0when\u00a0I\u2019m\u00a0extracting\u00a0functions\u00a0that\u00a0I\u00a0expect\u00a0to\u00a0then\nmove\u00a0to\u00a0another\u00a0context,\u00a0such\u00a0as\u00a0top\u00a0level.\u00a0I\u00a0prefer\u00a0small\u00a0steps,\u00a0so\u00a0my\u00a0instinct\u00a0is\u00a0to\nextract\u00a0into\u00a0a\u00a0nested\u00a0function\u00a0first,\u00a0then\u00a0move\u00a0that\u00a0nested\u00a0function\u00a0to\u00a0its\u00a0new\u00a0context.\nBut\u00a0the\u00a0tricky\u00a0part\u00a0of\u00a0this\u00a0is\u00a0dealing\u00a0with\u00a0variables\u00a0and\u00a0I\u00a0don\u2019t\u00a0expose\u00a0that\u00a0difficulty\nuntil\u00a0I\u00a0do\u00a0the\u00a0move.\u00a0This\u00a0argues\u00a0that\u00a0even\u00a0though\u00a0I\u00a0can\u00a0extract\u00a0into\u00a0a\u00a0nested\u00a0function,\u00a0it\nmakes\u00a0sense\u00a0to\u00a0extract\u00a0to\u00a0at\u00a0least\u00a0the\u00a0sibling\u00a0level\u00a0of\u00a0the\u00a0source\u00a0function\u00a0first,\u00a0so\u00a0I\u00a0can\nimmediately\u00a0tell\u00a0if\u00a0the\u00a0extracted\u00a0code\u00a0makes\u00a0sense.\nINLINE FUNCTION\nformerly:\u00a0Inline\u00a0Method\ninverse\u00a0of:\u00a0Extract\u00a0Function\u00a0(106)\nwww.EBooksWorld.ir\n", "page": 131, "type": "text", "section": "Page 131"}
{"text": "Motivation\nOne\u00a0of\u00a0the\u00a0themes\u00a0of\u00a0this\u00a0book\u00a0is\u00a0using\u00a0short\u00a0functions\u00a0named\u00a0to\u00a0show\u00a0their\u00a0intent,\nbecause\u00a0these\u00a0functions\u00a0lead\u00a0to\u00a0clearer\u00a0and\u00a0easier\u00a0to\u00a0read\u00a0code.\u00a0But\u00a0sometimes,\u00a0I\u00a0do\ncome\u00a0across\u00a0a\u00a0function\u00a0in\u00a0which\u00a0the\u00a0body\u00a0is\u00a0as\u00a0clear\u00a0as\u00a0the\u00a0name.\u00a0Or,\u00a0I\u00a0refactor\u00a0the\u00a0body\nof\u00a0the\u00a0code\u00a0into\u00a0something\u00a0that\u00a0is\u00a0just\u00a0as\u00a0clear\u00a0as\u00a0the\u00a0name.\u00a0When\u00a0this\u00a0happens,\u00a0I\u00a0get\u00a0rid\nof\u00a0the\u00a0function.\u00a0Indirection\u00a0can\u00a0be\u00a0helpful,\u00a0but\u00a0needless\u00a0indirection\u00a0is\u00a0irritating.\nI\u00a0also\u00a0use\u00a0Inline\u00a0Function\u00a0is\u00a0when\u00a0I\u00a0have\u00a0a\u00a0group\u00a0of\u00a0functions\u00a0that\u00a0seem\u00a0badly\u00a0factored.\nI\u00a0can\u00a0inline\u00a0them\u00a0all\u00a0into\u00a0one\u00a0big\u00a0function\u00a0and\u00a0then\u00a0reextract\u00a0the\u00a0functions\u00a0the\u00a0way\u00a0I\nprefer.\nI\u00a0commonly\u00a0use\u00a0Inline\u00a0Function\u00a0when\u00a0I\u00a0see\u00a0code\u00a0that\u2019s\u00a0using\u00a0too\u00a0much\u00a0indirection\u2014\nwhen\u00a0it\u00a0seems\u00a0that\u00a0every\u00a0function\u00a0does\u00a0simple\u00a0delegation\u00a0to\u00a0another\u00a0function,\u00a0and\u00a0I\u00a0get\nlost\u00a0in\u00a0all\u00a0the\u00a0delegation.\u00a0Some\u00a0of\u00a0this\u00a0indirection\u00a0may\u00a0be\u00a0worthwhile,\u00a0but\u00a0not\u00a0all\u00a0of\u00a0it.\nBy\u00a0inlining,\u00a0I\u00a0can\u00a0flush\u00a0out\u00a0the\u00a0useful\u00a0ones\u00a0and\u00a0eliminate\u00a0the\u00a0rest.\nMechanics\nCheck\u00a0that\u00a0this\u00a0isn\u2019t\u00a0a\u00a0polymorphic\u00a0method.\nIf\u00a0this\u00a0is\u00a0a\u00a0method\u00a0in\u00a0a\u00a0class,\u00a0and\u00a0has\u00a0subclasses\u00a0that\u00a0override\u00a0it,\u00a0then\u00a0I\u00a0can\u2019t\u00a0inline\nit.\nwww.EBooksWorld.ir\n", "page": 132, "type": "text", "section": "Page 132"}
{"text": "Find\u00a0all\u00a0the\u00a0callers\u00a0of\u00a0the\u00a0function.\nReplace\u00a0each\u00a0call\u00a0with\u00a0the\u00a0function\u2019s\u00a0body.\nTest\u00a0after\u00a0each\u00a0replacement.\nThe\u00a0entire\u00a0inlining\u00a0doesn\u2019t\u00a0have\u00a0to\u00a0be\u00a0done\u00a0all\u00a0at\u00a0once.\u00a0If\u00a0some\u00a0parts\u00a0of\u00a0the\u00a0inline\u00a0are\ntricky,\u00a0they\u00a0can\u00a0be\u00a0done\u00a0gradually\u00a0as\u00a0opportunity\u00a0permits.\nRemove\u00a0the\u00a0function\u00a0definition.\nWritten\u00a0this\u00a0way,\u00a0Inline\u00a0Function\u00a0is\u00a0simple.\u00a0In\u00a0general,\u00a0it\u00a0isn\u2019t.\u00a0I\u00a0could\u00a0write\u00a0pages\u00a0on\nhow\u00a0to\u00a0handle\u00a0recursion,\u00a0multiple\u00a0return\u00a0points,\u00a0inlining\u00a0a\u00a0method\u00a0into\u00a0another\u00a0object\nwhen\u00a0you\u00a0don\u2019t\u00a0have\u00a0accessors,\u00a0and\u00a0the\u00a0like.\u00a0The\u00a0reason\u00a0I\u00a0don\u2019t\u00a0is\u00a0that\u00a0if\u00a0you\u00a0encounter\nthese\u00a0complexities,\u00a0you\u00a0shouldn\u2019t\u00a0do\u00a0this\u00a0refactoring.\nExample\nIn\u00a0the\u00a0simplest\u00a0case,\u00a0this\u00a0refactoring\u00a0is\u00a0so\u00a0easy\u00a0it\u2019s\u00a0trivial.\u00a0I\u00a0start\u00a0with\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0rating(aDriver)\u00a0{\n\u00a0\u00a0return\u00a0moreThanFiveLateDeliveries(aDriver)\u00a0?\u00a02\u00a0:\u00a01\u037e\n}\nfunction\u00a0moreThanFiveLateDeliveries(aDriver)\u00a0{\n\u00a0\u00a0return\u00a0aDriver.numberOfLateDeliveries\u00a0>\u00a05\u037e\n}\nI\u00a0can\u00a0just\u00a0take\u00a0the\u00a0return\u00a0expression\u00a0of\u00a0the\u00a0called\u00a0function\u00a0and\u00a0paste\u00a0it\u00a0into\u00a0the\u00a0caller\u00a0to\nreplace\u00a0the\u00a0call.\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0rating(aDriver)\u00a0{\n\u00a0\u00a0return\u00a0aDriver.numberOfLateDeliveries\u00a0>\u00a05\u00a0?\u00a02\u00a0:\u00a01\u037e\n}\nBut\u00a0it\u00a0can\u00a0be\u00a0a\u00a0little\u00a0more\u00a0involved\u00a0than\u00a0that,\u00a0requiring\u00a0me\u00a0to\u00a0do\u00a0more\u00a0work\u00a0to\u00a0fit\u00a0the\ncode\u00a0into\u00a0its\u00a0new\u00a0home.\u00a0Consider\u00a0the\u00a0case\u00a0where\u00a0I\u00a0start\u00a0with\u00a0this\u00a0slight\u00a0variation\u00a0on\u00a0the\nearlier\u00a0initial\u00a0code.\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nwww.EBooksWorld.ir\n", "page": 133, "type": "text", "section": "Page 133"}
{"text": "function\u00a0rating(aDriver)\u00a0{\n\u00a0\u00a0return\u00a0moreThanFiveLateDeliveries(aDriver)\u00a0?\u00a02\u00a0:\u00a01\u037e\n}\nfunction\u00a0moreThanFiveLateDeliveries(dvr)\u00a0{\n\u00a0\u00a0return\u00a0dvr.numberOfLateDeliveries\u00a0>\u00a05\u037e\n}\nAlmost\u00a0the\u00a0same,\u00a0but\u00a0now\u00a0the\u00a0declared\u00a0argument\u00a0on\nmoreThanFiveLateDeliveries\u00a0is\u00a0different\u00a0to\u00a0the\u00a0name\u00a0of\u00a0the\u00a0passed\u00adin\u00a0argument.\nSo\u00a0I\u00a0have\u00a0to\u00a0fit\u00a0the\u00a0code\u00a0a\u00a0little\u00a0when\u00a0I\u00a0do\u00a0the\u00a0inline.\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0rating(aDriver)\u00a0{\n\u00a0\u00a0return\u00a0aDriver.numberOfLateDeliveries\u00a0>\u00a05\u00a0?\u00a02\u00a0:\u00a01\u037e\n}\nIt\u00a0can\u00a0be\u00a0even\u00a0more\u00a0involved\u00a0than\u00a0this.\u00a0Consider\u00a0this\u00a0code:\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0reportLines(aCustomer)\u00a0{\n\u00a0\u00a0const\u00a0lines\u00a0=\u00a0[]\u037e\n\u00a0\u00a0gatherCustomerData(lines,\u00a0aCustomer)\u037e\n\u00a0\u00a0return\u00a0lines\u037e\n}\nfunction\u00a0gatherCustomerData(out,\u00a0aCustomer)\u00a0{\n\u00a0\u00a0out.push([\"name\",\u00a0aCustomer.name])\u037e\n\u00a0\u00a0out.push([\"location\",\u00a0aCustomer.location])\u037e\n}\nInlining\u00a0gatherCustomerData\u00a0into\u00a0reportLines\u00a0isn\u2019t\u00a0a\u00a0simple\u00a0cut\u00a0and\u00a0paste.\u00a0It\u2019s\nnot\u00a0too\u00a0complicated,\u00a0and\u00a0most\u00a0times\u00a0I\u00a0would\u00a0still\u00a0do\u00a0this\u00a0in\u00a0one\u00a0go,\u00a0with\u00a0a\u00a0bit\u00a0of\u00a0fitting.\nBut\u00a0to\u00a0be\u00a0cautious,\u00a0it\u00a0may\u00a0make\u00a0sense\u00a0to\u00a0move\u00a0one\u00a0line\u00a0at\u00a0a\u00a0time.\u00a0So\u00a0I\u2019d\u00a0start\u00a0with\u00a0using\nMove\u00a0Statements\u00a0to\u00a0Callers\u00a0(217)\u00a0on\u00a0the\u00a0first\u00a0line\u00a0(I\u2019d\u00a0do\u00a0it\u00a0the\u00a0simple\u00a0way\u00a0with\u00a0a\u00a0cut,\npaste,\u00a0and\u00a0fit).\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0reportLines(aCustomer)\u00a0{\n\u00a0\u00a0const\u00a0lines\u00a0=\u00a0[]\u037e\n\u00a0\u00a0lines.push([\"name\",\u00a0aCustomer.name])\u037e\n\u00a0\u00a0gatherCustomerData(lines,\u00a0aCustomer)\u037e\n\u00a0\u00a0return\u00a0lines\u037e\nwww.EBooksWorld.ir\n", "page": 134, "type": "text", "section": "Page 134"}
{"text": "}\nfunction\u00a0gatherCustomerData(out,\u00a0aCustomer)\u00a0{\n\u00a0\u00a0out.push([\"name\",\u00a0aCustomer.name])\u037e\n\u00a0\u00a0out.push([\"location\",\u00a0aCustomer.location])\u037e\n}\nI\u00a0then\u00a0continue\u00a0with\u00a0the\u00a0other\u00a0lines\u00a0until\u00a0I\u2019m\u00a0done.\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0reportLines(aCustomer)\u00a0{\n\u00a0\u00a0const\u00a0lines\u00a0=\u00a0[]\u037e\n\u00a0\u00a0lines.push([\"name\",\u00a0aCustomer.name])\u037e\n\u00a0\u00a0lines.push([\"location\",\u00a0aCustomer.location])\u037e\n\u00a0\u00a0return\u00a0lines\u037e\n}\nThe\u00a0point\u00a0here\u00a0is\u00a0to\u00a0always\u00a0be\u00a0ready\u00a0to\u00a0take\u00a0smaller\u00a0steps.\u00a0Most\u00a0of\u00a0the\u00a0time,\u00a0with\u00a0the\nsmall\u00a0functions\u00a0I\u00a0normally\u00a0write,\u00a0I\u00a0can\u00a0do\u00a0Inline\u00a0Function\u00a0in\u00a0one\u00a0go,\u00a0even\u00a0if\u00a0there\u00a0is\u00a0a\u00a0bit\nof\u00a0refitting\u00a0to\u00a0do.\u00a0But\u00a0if\u00a0I\u00a0run\u00a0into\u00a0complications,\u00a0I\u00a0go\u00a0one\u00a0line\u00a0at\u00a0a\u00a0time.\u00a0Even\u00a0with\u00a0one\nline,\u00a0things\u00a0can\u00a0get\u00a0a\u00a0bit\u00a0awkward\u037e\u00a0then,\u00a0I\u2019ll\u00a0use\u00a0the\u00a0more\u00a0elaborate\u00a0mechanics\u00a0for\u00a0Move\nStatements\u00a0to\u00a0Callers\u00a0(217)\u00a0to\u00a0break\u00a0things\u00a0down\u00a0even\u00a0more.\u00a0And\u00a0if,\u00a0feeling\u00a0confident,\u00a0I\ndo\u00a0something\u00a0the\u00a0quick\u00a0way\u00a0and\u00a0the\u00a0tests\u00a0break,\u00a0I\u00a0prefer\u00a0to\u00a0revert\u00a0back\u00a0to\u00a0my\u00a0last\u00a0green\ncode\u00a0and\u00a0repeat\u00a0the\u00a0refactoring\u00a0with\u00a0smaller\u00a0steps\u00a0and\u00a0a\u00a0touch\u00a0of\u00a0chagrin.\nEXTRACT VARIABLE\nformerly:\u00a0Introduce\u00a0Explaining\u00a0Variable\ninverse\u00a0of:\u00a0Inline\u00a0Variable\u00a0(123)\nwww.EBooksWorld.ir\n", "page": 135, "type": "text", "section": "Page 135"}
{"text": "Motivation\nExpressions\u00a0can\u00a0become\u00a0very\u00a0complex\u00a0and\u00a0hard\u00a0to\u00a0read.\u00a0In\u00a0such\u00a0situations,\u00a0local\nvariables\u00a0may\u00a0help\u00a0break\u00a0the\u00a0expression\u00a0down\u00a0into\u00a0something\u00a0more\u00a0manageable.\u00a0In\nparticular,\u00a0they\u00a0give\u00a0me\u00a0an\u00a0ability\u00a0to\u00a0name\u00a0a\u00a0part\u00a0of\u00a0a\u00a0more\u00a0complex\u00a0piece\u00a0of\u00a0logic.\u00a0This\nallows\u00a0me\u00a0to\u00a0better\u00a0understand\u00a0the\u00a0purpose\u00a0of\u00a0what\u2019s\u00a0happening.\nSuch\u00a0variables\u00a0are\u00a0also\u00a0handy\u00a0for\u00a0debugging,\u00a0since\u00a0they\u00a0provide\u00a0an\u00a0easy\u00a0hook\u00a0for\u00a0a\ndebugger\u00a0or\u00a0print\u00a0statement\u00a0to\u00a0capture.\nIf\u00a0I\u2019m\u00a0considering\u00a0Extract\u00a0Variable,\u00a0it\u00a0means\u00a0I\u00a0want\u00a0to\u00a0add\u00a0a\u00a0name\u00a0to\u00a0an\u00a0expression\u00a0in\nmy\u00a0code.\u00a0Once\u00a0I\u2019ve\u00a0decided\u00a0I\u00a0want\u00a0to\u00a0do\u00a0that,\u00a0I\u00a0also\u00a0think\u00a0about\u00a0the\u00a0context\u00a0of\u00a0that\nname.\u00a0If\u00a0it\u2019s\u00a0only\u00a0meaningful\u00a0within\u00a0the\u00a0function\u00a0I\u2019m\u00a0working\u00a0on,\u00a0then\u00a0Extract\u00a0Variable\nis\u00a0a\u00a0good\u00a0choice\u2014but\u00a0if\u00a0it\u00a0makes\u00a0sense\u00a0in\u00a0a\u00a0broader\u00a0context,\u00a0I\u2019ll\u00a0consider\u00a0making\u00a0the\nname\u00a0available\u00a0in\u00a0that\u00a0broader\u00a0context,\u00a0usually\u00a0as\u00a0a\u00a0function.\u00a0If\u00a0the\u00a0name\u00a0is\u00a0available\nmore\u00a0widely,\u00a0then\u00a0other\u00a0code\u00a0can\u00a0use\u00a0that\u00a0expression\u00a0without\u00a0having\u00a0to\u00a0repeat\u00a0the\nexpression,\u00a0leading\u00a0to\u00a0less\u00a0duplication\u00a0and\u00a0a\u00a0better\u00a0statement\u00a0of\u00a0my\u00a0intent.\nThe\u00a0downside\u00a0of\u00a0promoting\u00a0the\u00a0name\u00a0to\u00a0a\u00a0broader\u00a0context\u00a0is\u00a0extra\u00a0effort.\u00a0If\u00a0it\u2019s\nsignificantly\u00a0more\u00a0effort,\u00a0I\u2019m\u00a0likely\u00a0to\u00a0leave\u00a0it\u00a0till\u00a0later\u00a0when\u00a0I\u00a0can\u00a0use\u00a0Replace\u00a0Temp\nwith\u00a0Query\u00a0(178).\u00a0But\u00a0if\u00a0it\u2019s\u00a0easy,\u00a0I\u00a0like\u00a0to\u00a0do\u00a0it\u00a0now\u00a0so\u00a0the\u00a0name\u00a0is\u00a0immediately\navailable\u00a0in\u00a0the\u00a0code.\u00a0As\u00a0a\u00a0good\u00a0example\u00a0of\u00a0this,\u00a0if\u00a0I\u2019m\u00a0working\u00a0in\u00a0a\u00a0class,\u00a0then\u00a0Extract\nFunction\u00a0(106)\u00a0is\u00a0very\u00a0easy\u00a0to\u00a0do.\nMechanics\nEnsure\u00a0that\u00a0the\u00a0expression\u00a0you\u00a0want\u00a0to\u00a0extract\u00a0does\u00a0not\u00a0have\u00a0side\u00a0effects.\nwww.EBooksWorld.ir\n", "page": 136, "type": "text", "section": "Page 136"}
{"text": "Declare\u00a0an\u00a0immutable\u00a0variable.\u00a0Set\u00a0it\u00a0to\u00a0a\u00a0copy\u00a0of\u00a0the\u00a0expression\u00a0you\u00a0want\u00a0to\u00a0name.\nReplace\u00a0the\u00a0original\u00a0expression\u00a0with\u00a0the\u00a0new\u00a0variable.\nTest.\nIf\u00a0the\u00a0expression\u00a0appears\u00a0more\u00a0than\u00a0once,\u00a0replace\u00a0each\u00a0occurrence\u00a0with\u00a0the\u00a0variable,\ntesting\u00a0after\u00a0each\u00a0replacement.\nExample\nI\u00a0start\u00a0with\u00a0a\u00a0simple\u00a0calculation\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0price(order)\u00a0{\n\u00a0\u00a0//price\u00a0is\u00a0base\u00a0price\u00a0\u00ad\u00a0quantity\u00a0discount\u00a0+\u00a0shipping\n\u00a0\u00a0return\u00a0order.quantity\u00a0*\u00a0order.itemPrice\u00a0\u00ad\n\u00a0\u00a0\u00a0\u00a0Math.max(0,\u00a0order.quantity\u00a0\u00ad\u00a0500)\u00a0*\u00a0order.itemPrice\u00a0*\u00a00.05\u00a0+\n\u00a0\u00a0\u00a0\u00a0Math.min(order.quantity\u00a0*\u00a0order.itemPrice\u00a0*\u00a00.1,\u00a0100)\u037e\n}\nSimple\u00a0as\u00a0it\u00a0may\u00a0be,\u00a0I\u00a0can\u00a0make\u00a0it\u00a0still\u00a0easier\u00a0to\u00a0follow.\u00a0First,\u00a0I\u00a0recognize\u00a0that\u00a0the\u00a0base\nprice\u00a0is\u00a0the\u00a0multiple\u00a0of\u00a0the\u00a0quantity\u00a0and\u00a0the\u00a0item\u00a0price.\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0price(order)\u00a0{\n\u00a0\u00a0//price\u00a0is\u00a0base\u00a0price\u00a0\u00ad\u00a0quantity\u00a0discount\u00a0+\u00a0shipping\n\u00a0\u00a0return\u00a0order.quantity\u00a0*\u00a0order.itemPrice\u00a0\u00ad\n\u00a0\u00a0\u00a0\u00a0Math.max(0,\u00a0order.quantity\u00a0\u00ad\u00a0500)\u00a0*\u00a0order.itemPrice\u00a0*\u00a00.05\u00a0+\n\u00a0\u00a0\u00a0\u00a0Math.min(order.quantity\u00a0*\u00a0order.itemPrice\u00a0*\u00a00.1,\u00a0100)\u037e\n}\nOnce\u00a0that\u00a0understanding\u00a0is\u00a0in\u00a0my\u00a0head,\u00a0I\u00a0put\u00a0it\u00a0in\u00a0the\u00a0code\u00a0by\u00a0creating\u00a0and\u00a0naming\u00a0a\nvariable\u00a0for\u00a0it.\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0price(order)\u00a0{\n\u00a0\u00a0//price\u00a0is\u00a0base\u00a0price\u00a0\u00ad\u00a0quantity\u00a0discount\u00a0+\u00a0shipping\n\u00a0\u00a0const\u00a0basePrice\u00a0=\u00a0order.quantity\u00a0*\u00a0order.itemPrice\u037e\n\u00a0\u00a0return\u00a0order.quantity\u00a0*\u00a0order.itemPrice\u00a0\u00ad\n\u00a0\u00a0\u00a0\u00a0Math.max(0,\u00a0order.quantity\u00a0\u00ad\u00a0500)\u00a0*\u00a0order.itemPrice\u00a0*\u00a00.05\u00a0+\nwww.EBooksWorld.ir\n", "page": 137, "type": "text", "section": "Page 137"}
{"text": "\u00a0\u00a0\u00a0\u00a0Math.min(order.quantity\u00a0*\u00a0order.itemPrice\u00a0*\u00a00.1,\u00a0100)\u037e\n}\nOf\u00a0course,\u00a0just\u00a0declaring\u00a0and\u00a0initializing\u00a0a\u00a0variable\u00a0doesn\u2019t\u00a0do\u00a0anything\u037e\u00a0I\u00a0also\u00a0have\u00a0to\nuse\u00a0it,\u00a0so\u00a0I\u00a0replace\u00a0the\u00a0expression\u00a0that\u00a0I\u00a0used\u00a0as\u00a0its\u00a0source.\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0price(order)\u00a0{\n\u00a0\u00a0//price\u00a0is\u00a0base\u00a0price\u00a0\u00ad\u00a0quantity\u00a0discount\u00a0+\u00a0shipping\n\u00a0\u00a0const\u00a0basePrice\u00a0=\u00a0order.quantity\u00a0*\u00a0order.itemPrice\u037e\n\u00a0\u00a0return\u00a0basePrice\u00a0\u00ad\n\u00a0\u00a0\u00a0\u00a0Math.max(0,\u00a0order.quantity\u00a0\u00ad\u00a0500)\u00a0*\u00a0order.itemPrice\u00a0*\u00a00.05\u00a0+\n\u00a0\u00a0\u00a0\u00a0Math.min(order.quantity\u00a0*\u00a0order.itemPrice\u00a0*\u00a00.1,\u00a0100)\u037e\n}\nThat\u00a0same\u00a0expression\u00a0is\u00a0used\u00a0later\u00a0on,\u00a0so\u00a0I\u00a0can\u00a0replace\u00a0it\u00a0with\u00a0the\u00a0variable\u00a0there\u00a0too.\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0price(order)\u00a0{\n\u00a0\u00a0//price\u00a0is\u00a0base\u00a0price\u00a0\u00ad\u00a0quantity\u00a0discount\u00a0+\u00a0shipping\n\u00a0\u00a0const\u00a0basePrice\u00a0=\u00a0order.quantity\u00a0*\u00a0order.itemPrice\u037e\n\u00a0\u00a0return\u00a0basePrice\u00a0\u00ad\n\u00a0\u00a0\u00a0\u00a0Math.max(0,\u00a0order.quantity\u00a0\u00ad\u00a0500)\u00a0*\u00a0order.itemPrice\u00a0*\u00a00.05\u00a0+\n\u00a0\u00a0\u00a0\u00a0Math.min(basePrice\u00a0*\u00a00.1,\u00a0100)\u037e\n}\nThe\u00a0next\u00a0line\u00a0is\u00a0the\u00a0quantity\u00a0discount,\u00a0so\u00a0I\u00a0can\u00a0extract\u00a0that\u00a0too.\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0price(order)\u00a0{\n\u00a0\u00a0//price\u00a0is\u00a0base\u00a0price\u00a0\u00ad\u00a0quantity\u00a0discount\u00a0+\u00a0shipping\n\u00a0\u00a0const\u00a0basePrice\u00a0=\u00a0order.quantity\u00a0*\u00a0order.itemPrice\u037e\n\u00a0\u00a0const\u00a0quantityDiscount\u00a0=\u00a0Math.max(0,\u00a0order.quantity\u00a0\u00ad\u00a0500)\u00a0*\u00a0order.itemPrice\u00a0*\n\u00a0\u00a0return\u00a0basePrice\u00a0\u00ad\n\u00a0\u00a0\u00a0\u00a0quantityDiscount\u00a0+\n\u00a0\u00a0\u00a0\u00a0Math.min(basePrice\u00a0*\u00a00.1,\u00a0100)\u037e\n}\nFinally,\u00a0I\u00a0finish\u00a0with\u00a0the\u00a0shipping.\u00a0As\u00a0I\u00a0do\u00a0that,\u00a0I\u00a0can\u00a0remove\u00a0the\u00a0comment,\u00a0too,\u00a0because\nit\u00a0no\u00a0longer\u00a0says\u00a0anything\u00a0the\u00a0code\u00a0doesn\u2019t\u00a0say.\nwww.EBooksWorld.ir\n", "page": 138, "type": "text", "section": "Page 138"}
{"text": "Click\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0price(order)\u00a0{\n\u00a0\u00a0const\u00a0basePrice\u00a0=\u00a0order.quantity\u00a0*\u00a0order.itemPrice\u037e\n\u00a0\u00a0const\u00a0quantityDiscount\u00a0=\u00a0Math.max(0,\u00a0order.quantity\u00a0\u00ad\u00a0500)\u00a0*\u00a0order.itemPrice\u00a0*\n\u00a0\u00a0const\u00a0shipping\u00a0=\u00a0Math.min(basePrice\u00a0*\u00a00.1,\u00a0100)\u037e\n\u00a0\u00a0return\u00a0basePrice\u00a0\u00ad\u00a0quantityDiscount\u00a0+\u00a0shipping\u037e\n}\nExample: With a Class\nHere\u2019s\u00a0the\u00a0same\u00a0code,\u00a0but\u00a0this\u00a0time\u00a0in\u00a0the\u00a0context\u00a0of\u00a0a\u00a0class:\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nclass\u00a0Order\u00a0{\n\u00a0\u00a0constructor(aRecord)\u00a0{\n\u00a0\u00a0\u00a0\u00a0this._data\u00a0=\u00a0aRecord\u037e\n\u00a0\u00a0}\n\u00a0\u00a0get\u00a0quantity()\u00a0\u00a0{return\u00a0this._data.quantity\u037e}\n\u00a0\u00a0get\u00a0itemPrice()\u00a0{return\u00a0this._data.itemPrice\u037e}\n\u00a0\u00a0get\u00a0price()\u00a0{\n\u00a0\u00a0\u00a0\u00a0return\u00a0this.quantity\u00a0*\u00a0this.itemPrice\u00a0\u00ad\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0Math.max(0,\u00a0this.quantity\u00a0\u00ad\u00a0500)\u00a0*\u00a0this.itemPrice\u00a0*\u00a00.05\u00a0+\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0Math.min(this.quantity\u00a0*\u00a0this.itemPrice\u00a0*\u00a00.1,\u00a0100)\u037e\n\u00a0\u00a0}\n}\nIn\u00a0this\u00a0case,\u00a0I\u00a0want\u00a0to\u00a0extract\u00a0the\u00a0same\u00a0names,\u00a0but\u00a0I\u00a0realize\u00a0that\u00a0the\u00a0names\u00a0apply\u00a0to\u00a0the\nOrder\u00a0as\u00a0a\u00a0whole,\u00a0not\u00a0just\u00a0the\u00a0calculation\u00a0of\u00a0the\u00a0price.\u00a0Since\u00a0they\u00a0apply\u00a0to\u00a0the\u00a0whole\norder,\u00a0I\u2019m\u00a0inclined\u00a0to\u00a0extract\u00a0the\u00a0names\u00a0as\u00a0methods\u00a0rather\u00a0than\u00a0variables.\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nclass\u00a0Order\u00a0{\n\u00a0\u00a0constructor(aRecord)\u00a0{\n\u00a0\u00a0\u00a0\u00a0this._data\u00a0=\u00a0aRecord\u037e\n\u00a0\u00a0}\n\u00a0\u00a0get\u00a0quantity()\u00a0\u00a0{return\u00a0this._data.quantity\u037e}\n\u00a0\u00a0get\u00a0itemPrice()\u00a0{return\u00a0this._data.itemPrice\u037e}\n\u00a0\u00a0get\u00a0price()\u00a0{\n\u00a0\u00a0\u00a0\u00a0return\u00a0this.basePrice\u00a0\u00ad\u00a0this.quantityDiscount\u00a0+\u00a0this.shipping\u037e\n\u00a0\u00a0}\n\u00a0\u00a0get\u00a0basePrice()\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0{return\u00a0this.quantity\u00a0*\u00a0this.itemPrice\u037e}\nwww.EBooksWorld.ir\n", "page": 139, "type": "text", "section": "Page 139"}
{"text": "\u00a0\u00a0get\u00a0quantityDiscount()\u00a0{return\u00a0Math.max(0,\u00a0this.quantity\u00a0\u00ad\u00a0500)\u00a0*\u00a0this.itemPri\n\u00a0\u00a0get\u00a0shipping()\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0{return\u00a0Math.min(this.basePrice\u00a0*\u00a00.1,\u00a0100)\u037e}\n}\nThis\u00a0is\u00a0one\u00a0of\u00a0the\u00a0great\u00a0benefits\u00a0of\u00a0objects\u2014they\u00a0give\u00a0you\u00a0a\u00a0reasonable\u00a0amount\u00a0of\ncontext\u00a0for\u00a0logic\u00a0to\u00a0share\u00a0other\u00a0bits\u00a0of\u00a0logic\u00a0and\u00a0data.\u00a0For\u00a0something\u00a0as\u00a0simple\u00a0as\u00a0this,\u00a0it\ndoesn\u2019t\u00a0matter\u00a0so\u00a0much,\u00a0but\u00a0with\u00a0a\u00a0larger\u00a0class\u00a0it\u00a0becomes\u00a0very\u00a0useful\u00a0to\u00a0call\u00a0out\ncommon\u00a0hunks\u00a0of\u00a0behavior\u00a0as\u00a0their\u00a0own\u00a0abstractions\u00a0with\u00a0their\u00a0own\u00a0names\u00a0to\u00a0refer\u00a0to\nthem\u00a0whenever\u00a0I\u2019m\u00a0working\u00a0with\u00a0the\u00a0object.\nINLINE VARIABLE\nformerly:\u00a0Inline\u00a0Temp\ninverse\u00a0of:\u00a0Extract\u00a0Variable\u00a0(119)\nMotivation\nVariables\u00a0provide\u00a0names\u00a0for\u00a0expressions\u00a0within\u00a0a\u00a0function,\u00a0and\u00a0as\u00a0such\u00a0they\u00a0are\u00a0usually\na\u00a0Good\u00a0Thing.\u00a0But\u00a0sometimes,\u00a0the\u00a0name\u00a0doesn\u2019t\u00a0really\u00a0communicate\u00a0more\u00a0than\u00a0the\nexpression\u00a0itself.\u00a0At\u00a0other\u00a0times,\u00a0you\u00a0may\u00a0find\u00a0that\u00a0a\u00a0variable\u00a0gets\u00a0in\u00a0the\u00a0way\u00a0of\nrefactoring\u00a0the\u00a0neighboring\u00a0code.\u00a0In\u00a0these\u00a0cases,\u00a0it\u00a0can\u00a0be\u00a0useful\u00a0to\u00a0inline\u00a0the\u00a0variable.\nMechanics\nCheck\u00a0that\u00a0the\u00a0right\u00adhand\u00a0side\u00a0of\u00a0the\u00a0assignment\u00a0is\u00a0free\u00a0of\u00a0side\u00a0effects.\nIf\u00a0the\u00a0variable\u00a0isn\u2019t\u00a0already\u00a0declared\u00a0immutable,\u00a0do\u00a0so\u00a0and\u00a0test.\nThis\u00a0checks\u00a0that\u00a0it\u2019s\u00a0only\u00a0assigned\u00a0to\u00a0once.\nwww.EBooksWorld.ir\n", "page": 140, "type": "text", "section": "Page 140"}
{"text": "Find\u00a0the\u00a0first\u00a0reference\u00a0to\u00a0the\u00a0variable\u00a0and\u00a0replace\u00a0it\u00a0with\u00a0the\u00a0right\u00adhand\u00a0side\u00a0of\u00a0the\nassignment.\nTest.\nRepeat\u00a0replacing\u00a0references\u00a0to\u00a0the\u00a0variable\u00a0until\u00a0you\u2019ve\u00a0replaced\u00a0all\u00a0of\u00a0them.\nRemove\u00a0the\u00a0declaration\u00a0and\u00a0assignment\u00a0of\u00a0the\u00a0variable.\nTest.\nCHANGE FUNCTION DECLARATION\naka:\u00a0Rename\u00a0Function\nformerly:\u00a0Rename\u00a0Method\nformerly:\u00a0Add\u00a0Parameter\nformerly:\u00a0Remove\u00a0Parameter\naka:\u00a0Change\u00a0Signature\nMotivation\nFunctions\u00a0represent\u00a0the\u00a0primary\u00a0way\u00a0we\u00a0break\u00a0a\u00a0program\u00a0down\u00a0into\u00a0parts.\u00a0Function\ndeclarations\u00a0represent\u00a0how\u00a0these\u00a0parts\u00a0fit\u00a0together\u2014effectively,\u00a0they\u00a0represent\u00a0the\nwww.EBooksWorld.ir\n", "page": 141, "type": "text", "section": "Page 141"}
{"text": "joints\u00a0in\u00a0our\u00a0software\u00a0systems.\u00a0And,\u00a0as\u00a0with\u00a0any\u00a0construction,\u00a0much\u00a0depends\u00a0on\u00a0those\njoints.\u00a0Good\u00a0joints\u00a0allow\u00a0me\u00a0to\u00a0add\u00a0new\u00a0parts\u00a0to\u00a0the\u00a0system\u00a0easily,\u00a0but\u00a0bad\u00a0ones\u00a0are\u00a0a\nconstant\u00a0source\u00a0of\u00a0difficulty,\u00a0making\u00a0it\u00a0harder\u00a0to\u00a0figure\u00a0out\u00a0what\u00a0the\u00a0software\u00a0does\u00a0and\nhow\u00a0to\u00a0modify\u00a0it\u00a0as\u00a0my\u00a0needs\u00a0change.\u00a0Fortunately,\u00a0software,\u00a0being\u00a0soft,\u00a0allows\u00a0me\u00a0to\nchange\u00a0these\u00a0joints,\u00a0providing\u00a0I\u00a0do\u00a0it\u00a0carefully.\nThe\u00a0most\u00a0important\u00a0element\u00a0of\u00a0such\u00a0a\u00a0joint\u00a0is\u00a0the\u00a0name\u00a0of\u00a0the\u00a0function.\u00a0A\u00a0good\u00a0name\nallows\u00a0me\u00a0to\u00a0understand\u00a0what\u00a0the\u00a0function\u00a0does\u00a0when\u00a0I\u00a0see\u00a0it\u00a0called,\u00a0without\u00a0seeing\u00a0the\ncode\u00a0that\u00a0defines\u00a0its\u00a0implementation.\u00a0However,\u00a0coming\u00a0up\u00a0with\u00a0good\u00a0names\u00a0is\u00a0hard,\nand\u00a0I\u00a0rarely\u00a0get\u00a0my\u00a0names\u00a0right\u00a0the\u00a0first\u00a0time.\u00a0When\u00a0I\u00a0find\u00a0a\u00a0name\u00a0that\u2019s\u00a0confused\u00a0me,\nI\u2019m\u00a0tempted\u00a0to\u00a0leave\u00a0it\u2014after\u00a0all,\u00a0it\u2019s\u00a0only\u00a0a\u00a0name.\u00a0This\u00a0is\u00a0the\u00a0work\u00a0of\u00a0the\u00a0evil\u00a0demon\nObfuscatis\u037e\u00a0for\u00a0the\u00a0sake\u00a0of\u00a0my\u00a0program\u2019s\u00a0soul\u00a0I\u00a0must\u00a0never\u00a0listen\u00a0to\u00a0him.\u00a0If\u00a0I\u00a0see\u00a0a\nfunction\u00a0with\u00a0the\u00a0wrong\u00a0name,\u00a0it\u00a0is\u00a0imperative\u00a0that\u00a0I\u00a0change\u00a0it\u00a0as\u00a0soon\u00a0as\u00a0I\u00a0understand\nwhat\u00a0a\u00a0better\u00a0name\u00a0could\u00a0be.\u00a0That\u00a0way,\u00a0the\u00a0next\u00a0time\u00a0I\u2019m\u00a0looking\u00a0at\u00a0this\u00a0code,\u00a0I\u00a0don\u2019t\nhave\u00a0to\u00a0figure\u00a0out\u00a0again\u00a0what\u2019s\u00a0going\u00a0on.\u00a0(Often,\u00a0a\u00a0good\u00a0way\u00a0to\u00a0improve\u00a0a\u00a0name\u00a0is\u00a0to\nwrite\u00a0a\u00a0comment\u00a0to\u00a0describe\u00a0the\u00a0function\u2019s\u00a0purpose,\u00a0then\u00a0turn\u00a0that\u00a0comment\u00a0into\u00a0a\nname.)\nSimilar\u00a0logic\u00a0applies\u00a0to\u00a0a\u00a0function\u2019s\u00a0parameters.\u00a0The\u00a0parameters\u00a0of\u00a0a\u00a0function\u00a0dictate\nhow\u00a0a\u00a0function\u00a0fits\u00a0in\u00a0with\u00a0the\u00a0rest\u00a0of\u00a0its\u00a0world.\u00a0Parameters\u00a0set\u00a0the\u00a0context\u00a0in\u00a0which\u00a0I\ncan\u00a0use\u00a0a\u00a0function.\u00a0If\u00a0I\u00a0have\u00a0a\u00a0function\u00a0to\u00a0format\u00a0a\u00a0person\u2019s\u00a0telephone\u00a0number,\u00a0and\u00a0that\nfunction\u00a0takes\u00a0a\u00a0person\u00a0as\u00a0its\u00a0argument,\u00a0then\u00a0I\u00a0can\u2019t\u00a0use\u00a0it\u00a0to\u00a0format\u00a0a\u00a0company\u2019s\ntelephone\u00a0number.\u00a0If\u00a0I\u00a0replace\u00a0the\u00a0person\u00a0parameter\u00a0with\u00a0the\u00a0telephone\u00a0number\u00a0itself,\nthen\u00a0the\u00a0formatting\u00a0code\u00a0is\u00a0more\u00a0widely\u00a0useful.\nApart\u00a0from\u00a0increasing\u00a0a\u00a0function\u2019s\u00a0range\u00a0of\u00a0applicability,\u00a0I\u00a0can\u00a0also\u00a0remove\u00a0some\ncoupling,\u00a0changing\u00a0what\u00a0modules\u00a0need\u00a0to\u00a0connect\u00a0to\u00a0others.\u00a0Telephone\u00a0formatting\u00a0logic\nmay\u00a0sit\u00a0in\u00a0a\u00a0module\u00a0that\u00a0has\u00a0no\u00a0knowledge\u00a0about\u00a0people.\u00a0Reducing\u00a0how\u00a0much\u00a0modules\nneed\u00a0to\u00a0know\u00a0about\u00a0each\u00a0other\u00a0helps\u00a0reduce\u00a0how\u00a0much\u00a0I\u00a0need\u00a0to\u00a0put\u00a0into\u00a0my\u00a0brain\nwhen\u00a0I\u00a0change\u00a0something\u2014and\u00a0my\u00a0brain\u00a0isn\u2019t\u00a0as\u00a0big\u00a0as\u00a0it\u00a0used\u00a0to\u00a0be\u00a0(that\u00a0doesn\u2019t\u00a0say\nanything\u00a0about\u00a0the\u00a0size\u00a0of\u00a0its\u00a0container,\u00a0though).\nChoosing\u00a0the\u00a0right\u00a0parameters\u00a0isn\u2019t\u00a0something\u00a0that\u00a0adheres\u00a0to\u00a0simple\u00a0rules.\u00a0I\u00a0may\u00a0have\na\u00a0simple\u00a0function\u00a0for\u00a0determining\u00a0if\u00a0a\u00a0payment\u00a0is\u00a0overdue,\u00a0by\u00a0looking\u00a0at\u00a0if\u00a0it\u2019s\u00a0older\nthan\u00a030\u00a0days.\u00a0Should\u00a0the\u00a0parameter\u00a0to\u00a0this\u00a0function\u00a0be\u00a0the\u00a0payment\u00a0object,\u00a0or\u00a0the\u00a0due\ndate\u00a0of\u00a0the\u00a0payment?\u00a0Using\u00a0the\u00a0payment\u00a0couples\u00a0the\u00a0function\u00a0to\u00a0the\u00a0interface\u00a0of\u00a0the\npayment\u00a0object.\u00a0But\u00a0if\u00a0I\u00a0use\u00a0the\u00a0payment,\u00a0I\u00a0can\u00a0easily\u00a0access\u00a0other\u00a0properties\u00a0of\u00a0the\npayment,\u00a0should\u00a0the\u00a0logic\u00a0evolve,\u00a0without\u00a0having\u00a0to\u00a0change\u00a0every\u00a0bit\u00a0of\u00a0code\u00a0that\u00a0calls\nthis\u00a0function\u2014essentially,\u00a0increasing\u00a0the\u00a0encapsulation\u00a0of\u00a0the\u00a0function.\nwww.EBooksWorld.ir\n", "page": 142, "type": "text", "section": "Page 142"}
{"text": "The\u00a0only\u00a0right\u00a0answer\u00a0to\u00a0this\u00a0puzzle\u00a0is\u00a0that\u00a0there\u00a0is\u00a0no\u00a0right\u00a0answer,\u00a0especially\u00a0over\ntime.\u00a0So\u00a0I\u00a0find\u00a0it\u2019s\u00a0essential\u00a0to\u00a0be\u00a0familiar\u00a0with\u00a0Change\u00a0Function\u00a0Declaration\u00a0so\u00a0the\u00a0code\ncan\u00a0evolve\u00a0with\u00a0my\u00a0understanding\u00a0of\u00a0what\u00a0the\u00a0best\u00a0joints\u00a0in\u00a0the\u00a0code\u00a0need\u00a0to\u00a0be.\nUsually,\u00a0I\u00a0only\u00a0use\u00a0the\u00a0main\u00a0name\u00a0of\u00a0a\u00a0refactoring\u00a0when\u00a0I\u00a0refer\u00a0to\u00a0it\u00a0from\u00a0elsewhere\u00a0in\nthis\u00a0book.\u00a0However,\u00a0since\u00a0renaming\u00a0is\u00a0such\u00a0a\u00a0significant\u00a0use\u00a0case\u00a0for\u00a0Change\u00a0Function\nDeclaration,\u00a0if\u00a0I\u2019m\u00a0just\u00a0renaming\u00a0something,\u00a0I\u2019ll\u00a0refer\u00a0to\u00a0this\u00a0refactoring\u00a0as\u00a0Rename\nFunction\u00a0to\u00a0make\u00a0it\u00a0clearer\u00a0what\u00a0I\u2019m\u00a0doing.\u00a0Whether\u00a0I\u2019m\u00a0merely\u00a0renaming\u00a0or\nmanipulating\u00a0the\u00a0parameters,\u00a0I\u00a0use\u00a0the\u00a0same\u00a0mechanics.\nMechanics\nIn\u00a0most\u00a0of\u00a0the\u00a0refactorings\u00a0in\u00a0this\u00a0book,\u00a0I\u00a0present\u00a0only\u00a0a\u00a0single\u00a0set\u00a0of\u00a0mechanics.\u00a0This\nisn\u2019t\u00a0because\u00a0there\u00a0is\u00a0only\u00a0one\u00a0set\u00a0that\u00a0will\u00a0do\u00a0the\u00a0job\u00a0but\u00a0because,\u00a0usually,\u00a0one\u00a0set\u00a0of\nmechanics\u00a0will\u00a0work\u00a0reasonably\u00a0well\u00a0for\u00a0most\u00a0cases.\u00a0Change\u00a0Function\u00a0Declaration,\nhowever,\u00a0is\u00a0an\u00a0exception.\u00a0The\u00a0simple\u00a0mechanics\u00a0are\u00a0often\u00a0effective,\u00a0but\u00a0there\u00a0are\u00a0plenty\nof\u00a0cases\u00a0when\u00a0a\u00a0more\u00a0gradual\u00a0migration\u00a0makes\u00a0more\u00a0sense.\u00a0So,\u00a0with\u00a0this\u00a0refactoring,\u00a0I\nlook\u00a0at\u00a0the\u00a0change\u00a0and\u00a0ask\u00a0myself\u00a0if\u00a0I\u00a0think\u00a0I\u00a0can\u00a0change\u00a0the\u00a0declaration\u00a0and\u00a0all\u00a0its\ncallers\u00a0easily\u00a0in\u00a0one\u00a0go.\u00a0If\u00a0so,\u00a0I\u00a0follow\u00a0the\u00a0simple\u00a0mechanics.\u00a0The\u00a0migration\u00adstyle\nmechanics\u00a0allow\u00a0me\u00a0to\u00a0change\u00a0the\u00a0callers\u00a0more\u00a0gradually\u2014which\u00a0is\u00a0important\u00a0if\u00a0I\u00a0have\nlots\u00a0of\u00a0them,\u00a0they\u00a0are\u00a0awkward\u00a0to\u00a0get\u00a0to,\u00a0the\u00a0function\u00a0is\u00a0a\u00a0polymorphic\u00a0method,\u00a0or\u00a0I\nhave\u00a0a\u00a0more\u00a0complicated\u00a0change\u00a0to\u00a0the\u00a0declaration.\nSimple Mechanics\nIf\u00a0you\u2019re\u00a0removing\u00a0a\u00a0parameter,\u00a0ensure\u00a0it\u00a0isn\u2019t\u00a0referenced\u00a0in\u00a0the\u00a0body\u00a0of\u00a0the\nfunction.\nChange\u00a0the\u00a0method\u00a0declaration\u00a0to\u00a0the\u00a0desired\u00a0declaration.\nFind\u00a0all\u00a0references\u00a0to\u00a0the\u00a0old\u00a0method\u00a0declaration,\u00a0update\u00a0them\u00a0to\u00a0the\u00a0new\u00a0one.\nTest.\nIt\u2019s\u00a0often\u00a0best\u00a0to\u00a0separate\u00a0changes,\u00a0so\u00a0if\u00a0you\u00a0want\u00a0to\u00a0both\u00a0change\u00a0the\u00a0name\u00a0and\u00a0add\u00a0a\nparameter,\u00a0do\u00a0these\u00a0as\u00a0separate\u00a0steps.\u00a0(In\u00a0any\u00a0case,\u00a0if\u00a0you\u00a0run\u00a0into\u00a0trouble,\u00a0revert\u00a0and\nuse\u00a0the\u00a0migration\u00a0mechanics\u00a0instead.)\nMigration Mechanics\nIf\u00a0necessary,\u00a0refactor\u00a0the\u00a0body\u00a0of\u00a0the\u00a0function\u00a0to\u00a0make\u00a0it\u00a0easy\u00a0to\u00a0do\u00a0the\u00a0following\nextraction\u00a0step.\nwww.EBooksWorld.ir\n", "page": 143, "type": "text", "section": "Page 143"}
{"text": "Use\u00a0Extract\u00a0Function\u00a0(106)\u00a0on\u00a0the\u00a0function\u00a0body\u00a0to\u00a0create\u00a0the\u00a0new\u00a0function.\nIf\u00a0the\u00a0new\u00a0function\u00a0will\u00a0have\u00a0the\u00a0same\u00a0name\u00a0as\u00a0the\u00a0old\u00a0one,\u00a0give\u00a0the\u00a0new\u00a0function\u00a0a\ntemporary\u00a0name\u00a0that\u2019s\u00a0easy\u00a0to\u00a0search\u00a0for.\nIf\u00a0the\u00a0extracted\u00a0function\u00a0needs\u00a0additional\u00a0parameters,\u00a0use\u00a0the\u00a0simple\u00a0mechanics\u00a0to\nadd\u00a0them.\nTest.\nApply\u00a0Inline\u00a0Function\u00a0(115)\u00a0to\u00a0the\u00a0old\u00a0function.\nIf\u00a0you\u00a0used\u00a0a\u00a0temporary\u00a0name,\u00a0use\u00a0Change\u00a0Function\u00a0Declaration\u00a0(124)\u00a0again\u00a0to\nrestore\u00a0it\u00a0to\u00a0the\u00a0original\u00a0name.\nTest.\nIf\u00a0you\u2019re\u00a0changing\u00a0a\u00a0method\u00a0on\u00a0a\u00a0class\u00a0with\u00a0polymorphism,\u00a0you\u2019ll\u00a0need\u00a0to\u00a0add\nindirection\u00a0for\u00a0each\u00a0binding.\u00a0If\u00a0the\u00a0method\u00a0is\u00a0polymorphic\u00a0within\u00a0a\u00a0single\u00a0class\nhierarchy,\u00a0you\u00a0only\u00a0need\u00a0the\u00a0forwarding\u00a0method\u00a0on\u00a0the\u00a0superclass.\u00a0If\u00a0the\npolymorphism\u00a0has\u00a0no\u00a0superclass\u00a0link,\u00a0then\u00a0you\u2019ll\u00a0need\u00a0forwarding\u00a0methods\u00a0on\u00a0each\nimplementation\u00a0class.\nIf\u00a0you\u00a0are\u00a0refactoring\u00a0a\u00a0published\u00a0API,\u00a0you\u00a0can\u00a0pause\u00a0the\u00a0refactoring\u00a0once\u00a0you\u2019ve\ncreated\u00a0the\u00a0new\u00a0function.\u00a0During\u00a0this\u00a0pause,\u00a0deprecate\u00a0the\u00a0original\u00a0function\u00a0and\u00a0wait\nfor\u00a0clients\u00a0to\u00a0change\u00a0to\u00a0the\u00a0new\u00a0function.\u00a0The\u00a0original\u00a0function\u00a0declaration\u00a0can\u00a0be\nremoved\u00a0when\u00a0(and\u00a0if)\u00a0you\u2019re\u00a0confident\u00a0all\u00a0the\u00a0clients\u00a0of\u00a0the\u00a0old\u00a0function\u00a0have\u00a0migrated\nto\u00a0the\u00a0new\u00a0one.\nExample: Renaming a Function (Simple Mechanics)\nConsider\u00a0this\u00a0function\u00a0with\u00a0an\u00a0overly\u00a0abbreved\u00a0name:\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0circum(radius)\u00a0{\n\u00a0\u00a0return\u00a02\u00a0*\u00a0Math.PI\u00a0*\u00a0radius\u037e\n}\nI\u00a0want\u00a0to\u00a0change\u00a0that\u00a0to\u00a0something\u00a0more\u00a0sensible.\u00a0I\u00a0begin\u00a0by\u00a0changing\u00a0the\u00a0declaration:\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nwww.EBooksWorld.ir\n", "page": 144, "type": "text", "section": "Page 144"}
{"text": "function\u00a0circumference(radius)\u00a0{\n\u00a0\u00a0return\u00a02\u00a0*\u00a0Math.PI\u00a0*\u00a0radius\u037e\n}\nI\u00a0then\u00a0find\u00a0all\u00a0the\u00a0callers\u00a0of\u00a0circum\u00a0and\u00a0change\u00a0the\u00a0name\u00a0to\u00a0circumference.\nDifferent\u00a0language\u00a0environments\u00a0have\u00a0an\u00a0impact\u00a0on\u00a0how\u00a0easy\u00a0it\u00a0is\u00a0to\u00a0find\u00a0all\u00a0the\nreferences\u00a0to\u00a0the\u00a0old\u00a0function.\u00a0Static\u00a0typing\u00a0and\u00a0a\u00a0good\u00a0IDE\u00a0provide\u00a0the\u00a0best\u00a0experience,\nusually\u00a0allowing\u00a0me\u00a0to\u00a0rename\u00a0functions\u00a0automatically\u00a0with\u00a0little\u00a0chance\u00a0of\u00a0error.\nWithout\u00a0static\u00a0typing,\u00a0this\u00a0can\u00a0be\u00a0more\u00a0involved\u037e\u00a0even\u00a0good\u00a0searching\u00a0tools\u00a0will\u00a0then\nhave\u00a0a\u00a0lot\u00a0of\u00a0false\u00a0positives.\nI\u00a0use\u00a0the\u00a0same\u00a0approach\u00a0for\u00a0adding\u00a0or\u00a0removing\u00a0parameters:\u00a0find\u00a0all\u00a0the\u00a0callers,\u00a0change\nthe\u00a0declaration,\u00a0and\u00a0change\u00a0the\u00a0callers.\u00a0It\u2019s\u00a0often\u00a0better\u00a0to\u00a0do\u00a0these\u00a0as\u00a0separate\u00a0steps\u2014\nso,\u00a0if\u00a0I\u2019m\u00a0both\u00a0renaming\u00a0the\u00a0function\u00a0and\u00a0adding\u00a0a\u00a0parameter,\u00a0I\u00a0first\u00a0do\u00a0the\u00a0rename,\ntest,\u00a0then\u00a0add\u00a0the\u00a0parameter,\u00a0and\u00a0test\u00a0again.\nA\u00a0disadvantage\u00a0of\u00a0this\u00a0simple\u00a0way\u00a0of\u00a0doing\u00a0the\u00a0refactoring\u00a0is\u00a0that\u00a0I\u00a0have\u00a0to\u00a0do\u00a0all\u00a0the\ncallers\u00a0and\u00a0the\u00a0declaration\u00a0(or\u00a0all\u00a0of\u00a0them,\u00a0if\u00a0polymorphic)\u00a0at\u00a0once.\u00a0If\u00a0there\u00a0are\u00a0only\u00a0a\nfew\u00a0of\u00a0them,\u00a0or\u00a0if\u00a0I\u00a0have\u00a0decent\u00a0automated\u00a0refactoring\u00a0tools,\u00a0this\u00a0is\u00a0reasonable.\u00a0But\u00a0if\nthere\u2019s\u00a0a\u00a0lot,\u00a0it\u00a0can\u00a0get\u00a0tricky.\u00a0Another\u00a0problem\u00a0is\u00a0when\u00a0the\u00a0names\u00a0aren\u2019t\u00a0unique\u2014e.g.,\u00a0I\nwant\u00a0to\u00a0rename\u00a0the\u00a0a\u00a0changeAddress\u00a0method\u00a0on\u00a0a\u00a0person\u00a0class\u00a0but\u00a0the\u00a0same\u00a0method,\nwhich\u00a0I\u00a0don\u2019t\u00a0want\u00a0to\u00a0change,\u00a0exists\u00a0on\u00a0an\u00a0insurance\u00a0agreement\u00a0class.\u00a0The\u00a0more\ncomplex\u00a0the\u00a0change\u00a0is,\u00a0the\u00a0less\u00a0I\u00a0want\u00a0to\u00a0do\u00a0it\u00a0in\u00a0one\u00a0go\u00a0like\u00a0this.\u00a0When\u00a0this\u00a0kind\u00a0of\nproblem\u00a0arises,\u00a0I\u00a0use\u00a0the\u00a0migration\u00a0mechanics\u00a0instead.\u00a0Similarly,\u00a0if\u00a0I\u00a0use\u00a0simple\nmechanics\u00a0and\u00a0something\u00a0goes\u00a0wrong,\u00a0I\u2019ll\u00a0revert\u00a0the\u00a0code\u00a0to\u00a0the\u00a0last\u00a0known\u00a0good\u00a0state\nand\u00a0try\u00a0again\u00a0using\u00a0migration\u00a0mechanics.\nExample: Renaming a Function (Migration Mechanics)\nAgain,\u00a0I\u00a0have\u00a0this\u00a0function\u00a0with\u00a0its\u00a0overly\u00a0abbreved\u00a0name:\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0circum(radius)\u00a0{\n\u00a0\u00a0return\u00a02\u00a0*\u00a0Math.PI\u00a0*\u00a0radius\u037e\n}\nTo\u00a0do\u00a0this\u00a0refactoring\u00a0with\u00a0migration\u00a0mechanics,\u00a0I\u00a0begin\u00a0by\u00a0applying\u00a0Extract\u00a0Function\n(106)\u00a0to\u00a0the\u00a0entire\u00a0function\u00a0body.\nwww.EBooksWorld.ir\n", "page": 145, "type": "text", "section": "Page 145"}
{"text": "Click\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0circum(radius)\u00a0{\n\u00a0\u00a0return\u00a0circumference(radius)\u037e\n}\nfunction\u00a0circumference(radius)\u00a0{\n\u00a0\u00a0return\u00a02\u00a0*\u00a0Math.PI\u00a0*\u00a0radius\u037e\n}\nI\u00a0test\u00a0that,\u00a0then\u00a0apply\u00a0Inline\u00a0Function\u00a0(115)\u00a0to\u00a0the\u00a0old\u00a0functions.\u00a0I\u00a0find\u00a0all\u00a0the\u00a0calls\u00a0of\u00a0the\nold\u00a0function\u00a0and\u00a0replace\u00a0each\u00a0one\u00a0with\u00a0a\u00a0call\u00a0of\u00a0the\u00a0new\u00a0one.\u00a0I\u00a0can\u00a0test\u00a0after\u00a0each\nchange,\u00a0which\u00a0allows\u00a0me\u00a0to\u00a0do\u00a0them\u00a0one\u00a0at\u00a0a\u00a0time.\u00a0Once\u00a0I\u2019ve\u00a0got\u00a0them\u00a0all,\u00a0I\u00a0remove\u00a0the\nold\u00a0function.\nWith\u00a0most\u00a0refactorings,\u00a0I\u2019m\u00a0changing\u00a0code\u00a0that\u00a0I\u00a0can\u00a0modify,\u00a0but\u00a0this\u00a0refactoring\u00a0can\u00a0be\nhandy\u00a0with\u00a0a\u00a0published\u00a0API\u2014that\u00a0is,\u00a0one\u00a0used\u00a0by\u00a0code\u00a0that\u00a0I\u2019m\u00a0unable\u00a0to\u00a0change\nmyself.\u00a0I\u00a0can\u00a0pause\u00a0the\u00a0refactoring\u00a0after\u00a0creating\u00a0circumference\u00a0and,\u00a0if\u00a0possible,\nmark\u00a0circum\u00a0as\u00a0deprecated.\u00a0I\u00a0will\u00a0then\u00a0wait\u00a0for\u00a0callers\u00a0to\u00a0change\u00a0to\u00a0use\ncircumference\u037e\u00a0once\u00a0they\u00a0do,\u00a0I\u00a0can\u00a0delete\u00a0circum.\u00a0Even\u00a0if\u00a0I\u2019m\u00a0never\u00a0able\u00a0to\u00a0reach\nthe\u00a0happy\u00a0point\u00a0of\u00a0deleting\u00a0circum,\u00a0at\u00a0least\u00a0I\u00a0have\u00a0a\u00a0better\u00a0name\u00a0for\u00a0new\u00a0code.\nExample: Adding a Parameter\nIn\u00a0some\u00a0software,\u00a0to\u00a0manage\u00a0a\u00a0library\u00a0of\u00a0books,\u00a0I\u00a0have\u00a0a\u00a0book\u00a0class\u00a0which\u00a0has\u00a0the\u00a0ability\nto\u00a0take\u00a0a\u00a0reservation\u00a0for\u00a0a\u00a0customer.\nclass\u00a0Book\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\naddReservation(customer)\u00a0{\n\u00a0\u00a0this._reservations.push(customer)\u037e\n}\nI\u00a0need\u00a0to\u00a0support\u00a0a\u00a0priority\u00a0queue\u00a0for\u00a0reservations.\u00a0Thus,\u00a0I\u00a0need\u00a0an\u00a0extra\u00a0parameter\u00a0on\naddReservation\u00a0to\u00a0indicate\u00a0whether\u00a0the\u00a0reservation\u00a0should\u00a0go\u00a0in\u00a0the\u00a0usual\u00a0queue\u00a0or\nthe\u00a0high\u00adpriority\u00a0queue.\u00a0If\u00a0I\u00a0can\u00a0easily\u00a0find\u00a0and\u00a0change\u00a0all\u00a0the\u00a0callers,\u00a0then\u00a0I\u00a0can\u00a0just\u00a0go\nahead\u00a0with\u00a0the\u00a0change\u2014but\u00a0if\u00a0not,\u00a0I\u00a0can\u00a0use\u00a0the\u00a0migration\u00a0approach,\u00a0which\u00a0I\u2019ll\u00a0show\nhere.\nI\u00a0begin\u00a0by\u00a0using\u00a0Extract\u00a0Function\u00a0(106)\u00a0on\u00a0the\u00a0body\u00a0of\u00a0addReservation\u00a0to\u00a0create\u00a0the\nnew\u00a0function.\u00a0Although\u00a0it\u00a0will\u00a0eventually\u00a0be\u00a0called\u00a0addReservation,\u00a0the\u00a0new\u00a0and\u00a0old\nwww.EBooksWorld.ir\n", "page": 146, "type": "text", "section": "Page 146"}
{"text": "functions\u00a0can\u2019t\u00a0coexist\u00a0with\u00a0the\u00a0same\u00a0name.\u00a0So\u00a0I\u00a0use\u00a0a\u00a0temporary\u00a0name\u00a0that\u00a0will\u00a0be\u00a0easy\nto\u00a0search\u00a0for\u00a0later.\nclass\u00a0Book\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\naddReservation(customer)\u00a0{\n\u00a0\u00a0this.zz_addReservation(customer)\u037e\n}\nzz_addReservation(customer)\u00a0{\n\u00a0\u00a0this._reservations.push(customer)\u037e\n}\nI\u00a0then\u00a0add\u00a0the\u00a0parameter\u00a0to\u00a0the\u00a0new\u00a0declaration\u00a0and\u00a0its\u00a0call\u00a0(in\u00a0effect,\u00a0using\u00a0the\u00a0simple\nmechanics).\nclass\u00a0Book\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\naddReservation(customer)\u00a0{\n\u00a0\u00a0this.zz_addReservation(customer,\u00a0false)\u037e\n}\nzz_addReservation(customer,\u00a0isPriority)\u00a0{\n\u00a0\u00a0this._reservations.push(customer)\u037e\n}\nWhen\u00a0I\u00a0use\u00a0JavaScript,\u00a0before\u00a0I\u00a0change\u00a0any\u00a0of\u00a0the\u00a0callers,\u00a0I\u00a0like\u00a0to\u00a0apply\u00a0Introduce\nAssertion\u00a0(302)\u00a0to\u00a0check\u00a0the\u00a0new\u00a0parameter\u00a0is\u00a0used\u00a0by\u00a0the\u00a0caller.\nclass\u00a0Book\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nzz_addReservation(customer,\u00a0isPriority)\u00a0{\n\u00a0\u00a0assert(isPriority\u00a0===\u00a0true\u00a0||\u00a0isPriority\u00a0===\u00a0false)\u037e\n\u00a0\u00a0this._reservations.push(customer)\u037e\n}\nNow,\u00a0when\u00a0I\u00a0change\u00a0the\u00a0callers,\u00a0if\u00a0I\u00a0make\u00a0a\u00a0mistake\u00a0and\u00a0leave\u00a0off\u00a0the\u00a0new\u00a0parameter,\nthis\u00a0assertion\u00a0will\u00a0help\u00a0me\u00a0catch\u00a0the\u00a0mistake.\u00a0And\u00a0I\u00a0know\u00a0from\u00a0long\u00a0experience\u00a0there\nwww.EBooksWorld.ir\n", "page": 147, "type": "text", "section": "Page 147"}
{"text": "are\u00a0few\u00a0more\u00a0mistake\u00adprone\u00a0programmers\u00a0than\u00a0myself.\nNow,\u00a0I\u00a0can\u00a0start\u00a0changing\u00a0the\u00a0callers\u00a0by\u00a0using\u00a0Inline\u00a0Function\u00a0(115)\u00a0on\u00a0the\u00a0original\nfunction.\u00a0This\u00a0allows\u00a0me\u00a0to\u00a0change\u00a0one\u00a0caller\u00a0at\u00a0a\u00a0time.\nI\u00a0then\u00a0rename\u00a0the\u00a0new\u00a0function\u00a0back\u00a0to\u00a0the\u00a0original.\u00a0Usually,\u00a0the\u00a0simple\u00a0mechanics\nwork\u00a0fine\u00a0for\u00a0this,\u00a0but\u00a0I\u00a0can\u00a0also\u00a0use\u00a0the\u00a0migration\u00a0approach\u00a0if\u00a0I\u00a0need\u00a0to.\nExample: Changing a Parameter to One of Its Properties\nThe\u00a0examples\u00a0so\u00a0far\u00a0are\u00a0simple\u00a0changes\u00a0of\u00a0a\u00a0name\u00a0and\u00a0adding\u00a0a\u00a0new\u00a0parameter,\u00a0but\nwith\u00a0the\u00a0migration\u00a0mechanics,\u00a0this\u00a0refactoring\u00a0can\u00a0handle\u00a0more\u00a0complicated\u00a0cases\u00a0quite\nneatly.\u00a0Here\u2019s\u00a0an\u00a0example\u00a0that\u00a0is\u00a0a\u00a0bit\u00a0more\u00a0involved.\nI\u00a0have\u00a0a\u00a0function\u00a0which\u00a0determines\u00a0if\u00a0a\u00a0customer\u00a0is\u00a0based\u00a0in\u00a0New\u00a0England.\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0inNewEngland(aCustomer)\u00a0{\n\u00a0\u00a0return\u00a0[\"MA\",\u00a0\"CT\",\u00a0\"ME\",\u00a0\"VT\",\u00a0\"NH\",\u00a0\"RI\"].includes(aCustomer.address.state)\u037e\n}\nHere\u00a0is\u00a0one\u00a0of\u00a0its\u00a0callers:\ncaller\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nconst\u00a0newEnglanders\u00a0=\u00a0someCustomers.filter(c\u00a0=>\u00a0inNewEngland(c))\u037e\ninNewEngland\u00a0only\u00a0uses\u00a0the\u00a0customer\u2019s\u00a0home\u00a0state\u00a0to\u00a0determine\u00a0if\u00a0it\u2019s\u00a0in\u00a0New\nEngland.\u00a0I\u2019d\u00a0prefer\u00a0to\u00a0refactor\u00a0inNewEngland\u00a0so\u00a0that\u00a0it\u00a0takes\u00a0a\u00a0state\u00a0code\u00a0as\u00a0a\nparameter,\u00a0making\u00a0it\u00a0usable\u00a0in\u00a0more\u00a0contexts\u00a0by\u00a0removing\u00a0the\u00a0dependency\u00a0on\u00a0the\ncustomer.\nWith\u00a0Change\u00a0Function\u00a0Declaration,\u00a0my\u00a0usual\u00a0first\u00a0move\u00a0is\u00a0to\u00a0apply\u00a0Extract\u00a0Function\n(106),\u00a0but\u00a0in\u00a0this\u00a0case\u00a0I\u00a0can\u00a0make\u00a0it\u00a0easier\u00a0by\u00a0first\u00a0refactoring\u00a0the\u00a0function\u00a0body\u00a0a\u00a0little.\u00a0I\nuse\u00a0Extract\u00a0Variable\u00a0(119)\u00a0on\u00a0my\u00a0desired\u00a0new\u00a0parameter.\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nwww.EBooksWorld.ir\n", "page": 148, "type": "text", "section": "Page 148"}
{"text": "function\u00a0inNewEngland(aCustomer)\u00a0{\n\u00a0\u00a0const\u00a0stateCode\u00a0=\u00a0aCustomer.address.state\u037e\n\u00a0\u00a0return\u00a0[\"MA\",\u00a0\"CT\",\u00a0\"ME\",\u00a0\"VT\",\u00a0\"NH\",\u00a0\"RI\"].includes(stateCode)\u037e\n}\nNow\u00a0I\u00a0use\u00a0Extract\u00a0Function\u00a0(106)\u00a0to\u00a0create\u00a0that\u00a0new\u00a0function.\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0inNewEngland(aCustomer)\u00a0{\n\u00a0\u00a0const\u00a0stateCode\u00a0=\u00a0aCustomer.address.state\u037e\n\u00a0\u00a0return\u00a0xxNEWinNewEngland(stateCode)\u037e\n}\nfunction\u00a0xxNEWinNewEngland(stateCode)\u00a0{\n\u00a0\u00a0return\u00a0[\"MA\",\u00a0\"CT\",\u00a0\"ME\",\u00a0\"VT\",\u00a0\"NH\",\u00a0\"RI\"].includes(stateCode)\u037e\n}\nI\u00a0give\u00a0the\u00a0function\u00a0a\u00a0name\u00a0that\u2019s\u00a0easy\u00a0to\u00a0automatically\u00a0replace\u00a0to\u00a0turn\u00a0into\u00a0the\u00a0original\nname\u00a0later.\u00a0(You\u00a0can\u00a0tell\u00a0I\u00a0don\u2019t\u00a0have\u00a0a\u00a0standard\u00a0for\u00a0these\u00a0temporary\u00a0names.)\nI\u00a0apply\u00a0Inline\u00a0Variable\u00a0(123)\u00a0on\u00a0the\u00a0input\u00a0parameter\u00a0in\u00a0the\u00a0original\u00a0function.\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0inNewEngland(aCustomer)\u00a0{\n\u00a0\u00a0return\u00a0xxNEWinNewEngland(aCustomer.address.state)\u037e\n}\nI\u00a0use\u00a0Inline\u00a0Function\u00a0(115)\u00a0to\u00a0fold\u00a0the\u00a0old\u00a0function\u00a0into\u00a0its\u00a0callers,\u00a0effectively\u00a0replacing\nthe\u00a0call\u00a0to\u00a0the\u00a0old\u00a0function\u00a0with\u00a0a\u00a0call\u00a0to\u00a0the\u00a0new\u00a0one.\u00a0I\u00a0can\u00a0do\u00a0these\u00a0one\u00a0at\u00a0a\u00a0time.\ncaller\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nconst\u00a0newEnglanders\u00a0=\u00a0someCustomers.filter(c\u00a0=>\u00a0xxNEWinNewEngland(c.address.stat\nOnce\u00a0I\u2019ve\u00a0inlined\u00a0the\u00a0old\u00a0function\u00a0into\u00a0every\u00a0caller,\u00a0I\u00a0use\u00a0Change\u00a0Function\u00a0Declaration\nagain\u00a0to\u00a0change\u00a0the\u00a0name\u00a0of\u00a0the\u00a0new\u00a0function\u00a0to\u00a0that\u00a0of\u00a0the\u00a0original.\ncaller\u2026\nwww.EBooksWorld.ir\n", "page": 149, "type": "text", "section": "Page 149"}
{"text": "Click\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nconst\u00a0newEnglanders\u00a0=\u00a0someCustomers.filter(c\u00a0=>\u00a0inNewEngland(c.address.state))\u037e\ntop\u00a0level\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0inNewEngland(stateCode)\u00a0{\n\u00a0\u00a0return\u00a0[\"MA\",\u00a0\"CT\",\u00a0\"ME\",\u00a0\"VT\",\u00a0\"NH\",\u00a0\"RI\"].includes(stateCode)\u037e\n}\nAutomated\u00a0refactoring\u00a0tools\u00a0make\u00a0the\u00a0migration\u00a0mechanics\u00a0both\u00a0less\u00a0useful\u00a0and\u00a0more\neffective.\u00a0They\u00a0make\u00a0it\u00a0less\u00a0useful\u00a0because\u00a0they\u00a0handle\u00a0even\u00a0complicated\u00a0renames\u00a0and\nparameter\u00a0changes\u00a0safer,\u00a0so\u00a0I\u00a0don\u2019t\u00a0have\u00a0to\u00a0use\u00a0the\u00a0migration\u00a0approach\u00a0as\u00a0often\u00a0as\u00a0I\u00a0do\nwithout\u00a0that\u00a0support.\u00a0However,\u00a0in\u00a0cases\u00a0like\u00a0this\u00a0example,\u00a0where\u00a0the\u00a0tools\u00a0can\u2019t\u00a0do\u00a0the\nwhole\u00a0refactoring,\u00a0they\u00a0still\u00a0make\u00a0it\u00a0much\u00a0easier\u00a0as\u00a0the\u00a0key\u00a0moves\u00a0of\u00a0extract\u00a0and\u00a0inline\ncan\u00a0be\u00a0done\u00a0more\u00a0quickly\u00a0and\u00a0safely\u00a0with\u00a0the\u00a0tool.\nENCAPSULATE VARIABLE\nformerly:\u00a0Self\u00adEncapsulate\u00a0Field\nformerly:\u00a0Encapsulate\u00a0Field\nMotivation\nwww.EBooksWorld.ir\n", "page": 150, "type": "text", "section": "Page 150"}
{"text": "Refactoring\u00a0is\u00a0all\u00a0about\u00a0manipulating\u00a0the\u00a0elements\u00a0of\u00a0our\u00a0programs.\u00a0Data\u00a0is\u00a0more\nawkward\u00a0to\u00a0manipulate\u00a0than\u00a0functions.\u00a0Since\u00a0using\u00a0a\u00a0function\u00a0usually\u00a0means\u00a0calling\u00a0it,\nI\u00a0can\u00a0easily\u00a0rename\u00a0or\u00a0move\u00a0a\u00a0function\u00a0while\u00a0keeping\u00a0the\u00a0old\u00a0function\u00a0intact\u00a0as\u00a0a\nforwarding\u00a0function\u00a0(so\u00a0my\u00a0old\u00a0code\u00a0calls\u00a0the\u00a0old\u00a0function,\u00a0which\u00a0calls\u00a0the\u00a0new\nfunction).\u00a0I\u2019ll\u00a0usually\u00a0not\u00a0keep\u00a0this\u00a0forwarding\u00a0function\u00a0around\u00a0for\u00a0long,\u00a0but\u00a0it\u00a0does\nsimplify\u00a0the\u00a0refactoring.\nData\u00a0is\u00a0more\u00a0awkward\u00a0because\u00a0I\u00a0can\u2019t\u00a0do\u00a0that.\u00a0If\u00a0I\u00a0move\u00a0data\u00a0around,\u00a0I\u00a0have\u00a0to\u00a0change\nall\u00a0the\u00a0references\u00a0to\u00a0the\u00a0data\u00a0in\u00a0a\u00a0single\u00a0cycle\u00a0to\u00a0keep\u00a0the\u00a0code\u00a0working.\u00a0For\u00a0data\u00a0with\u00a0a\nvery\u00a0small\u00a0scope\u00a0of\u00a0access,\u00a0such\u00a0as\u00a0a\u00a0temporary\u00a0variable\u00a0in\u00a0a\u00a0small\u00a0function,\u00a0this\u00a0isn\u2019t\u00a0a\nproblem.\u00a0But\u00a0as\u00a0the\u00a0scope\u00a0grows,\u00a0so\u00a0does\u00a0the\u00a0difficulty,\u00a0which\u00a0is\u00a0why\u00a0global\u00a0data\u00a0is\u00a0such\na\u00a0pain.\nSo\u00a0if\u00a0I\u00a0want\u00a0to\u00a0move\u00a0widely\u00a0accessed\u00a0data,\u00a0often\u00a0the\u00a0best\u00a0approach\u00a0is\u00a0to\u00a0first\u00a0encapsulate\nit\u00a0by\u00a0routing\u00a0all\u00a0its\u00a0access\u00a0through\u00a0functions.\u00a0That\u00a0way,\u00a0I\u00a0turn\u00a0the\u00a0difficult\u00a0task\u00a0of\nreorganizing\u00a0data\u00a0into\u00a0the\u00a0simpler\u00a0task\u00a0of\u00a0reorganizing\u00a0functions.\nEncapsulating\u00a0data\u00a0is\u00a0valuable\u00a0for\u00a0other\u00a0things\u00a0too.\u00a0It\u00a0provides\u00a0a\u00a0clear\u00a0point\u00a0to\u00a0monitor\nchanges\u00a0and\u00a0use\u00a0of\u00a0the\u00a0data\u037e\u00a0I\u00a0can\u00a0easily\u00a0add\u00a0validation\u00a0or\u00a0consequential\u00a0logic\u00a0on\u00a0the\nupdates.\u00a0It\u00a0is\u00a0my\u00a0habit\u00a0to\u00a0make\u00a0all\u00a0mutable\u00a0data\u00a0encapsulated\u00a0like\u00a0this\u00a0and\u00a0only\naccessed\u00a0through\u00a0functions\u00a0if\u00a0its\u00a0scope\u00a0is\u00a0greater\u00a0than\u00a0a\u00a0single\u00a0function.\u00a0The\u00a0greater\u00a0the\nscope\u00a0of\u00a0the\u00a0data,\u00a0the\u00a0more\u00a0important\u00a0it\u00a0is\u00a0to\u00a0encapsulate.\u00a0My\u00a0approach\u00a0with\u00a0legacy\ncode\u00a0is\u00a0that\u00a0whenever\u00a0I\u00a0need\u00a0to\u00a0change\u00a0or\u00a0add\u00a0a\u00a0new\u00a0reference\u00a0to\u00a0such\u00a0a\u00a0variable,\u00a0I\nshould\u00a0take\u00a0the\u00a0opportunity\u00a0to\u00a0encapsulate\u00a0it.\u00a0That\u00a0way\u00a0I\u00a0prevent\u00a0the\u00a0increase\u00a0of\ncoupling\u00a0to\u00a0commonly\u00a0used\u00a0data.\nThis\u00a0principle\u00a0is\u00a0why\u00a0the\u00a0object\u00adoriented\u00a0approach\u00a0puts\u00a0so\u00a0much\u00a0emphasis\u00a0on\u00a0keeping\nan\u00a0object\u2019s\u00a0data\u00a0private.\u00a0Whenever\u00a0I\u00a0see\u00a0a\u00a0public\u00a0field,\u00a0I\u00a0consider\u00a0using\u00a0Encapsulate\nVariable\u00a0(in\u00a0that\u00a0case\u00a0often\u00a0called\u00a0Encapsulate\u00a0Field)\u00a0to\u00a0reduce\u00a0its\u00a0visibility.\u00a0Some\u00a0go\nfurther\u00a0and\u00a0argue\u00a0that\u00a0even\u00a0internal\u00a0references\u00a0to\u00a0fields\u00a0within\u00a0a\u00a0class\u00a0should\u00a0go\nthrough\u00a0accessor\u00a0functions\u2014an\u00a0approach\u00a0known\u00a0as\u00a0self\u00adencapsulation.\u00a0On\u00a0the\u00a0whole,\u00a0I\nfind\u00a0self\u00adencapsulation\u00a0excessive\u2014if\u00a0a\u00a0class\u00a0is\u00a0so\u00a0big\u00a0that\u00a0I\u00a0need\u00a0to\u00a0self\u00adencapsulate\u00a0its\nfields,\u00a0it\u00a0needs\u00a0to\u00a0be\u00a0broken\u00a0up\u00a0anyway.\u00a0But\u00a0self\u00adencapsulating\u00a0a\u00a0field\u00a0is\u00a0a\u00a0useful\u00a0step\nbefore\u00a0splitting\u00a0a\u00a0class.\nKeeping\u00a0data\u00a0encapsulated\u00a0is\u00a0much\u00a0less\u00a0important\u00a0for\u00a0immutable\u00a0data.\u00a0When\u00a0the\u00a0data\ndoesn\u2019t\u00a0change,\u00a0I\u00a0don\u2019t\u00a0need\u00a0a\u00a0place\u00a0to\u00a0put\u00a0in\u00a0validation\u00a0or\u00a0other\u00a0logic\u00a0hooks\u00a0before\nupdates.\u00a0I\u00a0can\u00a0also\u00a0freely\u00a0copy\u00a0the\u00a0data\u00a0rather\u00a0than\u00a0move\u00a0it\u2014so\u00a0I\u00a0don\u2019t\u00a0have\u00a0to\u00a0change\nreferences\u00a0from\u00a0old\u00a0locations,\u00a0nor\u00a0do\u00a0I\u00a0worry\u00a0about\u00a0sections\u00a0of\u00a0code\u00a0getting\u00a0stale\u00a0data.\nImmutability\u00a0is\u00a0a\u00a0powerful\u00a0preservative.\nMechanics\nwww.EBooksWorld.ir\n", "page": 151, "type": "text", "section": "Page 151"}
{"text": "Mechanics\nCreate\u00a0encapsulating\u00a0functions\u00a0to\u00a0access\u00a0and\u00a0update\u00a0the\u00a0variable.\nRun\u00a0static\u00a0checks.\nFor\u00a0each\u00a0reference\u00a0to\u00a0the\u00a0variable,\u00a0replace\u00a0with\u00a0a\u00a0call\u00a0to\u00a0the\u00a0appropriate\nencapsulating\u00a0function.\u00a0Test\u00a0after\u00a0each\u00a0replacement.\nRestrict\u00a0the\u00a0visibility\u00a0of\u00a0the\u00a0variable.\nSometimes\u00a0it\u2019s\u00a0not\u00a0possible\u00a0to\u00a0prevent\u00a0access\u00a0to\u00a0the\u00a0variable.\u00a0If\u00a0so,\u00a0it\u00a0may\u00a0be\u00a0useful\nto\u00a0detect\u00a0any\u00a0remaining\u00a0references\u00a0by\u00a0renaming\u00a0the\u00a0variable\u00a0and\u00a0testing.\nTest.\nIf\u00a0the\u00a0value\u00a0of\u00a0the\u00a0variable\u00a0is\u00a0a\u00a0record,\u00a0consider\u00a0Encapsulate\u00a0Record\u00a0(162).\nExample\nConsider\u00a0some\u00a0useful\u00a0data\u00a0held\u00a0in\u00a0a\u00a0global\u00a0variable.\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nlet\u00a0defaultOwner\u00a0=\u00a0{firstName:\u00a0\"Martin\",\u00a0lastName:\u00a0\"Fowler\"}\u037e\nLike\u00a0any\u00a0data,\u00a0it\u2019s\u00a0referenced\u00a0with\u00a0code\u00a0like\u00a0this:\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nspaceship.owner\u00a0=\u00a0defaultOwner\u037e\nand\u00a0updated\u00a0like\u00a0this:\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\ndefaultOwner\u00a0=\u00a0{firstName:\u00a0\"Rebecca\",\u00a0lastName:\u00a0\"Parsons\"}\u037e\nTo\u00a0do\u00a0a\u00a0basic\u00a0encapsulation\u00a0on\u00a0this,\u00a0I\u00a0start\u00a0by\u00a0defining\u00a0functions\u00a0to\u00a0read\u00a0and\u00a0write\u00a0the\ndata.\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nwww.EBooksWorld.ir\n", "page": 152, "type": "text", "section": "Page 152"}
{"text": "function\u00a0getDefaultOwner()\u00a0\u00a0\u00a0\u00a0{return\u00a0defaultOwner\u037e}\nfunction\u00a0setDefaultOwner(arg)\u00a0{defaultOwner\u00a0=\u00a0arg\u037e}\nI\u00a0then\u00a0start\u00a0working\u00a0on\u00a0references\u00a0to\u00a0defaultOwner.\u00a0When\u00a0I\u00a0see\u00a0a\u00a0reference,\u00a0I\u00a0replace\nit\u00a0with\u00a0a\u00a0call\u00a0to\u00a0the\u00a0getting\u00a0function.\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nspaceship.owner\u00a0=\u00a0getDefaultOwner()\u037e\nWhen\u00a0I\u00a0see\u00a0an\u00a0assignment,\u00a0I\u00a0replace\u00a0it\u00a0with\u00a0the\u00a0setting\u00a0function.\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nsetDefaultOwner({firstName:\u00a0\"Rebecca\",\u00a0lastName:\u00a0\"Parsons\"})\u037e\nI\u00a0test\u00a0after\u00a0each\u00a0replacement.\nOnce\u00a0I\u2019m\u00a0done\u00a0with\u00a0all\u00a0the\u00a0references,\u00a0I\u00a0restrict\u00a0the\u00a0visibility\u00a0of\u00a0the\u00a0variable.\u00a0This\u00a0both\nchecks\u00a0that\u00a0there\u00a0aren\u2019t\u00a0any\u00a0references\u00a0that\u00a0I\u2019ve\u00a0missed,\u00a0and\u00a0ensures\u00a0that\u00a0future\nchanges\u00a0to\u00a0the\u00a0code\u00a0won\u2019t\u00a0access\u00a0the\u00a0variable\u00a0directly.\u00a0I\u00a0can\u00a0do\u00a0that\u00a0in\u00a0JavaScript\u00a0by\nmoving\u00a0both\u00a0the\u00a0variable\u00a0and\u00a0the\u00a0accessor\u00a0methods\u00a0to\u00a0their\u00a0own\u00a0file\u00a0and\u00a0only\u00a0exporting\nthe\u00a0accessor\u00a0methods.\ndefaultOwner.js\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nlet\u00a0defaultOwner\u00a0=\u00a0{firstName:\u00a0\"Martin\",\u00a0lastName:\u00a0\"Fowler\"}\u037e\nexport\u00a0function\u00a0getDefaultOwner()\u00a0\u00a0\u00a0\u00a0{return\u00a0defaultOwner\u037e}\nexport\u00a0function\u00a0setDefaultOwner(arg)\u00a0{defaultOwner\u00a0=\u00a0arg\u037e}\nIf\u00a0I\u2019m\u00a0in\u00a0a\u00a0situation\u00a0where\u00a0I\u00a0cannot\u00a0restrict\u00a0the\u00a0access\u00a0to\u00a0a\u00a0variable,\u00a0it\u00a0may\u00a0be\u00a0useful\u00a0to\nrename\u00a0the\u00a0variable\u00a0and\u00a0retest.\u00a0That\u00a0won\u2019t\u00a0prevent\u00a0future\u00a0direct\u00a0access,\u00a0but\u00a0naming\u00a0the\nvariable\u00a0something\u00a0meaningful\u00a0and\u00a0awkward\u00a0such\u00a0as\n__privateOnly_defaultOwner\u00a0may\u00a0help.\nI\u00a0don\u2019t\u00a0like\u00a0the\u00a0use\u00a0of\u00a0get\u00a0prefixes\u00a0on\u00a0getters,\u00a0so\u00a0I\u2019ll\u00a0rename\u00a0to\u00a0remove\u00a0it.\ndefaultOwner.js\u2026\nwww.EBooksWorld.ir\n", "page": 153, "type": "text", "section": "Page 153"}
{"text": "Click\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nlet\u00a0defaultOwnerData\u00a0=\u00a0{firstName:\u00a0\"Martin\",\u00a0lastName:\u00a0\"Fowler\"}\u037e\nexport\u00a0function\u00a0getdefaultOwner()\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0{return\u00a0defaultOwnerData\u037e}\nexport\u00a0function\u00a0setDefaultOwner(arg)\u00a0{defaultOwnerData\u00a0=\u00a0arg\u037e}\nA\u00a0common\u00a0convention\u00a0in\u00a0JavaScript\u00a0is\u00a0to\u00a0name\u00a0a\u00a0getting\u00a0function\u00a0and\u00a0setting\u00a0function\nthe\u00a0same\u00a0and\u00a0differentiate\u00a0them\u00a0due\u00a0the\u00a0presence\u00a0of\u00a0an\u00a0argument.\u00a0I\u00a0call\u00a0this\u00a0practice\nOverloaded\u00a0Getter\u00a0Setter\u00a0[mf\u00adogs]\u00a0and\u00a0strongly\u00a0dislike\u00a0it.\u00a0So,\u00a0even\u00a0though\u00a0I\u00a0don\u2019t\u00a0like\nthe\u00a0get\u00a0prefix,\u00a0I\u00a0will\u00a0keep\u00a0the\u00a0set\u00a0prefix.\nEncapsulating the Value\nThe\u00a0basic\u00a0refactoring\u00a0I\u2019ve\u00a0outlined\u00a0here\u00a0encapsulates\u00a0a\u00a0reference\u00a0to\u00a0some\u00a0data\u00a0structure,\nallowing\u00a0me\u00a0to\u00a0control\u00a0its\u00a0access\u00a0and\u00a0reassignment.\u00a0But\u00a0it\u00a0doesn\u2019t\u00a0control\u00a0changes\u00a0to\nthat\u00a0structure.\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nconst\u00a0owner1\u00a0=\u00a0defaultOwner()\u037e\nassert.equal(\"Fowler\",\u00a0owner1.lastName,\u00a0\"when\u00a0set\")\u037e\nconst\u00a0owner2\u00a0=\u00a0defaultOwner()\u037e\nowner2.lastName\u00a0=\u00a0\"Parsons\"\u037e\nassert.equal(\"Parsons\",\u00a0owner1.lastName,\u00a0\"after\u00a0change\u00a0owner2\")\u037e\u00a0//\u00a0is\u00a0this\u00a0ok?\nThe\u00a0basic\u00a0refactoring\u00a0encapsulates\u00a0the\u00a0reference\u00a0to\u00a0the\u00a0data\u00a0item.\u00a0In\u00a0many\u00a0cases,\u00a0this\u00a0is\nall\u00a0I\u00a0want\u00a0to\u00a0do\u00a0for\u00a0the\u00a0moment.\u00a0But\u00a0I\u00a0often\u00a0want\u00a0to\u00a0take\u00a0the\u00a0encapsulation\u00a0deeper\u00a0to\ncontrol\u00a0not\u00a0just\u00a0changes\u00a0to\u00a0the\u00a0variable\u00a0but\u00a0also\u00a0to\u00a0its\u00a0contents.\nFor\u00a0this,\u00a0I\u00a0have\u00a0a\u00a0couple\u00a0of\u00a0options.\u00a0The\u00a0simplest\u00a0one\u00a0is\u00a0to\u00a0prevent\u00a0any\u00a0changes\u00a0to\u00a0the\nvalue.\u00a0My\u00a0favorite\u00a0way\u00a0to\u00a0handle\u00a0this\u00a0is\u00a0by\u00a0modifying\u00a0the\u00a0getting\u00a0function\u00a0to\u00a0return\u00a0a\ncopy\u00a0of\u00a0the\u00a0data.\ndefaultOwner.js\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nlet\u00a0defaultOwnerData\u00a0=\u00a0{firstName:\u00a0\"Martin\",\u00a0lastName:\u00a0\"Fowler\"}\u037e\nexport\u00a0function\u00a0defaultOwner()\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0{return\u00a0Object.assign({},\u00a0defaultOwnerData)\nexport\u00a0function\u00a0setDefaultOwner(arg)\u00a0{defaultOwnerData\u00a0=\u00a0arg\u037e}\nwww.EBooksWorld.ir\n", "page": 154, "type": "text", "section": "Page 154"}
{"text": "I\u00a0use\u00a0this\u00a0approach\u00a0particularly\u00a0often\u00a0with\u00a0lists.\u00a0If\u00a0I\u00a0return\u00a0a\u00a0copy\u00a0of\u00a0the\u00a0data,\u00a0any\u00a0clients\nusing\u00a0it\u00a0can\u00a0change\u00a0it,\u00a0but\u00a0that\u00a0change\u00a0isn\u2019t\u00a0reflected\u00a0in\u00a0the\u00a0shared\u00a0data.\u00a0I\u00a0have\u00a0to\u00a0be\ncareful\u00a0with\u00a0using\u00a0copies,\u00a0however:\u00a0Some\u00a0code\u00a0may\u00a0expect\u00a0to\u00a0change\u00a0shared\u00a0data.\u00a0If\nthat\u2019s\u00a0the\u00a0case,\u00a0I\u2019m\u00a0relying\u00a0on\u00a0my\u00a0tests\u00a0to\u00a0detect\u00a0a\u00a0problem.\u00a0An\u00a0alternative\u00a0is\u00a0to\u00a0prevent\nchanges\u2014and\u00a0a\u00a0good\u00a0way\u00a0of\u00a0doing\u00a0that\u00a0is\u00a0Encapsulate\u00a0Record\u00a0(162).\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nlet\u00a0defaultOwnerData\u00a0=\u00a0{firstName:\u00a0\"Martin\",\u00a0lastName:\u00a0\"Fowler\"}\u037e\nexport\u00a0function\u00a0defaultOwner()\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0{return\u00a0new\u00a0Person(defaultOwnerData)\u037e}\nexport\u00a0function\u00a0setDefaultOwner(arg)\u00a0{defaultOwnerData\u00a0=\u00a0arg\u037e}\n\u00a0\u00a0class\u00a0Person\u00a0{\n\u00a0\u00a0\u00a0\u00a0constructor(data)\u00a0{\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0this._lastName\u00a0=\u00a0data.lastName\u037e\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0this._firstName\u00a0=\u00a0data.firstName\n\u00a0\u00a0\u00a0\u00a0}\n\u00a0\u00a0\u00a0\u00a0get\u00a0lastName()\u00a0{return\u00a0this._lastName\u037e}\n\u00a0\u00a0\u00a0\u00a0get\u00a0firstName()\u00a0{return\u00a0this._firstName\u037e}\n\u00a0\u00a0\u00a0\u00a0//\u00a0and\u00a0so\u00a0on\u00a0for\u00a0other\u00a0properties\nNow,\u00a0any\u00a0attempt\u00a0to\u00a0reassign\u00a0the\u00a0properties\u00a0of\u00a0the\u00a0default\u00a0owner\u00a0will\u00a0cause\u00a0an\u00a0error.\nDifferent\u00a0languages\u00a0have\u00a0different\u00a0techniques\u00a0to\u00a0detect\u00a0or\u00a0prevent\u00a0changes\u00a0like\u00a0this,\u00a0so\ndepending\u00a0on\u00a0the\u00a0language\u00a0I\u2019d\u00a0consider\u00a0other\u00a0options.\nDetecting\u00a0and\u00a0preventing\u00a0changes\u00a0like\u00a0this\u00a0is\u00a0often\u00a0worthwhile\u00a0as\u00a0a\u00a0temporary\u00a0measure.\nI\u00a0can\u00a0either\u00a0remove\u00a0the\u00a0changes,\u00a0or\u00a0provide\u00a0suitable\u00a0mutating\u00a0functions.\u00a0Then,\u00a0once\nthey\u00a0are\u00a0all\u00a0dealt\u00a0with,\u00a0I\u00a0can\u00a0modify\u00a0the\u00a0getting\u00a0method\u00a0to\u00a0return\u00a0a\u00a0copy.\nSo\u00a0far\u00a0I\u2019ve\u00a0talked\u00a0about\u00a0copying\u00a0on\u00a0getting\u00a0data,\u00a0but\u00a0it\u00a0may\u00a0be\u00a0worthwhile\u00a0to\u00a0make\u00a0a\ncopy\u00a0in\u00a0the\u00a0setter\u00a0too.\u00a0That\u00a0will\u00a0depend\u00a0on\u00a0where\u00a0the\u00a0data\u00a0comes\u00a0from\u00a0and\u00a0whether\u00a0I\nneed\u00a0to\u00a0maintain\u00a0a\u00a0link\u00a0to\u00a0reflect\u00a0any\u00a0changes\u00a0in\u00a0that\u00a0original\u00a0data.\u00a0If\u00a0I\u00a0don\u2019t\u00a0need\u00a0such\na\u00a0link,\u00a0a\u00a0copy\u00a0prevents\u00a0accidents\u00a0due\u00a0to\u00a0changes\u00a0on\u00a0that\u00a0source\u00a0data.\u00a0Taking\u00a0a\u00a0copy\u00a0may\nbe\u00a0superfluous\u00a0most\u00a0of\u00a0the\u00a0time,\u00a0but\u00a0copies\u00a0in\u00a0these\u00a0cases\u00a0usually\u00a0have\u00a0a\u00a0negligible\neffect\u00a0on\u00a0performance\u037e\u00a0on\u00a0the\u00a0other\u00a0hand,\u00a0if\u00a0I\u00a0don\u2019t\u00a0do\u00a0them,\u00a0there\u00a0is\u00a0a\u00a0risk\u00a0of\u00a0a\u00a0long\u00a0and\ndifficult\u00a0bout\u00a0of\u00a0debugging\u00a0in\u00a0the\u00a0future.\nRemember\u00a0that\u00a0the\u00a0copying\u00a0above,\u00a0and\u00a0the\u00a0class\u00a0wrapper,\u00a0both\u00a0only\u00a0work\u00a0one\u00a0level\ndeep\u00a0in\u00a0the\u00a0record\u00a0structure.\u00a0Going\u00a0deeper\u00a0requires\u00a0more\u00a0levels\u00a0of\u00a0copies\u00a0or\u00a0object\nwrapping.\nAs\u00a0you\u00a0can\u00a0see,\u00a0encapsulating\u00a0data\u00a0is\u00a0valuable,\u00a0but\u00a0often\u00a0not\u00a0straightforward.\u00a0Exactly\nwww.EBooksWorld.ir\n", "page": 155, "type": "text", "section": "Page 155"}
{"text": "what\u00a0to\u00a0encapsulate\u2014and\u00a0how\u00a0to\u00a0do\u00a0it\u2014depends\u00a0on\u00a0the\u00a0way\u00a0the\u00a0data\u00a0is\u00a0being\u00a0used\u00a0and\nthe\u00a0changes\u00a0I\u00a0have\u00a0in\u00a0mind.\u00a0But\u00a0the\u00a0more\u00a0widely\u00a0it\u2019s\u00a0used,\u00a0the\u00a0more\u00a0it\u2019s\u00a0worth\u00a0my\nattention\u00a0to\u00a0encapsulate\u00a0properly.\nRENAME VARIABLE\nMotivation\nNaming\u00a0things\u00a0well\u00a0is\u00a0the\u00a0heart\u00a0of\u00a0clear\u00a0programming.\u00a0Variables\u00a0can\u00a0do\u00a0a\u00a0lot\u00a0to\u00a0explain\nwhat\u00a0I\u2019m\u00a0up\u00a0to\u2014if\u00a0I\u00a0name\u00a0them\u00a0well.\u00a0But\u00a0I\u00a0frequently\u00a0get\u00a0my\u00a0names\u00a0wrong\u2014sometimes\nbecause\u00a0I\u2019m\u00a0not\u00a0thinking\u00a0carefully\u00a0enough,\u00a0sometimes\u00a0because\u00a0my\u00a0understanding\u00a0of\u00a0the\nproblem\u00a0improves\u00a0as\u00a0I\u00a0learn\u00a0more,\u00a0and\u00a0sometimes\u00a0because\u00a0the\u00a0program\u2019s\u00a0purpose\nchanges\u00a0as\u00a0my\u00a0users\u2019\u00a0needs\u00a0change.\nEven\u00a0more\u00a0than\u00a0most\u00a0program\u00a0elements,\u00a0the\u00a0importance\u00a0of\u00a0a\u00a0name\u00a0depends\u00a0on\u00a0how\nwidely\u00a0it\u2019s\u00a0used.\u00a0A\u00a0variable\u00a0used\u00a0in\u00a0a\u00a0one\u00adline\u00a0lambda\u00a0expression\u00a0is\u00a0usually\u00a0easy\u00a0to\nfollow\u2014I\u00a0often\u00a0use\u00a0a\u00a0single\u00a0letter\u00a0in\u00a0that\u00a0case\u00a0since\u00a0the\u00a0variable\u2019s\u00a0purpose\u00a0is\u00a0clear\u00a0from\nits\u00a0context.\u00a0Parameters\u00a0for\u00a0short\u00a0functions\u00a0can\u00a0often\u00a0be\u00a0terse\u00a0for\u00a0the\u00a0same\u00a0reason,\nalthough\u00a0in\u00a0a\u00a0dynamically\u00a0typed\u00a0language\u00a0like\u00a0JavaScript,\u00a0I\u00a0do\u00a0like\u00a0to\u00a0put\u00a0the\u00a0type\u00a0into\nthe\u00a0name\u00a0(hence\u00a0parameter\u00a0names\u00a0like\u00a0aCustomer).\nPersistent\u00a0fields\u00a0that\u00a0last\u00a0beyond\u00a0a\u00a0single\u00a0function\u00a0invocation\u00a0require\u00a0more\u00a0careful\nnaming.\u00a0This\u00a0is\u00a0where\u00a0I\u2019m\u00a0likely\u00a0to\u00a0put\u00a0most\u00a0of\u00a0my\u00a0attention.\nMechanics\nIf\u00a0the\u00a0variable\u00a0is\u00a0used\u00a0widely,\u00a0consider\u00a0Encapsulate\u00a0Variable\u00a0(132).\nFind\u00a0all\u00a0references\u00a0to\u00a0the\u00a0variable,\u00a0and\u00a0change\u00a0every\u00a0one.\nIf\u00a0there\u00a0are\u00a0references\u00a0from\u00a0another\u00a0code\u00a0base,\u00a0the\u00a0variable\u00a0is\u00a0a\u00a0published\u00a0variable,\nwww.EBooksWorld.ir\n", "page": 156, "type": "text", "section": "Page 156"}
{"text": "and\u00a0you\u00a0cannot\u00a0do\u00a0this\u00a0refactoring.\nIf\u00a0the\u00a0variable\u00a0does\u00a0not\u00a0change,\u00a0you\u00a0can\u00a0copy\u00a0it\u00a0to\u00a0one\u00a0with\u00a0the\u00a0new\u00a0name,\u00a0then\nchange\u00a0gradually,\u00a0testing\u00a0after\u00a0each\u00a0change.\nTest.\nExample\nThe\u00a0simplest\u00a0case\u00a0for\u00a0renaming\u00a0a\u00a0variable\u00a0is\u00a0when\u00a0it\u2019s\u00a0local\u00a0to\u00a0a\u00a0single\u00a0function:\u00a0a\u00a0temp\nor\u00a0argument.\u00a0It\u2019s\u00a0too\u00a0trivial\u00a0for\u00a0even\u00a0an\u00a0example:\u00a0I\u00a0just\u00a0find\u00a0each\u00a0reference\u00a0and\u00a0change\nit.\u00a0After\u00a0I\u2019m\u00a0done,\u00a0I\u00a0test\u00a0to\u00a0ensure\u00a0I\u00a0didn\u2019t\u00a0mess\u00a0up.\nProblems\u00a0occur\u00a0when\u00a0the\u00a0variable\u00a0has\u00a0a\u00a0wider\u00a0scope\u00a0than\u00a0just\u00a0a\u00a0single\u00a0function.\u00a0There\nmay\u00a0be\u00a0a\u00a0lot\u00a0of\u00a0references\u00a0all\u00a0over\u00a0the\u00a0code\u00a0base:\nlet\u00a0tpHd\u00a0=\u00a0\"untitled\"\u037e\nSome\u00a0references\u00a0access\u00a0the\u00a0variable:\nresult\u00a0+=\u00a0`<h1>${tpHd}</h1>`\u037e\nOthers\u00a0update\u00a0it:\ntpHd\u00a0=\u00a0obj['articleTitle']\u037e\nMy\u00a0usual\u00a0response\u00a0to\u00a0this\u00a0is\u00a0apply\u00a0Encapsulate\u00a0Variable\u00a0(132).\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nresult\u00a0+=\u00a0`<h1>${title()}</h1>`\u037e\nsetTitle(obj['articleTitle'])\u037e\n\u00a0\u00a0function\u00a0title()\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0{return\u00a0tpHd\u037e}\n\u00a0\u00a0function\u00a0setTitle(arg)\u00a0{tpHd\u00a0=\u00a0arg\u037e}\nAt\u00a0this\u00a0point,\u00a0I\u00a0can\u00a0rename\u00a0the\u00a0variable.\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nwww.EBooksWorld.ir\n", "page": 157, "type": "text", "section": "Page 157"}
{"text": "let\u00a0_title\u00a0=\u00a0\"untitled\"\u037e\nfunction\u00a0title()\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0{return\u00a0_title\u037e}\nfunction\u00a0setTitle(arg)\u00a0{_title\u00a0=\u00a0arg\u037e}\nI\u00a0could\u00a0continue\u00a0by\u00a0inlining\u00a0the\u00a0wrapping\u00a0functions\u00a0so\u00a0all\u00a0callers\u00a0are\u00a0using\u00a0the\u00a0variable\ndirectly.\u00a0But\u00a0I\u2019d\u00a0rarely\u00a0want\u00a0to\u00a0do\u00a0this.\u00a0If\u00a0the\u00a0variable\u00a0is\u00a0used\u00a0widely\u00a0enough\u00a0that\u00a0I\u00a0feel\nthe\u00a0need\u00a0to\u00a0encapsulate\u00a0it\u00a0in\u00a0order\u00a0to\u00a0change\u00a0its\u00a0name,\u00a0it\u2019s\u00a0worth\u00a0keeping\u00a0it\nencapsulated\u00a0behind\u00a0functions\u00a0for\u00a0the\u00a0future.\nIn\u00a0cases\u00a0where\u00a0I\u00a0was\u00a0going\u00a0to\u00a0inline,\u00a0I\u2019d\u00a0call\u00a0the\u00a0getting\u00a0function\u00a0getTitle\u00a0and\u00a0not\u00a0use\nan\u00a0underscore\u00a0for\u00a0the\u00a0variable\u00a0name\u00a0when\u00a0I\u00a0rename\u00a0it.\nRenaming a Constant\nIf\u00a0I\u2019m\u00a0renaming\u00a0a\u00a0constant\u00a0(or\u00a0something\u00a0that\u00a0acts\u00a0like\u00a0a\u00a0constant\u00a0to\u00a0clients)\u00a0I\u00a0can\u00a0avoid\nencapsulation,\u00a0and\u00a0still\u00a0do\u00a0the\u00a0rename\u00a0gradually,\u00a0by\u00a0copying.\u00a0If\u00a0the\u00a0original\u00a0declaration\nlooks\u00a0like\u00a0this:\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nconst\u00a0cpyNm\u00a0=\u00a0\"Acme\u00a0Gooseberries\"\u037e\nI\u00a0can\u00a0begin\u00a0the\u00a0renaming\u00a0by\u00a0making\u00a0a\u00a0copy:\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nconst\u00a0companyName\u00a0=\u00a0\"Acme\u00a0Gooseberries\"\u037e\nconst\u00a0cpyNm\u00a0=\u00a0companyName\u037e\nWith\u00a0the\u00a0copy,\u00a0I\u00a0can\u00a0gradually\u00a0change\u00a0references\u00a0from\u00a0the\u00a0old\u00a0name\u00a0to\u00a0the\u00a0new\u00a0name.\nWhen\u00a0I\u2019m\u00a0done,\u00a0I\u00a0remove\u00a0the\u00a0copy.\u00a0I\u00a0prefer\u00a0to\u00a0declare\u00a0the\u00a0new\u00a0name\u00a0and\u00a0copy\u00a0to\u00a0the\u00a0old\nname\u00a0if\u00a0it\u00a0makes\u00a0it\u00a0a\u00a0tad\u00a0easier\u00a0to\u00a0remove\u00a0the\u00a0old\u00a0name\u00a0and\u00a0put\u00a0it\u00a0back\u00a0again\u00a0should\u00a0a\ntest\u00a0fail.\nThis\u00a0works\u00a0for\u00a0constants\u00a0as\u00a0well\u00a0as\u00a0for\u00a0variables\u00a0that\u00a0are\u00a0read\u00adonly\u00a0to\u00a0clients\u00a0(such\u00a0as\u00a0an\nexported\u00a0variable\u00a0in\u00a0JavaScript).\nINTRODUCE PARAMETER OBJECT\nwww.EBooksWorld.ir\n", "page": 158, "type": "text", "section": "Page 158"}
{"text": "Motivation\nI\u00a0often\u00a0see\u00a0groups\u00a0of\u00a0data\u00a0items\u00a0that\u00a0regularly\u00a0travel\u00a0together,\u00a0appearing\u00a0in\u00a0function\nafter\u00a0function.\u00a0Such\u00a0a\u00a0group\u00a0is\u00a0a\u00a0data\u00a0clump,\u00a0and\u00a0I\u00a0like\u00a0to\u00a0replace\u00a0it\u00a0with\u00a0a\u00a0single\u00a0data\nstructure.\nGrouping\u00a0data\u00a0into\u00a0a\u00a0structure\u00a0is\u00a0valuable\u00a0because\u00a0it\u00a0makes\u00a0explicit\u00a0the\u00a0relationship\nbetween\u00a0the\u00a0data\u00a0items.\u00a0It\u00a0reduces\u00a0the\u00a0size\u00a0of\u00a0parameter\u00a0lists\u00a0for\u00a0any\u00a0function\u00a0that\u00a0uses\nthe\u00a0new\u00a0structure.\u00a0It\u00a0helps\u00a0consistency\u00a0since\u00a0all\u00a0functions\u00a0that\u00a0use\u00a0the\u00a0structure\u00a0will\u00a0use\nthe\u00a0same\u00a0names\u00a0to\u00a0get\u00a0at\u00a0its\u00a0elements.\nBut\u00a0the\u00a0real\u00a0power\u00a0of\u00a0this\u00a0refactoring\u00a0is\u00a0how\u00a0it\u00a0enables\u00a0deeper\u00a0changes\u00a0to\u00a0the\u00a0code.\nWhen\u00a0I\u00a0identify\u00a0these\u00a0new\u00a0structures,\u00a0I\u00a0can\u00a0reorient\u00a0the\u00a0behavior\u00a0of\u00a0the\u00a0program\u00a0to\u00a0use\nthese\u00a0structures.\u00a0I\u00a0will\u00a0create\u00a0functions\u00a0that\u00a0capture\u00a0the\u00a0common\u00a0behavior\u00a0over\u00a0this\ndata\u2014either\u00a0as\u00a0a\u00a0set\u00a0of\u00a0common\u00a0functions\u00a0or\u00a0as\u00a0a\u00a0class\u00a0that\u00a0combines\u00a0the\u00a0data\u00a0structure\nwith\u00a0these\u00a0functions.\u00a0This\u00a0process\u00a0can\u00a0change\u00a0the\u00a0conceptual\u00a0picture\u00a0of\u00a0the\u00a0code,\nraising\u00a0these\u00a0structures\u00a0as\u00a0new\u00a0abstractions\u00a0that\u00a0can\u00a0greatly\u00a0simplify\u00a0my\u00a0understanding\nof\u00a0the\u00a0domain.\u00a0When\u00a0this\u00a0works,\u00a0it\u00a0can\u00a0have\u00a0surprisingly\u00a0powerful\u00a0effects\u2014but\u00a0none\u00a0of\nthis\u00a0is\u00a0possible\u00a0unless\u00a0I\u00a0use\u00a0Introduce\u00a0Parameter\u00a0Object\u00a0to\u00a0begin\u00a0the\u00a0process.\nMechanics\nIf\u00a0there\u00a0isn\u2019t\u00a0a\u00a0suitable\u00a0structure\u00a0already,\u00a0create\u00a0one.\nI\u00a0prefer\u00a0to\u00a0use\u00a0a\u00a0class,\u00a0as\u00a0that\u00a0makes\u00a0it\u00a0easier\u00a0to\u00a0group\u00a0behavior\u00a0later\u00a0on.\u00a0I\u00a0usually\nlike\u00a0to\u00a0ensure\u00a0these\u00a0structures\u00a0are\u00a0value\u00a0objects\u00a0[mf\u00advo].\nTest.\nwww.EBooksWorld.ir\n", "page": 159, "type": "text", "section": "Page 159"}
{"text": "Use\u00a0Change\u00a0Function\u00a0Declaration\u00a0(124)\u00a0to\u00a0add\u00a0a\u00a0parameter\u00a0for\u00a0the\u00a0new\u00a0structure.\nTest.\nAdjust\u00a0each\u00a0caller\u00a0to\u00a0pass\u00a0in\u00a0the\u00a0correct\u00a0instance\u00a0of\u00a0the\u00a0new\u00a0structure.\u00a0Test\u00a0after\neach\u00a0one.\nFor\u00a0each\u00a0element\u00a0of\u00a0the\u00a0new\u00a0structure,\u00a0replace\u00a0the\u00a0use\u00a0of\u00a0the\u00a0original\u00a0parameter\nwith\u00a0the\u00a0element\u00a0of\u00a0the\u00a0structure.\u00a0Remove\u00a0the\u00a0parameter.\u00a0Test.\nExample\nI\u2019ll\u00a0begin\u00a0with\u00a0some\u00a0code\u00a0that\u00a0looks\u00a0at\u00a0a\u00a0set\u00a0of\u00a0temperature\u00a0readings\u00a0and\u00a0determines\nwhether\u00a0any\u00a0of\u00a0them\u00a0fall\u00a0outside\u00a0of\u00a0an\u00a0operating\u00a0range.\u00a0Here\u2019s\u00a0what\u00a0the\u00a0data\u00a0looks\u00a0like\nfor\u00a0the\u00a0readings:\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nconst\u00a0station\u00a0=\u00a0{\u00a0name:\u00a0\"ZB1\",\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0readings:\u00a0[\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0{temp:\u00a047,\u00a0time:\u00a0\"2016\u00ad11\u00ad10\u00a009:10\"},\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0{temp:\u00a053,\u00a0time:\u00a0\"2016\u00ad11\u00ad10\u00a009:20\"},\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0{temp:\u00a058,\u00a0time:\u00a0\"2016\u00ad11\u00ad10\u00a009:30\"},\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0{temp:\u00a053,\u00a0time:\u00a0\"2016\u00ad11\u00ad10\u00a009:40\"},\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0{temp:\u00a051,\u00a0time:\u00a0\"2016\u00ad11\u00ad10\u00a009:50\"},\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0]\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0}\u037e\nI\u00a0have\u00a0a\u00a0function\u00a0to\u00a0find\u00a0the\u00a0readings\u00a0that\u00a0are\u00a0outside\u00a0a\u00a0temperature\u00a0range.\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0readingsOutsideRange(station,\u00a0min,\u00a0max)\u00a0{\n\u00a0\u00a0return\u00a0station.readings\n\u00a0\u00a0\u00a0\u00a0.filter(r\u00a0=>\u00a0r.temp\u00a0<\u00a0min\u00a0||\u00a0r.temp\u00a0>\u00a0max)\u037e\n}\nIt\u00a0might\u00a0be\u00a0called\u00a0from\u00a0some\u00a0code\u00a0like\u00a0this:\ncaller\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nalerts\u00a0=\u00a0readingsOutsideRange(station,\nwww.EBooksWorld.ir\n", "page": 160, "type": "text", "section": "Page 160"}
{"text": "\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0operatingPlan.temperatureFloor,\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0operatingPlan.temperatureCeiling)\u037e\nNotice\u00a0how\u00a0the\u00a0calling\u00a0code\u00a0pulls\u00a0the\u00a0two\u00a0data\u00a0items\u00a0as\u00a0a\u00a0pair\u00a0from\u00a0another\u00a0object\u00a0and\npasses\u00a0the\u00a0pair\u00a0into\u00a0readingsOutsideRange.\u00a0The\u00a0operating\u00a0plan\u00a0uses\u00a0different\nnames\u00a0to\u00a0indicate\u00a0the\u00a0start\u00a0and\u00a0end\u00a0of\u00a0the\u00a0range\u00a0compared\u00a0to\nreadingsOutsideRange.\u00a0A\u00a0range\u00a0like\u00a0this\u00a0is\u00a0a\u00a0common\u00a0case\u00a0where\u00a0two\u00a0separate\u00a0data\nitems\u00a0are\u00a0better\u00a0combined\u00a0into\u00a0a\u00a0single\u00a0object.\u00a0I\u2019ll\u00a0begin\u00a0by\u00a0declaring\u00a0a\u00a0class\u00a0for\u00a0the\ncombined\u00a0data.\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nclass\u00a0NumberRange\u00a0{\n\u00a0\u00a0constructor(min,\u00a0max)\u00a0{\n\u00a0\u00a0\u00a0\u00a0this._data\u00a0=\u00a0{min:\u00a0min,\u00a0max:\u00a0max}\u037e\n\u00a0\u00a0}\n\u00a0\u00a0get\u00a0min()\u00a0{return\u00a0this._data.min\u037e}\n\u00a0\u00a0get\u00a0max()\u00a0{return\u00a0this._data.max\u037e}\n}\nI\u00a0declare\u00a0a\u00a0class,\u00a0rather\u00a0than\u00a0just\u00a0using\u00a0a\u00a0basic\u00a0JavaScript\u00a0object,\u00a0because\u00a0I\u00a0usually\u00a0find\nthis\u00a0refactoring\u00a0to\u00a0be\u00a0a\u00a0first\u00a0step\u00a0to\u00a0moving\u00a0behavior\u00a0into\u00a0the\u00a0newly\u00a0created\u00a0object.\u00a0Since\na\u00a0class\u00a0makes\u00a0sense\u00a0for\u00a0this,\u00a0I\u00a0go\u00a0right\u00a0ahead\u00a0and\u00a0use\u00a0one\u00a0directly.\u00a0I\u00a0also\u00a0don\u2019t\u00a0provide\nany\u00a0update\u00a0methods\u00a0for\u00a0the\u00a0new\u00a0class,\u00a0as\u00a0I\u2019ll\u00a0probably\u00a0make\u00a0this\u00a0a\u00a0Value\u00a0Object\u00a0[mf\u00advo].\nMost\u00a0times\u00a0I\u00a0do\u00a0this\u00a0refactoring,\u00a0I\u00a0create\u00a0value\u00a0objects.\nI\u00a0then\u00a0use\u00a0Change\u00a0Function\u00a0Declaration\u00a0(124)\u00a0to\u00a0add\u00a0the\u00a0new\u00a0object\u00a0as\u00a0a\u00a0parameter\u00a0to\nreadingsOutsideRange.\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0readingsOutsideRange(station,\u00a0min,\u00a0max,\u00a0range)\u00a0{\n\u00a0\u00a0return\u00a0station.readings\n\u00a0\u00a0\u00a0\u00a0.filter(r\u00a0=>\u00a0r.temp\u00a0<\u00a0min\u00a0||\u00a0r.temp\u00a0>\u00a0max)\u037e\n}\nIn\u00a0JavaScript,\u00a0I\u00a0can\u00a0leave\u00a0the\u00a0caller\u00a0as\u00a0is,\u00a0but\u00a0in\u00a0other\u00a0languages\u00a0I\u2019d\u00a0have\u00a0to\u00a0add\u00a0a\u00a0null\nfor\u00a0the\u00a0new\u00a0parameter\u00a0which\u00a0would\u00a0look\u00a0something\u00a0like\u00a0this:\ncaller\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nwww.EBooksWorld.ir\n", "page": 161, "type": "text", "section": "Page 161"}
{"text": "alerts\u00a0=\u00a0readingsOutsideRange(station,\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0operatingPlan.temperatureFloor,\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0operatingPlan.temperatureCeiling,\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0null)\u037e\nAt\u00a0this\u00a0point\u00a0I\u00a0haven\u2019t\u00a0changed\u00a0any\u00a0behavior,\u00a0and\u00a0tests\u00a0should\u00a0still\u00a0pass.\u00a0I\u00a0then\u00a0go\u00a0to\neach\u00a0caller\u00a0and\u00a0adjust\u00a0it\u00a0to\u00a0pass\u00a0in\u00a0the\u00a0correct\u00a0date\u00a0range.\ncaller\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nconst\u00a0range\u00a0=\u00a0new\u00a0NumberRange(operatingPlan.temperatureFloor,\u00a0operatingPlan.temp\nalerts\u00a0=\u00a0readingsOutsideRange(station,\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0operatingPlan.temperatureFloor,\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0operatingPlan.temperatureCeiling,\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0range)\u037e\nI\u00a0still\u00a0haven\u2019t\u00a0altered\u00a0any\u00a0behavior\u00a0yet,\u00a0as\u00a0the\u00a0parameter\u00a0isn\u2019t\u00a0used.\u00a0All\u00a0tests\u00a0should\u00a0still\nwork.\nNow\u00a0I\u00a0can\u00a0start\u00a0replacing\u00a0the\u00a0usage\u00a0of\u00a0the\u00a0parameters.\u00a0I\u2019ll\u00a0start\u00a0with\u00a0the\u00a0maximum.\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0readingsOutsideRange(station,\u00a0min,\u00a0max,\u00a0range)\u00a0{\n\u00a0\u00a0return\u00a0station.readings\n\u00a0\u00a0\u00a0\u00a0.filter(r\u00a0=>\u00a0r.temp\u00a0<\u00a0min\u00a0||\u00a0r.temp\u00a0>\u00a0range.max)\u037e\n}\ncaller\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nconst\u00a0range\u00a0=\u00a0new\u00a0NumberRange(operatingPlan.temperatureFloor,\u00a0operatingPlan.temp\nalerts\u00a0=\u00a0readingsOutsideRange(station,\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0operatingPlan.temperatureFloor,\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0operatingPlan.temperatureCeiling,\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0range)\u037e\nI\u00a0can\u00a0test\u00a0at\u00a0this\u00a0point,\u00a0then\u00a0remove\u00a0the\u00a0other\u00a0parameter.\nwww.EBooksWorld.ir\n", "page": 162, "type": "text", "section": "Page 162"}
{"text": "Click\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0readingsOutsideRange(station,\u00a0min,\u00a0range)\u00a0{\n\u00a0\u00a0return\u00a0station.readings\n\u00a0\u00a0\u00a0\u00a0.filter(r\u00a0=>\u00a0r.temp\u00a0<\u00a0range.min\u00a0||\u00a0r.temp\u00a0>\u00a0range.max)\u037e\n}\ncaller\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nconst\u00a0range\u00a0=\u00a0new\u00a0NumberRange(operatingPlan.temperatureFloor,\u00a0operatingPlan.temp\nalerts\u00a0=\u00a0readingsOutsideRange(station,\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0operatingPlan.temperatureFloor,\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0range)\u037e\nThat\u00a0completes\u00a0this\u00a0refactoring.\u00a0However,\u00a0replacing\u00a0a\u00a0clump\u00a0of\u00a0parameters\u00a0with\u00a0a\u00a0real\nobject\u00a0is\u00a0just\u00a0the\u00a0setup\u00a0for\u00a0the\u00a0really\u00a0good\u00a0stuff.\u00a0The\u00a0great\u00a0benefits\u00a0of\u00a0making\u00a0a\u00a0class\u00a0like\nthis\u00a0is\u00a0that\u00a0I\u00a0can\u00a0then\u00a0move\u00a0behavior\u00a0into\u00a0the\u00a0new\u00a0class.\u00a0In\u00a0this\u00a0case,\u00a0I\u2019d\u00a0add\u00a0a\u00a0method\nfor\u00a0range\u00a0that\u00a0tests\u00a0if\u00a0a\u00a0value\u00a0falls\u00a0within\u00a0the\u00a0range.\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0readingsOutsideRange(station,\u00a0range)\u00a0{\n\u00a0\u00a0return\u00a0station.readings\n\u00a0\u00a0\u00a0\u00a0.filter(r\u00a0=>\u00a0!range.contains(r.temp))\u037e\n}\nclass\u00a0NumberRange\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\ncontains(arg)\u00a0{return\u00a0(arg\u00a0>=\u00a0this.min\u00a0&&\u00a0arg\u00a0<=\u00a0this.max)\u037e}\nThis\u00a0is\u00a0a\u00a0first\u00a0step\u00a0to\u00a0creating\u00a0a\u00a0range\u00a0[mf\u00adrange]\u00a0that\u00a0can\u00a0take\u00a0on\u00a0a\u00a0lot\u00a0of\u00a0useful\nbehavior.\u00a0Once\u00a0I\u2019ve\u00a0identified\u00a0the\u00a0need\u00a0for\u00a0a\u00a0range\u00a0in\u00a0my\u00a0code,\u00a0I\u00a0can\u00a0be\u00a0constantly\u00a0on\nthe\u00a0lookout\u00a0for\u00a0other\u00a0cases\u00a0where\u00a0I\u00a0see\u00a0a\u00a0max/min\u00a0pair\u00a0of\u00a0numbers\u00a0and\u00a0replace\u00a0them\nwith\u00a0a\u00a0range.\u00a0(One\u00a0immediate\u00a0possibility\u00a0is\u00a0the\u00a0operating\u00a0plan,\u00a0replacing\ntemperatureFloor\u00a0and\u00a0temperatureCeiling\u00a0with\u00a0a\u00a0temperatureRange.)\u00a0As\u00a0I\nlook\u00a0at\u00a0how\u00a0these\u00a0pairs\u00a0are\u00a0used,\u00a0I\u00a0can\u00a0move\u00a0more\u00a0useful\u00a0behavior\u00a0into\u00a0the\u00a0range\u00a0class,\nwww.EBooksWorld.ir\n", "page": 163, "type": "text", "section": "Page 163"}
{"text": "simplifying\u00a0its\u00a0usage\u00a0across\u00a0the\u00a0code\u00a0base.\u00a0One\u00a0of\u00a0the\u00a0first\u00a0things\u00a0I\u00a0may\u00a0add\u00a0is\u00a0a\u00a0value\u00ad\nbased\u00a0equality\u00a0method\u00a0to\u00a0make\u00a0it\u00a0a\u00a0true\u00a0value\u00a0object.\nCOMBINE FUNCTIONS INTO CLASS\nMotivation\nClasses\u00a0are\u00a0a\u00a0fundamental\u00a0construct\u00a0in\u00a0most\u00a0modern\u00a0programming\u00a0languages.\u00a0They\nbind\u00a0together\u00a0data\u00a0and\u00a0functions\u00a0into\u00a0a\u00a0shared\u00a0environment,\u00a0exposing\u00a0some\u00a0of\u00a0that\u00a0data\nand\u00a0function\u00a0to\u00a0other\u00a0program\u00a0elements\u00a0for\u00a0collaboration.\u00a0They\u00a0are\u00a0the\u00a0primary\nconstruct\u00a0in\u00a0object\u00adoriented\u00a0languages,\u00a0but\u00a0are\u00a0also\u00a0useful\u00a0with\u00a0other\u00a0approaches\u00a0too.\nWhen\u00a0I\u00a0see\u00a0a\u00a0group\u00a0of\u00a0functions\u00a0that\u00a0operate\u00a0closely\u00a0together\u00a0on\u00a0a\u00a0common\u00a0body\u00a0of\u00a0data\n(usually\u00a0passed\u00a0as\u00a0arguments\u00a0to\u00a0the\u00a0function\u00a0call),\u00a0I\u00a0see\u00a0an\u00a0opportunity\u00a0to\u00a0form\u00a0a\u00a0class.\nUsing\u00a0a\u00a0class\u00a0makes\u00a0the\u00a0common\u00a0environment\u00a0that\u00a0these\u00a0functions\u00a0share\u00a0more\u00a0explicit,\nallows\u00a0me\u00a0to\u00a0simplify\u00a0function\u00a0calls\u00a0inside\u00a0the\u00a0object\u00a0by\u00a0removing\u00a0many\u00a0of\u00a0the\narguments,\u00a0and\u00a0provides\u00a0a\u00a0reference\u00a0to\u00a0pass\u00a0such\u00a0an\u00a0object\u00a0to\u00a0other\u00a0parts\u00a0of\u00a0the\u00a0system.\nIn\u00a0addition\u00a0to\u00a0organizing\u00a0already\u00a0formed\u00a0functions,\u00a0this\u00a0refactoring\u00a0also\u00a0provides\u00a0a\ngood\u00a0opportunity\u00a0to\u00a0identify\u00a0other\u00a0bits\u00a0of\u00a0computation\u00a0and\u00a0refactor\u00a0them\u00a0into\u00a0methods\non\u00a0the\u00a0new\u00a0class.\nAnother\u00a0way\u00a0of\u00a0organizing\u00a0functions\u00a0together\u00a0is\u00a0Combine\u00a0Functions\u00a0into\u00a0Transform\n(149).\u00a0Which\u00a0one\u00a0to\u00a0use\u00a0depends\u00a0more\u00a0on\u00a0the\u00a0broader\u00a0context\u00a0of\u00a0the\u00a0program.\u00a0One\nsignificant\u00a0advantage\u00a0of\u00a0using\u00a0a\u00a0class\u00a0is\u00a0that\u00a0it\u00a0allows\u00a0clients\u00a0to\u00a0mutate\u00a0the\u00a0core\u00a0data\u00a0of\nwww.EBooksWorld.ir\n", "page": 164, "type": "text", "section": "Page 164"}
{"text": "the\u00a0object,\u00a0and\u00a0the\u00a0derivations\u00a0remain\u00a0consistent.\nAs\u00a0well\u00a0as\u00a0a\u00a0class,\u00a0functions\u00a0like\u00a0this\u00a0can\u00a0also\u00a0be\u00a0combined\u00a0into\u00a0a\u00a0nested\u00a0function.\nUsually\u00a0I\u00a0prefer\u00a0a\u00a0class\u00a0to\u00a0a\u00a0nested\u00a0function,\u00a0as\u00a0it\u00a0can\u00a0be\u00a0difficult\u00a0to\u00a0test\u00a0functions\u00a0nested\nwithin\u00a0another.\u00a0Classes\u00a0are\u00a0also\u00a0necessary\u00a0when\u00a0there\u00a0is\u00a0more\u00a0than\u00a0one\u00a0function\u00a0in\u00a0the\ngroup\u00a0that\u00a0I\u00a0want\u00a0to\u00a0expose\u00a0to\u00a0collaborators.\nLanguages\u00a0that\u00a0don\u2019t\u00a0have\u00a0classes\u00a0as\u00a0a\u00a0first\u00adclass\u00a0element,\u00a0but\u00a0do\u00a0have\u00a0first\u00adclass\nfunctions,\u00a0often\u00a0use\u00a0the\u00a0Function\u00a0As\u00a0Object\u00a0[mf\u00adfao]\u00a0to\u00a0provide\u00a0this\u00a0capability.\nMechanics\nApply\u00a0Encapsulate\u00a0Record\u00a0(162)\u00a0to\u00a0the\u00a0common\u00a0data\u00a0record\u00a0that\u00a0the\u00a0functions\nshare.\nIf\u00a0the\u00a0data\u00a0that\u00a0is\u00a0common\u00a0between\u00a0the\u00a0functions\u00a0isn\u2019t\u00a0already\u00a0grouped\u00a0into\u00a0a\u00a0record\nstructure,\u00a0use\u00a0Introduce\u00a0Parameter\u00a0Object\u00a0(140)\u00a0to\u00a0create\u00a0a\u00a0record\u00a0to\u00a0group\u00a0it\ntogether.\nTake\u00a0each\u00a0function\u00a0that\u00a0uses\u00a0the\u00a0common\u00a0record\u00a0and\u00a0use\u00a0Move\u00a0Function\u00a0(198)\u00a0to\nmove\u00a0it\u00a0into\u00a0the\u00a0new\u00a0class.\nAny\u00a0arguments\u00a0to\u00a0the\u00a0function\u00a0call\u00a0that\u00a0are\u00a0members\u00a0can\u00a0be\u00a0removed\u00a0from\u00a0the\nargument\u00a0list.\nEach\u00a0bit\u00a0of\u00a0logic\u00a0that\u00a0manipulates\u00a0the\u00a0data\u00a0can\u00a0be\u00a0extracted\u00a0with\u00a0Extract\u00a0Function\n(106)\u00a0and\u00a0then\u00a0moved\u00a0into\u00a0the\u00a0new\u00a0class.\nExample\nI\u00a0grew\u00a0up\u00a0in\u00a0England,\u00a0a\u00a0country\u00a0renowned\u00a0for\u00a0its\u00a0love\u00a0of\u00a0Tea.\u00a0(Personally,\u00a0I\u00a0don\u2019t\u00a0like\nmost\u00a0tea\u00a0they\u00a0serve\u00a0in\u00a0England,\u00a0but\u00a0have\u00a0since\u00a0acquired\u00a0a\u00a0taste\u00a0for\u00a0Chinese\u00a0and\nJapanese\u00a0teas.)\u00a0So\u00a0my\u00a0author\u2019s\u00a0fantasy\u00a0conjures\u00a0up\u00a0a\u00a0state\u00a0utility\u00a0for\u00a0providing\u00a0tea\u00a0to\nthe\u00a0population.\u00a0Every\u00a0month\u00a0they\u00a0read\u00a0the\u00a0tea\u00a0meters,\u00a0to\u00a0get\u00a0a\u00a0record\u00a0like\u00a0this:\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nreading\u00a0=\u00a0{customer:\u00a0\"ivan\",\u00a0quantity:\u00a010,\u00a0month:\u00a05,\u00a0year:\u00a02017}\u037e\nI\u00a0look\u00a0through\u00a0the\u00a0code\u00a0that\u00a0processes\u00a0these\u00a0records,\u00a0and\u00a0I\u00a0see\u00a0lots\u00a0of\u00a0places\u00a0where\nsimilar\u00a0calculations\u00a0are\u00a0done\u00a0on\u00a0the\u00a0data.\u00a0So\u00a0I\u00a0find\u00a0a\u00a0spot\u00a0that\u00a0calculates\u00a0the\u00a0base\nwww.EBooksWorld.ir\n", "page": 165, "type": "text", "section": "Page 165"}
{"text": "charge:\nclient\u00a01\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nconst\u00a0aReading\u00a0=\u00a0acquireReading()\u037e\nconst\u00a0baseCharge\u00a0=\u00a0baseRate(aReading.month,\u00a0aReading.year)\u00a0*\u00a0aReading.quantity\u037e\nBeing\u00a0England,\u00a0everything\u00a0essential\u00a0must\u00a0be\u00a0taxed,\u00a0so\u00a0it\u00a0is\u00a0with\u00a0tea.\u00a0But\u00a0the\u00a0rules\u00a0allow\nat\u00a0least\u00a0an\u00a0essential\u00a0level\u00a0of\u00a0tea\u00a0to\u00a0be\u00a0free\u00a0of\u00a0taxation.\nclient\u00a02\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nconst\u00a0aReading\u00a0=\u00a0acquireReading()\u037e\nconst\u00a0base\u00a0=\u00a0(baseRate(aReading.month,\u00a0aReading.year)\u00a0*\u00a0aReading.quantity)\u037e\nconst\u00a0taxableCharge\u00a0=\u00a0Math.max(0,\u00a0base\u00a0\u00ad\u00a0taxThreshold(aReading.year))\u037e\nI\u2019m\u00a0sure\u00a0that,\u00a0like\u00a0me,\u00a0you\u00a0noticed\u00a0that\u00a0the\u00a0formula\u00a0for\u00a0the\u00a0base\u00a0charge\u00a0is\u00a0duplicated\nbetween\u00a0these\u00a0two\u00a0fragments.\u00a0If\u00a0you\u2019re\u00a0like\u00a0me,\u00a0you\u2019re\u00a0already\u00a0reaching\u00a0for\u00a0Extract\nFunction\u00a0(106).\u00a0Interestingly,\u00a0it\u00a0seems\u00a0our\u00a0work\u00a0has\u00a0been\u00a0done\u00a0for\u00a0us\u00a0elsewhere.\nclient\u00a03\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nconst\u00a0aReading\u00a0=\u00a0acquireReading()\u037e\nconst\u00a0basicChargeAmount\u00a0=\u00a0calculateBaseCharge(aReading)\u037e\nfunction\u00a0calculateBaseCharge(aReading)\u00a0{\n\u00a0\u00a0return\u00a0baseRate(aReading.month,\u00a0aReading.year)\u00a0*\u00a0aReading.quantity\u037e\n}\nGiven\u00a0this,\u00a0I\u00a0have\u00a0a\u00a0natural\u00a0impulse\u00a0to\u00a0change\u00a0the\u00a0two\u00a0earlier\u00a0bits\u00a0of\u00a0client\u00a0code\u00a0to\u00a0use\nthis\u00a0function.\u00a0But\u00a0the\u00a0trouble\u00a0with\u00a0top\u00adlevel\u00a0functions\u00a0like\u00a0this\u00a0is\u00a0that\u00a0they\u00a0are\u00a0often\u00a0easy\nto\u00a0miss.\u00a0I\u2019d\u00a0rather\u00a0change\u00a0the\u00a0code\u00a0to\u00a0give\u00a0the\u00a0function\u00a0a\u00a0closer\u00a0connection\u00a0to\u00a0the\u00a0data\u00a0it\nprocesses.\u00a0A\u00a0good\u00a0way\u00a0to\u00a0do\u00a0this\u00a0is\u00a0to\u00a0turn\u00a0the\u00a0data\u00a0into\u00a0a\u00a0class.\nTo\u00a0turn\u00a0the\u00a0record\u00a0into\u00a0a\u00a0class,\u00a0I\u00a0use\u00a0Encapsulate\u00a0Record\u00a0(162).\nwww.EBooksWorld.ir\n", "page": 166, "type": "text", "section": "Page 166"}
{"text": "Click\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nclass\u00a0Reading\u00a0{\n\u00a0\u00a0constructor(data)\u00a0{\n\u00a0\u00a0\u00a0\u00a0this._customer\u00a0=\u00a0data.customer\u037e\n\u00a0\u00a0\u00a0\u00a0this._quantity\u00a0=\u00a0data.quantity\u037e\n\u00a0\u00a0\u00a0\u00a0this._month\u00a0=\u00a0data.month\u037e\n\u00a0\u00a0\u00a0\u00a0this._year\u00a0=\u00a0data.year\u037e\n\u00a0\u00a0}\n\u00a0\u00a0get\u00a0customer()\u00a0{return\u00a0this._customer\u037e}\n\u00a0\u00a0get\u00a0quantity()\u00a0{return\u00a0this._quantity\u037e}\n\u00a0\u00a0get\u00a0month()\u00a0\u00a0\u00a0\u00a0{return\u00a0this._month\u037e}\n\u00a0\u00a0get\u00a0year()\u00a0\u00a0\u00a0\u00a0\u00a0{return\u00a0this._year\u037e}\n}\nTo\u00a0move\u00a0the\u00a0behavior,\u00a0I\u2019ll\u00a0start\u00a0with\u00a0the\u00a0function\u00a0I\u00a0already\u00a0have:\ncalculateBaseCharge.\u00a0To\u00a0use\u00a0the\u00a0new\u00a0class,\u00a0I\u00a0need\u00a0to\u00a0apply\u00a0it\u00a0to\u00a0the\u00a0data\u00a0as\u00a0soon\u00a0as\nI\u2019ve\u00a0acquired\u00a0it.\nclient\u00a03\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nconst\u00a0rawReading\u00a0=\u00a0acquireReading()\u037e\nconst\u00a0aReading\u00a0=\u00a0new\u00a0Reading(rawReading)\u037e\nconst\u00a0basicChargeAmount\u00a0=\u00a0calculateBaseCharge(aReading)\u037e\nI\u00a0then\u00a0use\u00a0Move\u00a0Function\u00a0(198)\u00a0to\u00a0move\u00a0calculateBaseCharge\u00a0into\u00a0the\u00a0new\u00a0class.\nclass\u00a0Reading\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nget\u00a0calculateBaseCharge()\u00a0{\n\u00a0\u00a0return\u00a0baseRate(this.month,\u00a0this.year)\u00a0*\u00a0this.quantity\u037e\n}\nclient\u00a03\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nconst\u00a0rawReading\u00a0=\u00a0acquireReading()\u037e\nconst\u00a0aReading\u00a0=\u00a0new\u00a0Reading(rawReading)\u037e\nconst\u00a0basicChargeAmount\u00a0=\u00a0aReading.calculateBaseCharge\u037e\nwww.EBooksWorld.ir\n", "page": 167, "type": "text", "section": "Page 167"}
{"text": "While\u00a0I\u2019m\u00a0at\u00a0it,\u00a0I\u00a0use\u00a0Rename\u00a0Function\u00a0(124)\u00a0to\u00a0make\u00a0it\u00a0something\u00a0more\u00a0to\u00a0my\u00a0liking.\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nget\u00a0baseCharge()\u00a0{\n\u00a0\u00a0return\u00a0baseRate(this.month,\u00a0this.year)\u00a0*\u00a0this.quantity\u037e\n}\nclient\u00a03\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nconst\u00a0rawReading\u00a0=\u00a0acquireReading()\u037e\nconst\u00a0aReading\u00a0=\u00a0new\u00a0Reading(rawReading)\u037e\nconst\u00a0basicChargeAmount\u00a0=\u00a0aReading.baseCharge\u037e\nWith\u00a0this\u00a0naming,\u00a0the\u00a0client\u00a0of\u00a0the\u00a0reading\u00a0class\u00a0can\u2019t\u00a0tell\u00a0whether\u00a0the\u00a0base\u00a0charge\u00a0is\u00a0a\nfield\u00a0or\u00a0a\u00a0derived\u00a0value.\u00a0This\u00a0is\u00a0a\u00a0Good\u00a0Thing\u2014the\u00a0Uniform\u00a0Access\u00a0Principle\u00a0[mf\u00adua].\nI\u00a0now\u00a0alter\u00a0the\u00a0first\u00a0client\u00a0to\u00a0call\u00a0the\u00a0method\u00a0rather\u00a0than\u00a0repeat\u00a0the\u00a0calculation.\nclient\u00a01\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nconst\u00a0rawReading\u00a0=\u00a0acquireReading()\u037e\nconst\u00a0aReading\u00a0=\u00a0new\u00a0Reading(rawReading)\u037e\nconst\u00a0baseCharge\u00a0=\u00a0aReading.baseCharge\u037e\nThere\u2019s\u00a0a\u00a0strong\u00a0chance\u00a0I\u2019ll\u00a0use\u00a0Inline\u00a0Variable\u00a0(123)\u00a0on\u00a0the\u00a0baseCharge\u00a0variable\nbefore\u00a0the\u00a0day\u00a0is\u00a0out.\u00a0But\u00a0more\u00a0relevant\u00a0to\u00a0this\u00a0refactoring\u00a0is\u00a0the\u00a0client\u00a0that\u00a0calculates\nthe\u00a0taxable\u00a0amount.\u00a0My\u00a0first\u00a0step\u00a0here\u00a0is\u00a0to\u00a0use\u00a0the\u00a0new\u00a0base\u00a0charge\u00a0property.\nclient\u00a02\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nconst\u00a0rawReading\u00a0=\u00a0acquireReading()\u037e\nconst\u00a0aReading\u00a0=\u00a0new\u00a0Reading(rawReading)\u037e\nconst\u00a0taxableCharge\u00a0=\u00a0Math.max(0,\u00a0aReading.baseCharge\u00a0\u00ad\u00a0taxThreshold(aReading.ye\nwww.EBooksWorld.ir\n", "page": 168, "type": "text", "section": "Page 168"}
{"text": "I\u00a0use\u00a0Extract\u00a0Function\u00a0(106)\u00a0on\u00a0the\u00a0calculation\u00a0for\u00a0the\u00a0taxable\u00a0charge.\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0taxableChargeFn(aReading)\u00a0{\n\u00a0\u00a0return\u00a0Math.max(0,\u00a0aReading.baseCharge\u00a0\u00ad\u00a0taxThreshold(aReading.year))\u037e\n}\nclient\u00a03\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nconst\u00a0rawReading\u00a0=\u00a0acquireReading()\u037e\nconst\u00a0aReading\u00a0=\u00a0new\u00a0Reading(rawReading)\u037e\nconst\u00a0taxableCharge\u00a0=\u00a0taxableChargeFn(aReading)\u037e\nThen\u00a0I\u00a0apply\u00a0Move\u00a0Function\u00a0(198).\nclass\u00a0Reading\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nget\u00a0taxableCharge()\u00a0{\n\u00a0\u00a0return\u00a0\u00a0Math.max(0,\u00a0this.baseCharge\u00a0\u00ad\u00a0taxThreshold(this.year))\u037e\n}\nclient\u00a03\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nconst\u00a0rawReading\u00a0=\u00a0acquireReading()\u037e\nconst\u00a0aReading\u00a0=\u00a0new\u00a0Reading(rawReading)\u037e\nconst\u00a0taxableCharge\u00a0=\u00a0aReading.taxableCharge\u037e\nSince\u00a0all\u00a0the\u00a0derived\u00a0data\u00a0is\u00a0calculated\u00a0on\u00a0demand,\u00a0I\u00a0have\u00a0no\u00a0problem\u00a0should\u00a0I\u00a0need\u00a0to\nupdate\u00a0the\u00a0stored\u00a0data.\u00a0In\u00a0general,\u00a0I\u00a0prefer\u00a0immutable\u00a0data,\u00a0but\u00a0many\u00a0circumstances\nforce\u00a0us\u00a0to\u00a0work\u00a0with\u00a0mutable\u00a0data\u00a0(such\u00a0as\u00a0JavaScript,\u00a0a\u00a0language\u00a0ecosystem\u00a0that\nwasn\u2019t\u00a0designed\u00a0with\u00a0immutability\u00a0in\u00a0mind).\u00a0When\u00a0there\u00a0is\u00a0a\u00a0reasonable\u00a0chance\u00a0the\ndata\u00a0will\u00a0be\u00a0updated\u00a0somewhere\u00a0in\u00a0the\u00a0program,\u00a0then\u00a0a\u00a0class\u00a0is\u00a0very\u00a0helpful.\nCOMBINE FUNCTIONS INTO TRANSFORM\nwww.EBooksWorld.ir\n", "page": 169, "type": "text", "section": "Page 169"}
{"text": "COMBINE FUNCTIONS INTO TRANSFORM\nMotivation\nSoftware\u00a0often\u00a0involves\u00a0feeding\u00a0data\u00a0into\u00a0programs\u00a0that\u00a0calculate\u00a0various\u00a0derived\ninformation\u00a0from\u00a0it.\u00a0These\u00a0derived\u00a0values\u00a0may\u00a0be\u00a0needed\u00a0in\u00a0several\u00a0places,\u00a0and\u00a0those\ncalculations\u00a0are\u00a0often\u00a0repeated\u00a0wherever\u00a0the\u00a0derived\u00a0data\u00a0is\u00a0used.\u00a0I\u00a0prefer\u00a0to\u00a0bring\u00a0all\u00a0of\nthese\u00a0derivations\u00a0together,\u00a0so\u00a0I\u00a0have\u00a0a\u00a0consistent\u00a0place\u00a0to\u00a0find\u00a0and\u00a0update\u00a0them\u00a0and\navoid\u00a0any\u00a0duplicate\u00a0logic.\nOne\u00a0way\u00a0to\u00a0do\u00a0this\u00a0is\u00a0to\u00a0use\u00a0a\u00a0data\u00a0transformation\u00a0function\u00a0that\u00a0takes\u00a0the\u00a0source\u00a0data\u00a0as\ninput\u00a0and\u00a0calculates\u00a0all\u00a0the\u00a0derivations,\u00a0putting\u00a0each\u00a0derived\u00a0value\u00a0as\u00a0a\u00a0field\u00a0in\u00a0the\noutput\u00a0data.\u00a0Then,\u00a0to\u00a0examine\u00a0the\u00a0derivations,\u00a0all\u00a0I\u00a0need\u00a0do\u00a0is\u00a0look\u00a0at\u00a0the\u00a0transform\nfunction.\nAn\u00a0alternative\u00a0to\u00a0Combine\u00a0Functions\u00a0into\u00a0Transform\u00a0is\u00a0Combine\u00a0Functions\u00a0into\u00a0Class\n(144)\u00a0that\u00a0moves\u00a0the\u00a0logic\u00a0into\u00a0methods\u00a0on\u00a0a\u00a0class\u00a0formed\u00a0from\u00a0the\u00a0source\u00a0data.\u00a0Either\nof\u00a0these\u00a0refactorings\u00a0are\u00a0helpful,\u00a0and\u00a0my\u00a0choice\u00a0will\u00a0often\u00a0depend\u00a0on\u00a0the\u00a0style\u00a0of\nprogramming\u00a0already\u00a0in\u00a0the\u00a0software.\u00a0But\u00a0there\u00a0is\u00a0one\u00a0important\u00a0difference:\u00a0Using\u00a0a\nclass\u00a0is\u00a0much\u00a0better\u00a0if\u00a0the\u00a0source\u00a0data\u00a0gets\u00a0updated\u00a0within\u00a0the\u00a0code.\u00a0Using\u00a0a\u00a0transform\nstores\u00a0derived\u00a0data\u00a0in\u00a0the\u00a0new\u00a0record,\u00a0so\u00a0if\u00a0the\u00a0source\u00a0data\u00a0changes,\u00a0I\u00a0will\u00a0run\u00a0into\ninconsistencies.\nOne\u00a0of\u00a0the\u00a0reasons\u00a0I\u00a0like\u00a0to\u00a0do\u00a0combine\u00a0functions\u00a0is\u00a0to\u00a0avoid\u00a0duplication\u00a0of\u00a0the\nwww.EBooksWorld.ir\n", "page": 170, "type": "text", "section": "Page 170"}
{"text": "derivation\u00a0logic.\u00a0I\u00a0can\u00a0do\u00a0that\u00a0just\u00a0by\u00a0using\u00a0Extract\u00a0Function\u00a0(106)\u00a0on\u00a0the\u00a0logic,\u00a0but\u00a0it\u2019s\noften\u00a0difficult\u00a0to\u00a0find\u00a0the\u00a0functions\u00a0unless\u00a0they\u00a0are\u00a0kept\u00a0close\u00a0to\u00a0the\u00a0data\u00a0structures\u00a0they\noperate\u00a0on.\u00a0Using\u00a0a\u00a0transform\u00a0(or\u00a0a\u00a0class)\u00a0makes\u00a0it\u00a0easy\u00a0to\u00a0find\u00a0and\u00a0use\u00a0them.\nMechanics\nCreate\u00a0a\u00a0transformation\u00a0function\u00a0that\u00a0takes\u00a0the\u00a0record\u00a0to\u00a0be\u00a0transformed\u00a0and\nreturns\u00a0the\u00a0same\u00a0values.\nThis\u00a0will\u00a0usually\u00a0involve\u00a0a\u00a0deep\u00a0copy\u00a0of\u00a0the\u00a0record.\u00a0It\u00a0is\u00a0often\u00a0worthwhile\u00a0to\u00a0write\u00a0a\ntest\u00a0to\u00a0ensure\u00a0the\u00a0transform\u00a0does\u00a0not\u00a0alter\u00a0the\u00a0original\u00a0record.\nPick\u00a0some\u00a0logic\u00a0and\u00a0move\u00a0its\u00a0body\u00a0into\u00a0the\u00a0transform\u00a0to\u00a0create\u00a0a\u00a0new\u00a0field\u00a0in\u00a0the\nrecord.\u00a0Change\u00a0the\u00a0client\u00a0code\u00a0to\u00a0access\u00a0the\u00a0new\u00a0field.\nIf\u00a0the\u00a0logic\u00a0is\u00a0complex,\u00a0use\u00a0Extract\u00a0Function\u00a0(106)\u00a0first.\nTest.\nRepeat\u00a0for\u00a0the\u00a0other\u00a0relevant\u00a0functions.\nExample\nWhere\u00a0I\u00a0grew\u00a0up,\u00a0tea\u00a0is\u00a0an\u00a0important\u00a0part\u00a0of\u00a0life\u2014so\u00a0much\u00a0that\u00a0I\u00a0can\u00a0imagine\u00a0a\u00a0special\nutility\u00a0that\u00a0provides\u00a0tea\u00a0to\u00a0the\u00a0populace\u00a0that\u2019s\u00a0regulated\u00a0like\u00a0a\u00a0utility.\u00a0Every\u00a0month,\u00a0the\nutility\u00a0gets\u00a0a\u00a0reading\u00a0of\u00a0how\u00a0much\u00a0tea\u00a0a\u00a0customer\u00a0has\u00a0acquired.\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nreading\u00a0=\u00a0{customer:\u00a0\"ivan\",\u00a0quantity:\u00a010,\u00a0month:\u00a05,\u00a0year:\u00a02017}\u037e\nCode\u00a0in\u00a0various\u00a0places\u00a0calculates\u00a0various\u00a0consequences\u00a0of\u00a0this\u00a0tea\u00a0usage.\u00a0One\u00a0such\ncalculation\u00a0is\u00a0the\u00a0base\u00a0monetary\u00a0amount\u00a0that\u2019s\u00a0used\u00a0to\u00a0calculate\u00a0the\u00a0charge\u00a0for\u00a0the\ncustomer.\nclient\u00a01\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nconst\u00a0aReading\u00a0=\u00a0acquireReading()\u037e\nconst\u00a0baseCharge\u00a0=\u00a0baseRate(aReading.month,\u00a0aReading.year)\u00a0*\u00a0aReading.quantity\u037e\nwww.EBooksWorld.ir\n", "page": 171, "type": "text", "section": "Page 171"}
{"text": "Another\u00a0is\u00a0the\u00a0amount\u00a0that\u00a0should\u00a0be\u00a0taxed\u2014which\u00a0is\u00a0less\u00a0than\u00a0the\u00a0base\u00a0amount\u00a0since\nthe\u00a0government\u00a0wisely\u00a0considers\u00a0that\u00a0every\u00a0citizen\u00a0should\u00a0get\u00a0some\u00a0tea\u00a0tax\u00a0free.\nclient\u00a02\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nconst\u00a0aReading\u00a0=\u00a0acquireReading()\u037e\nconst\u00a0base\u00a0=\u00a0(baseRate(aReading.month,\u00a0aReading.year)\u00a0*\u00a0aReading.quantity)\u037e\nconst\u00a0taxableCharge\u00a0=\u00a0Math.max(0,\u00a0base\u00a0\u00ad\u00a0taxThreshold(aReading.year))\u037e\nLooking\u00a0through\u00a0this\u00a0code,\u00a0I\u00a0see\u00a0these\u00a0calculations\u00a0repeated\u00a0in\u00a0several\u00a0places.\u00a0Such\nduplication\u00a0is\u00a0asking\u00a0for\u00a0trouble\u00a0when\u00a0they\u00a0need\u00a0to\u00a0change\u00a0(and\u00a0I\u2019d\u00a0bet\u00a0it\u2019s\u00a0\u201cwhen\u201d\u00a0not\n\u201cif\u201d).\u00a0I\u00a0can\u00a0deal\u00a0with\u00a0this\u00a0repetition\u00a0by\u00a0using\u00a0Extract\u00a0Function\u00a0(106)\u00a0on\u00a0these\ncalculations,\u00a0but\u00a0such\u00a0functions\u00a0often\u00a0end\u00a0up\u00a0scattered\u00a0around\u00a0the\u00a0program\u00a0making\u00a0it\nhard\u00a0for\u00a0future\u00a0developers\u00a0to\u00a0realize\u00a0they\u00a0are\u00a0there.\u00a0Indeed,\u00a0looking\u00a0around\u00a0I\u00a0discover\nsuch\u00a0a\u00a0function,\u00a0used\u00a0in\u00a0another\u00a0area\u00a0of\u00a0the\u00a0code.\nclient\u00a03\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nconst\u00a0aReading\u00a0=\u00a0acquireReading()\u037e\nconst\u00a0basicChargeAmount\u00a0=\u00a0calculateBaseCharge(aReading)\u037e\nfunction\u00a0calculateBaseCharge(aReading)\u00a0{\n\u00a0\u00a0return\u00a0\u00a0baseRate(aReading.month,\u00a0aReading.year)\u00a0*\u00a0aReading.quantity\u037e\n}\nOne\u00a0way\u00a0of\u00a0dealing\u00a0with\u00a0this\u00a0is\u00a0to\u00a0move\u00a0all\u00a0of\u00a0these\u00a0derivations\u00a0into\u00a0a\u00a0transformation\nstep\u00a0that\u00a0takes\u00a0the\u00a0raw\u00a0reading\u00a0and\u00a0emits\u00a0a\u00a0reading\u00a0enriched\u00a0with\u00a0all\u00a0the\u00a0common\nderived\u00a0results.\nI\u00a0begin\u00a0by\u00a0creating\u00a0a\u00a0transformation\u00a0function\u00a0that\u00a0merely\u00a0copies\u00a0the\u00a0input\u00a0object.\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0enrichReading(original)\u00a0{\n\u00a0\u00a0const\u00a0result\u00a0=\u00a0_.cloneDeep(original)\u037e\n\u00a0\u00a0return\u00a0result\u037e\n}\nwww.EBooksWorld.ir\n", "page": 172, "type": "text", "section": "Page 172"}
{"text": "I\u2019m\u00a0using\u00a0the\u00a0cloneDeep\u00a0from\u00a0lodash\u00a0to\u00a0create\u00a0a\u00a0deep\u00a0copy.\nWhen\u00a0I\u2019m\u00a0applying\u00a0a\u00a0transformation\u00a0that\u00a0produces\u00a0essentially\u00a0the\u00a0same\u00a0thing\u00a0but\u00a0with\nadditional\u00a0information,\u00a0I\u00a0like\u00a0to\u00a0name\u00a0it\u00a0using\u00a0\u201cenrich\u201d.\u00a0If\u00a0it\u00a0were\u00a0producing\u00a0something\nI\u00a0felt\u00a0was\u00a0different,\u00a0I\u00a0would\u00a0name\u00a0it\u00a0using\u00a0\u201ctransform\u201d.\nI\u00a0then\u00a0pick\u00a0one\u00a0of\u00a0the\u00a0calculations\u00a0I\u00a0want\u00a0to\u00a0change.\u00a0First,\u00a0I\u00a0enrich\u00a0the\u00a0reading\u00a0it\u00a0uses\nwith\u00a0the\u00a0current\u00a0one\u00a0that\u00a0does\u00a0nothing\u00a0yet.\nclient\u00a03\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nconst\u00a0rawReading\u00a0=\u00a0acquireReading()\u037e\nconst\u00a0aReading\u00a0=\u00a0enrichReading(rawReading)\u037e\nconst\u00a0basicChargeAmount\u00a0=\u00a0calculateBaseCharge(aReading)\u037e\nI\u00a0use\u00a0Move\u00a0Function\u00a0(198)\u00a0on\u00a0calculateBaseCharge\u00a0to\u00a0move\u00a0it\u00a0into\u00a0the\u00a0enrichment\ncalculation.\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0enrichReading(original)\u00a0{\n\u00a0\u00a0const\u00a0result\u00a0=\u00a0_.cloneDeep(original)\u037e\n\u00a0\u00a0result.baseCharge\u00a0=\u00a0calculateBaseCharge(result)\u037e\n\u00a0\u00a0return\u00a0result\u037e\n}\nWithin\u00a0the\u00a0transformation\u00a0function,\u00a0I\u2019m\u00a0happy\u00a0to\u00a0mutate\u00a0a\u00a0result\u00a0object,\u00a0instead\u00a0of\ncopying\u00a0each\u00a0time.\u00a0I\u00a0like\u00a0immutability,\u00a0but\u00a0most\u00a0common\u00a0languages\u00a0make\u00a0it\u00a0difficult\u00a0to\nwork\u00a0with.\u00a0I\u2019m\u00a0prepared\u00a0to\u00a0go\u00a0through\u00a0the\u00a0extra\u00a0effort\u00a0to\u00a0support\u00a0it\u00a0at\u00a0boundaries,\u00a0but\nwill\u00a0mutate\u00a0within\u00a0smaller\u00a0scopes.\u00a0I\u00a0also\u00a0pick\u00a0my\u00a0names\u00a0(using\u00a0aReading\u00a0as\u00a0the\naccumulating\u00a0variable)\u00a0to\u00a0make\u00a0it\u00a0easier\u00a0to\u00a0move\u00a0the\u00a0code\u00a0into\u00a0the\u00a0transformer\nfunction.\nI\u00a0change\u00a0the\u00a0client\u00a0that\u00a0uses\u00a0that\u00a0function\u00a0to\u00a0use\u00a0the\u00a0enriched\u00a0field\u00a0instead.\nclient\u00a03\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nconst\u00a0rawReading\u00a0=\u00a0acquireReading()\u037e\nwww.EBooksWorld.ir\n", "page": 173, "type": "text", "section": "Page 173"}
{"text": "const\u00a0aReading\u00a0=\u00a0enrichReading(rawReading)\u037e\nconst\u00a0basicChargeAmount\u00a0=\u00a0aReading.baseCharge\u037e\nOnce\u00a0I\u2019ve\u00a0moved\u00a0all\u00a0calls\u00a0to\u00a0calculateBaseCharge,\u00a0I\u00a0can\u00a0nest\u00a0it\u00a0inside\nenrichReading.\u00a0That\u00a0would\u00a0make\u00a0it\u00a0clear\u00a0that\u00a0clients\u00a0that\u00a0need\u00a0the\u00a0calculated\u00a0base\ncharge\u00a0should\u00a0use\u00a0the\u00a0enriched\u00a0record.\nOne\u00a0trap\u00a0to\u00a0beware\u00a0of\u00a0here.\u00a0When\u00a0I\u00a0write\u00a0enrichReading\u00a0like\u00a0this,\u00a0to\u00a0return\u00a0the\nenriched\u00a0reading,\u00a0I\u2019m\u00a0implying\u00a0that\u00a0the\u00a0original\u00a0reading\u00a0record\u00a0isn\u2019t\u00a0changed.\u00a0So\u00a0it\u2019s\nwise\u00a0for\u00a0me\u00a0to\u00a0add\u00a0a\u00a0test.\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nit('check\u00a0reading\u00a0unchanged',\u00a0function()\u00a0{\n\u00a0\u00a0const\u00a0baseReading\u00a0=\u00a0{customer:\u00a0\"ivan\",\u00a0quantity:\u00a015,\u00a0month:\u00a05,\u00a0year:\u00a02017}\u037e\n\u00a0\u00a0const\u00a0oracle\u00a0=\u00a0_.cloneDeep(baseReading)\u037e\n\u00a0\u00a0enrichReading(baseReading)\u037e\n\u00a0\u00a0assert.deepEqual(baseReading,\u00a0oracle)\u037e\n})\u037e\nI\u00a0can\u00a0then\u00a0change\u00a0client\u00a01\u00a0to\u00a0also\u00a0use\u00a0the\u00a0same\u00a0field.\nclient\u00a01\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nconst\u00a0rawReading\u00a0=\u00a0acquireReading()\u037e\nconst\u00a0aReading\u00a0=\u00a0enrichReading(rawReading)\u037e\nconst\u00a0baseCharge\u00a0=\u00a0aReading.baseCharge\u037e\nThere\u00a0is\u00a0a\u00a0good\u00a0chance\u00a0I\u00a0can\u00a0then\u00a0use\u00a0Inline\u00a0Variable\u00a0(123)\u00a0on\u00a0baseCharge\u00a0too.\nNow\u00a0I\u00a0turn\u00a0to\u00a0the\u00a0taxable\u00a0amount\u00a0calculation.\u00a0My\u00a0first\u00a0step\u00a0is\u00a0to\u00a0add\u00a0in\u00a0the\ntransformation\u00a0function.\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nconst\u00a0rawReading\u00a0=\u00a0acquireReading()\u037e\nconst\u00a0aReading\u00a0=\u00a0enrichReading(rawReading)\u037e\nconst\u00a0base\u00a0=\u00a0(baseRate(aReading.month,\u00a0aReading.year)\u00a0*\u00a0aReading.quantity)\u037e\nconst\u00a0taxableCharge\u00a0=\u00a0Math.max(0,\u00a0base\u00a0\u00ad\u00a0taxThreshold(aReading.year))\u037e\nwww.EBooksWorld.ir\n", "page": 174, "type": "text", "section": "Page 174"}
{"text": "I\u00a0can\u00a0immediately\u00a0replace\u00a0the\u00a0calculation\u00a0of\u00a0the\u00a0base\u00a0charge\u00a0with\u00a0the\u00a0new\u00a0field.\u00a0If\u00a0the\ncalculation\u00a0was\u00a0complex,\u00a0I\u00a0could\u00a0Extract\u00a0Function\u00a0(106)\u00a0first,\u00a0but\u00a0here\u00a0it\u2019s\u00a0simple\nenough\u00a0to\u00a0do\u00a0in\u00a0one\u00a0step.\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nconst\u00a0rawReading\u00a0=\u00a0acquireReading()\u037e\nconst\u00a0aReading\u00a0=\u00a0enrichReading(rawReading)\u037e\nconst\u00a0base\u00a0=\u00a0aReading.baseCharge\u037e\nconst\u00a0taxableCharge\u00a0=\u00a0Math.max(0,\u00a0base\u00a0\u00ad\u00a0taxThreshold(aReading.year))\u037e\nOnce\u00a0I\u2019ve\u00a0tested\u00a0that\u00a0that\u00a0works,\u00a0I\u00a0apply\u00a0Inline\u00a0Variable\u00a0(123):\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nconst\u00a0rawReading\u00a0=\u00a0acquireReading()\u037e\nconst\u00a0aReading\u00a0=\u00a0enrichReading(rawReading)\u037e\nconst\u00a0taxableCharge\u00a0=\u00a0Math.max(0,\u00a0aReading.baseCharge\u00a0\u00ad\u00a0taxThreshold(aReading.ye\nand\u00a0move\u00a0that\u00a0computation\u00a0into\u00a0the\u00a0transformer:\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0enrichReading(original)\u00a0{\n\u00a0\u00a0const\u00a0result\u00a0=\u00a0_.cloneDeep(original)\u037e\n\u00a0\u00a0result.baseCharge\u00a0=\u00a0calculateBaseCharge(result)\u037e\n\u00a0\u00a0result.taxableCharge\u00a0=\u00a0Math.max(0,\u00a0result.baseCharge\u00a0\u00ad\u00a0taxThreshold(result.yea\n\u00a0\u00a0return\u00a0result\u037e\n}\nI\u00a0modify\u00a0the\u00a0original\u00a0code\u00a0to\u00a0use\u00a0the\u00a0new\u00a0field.\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nconst\u00a0rawReading\u00a0=\u00a0acquireReading()\u037e\nconst\u00a0aReading\u00a0=\u00a0enrichReading(rawReading)\u037e\nconst\u00a0taxableCharge\u00a0=\u00a0aReading.taxableCharge\u037e\nOnce\u00a0I\u2019ve\u00a0tested\u00a0that,\u00a0it\u2019s\u00a0likely\u00a0I\u00a0would\u00a0be\u00a0able\u00a0to\u00a0use\u00a0Inline\u00a0Variable\u00a0(123)\u00a0on\ntaxableCharge.\nwww.EBooksWorld.ir\n", "page": 175, "type": "text", "section": "Page 175"}
{"text": "One\u00a0big\u00a0problem\u00a0with\u00a0an\u00a0enriched\u00a0reading\u00a0like\u00a0this\u00a0is:\u00a0What\u00a0happens\u00a0should\u00a0a\u00a0client\nchange\u00a0a\u00a0data\u00a0value?\u00a0Changing,\u00a0say,\u00a0the\u00a0quantity\u00a0field\u00a0would\u00a0result\u00a0in\u00a0data\u00a0that\u2019s\ninconsistent.\u00a0To\u00a0avoid\u00a0this\u00a0in\u00a0JavaScript,\u00a0my\u00a0best\u00a0option\u00a0is\u00a0to\u00a0use\u00a0Combine\u00a0Functions\ninto\u00a0Class\u00a0(144)\u00a0instead.\u00a0If\u00a0I\u2019m\u00a0in\u00a0a\u00a0language\u00a0with\u00a0immutable\u00a0data\u00a0structures,\u00a0I\u00a0don\u2019t\nhave\u00a0this\u00a0problem,\u00a0so\u00a0its\u00a0more\u00a0common\u00a0to\u00a0see\u00a0transforms\u00a0in\u00a0those\u00a0languages.\u00a0But\u00a0even\nin\u00a0languages\u00a0without\u00a0immutability,\u00a0I\u00a0can\u00a0use\u00a0transforms\u00a0if\u00a0the\u00a0data\u00a0appears\u00a0in\u00a0a\u00a0read\u00ad\nonly\u00a0context,\u00a0such\u00a0as\u00a0deriving\u00a0data\u00a0to\u00a0display\u00a0on\u00a0a\u00a0web\u00a0page.\nSPLIT PHASE\nMotivation\nWhen\u00a0I\u00a0run\u00a0into\u00a0code\u00a0that\u2019s\u00a0dealing\u00a0with\u00a0two\u00a0different\u00a0things,\u00a0I\u00a0look\u00a0for\u00a0a\u00a0way\u00a0to\u00a0split\u00a0it\ninto\u00a0separate\u00a0modules.\u00a0I\u00a0endeavor\u00a0to\u00a0make\u00a0this\u00a0split\u00a0because,\u00a0if\u00a0I\u00a0need\u00a0to\u00a0make\u00a0a\nchange,\u00a0I\u00a0can\u00a0deal\u00a0with\u00a0each\u00a0topic\u00a0separately\u00a0and\u00a0not\u00a0have\u00a0to\u00a0hold\u00a0both\u00a0in\u00a0my\u00a0head\ntogether.\u00a0If\u00a0I\u2019m\u00a0lucky,\u00a0I\u00a0may\u00a0only\u00a0have\u00a0to\u00a0change\u00a0one\u00a0module\u00a0without\u00a0having\u00a0to\nremember\u00a0the\u00a0details\u00a0of\u00a0the\u00a0other\u00a0one\u00a0at\u00a0all.\nwww.EBooksWorld.ir\n", "page": 176, "type": "text", "section": "Page 176"}
{"text": "One\u00a0of\u00a0the\u00a0neatest\u00a0ways\u00a0to\u00a0do\u00a0a\u00a0split\u00a0like\u00a0this\u00a0is\u00a0to\u00a0divide\u00a0the\u00a0behavior\u00a0into\u00a0two\nsequential\u00a0phases.\u00a0A\u00a0good\u00a0example\u00a0of\u00a0this\u00a0is\u00a0when\u00a0you\u00a0have\u00a0some\u00a0processing\u00a0whose\ninputs\u00a0don\u2019t\u00a0reflect\u00a0the\u00a0model\u00a0you\u00a0need\u00a0to\u00a0carry\u00a0out\u00a0the\u00a0logic.\u00a0Before\u00a0you\u00a0begin,\u00a0you\u00a0can\nmassage\u00a0the\u00a0input\u00a0into\u00a0a\u00a0convenient\u00a0form\u00a0for\u00a0your\u00a0main\u00a0processing.\u00a0Or,\u00a0you\u00a0can\u00a0take\nthe\u00a0logic\u00a0you\u00a0need\u00a0to\u00a0do\u00a0and\u00a0break\u00a0it\u00a0down\u00a0into\u00a0sequential\u00a0steps,\u00a0where\u00a0each\u00a0step\u00a0is\nsignificantly\u00a0different\u00a0in\u00a0what\u00a0it\u00a0does.\nThe\u00a0most\u00a0obvious\u00a0example\u00a0of\u00a0this\u00a0is\u00a0a\u00a0compiler.\u00a0It\u2019s\u00a0a\u00a0basic\u00a0task\u00a0is\u00a0to\u00a0take\u00a0some\u00a0text\n(code\u00a0in\u00a0a\u00a0programming\u00a0language)\u00a0and\u00a0turn\u00a0it\u00a0into\u00a0some\u00a0executable\u00a0form\u00a0(e.g.,\u00a0object\ncode\u00a0for\u00a0a\u00a0specific\u00a0hardware).\u00a0Over\u00a0time,\u00a0we\u2019ve\u00a0found\u00a0this\u00a0can\u00a0be\u00a0usefully\u00a0split\u00a0into\u00a0a\nchain\u00a0of\u00a0phases:\u00a0tokenizing\u00a0the\u00a0text,\u00a0parsing\u00a0the\u00a0tokens\u00a0into\u00a0a\u00a0syntax\u00a0tree,\u00a0then\u00a0various\nsteps\u00a0of\u00a0transforming\u00a0the\u00a0syntax\u00a0tree\u00a0(e.g.,\u00a0for\u00a0optimization),\u00a0and\u00a0finally\u00a0generating\u00a0the\nobject\u00a0code.\u00a0Each\u00a0step\u00a0has\u00a0a\u00a0limited\u00a0scope\u00a0and\u00a0I\u00a0can\u00a0think\u00a0of\u00a0one\u00a0step\u00a0without\nunderstanding\u00a0the\u00a0details\u00a0of\u00a0others.\nSplitting\u00a0phases\u00a0like\u00a0this\u00a0is\u00a0common\u00a0in\u00a0large\u00a0software\u037e\u00a0the\u00a0various\u00a0phases\u00a0in\u00a0a\u00a0compiler\ncan\u00a0each\u00a0contain\u00a0many\u00a0functions\u00a0and\u00a0classes.\u00a0But\u00a0I\u00a0can\u00a0carry\u00a0out\u00a0the\u00a0basic\u00a0split\u00adphase\nrefactoring\u00a0on\u00a0any\u00a0fragment\u00a0of\u00a0code\u2014whenever\u00a0I\u00a0see\u00a0an\u00a0opportunity\u00a0to\u00a0usefully\nseparate\u00a0the\u00a0code\u00a0into\u00a0different\u00a0phases.\u00a0The\u00a0best\u00a0clue\u00a0is\u00a0when\u00a0different\u00a0stages\u00a0of\u00a0the\nfragment\u00a0use\u00a0different\u00a0sets\u00a0of\u00a0data\u00a0and\u00a0functions.\u00a0By\u00a0turning\u00a0them\u00a0into\u00a0separate\nmodules\u00a0I\u00a0can\u00a0make\u00a0this\u00a0difference\u00a0explicit,\u00a0revealing\u00a0the\u00a0difference\u00a0in\u00a0the\u00a0code.\nMechanics\nExtract\u00a0the\u00a0second\u00a0phase\u00a0code\u00a0into\u00a0its\u00a0own\u00a0function.\nTest.\nIntroduce\u00a0an\u00a0intermediate\u00a0data\u00a0structure\u00a0as\u00a0an\u00a0additional\u00a0argument\u00a0to\u00a0the\u00a0extracted\nfunction.\nTest.\nExamine\u00a0each\u00a0parameter\u00a0of\u00a0the\u00a0extracted\u00a0second\u00a0phase.\u00a0If\u00a0it\u00a0is\u00a0used\u00a0by\u00a0first\u00a0phase,\nmove\u00a0it\u00a0to\u00a0the\u00a0intermediate\u00a0data\u00a0structure.\u00a0Test\u00a0after\u00a0each\u00a0move.\nSometimes,\u00a0a\u00a0parameter\u00a0should\u00a0not\u00a0be\u00a0used\u00a0by\u00a0the\u00a0second\u00a0phase.\u00a0In\u00a0this\u00a0case,\nextract\u00a0the\u00a0results\u00a0of\u00a0each\u00a0usage\u00a0of\u00a0the\u00a0parameter\u00a0into\u00a0a\u00a0field\u00a0of\u00a0the\u00a0intermediate\ndata\u00a0structure\u00a0and\u00a0use\u00a0Move\u00a0Statements\u00a0to\u00a0Callers\u00a0(217)\u00a0on\u00a0the\u00a0line\u00a0that\u00a0populates\nit.\nwww.EBooksWorld.ir\n", "page": 177, "type": "text", "section": "Page 177"}
{"text": "Apply\u00a0Extract\u00a0Function\u00a0(106)\u00a0on\u00a0the\u00a0first\u00adphase\u00a0code,\u00a0returning\u00a0the\u00a0intermediate\ndata\u00a0structure.\nIt\u2019s\u00a0also\u00a0reasonable\u00a0to\u00a0extract\u00a0the\u00a0first\u00a0phase\u00a0into\u00a0a\u00a0transformer\u00a0object.\nExample\nI\u2019ll\u00a0start\u00a0with\u00a0code\u00a0to\u00a0price\u00a0an\u00a0order\u00a0for\u00a0some\u00a0vague\u00a0and\u00a0unimportant\u00a0kind\u00a0of\u00a0goods:\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0priceOrder(product,\u00a0quantity,\u00a0shippingMethod)\u00a0{\n\u00a0\u00a0const\u00a0basePrice\u00a0=\u00a0product.basePrice\u00a0*\u00a0quantity\u037e\n\u00a0\u00a0const\u00a0discount\u00a0=\u00a0Math.max(quantity\u00a0\u00ad\u00a0product.discountThreshold,\u00a00)\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0*\u00a0product.basePrice\u00a0*\u00a0product.discountRate\u037e\n\u00a0\u00a0const\u00a0shippingPerCase\u00a0=\u00a0(basePrice\u00a0>\u00a0shippingMethod.discountThreshold)\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0?\u00a0shippingMethod.discountedFee\u00a0:\u00a0shippingMethod.feePerCase\u037e\n\u00a0\u00a0const\u00a0shippingCost\u00a0=\u00a0quantity\u00a0*\u00a0shippingPerCase\u037e\n\u00a0\u00a0const\u00a0price\u00a0=\u00a0\u00a0basePrice\u00a0\u00ad\u00a0discount\u00a0+\u00a0shippingCost\u037e\n\u00a0\u00a0return\u00a0price\u037e\n}\nAlthough\u00a0this\u00a0is\u00a0the\u00a0usual\u00a0kind\u00a0of\u00a0trivial\u00a0example,\u00a0there\u00a0is\u00a0a\u00a0sense\u00a0of\u00a0two\u00a0phases\u00a0going\non\u00a0here.\u00a0The\u00a0first\u00a0couple\u00a0of\u00a0lines\u00a0of\u00a0code\u00a0use\u00a0the\u00a0product\u00a0information\u00a0to\u00a0calculate\u00a0the\nproduct\u00adoriented\u00a0price\u00a0of\u00a0the\u00a0order,\u00a0while\u00a0the\u00a0later\u00a0code\u00a0uses\u00a0shipping\u00a0information\u00a0to\ndetermine\u00a0the\u00a0shipping\u00a0cost.\u00a0If\u00a0I\u00a0have\u00a0changes\u00a0coming\u00a0up\u00a0that\u00a0complicate\u00a0the\u00a0pricing\nand\u00a0shipping\u00a0calculations,\u00a0but\u00a0they\u00a0work\u00a0relatively\u00a0independently,\u00a0then\u00a0splitting\u00a0this\ncode\u00a0into\u00a0two\u00a0phases\u00a0is\u00a0valuable.\nI\u00a0begin\u00a0by\u00a0applying\u00a0Extract\u00a0Function\u00a0(106)\u00a0to\u00a0the\u00a0shipping\u00a0calculation.\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0priceOrder(product,\u00a0quantity,\u00a0shippingMethod)\u00a0{\n\u00a0\u00a0const\u00a0basePrice\u00a0=\u00a0product.basePrice\u00a0*\u00a0quantity\u037e\n\u00a0\u00a0const\u00a0discount\u00a0=\u00a0Math.max(quantity\u00a0\u00ad\u00a0product.discountThreshold,\u00a00)\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0*\u00a0product.basePrice\u00a0*\u00a0product.discountRate\u037e\n\u00a0\u00a0const\u00a0price\u00a0=\u00a0\u00a0applyShipping(basePrice,\u00a0shippingMethod,\u00a0quantity,\u00a0discount)\u037e\n\u00a0\u00a0return\u00a0price\u037e\n}\nfunction\u00a0applyShipping(basePrice,\u00a0shippingMethod,\u00a0quantity,\u00a0discount)\u00a0{\n\u00a0\u00a0const\u00a0shippingPerCase\u00a0=\u00a0(basePrice\u00a0>\u00a0shippingMethod.discountThreshold)\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0?\u00a0shippingMethod.discountedFee\u00a0:\u00a0shippingMethod.feePerCase\u037e\n\u00a0\u00a0const\u00a0shippingCost\u00a0=\u00a0quantity\u00a0*\u00a0shippingPerCase\u037e\n\u00a0\u00a0const\u00a0price\u00a0=\u00a0\u00a0basePrice\u00a0\u00ad\u00a0discount\u00a0+\u00a0shippingCost\u037e\nwww.EBooksWorld.ir\n", "page": 178, "type": "text", "section": "Page 178"}
{"text": "\u00a0\u00a0return\u00a0price\u037e\n}\nI\u00a0pass\u00a0in\u00a0all\u00a0the\u00a0data\u00a0that\u00a0this\u00a0second\u00a0phase\u00a0needs\u00a0as\u00a0individual\u00a0parameters.\u00a0In\u00a0a\u00a0more\nrealistic\u00a0case,\u00a0there\u00a0can\u00a0be\u00a0a\u00a0lot\u00a0of\u00a0these,\u00a0but\u00a0I\u00a0don\u2019t\u00a0worry\u00a0about\u00a0it\u00a0as\u00a0I\u2019ll\u00a0whittle\u00a0them\ndown\u00a0later.\nNext,\u00a0I\u00a0introduce\u00a0the\u00a0intermediate\u00a0data\u00a0structure\u00a0that\u00a0will\u00a0communicate\u00a0between\u00a0the\ntwo\u00a0phases.\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0priceOrder(product,\u00a0quantity,\u00a0shippingMethod)\u00a0{\n\u00a0\u00a0const\u00a0basePrice\u00a0=\u00a0product.basePrice\u00a0*\u00a0quantity\u037e\n\u00a0\u00a0const\u00a0discount\u00a0=\u00a0Math.max(quantity\u00a0\u00ad\u00a0product.discountThreshold,\u00a00)\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0*\u00a0product.basePrice\u00a0*\u00a0product.discountRate\u037e\n\u00a0\u00a0const\u00a0priceData\u00a0=\u00a0{}\u037e\n\u00a0\u00a0const\u00a0price\u00a0=\u00a0\u00a0applyShipping(priceData,\u00a0basePrice,\u00a0shippingMethod,\u00a0quantity,\u00a0d\n\u00a0\u00a0return\u00a0price\u037e\n}\nfunction\u00a0applyShipping(priceData,\u00a0basePrice,\u00a0shippingMethod,\u00a0quantity,\u00a0discount)\n\u00a0\u00a0const\u00a0shippingPerCase\u00a0=\u00a0(basePrice\u00a0>\u00a0shippingMethod.discountThreshold)\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0?\u00a0shippingMethod.discountedFee\u00a0:\u00a0shippingMethod.feePerCase\u037e\n\u00a0\u00a0const\u00a0shippingCost\u00a0=\u00a0quantity\u00a0*\u00a0shippingPerCase\u037e\n\u00a0\u00a0const\u00a0price\u00a0=\u00a0\u00a0basePrice\u00a0\u00ad\u00a0discount\u00a0+\u00a0shippingCost\u037e\n\u00a0\u00a0return\u00a0price\u037e\n}\nNow,\u00a0I\u00a0look\u00a0at\u00a0the\u00a0various\u00a0parameters\u00a0to\u00a0applyShipping.\u00a0The\u00a0first\u00a0one\u00a0is\u00a0basePrice\nwhich\u00a0is\u00a0created\u00a0by\u00a0the\u00a0first\u00adphase\u00a0code.\u00a0So\u00a0I\u00a0move\u00a0this\u00a0into\u00a0the\u00a0intermediate\u00a0data\nstructure,\u00a0removing\u00a0it\u00a0from\u00a0the\u00a0parameter\u00a0list.\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0priceOrder(product,\u00a0quantity,\u00a0shippingMethod)\u00a0{\n\u00a0\u00a0const\u00a0basePrice\u00a0=\u00a0product.basePrice\u00a0*\u00a0quantity\u037e\n\u00a0\u00a0const\u00a0discount\u00a0=\u00a0Math.max(quantity\u00a0\u00ad\u00a0product.discountThreshold,\u00a00)\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0*\u00a0product.basePrice\u00a0*\u00a0product.discountRate\u037e\n\u00a0\u00a0const\u00a0priceData\u00a0=\u00a0{basePrice:\u00a0basePrice}\u037e\n\u00a0\u00a0const\u00a0price\u00a0=\u00a0\u00a0applyShipping(priceData,\u00a0basePrice,\u00a0shippingMethod,\u00a0quantity,\u00a0d\n\u00a0\u00a0return\u00a0price\u037e\n}\nfunction\u00a0applyShipping(priceData,\u00a0basePrice,\u00a0shippingMethod,\u00a0quantity,\u00a0discount)\n\u00a0\u00a0const\u00a0shippingPerCase\u00a0=\u00a0(priceData.basePrice\u00a0>\u00a0shippingMethod.discountThreshol\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0?\u00a0shippingMethod.discountedFee\u00a0:\u00a0shippingMethod.feePerCase\u037e\nwww.EBooksWorld.ir\n", "page": 179, "type": "text", "section": "Page 179"}
{"text": "\u00a0\u00a0const\u00a0shippingCost\u00a0=\u00a0quantity\u00a0*\u00a0shippingPerCase\u037e\n\u00a0\u00a0const\u00a0price\u00a0=\u00a0\u00a0priceData.basePrice\u00a0\u00ad\u00a0discount\u00a0+\u00a0shippingCost\u037e\n\u00a0\u00a0return\u00a0price\u037e\n}\nThe\u00a0next\u00a0parameter\u00a0in\u00a0the\u00a0list\u00a0is\u00a0shippingMethod.\u00a0This\u00a0one\u00a0I\u00a0leave\u00a0as\u00a0is,\u00a0since\u00a0it\u00a0isn\u2019t\nused\u00a0by\u00a0the\u00a0first\u00adphase\u00a0code.\nAfter\u00a0this,\u00a0I\u00a0have\u00a0quantity.\u00a0This\u00a0is\u00a0used\u00a0by\u00a0the\u00a0first\u00a0phase\u00a0but\u00a0not\u00a0created\u00a0by\u00a0it,\u00a0so\u00a0I\ncould\u00a0actually\u00a0leave\u00a0this\u00a0in\u00a0the\u00a0parameter\u00a0list.\u00a0My\u00a0usual\u00a0preference,\u00a0however,\u00a0is\u00a0to\u00a0move\nas\u00a0much\u00a0as\u00a0I\u00a0can\u00a0to\u00a0the\u00a0intermediate\u00a0data\u00a0structure.\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0priceOrder(product,\u00a0quantity,\u00a0shippingMethod)\u00a0{\n\u00a0\u00a0const\u00a0basePrice\u00a0=\u00a0product.basePrice\u00a0*\u00a0quantity\u037e\n\u00a0\u00a0const\u00a0discount\u00a0=\u00a0Math.max(quantity\u00a0\u00ad\u00a0product.discountThreshold,\u00a00)\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0*\u00a0product.basePrice\u00a0*\u00a0product.discountRate\u037e\n\u00a0\u00a0const\u00a0priceData\u00a0=\u00a0{basePrice:\u00a0basePrice,\u00a0quantity:\u00a0quantity}\u037e\n\u00a0\u00a0const\u00a0price\u00a0=\u00a0\u00a0applyShipping(priceData,\u00a0shippingMethod,\u00a0quantity,\u00a0discount)\u037e\n\u00a0\u00a0return\u00a0price\u037e\n}\nfunction\u00a0applyShipping(priceData,\u00a0shippingMethod,\u00a0quantity,\u00a0discount)\u00a0{\n\u00a0\u00a0const\u00a0shippingPerCase\u00a0=\u00a0(priceData.basePrice\u00a0>\u00a0shippingMethod.discountThreshol\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0?\u00a0shippingMethod.discountedFee\u00a0:\u00a0shippingMethod.feePerCase\u037e\n\u00a0\u00a0const\u00a0shippingCost\u00a0=\u00a0priceData.quantity\u00a0*\u00a0shippingPerCase\u037e\n\u00a0\u00a0const\u00a0price\u00a0=\u00a0\u00a0priceData.basePrice\u00a0\u00ad\u00a0discount\u00a0+\u00a0shippingCost\u037e\n\u00a0\u00a0return\u00a0price\u037e\n}\nI\u00a0do\u00a0the\u00a0same\u00a0with\u00a0discount.\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0priceOrder(product,\u00a0quantity,\u00a0shippingMethod)\u00a0{\n\u00a0\u00a0const\u00a0basePrice\u00a0=\u00a0product.basePrice\u00a0*\u00a0quantity\u037e\n\u00a0\u00a0const\u00a0discount\u00a0=\u00a0Math.max(quantity\u00a0\u00ad\u00a0product.discountThreshold,\u00a00)\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0*\u00a0product.basePrice\u00a0*\u00a0product.discountRate\u037e\n\u00a0\u00a0const\u00a0priceData\u00a0=\u00a0{basePrice:\u00a0basePrice,\u00a0quantity:\u00a0quantity,\u00a0discount:discount\n\u00a0\u00a0const\u00a0price\u00a0=\u00a0\u00a0applyShipping(priceData,\u00a0shippingMethod,\u00a0discount)\u037e\n\u00a0\u00a0return\u00a0price\u037e\n}\nfunction\u00a0applyShipping(priceData,\u00a0shippingMethod,\u00a0discount)\u00a0{\n\u00a0\u00a0const\u00a0shippingPerCase\u00a0=\u00a0(priceData.basePrice\u00a0>\u00a0shippingMethod.discountThreshol\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0?\u00a0shippingMethod.discountedFee\u00a0:\u00a0shippingMethod.feePerCase\u037e\n\u00a0\u00a0const\u00a0shippingCost\u00a0=\u00a0priceData.quantity\u00a0*\u00a0shippingPerCase\u037e\nwww.EBooksWorld.ir\n", "page": 180, "type": "text", "section": "Page 180"}
{"text": "\u00a0\u00a0const\u00a0price\u00a0=\u00a0\u00a0priceData.basePrice\u00a0\u00ad\u00a0priceData.discount\u00a0+\u00a0shippingCost\u037e\n\u00a0\u00a0return\u00a0price\u037e\n}\nOnce\u00a0I\u2019ve\u00a0gone\u00a0through\u00a0all\u00a0the\u00a0function\u00a0parameters,\u00a0I\u00a0have\u00a0the\u00a0intermediate\u00a0data\nstructure\u00a0fully\u00a0formed.\u00a0So\u00a0I\u00a0can\u00a0extract\u00a0the\u00a0first\u00adphase\u00a0code\u00a0into\u00a0its\u00a0own\u00a0function,\nreturning\u00a0this\u00a0data.\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0priceOrder(product,\u00a0quantity,\u00a0shippingMethod)\u00a0{\n\u00a0\u00a0const\u00a0priceData\u00a0=\u00a0calculatePricingData(product,\u00a0quantity)\u037e\n\u00a0\u00a0const\u00a0price\u00a0=\u00a0\u00a0applyShipping(priceData,\u00a0shippingMethod)\u037e\n\u00a0\u00a0return\u00a0price\u037e\n}\nfunction\u00a0calculatePricingData(product,\u00a0quantity)\u00a0{\n\u00a0\u00a0const\u00a0basePrice\u00a0=\u00a0product.basePrice\u00a0*\u00a0quantity\u037e\n\u00a0\u00a0const\u00a0discount\u00a0=\u00a0Math.max(quantity\u00a0\u00ad\u00a0product.discountThreshold,\u00a00)\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0*\u00a0product.basePrice\u00a0*\u00a0product.discountRate\u037e\n\u00a0\u00a0return\u00a0{basePrice:\u00a0basePrice,\u00a0quantity:\u00a0quantity,\u00a0discount:discount}\u037e\n}\nfunction\u00a0applyShipping(priceData,\u00a0shippingMethod)\u00a0{\n\u00a0\u00a0const\u00a0shippingPerCase\u00a0=\u00a0(priceData.basePrice\u00a0>\u00a0shippingMethod.discountThreshol\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0?\u00a0shippingMethod.discountedFee\u00a0:\u00a0shippingMethod.feePerCase\u037e\n\u00a0\u00a0const\u00a0shippingCost\u00a0=\u00a0priceData.quantity\u00a0*\u00a0shippingPerCase\u037e\n\u00a0\u00a0const\u00a0price\u00a0=\u00a0\u00a0priceData.basePrice\u00a0\u00ad\u00a0priceData.discount\u00a0+\u00a0shippingCost\u037e\n\u00a0\u00a0return\u00a0price\u037e\n}\nI\u00a0can\u2019t\u00a0resist\u00a0tidying\u00a0out\u00a0those\u00a0final\u00a0constants.\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0priceOrder(product,\u00a0quantity,\u00a0shippingMethod)\u00a0{\n\u00a0\u00a0const\u00a0priceData\u00a0=\u00a0calculatePricingData(product,\u00a0quantity)\u037e\n\u00a0\u00a0return\u00a0applyShipping(priceData,\u00a0shippingMethod)\u037e\n}\nfunction\u00a0calculatePricingData(product,\u00a0quantity)\u00a0{\n\u00a0\u00a0const\u00a0basePrice\u00a0=\u00a0product.basePrice\u00a0*\u00a0quantity\u037e\n\u00a0\u00a0const\u00a0discount\u00a0=\u00a0Math.max(quantity\u00a0\u00ad\u00a0product.discountThreshold,\u00a00)\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0*\u00a0product.basePrice\u00a0*\u00a0product.discountRate\u037e\n\u00a0\u00a0return\u00a0{basePrice:\u00a0basePrice,\u00a0quantity:\u00a0quantity,\u00a0discount:discount}\u037e\n}\nfunction\u00a0applyShipping(priceData,\u00a0shippingMethod)\u00a0{\n\u00a0\u00a0const\u00a0shippingPerCase\u00a0=\u00a0(priceData.basePrice\u00a0>\u00a0shippingMethod.discountThreshol\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0?\u00a0shippingMethod.discountedFee\u00a0:\u00a0shippingMethod.feePerCase\u037e\nwww.EBooksWorld.ir\n", "page": 181, "type": "text", "section": "Page 181"}
{"text": "\u00a0\u00a0const\u00a0shippingCost\u00a0=\u00a0priceData.quantity\u00a0*\u00a0shippingPerCase\u037e\n\u00a0\u00a0return\u00a0priceData.basePrice\u00a0\u00ad\u00a0priceData.discount\u00a0+\u00a0shippingCost\u037e\n}\nwww.EBooksWorld.ir\n", "page": 182, "type": "text", "section": "Page 182"}
{"text": "Chapter 7\nEncapsulation\nPerhaps\u00a0the\u00a0most\u00a0important\u00a0criteria\u00a0to\u00a0be\u00a0used\u00a0in\u00a0decomposing\u00a0modules\u00a0is\u00a0to\u00a0identify\nsecrets\u00a0that\u00a0modules\u00a0should\u00a0hide\u00a0from\u00a0the\u00a0rest\u00a0of\u00a0the\u00a0system\u00a0[Parnas].\u00a0Data\u00a0structures\nare\u00a0the\u00a0most\u00a0common\u00a0secrets,\u00a0and\u00a0I\u00a0can\u00a0hide\u00a0data\u00a0structures\u00a0by\u00a0encapsulating\u00a0them\nwith\u00a0Encapsulate\u00a0Record\u00a0(162)\u00a0and\u00a0Encapsulate\u00a0Collection\u00a0(170).\u00a0Even\u00a0primitive\u00a0data\nvalues\u00a0can\u00a0be\u00a0encapsulated\u00a0with\u00a0Replace\u00a0Primitive\u00a0with\u00a0Object\u00a0(174)\u2014the\u00a0magnitude\u00a0of\nsecond\u00adorder\u00a0benefits\u00a0from\u00a0doing\u00a0this\u00a0often\u00a0surprises\u00a0people.\u00a0Temporary\u00a0variables\noften\u00a0get\u00a0in\u00a0the\u00a0way\u00a0of\u00a0refactoring\u2014I\u00a0have\u00a0to\u00a0ensure\u00a0they\u00a0are\u00a0calculated\u00a0in\u00a0the\u00a0right\norder\u00a0and\u00a0their\u00a0values\u00a0are\u00a0available\u00a0to\u00a0other\u00a0parts\u00a0of\u00a0the\u00a0code\u00a0that\u00a0need\u00a0them.\u00a0Using\nReplace\u00a0Temp\u00a0with\u00a0Query\u00a0(178)\u00a0is\u00a0a\u00a0great\u00a0help\u00a0here,\u00a0particularly\u00a0when\u00a0splitting\u00a0up\u00a0an\noverly\u00a0long\u00a0function.\nClasses\u00a0were\u00a0designed\u00a0for\u00a0information\u00a0hiding.\u00a0In\u00a0the\u00a0previous\u00a0chapter,\u00a0I\u00a0described\u00a0a\nway\u00a0to\u00a0form\u00a0them\u00a0with\u00a0Combine\u00a0Functions\u00a0into\u00a0Class\u00a0(144).\u00a0The\u00a0common\u00a0extract/inline\noperations\u00a0also\u00a0apply\u00a0to\u00a0classes\u00a0with\u00a0Extract\u00a0Class\u00a0(182)\u00a0and\u00a0Inline\u00a0Class\u00a0(186).\nAs\u00a0well\u00a0as\u00a0hiding\u00a0the\u00a0internals\u00a0of\u00a0classes,\u00a0it\u2019s\u00a0often\u00a0useful\u00a0to\u00a0hide\u00a0connections\u00a0between\nclasses,\u00a0which\u00a0I\u00a0can\u00a0do\u00a0with\u00a0Hide\u00a0Delegate\u00a0(189).\u00a0But\u00a0too\u00a0much\u00a0hiding\u00a0leads\u00a0to\u00a0bloated\ninterfaces,\u00a0so\u00a0I\u00a0also\u00a0need\u00a0its\u00a0reverse:\u00a0Remove\u00a0Middle\u00a0Man\u00a0(192).\nClasses\u00a0and\u00a0modules\u00a0are\u00a0the\u00a0largest\u00a0forms\u00a0of\u00a0encapsulation,\u00a0but\u00a0functions\u00a0also\nencapsulate\u00a0their\u00a0implementation.\u00a0Sometimes,\u00a0I\u00a0may\u00a0need\u00a0to\u00a0make\u00a0a\u00a0wholesale\u00a0change\nto\u00a0an\u00a0algorithm,\u00a0which\u00a0I\u00a0can\u00a0do\u00a0by\u00a0wrapping\u00a0it\u00a0in\u00a0a\u00a0function\u00a0with\u00a0Extract\u00a0Function\n(106)\u00a0and\u00a0applying\u00a0Substitute\u00a0Algorithm\u00a0(195).\nENCAPSULATE RECORD\nformerly:\u00a0Replace\u00a0Record\u00a0with\u00a0Data\u00a0Class\nHistory\nTopics\nTutorials\nOffers & Deals\nHighlights\nSettings\nSupport\nSign Out\n \n  \n  \n \n \n \n \n \n \nwww.EBooksWorld.ir\n", "page": 183, "type": "text", "section": "Page 183"}
{"text": "Motivation\nThis\u00a0is\u00a0why\u00a0I\u00a0often\u00a0favor\u00a0objects\u00a0over\u00a0records\u00a0for\u00a0mutable\u00a0data.\u00a0With\u00a0objects,\u00a0I\u00a0can\u00a0hide\nwhat\u00a0is\u00a0stored\u00a0and\u00a0provide\u00a0methods\u00a0for\u00a0all\u00a0three\u00a0values.\u00a0The\u00a0user\u00a0of\u00a0the\u00a0object\u00a0doesn\u2019t\nneed\u00a0to\u00a0know\u00a0or\u00a0care\u00a0which\u00a0is\u00a0stored\u00a0and\u00a0which\u00a0is\u00a0calculated.\u00a0This\u00a0encapsulation\u00a0also\nhelps\u00a0with\u00a0renaming:\u00a0I\u00a0can\u00a0rename\u00a0the\u00a0field\u00a0while\u00a0providing\u00a0methods\u00a0for\u00a0both\u00a0the\u00a0new\nand\u00a0the\u00a0old\u00a0names,\u00a0gradually\u00a0updating\u00a0callers\u00a0until\u00a0they\u00a0are\u00a0all\u00a0done.\nI\u00a0just\u00a0said\u00a0I\u00a0favor\u00a0objects\u00a0for\u00a0mutable\u00a0data.\u00a0If\u00a0I\u00a0have\u00a0an\u00a0immutable\u00a0value,\u00a0I\u00a0can\u00a0just\u00a0have\nall\u00a0three\u00a0values\u00a0in\u00a0my\u00a0record,\u00a0using\u00a0an\u00a0enrichment\u00a0step\u00a0if\u00a0necessary.\u00a0Similarly,\u00a0it\u2019s\u00a0easy\nto\u00a0copy\u00a0the\u00a0field\u00a0when\u00a0renaming.\nI\u00a0can\u00a0have\u00a0two\u00a0kinds\u00a0of\u00a0record\u00a0structures:\u00a0those\u00a0where\u00a0I\u00a0declare\u00a0the\u00a0legal\u00a0field\u00a0names\nand\u00a0those\u00a0that\u00a0allow\u00a0me\u00a0to\u00a0use\u00a0whatever\u00a0I\u00a0like.\u00a0The\u00a0latter\u00a0are\u00a0often\u00a0implemented\nthrough\u00a0a\u00a0library\u00a0class\u00a0called\u00a0something\u00a0like\u00a0hash,\u00a0map,\u00a0hashmap,\u00a0dictionary,\u00a0or\nassociative\u00a0array.\u00a0Many\u00a0languages\u00a0provide\u00a0convenient\u00a0syntax\u00a0for\u00a0creating\u00a0hashmaps,\nwhich\u00a0makes\u00a0them\u00a0useful\u00a0in\u00a0many\u00a0programming\u00a0situations.\u00a0The\u00a0downside\u00a0of\u00a0using\nthem\u00a0is\u00a0they\u00a0are\u00a0aren\u2019t\u00a0explicit\u00a0about\u00a0their\u00a0fields.\u00a0The\u00a0only\u00a0way\u00a0I\u00a0can\u00a0tell\u00a0if\u00a0they\u00a0use\nstart/end\u00a0or\u00a0start/length\u00a0is\u00a0by\u00a0looking\u00a0at\u00a0where\u00a0they\u00a0are\u00a0created\u00a0and\u00a0used.\u00a0This\u00a0isn\u2019t\u00a0a\nproblem\u00a0if\u00a0they\u00a0are\u00a0only\u00a0used\u00a0in\u00a0a\u00a0small\u00a0section\u00a0of\u00a0a\u00a0program,\u00a0but\u00a0the\u00a0wider\u00a0their\u00a0scope\nof\u00a0usage,\u00a0the\u00a0greater\u00a0problem\u00a0I\u00a0get\u00a0from\u00a0their\u00a0implicit\u00a0structure.\u00a0I\u00a0could\u00a0refactor\u00a0such\nimplicit\u00a0records\u00a0into\u00a0explicit\u00a0ones\u2014but\u00a0if\u00a0I\u00a0need\u00a0to\u00a0do\u00a0that,\u00a0I\u2019d\u00a0rather\u00a0make\u00a0them\u00a0classes\nwww.EBooksWorld.ir\n", "page": 184, "type": "text", "section": "Page 184"}
{"text": "instead.\nIt\u2019s\u00a0common\u00a0to\u00a0pass\u00a0nested\u00a0structures\u00a0of\u00a0lists\u00a0and\u00a0hashmaps\u00a0which\u00a0are\u00a0often\u00a0serialized\ninto\u00a0formats\u00a0like\u00a0JSON\u00a0or\u00a0XML.\u00a0Such\u00a0structures\u00a0can\u00a0be\u00a0encapsulated\u00a0too,\u00a0which\u00a0helps\u00a0if\ntheir\u00a0formats\u00a0change\u00a0later\u00a0on\u00a0or\u00a0if\u00a0I\u2019m\u00a0concerned\u00a0about\u00a0updates\u00a0to\u00a0the\u00a0data\u00a0that\u00a0are\nhard\u00a0to\u00a0keep\u00a0track\u00a0of.\nMechanics\nUse\u00a0Encapsulate\u00a0Variable\u00a0(132)\u00a0on\u00a0the\u00a0variable\u00a0holding\u00a0the\u00a0record.\nGive\u00a0the\u00a0functions\u00a0that\u00a0encapsulate\u00a0the\u00a0record\u00a0names\u00a0that\u00a0are\u00a0easily\u00a0searchable.\nReplace\u00a0the\u00a0content\u00a0of\u00a0the\u00a0variable\u00a0with\u00a0a\u00a0simple\u00a0class\u00a0that\u00a0wraps\u00a0the\u00a0record.\u00a0Define\nan\u00a0accessor\u00a0inside\u00a0this\u00a0class\u00a0that\u00a0returns\u00a0the\u00a0raw\u00a0record.\u00a0Modify\u00a0the\u00a0functions\u00a0that\nencapsulate\u00a0the\u00a0variable\u00a0to\u00a0use\u00a0this\u00a0accessor.\nTest.\nProvide\u00a0new\u00a0functions\u00a0that\u00a0return\u00a0the\u00a0object\u00a0rather\u00a0than\u00a0the\u00a0raw\u00a0record.\nFor\u00a0each\u00a0user\u00a0of\u00a0the\u00a0record,\u00a0replace\u00a0its\u00a0use\u00a0of\u00a0a\u00a0function\u00a0that\u00a0returns\u00a0the\u00a0record\u00a0with\na\u00a0function\u00a0that\u00a0returns\u00a0the\u00a0object.\u00a0Use\u00a0an\u00a0accessor\u00a0on\u00a0the\u00a0object\u00a0to\u00a0get\u00a0at\u00a0the\u00a0field\ndata,\u00a0creating\u00a0that\u00a0accessor\u00a0if\u00a0needed.\u00a0Test\u00a0after\u00a0each\u00a0change.\nIf\u00a0it\u2019s\u00a0a\u00a0complex\u00a0record,\u00a0such\u00a0as\u00a0one\u00a0with\u00a0a\u00a0nested\u00a0structure,\u00a0focus\u00a0on\u00a0clients\u00a0that\nupdate\u00a0the\u00a0data\u00a0first.\u00a0Consider\u00a0returning\u00a0a\u00a0copy\u00a0or\u00a0read\u00adonly\u00a0proxy\u00a0of\u00a0the\u00a0data\u00a0for\nclients\u00a0that\u00a0only\u00a0read\u00a0the\u00a0data.\nRemove\u00a0the\u00a0class\u2019s\u00a0raw\u00a0data\u00a0accessor\u00a0and\u00a0the\u00a0easily\u00a0searchable\u00a0functions\u00a0that\nreturned\u00a0the\u00a0raw\u00a0record.\nTest.\nIf\u00a0the\u00a0fields\u00a0of\u00a0the\u00a0record\u00a0are\u00a0themselves\u00a0structures,\u00a0consider\u00a0using\u00a0Encapsulate\nRecord\u00a0and\u00a0Encapsulate\u00a0Collection\u00a0(170)\u00a0recursively.\nExample\nI\u2019ll\u00a0start\u00a0with\u00a0a\u00a0constant\u00a0that\u00a0is\u00a0widely\u00a0used\u00a0across\u00a0a\u00a0program.\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nwww.EBooksWorld.ir\n", "page": 185, "type": "text", "section": "Page 185"}
{"text": "const\u00a0organization\u00a0=\u00a0{name:\u00a0\"Acme\u00a0Gooseberries\",\u00a0country:\u00a0\"GB\"}\u037e\nThis\u00a0is\u00a0a\u00a0JavaScript\u00a0object\u00a0which\u00a0is\u00a0being\u00a0used\u00a0as\u00a0a\u00a0record\u00a0structure\u00a0by\u00a0various\u00a0parts\u00a0of\nthe\u00a0program,\u00a0with\u00a0accesses\u00a0like\u00a0this:\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nresult\u00a0+=\u00a0`<h1>${organization.name}</h1>`\u037e\nand\norganization.name\u00a0=\u00a0newName\u037e\nThe\u00a0first\u00a0step\u00a0is\u00a0a\u00a0simple\u00a0Encapsulate\u00a0Variable\u00a0(132).\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0getRawDataOfOrganization()\u00a0{return\u00a0organization\u037e}\nexample\u00a0reader\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nresult\u00a0+=\u00a0`<h1>${getRawDataOfOrganization().name}</h1>`\u037e\nexample\u00a0writer\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\ngetRawDataOfOrganization().name\u00a0=\u00a0newName\u037e\nIt\u2019s\u00a0not\u00a0quite\u00a0a\u00a0standard\u00a0Encapsulate\u00a0Variable\u00a0(132),\u00a0since\u00a0I\u00a0gave\u00a0the\u00a0getter\u00a0a\u00a0name\ndeliberately\u00a0chosen\u00a0to\u00a0be\u00a0both\u00a0ugly\u00a0and\u00a0easy\u00a0to\u00a0search\u00a0for.\u00a0This\u00a0is\u00a0because\u00a0I\u00a0intend\u00a0its\nlife\u00a0to\u00a0be\u00a0short.\nEncapsulating\u00a0a\u00a0record\u00a0means\u00a0going\u00a0deeper\u00a0than\u00a0just\u00a0the\u00a0variable\u00a0itself\u037e\u00a0I\u00a0want\u00a0to\ncontrol\u00a0how\u00a0it\u2019s\u00a0manipulated.\u00a0I\u00a0can\u00a0do\u00a0this\u00a0by\u00a0replacing\u00a0the\u00a0record\u00a0with\u00a0a\u00a0class.\nwww.EBooksWorld.ir\n", "page": 186, "type": "text", "section": "Page 186"}
{"text": "class\u00a0Organization\u2026\nclass\u00a0Organization\u00a0{\n\u00a0\u00a0constructor(data)\u00a0{\n\u00a0\u00a0\u00a0\u00a0this._data\u00a0=\u00a0data\u037e\n\u00a0\u00a0}\n}\ntop\u00a0level\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nconst\u00a0organization\u00a0=\u00a0new\u00a0Organization({name:\u00a0\"Acme\u00a0Gooseberries\",\u00a0country:\u00a0\"GB\"}\nfunction\u00a0getRawDataOfOrganization()\u00a0{return\u00a0organization._data\u037e}\nfunction\u00a0getOrganization()\u00a0{return\u00a0organization\u037e}\nNow\u00a0that\u00a0I\u00a0have\u00a0an\u00a0object\u00a0in\u00a0place,\u00a0I\u00a0start\u00a0looking\u00a0at\u00a0the\u00a0users\u00a0of\u00a0the\u00a0record.\u00a0Any\u00a0one\nthat\u00a0updates\u00a0the\u00a0record\u00a0gets\u00a0replaced\u00a0with\u00a0a\u00a0setter.\nclass\u00a0Organization\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nset\u00a0name(aString)\u00a0{this._data.name\u00a0=\u00a0aString\u037e}\nclient\u2026\ngetOrganization().name\u00a0=\u00a0newName\u037e\nSimilarly,\u00a0I\u00a0replace\u00a0any\u00a0readers\u00a0with\u00a0the\u00a0appropriate\u00a0getter.\nclass\u00a0Organization\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nget\u00a0name()\u00a0\u00a0\u00a0\u00a0{return\u00a0this._data.name\u037e}\nclient\u2026\nwww.EBooksWorld.ir\n", "page": 187, "type": "text", "section": "Page 187"}
{"text": "Click\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nresult\u00a0+=\u00a0`<h1>${getOrganization().name}</h1>`\u037e\nAfter\u00a0I\u2019ve\u00a0done\u00a0that,\u00a0I\u00a0can\u00a0follow\u00a0through\u00a0on\u00a0my\u00a0threat\u00a0to\u00a0give\u00a0the\u00a0ugly\u00a0sounding\nfunction\u00a0a\u00a0short\u00a0life.\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0getRawDataOfOrganization()\u00a0{return\u00a0organization._data\u037e}\nfunction\u00a0getOrganization()\u00a0{return\u00a0organization\u037e}\nI\u2019d\u00a0also\u00a0be\u00a0inclined\u00a0to\u00a0fold\u00a0the\u00a0_data\u00a0field\u00a0directly\u00a0into\u00a0the\u00a0object.\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nclass\u00a0Organization\u00a0{\n\u00a0\u00a0constructor(data)\u00a0{\n\u00a0\u00a0\u00a0\u00a0this._name\u00a0=\u00a0data.name\u037e\n\u00a0\u00a0\u00a0\u00a0this._country\u00a0=\u00a0data.country\u037e\n\u00a0\u00a0}\n\u00a0\u00a0get\u00a0name()\u00a0\u00a0\u00a0\u00a0{return\u00a0this._name\u037e}\n\u00a0\u00a0set\u00a0name(aString)\u00a0{this._name\u00a0=\u00a0aString\u037e}\n\u00a0\u00a0get\u00a0country()\u00a0\u00a0\u00a0\u00a0{return\u00a0this._country\u037e}\n\u00a0\u00a0set\u00a0country(aCountryCode)\u00a0{this._country\u00a0=\u00a0aCountryCode\u037e}\n}\nThis\u00a0has\u00a0the\u00a0advantage\u00a0of\u00a0breaking\u00a0the\u00a0link\u00a0to\u00a0the\u00a0input\u00a0data\u00a0record.\u00a0This\u00a0might\u00a0be\nuseful\u00a0if\u00a0a\u00a0reference\u00a0to\u00a0it\u00a0runs\u00a0around,\u00a0which\u00a0would\u00a0break\u00a0encapsulation.\u00a0Should\u00a0I\u00a0not\nfold\u00a0the\u00a0data\u00a0into\u00a0individual\u00a0fields,\u00a0I\u00a0would\u00a0be\u00a0wise\u00a0to\u00a0copy\u00a0_data\u00a0when\u00a0I\u00a0assign\u00a0it.\nExample: Encapsulating a Nested Record\nThe\u00a0above\u00a0example\u00a0looks\u00a0at\u00a0a\u00a0shallow\u00a0record,\u00a0but\u00a0what\u00a0do\u00a0I\u00a0do\u00a0with\u00a0data\u00a0that\u00a0is\u00a0deeply\nnested,\u00a0e.g.,\u00a0coming\u00a0from\u00a0a\u00a0JSON\u00a0document?\u00a0The\u00a0core\u00a0refactoring\u00a0steps\u00a0still\u00a0apply,\u00a0and\nI\u00a0have\u00a0to\u00a0be\u00a0equally\u00a0careful\u00a0with\u00a0updates,\u00a0but\u00a0I\u00a0do\u00a0get\u00a0some\u00a0options\u00a0around\u00a0reads.\nAs\u00a0an\u00a0example,\u00a0here\u00a0is\u00a0some\u00a0slightly\u00a0more\u00a0nested\u00a0data:\u00a0a\u00a0collection\u00a0of\u00a0customers,\u00a0kept\nin\u00a0a\u00a0hashmap\u00a0indexed\u00a0by\u00a0their\u00a0customer\u00a0ID.\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nwww.EBooksWorld.ir\n", "page": 188, "type": "text", "section": "Page 188"}
{"text": "\"1920\":\u00a0{\n\u00a0\u00a0name:\u00a0\"martin\",\n\u00a0\u00a0id:\u00a0\"1920\",\n\u00a0\u00a0usages:\u00a0{\n\u00a0\u00a0\u00a0\u00a0\"2016\":\u00a0{\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\"1\":\u00a050,\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\"2\":\u00a055,\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0//\u00a0remaining\u00a0months\u00a0of\u00a0the\u00a0year\n\u00a0\u00a0\u00a0\u00a0},\n\u00a0\u00a0\u00a0\u00a0\"2015\":\u00a0{\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\"1\":\u00a070,\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\"2\":\u00a063,\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0//\u00a0remaining\u00a0months\u00a0of\u00a0the\u00a0year\n\u00a0\u00a0\u00a0\u00a0}\n\u00a0\u00a0}\n},\n\"38673\":\u00a0{\n\u00a0\u00a0name:\u00a0\"neal\",\n\u00a0\u00a0id:\u00a0\"38673\",\n\u00a0\u00a0//\u00a0more\u00a0customers\u00a0in\u00a0a\u00a0similar\u00a0form\nWith\u00a0more\u00a0nested\u00a0data,\u00a0reads\u00a0and\u00a0writes\u00a0can\u00a0be\u00a0digging\u00a0into\u00a0the\u00a0data\u00a0structure.\nsample\u00a0update\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\ncustomerData[customerID].usages[year][month]\u00a0=\u00a0amount\u037e\nsample\u00a0read\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0compareUsage\u00a0(customerID,\u00a0laterYear,\u00a0month)\u00a0{\n\u00a0\u00a0const\u00a0later\u00a0\u00a0\u00a0=\u00a0customerData[customerID].usages[laterYear][month]\u037e\n\u00a0\u00a0const\u00a0earlier\u00a0=\u00a0customerData[customerID].usages[laterYear\u00a0\u00ad\u00a01][month]\u037e\n\u00a0\u00a0return\u00a0{laterAmount:\u00a0later,\u00a0change:\u00a0later\u00a0\u00ad\u00a0earlier}\u037e\n}\nTo\u00a0encapsulate\u00a0this\u00a0data,\u00a0I\u00a0also\u00a0start\u00a0with\u00a0Encapsulate\u00a0Variable\u00a0(132).\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0getRawDataOfCustomers()\u00a0\u00a0\u00a0\u00a0{return\u00a0customerData\u037e}\nfunction\u00a0setRawDataOfCustomers(arg)\u00a0{customerData\u00a0=\u00a0arg\u037e}\nwww.EBooksWorld.ir\n", "page": 189, "type": "text", "section": "Page 189"}
{"text": "sample\u00a0update\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\ngetRawDataOfCustomers()[customerID].usages[year][month]\u00a0=\u00a0amount\u037e\nsample\u00a0read\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0compareUsage\u00a0(customerID,\u00a0laterYear,\u00a0month)\u00a0{\n\u00a0\u00a0const\u00a0later\u00a0\u00a0\u00a0=\u00a0getRawDataOfCustomers()[customerID].usages[laterYear][month]\u037e\n\u00a0\u00a0const\u00a0earlier\u00a0=\u00a0getRawDataOfCustomers()[customerID].usages[laterYear\u00a0\u00ad\u00a01][mont\n\u00a0\u00a0return\u00a0{laterAmount:\u00a0later,\u00a0change:\u00a0later\u00a0\u00ad\u00a0earlier}\u037e\n}\nI\u00a0then\u00a0make\u00a0a\u00a0class\u00a0for\u00a0the\u00a0overall\u00a0data\u00a0structure.\nclass\u00a0CustomerData\u00a0{\n\u00a0\u00a0constructor(data)\u00a0{\n\u00a0\u00a0\u00a0\u00a0this._data\u00a0=\u00a0data\u037e\n\u00a0\u00a0}\n}\ntop\u00a0level\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0getCustomerData()\u00a0{return\u00a0customerData\u037e}\nfunction\u00a0getRawDataOfCustomers()\u00a0\u00a0\u00a0\u00a0{return\u00a0customerData._data\u037e}\nfunction\u00a0setRawDataOfCustomers(arg)\u00a0{customerData\u00a0=\u00a0new\u00a0CustomerData(arg)\u037e}\nThe\u00a0most\u00a0important\u00a0area\u00a0to\u00a0deal\u00a0with\u00a0is\u00a0the\u00a0updates.\u00a0So,\u00a0while\u00a0I\u00a0look\u00a0at\u00a0all\u00a0the\u00a0callers\u00a0of\ngetRawDataOfCustomers,\u00a0I\u2019m\u00a0focused\u00a0on\u00a0those\u00a0where\u00a0the\u00a0data\u00a0is\u00a0changed.\u00a0To\nremind\u00a0you,\u00a0here\u2019s\u00a0the\u00a0update\u00a0again:\nsample\u00a0update\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nwww.EBooksWorld.ir\n", "page": 190, "type": "text", "section": "Page 190"}
{"text": "getRawDataOfCustomers()[customerID].usages[year][month]\u00a0=\u00a0amount\u037e\nThe\u00a0general\u00a0mechanics\u00a0now\u00a0say\u00a0to\u00a0return\u00a0the\u00a0full\u00a0customer\u00a0and\u00a0use\u00a0an\u00a0accessor,\ncreating\u00a0one\u00a0if\u00a0needed.\u00a0I\u00a0don\u2019t\u00a0have\u00a0a\u00a0setter\u00a0on\u00a0the\u00a0customer\u00a0for\u00a0this\u00a0update,\u00a0and\u00a0this\none\u00a0digs\u00a0into\u00a0the\u00a0structure.\u00a0So,\u00a0to\u00a0make\u00a0one,\u00a0I\u00a0begin\u00a0by\u00a0using\u00a0Extract\u00a0Function\u00a0(106)\u00a0on\nthe\u00a0code\u00a0that\u00a0digs\u00a0into\u00a0the\u00a0data\u00a0structure.\nsample\u00a0update\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nsetUsage(customerID,\u00a0year,\u00a0month,\u00a0amount)\u037e\ntop\u00a0level\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0setUsage(customerID,\u00a0year,\u00a0month,\u00a0amount)\u00a0{\n\u00a0\u00a0getRawDataOfCustomers()[customerID].usages[year][month]\u00a0=\u00a0amount\u037e\n}\nI\u00a0then\u00a0use\u00a0Move\u00a0Function\u00a0(198)\u00a0to\u00a0move\u00a0it\u00a0into\u00a0the\u00a0new\u00a0customer\u00a0data\u00a0class.\nsample\u00a0update\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\ngetCustomerData().setUsage(customerID,\u00a0year,\u00a0month,\u00a0amount)\u037e\nclass\u00a0CustomerData\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nsetUsage(customerID,\u00a0year,\u00a0month,\u00a0amount)\u00a0{\n\u00a0\u00a0this._data[customerID].usages[year][month]\u00a0=\u00a0amount\u037e\n}\nWhen\u00a0working\u00a0with\u00a0a\u00a0big\u00a0data\u00a0structure,\u00a0I\u00a0like\u00a0to\u00a0concentrate\u00a0on\u00a0the\u00a0updates.\u00a0Getting\nthem\u00a0visible\u00a0and\u00a0gathered\u00a0in\u00a0a\u00a0single\u00a0place\u00a0is\u00a0the\u00a0most\u00a0important\u00a0part\u00a0of\u00a0the\nencapsulation.\nwww.EBooksWorld.ir\n", "page": 191, "type": "text", "section": "Page 191"}
{"text": "At\u00a0some\u00a0point,\u00a0I\u00a0will\u00a0think\u00a0I\u2019ve\u00a0got\u00a0them\u00a0all\u2014but\u00a0how\u00a0can\u00a0I\u00a0be\u00a0sure?\u00a0There\u2019s\u00a0a\u00a0couple\u00a0of\nways\u00a0to\u00a0check.\u00a0One\u00a0is\u00a0to\u00a0modify\u00a0getRawDataOfCustomers\u00a0to\u00a0return\u00a0a\u00a0deep\u00a0copy\u00a0of\nthe\u00a0data\u037e\u00a0if\u00a0my\u00a0test\u00a0coverage\u00a0is\u00a0good,\u00a0one\u00a0of\u00a0the\u00a0tests\u00a0should\u00a0break\u00a0if\u00a0I\u00a0missed\u00a0a\nmodification.\ntop\u00a0level\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0getCustomerData()\u00a0{return\u00a0customerData\u037e}\nfunction\u00a0getRawDataOfCustomers()\u00a0\u00a0\u00a0\u00a0{return\u00a0customerData.rawData\u037e}\nfunction\u00a0setRawDataOfCustomers(arg)\u00a0{customerData\u00a0=\u00a0new\u00a0CustomerData(arg)\u037e}\nclass\u00a0CustomerData\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nget\u00a0rawData()\u00a0{\n\u00a0\u00a0return\u00a0_.cloneDeep(this._data)\u037e\n}\nI\u2019m\u00a0using\u00a0the\u00a0lodash\u00a0library\u00a0to\u00a0make\u00a0a\u00a0deep\u00a0copy.\nAnother\u00a0approach\u00a0is\u00a0to\u00a0return\u00a0a\u00a0read\u00adonly\u00a0proxy\u00a0for\u00a0the\u00a0data\u00a0structure.\u00a0Such\u00a0a\u00a0proxy\ncould\u00a0raise\u00a0an\u00a0exception\u00a0if\u00a0the\u00a0client\u00a0code\u00a0tries\u00a0to\u00a0modify\u00a0the\u00a0underlying\u00a0object.\u00a0Some\nlanguages\u00a0make\u00a0this\u00a0easy,\u00a0but\u00a0it\u2019s\u00a0a\u00a0pain\u00a0in\u00a0JavaScript,\u00a0so\u00a0I\u2019ll\u00a0leave\u00a0it\u00a0as\u00a0an\u00a0exercise\u00a0for\nthe\u00a0reader.\u00a0I\u00a0could\u00a0also\u00a0take\u00a0a\u00a0copy\u00a0and\u00a0recursively\u00a0freeze\u00a0it\u00a0to\u00a0detect\u00a0any\u00a0modifications.\nDealing\u00a0with\u00a0the\u00a0updates\u00a0is\u00a0valuable,\u00a0but\u00a0what\u00a0about\u00a0the\u00a0readers?\u00a0Here\u00a0there\u00a0are\u00a0a\u00a0few\noptions.\nThe\u00a0first\u00a0option\u00a0is\u00a0to\u00a0do\u00a0the\u00a0same\u00a0thing\u00a0as\u00a0I\u00a0did\u00a0for\u00a0the\u00a0setters.\u00a0Extract\u00a0all\u00a0the\u00a0reads\u00a0into\ntheir\u00a0own\u00a0functions\u00a0and\u00a0move\u00a0them\u00a0into\u00a0the\u00a0customer\u00a0data\u00a0class.\nclass\u00a0CustomerData\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nusage(customerID,\u00a0year,\u00a0month)\u00a0{\n\u00a0\u00a0return\u00a0this._data[customerID].usages[year][month]\u037e\n}\nwww.EBooksWorld.ir\n", "page": 192, "type": "text", "section": "Page 192"}
{"text": "top\u00a0level\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0compareUsage\u00a0(customerID,\u00a0laterYear,\u00a0month)\u00a0{\n\u00a0\u00a0const\u00a0later\u00a0\u00a0\u00a0=\u00a0getCustomerData().usage(customerID,\u00a0laterYear,\u00a0month)\u037e\n\u00a0\u00a0const\u00a0earlier\u00a0=\u00a0getCustomerData().usage(customerID,\u00a0laterYear\u00a0\u00ad\u00a01,\u00a0month)\n\u00a0\u00a0return\u00a0{laterAmount:\u00a0later,\u00a0change:\u00a0later\u00a0\u00ad\u00a0earlier}\u037e\n}\nThe\u00a0great\u00a0thing\u00a0about\u00a0this\u00a0approach\u00a0is\u00a0that\u00a0it\u00a0gives\u00a0customerData\u00a0an\u00a0explicit\u00a0API\u00a0that\ncaptures\u00a0all\u00a0the\u00a0uses\u00a0made\u00a0of\u00a0it.\u00a0I\u00a0can\u00a0look\u00a0at\u00a0the\u00a0class\u00a0and\u00a0see\u00a0all\u00a0their\u00a0uses\u00a0of\u00a0the\u00a0data.\nBut\u00a0this\u00a0can\u00a0be\u00a0a\u00a0lot\u00a0of\u00a0code\u00a0for\u00a0lots\u00a0of\u00a0special\u00a0cases.\u00a0Modern\u00a0languages\u00a0provide\u00a0good\naffordances\u00a0for\u00a0digging\u00a0into\u00a0a\u00a0list\u00adand\u00adhash\u00a0[mf\u00adlh]\u00a0data\u00a0structure,\u00a0so\u00a0it\u2019s\u00a0useful\u00a0to\u00a0give\nclients\u00a0just\u00a0such\u00a0a\u00a0data\u00a0structure\u00a0to\u00a0work\u00a0with.\nIf\u00a0the\u00a0client\u00a0wants\u00a0a\u00a0data\u00a0structure,\u00a0I\u00a0can\u00a0just\u00a0hand\u00a0out\u00a0the\u00a0actual\u00a0data.\u00a0But\u00a0the\u00a0problem\nwith\u00a0this\u00a0is\u00a0that\u00a0there\u2019s\u00a0no\u00a0way\u00a0to\u00a0prevent\u00a0clients\u00a0from\u00a0modifying\u00a0the\u00a0data\u00a0directly,\nwhich\u00a0breaks\u00a0the\u00a0whole\u00a0point\u00a0of\u00a0encapsulating\u00a0all\u00a0the\u00a0updates\u00a0inside\u00a0functions.\nConsequently,\u00a0the\u00a0simplest\u00a0thing\u00a0to\u00a0do\u00a0is\u00a0to\u00a0provide\u00a0a\u00a0copy\u00a0of\u00a0the\u00a0underlying\u00a0data,\u00a0using\nthe\u00a0rawData\u00a0method\u00a0I\u00a0wrote\u00a0earlier.\nclass\u00a0CustomerData\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nget\u00a0rawData()\u00a0{\n\u00a0\u00a0return\u00a0_.cloneDeep(this._data)\u037e\n}\ntop\u00a0level\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0compareUsage\u00a0(customerID,\u00a0laterYear,\u00a0month)\u00a0{\n\u00a0\u00a0const\u00a0later\u00a0\u00a0\u00a0=\u00a0getCustomerData().rawData[customerID].usages[laterYear][month]\n\u00a0\u00a0const\u00a0earlier\u00a0=\u00a0getCustomerData().rawData[customerID].usages[laterYear\u00a0\u00ad\u00a01][mo\n\u00a0\u00a0return\u00a0{laterAmount:\u00a0later,\u00a0change:\u00a0later\u00a0\u00ad\u00a0earlier}\u037e\n}\nBut\u00a0although\u00a0it\u2019s\u00a0simple,\u00a0there\u00a0are\u00a0downsides.\u00a0The\u00a0most\u00a0obvious\u00a0problem\u00a0is\u00a0the\u00a0cost\u00a0of\nwww.EBooksWorld.ir\n", "page": 193, "type": "text", "section": "Page 193"}
{"text": "copying\u00a0a\u00a0large\u00a0data\u00a0structure,\u00a0which\u00a0may\u00a0turn\u00a0out\u00a0to\u00a0be\u00a0a\u00a0performance\u00a0problem.\u00a0As\nwith\u00a0anything\u00a0like\u00a0this,\u00a0however,\u00a0the\u00a0performance\u00a0cost\u00a0might\u00a0be\u00a0acceptable\u2014I\u00a0would\nwant\u00a0to\u00a0measure\u00a0its\u00a0impact\u00a0before\u00a0I\u00a0start\u00a0to\u00a0worry\u00a0about\u00a0it.\u00a0There\u00a0may\u00a0also\u00a0be\u00a0confusion\nif\u00a0clients\u00a0expect\u00a0modifying\u00a0the\u00a0copied\u00a0data\u00a0to\u00a0modify\u00a0the\u00a0original.\u00a0In\u00a0those\u00a0cases,\u00a0a\u00a0read\u00ad\nonly\u00a0proxy\u00a0or\u00a0freezing\u00a0the\u00a0copied\u00a0data\u00a0might\u00a0provide\u00a0a\u00a0helpful\u00a0error\u00a0should\u00a0they\u00a0do\u00a0this.\nAnother\u00a0option\u00a0is\u00a0more\u00a0work,\u00a0but\u00a0offers\u00a0the\u00a0most\u00a0control:\u00a0Apply\u00a0Encapsulate\u00a0Record\nrecursively.\u00a0With\u00a0this,\u00a0I\u00a0turn\u00a0the\u00a0customer\u00a0record\u00a0into\u00a0its\u00a0own\u00a0class,\u00a0apply\u00a0Encapsulate\nCollection\u00a0(170)\u00a0to\u00a0the\u00a0usages,\u00a0and\u00a0create\u00a0a\u00a0usage\u00a0class.\u00a0I\u00a0can\u00a0then\u00a0enforce\u00a0control\u00a0of\nupdates\u00a0by\u00a0using\u00a0accessors,\u00a0perhaps\u00a0applying\u00a0Change\u00a0Reference\u00a0to\u00a0Value\u00a0(252)\u00a0on\u00a0the\nusage\u00a0objects.\u00a0But\u00a0this\u00a0can\u00a0be\u00a0a\u00a0lot\u00a0of\u00a0effort\u00a0for\u00a0a\u00a0large\u00a0data\u00a0structure\u2014and\u00a0not\u00a0really\nneeded\u00a0if\u00a0I\u00a0don\u2019t\u00a0access\u00a0that\u00a0much\u00a0of\u00a0the\u00a0data\u00a0structure.\u00a0Sometimes,\u00a0a\u00a0judicious\u00a0mix\u00a0of\ngetters\u00a0and\u00a0new\u00a0classes\u00a0may\u00a0work,\u00a0using\u00a0a\u00a0getter\u00a0to\u00a0dig\u00a0deep\u00a0into\u00a0the\u00a0structure\u00a0but\nreturning\u00a0an\u00a0object\u00a0that\u00a0wraps\u00a0the\u00a0structure\u00a0rather\u00a0than\u00a0the\u00a0unencapsulated\u00a0data.\u00a0I\nwrote\u00a0about\u00a0this\u00a0kind\u00a0of\u00a0thing\u00a0in\u00a0an\u00a0article\u00a0\u201cRefactoring\u00a0Code\u00a0to\u00a0Load\u00a0a\u00a0Document\u201d\u00a0[mf\u00ad\nref\u00addoc].\nENCAPSULATE COLLECTION\nMotivation\nI\u00a0like\u00a0encapsulating\u00a0any\u00a0mutable\u00a0data\u00a0in\u00a0my\u00a0programs.\u00a0This\u00a0makes\u00a0it\u00a0easier\u00a0to\u00a0see\u00a0when\nand\u00a0how\u00a0data\u00a0structures\u00a0are\u00a0modified,\u00a0which\u00a0then\u00a0makes\u00a0it\u00a0easier\u00a0to\u00a0change\u00a0those\u00a0data\nstructures\u00a0when\u00a0I\u00a0need\u00a0to.\u00a0Encapsulation\u00a0is\u00a0often\u00a0encouraged,\u00a0particularly\u00a0by\u00a0object\u00ad\noriented\u00a0developers,\u00a0but\u00a0a\u00a0common\u00a0mistake\u00a0occurs\u00a0when\u00a0working\u00a0with\u00a0collections.\nwww.EBooksWorld.ir\n", "page": 194, "type": "text", "section": "Page 194"}
{"text": "Access\u00a0to\u00a0a\u00a0collection\u00a0variable\u00a0may\u00a0be\u00a0encapsulated,\u00a0but\u00a0if\u00a0the\u00a0getter\u00a0returns\u00a0the\ncollection\u00a0itself,\u00a0then\u00a0that\u00a0collection\u2019s\u00a0membership\u00a0can\u00a0be\u00a0altered\u00a0without\u00a0the\u00a0enclosing\nclass\u00a0being\u00a0able\u00a0to\u00a0intervene.\nTo\u00a0avoid\u00a0this,\u00a0I\u00a0provide\u00a0collection\u00a0modifier\u00a0methods\u2014usually\u00a0add\u00a0and\u00a0remove\u2014on\u00a0the\nclass\u00a0itself.\u00a0This\u00a0way,\u00a0changes\u00a0to\u00a0the\u00a0collection\u00a0go\u00a0through\u00a0the\u00a0owning\u00a0class,\u00a0giving\u00a0me\nthe\u00a0opportunity\u00a0to\u00a0modify\u00a0such\u00a0changes\u00a0as\u00a0the\u00a0program\u00a0evolves.\nIff\u00a0the\u00a0team\u00a0has\u00a0the\u00a0habit\u00a0to\u00a0not\u00a0to\u00a0modify\u00a0collections\u00a0outside\u00a0the\u00a0original\u00a0module,\u00a0just\nproviding\u00a0these\u00a0methods\u00a0may\u00a0be\u00a0enough.\u00a0However,\u00a0it\u2019s\u00a0usually\u00a0unwise\u00a0to\u00a0rely\u00a0on\u00a0such\nhabits\u037e\u00a0a\u00a0mistake\u00a0here\u00a0can\u00a0lead\u00a0to\u00a0bugs\u00a0that\u00a0are\u00a0difficult\u00a0to\u00a0track\u00a0down\u00a0later.\u00a0A\u00a0better\napproach\u00a0is\u00a0to\u00a0ensure\u00a0that\u00a0the\u00a0getter\u00a0for\u00a0the\u00a0collection\u00a0does\u00a0not\u00a0return\u00a0the\u00a0raw\ncollection,\u00a0so\u00a0that\u00a0clients\u00a0cannot\u00a0accidentally\u00a0change\u00a0it.\nOne\u00a0way\u00a0to\u00a0prevent\u00a0modification\u00a0of\u00a0the\u00a0underlying\u00a0collection\u00a0is\u00a0by\u00a0never\u00a0returning\u00a0a\ncollection\u00a0value.\u00a0In\u00a0this\u00a0approach,\u00a0any\u00a0use\u00a0of\u00a0a\u00a0collection\u00a0field\u00a0is\u00a0done\u00a0with\u00a0specific\nmethods\u00a0on\u00a0the\u00a0owning\u00a0class,\u00a0replacing\u00a0aCustomer.orders.size\u00a0with\naCustomer.numberOfOrders.\u00a0I\u00a0don\u2019t\u00a0agree\u00a0with\u00a0this\u00a0approach.\u00a0Modern\u00a0languages\nhave\u00a0rich\u00a0collection\u00a0classes\u00a0with\u00a0standardized\u00a0interfaces,\u00a0which\u00a0can\u00a0be\u00a0combined\u00a0in\nuseful\u00a0ways\u00a0such\u00a0as\u00a0Collection\u00a0Pipelines\u00a0[mf\u00adcp].\u00a0Putting\u00a0in\u00a0special\u00a0methods\u00a0to\u00a0handle\nthis\u00a0kind\u00a0of\u00a0functionality\u00a0adds\u00a0a\u00a0lot\u00a0of\u00a0extra\u00a0code\u00a0and\u00a0cripples\u00a0the\u00a0easy\u00a0composability\u00a0of\ncollection\u00a0operations.\nAnother\u00a0way\u00a0is\u00a0to\u00a0allow\u00a0some\u00a0form\u00a0of\u00a0read\u00adonly\u00a0access\u00a0to\u00a0a\u00a0collection.\u00a0Java,\u00a0for\nexample,\u00a0makes\u00a0it\u00a0easy\u00a0to\u00a0return\u00a0a\u00a0read\u00adonly\u00a0proxy\u00a0to\u00a0the\u00a0collection.\u00a0Such\u00a0a\u00a0proxy\nforwards\u00a0all\u00a0reads\u00a0to\u00a0the\u00a0underlying\u00a0collection,\u00a0but\u00a0blocks\u00a0all\u00a0writes\u2014in\u00a0Java\u2019s\u00a0case,\nthrowing\u00a0an\u00a0exception.\u00a0A\u00a0similar\u00a0route\u00a0is\u00a0used\u00a0by\u00a0libraries\u00a0that\u00a0base\u00a0their\u00a0collection\ncomposition\u00a0on\u00a0some\u00a0kind\u00a0of\u00a0iterator\u00a0or\u00a0enumerable\u00a0object\u2014providing\u00a0that\u00a0iterator\ncannot\u00a0modify\u00a0the\u00a0underlying\u00a0collection.\nProbably\u00a0the\u00a0most\u00a0common\u00a0approach\u00a0is\u00a0to\u00a0provide\u00a0a\u00a0getting\u00a0method\u00a0for\u00a0the\u00a0collection,\nbut\u00a0make\u00a0it\u00a0return\u00a0a\u00a0copy\u00a0of\u00a0the\u00a0underlying\u00a0collection.\u00a0That\u00a0way,\u00a0any\u00a0modifications\u00a0to\nthe\u00a0copy\u00a0don\u2019t\u00a0affect\u00a0the\u00a0encapsulated\u00a0collection.\u00a0This\u00a0might\u00a0cause\u00a0some\u00a0confusion\u00a0if\nprogrammers\u00a0expect\u00a0the\u00a0returned\u00a0collection\u00a0to\u00a0modify\u00a0the\u00a0source\u00a0field\u2014but\u00a0in\u00a0many\ncode\u00a0bases,\u00a0programmers\u00a0are\u00a0used\u00a0to\u00a0collection\u00a0getters\u00a0providing\u00a0copies.\u00a0If\u00a0the\ncollection\u00a0is\u00a0huge,\u00a0this\u00a0may\u00a0be\u00a0a\u00a0performance\u00a0issue\u2014but\u00a0most\u00a0lists\u00a0aren\u2019t\u00a0all\u00a0that\u00a0big,\u00a0so\nthe\u00a0general\u00a0rules\u00a0for\u00a0performance\u00a0should\u00a0apply\u00a0(Refactoring\u00a0and\u00a0Performance\u00a0(64)).\nAnother\u00a0difference\u00a0between\u00a0using\u00a0a\u00a0proxy\u00a0and\u00a0a\u00a0copy\u00a0is\u00a0that\u00a0a\u00a0modification\u00a0of\u00a0the\nsource\u00a0data\u00a0will\u00a0be\u00a0visible\u00a0in\u00a0the\u00a0proxy\u00a0but\u00a0not\u00a0in\u00a0a\u00a0copy.\u00a0This\u00a0isn\u2019t\u00a0an\u00a0issue\u00a0most\u00a0of\u00a0the\nwww.EBooksWorld.ir\n", "page": 195, "type": "text", "section": "Page 195"}
{"text": "time,\u00a0because\u00a0lists\u00a0accessed\u00a0in\u00a0this\u00a0way\u00a0are\u00a0usually\u00a0only\u00a0held\u00a0for\u00a0a\u00a0short\u00a0time.\nWhat\u2019s\u00a0important\u00a0here\u00a0is\u00a0consistency\u00a0within\u00a0a\u00a0code\u00a0base.\u00a0Use\u00a0only\u00a0one\u00a0mechanism\u00a0so\neveryone\u00a0can\u00a0get\u00a0used\u00a0to\u00a0how\u00a0it\u00a0behaves\u00a0and\u00a0expect\u00a0it\u00a0when\u00a0calling\u00a0any\u00a0collection\naccessor\u00a0function.\nMechanics\nApply\u00a0Encapsulate\u00a0Variable\u00a0(132)\u00a0if\u00a0the\u00a0reference\u00a0to\u00a0the\u00a0collection\u00a0isn\u2019t\u00a0already\nencapsulated.\nAdd\u00a0functions\u00a0to\u00a0add\u00a0and\u00a0remove\u00a0elements\u00a0from\u00a0the\u00a0collection.\nIf\u00a0there\u00a0is\u00a0a\u00a0setter\u00a0for\u00a0the\u00a0collection,\u00a0use\u00a0Remove\u00a0Setting\u00a0Method\u00a0(331)\u00a0if\u00a0possible.\u00a0If\nnot,\u00a0make\u00a0it\u00a0take\u00a0a\u00a0copy\u00a0of\u00a0the\u00a0provided\u00a0collection.\nRun\u00a0static\u00a0checks.\nFind\u00a0all\u00a0references\u00a0to\u00a0the\u00a0collection.\u00a0If\u00a0anyone\u00a0calls\u00a0modifiers\u00a0on\u00a0the\u00a0collection,\nchange\u00a0them\u00a0to\u00a0use\u00a0the\u00a0new\u00a0add/remove\u00a0functions.\u00a0Test\u00a0after\u00a0each\u00a0change.\nModify\u00a0the\u00a0getter\u00a0for\u00a0the\u00a0collection\u00a0to\u00a0return\u00a0a\u00a0protected\u00a0view\u00a0on\u00a0it,\u00a0using\u00a0a\u00a0read\u00ad\nonly\u00a0proxy\u00a0or\u00a0a\u00a0copy.\nTest.\nExample\nI\u00a0start\u00a0with\u00a0a\u00a0person\u00a0class\u00a0that\u00a0has\u00a0a\u00a0field\u00a0for\u00a0a\u00a0list\u00a0of\u00a0courses.\nclass\u00a0Person\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nconstructor\u00a0(name)\u00a0{\n\u00a0\u00a0this._name\u00a0=\u00a0name\u037e\n\u00a0\u00a0this._courses\u00a0=\u00a0[]\u037e\n}\nget\u00a0name()\u00a0{return\u00a0this._name\u037e}\nget\u00a0courses()\u00a0{return\u00a0this._courses\u037e}\nset\u00a0courses(aList)\u00a0{this._courses\u00a0=\u00a0aList\u037e}\nclass\u00a0Course\u2026\nwww.EBooksWorld.ir\n", "page": 196, "type": "text", "section": "Page 196"}
{"text": "Click\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nconstructor(name,\u00a0isAdvanced)\u00a0{\n\u00a0\u00a0this._name\u00a0=\u00a0name\u037e\n\u00a0\u00a0this._isAdvanced\u00a0=\u00a0isAdvanced\u037e\n}\nget\u00a0name()\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0{return\u00a0this._name\u037e}\nget\u00a0isAdvanced()\u00a0{return\u00a0this._isAdvanced\u037e}\nClients\u00a0use\u00a0the\u00a0course\u00a0collection\u00a0to\u00a0gather\u00a0information\u00a0on\u00a0courses.\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nnumAdvancedCourses\u00a0=\u00a0aPerson.courses\n\u00a0\u00a0.filter(c\u00a0=>\u00a0c.isAdvanced)\n\u00a0\u00a0.length\n\u037e\nA\u00a0naive\u00a0developer\u00a0would\u00a0say\u00a0this\u00a0class\u00a0has\u00a0proper\u00a0data\u00a0encapsulation:\u00a0After\u00a0all,\u00a0each\nfield\u00a0is\u00a0protected\u00a0by\u00a0accessor\u00a0methods.\u00a0But\u00a0I\u00a0would\u00a0argue\u00a0that\u00a0the\u00a0list\u00a0of\u00a0courses\u00a0isn\u2019t\nproperly\u00a0encapsulated.\u00a0Certainly,\u00a0anyone\u00a0updating\u00a0the\u00a0courses\u00a0as\u00a0a\u00a0single\u00a0value\u00a0has\nproper\u00a0control\u00a0through\u00a0the\u00a0setter:\nclient\u00a0code\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nconst\u00a0basicCourseNames\u00a0=\u00a0readBasicCourseNames(filename)\u037e\naPerson.courses\u00a0=\u00a0basicCourseNames.map(name\u00a0=>\u00a0new\u00a0Course(name,\u00a0false))\u037e\nBut\u00a0clients\u00a0might\u00a0find\u00a0it\u00a0easier\u00a0to\u00a0update\u00a0the\u00a0course\u00a0list\u00a0directly.\nclient\u00a0code\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfor(const\u00a0name\u00a0of\u00a0readBasicCourseNames(filename))\u00a0{\n\u00a0\u00a0aPerson.courses.push(new\u00a0Course(name,\u00a0false))\u037e\n}\nThis\u00a0violates\u00a0encapsulating\u00a0because\u00a0the\u00a0person\u00a0class\u00a0has\u00a0no\u00a0ability\u00a0to\u00a0take\u00a0control\u00a0when\nwww.EBooksWorld.ir\n", "page": 197, "type": "text", "section": "Page 197"}
{"text": "the\u00a0list\u00a0is\u00a0updated\u00a0in\u00a0this\u00a0way.\u00a0While\u00a0the\u00a0reference\u00a0to\u00a0the\u00a0field\u00a0is\u00a0encapsulated,\u00a0the\ncontent\u00a0of\u00a0the\u00a0field\u00a0is\u00a0not.\nI\u2019ll\u00a0begin\u00a0creating\u00a0proper\u00a0encapsulation\u00a0by\u00a0adding\u00a0methods\u00a0to\u00a0the\u00a0person\u00a0class\u00a0that\nallow\u00a0a\u00a0client\u00a0to\u00a0add\u00a0and\u00a0remove\u00a0individual\u00a0courses.\nclass\u00a0Person\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\naddCourse(aCourse)\u00a0{\n\u00a0\u00a0this._courses.push(aCourse)\u037e\n}\nremoveCourse(aCourse,\u00a0fnIfAbsent\u00a0=\u00a0()\u00a0=>\u00a0{throw\u00a0new\u00a0RangeError()\u037e})\u00a0{\n\u00a0\u00a0const\u00a0index\u00a0=\u00a0this._courses.indexOf(aCourse)\u037e\n\u00a0\u00a0if\u00a0(index\u00a0===\u00a0\u00ad1)\u00a0fnIfAbsent()\u037e\n\u00a0\u00a0else\u00a0this._courses.splice(index,\u00a01)\u037e\n}\nWith\u00a0a\u00a0removal,\u00a0I\u00a0have\u00a0to\u00a0decide\u00a0what\u00a0to\u00a0do\u00a0if\u00a0a\u00a0client\u00a0asks\u00a0to\u00a0remove\u00a0an\u00a0element\u00a0that\nisn\u2019t\u00a0in\u00a0the\u00a0collection.\u00a0I\u00a0can\u00a0either\u00a0shrug,\u00a0or\u00a0raise\u00a0an\u00a0error.\u00a0With\u00a0this\u00a0code,\u00a0I\u00a0default\u00a0to\nraising\u00a0an\u00a0error,\u00a0but\u00a0give\u00a0the\u00a0callers\u00a0an\u00a0opportunity\u00a0to\u00a0do\u00a0something\u00a0else\u00a0if\u00a0they\u00a0wish.\nI\u00a0then\u00a0change\u00a0any\u00a0code\u00a0that\u00a0calls\u00a0modifiers\u00a0directly\u00a0on\u00a0the\u00a0collection\u00a0to\u00a0use\u00a0new\nmethods.\nclient\u00a0code\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfor(const\u00a0name\u00a0of\u00a0readBasicCourseNames(filename))\u00a0{\n\u00a0\u00a0aPerson.addCourse(new\u00a0Course(name,\u00a0false))\u037e\n}\nWith\u00a0individual\u00a0add\u00a0and\u00a0remove\u00a0methods,\u00a0there\u00a0is\u00a0usually\u00a0no\u00a0need\u00a0for\u00a0setCourses,\u00a0in\nwhich\u00a0case\u00a0I\u2019ll\u00a0use\u00a0Remove\u00a0Setting\u00a0Method\u00a0(331)\u00a0on\u00a0it.\u00a0Should\u00a0the\u00a0API\u00a0need\u00a0a\u00a0setting\nmethod\u00a0for\u00a0some\u00a0reason,\u00a0I\u00a0ensure\u00a0it\u00a0puts\u00a0a\u00a0copy\u00a0of\u00a0the\u00a0collection\u00a0in\u00a0the\u00a0field.\nclass\u00a0Person\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nset\u00a0courses(aList)\u00a0{this._courses\u00a0=\u00a0aList.slice()\u037e}\nwww.EBooksWorld.ir\n", "page": 198, "type": "text", "section": "Page 198"}
{"text": "All\u00a0this\u00a0enables\u00a0the\u00a0clients\u00a0to\u00a0use\u00a0the\u00a0right\u00a0kind\u00a0of\u00a0modifier\u00a0methods,\u00a0but\u00a0I\u00a0prefer\u00a0to\nensure\u00a0nobody\u00a0modifies\u00a0the\u00a0list\u00a0without\u00a0using\u00a0them.\u00a0I\u00a0can\u00a0do\u00a0this\u00a0by\u00a0providing\u00a0a\u00a0copy.\nclass\u00a0Person\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nget\u00a0courses()\u00a0{return\u00a0this._courses.slice()\u037e}\nIn\u00a0general,\u00a0I\u00a0find\u00a0it\u00a0wise\u00a0to\u00a0be\u00a0moderately\u00a0paranoid\u00a0about\u00a0collections\u00a0and\u00a0I\u2019d\u00a0rather\u00a0copy\nthem\u00a0unnecessarily\u00a0than\u00a0debug\u00a0errors\u00a0due\u00a0to\u00a0unexpected\u00a0modifications.\u00a0Modifications\naren\u2019t\u00a0always\u00a0obvious\u037e\u00a0for\u00a0example,\u00a0sorting\u00a0an\u00a0array\u00a0in\u00a0JavaScript\u00a0modifies\u00a0the\u00a0original,\nwhile\u00a0many\u00a0languages\u00a0default\u00a0to\u00a0making\u00a0a\u00a0copy\u00a0for\u00a0an\u00a0operation\u00a0that\u00a0changes\u00a0a\ncollection.\u00a0Any\u00a0class\u00a0that\u2019s\u00a0responsible\u00a0for\u00a0managing\u00a0a\u00a0collection\u00a0should\u00a0always\u00a0give\u00a0out\ncopies\u2014but\u00a0I\u00a0also\u00a0get\u00a0into\u00a0the\u00a0habit\u00a0of\u00a0making\u00a0a\u00a0copy\u00a0if\u00a0I\u00a0do\u00a0something\u00a0that\u2019s\u00a0liable\u00a0to\nchange\u00a0a\u00a0collection.\nREPLACE PRIMITIVE WITH OBJECT\nformerly:\u00a0Replace\u00a0Data\u00a0Value\u00a0with\u00a0Object\nformerly:\u00a0Replace\u00a0Type\u00a0Code\u00a0with\u00a0Class\nMotivation\nOften,\u00a0in\u00a0early\u00a0stages\u00a0of\u00a0development\u00a0you\u00a0make\u00a0decisions\u00a0about\u00a0representing\u00a0simple\nwww.EBooksWorld.ir\n", "page": 199, "type": "text", "section": "Page 199"}
{"text": "facts\u00a0as\u00a0simple\u00a0data\u00a0items,\u00a0such\u00a0as\u00a0numbers\u00a0or\u00a0strings.\u00a0As\u00a0development\u00a0proceeds,\u00a0those\nsimple\u00a0items\u00a0aren\u2019t\u00a0so\u00a0simple\u00a0anymore.\u00a0A\u00a0telephone\u00a0number\u00a0may\u00a0be\u00a0represented\u00a0as\u00a0a\nstring\u00a0for\u00a0a\u00a0while,\u00a0but\u00a0later\u00a0it\u00a0will\u00a0need\u00a0special\u00a0behavior\u00a0for\u00a0formatting,\u00a0extracting\u00a0the\narea\u00a0code,\u00a0and\u00a0the\u00a0like.\u00a0This\u00a0kind\u00a0of\u00a0logic\u00a0can\u00a0quickly\u00a0end\u00a0up\u00a0being\u00a0duplicated\u00a0around\nthe\u00a0code\u00a0base,\u00a0increasing\u00a0the\u00a0effort\u00a0whenever\u00a0it\u00a0needs\u00a0to\u00a0be\u00a0used.\nAs\u00a0soon\u00a0as\u00a0I\u00a0realize\u00a0I\u00a0want\u00a0to\u00a0do\u00a0something\u00a0other\u00a0than\u00a0simple\u00a0printing,\u00a0I\u00a0like\u00a0to\u00a0create\u00a0a\nnew\u00a0class\u00a0for\u00a0that\u00a0bit\u00a0of\u00a0data.\u00a0At\u00a0first,\u00a0such\u00a0a\u00a0class\u00a0does\u00a0little\u00a0more\u00a0than\u00a0wrap\u00a0the\nprimitive\u2014but\u00a0once\u00a0I\u00a0have\u00a0that\u00a0class,\u00a0I\u00a0have\u00a0a\u00a0place\u00a0to\u00a0put\u00a0behavior\u00a0specific\u00a0to\u00a0its\u00a0needs.\nThese\u00a0little\u00a0values\u00a0start\u00a0very\u00a0humble,\u00a0but\u00a0once\u00a0nurtured\u00a0they\u00a0can\u00a0grow\u00a0into\u00a0useful\u00a0tools.\nThey\u00a0may\u00a0not\u00a0look\u00a0like\u00a0much,\u00a0but\u00a0I\u00a0find\u00a0their\u00a0effects\u00a0on\u00a0a\u00a0code\u00a0base\u00a0can\u00a0be\u00a0surprisingly\nlarge.\u00a0Indeed\u00a0many\u00a0experienced\u00a0developers\u00a0consider\u00a0this\u00a0to\u00a0be\u00a0one\u00a0of\u00a0the\u00a0most\u00a0valuable\nrefactorings\u00a0in\u00a0the\u00a0toolkit\u2014even\u00a0though\u00a0it\u00a0often\u00a0seems\u00a0counterintuitive\u00a0to\u00a0a\u00a0new\nprogrammer.\nMechanics\nApply\u00a0Encapsulate\u00a0Variable\u00a0(132)\u00a0if\u00a0it\u00a0isn\u2019t\u00a0already.\nCreate\u00a0a\u00a0simple\u00a0value\u00a0class\u00a0for\u00a0the\u00a0data\u00a0value.\u00a0It\u00a0should\u00a0take\u00a0the\u00a0existing\u00a0value\u00a0in\u00a0its\nconstructor\u00a0and\u00a0provide\u00a0a\u00a0getter\u00a0for\u00a0that\u00a0value.\nRun\u00a0static\u00a0checks.\nChange\u00a0the\u00a0setter\u00a0to\u00a0create\u00a0a\u00a0new\u00a0instance\u00a0of\u00a0the\u00a0value\u00a0class\u00a0and\u00a0store\u00a0that\u00a0in\u00a0the\nfield,\u00a0changing\u00a0the\u00a0type\u00a0of\u00a0the\u00a0field\u00a0if\u00a0present.\nChange\u00a0the\u00a0getter\u00a0to\u00a0return\u00a0the\u00a0result\u00a0of\u00a0invoking\u00a0the\u00a0getter\u00a0of\u00a0the\u00a0new\u00a0class.\nTest.\nConsider\u00a0using\u00a0Rename\u00a0Function\u00a0(124)\u00a0on\u00a0the\u00a0original\u00a0accessors\u00a0to\u00a0better\u00a0reflect\nwhat\u00a0they\u00a0do.\nConsider\u00a0clarifying\u00a0the\u00a0role\u00a0of\u00a0the\u00a0new\u00a0object\u00a0as\u00a0a\u00a0value\u00a0or\u00a0reference\u00a0object\u00a0by\napplying\u00a0Change\u00a0Reference\u00a0to\u00a0Value\u00a0(252)\u00a0or\u00a0Change\u00a0Value\u00a0to\u00a0Reference\u00a0(256).\nExample\nI\u00a0begin\u00a0with\u00a0a\u00a0simple\u00a0order\u00a0class\u00a0that\u00a0reads\u00a0its\u00a0data\u00a0from\u00a0a\u00a0simple\u00a0record\u00a0structure.\u00a0One\nof\u00a0its\u00a0properties\u00a0is\u00a0a\u00a0priority,\u00a0which\u00a0it\u00a0reads\u00a0as\u00a0a\u00a0simple\u00a0string.\nwww.EBooksWorld.ir\n", "page": 200, "type": "text", "section": "Page 200"}
{"text": "class\u00a0Order\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nconstructor(data)\u00a0{\n\u00a0\u00a0this.priority\u00a0=\u00a0data.priority\u037e\n\u00a0\u00a0//\u00a0more\u00a0initialization\nSome\u00a0client\u00a0codes\u00a0uses\u00a0it\u00a0like\u00a0this:\nclient\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nhighPriorityCount\u00a0=\u00a0orders.filter(o\u00a0=>\u00a0\"high\"\u00a0===\u00a0o.priority\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0||\u00a0\"rush\"\u00a0===\u00a0o.priority)\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0.length\u037e\nWhenever\u00a0I\u2019m\u00a0fiddling\u00a0with\u00a0a\u00a0data\u00a0value,\u00a0the\u00a0first\u00a0thing\u00a0I\u00a0do\u00a0is\u00a0use\u00a0Encapsulate\nVariable\u00a0(132)\u00a0on\u00a0it.\nclass\u00a0Order\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nget\u00a0priority()\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0{return\u00a0this._priority\u037e}\nset\u00a0priority(aString)\u00a0{this._priority\u00a0=\u00a0aString\u037e}\nThe\u00a0constructor\u00a0line\u00a0that\u00a0initializes\u00a0the\u00a0priority\u00a0will\u00a0now\u00a0use\u00a0the\u00a0setter\u00a0I\u00a0define\u00a0here.\nThis\u00a0self\u00adencapsulates\u00a0the\u00a0field\u00a0so\u00a0I\u00a0can\u00a0preserve\u00a0its\u00a0current\u00a0use\u00a0while\u00a0I\u00a0manipulate\u00a0the\ndata\u00a0itself.\nI\u00a0create\u00a0a\u00a0simple\u00a0value\u00a0class\u00a0for\u00a0the\u00a0priority.\u00a0It\u00a0has\u00a0a\u00a0constructor\u00a0for\u00a0the\u00a0value\u00a0and\u00a0a\nconversion\u00a0function\u00a0to\u00a0return\u00a0a\u00a0string.\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nclass\u00a0Priority\u00a0{\n\u00a0\u00a0constructor(value)\u00a0{this._value\u00a0=\u00a0value\u037e}\n\u00a0\u00a0toString()\u00a0{return\u00a0this._value\u037e}\n}\nwww.EBooksWorld.ir\n", "page": 201, "type": "text", "section": "Page 201"}
{"text": "I\u00a0prefer\u00a0using\u00a0a\u00a0conversion\u00a0function\u00a0(toString)\u00a0rather\u00a0than\u00a0a\u00a0getter\u00a0(value)\u00a0here.\nFor\u00a0clients\u00a0of\u00a0the\u00a0class,\u00a0asking\u00a0for\u00a0the\u00a0string\u00a0representation\u00a0should\u00a0feel\u00a0more\u00a0like\u00a0a\nconversion\u00a0than\u00a0getting\u00a0a\u00a0property.\nI\u00a0then\u00a0modify\u00a0the\u00a0accessors\u00a0to\u00a0use\u00a0this\u00a0new\u00a0class.\nclass\u00a0Order\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nget\u00a0priority()\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0{return\u00a0this._priority.toString()\u037e}\nset\u00a0priority(aString)\u00a0{this._priority\u00a0=\u00a0new\u00a0Priority(aString)\u037e}\nNow\u00a0that\u00a0I\u00a0have\u00a0a\u00a0priority\u00a0class,\u00a0I\u00a0find\u00a0the\u00a0current\u00a0getter\u00a0on\u00a0the\u00a0order\u00a0to\u00a0be\u00a0misleading.\nIt\u00a0doesn\u2019t\u00a0return\u00a0the\u00a0priority\u2014but\u00a0a\u00a0string\u00a0that\u00a0describes\u00a0the\u00a0priority.\u00a0My\u00a0immediate\nmove\u00a0is\u00a0to\u00a0use\u00a0Rename\u00a0Function\u00a0(124).\nclass\u00a0Order\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nget\u00a0priorityString()\u00a0\u00a0{return\u00a0this._priority.toString()\u037e}\nset\u00a0priority(aString)\u00a0{this._priority\u00a0=\u00a0new\u00a0Priority(aString)\u037e}\nclient\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nhighPriorityCount\u00a0=\u00a0orders.filter(o\u00a0=>\u00a0\"high\"\u00a0===\u00a0o.priorityString\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0||\u00a0\"rush\"\u00a0===\u00a0o.priorityString)\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0.length\u037e\nIn\u00a0this\u00a0case,\u00a0I\u2019m\u00a0happy\u00a0to\u00a0retain\u00a0the\u00a0name\u00a0of\u00a0the\u00a0setter.\u00a0The\u00a0name\u00a0of\u00a0the\u00a0argument\ncommunicates\u00a0what\u00a0it\u00a0expects.\nNow\u00a0I\u2019m\u00a0done\u00a0with\u00a0the\u00a0formal\u00a0refactoring.\u00a0But\u00a0as\u00a0I\u00a0look\u00a0at\u00a0who\u00a0uses\u00a0the\u00a0priority,\u00a0I\nconsider\u00a0whether\u00a0they\u00a0should\u00a0use\u00a0the\u00a0priority\u00a0class\u00a0themselves.\u00a0As\u00a0a\u00a0result,\u00a0I\u00a0provide\u00a0a\ngetter\u00a0on\u00a0order\u00a0that\u00a0provides\u00a0the\u00a0new\u00a0priority\u00a0object\u00a0directly.\nclass\u00a0Order\u2026\nwww.EBooksWorld.ir\n", "page": 202, "type": "text", "section": "Page 202"}
{"text": "Click\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nget\u00a0priority()\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0{return\u00a0this._priority\u037e}\nget\u00a0priorityString()\u00a0\u00a0{return\u00a0this._priority.toString()\u037e}\nset\u00a0priority(aString)\u00a0{this._priority\u00a0=\u00a0new\u00a0Priority(aString)\u037e}\nclient\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nhighPriorityCount\u00a0=\u00a0orders.filter(o\u00a0=>\u00a0\"high\"\u00a0===\u00a0o.priority.toString()\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0||\u00a0\"rush\"\u00a0===\u00a0o.priority.toString())\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0.length\u037e\nAs\u00a0the\u00a0priority\u00a0class\u00a0becomes\u00a0useful\u00a0elsewhere,\u00a0I\u00a0would\u00a0allow\u00a0clients\u00a0of\u00a0the\u00a0order\u00a0to\u00a0use\nthe\u00a0setter\u00a0with\u00a0a\u00a0priority\u00a0instance,\u00a0which\u00a0I\u00a0do\u00a0by\u00a0adjusting\u00a0the\u00a0priority\u00a0constructor.\nclass\u00a0Priority\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nconstructor(value)\u00a0{\n\u00a0\u00a0if\u00a0(value\u00a0instanceof\u00a0Priority)\u00a0return\u00a0value\u037e\n\u00a0\u00a0this._value\u00a0=\u00a0value\u037e\n}\nThe\u00a0point\u00a0of\u00a0all\u00a0this\u00a0is\u00a0that\u00a0now,\u00a0my\u00a0new\u00a0priority\u00a0class\u00a0can\u00a0be\u00a0useful\u00a0as\u00a0a\u00a0place\u00a0for\u00a0new\nbehavior\u2014either\u00a0new\u00a0to\u00a0the\u00a0code\u00a0or\u00a0moved\u00a0from\u00a0elsewhere.\u00a0Here\u2019s\u00a0some\u00a0simple\u00a0code\u00a0to\nadd\u00a0validation\u00a0of\u00a0priority\u00a0values\u00a0and\u00a0comparison\u00a0logic:\nclass\u00a0Priority\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nconstructor(value)\u00a0{\n\u00a0\u00a0if\u00a0(value\u00a0instanceof\u00a0Priority)\u00a0return\u00a0value\u037e\n\u00a0\u00a0if\u00a0(Priority.legalValues().includes(value))\n\u00a0\u00a0\u00a0\u00a0this._value\u00a0=\u00a0value\u037e\n\u00a0\u00a0else\n\u00a0\u00a0\u00a0\u00a0throw\u00a0new\u00a0Error(`<${value}>\u00a0is\u00a0invalid\u00a0for\u00a0Priority`)\u037e\n}\ntoString()\u00a0{return\u00a0this._value\u037e}\nget\u00a0_index()\u00a0{return\u00a0Priority.legalValues().findIndex(s\u00a0=>\u00a0s\u00a0===\u00a0this._value)\u037e}\nwww.EBooksWorld.ir\n", "page": 203, "type": "text", "section": "Page 203"}
{"text": "static\u00a0legalValues()\u00a0{return\u00a0['low',\u00a0'normal',\u00a0'high',\u00a0'rush']\u037e}\nequals(other)\u00a0{return\u00a0this._index\u00a0===\u00a0other._index\u037e}\nhigherThan(other)\u00a0{return\u00a0this._index\u00a0>\u00a0other._index\u037e}\nlowerThan(other)\u00a0{return\u00a0this._index\u00a0<\u00a0other._index\u037e}\nAs\u00a0I\u00a0do\u00a0this,\u00a0I\u00a0decide\u00a0that\u00a0a\u00a0priority\u00a0should\u00a0be\u00a0a\u00a0value\u00a0object,\u00a0so\u00a0I\u00a0provide\u00a0an\u00a0equals\nmethod\u00a0and\u00a0ensure\u00a0that\u00a0it\u00a0is\u00a0immutable.\nNow\u00a0I\u2019ve\u00a0added\u00a0that\u00a0behavior,\u00a0I\u00a0can\u00a0make\u00a0the\u00a0client\u00a0code\u00a0more\u00a0meaningful:\nclient\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nhighPriorityCount\u00a0=\u00a0orders.filter(o\u00a0=>\u00a0o.priority.higherThan(new\u00a0Priority(\"norma\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0.length\u037e\nREPLACE TEMP WITH QUERY\nMotivation\nwww.EBooksWorld.ir\n", "page": 204, "type": "text", "section": "Page 204"}
{"text": "Motivation\nOne\u00a0use\u00a0of\u00a0temporary\u00a0variables\u00a0is\u00a0to\u00a0capture\u00a0the\u00a0value\u00a0of\u00a0some\u00a0code\u00a0in\u00a0order\u00a0to\u00a0refer\u00a0to\nit\u00a0later\u00a0in\u00a0a\u00a0function.\u00a0Using\u00a0a\u00a0temp\u00a0allows\u00a0me\u00a0to\u00a0refer\u00a0to\u00a0the\u00a0value\u00a0while\u00a0explaining\u00a0its\nmeaning\u00a0and\u00a0avoiding\u00a0repeating\u00a0the\u00a0code\u00a0that\u00a0calculates\u00a0it.\u00a0But\u00a0while\u00a0using\u00a0a\u00a0variable\u00a0is\nhandy,\u00a0it\u00a0can\u00a0often\u00a0be\u00a0worthwhile\u00a0to\u00a0go\u00a0a\u00a0step\u00a0further\u00a0and\u00a0use\u00a0a\u00a0function\u00a0instead.\nIf\u00a0I\u2019m\u00a0working\u00a0on\u00a0breaking\u00a0up\u00a0a\u00a0large\u00a0function,\u00a0turning\u00a0variables\u00a0into\u00a0their\u00a0own\nfunctions\u00a0makes\u00a0it\u00a0easier\u00a0to\u00a0extract\u00a0parts\u00a0of\u00a0the\u00a0function,\u00a0since\u00a0I\u00a0no\u00a0longer\u00a0need\u00a0to\u00a0pass\nin\u00a0variables\u00a0into\u00a0the\u00a0extracted\u00a0functions.\u00a0Putting\u00a0this\u00a0logic\u00a0into\u00a0functions\u00a0often\u00a0also\u00a0sets\nup\u00a0a\u00a0stronger\u00a0boundary\u00a0between\u00a0the\u00a0extracted\u00a0logic\u00a0and\u00a0the\u00a0original\u00a0function,\u00a0which\nhelps\u00a0me\u00a0spot\u00a0and\u00a0avoid\u00a0awkward\u00a0dependencies\u00a0and\u00a0side\u00a0effects.\nUsing\u00a0functions\u00a0instead\u00a0of\u00a0variables\u00a0also\u00a0allows\u00a0me\u00a0to\u00a0avoid\u00a0duplicating\u00a0the\u00a0calculation\nlogic\u00a0in\u00a0similar\u00a0functions.\u00a0Whenever\u00a0I\u00a0see\u00a0variables\u00a0calculated\u00a0in\u00a0the\u00a0same\u00a0way\u00a0in\ndifferent\u00a0places,\u00a0I\u00a0look\u00a0to\u00a0turn\u00a0them\u00a0into\u00a0a\u00a0single\u00a0function.\nThis\u00a0refactoring\u00a0works\u00a0best\u00a0if\u00a0I\u2019m\u00a0inside\u00a0a\u00a0class,\u00a0since\u00a0the\u00a0class\u00a0provides\u00a0a\u00a0shared\ncontext\u00a0for\u00a0the\u00a0methods\u00a0I\u2019m\u00a0extracting.\u00a0Outside\u00a0of\u00a0a\u00a0class,\u00a0I\u2019m\u00a0liable\u00a0to\u00a0have\u00a0too\u00a0many\nparameters\u00a0in\u00a0a\u00a0top\u00adlevel\u00a0function\u00a0which\u00a0negates\u00a0much\u00a0of\u00a0the\u00a0benefit\u00a0of\u00a0using\u00a0a\nfunction.\u00a0Nested\u00a0functions\u00a0can\u00a0avoid\u00a0this,\u00a0but\u00a0they\u00a0limit\u00a0my\u00a0ability\u00a0to\u00a0share\u00a0the\u00a0logic\nbetween\u00a0related\u00a0functions.\nOnly\u00a0some\u00a0temporary\u00a0variables\u00a0are\u00a0suitable\u00a0for\u00a0Replace\u00a0Temp\u00a0with\u00a0Query.\u00a0The\u00a0variable\nneeds\u00a0to\u00a0be\u00a0calculated\u00a0once\u00a0and\u00a0then\u00a0only\u00a0be\u00a0read\u00a0afterwards.\u00a0In\u00a0the\u00a0simplest\u00a0case,\u00a0this\nmeans\u00a0the\u00a0variable\u00a0is\u00a0assigned\u00a0to\u00a0once,\u00a0but\u00a0it\u2019s\u00a0also\u00a0possible\u00a0to\u00a0have\u00a0several\u00a0assignments\nin\u00a0a\u00a0more\u00a0complicated\u00a0lump\u00a0of\u00a0code\u2014all\u00a0of\u00a0which\u00a0has\u00a0to\u00a0be\u00a0extracted\u00a0into\u00a0the\u00a0query.\nFurthermore,\u00a0the\u00a0logic\u00a0used\u00a0to\u00a0calculate\u00a0the\u00a0variable\u00a0must\u00a0yield\u00a0the\u00a0same\u00a0result\u00a0when\nthe\u00a0variable\u00a0is\u00a0used\u00a0later\u2014which\u00a0rules\u00a0out\u00a0variables\u00a0used\u00a0as\u00a0snapshots\u00a0with\u00a0names\u00a0like\noldAddress.\nMechanics\nCheck\u00a0that\u00a0the\u00a0variable\u00a0is\u00a0determined\u00a0entirely\u00a0before\u00a0it\u2019s\u00a0used,\u00a0and\u00a0the\u00a0code\u00a0that\ncalculates\u00a0it\u00a0does\u00a0not\u00a0yield\u00a0a\u00a0different\u00a0value\u00a0whenever\u00a0it\u00a0is\u00a0used.\nIf\u00a0the\u00a0variable\u00a0isn\u2019t\u00a0read\u00adonly,\u00a0and\u00a0can\u00a0be\u00a0made\u00a0read\u00adonly,\u00a0do\u00a0so.\nTest.\nExtract\u00a0the\u00a0assignment\u00a0of\u00a0the\u00a0variable\u00a0into\u00a0a\u00a0function.\nwww.EBooksWorld.ir\n", "page": 205, "type": "text", "section": "Page 205"}
{"text": "If\u00a0the\u00a0variable\u00a0and\u00a0the\u00a0function\u00a0cannot\u00a0share\u00a0a\u00a0name,\u00a0use\u00a0a\u00a0temporary\u00a0name\u00a0for\u00a0the\nfunction.\nEnsure\u00a0the\u00a0extracted\u00a0function\u00a0is\u00a0free\u00a0of\u00a0side\u00a0effects.\u00a0If\u00a0not,\u00a0use\u00a0Separate\u00a0Query\u00a0from\nModifier\u00a0(306).\nTest.\nUse\u00a0Inline\u00a0Variable\u00a0(123)\u00a0to\u00a0remove\u00a0the\u00a0temp.\nExample\nHere\u00a0is\u00a0a\u00a0simple\u00a0class:\nclass\u00a0Order\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\n\u00a0\u00a0constructor(quantity,\u00a0item)\u00a0{\n\u00a0\u00a0\u00a0\u00a0this._quantity\u00a0=\u00a0quantity\u037e\n\u00a0\u00a0\u00a0\u00a0this._item\u00a0=\u00a0item\u037e\n\u00a0\u00a0}\n\u00a0\u00a0\n\u00a0\u00a0get\u00a0price()\u00a0{\n\u00a0\u00a0\u00a0\u00a0var\u00a0basePrice\u00a0=\u00a0this._quantity\u00a0*\u00a0this._item.price\u037e\n\u00a0\u00a0\u00a0\u00a0var\u00a0discountFactor\u00a0=\u00a00.98\u037e\n\u00a0\u00a0\u00a0\u00a0if\u00a0(basePrice\u00a0>\u00a01000)\u00a0discountFactor\u00a0\u00ad=\u00a00.03\u037e\n\u00a0\u00a0\u00a0\u00a0return\u00a0basePrice\u00a0*\u00a0discountFactor\u037e\n\u00a0\u00a0}\n}\nI\u00a0want\u00a0to\u00a0replace\u00a0the\u00a0temps\u00a0basePrice\u00a0and\u00a0discountFactor\u00a0with\u00a0methods.\nStarting\u00a0with\u00a0basePrice,\u00a0I\u00a0make\u00a0it\u00a0const\u00a0and\u00a0run\u00a0tests.\u00a0This\u00a0is\u00a0a\u00a0good\u00a0way\u00a0of\nchecking\u00a0that\u00a0I\u00a0haven\u2019t\u00a0missed\u00a0a\u00a0reassignment\u2014unlikely\u00a0in\u00a0such\u00a0a\u00a0short\u00a0function\u00a0but\ncommon\u00a0when\u00a0I\u2019m\u00a0dealing\u00a0with\u00a0something\u00a0larger.\nclass\u00a0Order\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\n\u00a0\u00a0constructor(quantity,\u00a0item)\u00a0{\n\u00a0\u00a0\u00a0\u00a0this._quantity\u00a0=\u00a0quantity\u037e\n\u00a0\u00a0\u00a0\u00a0this._item\u00a0=\u00a0item\u037e\n\u00a0\u00a0}\nwww.EBooksWorld.ir\n", "page": 206, "type": "text", "section": "Page 206"}
{"text": "\u00a0\u00a0get\u00a0price()\u00a0{\n\u00a0\u00a0\u00a0\u00a0const\u00a0basePrice\u00a0=\u00a0this._quantity\u00a0*\u00a0this._item.price\u037e\n\u00a0\u00a0\u00a0\u00a0var\u00a0discountFactor\u00a0=\u00a00.98\u037e\n\u00a0\u00a0\u00a0\u00a0if\u00a0(basePrice\u00a0>\u00a01000)\u00a0discountFactor\u00a0\u00ad=\u00a00.03\u037e\n\u00a0\u00a0\u00a0\u00a0return\u00a0basePrice\u00a0*\u00a0discountFactor\u037e\n\u00a0\u00a0}\n}\nI\u00a0then\u00a0extract\u00a0the\u00a0right\u00adhand\u00a0side\u00a0of\u00a0the\u00a0assignment\u00a0to\u00a0a\u00a0getting\u00a0method.\nclass\u00a0Order\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nget\u00a0price()\u00a0{\n\u00a0\u00a0const\u00a0basePrice\u00a0=\u00a0this.basePrice\u037e\n\u00a0\u00a0var\u00a0discountFactor\u00a0=\u00a00.98\u037e\n\u00a0\u00a0if\u00a0(basePrice\u00a0>\u00a01000)\u00a0discountFactor\u00a0\u00ad=\u00a00.03\u037e\n\u00a0\u00a0return\u00a0basePrice\u00a0*\u00a0discountFactor\u037e\n}\n\u00a0get\u00a0basePrice()\u00a0{\n\u00a0\u00a0\u00a0return\u00a0this._quantity\u00a0*\u00a0this._item.price\u037e\n\u00a0}\nI\u00a0test,\u00a0and\u00a0apply\u00a0Inline\u00a0Variable\u00a0(123).\nclass\u00a0Order\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nget\u00a0price()\u00a0{\n\u00a0\u00a0const\u00a0basePrice\u00a0=\u00a0this.basePrice\u037e\n\u00a0\u00a0var\u00a0discountFactor\u00a0=\u00a00.98\u037e\n\u00a0\u00a0if\u00a0(this.basePrice\u00a0>\u00a01000)\u00a0discountFactor\u00a0\u00ad=\u00a00.03\u037e\n\u00a0\u00a0return\u00a0this.basePrice\u00a0*\u00a0discountFactor\u037e\n}\nI\u00a0then\u00a0repeat\u00a0the\u00a0steps\u00a0with\u00a0discountFactor,\u00a0first\u00a0using\u00a0Extract\u00a0Function\u00a0(106).\nclass\u00a0Order\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nwww.EBooksWorld.ir\n", "page": 207, "type": "text", "section": "Page 207"}
{"text": "get\u00a0price()\u00a0{\n\u00a0\u00a0const\u00a0discountFactor\u00a0=\u00a0this.discountFactor\u037e\n\u00a0\u00a0return\u00a0this.basePrice\u00a0*\u00a0discountFactor\u037e\n}\n\u00a0get\u00a0discountFactor()\u00a0{\n\u00a0\u00a0\u00a0var\u00a0discountFactor\u00a0=\u00a00.98\u037e\n\u00a0\u00a0\u00a0if\u00a0(this.basePrice\u00a0>\u00a01000)\u00a0discountFactor\u00a0\u00ad=\u00a00.03\u037e\n\u00a0\u00a0\u00a0return\u00a0discountFactor\u037e\n\u00a0}\nIn\u00a0this\u00a0case\u00a0I\u00a0need\u00a0my\u00a0extracted\u00a0function\u00a0to\u00a0contain\u00a0both\u00a0assignments\u00a0to\ndiscountFactor.\u00a0I\u00a0can\u00a0also\u00a0set\u00a0the\u00a0original\u00a0variable\u00a0to\u00a0be\u00a0const.\nThen,\u00a0I\u00a0inline:\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nget\u00a0price()\u00a0{\n\u00a0\u00a0return\u00a0this.basePrice\u00a0*\u00a0this.discountFactor\u037e\n}\nEXTRACT CLASS\ninverse\u00a0of:\u00a0Inline\u00a0Class\u00a0(186)\nMotivation\nwww.EBooksWorld.ir\n", "page": 208, "type": "text", "section": "Page 208"}
{"text": "Motivation\nYou\u2019ve\u00a0probably\u00a0read\u00a0guidelines\u00a0that\u00a0a\u00a0class\u00a0should\u00a0be\u00a0a\u00a0crisp\u00a0abstraction,\u00a0only\u00a0handle\u00a0a\nfew\u00a0clear\u00a0responsibilities,\u00a0and\u00a0so\u00a0on.\u00a0In\u00a0practice,\u00a0classes\u00a0grow.\u00a0You\u00a0add\u00a0some\u00a0operations\nhere,\u00a0a\u00a0bit\u00a0of\u00a0data\u00a0there.\u00a0You\u00a0add\u00a0a\u00a0responsibility\u00a0to\u00a0a\u00a0class\u00a0feeling\u00a0that\u00a0it\u2019s\u00a0not\u00a0worth\u00a0a\nseparate\u00a0class\u2014but\u00a0as\u00a0that\u00a0responsibility\u00a0grows\u00a0and\u00a0breeds,\u00a0the\u00a0class\u00a0becomes\u00a0too\ncomplicated.\u00a0Soon,\u00a0your\u00a0class\u00a0is\u00a0as\u00a0crisp\u00a0as\u00a0a\u00a0microwaved\u00a0duck.\nImagine\u00a0a\u00a0class\u00a0with\u00a0many\u00a0methods\u00a0and\u00a0quite\u00a0a\u00a0lot\u00a0of\u00a0data.\u00a0A\u00a0class\u00a0that\u00a0is\u00a0too\u00a0big\u00a0to\nunderstand\u00a0easily.\u00a0You\u00a0need\u00a0to\u00a0consider\u00a0where\u00a0it\u00a0can\u00a0be\u00a0split\u2014and\u00a0split\u00a0it.\u00a0A\u00a0good\u00a0sign\nis\u00a0when\u00a0a\u00a0subset\u00a0of\u00a0the\u00a0data\u00a0and\u00a0a\u00a0subset\u00a0of\u00a0the\u00a0methods\u00a0seem\u00a0to\u00a0go\u00a0together.\u00a0Other\ngood\u00a0signs\u00a0are\u00a0subsets\u00a0of\u00a0data\u00a0that\u00a0usually\u00a0change\u00a0together\u00a0or\u00a0are\u00a0particularly\ndependent\u00a0on\u00a0each\u00a0other.\u00a0A\u00a0useful\u00a0test\u00a0is\u00a0to\u00a0ask\u00a0yourself\u00a0what\u00a0would\u00a0happen\u00a0if\u00a0you\nremove\u00a0a\u00a0piece\u00a0of\u00a0data\u00a0or\u00a0a\u00a0method.\u00a0What\u00a0other\u00a0fields\u00a0and\u00a0methods\u00a0would\u00a0become\nnonsense?\nOne\u00a0sign\u00a0that\u00a0often\u00a0crops\u00a0up\u00a0later\u00a0in\u00a0development\u00a0is\u00a0the\u00a0way\u00a0the\u00a0class\u00a0is\u00a0sub\u00adtyped.\u00a0You\nmay\u00a0find\u00a0that\u00a0subtyping\u00a0affects\u00a0only\u00a0a\u00a0few\u00a0features\u00a0or\u00a0that\u00a0some\u00a0features\u00a0need\u00a0to\u00a0be\nsubtyped\u00a0one\u00a0way\u00a0and\u00a0other\u00a0features\u00a0a\u00a0different\u00a0way.\nMechanics\nDecide\u00a0how\u00a0to\u00a0split\u00a0the\u00a0responsibilities\u00a0of\u00a0the\u00a0class.\nCreate\u00a0a\u00a0new\u00a0child\u00a0class\u00a0to\u00a0express\u00a0the\u00a0split\u00adoff\u00a0responsibilities.\nIf\u00a0the\u00a0responsibilities\u00a0of\u00a0the\u00a0original\u00a0parent\u00a0class\u00a0no\u00a0longer\u00a0match\u00a0its\u00a0name,\u00a0rename\nthe\u00a0parent.\nCreate\u00a0an\u00a0instance\u00a0of\u00a0the\u00a0child\u00a0class\u00a0when\u00a0constructing\u00a0the\u00a0parent\u00a0and\u00a0add\u00a0a\u00a0link\nfrom\u00a0parent\u00a0to\u00a0child.\nUse\u00a0Move\u00a0Field\u00a0(207)\u00a0on\u00a0each\u00a0field\u00a0you\u00a0wish\u00a0to\u00a0move.\u00a0Test\u00a0after\u00a0each\u00a0move.\nUse\u00a0Move\u00a0Function\u00a0(198)\u00a0to\u00a0move\u00a0methods\u00a0to\u00a0the\u00a0new\u00a0child.\u00a0Start\u00a0with\u00a0lower\u00adlevel\nmethods\u00a0(those\u00a0being\u00a0called\u00a0rather\u00a0than\u00a0calling).\u00a0Test\u00a0after\u00a0each\u00a0move.\nReview\u00a0the\u00a0interfaces\u00a0of\u00a0both\u00a0classes,\u00a0remove\u00a0unneeded\u00a0methods,\u00a0change\u00a0names\u00a0to\nbetter\u00a0fit\u00a0the\u00a0new\u00a0circumstances.\nDecide\u00a0whether\u00a0to\u00a0expose\u00a0the\u00a0new\u00a0child.\u00a0If\u00a0so,\u00a0consider\u00a0applying\u00a0Change\u00a0Reference\nto\u00a0Value\u00a0(252)\u00a0to\u00a0the\u00a0child\u00a0class.\nExample\nwww.EBooksWorld.ir\n", "page": 209, "type": "text", "section": "Page 209"}
{"text": "Example\nI\u00a0start\u00a0with\u00a0a\u00a0simple\u00a0person\u00a0class:\nclass\u00a0Person\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nget\u00a0name()\u00a0\u00a0\u00a0\u00a0{return\u00a0this._name\u037e}\nset\u00a0name(arg)\u00a0{this._name\u00a0=\u00a0arg\u037e}\nget\u00a0telephoneNumber()\u00a0{return\u00a0`(${this.officeAreaCode})\u00a0${this.officeNumber}`\u037e}\nget\u00a0officeAreaCode()\u00a0\u00a0\u00a0\u00a0{return\u00a0this._officeAreaCode\u037e}\nset\u00a0officeAreaCode(arg)\u00a0{this._officeAreaCode\u00a0=\u00a0arg\u037e}\nget\u00a0officeNumber()\u00a0{return\u00a0this._officeNumber\u037e}\nset\u00a0officeNumber(arg)\u00a0{this._officeNumber\u00a0=\u00a0arg\u037e}\nHere.\u00a0I\u00a0can\u00a0separate\u00a0the\u00a0telephone\u00a0number\u00a0behavior\u00a0into\u00a0its\u00a0own\u00a0class.\u00a0I\u00a0start\u00a0by\ndefining\u00a0an\u00a0empty\u00a0telephone\u00a0number\u00a0class:\nclass\u00a0TelephoneNumber\u00a0{\n}\nThat\u00a0was\u00a0easy!\u00a0Next,\u00a0I\u00a0create\u00a0an\u00a0instance\u00a0of\u00a0telephone\u00a0number\u00a0when\u00a0constructing\u00a0the\nperson:\nclass\u00a0Person\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nconstructor()\u00a0{\n\u00a0\u00a0this._telephoneNumber\u00a0=\u00a0new\u00a0TelephoneNumber()\u037e\n}\nclass\u00a0TelephoneNumber\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nget\u00a0officeAreaCode()\u00a0\u00a0\u00a0\u00a0{return\u00a0this._officeAreaCode\u037e}\nset\u00a0officeAreaCode(arg)\u00a0{this._officeAreaCode\u00a0=\u00a0arg\u037e}\nI\u00a0then\u00a0use\u00a0Move\u00a0Field\u00a0(207)\u00a0on\u00a0one\u00a0of\u00a0the\u00a0fields.\nwww.EBooksWorld.ir\n", "page": 210, "type": "text", "section": "Page 210"}
{"text": "class\u00a0Person\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nget\u00a0officeAreaCode()\u00a0\u00a0\u00a0\u00a0{return\u00a0this._telephoneNumber.officeAreaCode\u037e}\nset\u00a0officeAreaCode(arg)\u00a0{this._telephoneNumber.officeAreaCode\u00a0=\u00a0arg\u037e}\nI\u00a0test,\u00a0then\u00a0move\u00a0the\u00a0next\u00a0field.\nclass\u00a0TelephoneNumber\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nget\u00a0officeNumber()\u00a0{return\u00a0this._officeNumber\u037e}\nset\u00a0officeNumber(arg)\u00a0{this._officeNumber\u00a0=\u00a0arg\u037e}\nclass\u00a0Person\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nget\u00a0officeNumber()\u00a0{return\u00a0this._telephoneNumber.officeNumber\u037e}\nset\u00a0officeNumber(arg)\u00a0{this._telephoneNumber.officeNumber\u00a0=\u00a0arg\u037e}\nTest\u00a0again,\u00a0then\u00a0move\u00a0the\u00a0telephone\u00a0number\u00a0method.\nclass\u00a0TelephoneNumber\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nget\u00a0telephoneNumber()\u00a0{return\u00a0`(${this.officeAreaCode})\u00a0${this.officeNumber}`\u037e}\nclass\u00a0Person\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nget\u00a0telephoneNumber()\u00a0{return\u00a0this._telephoneNumber.telephoneNumber\u037e}\nNow\u00a0I\u00a0should\u00a0tidy\u00a0things\u00a0up.\u00a0Having\u00a0\u201coffice\u201d\u00a0as\u00a0part\u00a0of\u00a0the\u00a0telephone\u00a0number\u00a0code\nmakes\u00a0no\u00a0sense,\u00a0so\u00a0I\u00a0rename\u00a0them.\nwww.EBooksWorld.ir\n", "page": 211, "type": "text", "section": "Page 211"}
{"text": "class\u00a0TelephoneNumber\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nget\u00a0areaCode()\u00a0\u00a0\u00a0\u00a0{return\u00a0this._areaCode\u037e}\nset\u00a0areaCode(arg)\u00a0{this._areaCode\u00a0=\u00a0arg\u037e}\nget\u00a0number()\u00a0\u00a0\u00a0\u00a0{return\u00a0this._number\u037e}\nset\u00a0number(arg)\u00a0{this._number\u00a0=\u00a0arg\u037e}\nclass\u00a0Person\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nget\u00a0officeAreaCode()\u00a0\u00a0\u00a0\u00a0{return\u00a0this._telephoneNumber.areaCode\u037e}\nset\u00a0officeAreaCode(arg)\u00a0{this._telephoneNumber.areaCode\u00a0=\u00a0arg\u037e}\nget\u00a0officeNumber()\u00a0\u00a0\u00a0\u00a0{return\u00a0this._telephoneNumber.number\u037e}\nset\u00a0officeNumber(arg)\u00a0{this._telephoneNumber.number\u00a0=\u00a0arg\u037e}\nThe\u00a0telephone\u00a0number\u00a0method\u00a0on\u00a0the\u00a0telephone\u00a0number\u00a0class\u00a0also\u00a0doesn\u2019t\u00a0make\u00a0much\nsense,\u00a0so\u00a0I\u00a0apply\u00a0Rename\u00a0Function\u00a0(124).\nclass\u00a0TelephoneNumber\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\ntoString()\u00a0{return\u00a0`(${this.areaCode})\u00a0${this.number}`\u037e}\nclass\u00a0Person\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nget\u00a0telephoneNumber()\u00a0{return\u00a0this._telephoneNumber.toString()\u037e}\nTelephone\u00a0numbers\u00a0are\u00a0generally\u00a0useful,\u00a0so\u00a0I\u00a0think\u00a0I\u2019ll\u00a0expose\u00a0the\u00a0new\u00a0object\u00a0to\u00a0clients.\nI\u00a0can\u00a0replace\u00a0those\u00a0\u201coffice\u201d\u00a0methods\u00a0with\u00a0accessors\u00a0for\u00a0the\u00a0telephone\u00a0number.\u00a0But\u00a0this\nway,\u00a0the\u00a0telephone\u00a0number\u00a0will\u00a0work\u00a0better\u00a0as\u00a0a\u00a0Value\u00a0Object\u00a0[mf\u00advo],\u00a0so\u00a0I\u00a0would\u00a0apply\nChange\u00a0Reference\u00a0to\u00a0Value\u00a0(252)\u00a0first\u00a0(that\u00a0refactoring\u2019s\u00a0example\u00a0shows\u00a0how\u00a0I\u2019d\u00a0do\u00a0that\nfor\u00a0the\u00a0telephone\u00a0number).\nINLINE CLASS\nwww.EBooksWorld.ir\n", "page": 212, "type": "text", "section": "Page 212"}
{"text": "inverse\u00a0of:\u00a0Extract\u00a0Class\u00a0(182)\nMotivation\nInline\u00a0Class\u00a0is\u00a0the\u00a0inverse\u00a0of\u00a0Extract\u00a0Class\u00a0(182).\u00a0I\u00a0use\u00a0Inline\u00a0Class\u00a0if\u00a0a\u00a0class\u00a0is\u00a0no\u00a0longer\npulling\u00a0its\u00a0weight\u00a0and\u00a0shouldn\u2019t\u00a0be\u00a0around\u00a0any\u00a0more.\u00a0Often,\u00a0this\u00a0is\u00a0the\u00a0result\u00a0of\nrefactoring\u00a0that\u00a0moves\u00a0other\u00a0responsibilities\u00a0out\u00a0of\u00a0the\u00a0class\u00a0so\u00a0there\u00a0is\u00a0little\u00a0left.\u00a0At\u00a0that\npoint,\u00a0I\u00a0fold\u00a0the\u00a0class\u00a0into\u00a0another\u2014one\u00a0that\u00a0makes\u00a0most\u00a0use\u00a0of\u00a0the\u00a0runt\u00a0class.\nAnother\u00a0reason\u00a0to\u00a0use\u00a0Inline\u00a0Class\u00a0is\u00a0if\u00a0I\u00a0have\u00a0two\u00a0classes\u00a0that\u00a0I\u00a0want\u00a0to\u00a0refactor\u00a0into\u00a0a\npair\u00a0of\u00a0classes\u00a0with\u00a0a\u00a0different\u00a0allocation\u00a0of\u00a0features.\u00a0I\u00a0may\u00a0find\u00a0it\u00a0easier\u00a0to\u00a0first\u00a0use\nInline\u00a0Class\u00a0to\u00a0combine\u00a0them\u00a0into\u00a0a\u00a0single\u00a0class,\u00a0then\u00a0Extract\u00a0Class\u00a0(182)\u00a0to\u00a0make\u00a0the\nnew\u00a0separation.\u00a0This\u00a0is\u00a0a\u00a0general\u00a0approach\u00a0when\u00a0reorganizing\u00a0things:\u00a0Sometimes,\u00a0it\u2019s\neasier\u00a0to\u00a0move\u00a0elements\u00a0one\u00a0at\u00a0a\u00a0time\u00a0from\u00a0one\u00a0context\u00a0to\u00a0another,\u00a0but\u00a0sometimes\u00a0it\u2019s\nbetter\u00a0to\u00a0use\u00a0an\u00a0inline\u00a0refactoring\u00a0to\u00a0collapse\u00a0the\u00a0contexts\u00a0together,\u00a0then\u00a0use\u00a0an\u00a0extract\nrefactoring\u00a0to\u00a0separate\u00a0them\u00a0into\u00a0different\u00a0elements.\nMechanics\nIn\u00a0the\u00a0target\u00a0class,\u00a0create\u00a0functions\u00a0for\u00a0all\u00a0the\u00a0public\u00a0functions\u00a0of\u00a0the\u00a0source\u00a0class.\nThese\u00a0functions\u00a0should\u00a0just\u00a0delegate\u00a0to\u00a0the\u00a0source\u00a0class.\nChange\u00a0all\u00a0references\u00a0to\u00a0source\u00a0class\u00a0methods\u00a0so\u00a0they\u00a0use\u00a0the\u00a0target\u00a0class\u2019s\ndelegators\u00a0instead.\u00a0Test\u00a0after\u00a0each\u00a0change.\nwww.EBooksWorld.ir\n", "page": 213, "type": "text", "section": "Page 213"}
{"text": "Move\u00a0all\u00a0the\u00a0functions\u00a0and\u00a0data\u00a0from\u00a0the\u00a0source\u00a0class\u00a0into\u00a0the\u00a0target,\u00a0testing\u00a0after\neach\u00a0move,\u00a0until\u00a0the\u00a0source\u00a0class\u00a0is\u00a0empty.\nDelete\u00a0the\u00a0source\u00a0class\u00a0and\u00a0hold\u00a0a\u00a0short,\u00a0simple\u00a0funeral\u00a0service.\nExample\nHere\u2019s\u00a0a\u00a0class\u00a0that\u00a0holds\u00a0a\u00a0couple\u00a0of\u00a0pieces\u00a0of\u00a0tracking\u00a0information\u00a0for\u00a0a\u00a0shipment.\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nclass\u00a0TrackingInformation\u00a0{\n\u00a0\u00a0get\u00a0shippingCompany()\u00a0\u00a0\u00a0\u00a0{return\u00a0this._shippingCompany\u037e}\n\u00a0\u00a0set\u00a0shippingCompany(arg)\u00a0{this._shippingCompany\u00a0=\u00a0arg\u037e}\n\u00a0\u00a0get\u00a0trackingNumber()\u00a0\u00a0\u00a0\u00a0{return\u00a0this._trackingNumber\u037e}\n\u00a0\u00a0set\u00a0trackingNumber(arg)\u00a0{this._trackingNumber\u00a0=\u00a0arg\u037e}\n\u00a0\u00a0get\u00a0display()\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0{\n\u00a0\u00a0\u00a0\u00a0return\u00a0`${this.shippingCompany}:\u00a0${this.trackingNumber}`\u037e\n\u00a0\u00a0}\n}\nIt\u2019s\u00a0used\u00a0as\u00a0part\u00a0of\u00a0a\u00a0shipment\u00a0class.\nclass\u00a0Shipment\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nget\u00a0trackingInfo()\u00a0{\n\u00a0\u00a0return\u00a0this._trackingInformation.display\u037e\n}\nget\u00a0trackingInformation()\u00a0\u00a0\u00a0\u00a0{return\u00a0this._trackingInformation\u037e}\nset\u00a0trackingInformation(aTrackingInformation)\u00a0{\n\u00a0\u00a0this._trackingInformation\u00a0=\u00a0aTrackingInformation\u037e\n}\nWhile\u00a0this\u00a0class\u00a0may\u00a0have\u00a0been\u00a0worthwhile\u00a0in\u00a0the\u00a0past,\u00a0I\u00a0no\u00a0longer\u00a0feel\u00a0it\u2019s\u00a0pulling\u00a0its\nweight,\u00a0so\u00a0I\u00a0want\u00a0to\u00a0inline\u00a0it\u00a0into\u00a0Shipment.\nI\u00a0start\u00a0by\u00a0looking\u00a0at\u00a0places\u00a0that\u00a0are\u00a0invoking\u00a0the\u00a0methods\u00a0of\u00a0TrackingInformation.\ncaller\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nwww.EBooksWorld.ir\n", "page": 214, "type": "text", "section": "Page 214"}
{"text": "aShipment.trackingInformation.shippingCompany\u00a0=\u00a0request.vendor\u037e\nI\u2019m\u00a0going\u00a0to\u00a0move\u00a0all\u00a0such\u00a0functions\u00a0to\u00a0Shipment,\u00a0but\u00a0I\u00a0do\u00a0it\u00a0slightly\u00a0differently\u00a0to\u00a0how\nI\u00a0usually\u00a0do\u00a0Move\u00a0Function\u00a0(198).\u00a0In\u00a0this\u00a0case,\u00a0I\u00a0start\u00a0by\u00a0putting\u00a0a\u00a0delegating\u00a0method\ninto\u00a0the\u00a0shipment,\u00a0and\u00a0adjusting\u00a0the\u00a0client\u00a0to\u00a0call\u00a0that.\nclass\u00a0Shipment\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nset\u00a0shippingCompany(arg)\u00a0{this._trackingInformation.shippingCompany\u00a0=\u00a0arg\u037e}\ncaller\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\naShipment.trackingInformation.shippingCompany\u00a0=\u00a0request.vendor\u037e\nI\u00a0do\u00a0this\u00a0for\u00a0all\u00a0the\u00a0elements\u00a0of\u00a0tracking\u00a0information\u00a0that\u00a0are\u00a0used\u00a0by\u00a0clients.\u00a0Once\u00a0I\u2019ve\ndone\u00a0that,\u00a0I\u00a0can\u00a0move\u00a0all\u00a0the\u00a0elements\u00a0of\u00a0the\u00a0tracking\u00a0information\u00a0over\u00a0into\u00a0the\nshipment\u00a0class.\nI\u00a0start\u00a0by\u00a0applying\u00a0Inline\u00a0Function\u00a0(115)\u00a0to\u00a0the\u00a0display\u00a0method.\nclass\u00a0Shipment\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nget\u00a0trackingInfo()\u00a0{\n\u00a0\u00a0return\u00a0`${this.shippingCompany}:\u00a0${this.trackingNumber}`\u037e\n}\nI\u00a0move\u00a0the\u00a0shipping\u00a0company\u00a0field.\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nget\u00a0shippingCompany()\u00a0\u00a0\u00a0\u00a0{return\u00a0this._trackingInformation._shippingCompany\u037e}\nset\u00a0shippingCompany(arg)\u00a0{this._trackingInformation._shippingCompany\u00a0=\u00a0arg\u037e}\nwww.EBooksWorld.ir\n", "page": 215, "type": "text", "section": "Page 215"}
{"text": "I\u00a0don\u2019t\u00a0use\u00a0the\u00a0full\u00a0mechanics\u00a0for\u00a0Move\u00a0Field\u00a0(207)\u00a0since\u00a0in\u00a0this\u00a0case\u00a0I\u00a0only\u00a0reference\nshippingCompany\u00a0from\u00a0Shipment\u00a0which\u00a0is\u00a0the\u00a0target\u00a0of\u00a0the\u00a0move.\u00a0I\u00a0thus\u00a0don\u2019t\u00a0need\nthe\u00a0steps\u00a0that\u00a0put\u00a0a\u00a0reference\u00a0from\u00a0the\u00a0source\u00a0to\u00a0the\u00a0target.\nI\u00a0continue\u00a0until\u00a0everything\u00a0is\u00a0moved\u00a0over.\u00a0Once\u00a0I\u2019ve\u00a0done\u00a0that,\u00a0I\u00a0can\u00a0delete\u00a0the\u00a0tracking\ninformation\u00a0class.\nclass\u00a0Shipment\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nget\u00a0trackingInfo()\u00a0{\n\u00a0\u00a0return\u00a0`${this.shippingCompany}:\u00a0${this.trackingNumber}`\u037e\n}\nget\u00a0shippingCompany()\u00a0\u00a0\u00a0\u00a0{return\u00a0this._shippingCompany\u037e}\nset\u00a0shippingCompany(arg)\u00a0{this._shippingCompany\u00a0=\u00a0arg\u037e}\nget\u00a0trackingNumber()\u00a0\u00a0\u00a0\u00a0{return\u00a0this._trackingNumber\u037e}\nset\u00a0trackingNumber(arg)\u00a0{this._trackingNumber\u00a0=\u00a0arg\u037e}\nHIDE DELEGATE\ninverse\u00a0of:\u00a0Remove\u00a0Middle\u00a0Man\u00a0(192)\nMotivation\nOne\u00a0of\u00a0the\u00a0keys\u2014if\u00a0not\u00a0the\u00a0key\u2014to\u00a0good\u00a0modular\u00a0design\u00a0is\u00a0encapsulation.\nwww.EBooksWorld.ir\n", "page": 216, "type": "text", "section": "Page 216"}
{"text": "Encapsulation\u00a0means\u00a0that\u00a0modules\u00a0need\u00a0to\u00a0know\u00a0less\u00a0about\u00a0other\u00a0parts\u00a0of\u00a0the\u00a0system.\nThen,\u00a0when\u00a0things\u00a0change,\u00a0fewer\u00a0modules\u00a0need\u00a0to\u00a0be\u00a0told\u00a0about\u00a0the\u00a0change\u2014which\nmakes\u00a0the\u00a0change\u00a0easier\u00a0to\u00a0make.\nWhen\u00a0we\u00a0are\u00a0first\u00a0taught\u00a0about\u00a0object\u00a0orientation,\u00a0we\u00a0are\u00a0told\u00a0that\u00a0encapsulation\u00a0means\nhiding\u00a0our\u00a0fields.\u00a0As\u00a0we\u00a0become\u00a0more\u00a0sophisticated,\u00a0we\u00a0realize\u00a0there\u00a0is\u00a0more\u00a0that\u00a0we\ncan\u00a0encapsulate.\nIf\u00a0I\u00a0have\u00a0some\u00a0client\u00a0code\u00a0that\u00a0calls\u00a0a\u00a0method\u00a0defined\u00a0on\u00a0an\u00a0object\u00a0in\u00a0a\u00a0field\u00a0of\u00a0a\u00a0server\nobject,\u00a0the\u00a0client\u00a0needs\u00a0to\u00a0know\u00a0about\u00a0this\u00a0delegate\u00a0object.\u00a0If\u00a0the\u00a0delegate\u00a0changes\u00a0its\ninterface,\u00a0changes\u00a0propagate\u00a0to\u00a0all\u00a0the\u00a0clients\u00a0of\u00a0the\u00a0server\u00a0that\u00a0use\u00a0the\u00a0delegate.\u00a0I\u00a0can\nremove\u00a0this\u00a0dependency\u00a0by\u00a0placing\u00a0a\u00a0simple\u00a0delegating\u00a0method\u00a0on\u00a0the\u00a0server\u00a0that\u00a0hides\nthe\u00a0delegate.\u00a0Then\u00a0any\u00a0changes\u00a0I\u00a0make\u00a0to\u00a0the\u00a0delegate\u00a0propagate\u00a0only\u00a0to\u00a0the\u00a0server\u00a0and\nnot\u00a0to\u00a0the\u00a0clients.\nMechanics\nFor\u00a0each\u00a0method\u00a0on\u00a0the\u00a0delegate,\u00a0create\u00a0a\u00a0simple\u00a0delegating\u00a0method\u00a0on\u00a0the\u00a0server.\nAdjust\u00a0the\u00a0client\u00a0to\u00a0call\u00a0the\u00a0server.\u00a0Test\u00a0after\u00a0each\u00a0change.\nIf\u00a0no\u00a0client\u00a0needs\u00a0to\u00a0access\u00a0the\u00a0delegate\u00a0anymore,\u00a0remove\u00a0the\u00a0server\u2019s\u00a0accessor\u00a0for\nthe\u00a0delegate.\nTest.\nExample\nI\u00a0start\u00a0with\u00a0a\u00a0person\u00a0and\u00a0a\u00a0department.\nclass\u00a0Person\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nwww.EBooksWorld.ir\n", "page": 217, "type": "text", "section": "Page 217"}
{"text": "constructor(name)\u00a0{\n\u00a0\u00a0this._name\u00a0=\u00a0name\u037e\n}\nget\u00a0name()\u00a0{return\u00a0this._name\u037e}\nget\u00a0department()\u00a0\u00a0\u00a0\u00a0{return\u00a0this._department\u037e}\nset\u00a0department(arg)\u00a0{this._department\u00a0=\u00a0arg\u037e}\nclass\u00a0Department\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nget\u00a0chargeCode()\u00a0\u00a0\u00a0\u00a0{return\u00a0this._chargeCode\u037e}\nset\u00a0chargeCode(arg)\u00a0{this._chargeCode\u00a0=\u00a0arg\u037e}\nget\u00a0manager()\u00a0\u00a0\u00a0\u00a0{return\u00a0this._manager\u037e}\nset\u00a0manager(arg)\u00a0{this._manager\u00a0=\u00a0arg\u037e}\nSome\u00a0client\u00a0code\u00a0wants\u00a0to\u00a0know\u00a0the\u00a0manager\u00a0of\u00a0a\u00a0person.\u00a0To\u00a0do\u00a0this,\u00a0it\u00a0needs\u00a0to\u00a0get\u00a0the\ndepartment\u00a0first.\nclient\u00a0code\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nmanager\u00a0=\u00a0aPerson.department.manager\u037e\nThis\u00a0reveals\u00a0to\u00a0the\u00a0client\u00a0how\u00a0the\u00a0department\u00a0class\u00a0works\u00a0and\u00a0that\u00a0the\u00a0department\u00a0is\nresponsible\u00a0for\u00a0tracking\u00a0the\u00a0manager.\u00a0I\u00a0can\u00a0reduce\u00a0this\u00a0coupling\u00a0by\u00a0hiding\u00a0the\ndepartment\u00a0class\u00a0from\u00a0the\u00a0client.\u00a0I\u00a0do\u00a0this\u00a0by\u00a0creating\u00a0a\u00a0simple\u00a0delegating\u00a0method\u00a0on\nperson:\nclass\u00a0Person\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nget\u00a0manager()\u00a0{return\u00a0this._department.manager\u037e}\nI\u00a0now\u00a0need\u00a0to\u00a0change\u00a0all\u00a0clients\u00a0of\u00a0person\u00a0to\u00a0use\u00a0this\u00a0new\u00a0method:\nclient\u00a0code\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nwww.EBooksWorld.ir\n", "page": 218, "type": "text", "section": "Page 218"}
{"text": "manager\u00a0=\u00a0aPerson.department.manager\u037e\nOnce\u00a0I\u2019ve\u00a0made\u00a0the\u00a0change\u00a0for\u00a0all\u00a0methods\u00a0of\u00a0department\u00a0and\u00a0for\u00a0all\u00a0the\u00a0clients\u00a0of\nperson,\u00a0I\u00a0can\u00a0remove\u00a0the\u00a0department\u00a0accessor\u00a0on\u00a0person.\nREMOVE MIDDLE MAN\ninverse\u00a0of:\u00a0Hide\u00a0Delegate\u00a0(189)\nMotivation\nIn\u00a0the\u00a0motivation\u00a0for\u00a0Hide\u00a0Delegate\u00a0(189),\u00a0I\u00a0talked\u00a0about\u00a0the\u00a0advantages\u00a0of\nencapsulating\u00a0the\u00a0use\u00a0of\u00a0a\u00a0delegated\u00a0object.\u00a0There\u00a0is\u00a0a\u00a0price\u00a0for\u00a0this.\u00a0Every\u00a0time\u00a0the\nclient\u00a0wants\u00a0to\u00a0use\u00a0a\u00a0new\u00a0feature\u00a0of\u00a0the\u00a0delegate,\u00a0I\u00a0have\u00a0to\u00a0add\u00a0a\u00a0simple\u00a0delegating\nmethod\u00a0to\u00a0the\u00a0server.\u00a0After\u00a0adding\u00a0features\u00a0for\u00a0a\u00a0while,\u00a0I\u00a0get\u00a0irritated\u00a0with\u00a0all\u00a0this\nforwarding.\u00a0The\u00a0server\u00a0class\u00a0is\u00a0just\u00a0a\u00a0middle\u00a0man\u00a0(Middle\u00a0Man\u00a0(81)),\u00a0and\u00a0perhaps\u00a0it\u2019s\ntime\u00a0for\u00a0the\u00a0client\u00a0to\u00a0call\u00a0the\u00a0delegate\u00a0directly.\u00a0(This\u00a0smell\u00a0often\u00a0pops\u00a0up\u00a0when\u00a0people\nget\u00a0overenthusiastic\u00a0about\u00a0following\u00a0the\u00a0Law\u00a0of\u00a0Demeter,\u00a0which\u00a0I\u2019d\u00a0like\u00a0a\u00a0lot\u00a0more\u00a0if\u00a0it\nwere\u00a0called\u00a0the\u00a0Occasionally\u00a0Useful\u00a0Suggestion\u00a0of\u00a0Demeter.)\nIt\u2019s\u00a0hard\u00a0to\u00a0figure\u00a0out\u00a0what\u00a0the\u00a0right\u00a0amount\u00a0of\u00a0hiding\u00a0is.\u00a0Fortunately,\u00a0with\u00a0Hide\nDelegate\u00a0(189)\u00a0and\u00a0Remove\u00a0Middle\u00a0Man,\u00a0it\u00a0doesn\u2019t\u00a0matter\u00a0so\u00a0much.\u00a0I\u00a0can\u00a0adjust\u00a0my\ncode\u00a0as\u00a0time\u00a0goes\u00a0on.\u00a0As\u00a0the\u00a0system\u00a0changes,\u00a0the\u00a0basis\u00a0for\u00a0how\u00a0much\u00a0I\u00a0hide\u00a0also\nchanges.\u00a0A\u00a0good\u00a0encapsulation\u00a0six\u00a0months\u00a0ago\u00a0may\u00a0be\u00a0awkward\u00a0now.\u00a0Refactoring\nwww.EBooksWorld.ir\n", "page": 219, "type": "text", "section": "Page 219"}
{"text": "means\u00a0I\u00a0never\u00a0have\u00a0to\u00a0say\u00a0I\u2019m\u00a0sorry\u2014I\u00a0just\u00a0fix\u00a0it.\nMechanics\nCreate\u00a0a\u00a0getter\u00a0for\u00a0the\u00a0delegate.\nFor\u00a0each\u00a0client\u00a0use\u00a0of\u00a0a\u00a0delegating\u00a0method,\u00a0replace\u00a0the\u00a0call\u00a0to\u00a0the\u00a0delegating\u00a0method\nby\u00a0chaining\u00a0through\u00a0the\u00a0accessor.\u00a0Test\u00a0after\u00a0each\u00a0replacement.\nIf\u00a0all\u00a0calls\u00a0to\u00a0a\u00a0delegating\u00a0method\u00a0are\u00a0replaced,\u00a0you\u00a0can\u00a0delete\u00a0the\u00a0delegating\nmethod.\nWith\u00a0automated\u00a0refactorings,\u00a0you\u00a0can\u00a0use\u00a0Encapsulate\u00a0Variable\u00a0(132)\u00a0on\u00a0the\ndelegate\u00a0field\u00a0and\u00a0then\u00a0Inline\u00a0Function\u00a0(115)\u00a0on\u00a0all\u00a0the\u00a0methods\u00a0that\u00a0use\u00a0it.\nExample\nI\u00a0begin\u00a0with\u00a0a\u00a0person\u00a0class\u00a0that\u00a0uses\u00a0a\u00a0linked\u00a0department\u00a0object\u00a0to\u00a0determine\u00a0a\nmanager.\u00a0(If\u00a0you\u2019re\u00a0reading\u00a0this\u00a0book\u00a0sequentially,\u00a0this\u00a0example\u00a0may\u00a0look\u00a0eerily\nfamiliar.)\nclient\u00a0code\u2026\nmanager\u00a0=\u00a0aPerson.manager\u037e\nclass\u00a0Person\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nget\u00a0manager()\u00a0{return\u00a0this._department.manager\u037e}\nclass\u00a0Department\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nget\u00a0manager()\u00a0\u00a0\u00a0{return\u00a0this._manager\u037e}\nThis\u00a0is\u00a0simple\u00a0to\u00a0use\u00a0and\u00a0encapsulates\u00a0the\u00a0department.\u00a0However,\u00a0if\u00a0lots\u00a0of\u00a0methods\u00a0are\ndoing\u00a0this,\u00a0I\u00a0end\u00a0up\u00a0with\u00a0too\u00a0many\u00a0of\u00a0these\u00a0simple\u00a0delegations\u00a0on\u00a0the\u00a0person.\u00a0That\u2019s\nwhen\u00a0it\u00a0is\u00a0good\u00a0to\u00a0remove\u00a0the\u00a0middle\u00a0man.\u00a0First,\u00a0I\u00a0make\u00a0an\u00a0accessor\u00a0for\u00a0the\u00a0delegate:\nwww.EBooksWorld.ir\n", "page": 220, "type": "text", "section": "Page 220"}
{"text": "class\u00a0Person\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nget\u00a0department()\u00a0\u00a0\u00a0{return\u00a0this._department\u037e}\nNow\u00a0I\u00a0go\u00a0to\u00a0each\u00a0client\u00a0at\u00a0a\u00a0time\u00a0and\u00a0modify\u00a0them\u00a0to\u00a0use\u00a0the\u00a0department\u00a0directly.\nclient\u00a0code\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nmanager\u00a0=\u00a0aPerson.department.manager\u037e\nOnce\u00a0I\u2019ve\u00a0done\u00a0this\u00a0with\u00a0all\u00a0the\u00a0clients,\u00a0I\u00a0can\u00a0remove\u00a0the\u00a0manager\u00a0method\u00a0from\nPerson.\u00a0I\u00a0can\u00a0repeat\u00a0this\u00a0process\u00a0for\u00a0any\u00a0other\u00a0simple\u00a0delegations\u00a0on\u00a0Person.\nI\u00a0can\u00a0do\u00a0a\u00a0mixture\u00a0here.\u00a0Some\u00a0delegations\u00a0may\u00a0be\u00a0so\u00a0common\u00a0that\u00a0I\u2019d\u00a0like\u00a0to\u00a0keep\u00a0them\nto\u00a0make\u00a0client\u00a0code\u00a0easier\u00a0to\u00a0work\u00a0with.\u00a0There\u00a0is\u00a0no\u00a0absolute\u00a0reason\u00a0why\u00a0I\u00a0should\u00a0either\nhide\u00a0a\u00a0delegate\u00a0or\u00a0remove\u00a0a\u00a0middle\u00a0man\u2014particular\u00a0circumstances\u00a0suggest\u00a0which\napproach\u00a0to\u00a0take,\u00a0and\u00a0reasonable\u00a0people\u00a0can\u00a0differ\u00a0on\u00a0what\u00a0works\u00a0best.\nIf\u00a0I\u00a0have\u00a0automated\u00a0refactorings,\u00a0then\u00a0there\u2019s\u00a0a\u00a0useful\u00a0variation\u00a0on\u00a0these\u00a0steps.\u00a0First,\u00a0I\nuse\u00a0Encapsulate\u00a0Variable\u00a0(132)\u00a0on\u00a0department.\u00a0This\u00a0changes\u00a0the\u00a0manager\u00a0getter\u00a0to\nuse\u00a0the\u00a0public\u00a0department\u00a0getter:\nclass\u00a0Person\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nget\u00a0manager()\u00a0{return\u00a0this.department.manager\u037e}\nThe\u00a0change\u00a0is\u00a0rather\u00a0too\u00a0subtle\u00a0in\u00a0JavaScript,\u00a0but\u00a0by\u00a0removing\u00a0the\u00a0underscore\u00a0from\ndepartment\u00a0I\u2019m\u00a0using\u00a0the\u00a0new\u00a0getter\u00a0rather\u00a0than\u00a0accessing\u00a0the\u00a0field\u00a0directly.\nThen\u00a0I\u00a0apply\u00a0Inline\u00a0Function\u00a0(115)\u00a0on\u00a0the\u00a0manager\u00a0method\u00a0to\u00a0replace\u00a0all\u00a0the\u00a0callers\u00a0at\nonce.\nSUBSTITUTE ALGORITHM\nwww.EBooksWorld.ir\n", "page": 221, "type": "text", "section": "Page 221"}
{"text": "Motivation\nI\u2019ve\u00a0never\u00a0tried\u00a0to\u00a0skin\u00a0a\u00a0cat.\u00a0I\u2019m\u00a0told\u00a0there\u00a0are\u00a0several\u00a0ways\u00a0to\u00a0do\u00a0it.\u00a0I\u2019m\u00a0sure\u00a0some\u00a0are\neasier\u00a0than\u00a0others.\u00a0So\u00a0it\u00a0is\u00a0with\u00a0algorithms.\u00a0If\u00a0I\u00a0find\u00a0a\u00a0clearer\u00a0way\u00a0to\u00a0do\u00a0something,\u00a0I\nreplace\u00a0the\u00a0complicated\u00a0way\u00a0with\u00a0the\u00a0clearer\u00a0way.\u00a0Refactoring\u00a0can\u00a0break\u00a0down\nsomething\u00a0complex\u00a0into\u00a0simpler\u00a0pieces,\u00a0but\u00a0sometimes\u00a0I\u00a0just\u00a0reach\u00a0the\u00a0point\u00a0at\u00a0which\u00a0I\nhave\u00a0to\u00a0remove\u00a0the\u00a0whole\u00a0algorithm\u00a0and\u00a0replace\u00a0it\u00a0with\u00a0something\u00a0simpler.\u00a0This\u00a0occurs\nas\u00a0I\u00a0learn\u00a0more\u00a0about\u00a0the\u00a0problem\u00a0and\u00a0realize\u00a0that\u00a0there\u2019s\u00a0an\u00a0easier\u00a0way\u00a0to\u00a0do\u00a0it.\u00a0It\u00a0also\nhappens\u00a0if\u00a0I\u00a0start\u00a0using\u00a0a\u00a0library\u00a0that\u00a0supplies\u00a0features\u00a0that\u00a0duplicate\u00a0my\u00a0code.\nSometimes,\u00a0when\u00a0I\u00a0want\u00a0to\u00a0change\u00a0the\u00a0algorithm\u00a0to\u00a0work\u00a0slightly\u00a0differently,\u00a0it\u2019s\u00a0easier\nto\u00a0start\u00a0by\u00a0replacing\u00a0it\u00a0with\u00a0something\u00a0that\u00a0would\u00a0make\u00a0my\u00a0change\u00a0more\nstraightforward\u00a0to\u00a0make.\nWhen\u00a0I\u00a0have\u00a0to\u00a0take\u00a0this\u00a0step,\u00a0I\u00a0have\u00a0to\u00a0be\u00a0sure\u00a0I\u2019ve\u00a0decomposed\u00a0the\u00a0method\u00a0as\u00a0much\u00a0as\nI\u00a0can.\u00a0Replacing\u00a0a\u00a0large,\u00a0complex\u00a0algorithm\u00a0is\u00a0very\u00a0difficult\u037e\u00a0only\u00a0by\u00a0making\u00a0it\u00a0simple\ncan\u00a0I\u00a0make\u00a0the\u00a0substitution\u00a0tractable.\nMechanics\nwww.EBooksWorld.ir\n", "page": 222, "type": "text", "section": "Page 222"}
{"text": "Mechanics\nArrange\u00a0the\u00a0code\u00a0to\u00a0be\u00a0replaced\u00a0so\u00a0that\u00a0it\u00a0fills\u00a0a\u00a0complete\u00a0function.\nPrepare\u00a0tests\u00a0using\u00a0this\u00a0function\u00a0only,\u00a0to\u00a0capture\u00a0its\u00a0behavior.\nPrepare\u00a0your\u00a0alternative\u00a0algorithm.\nRun\u00a0static\u00a0checks.\nRun\u00a0tests\u00a0to\u00a0compare\u00a0the\u00a0output\u00a0of\u00a0the\u00a0old\u00a0algorithm\u00a0to\u00a0the\u00a0new\u00a0one.\u00a0If\u00a0they\u00a0are\u00a0the\nsame,\u00a0you\u2019re\u00a0done.\u00a0Otherwise,\u00a0use\u00a0the\u00a0old\u00a0algorithm\u00a0for\u00a0comparison\u00a0in\u00a0testing\u00a0and\ndebugging.\nwww.EBooksWorld.ir\n", "page": 223, "type": "text", "section": "Page 223"}
{"text": "Chapter 8\nMoving Features\nSo\u00a0far,\u00a0the\u00a0refactorings\u00a0have\u00a0been\u00a0about\u00a0creating,\u00a0removing,\u00a0and\u00a0renaming\u00a0program\nelements.\u00a0Another\u00a0important\u00a0part\u00a0of\u00a0refactoring\u00a0is\u00a0moving\u00a0elements\u00a0between\u00a0contexts.\u00a0I\nuse\u00a0Move\u00a0Function\u00a0(198)\u00a0to\u00a0move\u00a0functions\u00a0between\u00a0classes\u00a0and\u00a0other\u00a0modules.\u00a0Fields\ncan\u00a0move\u00a0too,\u00a0with\u00a0Move\u00a0Field\u00a0(207).\nI\u00a0also\u00a0move\u00a0individual\u00a0statements\u00a0around.\u00a0I\u00a0use\u00a0Move\u00a0Statements\u00a0into\u00a0Function\u00a0(213)\nand\u00a0Move\u00a0Statements\u00a0to\u00a0Callers\u00a0(217)\u00a0to\u00a0move\u00a0them\u00a0in\u00a0or\u00a0out\u00a0of\u00a0functions,\u00a0as\u00a0well\u00a0as\nSlide\u00a0Statements\u00a0(223)\u00a0to\u00a0move\u00a0them\u00a0within\u00a0a\u00a0function.\u00a0Sometimes,\u00a0I\u00a0can\u00a0take\u00a0some\nstatements\u00a0that\u00a0match\u00a0an\u00a0existing\u00a0function\u00a0and\u00a0use\u00a0Replace\u00a0Inline\u00a0Code\u00a0with\u00a0Function\nCall\u00a0(222)\u00a0to\u00a0remove\u00a0the\u00a0duplication.\nTwo\u00a0refactorings\u00a0I\u00a0often\u00a0do\u00a0with\u00a0loops\u00a0are\u00a0Split\u00a0Loop\u00a0(227),\u00a0to\u00a0ensure\u00a0a\u00a0loop\u00a0does\u00a0only\none\u00a0thing,\u00a0and\u00a0Replace\u00a0Loop\u00a0with\u00a0Pipeline\u00a0(231)\u00a0to\u00a0get\u00a0rid\u00a0of\u00a0a\u00a0loop\u00a0entirely.\nAnd\u00a0then\u00a0there\u2019s\u00a0the\u00a0favorite\u00a0refactoring\u00a0of\u00a0many\u00a0a\u00a0fine\u00a0programmer:\u00a0Remove\u00a0Dead\nCode\u00a0(237).\u00a0Nothing\u00a0is\u00a0as\u00a0satisfying\u00a0as\u00a0applying\u00a0the\u00a0digital\u00a0flamethrower\u00a0to\u00a0superfluous\nstatements.\nMOVE FUNCTION\nformerly:\u00a0Move\u00a0Method\nHistory\nTopics\nTutorials\nOffers & Deals\nHighlights\nSettings\nSupport\nSign Out\nwww.EBooksWorld.ir\n", "page": 224, "type": "text", "section": "Page 224"}
{"text": "Motivation\nThe\u00a0heart\u00a0of\u00a0a\u00a0good\u00a0software\u00a0design\u00a0is\u00a0its\u00a0modularity\u2014which\u00a0is\u00a0my\u00a0ability\u00a0to\u00a0make\u00a0most\nmodifications\u00a0to\u00a0a\u00a0program\u00a0while\u00a0only\u00a0having\u00a0to\u00a0understand\u00a0a\u00a0small\u00a0part\u00a0of\u00a0it.\u00a0To\u00a0get\nthis\u00a0modularity,\u00a0I\u00a0need\u00a0to\u00a0ensure\u00a0that\u00a0related\u00a0software\u00a0elements\u00a0are\u00a0grouped\u00a0together\nand\u00a0the\u00a0links\u00a0between\u00a0them\u00a0are\u00a0easy\u00a0to\u00a0find\u00a0and\u00a0understand.\u00a0But\u00a0my\u00a0understanding\u00a0of\nhow\u00a0to\u00a0do\u00a0this\u00a0isn\u2019t\u00a0static\u2014as\u00a0I\u00a0better\u00a0understand\u00a0what\u00a0I\u2019m\u00a0doing,\u00a0I\u00a0learn\u00a0how\u00a0to\u00a0best\ngroup\u00a0together\u00a0software\u00a0elements.\u00a0To\u00a0reflect\u00a0that\u00a0growing\u00a0understanding,\u00a0I\u00a0need\u00a0to\nmove\u00a0elements\u00a0around.\nAll\u00a0functions\u00a0live\u00a0in\u00a0some\u00a0context\u037e\u00a0it\u00a0may\u00a0be\u00a0global,\u00a0but\u00a0usually\u00a0it\u2019s\u00a0some\u00a0form\u00a0of\u00a0a\nmodule.\u00a0In\u00a0an\u00a0object\u00adoriented\u00a0program,\u00a0the\u00a0core\u00a0modular\u00a0context\u00a0is\u00a0a\u00a0class.\u00a0Nesting\u00a0a\nfunction\u00a0within\u00a0another\u00a0creates\u00a0another\u00a0common\u00a0context.\u00a0Different\u00a0languages\u00a0provide\nvaried\u00a0forms\u00a0of\u00a0modularity,\u00a0each\u00a0creating\u00a0a\u00a0context\u00a0for\u00a0a\u00a0function\u00a0to\u00a0live\u00a0in.\nOne\u00a0of\u00a0the\u00a0most\u00a0straightforward\u00a0reasons\u00a0to\u00a0move\u00a0a\u00a0function\u00a0is\u00a0when\u00a0it\u00a0references\nelements\u00a0in\u00a0other\u00a0contexts\u00a0more\u00a0than\u00a0the\u00a0one\u00a0it\u00a0currently\u00a0resides\u00a0in.\u00a0Moving\u00a0it\u00a0together\nwith\u00a0those\u00a0elements\u00a0often\u00a0improves\u00a0encapsulation,\u00a0allowing\u00a0other\u00a0parts\u00a0of\u00a0the\u00a0software\nto\u00a0be\u00a0less\u00a0dependent\u00a0on\u00a0the\u00a0details\u00a0of\u00a0this\u00a0module.\nSimilarly,\u00a0I\u00a0may\u00a0move\u00a0a\u00a0function\u00a0because\u00a0of\u00a0where\u00a0its\u00a0callers\u00a0live,\u00a0or\u00a0where\u00a0I\u00a0need\u00a0to\u00a0call\nit\u00a0from\u00a0in\u00a0my\u00a0next\u00a0enhancement.\u00a0A\u00a0function\u00a0defined\u00a0as\u00a0a\u00a0helper\u00a0inside\u00a0another\u00a0function\nmay\u00a0have\u00a0value\u00a0on\u00a0its\u00a0own,\u00a0so\u00a0it\u2019s\u00a0worth\u00a0moving\u00a0it\u00a0to\u00a0somewhere\u00a0more\u00a0accessible.\u00a0A\nmethod\u00a0on\u00a0a\u00a0class\u00a0may\u00a0be\u00a0easier\u00a0for\u00a0me\u00a0to\u00a0use\u00a0if\u00a0shifted\u00a0to\u00a0another.\nDeciding\u00a0to\u00a0move\u00a0a\u00a0function\u00a0is\u00a0rarely\u00a0an\u00a0easy\u00a0decision.\u00a0To\u00a0help\u00a0me\u00a0decide,\u00a0I\u00a0examine\u00a0the\ncurrent\u00a0and\u00a0candidate\u00a0contexts\u00a0for\u00a0that\u00a0function.\u00a0I\u00a0need\u00a0to\u00a0look\u00a0at\u00a0what\u00a0functions\u00a0call\nthis\u00a0one,\u00a0what\u00a0functions\u00a0are\u00a0called\u00a0by\u00a0the\u00a0moving\u00a0function,\u00a0and\u00a0what\u00a0data\u00a0that\u00a0function\nuses.\u00a0Often,\u00a0I\u00a0see\u00a0that\u00a0I\u00a0need\u00a0a\u00a0new\u00a0context\u00a0for\u00a0a\u00a0group\u00a0of\u00a0functions\u00a0and\u00a0create\u00a0one\u00a0with\nCombine\u00a0Functions\u00a0into\u00a0Class\u00a0(144)\u00a0or\u00a0Extract\u00a0Class\u00a0(182).\u00a0Although\u00a0it\u00a0can\u00a0be\u00a0difficult\nwww.EBooksWorld.ir\n", "page": 225, "type": "text", "section": "Page 225"}
{"text": "to\u00a0decide\u00a0where\u00a0the\u00a0best\u00a0place\u00a0for\u00a0a\u00a0function\u00a0is,\u00a0the\u00a0more\u00a0difficult\u00a0this\u00a0choice,\u00a0often\u00a0the\nless\u00a0it\u00a0matters.\u00a0I\u00a0find\u00a0it\u00a0valuable\u00a0to\u00a0try\u00a0working\u00a0with\u00a0functions\u00a0in\u00a0one\u00a0context,\u00a0knowing\nI\u2019ll\u00a0learn\u00a0how\u00a0well\u00a0they\u00a0fit,\u00a0and\u00a0if\u00a0they\u00a0don\u2019t\u00a0fit\u00a0I\u00a0can\u00a0always\u00a0move\u00a0them\u00a0later.\nMechanics\nExamine\u00a0all\u00a0the\u00a0program\u00a0elements\u00a0used\u00a0by\u00a0the\u00a0chosen\u00a0function\u00a0in\u00a0its\u00a0current\ncontext.\u00a0Consider\u00a0whether\u00a0they\u00a0should\u00a0move\u00a0too.\nIf\u00a0I\u00a0find\u00a0a\u00a0called\u00a0function\u00a0that\u00a0should\u00a0also\u00a0move,\u00a0I\u00a0usually\u00a0move\u00a0it\u00a0first.\u00a0That\u00a0way,\nmoving\u00a0a\u00a0clusters\u00a0of\u00a0functions\u00a0begins\u00a0with\u00a0the\u00a0one\u00a0that\u00a0has\u00a0the\u00a0least\u00a0dependency\u00a0on\nthe\u00a0others\u00a0in\u00a0the\u00a0group.\nIf\u00a0a\u00a0high\u00adlevel\u00a0function\u00a0is\u00a0the\u00a0only\u00a0caller\u00a0of\u00a0subfunctions,\u00a0then\u00a0you\u00a0can\u00a0inline\u00a0those\nfunctions\u00a0into\u00a0the\u00a0high\u00adlevel\u00a0method,\u00a0move,\u00a0and\u00a0reextract\u00a0at\u00a0the\u00a0destination.\nCheck\u00a0if\u00a0the\u00a0chosen\u00a0function\u00a0is\u00a0a\u00a0polymorphic\u00a0method.\nIf\u00a0I\u2019m\u00a0in\u00a0an\u00a0object\u00adoriented\u00a0language,\u00a0I\u00a0have\u00a0to\u00a0take\u00a0account\u00a0of\u00a0super\u00ad\u00a0and\u00a0subclass\ndeclarations.\nCopy\u00a0the\u00a0function\u00a0to\u00a0the\u00a0target\u00a0context.\u00a0Adjust\u00a0it\u00a0to\u00a0fit\u00a0in\u00a0its\u00a0new\u00a0home.\nIf\u00a0the\u00a0body\u00a0uses\u00a0elements\u00a0in\u00a0the\u00a0source\u00a0context,\u00a0I\u00a0need\u00a0to\u00a0either\u00a0pass\u00a0those\u00a0elements\nas\u00a0parameters\u00a0or\u00a0pass\u00a0a\u00a0reference\u00a0to\u00a0that\u00a0source\u00a0context.\nMoving\u00a0a\u00a0function\u00a0often\u00a0means\u00a0I\u00a0need\u00a0to\u00a0come\u00a0up\u00a0with\u00a0a\u00a0different\u00a0name\u00a0that\u00a0works\nbetter\u00a0in\u00a0the\u00a0new\u00a0context.\nPerform\u00a0static\u00a0analysis.\nFigure\u00a0out\u00a0how\u00a0to\u00a0reference\u00a0the\u00a0target\u00a0function\u00a0from\u00a0the\u00a0source\u00a0context.\nTurn\u00a0the\u00a0source\u00a0function\u00a0into\u00a0a\u00a0delegating\u00a0function.\nTest.\nConsider\u00a0Inline\u00a0Function\u00a0(115)\u00a0on\u00a0the\u00a0source\u00a0function.\nThe\u00a0source\u00a0function\u00a0can\u00a0stay\u00a0indefinitely\u00a0as\u00a0a\u00a0delegating\u00a0function.\u00a0But\u00a0if\u00a0its\u00a0callers\ncan\u00a0just\u00a0as\u00a0easily\u00a0reach\u00a0the\u00a0target\u00a0directly,\u00a0then\u00a0it\u2019s\u00a0better\u00a0to\u00a0remove\u00a0the\u00a0middle\nman.\nExample: Moving a Nested Function to Top Level\nwww.EBooksWorld.ir\n", "page": 226, "type": "text", "section": "Page 226"}
{"text": "Example: Moving a Nested Function to Top Level\nI\u2019ll\u00a0begin\u00a0with\u00a0a\u00a0function\u00a0that\u00a0calculates\u00a0the\u00a0total\u00a0distance\u00a0for\u00a0a\u00a0GPS\u00a0track\u00a0record.\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0trackSummary(points)\u00a0{\n\u00a0\u00a0const\u00a0totalTime\u00a0=\u00a0calculateTime()\u037e\n\u00a0\u00a0const\u00a0totalDistance\u00a0=\u00a0calculateDistance()\u037e\n\u00a0\u00a0const\u00a0pace\u00a0=\u00a0totalTime\u00a0/\u00a060\u00a0/\u00a0\u00a0totalDistance\u00a0\u037e\n\u00a0\u00a0return\u00a0{\n\u00a0\u00a0\u00a0\u00a0time:\u00a0totalTime,\n\u00a0\u00a0\u00a0\u00a0distance:\u00a0totalDistance,\n\u00a0\u00a0\u00a0\u00a0pace:\u00a0pace\n\u00a0\u00a0}\u037e\n\u00a0\u00a0function\u00a0calculateDistance()\u00a0{\n\u00a0\u00a0\u00a0\u00a0let\u00a0result\u00a0=\u00a00\u037e\n\u00a0\u00a0\u00a0\u00a0for\u00a0(let\u00a0i\u00a0=\u00a01\u037e\u00a0i\u00a0<\u00a0points.length\u037e\u00a0i++)\u00a0{\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0result\u00a0+=\u00a0distance(points[i\u00ad1],\u00a0points[i])\u037e\n\u00a0\u00a0\u00a0\u00a0}\n\u00a0\u00a0\u00a0\u00a0return\u00a0result\u037e\n\u00a0\u00a0}\n\u00a0function\u00a0distance(p1,p2)\u00a0{\u00a0...\u00a0}\n\u00a0function\u00a0radians(degrees)\u00a0{\u00a0...\u00a0}\n\u00a0function\u00a0calculateTime()\u00a0{\u00a0...\u00a0}\n}\nI\u2019d\u00a0like\u00a0to\u00a0move\u00a0calculateDistance\u00a0to\u00a0the\u00a0top\u00a0level\u00a0so\u00a0I\u00a0can\u00a0calculate\u00a0distances\u00a0for\ntracks\u00a0without\u00a0all\u00a0the\u00a0other\u00a0parts\u00a0of\u00a0the\u00a0summary.\nI\u00a0begin\u00a0by\u00a0copying\u00a0the\u00a0function\u00a0to\u00a0the\u00a0top\u00a0level.\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0trackSummary(points)\u00a0{\n\u00a0\u00a0const\u00a0totalTime\u00a0=\u00a0calculateTime()\u037e\n\u00a0\u00a0const\u00a0totalDistance\u00a0=\u00a0calculateDistance()\u037e\n\u00a0\u00a0const\u00a0pace\u00a0=\u00a0totalTime\u00a0/\u00a060\u00a0/\u00a0\u00a0totalDistance\u00a0\u037e\n\u00a0\u00a0return\u00a0{\n\u00a0\u00a0\u00a0\u00a0time:\u00a0totalTime,\n\u00a0\u00a0\u00a0\u00a0distance:\u00a0totalDistance,\n\u00a0\u00a0\u00a0\u00a0pace:\u00a0pace\n\u00a0\u00a0}\u037e\n\u00a0\u00a0function\u00a0calculateDistance()\u00a0{\n\u00a0\u00a0\u00a0\u00a0let\u00a0result\u00a0=\u00a00\u037e\nwww.EBooksWorld.ir\n", "page": 227, "type": "text", "section": "Page 227"}
{"text": "\u00a0\u00a0\u00a0\u00a0for\u00a0(let\u00a0i\u00a0=\u00a01\u037e\u00a0i\u00a0<\u00a0points.length\u037e\u00a0i++)\u00a0{\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0result\u00a0+=\u00a0distance(points[i\u00ad1],\u00a0points[i])\u037e\n\u00a0\u00a0\u00a0\u00a0}\n\u00a0\u00a0\u00a0\u00a0return\u00a0result\u037e\n\u00a0\u00a0}\n\u00a0\u00a0...\n\u00a0function\u00a0distance(p1,p2)\u00a0{\u00a0...\u00a0}\n\u00a0function\u00a0radians(degrees)\u00a0{\u00a0...\u00a0}\n\u00a0function\u00a0calculateTime()\u00a0{\u00a0...\u00a0}\n}\n\u00a0\u00a0function\u00a0top_calculateDistance()\u00a0{\n\u00a0\u00a0\u00a0\u00a0let\u00a0result\u00a0=\u00a00\u037e\n\u00a0\u00a0\u00a0\u00a0for\u00a0(let\u00a0i\u00a0=\u00a01\u037e\u00a0i\u00a0<\u00a0points.length\u037e\u00a0i++)\u00a0{\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0result\u00a0+=\u00a0distance(points[i\u00ad1],\u00a0points[i])\u037e\n\u00a0\u00a0\u00a0\u00a0}\n\u00a0\u00a0\u00a0\u00a0return\u00a0result\u037e\n\u00a0\u00a0}\nWhen\u00a0I\u00a0copy\u00a0a\u00a0function\u00a0like\u00a0this,\u00a0I\u00a0like\u00a0to\u00a0change\u00a0the\u00a0name\u00a0so\u00a0I\u00a0can\u00a0distinguish\u00a0them\nboth\u00a0in\u00a0the\u00a0code\u00a0and\u00a0in\u00a0my\u00a0head.\u00a0I\u00a0don\u2019t\u00a0want\u00a0to\u00a0think\u00a0about\u00a0what\u00a0the\u00a0right\u00a0name\nshould\u00a0be\u00a0right\u00a0now,\u00a0so\u00a0I\u00a0create\u00a0a\u00a0temporary\u00a0name.\nThe\u00a0program\u00a0still\u00a0works,\u00a0but\u00a0my\u00a0static\u00a0analysis\u00a0is\u00a0rightly\u00a0rather\u00a0upset.\u00a0The\u00a0new\u00a0function\nhas\u00a0two\u00a0undefined\u00a0symbols:\u00a0distance\u00a0and\u00a0points.\u00a0The\u00a0natural\u00a0way\u00a0to\u00a0deal\u00a0with\npoints\u00a0is\u00a0to\u00a0pass\u00a0it\u00a0in\u00a0as\u00a0a\u00a0parameter.\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0top_calculateDistance(points)\u00a0{\n\u00a0\u00a0let\u00a0result\u00a0=\u00a00\u037e\n\u00a0\u00a0for\u00a0(let\u00a0i\u00a0=\u00a01\u037e\u00a0i\u00a0<\u00a0points.length\u037e\u00a0i++)\u00a0{\n\u00a0\u00a0\u00a0\u00a0result\u00a0+=\u00a0distance(points[i\u00ad1],\u00a0points[i])\u037e\n\u00a0\u00a0}\n\u00a0\u00a0return\u00a0result\u037e\n}\nI\u00a0could\u00a0do\u00a0the\u00a0same\u00a0with\u00a0distance,\u00a0but\u00a0perhaps\u00a0it\u00a0makes\u00a0sense\u00a0to\u00a0move\u00a0it\u00a0together\nwith\u00a0calculateDistance.\u00a0Here\u2019s\u00a0the\u00a0relevant\u00a0code:\nfunction\u00a0trackSummary\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nwww.EBooksWorld.ir\n", "page": 228, "type": "text", "section": "Page 228"}
{"text": "function\u00a0distance(p1,p2)\u00a0{\n\u00a0\u00a0//\u00a0haversine\u00a0formula\u00a0see\u00a0http://www.movable\u00adtype.co.uk/scripts/latlong.html\n\u00a0\u00a0const\u00a0EARTH_RADIUS\u00a0=\u00a03959\u037e\u00a0//\u00a0in\u00a0miles\n\u00a0\u00a0const\u00a0dLat\u00a0=\u00a0radians(p2.lat)\u00a0\u00ad\u00a0radians(p1.lat)\u037e\n\u00a0\u00a0const\u00a0dLon\u00a0=\u00a0radians(p2.lon)\u00a0\u00ad\u00a0radians(p1.lon)\u037e\n\u00a0\u00a0const\u00a0a\u00a0=\u00a0Math.pow(Math.sin(dLat\u00a0/\u00a02),2)\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0+\u00a0Math.cos(radians(p2.lat))\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0*\u00a0Math.cos(radians(p1.lat))\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0*\u00a0Math.pow(Math.sin(dLon\u00a0/\u00a02),\u00a02)\u037e\n\u00a0\u00a0const\u00a0c\u00a0=\u00a02\u00a0*\u00a0Math.atan2(Math.sqrt(a),\u00a0Math.sqrt(1\u00ada))\u037e\n\u00a0\u00a0return\u00a0EARTH_RADIUS\u00a0*\u00a0c\u037e\n}\nfunction\u00a0radians(degrees)\u00a0{\n\u00a0\u00a0return\u00a0degrees\u00a0*\u00a0Math.PI\u00a0/\u00a0180\u037e\n}\nI\u00a0can\u00a0see\u00a0that\u00a0distance\u00a0only\u00a0uses\u00a0radians\u00a0and\u00a0radians\u00a0doesn\u2019t\u00a0use\u00a0anything\u00a0inside\nits\u00a0current\u00a0context.\u00a0So\u00a0rather\u00a0than\u00a0pass\u00a0the\u00a0functions,\u00a0I\u00a0might\u00a0as\u00a0well\u00a0move\u00a0them\u00a0too.\u00a0I\ncan\u00a0make\u00a0a\u00a0small\u00a0step\u00a0in\u00a0this\u00a0direction\u00a0by\u00a0moving\u00a0them\u00a0from\u00a0their\u00a0current\u00a0context\u00a0to\nnest\u00a0them\u00a0inside\u00a0the\u00a0nested\u00a0calculateDistance.\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0trackSummary(points)\u00a0{\n\u00a0\u00a0const\u00a0totalTime\u00a0=\u00a0calculateTime()\u037e\n\u00a0\u00a0const\u00a0totalDistance\u00a0=\u00a0calculateDistance()\u037e\n\u00a0\u00a0const\u00a0pace\u00a0=\u00a0totalTime\u00a0/\u00a060\u00a0/\u00a0\u00a0totalDistance\u00a0\u037e\n\u00a0\u00a0return\u00a0{\n\u00a0\u00a0\u00a0\u00a0time:\u00a0totalTime,\n\u00a0\u00a0\u00a0\u00a0distance:\u00a0totalDistance,\n\u00a0\u00a0\u00a0\u00a0pace:\u00a0pace\n\u00a0\u00a0}\u037e\n\u00a0\u00a0function\u00a0calculateDistance()\u00a0{\n\u00a0\u00a0\u00a0\u00a0let\u00a0result\u00a0=\u00a00\u037e\n\u00a0\u00a0\u00a0\u00a0for\u00a0(let\u00a0i\u00a0=\u00a01\u037e\u00a0i\u00a0<\u00a0points.length\u037e\u00a0i++)\u00a0{\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0result\u00a0+=\u00a0distance(points[i\u00ad1],\u00a0points[i])\u037e\n\u00a0\u00a0\u00a0\u00a0}\n\u00a0\u00a0\u00a0\u00a0return\u00a0result\u037e\n\u00a0\u00a0\u00a0\u00a0function\u00a0distance(p1,p2)\u00a0{\u00a0...\u00a0}\n\u00a0\u00a0\u00a0\u00a0function\u00a0radians(degrees)\u00a0{\u00a0...\u00a0}\n\u00a0\u00a0}\nBy\u00a0doing\u00a0this,\u00a0I\u00a0can\u00a0use\u00a0both\u00a0static\u00a0analysis\u00a0and\u00a0testing\u00a0to\u00a0tell\u00a0me\u00a0if\u00a0there\u00a0are\u00a0any\ncomplications.\u00a0In\u00a0this\u00a0case\u00a0all\u00a0is\u00a0well,\u00a0so\u00a0I\u00a0can\u00a0copy\u00a0them\u00a0over\u00a0to\ntop_calculateDistance.\nwww.EBooksWorld.ir\n", "page": 229, "type": "text", "section": "Page 229"}
{"text": "Click\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0top_calculateDistance(points)\u00a0{\n\u00a0\u00a0let\u00a0result\u00a0=\u00a00\u037e\n\u00a0\u00a0for\u00a0(let\u00a0i\u00a0=\u00a01\u037e\u00a0i\u00a0<\u00a0points.length\u037e\u00a0i++)\u00a0{\n\u00a0\u00a0\u00a0\u00a0result\u00a0+=\u00a0distance(points[i\u00ad1],\u00a0points[i])\u037e\n\u00a0\u00a0}\n\u00a0\u00a0return\u00a0result\u037e\n\u00a0function\u00a0distance(p1,p2)\u00a0{\u00a0...\u00a0}\n\u00a0function\u00a0radians(degrees)\u00a0{\u00a0...\u00a0}\n}\nAgain,\u00a0the\u00a0copy\u00a0doesn\u2019t\u00a0change\u00a0how\u00a0the\u00a0program\u00a0runs,\u00a0but\u00a0does\u00a0give\u00a0me\u00a0an\u00a0opportunity\nfor\u00a0more\u00a0static\u00a0analysis.\u00a0Had\u00a0I\u00a0not\u00a0spotted\u00a0that\u00a0distance\u00a0calls\u00a0radians,\u00a0the\u00a0linter\nwould\u00a0have\u00a0caught\u00a0it\u00a0at\u00a0this\u00a0step.\nNow\u00a0that\u00a0I\u00a0have\u00a0prepared\u00a0the\u00a0table,\u00a0it\u2019s\u00a0time\u00a0for\u00a0the\u00a0major\u00a0change\u2014the\u00a0body\u00a0of\u00a0the\noriginal\u00a0calculateDistance\u00a0will\u00a0now\u00a0call\u00a0top_calculateDistance:\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0trackSummary(points)\u00a0{\n\u00a0\u00a0const\u00a0totalTime\u00a0=\u00a0calculateTime()\u037e\n\u00a0\u00a0const\u00a0totalDistance\u00a0=\u00a0calculateDistance()\u037e\n\u00a0\u00a0const\u00a0pace\u00a0=\u00a0totalTime\u00a0/\u00a060\u00a0/\u00a0\u00a0totalDistance\u00a0\u037e\n\u00a0\u00a0return\u00a0{\n\u00a0\u00a0\u00a0\u00a0time:\u00a0totalTime,\n\u00a0\u00a0\u00a0\u00a0distance:\u00a0totalDistance,\n\u00a0\u00a0\u00a0\u00a0pace:\u00a0pace\n\u00a0\u00a0}\u037e\n\u00a0\u00a0function\u00a0calculateDistance()\u00a0{\n\u00a0\u00a0\u00a0\u00a0return\u00a0top_calculateDistance(points)\u037e\n\u00a0\u00a0}\nThis\u00a0is\u00a0the\u00a0crucial\u00a0time\u00a0to\u00a0run\u00a0tests\u00a0to\u00a0fully\u00a0test\u00a0that\u00a0the\u00a0moved\u00a0function\u00a0has\u00a0bedded\ndown\u00a0in\u00a0its\u00a0new\u00a0home.\nWith\u00a0that\u00a0done,\u00a0it\u2019s\u00a0like\u00a0unpacking\u00a0the\u00a0boxes\u00a0after\u00a0moving\u00a0house.\u00a0The\u00a0first\u00a0thing\u00a0is\u00a0to\ndecide\u00a0whether\u00a0to\u00a0keep\u00a0the\u00a0original\u00a0function\u00a0that\u2019s\u00a0just\u00a0delegating\u00a0or\u00a0not.\u00a0In\u00a0this\u00a0case,\nthere\u00a0are\u00a0few\u00a0callers\u00a0and,\u00a0as\u00a0usual\u00a0with\u00a0nested\u00a0functions,\u00a0they\u00a0are\u00a0highly\u00a0localized.\u00a0So\nI\u2019m\u00a0happy\u00a0to\u00a0get\u00a0rid\u00a0of\u00a0it.\nwww.EBooksWorld.ir\n", "page": 230, "type": "text", "section": "Page 230"}
{"text": "Click\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0trackSummary(points)\u00a0{\n\u00a0\u00a0const\u00a0totalTime\u00a0=\u00a0calculateTime()\u037e\n\u00a0\u00a0const\u00a0totalDistance\u00a0=\u00a0top_calculateDistance(points)\u037e\n\u00a0\u00a0const\u00a0pace\u00a0=\u00a0totalTime\u00a0/\u00a060\u00a0/\u00a0\u00a0totalDistance\u00a0\u037e\n\u00a0\u00a0return\u00a0{\n\u00a0\u00a0\u00a0\u00a0time:\u00a0totalTime,\n\u00a0\u00a0\u00a0\u00a0distance:\u00a0totalDistance,\n\u00a0\u00a0\u00a0\u00a0pace:\u00a0pace\n\u00a0\u00a0}\u037e\nNow\u00a0is\u00a0also\u00a0a\u00a0good\u00a0time\u00a0to\u00a0think\u00a0about\u00a0what\u00a0I\u00a0want\u00a0the\u00a0name\u00a0to\u00a0be.\u00a0Since\u00a0the\u00a0top\u00adlevel\nfunction\u00a0has\u00a0the\u00a0highest\u00a0visibility,\u00a0I\u2019d\u00a0like\u00a0it\u00a0to\u00a0have\u00a0the\u00a0best\u00a0name.\u00a0totalDistance\nseems\u00a0like\u00a0a\u00a0good\u00a0choice.\u00a0I\u00a0can\u2019t\u00a0use\u00a0that\u00a0immediately\u00a0since\u00a0it\u00a0will\u00a0be\u00a0shadowed\u00a0by\u00a0the\nvariable\u00a0inside\u00a0trackSummary\u2014but\u00a0I\u00a0don\u2019t\u00a0see\u00a0any\u00a0reason\u00a0to\u00a0keep\u00a0that\u00a0anyway,\u00a0so\u00a0I\nuse\u00a0Inline\u00a0Variable\u00a0(123)\u00a0on\u00a0it.\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0trackSummary(points)\u00a0{\n\u00a0\u00a0const\u00a0totalTime\u00a0=\u00a0calculateTime()\u037e\n\u00a0\u00a0const\u00a0pace\u00a0=\u00a0totalTime\u00a0/\u00a060\u00a0/\u00a0\u00a0totalDistance(points)\u00a0\u037e\n\u00a0\u00a0return\u00a0{\n\u00a0\u00a0\u00a0\u00a0time:\u00a0totalTime,\n\u00a0\u00a0\u00a0\u00a0distance:\u00a0totalDistance(points),\n\u00a0\u00a0\u00a0\u00a0pace:\u00a0pace\n\u00a0\u00a0}\u037e\nfunction\u00a0totalDistance(points)\u00a0{\n\u00a0\u00a0let\u00a0result\u00a0=\u00a00\u037e\n\u00a0\u00a0for\u00a0(let\u00a0i\u00a0=\u00a01\u037e\u00a0i\u00a0<\u00a0points.length\u037e\u00a0i++)\u00a0{\n\u00a0\u00a0\u00a0\u00a0result\u00a0+=\u00a0distance(points[i\u00ad1],\u00a0points[i])\u037e\n\u00a0\u00a0}\n\u00a0\u00a0return\u00a0result\u037e\nIf\u00a0I\u2019d\u00a0had\u00a0the\u00a0need\u00a0to\u00a0keep\u00a0the\u00a0variable,\u00a0I\u2019d\u00a0have\u00a0renamed\u00a0it\u00a0to\u00a0something\u00a0like\ntotalDistanceCache\u00a0or\u00a0distance.\nSince\u00a0the\u00a0functions\u00a0for\u00a0distance\u00a0and\u00a0radians\u00a0don\u2019t\u00a0depend\u00a0on\u00a0anything\u00a0inside\ntotalDistance,\u00a0I\u00a0prefer\u00a0to\u00a0move\u00a0them\u00a0to\u00a0top\u00a0level\u00a0too,\u00a0putting\u00a0all\u00a0four\u00a0functions\u00a0at\nthe\u00a0top\u00a0level.\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0trackSummary(points)\u00a0{\u00a0...\u00a0}\nwww.EBooksWorld.ir\n", "page": 231, "type": "text", "section": "Page 231"}
{"text": "function\u00a0totalDistance(points)\u00a0{\u00a0...\u00a0}\nfunction\u00a0distance(p1,p2)\u00a0{\u00a0...\u00a0}\nfunction\u00a0radians(degrees)\u00a0{\u00a0...\u00a0}\nSome\u00a0people\u00a0would\u00a0prefer\u00a0to\u00a0keep\u00a0distance\u00a0and\u00a0radians\u00a0inside\u00a0totalDistance\u00a0in\norder\u00a0to\u00a0restrict\u00a0their\u00a0visibility.\u00a0In\u00a0some\u00a0languages\u00a0that\u00a0may\u00a0be\u00a0a\u00a0consideration,\u00a0but\u00a0with\nES\u00a02015,\u00a0JavaScript\u00a0has\u00a0an\u00a0excellent\u00a0module\u00a0mechanism\u00a0that\u2019s\u00a0the\u00a0best\u00a0tool\u00a0for\ncontrolling\u00a0function\u00a0visibility.\u00a0In\u00a0general,\u00a0I\u2019m\u00a0wary\u00a0of\u00a0nested\u00a0functions\u2014they\u00a0too\u00a0easily\nset\u00a0up\u00a0hidden\u00a0data\u00a0interrelationships\u00a0that\u00a0can\u00a0get\u00a0hard\u00a0to\u00a0follow.\nExample: Moving between Classes\nTo\u00a0illustrate\u00a0this\u00a0variety\u00a0of\u00a0Move\u00a0Function,\u00a0I\u2019ll\u00a0start\u00a0here:\nclass\u00a0Account\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nget\u00a0bankCharge()\u00a0{\n\u00a0\u00a0let\u00a0result\u00a0=\u00a04.5\u037e\n\u00a0\u00a0if\u00a0(this._daysOverdrawn\u00a0>\u00a00)\u00a0result\u00a0+=\u00a0this.overdraftCharge\u037e\n\u00a0\u00a0return\u00a0result\u037e\n}\nget\u00a0overdraftCharge()\u00a0{\n\u00a0\u00a0if\u00a0(this.type.isPremium)\u00a0{\n\u00a0\u00a0\u00a0\u00a0const\u00a0baseCharge\u00a0=\u00a010\u037e\n\u00a0\u00a0\u00a0\u00a0if\u00a0(this.daysOverdrawn\u00a0<=\u00a07)\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0return\u00a0baseCharge\u037e\n\u00a0\u00a0\u00a0\u00a0else\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0return\u00a0baseCharge\u00a0+\u00a0(this.daysOverdrawn\u00a0\u00ad\u00a07)\u00a0*\u00a00.85\u037e\n\u00a0\u00a0}\n\u00a0\u00a0else\n\u00a0\u00a0\u00a0\u00a0return\u00a0this.daysOverdrawn\u00a0*\u00a01.75\u037e\n}\nComing\u00a0up\u00a0are\u00a0changes\u00a0that\u00a0lead\u00a0to\u00a0different\u00a0types\u00a0of\u00a0account\u00a0having\u00a0different\nalgorithms\u00a0for\u00a0determining\u00a0the\u00a0charge.\u00a0Thus\u00a0it\u00a0seems\u00a0natural\u00a0to\u00a0move\noverdraftCharge\u00a0to\u00a0the\u00a0account\u00a0type\u00a0class.\nThe\u00a0first\u00a0step\u00a0is\u00a0to\u00a0look\u00a0at\u00a0the\u00a0features\u00a0that\u00a0the\u00a0overdraftCharge\u00a0method\u00a0uses\u00a0and\nconsider\u00a0whether\u00a0it\u00a0is\u00a0worth\u00a0moving\u00a0a\u00a0batch\u00a0of\u00a0methods\u00a0together.\u00a0In\u00a0this\u00a0case\u00a0I\u00a0need\u00a0the\ndaysOverdrawn\u00a0method\u00a0to\u00a0remain\u00a0on\u00a0the\u00a0account\u00a0class,\u00a0because\u00a0that\u00a0will\u00a0vary\u00a0with\nindividual\u00a0accounts.\nwww.EBooksWorld.ir\n", "page": 232, "type": "text", "section": "Page 232"}
{"text": "Next,\u00a0I\u00a0copy\u00a0the\u00a0method\u00a0body\u00a0over\u00a0to\u00a0the\u00a0account\u00a0type\u00a0and\u00a0get\u00a0it\u00a0to\u00a0fit.\nclass\u00a0AccountType\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\noverdraftCharge(daysOverdrawn)\u00a0{\n\u00a0\u00a0if\u00a0(this.isPremium)\u00a0{\n\u00a0\u00a0\u00a0\u00a0const\u00a0baseCharge\u00a0=\u00a010\u037e\n\u00a0\u00a0\u00a0\u00a0if\u00a0(daysOverdrawn\u00a0<=\u00a07)\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0return\u00a0baseCharge\u037e\n\u00a0\u00a0\u00a0\u00a0else\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0return\u00a0baseCharge\u00a0+\u00a0(daysOverdrawn\u00a0\u00ad\u00a07)\u00a0*\u00a00.85\u037e\n\u00a0\u00a0}\n\u00a0\u00a0else\n\u00a0\u00a0\u00a0\u00a0return\u00a0daysOverdrawn\u00a0*\u00a01.75\u037e\n}\nIn\u00a0order\u00a0to\u00a0get\u00a0the\u00a0method\u00a0to\u00a0fit\u00a0in\u00a0its\u00a0new\u00a0location,\u00a0I\u00a0need\u00a0to\u00a0deal\u00a0with\u00a0two\u00a0call\u00a0targets\nthat\u00a0change\u00a0their\u00a0scope.\u00a0isPremium\u00a0is\u00a0now\u00a0a\u00a0simple\u00a0call\u00a0on\u00a0this.\u00a0With\ndaysOverdrawn\u00a0I\u00a0have\u00a0to\u00a0decide\u2014do\u00a0I\u00a0pass\u00a0the\u00a0value\u00a0or\u00a0do\u00a0I\u00a0pass\u00a0the\u00a0account?\u00a0For\u00a0the\nmoment,\u00a0I\u00a0just\u00a0pass\u00a0the\u00a0simple\u00a0value\u00a0but\u00a0I\u00a0may\u00a0well\u00a0change\u00a0this\u00a0in\u00a0the\u00a0future\u00a0if\u00a0I\u00a0require\nmore\u00a0than\u00a0just\u00a0the\u00a0days\u00a0overdrawn\u00a0from\u00a0the\u00a0account\u2014especially\u00a0if\u00a0what\u00a0I\u00a0want\u00a0from\u00a0the\naccount\u00a0varies\u00a0with\u00a0the\u00a0account\u00a0type.\nNext,\u00a0I\u00a0replace\u00a0the\u00a0original\u00a0method\u00a0body\u00a0with\u00a0a\u00a0delegating\u00a0call.\nclass\u00a0Account\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nget\u00a0bankCharge()\u00a0{\n\u00a0\u00a0let\u00a0result\u00a0=\u00a04.5\u037e\n\u00a0\u00a0if\u00a0(this._daysOverdrawn\u00a0>\u00a00)\u00a0result\u00a0+=\u00a0this.overdraftCharge\u037e\n\u00a0\u00a0return\u00a0result\u037e\n}\nget\u00a0overdraftCharge()\u00a0{\n\u00a0\u00a0return\u00a0this.type.overdraftCharge(this.daysOverdrawn)\u037e\n}\nThen\u00a0comes\u00a0the\u00a0decision\u00a0of\u00a0whether\u00a0to\u00a0leave\u00a0the\u00a0delegation\u00a0in\u00a0place\u00a0or\u00a0to\u00a0inline\noverdraftCharge.\u00a0Inlining\u00a0results\u00a0in:\nclass\u00a0Account\u2026\nwww.EBooksWorld.ir\n", "page": 233, "type": "text", "section": "Page 233"}
{"text": "Click\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nget\u00a0bankCharge()\u00a0{\n\u00a0\u00a0let\u00a0result\u00a0=\u00a04.5\u037e\n\u00a0\u00a0if\u00a0(this._daysOverdrawn\u00a0>\u00a00)\n\u00a0\u00a0\u00a0\u00a0result\u00a0+=\u00a0this.type.overdraftCharge(this.daysOverdrawn)\u037e\n\u00a0\u00a0return\u00a0result\u037e\n}\nIn\u00a0the\u00a0earlier\u00a0steps,\u00a0I\u00a0passed\u00a0daysOverdrawn\u00a0as\u00a0a\u00a0parameter\u2014but\u00a0if\u00a0there\u2019s\u00a0a\u00a0lot\u00a0of\ndata\u00a0from\u00a0the\u00a0account\u00a0to\u00a0pass,\u00a0I\u00a0might\u00a0prefer\u00a0to\u00a0pass\u00a0the\u00a0account\u00a0itself.\nclass\u00a0Account\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nget\u00a0bankCharge()\u00a0{\n\u00a0\u00a0let\u00a0result\u00a0=\u00a04.5\u037e\n\u00a0\u00a0if\u00a0(this._daysOverdrawn\u00a0>\u00a00)\u00a0result\u00a0+=\u00a0this.overdraftCharge\u037e\n\u00a0\u00a0return\u00a0result\u037e\n}\nget\u00a0overdraftCharge()\u00a0{\n\u00a0\u00a0return\u00a0this.type.overdraftCharge(this)\u037e\n}\nclass\u00a0AccountType\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\noverdraftCharge(account)\u00a0{\n\u00a0\u00a0if\u00a0(this.isPremium)\u00a0{\n\u00a0\u00a0\u00a0\u00a0const\u00a0baseCharge\u00a0=\u00a010\u037e\n\u00a0\u00a0\u00a0\u00a0if\u00a0(account.day>sOverdrawn\u00a0<=\u00a07)\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0return\u00a0baseCharge\u037e\n\u00a0\u00a0\u00a0\u00a0else\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0return\u00a0baseCharge\u00a0+\u00a0(account.daysOverdrawn\u00a0\u00ad\u00a07)\u00a0*\u00a00.85\u037e\n\u00a0\u00a0}\n\u00a0\u00a0else\n\u00a0\u00a0\u00a0\u00a0return\u00a0account.daysOverdrawn\u00a0*\u00a01.75\u037e\n}\nMOVE FIELD\nwww.EBooksWorld.ir\n", "page": 234, "type": "text", "section": "Page 234"}
{"text": "Motivation\nProgramming\u00a0involves\u00a0writing\u00a0a\u00a0lot\u00a0of\u00a0code\u00a0that\u00a0implements\u00a0behavior\u2014but\u00a0the\u00a0strength\nof\u00a0a\u00a0program\u00a0is\u00a0really\u00a0founded\u00a0on\u00a0its\u00a0data\u00a0structures.\u00a0If\u00a0I\u00a0have\u00a0a\u00a0good\u00a0set\u00a0of\u00a0data\nstructures\u00a0that\u00a0match\u00a0the\u00a0problem,\u00a0then\u00a0my\u00a0behavior\u00a0code\u00a0is\u00a0simple\u00a0and\nstraightforward.\u00a0But\u00a0poor\u00a0data\u00a0structures\u00a0lead\u00a0to\u00a0lots\u00a0of\u00a0code\u00a0whose\u00a0job\u00a0is\u00a0merely\ndealing\u00a0with\u00a0the\u00a0poor\u00a0data.\u00a0And\u00a0it\u2019s\u00a0not\u00a0just\u00a0messier\u00a0code\u00a0that\u2019s\u00a0harder\u00a0to\u00a0understand\u037e\u00a0it\nalso\u00a0means\u00a0the\u00a0data\u00a0structures\u00a0obscure\u00a0what\u00a0the\u00a0program\u00a0is\u00a0doing.\nSo,\u00a0data\u00a0structures\u00a0are\u00a0important\u2014but\u00a0like\u00a0most\u00a0aspects\u00a0of\u00a0programming\u00a0they\u00a0are\u00a0hard\nto\u00a0get\u00a0right.\u00a0I\u00a0do\u00a0make\u00a0an\u00a0initial\u00a0analysis\u00a0to\u00a0figure\u00a0out\u00a0the\u00a0best\u00a0data\u00a0structures,\u00a0and\u00a0I\u2019ve\nfound\u00a0that\u00a0experience\u00a0and\u00a0techniques\u00a0like\u00a0domain\u00addriven\u00a0design\u00a0have\u00a0improved\u00a0my\nability\u00a0to\u00a0do\u00a0that.\u00a0But\u00a0despite\u00a0all\u00a0my\u00a0skill\u00a0and\u00a0experience,\u00a0I\u00a0still\u00a0find\u00a0that\u00a0I\u00a0frequently\nmake\u00a0mistakes\u00a0in\u00a0that\u00a0initial\u00a0design.\u00a0In\u00a0the\u00a0process\u00a0of\u00a0programming,\u00a0I\u00a0learn\u00a0more\u00a0about\nthe\u00a0problem\u00a0domain\u00a0and\u00a0my\u00a0data\u00a0structures.\u00a0A\u00a0design\u00a0decision\u00a0that\u00a0is\u00a0reasonable\u00a0and\ncorrect\u00a0one\u00a0week\u00a0can\u00a0become\u00a0wrong\u00a0in\u00a0another.\nAs\u00a0soon\u00a0as\u00a0I\u00a0realize\u00a0that\u00a0a\u00a0data\u00a0structure\u00a0isn\u2019t\u00a0right,\u00a0it\u2019s\u00a0vital\u00a0to\u00a0change\u00a0it.\u00a0If\u00a0I\u00a0leave\u00a0my\ndata\u00a0structures\u00a0with\u00a0their\u00a0blemishes,\u00a0those\u00a0blemishes\u00a0will\u00a0confuse\u00a0my\u00a0thinking\u00a0and\ncomplicate\u00a0my\u00a0code\u00a0far\u00a0into\u00a0the\u00a0future.\nI\u00a0may\u00a0seek\u00a0to\u00a0move\u00a0data\u00a0because\u00a0I\u00a0find\u00a0I\u00a0always\u00a0need\u00a0to\u00a0pass\u00a0a\u00a0field\u00a0from\u00a0one\u00a0record\nwhenever\u00a0I\u00a0pass\u00a0another\u00a0record\u00a0to\u00a0a\u00a0function.\u00a0Pieces\u00a0of\u00a0data\u00a0that\u00a0are\u00a0always\u00a0passed\u00a0to\nfunctions\u00a0together\u00a0are\u00a0usually\u00a0best\u00a0put\u00a0in\u00a0a\u00a0single\u00a0record\u00a0in\u00a0order\u00a0to\u00a0clarify\u00a0their\nrelationship.\u00a0Change\u00a0is\u00a0also\u00a0a\u00a0factor\u037e\u00a0if\u00a0a\u00a0change\u00a0in\u00a0one\u00a0record\u00a0causes\u00a0a\u00a0field\u00a0in\u00a0another\nrecord\u00a0to\u00a0change\u00a0too,\u00a0that\u2019s\u00a0a\u00a0sign\u00a0of\u00a0a\u00a0field\u00a0in\u00a0the\u00a0wrong\u00a0place.\u00a0If\u00a0I\u00a0have\u00a0to\u00a0update\u00a0the\nsame\u00a0field\u00a0in\u00a0multiple\u00a0structures,\u00a0that\u2019s\u00a0a\u00a0sign\u00a0that\u00a0it\u00a0should\u00a0move\u00a0to\u00a0another\u00a0place\nwhere\u00a0it\u00a0only\u00a0needs\u00a0to\u00a0be\u00a0updated\u00a0once.\nwww.EBooksWorld.ir\n", "page": 235, "type": "text", "section": "Page 235"}
{"text": "I\u00a0usually\u00a0do\u00a0Move\u00a0Field\u00a0in\u00a0the\u00a0context\u00a0of\u00a0a\u00a0broader\u00a0set\u00a0of\u00a0changes.\u00a0Once\u00a0I\u2019ve\u00a0moved\u00a0a\nfield,\u00a0I\u00a0find\u00a0that\u00a0many\u00a0of\u00a0the\u00a0users\u00a0of\u00a0the\u00a0field\u00a0are\u00a0better\u00a0off\u00a0accessing\u00a0that\u00a0data\u00a0through\nthe\u00a0target\u00a0object\u00a0rather\u00a0than\u00a0the\u00a0original\u00a0source.\u00a0I\u00a0then\u00a0change\u00a0these\u00a0with\u00a0later\nrefactorings.\u00a0Similarly,\u00a0I\u00a0may\u00a0find\u00a0that\u00a0I\u00a0can\u2019t\u00a0do\u00a0Move\u00a0Field\u00a0at\u00a0the\u00a0moment\u00a0due\u00a0to\u00a0the\nway\u00a0the\u00a0data\u00a0is\u00a0used.\u00a0I\u00a0need\u00a0to\u00a0refactor\u00a0some\u00a0usage\u00a0patterns\u00a0first,\u00a0then\u00a0do\u00a0the\u00a0move.\nIn\u00a0my\u00a0description\u00a0so\u00a0far,\u00a0I\u2019m\u00a0saying\u00a0\u201crecord,\u201d\u00a0but\u00a0all\u00a0this\u00a0is\u00a0true\u00a0of\u00a0classes\u00a0and\u00a0objects\ntoo.\u00a0A\u00a0class\u00a0is\u00a0a\u00a0record\u00a0type\u00a0with\u00a0attached\u00a0functions\u2014and\u00a0these\u00a0need\u00a0to\u00a0be\u00a0kept\u00a0healthy\njust\u00a0as\u00a0much\u00a0as\u00a0any\u00a0other\u00a0data.\u00a0The\u00a0attached\u00a0functions\u00a0do\u00a0make\u00a0it\u00a0easier\u00a0to\u00a0move\u00a0data\naround,\u00a0since\u00a0the\u00a0data\u00a0is\u00a0encapsulated\u00a0behind\u00a0accessor\u00a0methods.\u00a0I\u00a0can\u00a0move\u00a0the\u00a0data,\nchange\u00a0the\u00a0accessors,\u00a0and\u00a0clients\u00a0of\u00a0the\u00a0accessors\u00a0will\u00a0still\u00a0work.\u00a0So,\u00a0this\u00a0is\u00a0a\u00a0refactoring\nthat\u2019s\u00a0easier\u00a0to\u00a0do\u00a0if\u00a0you\u00a0have\u00a0classes,\u00a0and\u00a0my\u00a0description\u00a0below\u00a0makes\u00a0that\u00a0assumption.\nIf\u00a0I\u2019m\u00a0using\u00a0bare\u00a0records\u00a0that\u00a0don\u2019t\u00a0support\u00a0encapsulation,\u00a0I\u00a0can\u00a0still\u00a0make\u00a0a\u00a0change\u00a0like\nthis,\u00a0but\u00a0it\u00a0is\u00a0more\u00a0tricky.\nMechanics\nEnsure\u00a0the\u00a0source\u00a0field\u00a0is\u00a0encapsulated.\nTest.\nCreate\u00a0a\u00a0field\u00a0(and\u00a0accessors)\u00a0in\u00a0the\u00a0target.\nRun\u00a0static\u00a0checks.\nEnsure\u00a0there\u00a0is\u00a0a\u00a0reference\u00a0from\u00a0the\u00a0source\u00a0object\u00a0to\u00a0the\u00a0target\u00a0object.\nAn\u00a0existing\u00a0field\u00a0or\u00a0method\u00a0may\u00a0give\u00a0you\u00a0the\u00a0target.\u00a0If\u00a0not,\u00a0see\u00a0if\u00a0you\u00a0can\u00a0easily\ncreate\u00a0a\u00a0method\u00a0that\u00a0will\u00a0do\u00a0so.\u00a0Failing\u00a0that,\u00a0you\u00a0may\u00a0need\u00a0to\u00a0create\u00a0a\u00a0new\u00a0field\u00a0in\nthe\u00a0source\u00a0object\u00a0that\u00a0can\u00a0store\u00a0the\u00a0target.\u00a0This\u00a0may\u00a0be\u00a0a\u00a0permanent\u00a0change,\u00a0but\u00a0you\ncan\u00a0also\u00a0do\u00a0it\u00a0temporarily\u00a0until\u00a0you\u00a0have\u00a0done\u00a0enough\u00a0refactoring\u00a0in\u00a0the\u00a0broader\ncontext.\nAdjust\u00a0accessors\u00a0to\u00a0use\u00a0the\u00a0target\u00a0field.\nIf\u00a0the\u00a0target\u00a0is\u00a0shared\u00a0between\u00a0source\u00a0objects,\u00a0consider\u00a0first\u00a0updating\u00a0the\u00a0setter\u00a0to\nmodify\u00a0both\u00a0target\u00a0and\u00a0source\u00a0fields,\u00a0followed\u00a0by\u00a0Introduce\u00a0Assertion\u00a0(302)\u00a0to\ndetect\u00a0inconsistent\u00a0updates.\u00a0Once\u00a0you\u00a0determine\u00a0all\u00a0is\u00a0well,\u00a0finish\u00a0changing\u00a0the\naccessors\u00a0to\u00a0use\u00a0the\u00a0target\u00a0field.\nTest.\nwww.EBooksWorld.ir\n", "page": 236, "type": "text", "section": "Page 236"}
{"text": "Remove\u00a0the\u00a0source\u00a0field.\nTest.\nExample\nI\u2019m\u00a0starting\u00a0here\u00a0with\u00a0this\u00a0customer\u00a0and\u00a0contract:\nclass\u00a0Customer\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nconstructor(name,\u00a0discountRate)\u00a0{\n\u00a0\u00a0this._name\u00a0=\u00a0name\u037e\n\u00a0\u00a0this._discountRate\u00a0=\u00a0discountRate\u037e\n\u00a0\u00a0this._contract\u00a0=\u00a0new\u00a0CustomerContract(dateToday())\u037e\n}\nget\u00a0discountRate()\u00a0{return\u00a0this._discountRate\u037e}\nbecomePreferred()\u00a0{\n\u00a0\u00a0this._discountRate\u00a0+=\u00a00.03\u037e\n\u00a0\u00a0//\u00a0other\u00a0nice\u00a0things\n}\napplyDiscount(amount)\u00a0{\n\u00a0\u00a0return\u00a0amount.subtract(amount.multiply(this._discountRate))\u037e\n}\nclass\u00a0CustomerContract\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nconstructor(startDate)\u00a0{\n\u00a0\u00a0this._startDate\u00a0=\u00a0startDate\u037e\n}\nI\u00a0want\u00a0to\u00a0move\u00a0the\u00a0discount\u00a0rate\u00a0field\u00a0from\u00a0the\u00a0customer\u00a0to\u00a0the\u00a0customer\u00a0contract.\nThe\u00a0first\u00a0thing\u00a0I\u00a0need\u00a0to\u00a0use\u00a0is\u00a0Encapsulate\u00a0Variable\u00a0(132)\u00a0to\u00a0encapsulate\u00a0access\u00a0to\u00a0the\ndiscount\u00a0rate\u00a0field.\nclass\u00a0Customer\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nconstructor(name,\u00a0discountRate)\u00a0{\n\u00a0\u00a0this._name\u00a0=\u00a0name\u037e\nwww.EBooksWorld.ir\n", "page": 237, "type": "text", "section": "Page 237"}
{"text": "\u00a0\u00a0this._setDiscountRate(discountRate)\u037e\n\u00a0\u00a0this._contract\u00a0=\u00a0new\u00a0CustomerContract(dateToday())\u037e\n}\nget\u00a0discountRate()\u00a0{return\u00a0this._discountRate\u037e}\n_setDiscountRate(aNumber)\u00a0{this._discountRate\u00a0=\u00a0aNumber\u037e}\nbecomePreferred()\u00a0{\n\u00a0\u00a0this._setDiscountRate(this.discountRate\u00a0+\u00a00.03)\u037e\n\u00a0\u00a0//\u00a0other\u00a0nice\u00a0things\n}\napplyDiscount(amount)\u00a0{\n\u00a0\u00a0return\u00a0amount.subtract(amount.multiply(this.discountRate))\u037e\n}\nI\u00a0use\u00a0a\u00a0method\u00a0to\u00a0update\u00a0the\u00a0discount\u00a0rate,\u00a0rather\u00a0than\u00a0a\u00a0property\u00a0setter,\u00a0as\u00a0I\u00a0don\u2019t\u00a0want\nto\u00a0make\u00a0a\u00a0public\u00a0setter\u00a0for\u00a0the\u00a0discount\u00a0rate.\nI\u00a0add\u00a0a\u00a0field\u00a0and\u00a0accessors\u00a0to\u00a0the\u00a0customer\u00a0contract.\nclass\u00a0CustomerContract\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nconstructor(startDate,\u00a0discountRate)\u00a0{\n\u00a0\u00a0this._startDate\u00a0=\u00a0startDate\u037e\n\u00a0\u00a0this._discountRate\u00a0=\u00a0discountRate\u037e\n}\nget\u00a0discountRate()\u00a0\u00a0\u00a0\u00a0{return\u00a0this._discountRate\u037e}\nset\u00a0discountRate(arg)\u00a0{this._discountRate\u00a0=\u00a0arg\u037e}\nI\u00a0now\u00a0modify\u00a0the\u00a0accessors\u00a0on\u00a0customer\u00a0to\u00a0use\u00a0the\u00a0new\u00a0field.\u00a0When\u00a0I\u00a0did\u00a0that,\u00a0I\u00a0got\u00a0an\nerror:\u00a0\u201cCannot\u00a0set\u00a0property\u00a0\u2019discountRate\u2019\u00a0of\u00a0undefined\u201d.\u00a0This\u00a0was\u00a0because\n_setDiscountRate\u00a0was\u00a0called\u00a0before\u00a0I\u00a0created\u00a0the\u00a0contract\u00a0object\u00a0in\u00a0the\u00a0constructor.\nTo\u00a0fix\u00a0that,\u00a0I\u00a0first\u00a0reverted\u00a0to\u00a0the\u00a0previous\u00a0state,\u00a0then\u00a0used\u00a0Slide\u00a0Statements\u00a0(223)\u00a0to\nmove\u00a0the\u00a0_setDiscountRate\u00a0after\u00a0creating\u00a0the\u00a0contract.\nclass\u00a0Customer\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nconstructor(name,\u00a0discountRate)\u00a0{\n\u00a0\u00a0this._name\u00a0=\u00a0name\u037e\n\u00a0\u00a0this._setDiscountRate(discountRate)\u037e\n\u00a0\u00a0this._contract\u00a0=\u00a0new\u00a0CustomerContract(dateToday())\u037e\n}\nwww.EBooksWorld.ir\n", "page": 238, "type": "text", "section": "Page 238"}
{"text": "I\u00a0tested\u00a0that,\u00a0then\u00a0changed\u00a0the\u00a0accessors\u00a0again\u00a0to\u00a0use\u00a0the\u00a0contract.\nclass\u00a0Customer\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nget\u00a0discountRate()\u00a0{return\u00a0this._contract.discountRate\u037e}\n_setDiscountRate(aNumber)\u00a0{this._contract.discountRate\u00a0=\u00a0aNumber\u037e}\nSince\u00a0I\u2019m\u00a0using\u00a0JavaScript,\u00a0there\u00a0is\u00a0no\u00a0declared\u00a0source\u00a0field,\u00a0so\u00a0I\u00a0don\u2019t\u00a0need\u00a0to\u00a0remove\nanything\u00a0further.\nChanging a Bare Record\nThis\u00a0refactoring\u00a0is\u00a0generally\u00a0easier\u00a0with\u00a0objects,\u00a0since\u00a0encapsulation\u00a0provides\u00a0a\u00a0natural\nway\u00a0to\u00a0wrap\u00a0data\u00a0access\u00a0in\u00a0methods.\u00a0If\u00a0I\u00a0have\u00a0many\u00a0functions\u00a0accessing\u00a0a\u00a0bare\u00a0record,\nthen,\u00a0while\u00a0it\u2019s\u00a0still\u00a0a\u00a0valuable\u00a0refactoring,\u00a0it\u00a0is\u00a0decidedly\u00a0more\u00a0tricky.\nI\u00a0can\u00a0create\u00a0accessor\u00a0functions\u00a0and\u00a0modify\u00a0all\u00a0the\u00a0reads\u00a0and\u00a0writes\u00a0to\u00a0use\u00a0them.\u00a0If\u00a0the\nfield\u00a0that\u2019s\u00a0being\u00a0moved\u00a0is\u00a0immutable,\u00a0I\u00a0can\u00a0update\u00a0both\u00a0the\u00a0source\u00a0and\u00a0the\u00a0target\u00a0fields\nwhen\u00a0I\u00a0set\u00a0its\u00a0value\u00a0and\u00a0gradually\u00a0migrate\u00a0reads.\u00a0Still,\u00a0if\u00a0possible,\u00a0my\u00a0first\u00a0move\u00a0would\nbe\u00a0to\u00a0use\u00a0Encapsulate\u00a0Record\u00a0(162)\u00a0to\u00a0turn\u00a0the\u00a0record\u00a0into\u00a0a\u00a0class\u00a0so\u00a0I\u00a0can\u00a0make\u00a0the\nchange\u00a0more\u00a0easily.\nExample: Moving to a Shared Object\nNow,\u00a0let\u2019s\u00a0consider\u00a0a\u00a0different\u00a0case.\u00a0Here\u2019s\u00a0an\u00a0account\u00a0with\u00a0an\u00a0interest\u00a0rate:\nclass\u00a0Account\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nconstructor(number,\u00a0type,\u00a0interestRate)\u00a0{\n\u00a0\u00a0this._number\u00a0=\u00a0number\u037e\n\u00a0\u00a0this._type\u00a0=\u00a0type\u037e\n\u00a0\u00a0this._interestRate\u00a0=\u00a0interestRate\u037e\n}\nget\u00a0interestRate()\u00a0{return\u00a0this._interestRate\u037e}\nclass\u00a0AccountType\u2026\nconstructor(nameString)\u00a0{\n\u00a0\u00a0this._name\u00a0=\u00a0nameString\u037e\nwww.EBooksWorld.ir\n", "page": 239, "type": "text", "section": "Page 239"}
{"text": "}\nI\u00a0want\u00a0to\u00a0change\u00a0things\u00a0so\u00a0that\u00a0an\u00a0account\u2019s\u00a0interest\u00a0rate\u00a0is\u00a0determined\u00a0from\u00a0its\u00a0account\ntype.\nThe\u00a0access\u00a0to\u00a0the\u00a0interest\u00a0rate\u00a0is\u00a0already\u00a0nicely\u00a0encapsulated,\u00a0so\u00a0I\u2019ll\u00a0just\u00a0create\u00a0the\u00a0field\nand\u00a0an\u00a0appropriate\u00a0accessor\u00a0on\u00a0the\u00a0account\u00a0type.\nclass\u00a0AccountType\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nconstructor(nameString,\u00a0interestRate)\u00a0{\n\u00a0\u00a0this._name\u00a0=\u00a0nameString\u037e\n\u00a0\u00a0this._interestRate\u00a0=\u00a0interestRate\u037e\n}\nget\u00a0interestRate()\u00a0{return\u00a0this._interestRate\u037e}\nBut\u00a0there\u00a0is\u00a0a\u00a0potential\u00a0problem\u00a0when\u00a0I\u00a0update\u00a0the\u00a0accesses\u00a0from\u00a0account.\u00a0Before\u00a0this\nrefactoring,\u00a0each\u00a0account\u00a0had\u00a0its\u00a0own\u00a0interest\u00a0rate.\u00a0Now,\u00a0I\u00a0want\u00a0all\u00a0accounts\u00a0to\u00a0share\nthe\u00a0interest\u00a0rates\u00a0of\u00a0their\u00a0account\u00a0type.\u00a0If\u00a0all\u00a0the\u00a0accounts\u00a0of\u00a0the\u00a0same\u00a0type\u00a0already\u00a0have\nthe\u00a0same\u00a0interest\u00a0rate,\u00a0then\u00a0there\u2019s\u00a0no\u00a0change\u00a0in\u00a0observable\u00a0behavior,\u00a0so\u00a0I\u2019m\u00a0fine\u00a0with\nthe\u00a0refactoring.\u00a0But\u00a0if\u00a0there\u2019s\u00a0an\u00a0account\u00a0with\u00a0a\u00a0different\u00a0interest\u00a0rate,\u00a0it\u2019s\u00a0no\u00a0longer\u00a0a\nrefactoring.\u00a0If\u00a0my\u00a0account\u00a0data\u00a0is\u00a0held\u00a0in\u00a0a\u00a0database,\u00a0I\u00a0should\u00a0check\u00a0the\u00a0database\u00a0to\nensure\u00a0that\u00a0all\u00a0my\u00a0accounts\u00a0have\u00a0the\u00a0rate\u00a0matching\u00a0their\u00a0type.\u00a0I\u00a0can\u00a0also\u00a0Introduce\nAssertion\u00a0(302)\u00a0in\u00a0the\u00a0account\u00a0class.\nclass\u00a0Account\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nconstructor(number,\u00a0type,\u00a0interestRate)\u00a0{\n\u00a0\u00a0this._number\u00a0=\u00a0number\u037e\n\u00a0\u00a0this._type\u00a0=\u00a0type\u037e\n\u00a0\u00a0assert(interestRate\u00a0===\u00a0this._type.interestRate)\u037e\n\u00a0\u00a0this._interestRate\u00a0=\u00a0interestRate\u037e\n}\nget\u00a0interestRate()\u00a0{return\u00a0this._interestRate\u037e}\nI\u00a0might\u00a0run\u00a0the\u00a0system\u00a0for\u00a0a\u00a0while\u00a0with\u00a0this\u00a0assertion\u00a0in\u00a0place\u00a0to\u00a0see\u00a0if\u00a0I\u00a0get\u00a0an\u00a0error.\u00a0Or,\ninstead\u00a0of\u00a0adding\u00a0an\u00a0assertion,\u00a0I\u00a0might\u00a0log\u00a0the\u00a0problem.\u00a0Once\u00a0I\u2019m\u00a0confident\u00a0that\u00a0I\u2019m\u00a0not\nintroducing\u00a0an\u00a0observable\u00a0change,\u00a0I\u00a0can\u00a0change\u00a0the\u00a0access,\u00a0removing\u00a0the\u00a0update\u00a0from\nwww.EBooksWorld.ir\n", "page": 240, "type": "text", "section": "Page 240"}
{"text": "the\u00a0account\u00a0completely.\nclass\u00a0Account\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nconstructor(number,\u00a0type)\u00a0{\n\u00a0\u00a0this._number\u00a0=\u00a0number\u037e\n\u00a0\u00a0this._type\u00a0=\u00a0type\u037e\n}\nget\u00a0interestRate()\u00a0{return\u00a0this._type.interestRate\u037e}\nMOVE STATEMENTS INTO FUNCTION\ninverse\u00a0of:\u00a0Move\u00a0Statements\u00a0to\u00a0Callers\u00a0(217)\nMotivation\nwww.EBooksWorld.ir\n", "page": 241, "type": "text", "section": "Page 241"}
{"text": "Motivation\nRemoving\u00a0duplication\u00a0is\u00a0one\u00a0of\u00a0the\u00a0best\u00a0rules\u00a0of\u00a0thumb\u00a0of\u00a0healthy\u00a0code.\u00a0If\u00a0I\u00a0see\u00a0the\nsame\u00a0code\u00a0executed\u00a0every\u00a0time\u00a0I\u00a0call\u00a0a\u00a0particular\u00a0function,\u00a0I\u00a0look\u00a0to\u00a0combine\u00a0that\nrepeating\u00a0code\u00a0into\u00a0the\u00a0function\u00a0itself.\u00a0That\u00a0way,\u00a0any\u00a0future\u00a0modifications\u00a0to\u00a0the\nrepeating\u00a0code\u00a0can\u00a0be\u00a0done\u00a0in\u00a0one\u00a0place\u00a0and\u00a0used\u00a0by\u00a0all\u00a0the\u00a0callers.\u00a0Should\u00a0the\u00a0code\nvary\u00a0in\u00a0the\u00a0future,\u00a0I\u00a0can\u00a0easily\u00a0move\u00a0it\u00a0(or\u00a0some\u00a0of\u00a0it)\u00a0out\u00a0again\u00a0with\u00a0Move\u00a0Statements\nto\u00a0Callers\u00a0(217).\nI\u00a0move\u00a0statements\u00a0into\u00a0a\u00a0function\u00a0when\u00a0I\u00a0can\u00a0best\u00a0understand\u00a0these\u00a0statements\u00a0as\u00a0part\nof\u00a0the\u00a0called\u00a0function.\u00a0If\u00a0they\u00a0don\u2019t\u00a0make\u00a0sense\u00a0as\u00a0part\u00a0of\u00a0the\u00a0called\u00a0function,\u00a0but\u00a0still\nshould\u00a0be\u00a0called\u00a0with\u00a0it,\u00a0I\u2019ll\u00a0simply\u00a0use\u00a0Extract\u00a0Function\u00a0(106)\u00a0on\u00a0the\u00a0statements\u00a0and\nthe\u00a0called\u00a0function.\u00a0That\u2019s\u00a0essentially\u00a0the\u00a0same\u00a0process\u00a0as\u00a0I\u00a0describe\u00a0below,\u00a0but\u00a0without\nthe\u00a0inline\u00a0and\u00a0rename\u00a0steps.\u00a0It\u2019s\u00a0not\u00a0unusual\u00a0to\u00a0do\u00a0that\u00a0and\u00a0then,\u00a0after\u00a0later\u00a0reflection,\ncarry\u00a0out\u00a0those\u00a0final\u00a0steps.\nMechanics\nIf\u00a0the\u00a0repetitive\u00a0code\u00a0isn\u2019t\u00a0adjacent\u00a0to\u00a0the\u00a0call\u00a0of\u00a0the\u00a0target\u00a0function,\u00a0use\u00a0Slide\nStatements\u00a0(223)\u00a0to\u00a0get\u00a0it\u00a0adjacent.\nIf\u00a0the\u00a0target\u00a0function\u00a0is\u00a0only\u00a0called\u00a0by\u00a0the\u00a0source\u00a0function,\u00a0just\u00a0cut\u00a0the\u00a0code\u00a0from\u00a0the\nsource,\u00a0paste\u00a0it\u00a0into\u00a0the\u00a0target,\u00a0test,\u00a0and\u00a0ignore\u00a0the\u00a0rest\u00a0of\u00a0these\u00a0mechanics.\nIf\u00a0you\u00a0have\u00a0more\u00a0callers,\u00a0use\u00a0Extract\u00a0Function\u00a0(106)\u00a0on\u00a0one\u00a0of\u00a0the\u00a0call\u00a0sites\u00a0to\nextract\u00a0both\u00a0the\u00a0call\u00a0to\u00a0the\u00a0target\u00a0function\u00a0and\u00a0the\u00a0statements\u00a0you\u00a0wish\u00a0to\u00a0move\u00a0into\nit.\u00a0Give\u00a0it\u00a0a\u00a0name\u00a0that\u2019s\u00a0transient,\u00a0but\u00a0easy\u00a0to\u00a0grep.\nConvert\u00a0every\u00a0other\u00a0call\u00a0to\u00a0use\u00a0the\u00a0new\u00a0function.\u00a0Test\u00a0after\u00a0each\u00a0conversion.\nWhen\u00a0all\u00a0the\u00a0original\u00a0calls\u00a0use\u00a0the\u00a0new\u00a0function,\u00a0use\u00a0Inline\u00a0Function\u00a0(115)\u00a0to\u00a0inline\nthe\u00a0original\u00a0function\u00a0completely\u00a0into\u00a0the\u00a0new\u00a0function,\u00a0removing\u00a0the\u00a0original\nfunction.\nRename\u00a0Function\u00a0(124)\u00a0to\u00a0change\u00a0the\u00a0name\u00a0of\u00a0the\u00a0new\u00a0function\u00a0to\u00a0the\u00a0same\u00a0name\nas\u00a0the\u00a0original\u00a0function.\nOr\u00a0to\u00a0a\u00a0better\u00a0name,\u00a0if\u00a0there\u00a0is\u00a0one.\nExample\nI\u2019ll\u00a0start\u00a0with\u00a0this\u00a0code\u00a0to\u00a0emit\u00a0HTML\u00a0for\u00a0data\u00a0about\u00a0a\u00a0photo:\nwww.EBooksWorld.ir\n", "page": 242, "type": "text", "section": "Page 242"}
{"text": "Click\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0renderPerson(outStream,\u00a0person)\u00a0{\n\u00a0\u00a0const\u00a0result\u00a0=\u00a0[]\u037e\n\u00a0\u00a0result.push(`<p>${person.name}</p>`)\u037e\n\u00a0\u00a0result.push(renderPhoto(person.photo))\u037e\n\u00a0\u00a0result.push(`<p>title:\u00a0${person.photo.title}</p>`)\u037e\n\u00a0\u00a0result.push(emitPhotoData(person.photo))\u037e\n\u00a0\u00a0return\u00a0result.join(\"\\n\")\u037e\n}\nfunction\u00a0photoDiv(p)\u00a0{\n\u00a0\u00a0return\u00a0[\n\u00a0\u00a0\u00a0\u00a0\"<div>\",\n\u00a0\u00a0\u00a0\u00a0`<p>title:\u00a0${p.title}</p>`,\n\u00a0\u00a0\u00a0\u00a0emitPhotoData(p),\n\u00a0\u00a0\u00a0\u00a0\"</div>\",\n\u00a0\u00a0].join(\"\\n\")\u037e\n}\nfunction\u00a0emitPhotoData(aPhoto)\u00a0{\n\u00a0\u00a0const\u00a0result\u00a0=\u00a0[]\u037e\n\u00a0\u00a0result.push(`<p>location:\u00a0${aPhoto.location}</p>`)\u037e\n\u00a0\u00a0result.push(`<p>date:\u00a0${aPhoto.date.toDateString()}</p>`)\u037e\n\u00a0\u00a0return\u00a0result.join(\"\\n\")\u037e\n}\nThis\u00a0code\u00a0shows\u00a0two\u00a0calls\u00a0to\u00a0emitPhotoData,\u00a0each\u00a0preceded\u00a0by\u00a0a\u00a0line\u00a0of\u00a0code\u00a0that\u00a0is\nsemantically\u00a0equivalent.\u00a0I\u2019d\u00a0like\u00a0to\u00a0remove\u00a0this\u00a0duplication\u00a0by\u00a0moving\u00a0the\u00a0title\u00a0printing\ninto\u00a0emitPhotoData.\u00a0If\u00a0I\u00a0had\u00a0just\u00a0the\u00a0one\u00a0caller,\u00a0I\u00a0would\u00a0just\u00a0cut\u00a0and\u00a0paste\u00a0the\u00a0code,\nbut\u00a0the\u00a0more\u00a0callers\u00a0I\u00a0have,\u00a0the\u00a0more\u00a0I\u2019m\u00a0inclined\u00a0to\u00a0use\u00a0a\u00a0safer\u00a0procedure.\nI\u00a0begin\u00a0by\u00a0using\u00a0Extract\u00a0Function\u00a0(106)\u00a0on\u00a0one\u00a0of\u00a0the\u00a0callers.\u00a0I\u2019m\u00a0extracting\u00a0the\nstatements\u00a0I\u00a0want\u00a0to\u00a0move\u00a0into\u00a0emitPhotoData,\u00a0together\u00a0with\u00a0the\u00a0call\u00a0to\nemitPhotoData\u00a0itself.\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0photoDiv(p)\u00a0{\n\u00a0\u00a0return\u00a0[\n\u00a0\u00a0\u00a0\u00a0\"<div>\",\n\u00a0\u00a0\u00a0\u00a0zznew(p),\n\u00a0\u00a0\u00a0\u00a0\"</div>\",\n\u00a0\u00a0].join(\"\\n\")\u037e\n}\nfunction\u00a0zznew(p)\u00a0{\n\u00a0\u00a0return\u00a0[\nwww.EBooksWorld.ir\n", "page": 243, "type": "text", "section": "Page 243"}
{"text": "\u00a0\u00a0\u00a0\u00a0`<p>title:\u00a0${p.title}</p>`,\n\u00a0\u00a0\u00a0\u00a0emitPhotoData(p),\n\u00a0\u00a0].join(\"\\n\")\u037e\n}\nI\u00a0can\u00a0now\u00a0look\u00a0at\u00a0the\u00a0other\u00a0callers\u00a0of\u00a0emitPhotoData\u00a0and,\u00a0one\u00a0by\u00a0one,\u00a0replace\u00a0the\ncalls\u00a0and\u00a0the\u00a0preceding\u00a0statements\u00a0with\u00a0calls\u00a0to\u00a0the\u00a0new\u00a0function.\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0renderPerson(outStream,\u00a0person)\u00a0{\n\u00a0\u00a0const\u00a0result\u00a0=\u00a0[]\u037e\n\u00a0\u00a0result.push(`<p>${person.name}</p>`)\u037e\n\u00a0\u00a0result.push(renderPhoto(person.photo))\u037e\n\u00a0\u00a0result.push(zznew(person.photo))\u037e\n\u00a0\u00a0return\u00a0result.join(\"\\n\")\u037e\n}\nNow\u00a0that\u00a0I\u2019ve\u00a0done\u00a0all\u00a0the\u00a0callers,\u00a0I\u00a0use\u00a0Inline\u00a0Function\u00a0(115)\u00a0on\u00a0emitPhotoData:\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0zznew(p)\u00a0{\n\u00a0\u00a0return\u00a0[\n\u00a0\u00a0\u00a0\u00a0`<p>title:\u00a0${p.title}</p>`,\n\u00a0\u00a0\u00a0\u00a0`<p>location:\u00a0${p.location}</p>`,\n\u00a0\u00a0\u00a0\u00a0`<p>date:\u00a0${p.date.toDateString()}</p>`,\n\u00a0\u00a0].join(\"\\n\")\u037e\n}\nand\u00a0finish\u00a0with\u00a0Rename\u00a0Function\u00a0(124):\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0renderPerson(outStream,\u00a0person)\u00a0{\n\u00a0\u00a0const\u00a0result\u00a0=\u00a0[]\u037e\n\u00a0\u00a0result.push(`<p>${person.name}</p>`)\u037e\n\u00a0\u00a0result.push(renderPhoto(person.photo))\u037e\n\u00a0\u00a0result.push(emitPhotoData(person.photo))\u037e\n\u00a0\u00a0return\u00a0result.join(\"\\n\")\u037e\n}\nfunction\u00a0photoDiv(aPhoto)\u00a0{\n\u00a0\u00a0return\u00a0[\n\u00a0\u00a0\u00a0\u00a0\"<div>\",\n\u00a0\u00a0\u00a0\u00a0emitPhotoData(aPhoto),\nwww.EBooksWorld.ir\n", "page": 244, "type": "text", "section": "Page 244"}
{"text": "\u00a0\u00a0\u00a0\u00a0\"</div>\",\n\u00a0\u00a0].join(\"\\n\")\u037e\n}\nfunction\u00a0emitPhotoData(aPhoto)\u00a0{\n\u00a0\u00a0return\u00a0[\n\u00a0\u00a0\u00a0\u00a0`<p>title:\u00a0${aPhoto.title}</p>`,\n\u00a0\u00a0\u00a0\u00a0`<p>location:\u00a0${aPhoto.location}</p>`,\n\u00a0\u00a0\u00a0\u00a0`<p>date:\u00a0${aPhoto.date.toDateString()}</p>`,\n\u00a0\u00a0].join(\"\\n\")\u037e\n}\nI\u00a0also\u00a0make\u00a0the\u00a0parameter\u00a0names\u00a0fit\u00a0my\u00a0convention\u00a0while\u00a0I\u2019m\u00a0at\u00a0it.\nMOVE STATEMENTS TO CALLERS\ninverse\u00a0of:\u00a0Move\u00a0Statements\u00a0into\u00a0Function\u00a0(213)\nMotivation\nFunctions\u00a0are\u00a0the\u00a0basic\u00a0building\u00a0block\u00a0of\u00a0the\u00a0abstractions\u00a0we\u00a0build\u00a0as\u00a0programmers.\nAnd,\u00a0as\u00a0with\u00a0any\u00a0abstraction,\u00a0we\u00a0don\u2019t\u00a0always\u00a0get\u00a0the\u00a0boundaries\u00a0right.\u00a0As\u00a0a\u00a0code\u00a0base\nchanges\u00a0its\u00a0capabilities\u2014as\u00a0most\u00a0useful\u00a0software\u00a0does\u2014we\u00a0often\u00a0find\u00a0our\u00a0abstraction\nwww.EBooksWorld.ir\n", "page": 245, "type": "text", "section": "Page 245"}
{"text": "boundaries\u00a0shift.\u00a0For\u00a0functions,\u00a0that\u00a0means\u00a0that\u00a0what\u00a0might\u00a0once\u00a0have\u00a0been\u00a0a\u00a0cohesive,\natomic\u00a0unit\u00a0of\u00a0behavior\u00a0becomes\u00a0a\u00a0mix\u00a0of\u00a0two\u00a0or\u00a0more\u00a0different\u00a0things.\nOne\u00a0trigger\u00a0for\u00a0this\u00a0is\u00a0when\u00a0common\u00a0behavior\u00a0used\u00a0in\u00a0several\u00a0places\u00a0needs\u00a0to\u00a0vary\u00a0in\nsome\u00a0of\u00a0its\u00a0calls.\u00a0Now,\u00a0we\u00a0need\u00a0to\u00a0move\u00a0the\u00a0varying\u00a0behavior\u00a0out\u00a0of\u00a0the\u00a0function\u00a0to\u00a0its\ncallers.\u00a0In\u00a0this\u00a0case,\u00a0I\u2019ll\u00a0use\u00a0Slide\u00a0Statements\u00a0(223)\u00a0to\u00a0get\u00a0the\u00a0varying\u00a0behavior\u00a0to\u00a0the\nbeginning\u00a0or\u00a0end\u00a0of\u00a0the\u00a0function\u00a0and\u00a0then\u00a0Move\u00a0Statements\u00a0to\u00a0Callers.\u00a0Once\u00a0the\u00a0varying\ncode\u00a0is\u00a0in\u00a0the\u00a0caller,\u00a0I\u00a0can\u00a0change\u00a0it\u00a0when\u00a0necessary.\nMove\u00a0Statements\u00a0to\u00a0Callers\u00a0works\u00a0well\u00a0for\u00a0small\u00a0changes,\u00a0but\u00a0sometimes\u00a0the\nboundaries\u00a0between\u00a0caller\u00a0and\u00a0callee\u00a0need\u00a0complete\u00a0reworking.\u00a0In\u00a0that\u00a0case,\u00a0my\u00a0best\nmove\u00a0is\u00a0to\u00a0use\u00a0Inline\u00a0Function\u00a0(115)\u00a0and\u00a0then\u00a0slide\u00a0and\u00a0extract\u00a0new\u00a0functions\u00a0to\u00a0form\nbetter\u00a0boundaries.\nMechanics\nIn\u00a0simple\u00a0circumstances,\u00a0where\u00a0you\u00a0have\u00a0only\u00a0one\u00a0or\u00a0two\u00a0callers\u00a0and\u00a0a\u00a0simple\nfunction\u00a0to\u00a0call\u00a0from,\u00a0just\u00a0cut\u00a0the\u00a0first\u00a0line\u00a0from\u00a0the\u00a0called\u00a0function\u00a0and\u00a0paste\u00a0(and\nperhaps\u00a0fit)\u00a0it\u00a0into\u00a0the\u00a0callers.\u00a0Test\u00a0and\u00a0you\u2019re\u00a0done.\nOtherwise,\u00a0apply\u00a0Extract\u00a0Function\u00a0(106)\u00a0to\u00a0all\u00a0the\u00a0statements\u00a0that\u00a0you\u00a0don\u2019t\u00a0wish\u00a0to\nmove\u037e\u00a0give\u00a0it\u00a0a\u00a0temporary\u00a0but\u00a0easily\u00a0searchable\u00a0name.\nIf\u00a0the\u00a0function\u00a0is\u00a0a\u00a0method\u00a0that\u00a0is\u00a0overridden\u00a0by\u00a0subclasses,\u00a0do\u00a0the\u00a0extraction\u00a0on\u00a0all\nof\u00a0them\u00a0so\u00a0that\u00a0the\u00a0remaining\u00a0method\u00a0is\u00a0identical\u00a0in\u00a0all\u00a0classes.\u00a0Then\u00a0remove\u00a0the\nsubclass\u00a0methods.\nUse\u00a0Inline\u00a0Function\u00a0(115)\u00a0on\u00a0the\u00a0original\u00a0function.\nApply\u00a0Change\u00a0Function\u00a0Declaration\u00a0(124)\u00a0on\u00a0the\u00a0extracted\u00a0function\u00a0to\u00a0rename\u00a0it\u00a0to\nthe\u00a0original\u00a0name.\nOr\u00a0to\u00a0a\u00a0better\u00a0name,\u00a0if\u00a0you\u00a0can\u00a0think\u00a0of\u00a0one.\nExample\nHere\u2019s\u00a0a\u00a0simple\u00a0case:\u00a0a\u00a0function\u00a0with\u00a0two\u00a0callers.\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0renderPerson(outStream,\u00a0person)\u00a0{\n\u00a0\u00a0outStream.write(`<p>${person.name}</p>\\n`)\u037e\nwww.EBooksWorld.ir\n", "page": 246, "type": "text", "section": "Page 246"}
{"text": "\u00a0\u00a0renderPhoto(outStream,\u00a0person.photo)\u037e\n\u00a0\u00a0emitPhotoData(outStream,\u00a0person.photo)\u037e\n}\nfunction\u00a0listRecentPhotos(outStream,\u00a0photos)\u00a0{\n\u00a0\u00a0photos\n\u00a0\u00a0\u00a0\u00a0.filter(p\u00a0=>\u00a0p.date\u00a0>\u00a0recentDateCutoff())\n\u00a0\u00a0\u00a0\u00a0.forEach(p\u00a0=>\u00a0{\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0outStream.write(\"<div>\\n\")\u037e\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0emitPhotoData(outStream,\u00a0p)\u037e\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0outStream.write(\"</div>\\n\")\u037e\n\u00a0\u00a0\u00a0\u00a0})\u037e\n}\nfunction\u00a0emitPhotoData(outStream,\u00a0photo)\u00a0{\n\u00a0\u00a0outStream.write(`<p>title:\u00a0${photo.title}</p>\\n`)\u037e\n\u00a0\u00a0outStream.write(`<p>date:\u00a0${photo.date.toDateString()}</p>\\n`)\u037e\n\u00a0\u00a0outStream.write(`<p>location:\u00a0${photo.location}</p>\\n`)\u037e\n}\nI\u00a0need\u00a0to\u00a0modify\u00a0the\u00a0software\u00a0so\u00a0that\u00a0listRecentPhotos\u00a0renders\u00a0the\u00a0location\ninformation\u00a0differently\u00a0while\u00a0renderPerson\u00a0stays\u00a0the\u00a0same.\u00a0To\u00a0make\u00a0this\u00a0change\neasier,\u00a0I\u2019ll\u00a0use\u00a0Move\u00a0Statements\u00a0to\u00a0Callers\u00a0on\u00a0the\u00a0final\u00a0line.\nUsually,\u00a0when\u00a0faced\u00a0with\u00a0something\u00a0this\u00a0simple,\u00a0I\u2019ll\u00a0just\u00a0cut\u00a0the\u00a0last\u00a0line\u00a0from\nrenderPerson\u00a0and\u00a0paste\u00a0it\u00a0below\u00a0the\u00a0two\u00a0calls.\u00a0But\u00a0since\u00a0I\u2019m\u00a0explaining\u00a0what\u00a0to\u00a0do\u00a0in\nmore\u00a0tricky\u00a0cases,\u00a0I\u2019ll\u00a0go\u00a0through\u00a0the\u00a0more\u00a0elaborate\u00a0but\u00a0safer\u00a0procedure.\nMy\u00a0first\u00a0step\u00a0is\u00a0to\u00a0use\u00a0Extract\u00a0Function\u00a0(106)\u00a0on\u00a0the\u00a0code\u00a0that\u00a0will\u00a0remain\u00a0in\nemitPhotoData.\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0renderPerson(outStream,\u00a0person)\u00a0{\n\u00a0\u00a0outStream.write(`<p>${person.name}</p>\\n`)\u037e\n\u00a0\u00a0renderPhoto(outStream,\u00a0person.photo)\u037e\n\u00a0\u00a0emitPhotoData(outStream,\u00a0person.photo)\u037e\n}\nfunction\u00a0listRecentPhotos(outStream,\u00a0photos)\u00a0{\n\u00a0\u00a0photos\n\u00a0\u00a0\u00a0\u00a0.filter(p\u00a0=>\u00a0p.date\u00a0>\u00a0recentDateCutoff())\n\u00a0\u00a0\u00a0\u00a0.forEach(p\u00a0=>\u00a0{\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0outStream.write(\"<div>\\n\")\u037e\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0emitPhotoData(outStream,\u00a0p)\u037e\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0outStream.write(\"</div>\\n\")\u037e\n\u00a0\u00a0\u00a0\u00a0})\u037e\n}\nwww.EBooksWorld.ir\n", "page": 247, "type": "text", "section": "Page 247"}
{"text": "function\u00a0emitPhotoData(outStream,\u00a0photo)\u00a0{\n\u00a0\u00a0zztmp(outStream,\u00a0photo)\u037e\n\u00a0\u00a0outStream.write(`<p>location:\u00a0${photo.location}</p>\\n`)\u037e\n}\nfunction\u00a0zztmp(outStream,\u00a0photo)\u00a0{\n\u00a0\u00a0outStream.write(`<p>title:\u00a0${photo.title}</p>\\n`)\u037e\n\u00a0\u00a0outStream.write(`<p>date:\u00a0${photo.date.toDateString()}</p>\\n`)\u037e\n}\nUsually,\u00a0the\u00a0name\u00a0of\u00a0the\u00a0extracted\u00a0function\u00a0is\u00a0only\u00a0temporary,\u00a0so\u00a0I\u00a0don\u2019t\u00a0worry\u00a0about\ncoming\u00a0up\u00a0with\u00a0anything\u00a0meaningful.\u00a0However,\u00a0it\u00a0is\u00a0helpful\u00a0to\u00a0use\u00a0something\u00a0that\u2019s\neasy\u00a0to\u00a0grep.\u00a0I\u00a0can\u00a0test\u00a0at\u00a0this\u00a0point\u00a0to\u00a0ensure\u00a0the\u00a0code\u00a0works\u00a0over\u00a0the\u00a0function\u00a0call\nboundary.\nNow\u00a0I\u00a0use\u00a0Inline\u00a0Function\u00a0(115),\u00a0one\u00a0call\u00a0at\u00a0a\u00a0time.\u00a0I\u00a0start\u00a0with\u00a0renderPerson.\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0renderPerson(outStream,\u00a0person)\u00a0{\n\u00a0\u00a0outStream.write(`<p>${person.name}</p>\\n`)\u037e\n\u00a0\u00a0renderPhoto(outStream,\u00a0person.photo)\u037e\n\u00a0\u00a0zztmp(outStream,\u00a0person.photo)\u037e\n\u00a0\u00a0outStream.write(`<p>location:\u00a0${person.photo.location}</p>\\n`)\u037e\n}\nfunction\u00a0listRecentPhotos(outStream,\u00a0photos)\u00a0{\n\u00a0\u00a0photos\n\u00a0\u00a0\u00a0\u00a0.filter(p\u00a0=>\u00a0p.date\u00a0>\u00a0recentDateCutoff())\n\u00a0\u00a0\u00a0\u00a0.forEach(p\u00a0=>\u00a0{\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0outStream.write(\"<div>\\n\")\u037e\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0emitPhotoData(outStream,\u00a0p)\u037e\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0outStream.write(\"</div>\\n\")\u037e\n\u00a0\u00a0\u00a0\u00a0})\u037e\n}\nfunction\u00a0emitPhotoData(outStream,\u00a0photo)\u00a0{\n\u00a0\u00a0zztmp(outStream,\u00a0photo)\u037e\n\u00a0\u00a0outStream.write(`<p>location:\u00a0${photo.location}</p>\\n`)\u037e\n}\nfunction\u00a0zztmp(outStream,\u00a0photo)\u00a0{\n\u00a0\u00a0outStream.write(`<p>title:\u00a0${photo.title}</p>\\n`)\u037e\n\u00a0\u00a0outStream.write(`<p>date:\u00a0${photo.date.toDateString()}</p>\\n`)\u037e\n}\nI\u00a0test\u00a0again\u00a0to\u00a0ensure\u00a0this\u00a0call\u00a0is\u00a0working\u00a0properly,\u00a0then\u00a0move\u00a0onto\u00a0the\u00a0next.\nwww.EBooksWorld.ir\n", "page": 248, "type": "text", "section": "Page 248"}
{"text": "Click\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0renderPerson(outStream,\u00a0person)\u00a0{\n\u00a0\u00a0outStream.write(`<p>${person.name}</p>\\n`)\u037e\n\u00a0\u00a0renderPhoto(outStream,\u00a0person.photo)\u037e\n\u00a0\u00a0zztmp(outStream,\u00a0person.photo)\u037e\n\u00a0\u00a0outStream.write(`<p>location:\u00a0${person.photo.location}</p>\\n`)\u037e\n}\nfunction\u00a0listRecentPhotos(outStream,\u00a0photos)\u00a0{\n\u00a0\u00a0photos\n\u00a0\u00a0\u00a0\u00a0.filter(p\u00a0=>\u00a0p.date\u00a0>\u00a0recentDateCutoff())\n\u00a0\u00a0\u00a0\u00a0.forEach(p\u00a0=>\u00a0{\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0outStream.write(\"<div>\\n\")\u037e\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0zztmp(outStream,\u00a0p)\u037e\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0outStream.write(`<p>location:\u00a0${p.location}</p>\\n`)\u037e\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0outStream.write(\"</div>\\n\")\u037e\n\u00a0\u00a0\u00a0\u00a0})\u037e\n}\nfunction\u00a0emitPhotoData(outStream,\u00a0photo)\u00a0{\n\u00a0\u00a0zztmp(outStream,\u00a0photo)\u037e\n\u00a0\u00a0outStream.write(`<p>location:\u00a0${photo.location}</p>\\n`)\u037e\n}\nfunction\u00a0zztmp(outStream,\u00a0photo)\u00a0{\n\u00a0\u00a0outStream.write(`<p>title:\u00a0${photo.title}</p>\\n`)\u037e\n\u00a0\u00a0outStream.write(`<p>date:\u00a0${photo.date.toDateString()}</p>\\n`)\u037e\n}\nThen\u00a0I\u00a0can\u00a0delete\u00a0the\u00a0outer\u00a0function,\u00a0completing\u00a0Inline\u00a0Function\u00a0(115).\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0renderPerson(outStream,\u00a0person)\u00a0{\n\u00a0\u00a0outStream.write(`<p>${person.name}</p>\\n`)\u037e\n\u00a0\u00a0renderPhoto(outStream,\u00a0person.photo)\u037e\n\u00a0\u00a0zztmp(outStream,\u00a0person.photo)\u037e\n\u00a0\u00a0outStream.write(`<p>location:\u00a0${person.photo.location}</p>\\n`)\u037e\n}\nfunction\u00a0listRecentPhotos(outStream,\u00a0photos)\u00a0{\n\u00a0\u00a0photos\n\u00a0\u00a0\u00a0\u00a0.filter(p\u00a0=>\u00a0p.date\u00a0>\u00a0recentDateCutoff())\n\u00a0\u00a0\u00a0\u00a0.forEach(p\u00a0=>\u00a0{\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0outStream.write(\"<div>\\n\")\u037e\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0zztmp(outStream,\u00a0p)\u037e\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0outStream.write(`<p>location:\u00a0${p.location}</p>\\n`)\u037e\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0outStream.write(\"</div>\\n\")\u037e\n\u00a0\u00a0\u00a0\u00a0})\u037e\nwww.EBooksWorld.ir\n", "page": 249, "type": "text", "section": "Page 249"}
{"text": "}\nfunction\u00a0emitPhotoData(outStream,\u00a0photo)\u00a0{\n\u00a0\u00a0zztmp(outStream,\u00a0photo)\u037e\n\u00a0\u00a0outStream.write(`<p>location:\u00a0${photo.location}</p>\\n`)\u037e\n}\nfunction\u00a0zztmp(outStream,\u00a0photo)\u00a0{\n\u00a0\u00a0outStream.write(`<p>title:\u00a0${photo.title}</p>\\n`)\u037e\n\u00a0\u00a0outStream.write(`<p>date:\u00a0${photo.date.toDateString()}</p>\\n`)\u037e\n}\nI\u00a0then\u00a0rename\u00a0zztmp\u00a0back\u00a0to\u00a0the\u00a0original\u00a0name.\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0renderPerson(outStream,\u00a0person)\u00a0{\n\u00a0\u00a0outStream.write(`<p>${person.name}</p>\\n`)\u037e\n\u00a0\u00a0renderPhoto(outStream,\u00a0person.photo)\u037e\n\u00a0\u00a0emitPhotoData(outStream,\u00a0person.photo)\u037e\n\u00a0\u00a0outStream.write(`<p>location:\u00a0${person.photo.location}</p>\\n`)\u037e\n}\nfunction\u00a0listRecentPhotos(outStream,\u00a0photos)\u00a0{\n\u00a0\u00a0photos\n\u00a0\u00a0\u00a0\u00a0.filter(p\u00a0=>\u00a0p.date\u00a0>\u00a0recentDateCutoff())\n\u00a0\u00a0\u00a0\u00a0.forEach(p\u00a0=>\u00a0{\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0outStream.write(\"<div>\\n\")\u037e\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0emitPhotoData(outStream,\u00a0p)\u037e\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0outStream.write(`<p>location:\u00a0${p.location}</p>\\n`)\u037e\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0outStream.write(\"</div>\\n\")\u037e\n\u00a0\u00a0\u00a0\u00a0})\u037e\n}\nfunction\u00a0emitPhotoData(outStream,\u00a0photo)\u00a0{\n\u00a0\u00a0outStream.write(`<p>title:\u00a0${photo.title}</p>\\n`)\u037e\n\u00a0\u00a0outStream.write(`<p>date:\u00a0${photo.date.toDateString()}</p>\\n`)\u037e\n}\nREPLACE INLINE CODE WITH FUNCTION CALL\nwww.EBooksWorld.ir\n", "page": 250, "type": "text", "section": "Page 250"}
{"text": "Motivation\nFunctions\u00a0allow\u00a0me\u00a0to\u00a0package\u00a0up\u00a0bits\u00a0of\u00a0behavior.\u00a0This\u00a0is\u00a0useful\u00a0for\u00a0understanding\u2014a\nnamed\u00a0function\u00a0can\u00a0explain\u00a0the\u00a0purpose\u00a0of\u00a0the\u00a0code\u00a0rather\u00a0than\u00a0its\u00a0mechanics.\u00a0It\u2019s\u00a0also\nvaluable\u00a0to\u00a0remove\u00a0duplication:\u00a0Instead\u00a0of\u00a0writing\u00a0the\u00a0same\u00a0code\u00a0twice,\u00a0I\u00a0just\u00a0call\u00a0the\nfunction.\u00a0Then,\u00a0should\u00a0I\u00a0need\u00a0to\u00a0change\u00a0the\u00a0function\u2019s\u00a0implementation,\u00a0I\u00a0don\u2019t\u00a0have\u00a0to\ntrack\u00a0down\u00a0similar\u00adlooking\u00a0code\u00a0to\u00a0update\u00a0all\u00a0the\u00a0changes.\u00a0(I\u00a0may\u00a0have\u00a0to\u00a0look\u00a0at\u00a0the\ncallers,\u00a0to\u00a0see\u00a0if\u00a0they\u00a0should\u00a0all\u00a0use\u00a0the\u00a0new\u00a0code,\u00a0but\u00a0that\u2019s\u00a0both\u00a0less\u00a0common\u00a0and\nmuch\u00a0easier.)\nIf\u00a0I\u00a0see\u00a0inline\u00a0code\u00a0that\u2019s\u00a0doing\u00a0the\u00a0same\u00a0thing\u00a0that\u00a0I\u00a0have\u00a0in\u00a0an\u00a0existing\u00a0function,\u00a0I\u2019ll\nusually\u00a0want\u00a0to\u00a0replace\u00a0that\u00a0inline\u00a0code\u00a0with\u00a0a\u00a0function\u00a0call.\u00a0The\u00a0exception\u00a0is\u00a0if\u00a0I\nconsider\u00a0the\u00a0similarity\u00a0to\u00a0be\u00a0coincidental\u2014so\u00a0that,\u00a0if\u00a0I\u00a0change\u00a0the\u00a0function\u00a0body,\u00a0I\u00a0don\u2019t\nexpect\u00a0the\u00a0behavior\u00a0in\u00a0this\u00a0inline\u00a0code\u00a0to\u00a0change.\u00a0A\u00a0guide\u00a0to\u00a0this\u00a0is\u00a0the\u00a0name\u00a0of\u00a0the\nfunction.\u00a0A\u00a0good\u00a0name\u00a0should\u00a0make\u00a0sense\u00a0in\u00a0place\u00a0of\u00a0inline\u00a0code\u00a0I\u00a0have.\u00a0If\u00a0the\u00a0name\ndoesn\u2019t\u00a0make\u00a0sense,\u00a0that\u00a0may\u00a0be\u00a0because\u00a0it\u2019s\u00a0a\u00a0poor\u00a0name\u00a0(in\u00a0which\u00a0case\u00a0I\u00a0use\u00a0Rename\nFunction\u00a0(124)\u00a0to\u00a0fix\u00a0it)\u00a0or\u00a0because\u00a0the\u00a0function\u2019s\u00a0purpose\u00a0is\u00a0different\u00a0to\u00a0what\u00a0I\u00a0want\u00a0in\nthis\u00a0case\u2014so\u00a0I\u00a0shouldn\u2019t\u00a0call\u00a0it.\nI\u00a0find\u00a0it\u00a0particularly\u00a0satisfying\u00a0to\u00a0do\u00a0this\u00a0with\u00a0calls\u00a0to\u00a0library\u00a0functions\u2014that\u00a0way,\u00a0I\u00a0don\u2019t\neven\u00a0have\u00a0to\u00a0write\u00a0the\u00a0function\u00a0body.\nMechanics\nReplace\u00a0the\u00a0inline\u00a0code\u00a0with\u00a0a\u00a0call\u00a0to\u00a0the\u00a0existing\u00a0function.\nTest.\nSLIDE STATEMENTS\nwww.EBooksWorld.ir\n", "page": 251, "type": "text", "section": "Page 251"}
{"text": "SLIDE STATEMENTS\nformerly:\u00a0Consolidate\u00a0Duplicate\u00a0Conditional\u00a0Fragments\nMotivation\nCode\u00a0is\u00a0easier\u00a0to\u00a0understand\u00a0when\u00a0things\u00a0that\u00a0are\u00a0related\u00a0to\u00a0each\u00a0other\u00a0appear\u00a0together.\nIf\u00a0several\u00a0lines\u00a0of\u00a0code\u00a0access\u00a0the\u00a0same\u00a0data\u00a0structure,\u00a0it\u2019s\u00a0best\u00a0for\u00a0them\u00a0to\u00a0be\u00a0together\nrather\u00a0than\u00a0intermingled\u00a0with\u00a0code\u00a0accessing\u00a0other\u00a0data\u00a0structures.\u00a0At\u00a0its\u00a0simplest,\u00a0I\nuse\u00a0Slide\u00a0Statements\u00a0to\u00a0keep\u00a0such\u00a0code\u00a0together.\u00a0A\u00a0very\u00a0common\u00a0case\u00a0of\u00a0this\u00a0is\ndeclaring\u00a0and\u00a0using\u00a0variables.\u00a0Some\u00a0people\u00a0like\u00a0to\u00a0declare\u00a0all\u00a0their\u00a0variables\u00a0at\u00a0the\u00a0top\nof\u00a0a\u00a0function.\u00a0I\u00a0prefer\u00a0to\u00a0declare\u00a0the\u00a0variable\u00a0just\u00a0before\u00a0I\u00a0first\u00a0use\u00a0it.\nUsually,\u00a0I\u00a0move\u00a0related\u00a0code\u00a0together\u00a0as\u00a0a\u00a0preparatory\u00a0step\u00a0for\u00a0another\u00a0refactoring,\noften\u00a0an\u00a0Extract\u00a0Function\u00a0(106).\u00a0Putting\u00a0related\u00a0code\u00a0into\u00a0a\u00a0clearly\u00a0separated\u00a0function\nis\u00a0a\u00a0better\u00a0separation\u00a0than\u00a0just\u00a0moving\u00a0a\u00a0set\u00a0of\u00a0lines\u00a0together,\u00a0but\u00a0I\u00a0can\u2019t\u00a0do\u00a0the\u00a0Extract\nFunction\u00a0(106)\u00a0unless\u00a0the\u00a0code\u00a0is\u00a0together\u00a0in\u00a0the\u00a0first\u00a0place.\nMechanics\nIdentify\u00a0the\u00a0target\u00a0position\u00a0to\u00a0move\u00a0the\u00a0fragment\u00a0to.\u00a0Examine\u00a0statements\u00a0between\nsource\u00a0and\u00a0target\u00a0to\u00a0see\u00a0if\u00a0there\u00a0is\u00a0interference\u00a0for\u00a0the\u00a0candidate\u00a0fragment.\u00a0Abandon\naction\u00a0if\u00a0there\u00a0is\u00a0any\u00a0interference.\nA\u00a0fragment\u00a0cannot\u00a0slide\u00a0backwards\u00a0earlier\u00a0than\u00a0any\u00a0element\u00a0it\u00a0references\u00a0is\ndeclared.\nA\u00a0fragment\u00a0cannot\u00a0slide\u00a0forwards\u00a0beyond\u00a0any\u00a0element\u00a0that\u00a0references\u00a0it.\nwww.EBooksWorld.ir\n", "page": 252, "type": "text", "section": "Page 252"}
{"text": "A\u00a0fragment\u00a0cannot\u00a0slide\u00a0over\u00a0any\u00a0statement\u00a0that\u00a0modifies\u00a0an\u00a0element\u00a0it\u00a0references.\nA\u00a0fragment\u00a0that\u00a0modifies\u00a0an\u00a0element\u00a0cannot\u00a0slide\u00a0over\u00a0any\u00a0other\u00a0element\u00a0that\nreferences\u00a0the\u00a0modified\u00a0element.\nCut\u00a0the\u00a0fragment\u00a0from\u00a0the\u00a0source\u00a0and\u00a0paste\u00a0into\u00a0the\u00a0target\u00a0position.\nTest.\nIf\u00a0the\u00a0test\u00a0fails,\u00a0try\u00a0breaking\u00a0down\u00a0the\u00a0slide\u00a0into\u00a0smaller\u00a0steps.\u00a0Either\u00a0slide\u00a0over\u00a0less\ncode\u00a0or\u00a0reduce\u00a0the\u00a0amount\u00a0of\u00a0code\u00a0in\u00a0the\u00a0fragment\u00a0you\u2019re\u00a0moving.\nExample\nWhen\u00a0sliding\u00a0code\u00a0fragments,\u00a0there\u00a0are\u00a0two\u00a0decisions\u00a0involved:\u00a0what\u00a0slide\u00a0I\u2019d\u00a0like\u00a0to\u00a0do\nand\u00a0whether\u00a0I\u00a0can\u00a0do\u00a0it.\u00a0The\u00a0first\u00a0decision\u00a0is\u00a0very\u00a0context\u00adspecific.\u00a0On\u00a0the\u00a0simplest\u00a0level,\nI\u00a0like\u00a0to\u00a0declare\u00a0elements\u00a0close\u00a0to\u00a0where\u00a0I\u00a0use\u00a0them,\u00a0so\u00a0I\u2019ll\u00a0often\u00a0slide\u00a0a\u00a0declaration\ndown\u00a0to\u00a0its\u00a0usage.\u00a0But\u00a0almost\u00a0always\u00a0I\u00a0slide\u00a0some\u00a0code\u00a0because\u00a0I\u00a0want\u00a0to\u00a0do\u00a0another\nrefactoring\u2014perhaps\u00a0to\u00a0get\u00a0a\u00a0clump\u00a0of\u00a0code\u00a0together\u00a0to\u00a0Extract\u00a0Function\u00a0(106).\nOnce\u00a0I\u00a0have\u00a0a\u00a0sense\u00a0of\u00a0where\u00a0I\u2019d\u00a0like\u00a0to\u00a0move\u00a0some\u00a0code,\u00a0the\u00a0next\u00a0part\u00a0is\u00a0deciding\u00a0if\u00a0I\ncan\u00a0do\u00a0it.\u00a0This\u00a0involves\u00a0looking\u00a0at\u00a0the\u00a0code\u00a0I\u2019m\u00a0sliding\u00a0and\u00a0the\u00a0code\u00a0I\u2019m\u00a0sliding\u00a0over:\u00a0Do\nthey\u00a0interfere\u00a0with\u00a0each\u00a0other\u00a0in\u00a0a\u00a0way\u00a0that\u00a0would\u00a0change\u00a0the\u00a0observable\u00a0behavior\u00a0of\nthe\u00a0program?\nConsider\u00a0the\u00a0following\u00a0fragment\u00a0of\u00a0code:\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\n\u00a01\u00a0const\u00a0pricingPlan\u00a0=\u00a0retrievePricingPlan()\u037e\n\u00a02\u00a0const\u00a0order\u00a0=\u00a0retreiveOrder()\u037e\n\u00a03\u00a0const\u00a0baseCharge\u00a0=\u00a0pricingPlan.base\u037e\n\u00a04\u00a0let\u00a0charge\u037e\n\u00a05\u00a0const\u00a0chargePerUnit\u00a0=\u00a0pricingPlan.unit\u037e\n\u00a06\u00a0const\u00a0units\u00a0=\u00a0order.units\u037e\n\u00a07\u00a0let\u00a0discount\u037e\n\u00a08\u00a0charge\u00a0=\u00a0baseCharge\u00a0+\u00a0units\u00a0*\u00a0chargePerUnit\u037e\n\u00a09\u00a0let\u00a0discountableUnits\u00a0=\u00a0Math.max(units\u00a0\u00ad\u00a0pricingPlan.discountThreshold,\u00a00)\u037e\n10\u00a0discount\u00a0=\u00a0discountableUnits\u00a0*\u00a0pricingPlan.discountFactor\u037e\n11\u00a0if\u00a0(order.isRepeat)\u00a0discount\u00a0+=\u00a020\u037e\n12\u00a0charge\u00a0=\u00a0charge\u00a0\u00ad\u00a0discount\u037e\n13\u00a0chargeOrder(charge)\u037e\nwww.EBooksWorld.ir\n", "page": 253, "type": "text", "section": "Page 253"}
{"text": "The\u00a0first\u00a0seven\u00a0lines\u00a0are\u00a0declarations,\u00a0and\u00a0it\u2019s\u00a0relatively\u00a0easy\u00a0to\u00a0move\u00a0these.\u00a0For\nexample,\u00a0I\u00a0may\u00a0want\u00a0to\u00a0move\u00a0all\u00a0the\u00a0code\u00a0dealing\u00a0with\u00a0discounts\u00a0together,\u00a0which\u00a0would\ninvolve\u00a0moving\u00a0line\u00a07\u00a0(`let\u00a0discount`)\u00a0to\u00a0above\u00a0line\u00a010\u00a0(`discount\u00a0=\u00a0...`).\nSince\u00a0a\u00a0declaration\u00a0has\u00a0no\u00a0side\u00a0effects\u00a0and\u00a0refers\u00a0to\u00a0no\u00a0other\u00a0variable,\u00a0I\u00a0can\u00a0safely\u00a0move\nthis\u00a0forwards\u00a0as\u00a0far\u00a0as\u00a0the\u00a0first\u00a0line\u00a0that\u00a0references\u00a0discount\u00a0itself.\u00a0This\u00a0is\u00a0also\u00a0a\ncommon\u00a0move\u2014if\u00a0I\u00a0want\u00a0to\u00a0use\u00a0Extract\u00a0Function\u00a0(106)\u00a0on\u00a0the\u00a0discount\u00a0logic,\u00a0I\u2019ll\u00a0need\nto\u00a0move\u00a0the\u00a0declaration\u00a0down\u00a0first.\nI\u00a0do\u00a0similar\u00a0analysis\u00a0with\u00a0any\u00a0code\u00a0that\u00a0doesn\u2019t\u00a0have\u00a0side\u00a0effects.\u00a0So\u00a0I\u00a0can\u00a0take\u00a0line\u00a02\n(`const\u00a0order\u00a0=\u00a0...`)\u00a0and\u00a0move\u00a0it\u00a0down\u00a0to\u00a0above\u00a0line\u00a06\u00a0(`const\u00a0units\u00a0=\n...`)\u00a0without\u00a0trouble.\nIn\u00a0this\u00a0case,\u00a0I\u2019m\u00a0also\u00a0helped\u00a0by\u00a0the\u00a0fact\u00a0that\u00a0the\u00a0code\u00a0I\u2019m\u00a0moving\u00a0over\u00a0doesn\u2019t\u00a0have\u00a0side\neffects\u00a0either.\u00a0Indeed,\u00a0I\u00a0can\u00a0freely\u00a0rearrange\u00a0code\u00a0that\u00a0lacks\u00a0side\u00a0effects\u00a0to\u00a0my\u00a0heart\u2019s\ncontent,\u00a0which\u00a0is\u00a0one\u00a0of\u00a0the\u00a0reasons\u00a0why\u00a0wise\u00a0programmers\u00a0prefer\u00a0to\u00a0use\u00a0side\u00adeffect\u00ad\nfree\u00a0code\u00a0as\u00a0much\u00a0as\u00a0possible.\nThere\u00a0is\u00a0a\u00a0wrinkle\u00a0here,\u00a0however.\u00a0How\u00a0do\u00a0I\u00a0know\u00a0that\u00a0line\u00a02\u00a0is\u00a0side\u00adeffect\u00adfree?\u00a0To\u00a0be\nsure,\u00a0I\u2019d\u00a0need\u00a0to\u00a0look\u00a0inside\u00a0retrieveOrder()\u00a0to\u00a0ensure\u00a0there\u00a0are\u00a0no\u00a0side\u00a0effects\nthere\u00a0(and\u00a0inside\u00a0any\u00a0functions\u00a0it\u00a0calls,\u00a0and\u00a0inside\u00a0any\u00a0functions\u00a0its\u00a0functions\u00a0call,\u00a0and\nso\u00a0on).\u00a0In\u00a0practice,\u00a0when\u00a0working\u00a0on\u00a0my\u00a0own\u00a0code,\u00a0I\u00a0know\u00a0that\u00a0I\u00a0generally\u00a0follow\u00a0the\nCommand\u00adQuery\u00a0Separation\u00a0[mf\u00adcqs]\u00a0principle,\u00a0so\u00a0any\u00a0function\u00a0that\u00a0returns\u00a0a\u00a0value\u00a0is\nfree\u00a0of\u00a0side\u00a0effects.\u00a0But\u00a0I\u00a0can\u00a0only\u00a0be\u00a0confident\u00a0of\u00a0that\u00a0because\u00a0I\u00a0know\u00a0the\u00a0code\u00a0base\u037e\u00a0if\u00a0I\nwere\u00a0working\u00a0in\u00a0an\u00a0unknown\u00a0code\u00a0base,\u00a0I\u2019d\u00a0have\u00a0to\u00a0be\u00a0more\u00a0cautious.\u00a0But\u00a0I\u00a0do\u00a0try\u00a0to\nfollow\u00a0the\u00a0Command\u00adQuery\u00a0Separation\u00a0in\u00a0my\u00a0own\u00a0code\u00a0because\u00a0it\u2019s\u00a0so\u00a0valuable\u00a0to\u00a0know\nthat\u00a0code\u00a0is\u00a0free\u00a0of\u00a0side\u00a0effects.\nWhen\u00a0sliding\u00a0code\u00a0that\u00a0has\u00a0a\u00a0side\u00a0effect,\u00a0or\u00a0sliding\u00a0over\u00a0code\u00a0with\u00a0side\u00a0effects,\u00a0I\u00a0have\u00a0to\nbe\u00a0much\u00a0more\u00a0careful.\u00a0What\u00a0I\u2019m\u00a0looking\u00a0for\u00a0is\u00a0interference\u00a0between\u00a0the\u00a0two\u00a0code\nfragments.\u00a0So,\u00a0let\u2019s\u00a0say\u00a0I\u00a0want\u00a0to\u00a0slide\u00a0line\u00a011\u00a0(`if\u00a0(order.isRepeat)\u00a0...`)\u00a0down\nto\u00a0the\u00a0end.\u00a0I\u2019m\u00a0prevented\u00a0from\u00a0doing\u00a0that\u00a0by\u00a0line\u00a012\u00a0because\u00a0it\u00a0references\u00a0the\u00a0variable\nwhose\u00a0state\u00a0I\u2019m\u00a0changing\u00a0in\u00a0line\u00a011.\u00a0Similarly,\u00a0I\u00a0can\u2019t\u00a0take\u00a0line\u00a013\n(`chargeOrder(charge)`)\u00a0and\u00a0move\u00a0it\u00a0up\u00a0because\u00a0line\u00a012\u00a0modifies\u00a0some\u00a0state\u00a0that\nline\u00a013\u00a0references.\u00a0However,\u00a0I\u00a0can\u00a0slide\u00a0line\u00a08\u00a0(`charge\u00a0=\u00a0baseCharge\u00a0+\u00a0...`)\nover\u00a0lines\u00a09\u201311\u00a0because\u00a0there\u00a0they\u00a0don\u2019t\u00a0modify\u00a0any\u00a0common\u00a0state.\nThe\u00a0most\u00a0straightforward\u00a0rule\u00a0to\u00a0follow\u00a0is\u00a0that\u00a0I\u00a0can\u2019t\u00a0slide\u00a0one\u00a0fragment\u00a0of\u00a0code\u00a0over\nanother\u00a0if\u00a0any\u00a0data\u00a0that\u00a0both\u00a0fragments\u00a0refer\u00a0to\u00a0is\u00a0modified\u00a0by\u00a0either\u00a0one.\u00a0But\u00a0that\u2019s\u00a0not\na\u00a0comprehensive\u00a0rule\u037e\u00a0I\u00a0can\u00a0happily\u00a0slide\u00a0either\u00a0of\u00a0the\u00a0following\u00a0two\u00a0lines\u00a0over\u00a0the\nother:\nwww.EBooksWorld.ir\n", "page": 254, "type": "text", "section": "Page 254"}
{"text": "a\u00a0=\u00a0a\u00a0+\u00a010\u037e\na\u00a0=\u00a0a\u00a0+\u00a05\u037e\nBut\u00a0judging\u00a0whether\u00a0a\u00a0slide\u00a0is\u00a0safe\u00a0means\u00a0I\u00a0have\u00a0to\u00a0really\u00a0understand\u00a0the\u00a0operations\ninvolved\u00a0and\u00a0how\u00a0they\u00a0compose.\nSince\u00a0I\u00a0need\u00a0to\u00a0worry\u00a0so\u00a0much\u00a0about\u00a0updating\u00a0state,\u00a0I\u00a0look\u00a0to\u00a0remove\u00a0as\u00a0much\u00a0of\u00a0it\u00a0as\u00a0I\ncan.\u00a0So\u00a0with\u00a0this\u00a0code,\u00a0I\u2019d\u00a0be\u00a0looking\u00a0to\u00a0apply\u00a0Split\u00a0Variable\u00a0(240)\u00a0on\u00a0charge\u00a0before\u00a0I\nindulge\u00a0in\u00a0any\u00a0sliding\u00a0around\u00a0of\u00a0that\u00a0code.\nHere,\u00a0the\u00a0analysis\u00a0is\u00a0relatively\u00a0simple\u00a0because\u00a0I\u2019m\u00a0mostly\u00a0just\u00a0modifying\u00a0local\u00a0variables.\nWith\u00a0more\u00a0complex\u00a0data\u00a0structures,\u00a0it\u2019s\u00a0much\u00a0harder\u00a0to\u00a0be\u00a0sure\u00a0when\u00a0I\u00a0get\u00a0interference.\nSo\u00a0tests\u00a0play\u00a0an\u00a0important\u00a0role:\u00a0Slide\u00a0the\u00a0fragment,\u00a0run\u00a0tests,\u00a0see\u00a0if\u00a0things\u00a0break.\u00a0If\u00a0my\ntest\u00a0coverage\u00a0is\u00a0good,\u00a0I\u00a0can\u00a0feel\u00a0happy\u00a0with\u00a0the\u00a0refactoring.\u00a0But\u00a0if\u00a0tests\u00a0aren\u2019t\u00a0reliable,\u00a0I\nneed\u00a0to\u00a0be\u00a0more\u00a0wary\u2014or,\u00a0more\u00a0likely,\u00a0to\u00a0improve\u00a0the\u00a0tests\u00a0for\u00a0the\u00a0code\u00a0I\u2019m\u00a0working\u00a0on.\nThe\u00a0most\u00a0important\u00a0consequence\u00a0of\u00a0a\u00a0test\u00a0failure\u00a0after\u00a0a\u00a0slide\u00a0is\u00a0to\u00a0use\u00a0smaller\u00a0slides:\nInstead\u00a0of\u00a0sliding\u00a0over\u00a0ten\u00a0lines,\u00a0I\u2019ll\u00a0just\u00a0pick\u00a0five,\u00a0or\u00a0slide\u00a0up\u00a0to\u00a0what\u00a0I\u00a0reckon\u00a0is\u00a0a\ndangerous\u00a0line.\u00a0It\u00a0may\u00a0also\u00a0mean\u00a0that\u00a0the\u00a0slide\u00a0isn\u2019t\u00a0worth\u00a0it,\u00a0and\u00a0I\u00a0need\u00a0to\u00a0work\u00a0on\nsomething\u00a0else\u00a0first.\nExample: Sliding with Conditionals\nI\u00a0can\u00a0also\u00a0do\u00a0slides\u00a0with\u00a0conditionals.\u00a0This\u00a0will\u00a0either\u00a0involve\u00a0removing\u00a0duplicate\u00a0logic\nwhen\u00a0I\u00a0slide\u00a0out\u00a0of\u00a0a\u00a0conditional,\u00a0or\u00a0adding\u00a0duplicate\u00a0logic\u00a0when\u00a0I\u00a0slide\u00a0in.\nHere\u2019s\u00a0a\u00a0case\u00a0where\u00a0I\u00a0have\u00a0the\u00a0same\u00a0statements\u00a0in\u00a0both\u00a0legs\u00a0of\u00a0a\u00a0conditional:\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nlet\u00a0result\u037e\nif\u00a0(availableResources.length\u00a0===\u00a00)\u00a0{\n\u00a0\u00a0result\u00a0=\u00a0createResource()\u037e\n\u00a0\u00a0allocatedResources.push(result)\u037e\n}\u00a0else\u00a0{\n\u00a0\u00a0result\u00a0=\u00a0availableResources.pop()\u037e\n\u00a0\u00a0allocatedResources.push(result)\u037e\n}\nreturn\u00a0result\u037e\nI\u00a0can\u00a0slide\u00a0these\u00a0out\u00a0of\u00a0the\u00a0conditional,\u00a0in\u00a0which\u00a0case\u00a0they\u00a0turn\u00a0into\u00a0a\u00a0single\u00a0statement\noutside\u00a0of\u00a0the\u00a0conditional\u00a0block.\nwww.EBooksWorld.ir\n", "page": 255, "type": "text", "section": "Page 255"}
{"text": "Click\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nlet\u00a0result\u037e\nif\u00a0(availableResources.length\u00a0===\u00a00)\u00a0{\n\u00a0\u00a0result\u00a0=\u00a0createResource()\u037e\n}\u00a0else\u00a0{\n\u00a0\u00a0result\u00a0=\u00a0availableResources.pop()\u037e\n}\nallocatedResources.push(result)\u037e\nreturn\u00a0result\u037e\nIn\u00a0the\u00a0reverse\u00a0case,\u00a0sliding\u00a0a\u00a0fragment\u00a0into\u00a0a\u00a0conditional\u00a0means\u00a0repeating\u00a0it\u00a0in\u00a0every\u00a0leg\nof\u00a0the\u00a0conditional.\nFurther Reading\nI\u2019ve\u00a0seen\u00a0an\u00a0almost\u00a0identical\u00a0refactoring\u00a0under\u00a0the\u00a0name\u00a0of\u00a0Swap\u00a0Statement\u00a0[wake\u00ad\nswap].\u00a0Swap\u00a0Statement\u00a0moves\u00a0adjacent\u00a0fragments,\u00a0but\u00a0it\u00a0only\u00a0works\u00a0with\u00a0single\u00ad\nstatement\u00a0fragments.\u00a0You\u00a0can\u00a0think\u00a0of\u00a0it\u00a0as\u00a0Slide\u00a0Statements\u00a0where\u00a0both\u00a0the\u00a0sliding\nfragment\u00a0and\u00a0the\u00a0slid\u00adover\u00a0fragment\u00a0are\u00a0single\u00a0statements.\u00a0This\u00a0refactoring\u00a0appeals\u00a0to\nme\u037e\u00a0after\u00a0all,\u00a0I\u2019m\u00a0always\u00a0going\u00a0on\u00a0about\u00a0taking\u00a0small\u00a0steps\u2014steps\u00a0that\u00a0may\u00a0seem\nridiculously\u00a0small\u00a0to\u00a0those\u00a0new\u00a0to\u00a0refactoring.\nBut\u00a0I\u00a0ended\u00a0up\u00a0writing\u00a0this\u00a0refactoring\u00a0with\u00a0larger\u00a0fragments\u00a0because\u00a0that\u00a0is\u00a0what\u00a0I\u00a0do.\nI\u00a0only\u00a0move\u00a0one\u00a0statement\u00a0at\u00a0a\u00a0time\u00a0if\u00a0I\u2019m\u00a0having\u00a0difficulty\u00a0with\u00a0a\u00a0larger\u00a0slide,\u00a0and\u00a0I\nrarely\u00a0run\u00a0into\u00a0problems\u00a0with\u00a0larger\u00a0slides.\u00a0With\u00a0more\u00a0messy\u00a0code,\u00a0however,\u00a0smaller\nslides\u00a0end\u00a0up\u00a0being\u00a0easier.\nSPLIT LOOP\nwww.EBooksWorld.ir\n", "page": 256, "type": "text", "section": "Page 256"}
{"text": "Motivation\nYou\u00a0often\u00a0see\u00a0loops\u00a0that\u00a0are\u00a0doing\u00a0two\u00a0different\u00a0things\u00a0at\u00a0once\u00a0just\u00a0because\u00a0they\u00a0can\u00a0do\nthat\u00a0with\u00a0one\u00a0pass\u00a0through\u00a0a\u00a0loop.\u00a0But\u00a0if\u00a0you\u2019re\u00a0doing\u00a0two\u00a0different\u00a0things\u00a0in\u00a0the\u00a0same\nloop,\u00a0then\u00a0whenever\u00a0you\u00a0need\u00a0to\u00a0modify\u00a0the\u00a0loop\u00a0you\u00a0have\u00a0to\u00a0understand\u00a0both\u00a0things.\nBy\u00a0splitting\u00a0the\u00a0loop,\u00a0you\u00a0ensure\u00a0you\u00a0only\u00a0need\u00a0to\u00a0understand\u00a0the\u00a0behavior\u00a0you\u00a0need\u00a0to\nmodify.\nSplitting\u00a0a\u00a0loop\u00a0can\u00a0also\u00a0make\u00a0it\u00a0easier\u00a0to\u00a0use.\u00a0A\u00a0loop\u00a0that\u00a0calculates\u00a0a\u00a0single\u00a0value\u00a0can\njust\u00a0return\u00a0that\u00a0value.\u00a0Loops\u00a0that\u00a0do\u00a0many\u00a0things\u00a0need\u00a0to\u00a0return\u00a0structures\u00a0or\u00a0populate\nlocal\u00a0variables.\u00a0I\u00a0frequently\u00a0follow\u00a0a\u00a0sequence\u00a0of\u00a0Split\u00a0Loop\u00a0followed\u00a0by\u00a0Extract\nFunction\u00a0(106).\nwww.EBooksWorld.ir\n", "page": 257, "type": "text", "section": "Page 257"}
{"text": "Many\u00a0programmers\u00a0are\u00a0uncomfortable\u00a0with\u00a0this\u00a0refactoring,\u00a0as\u00a0it\u00a0forces\u00a0you\u00a0to\u00a0execute\nthe\u00a0loop\u00a0twice.\u00a0My\u00a0reminder,\u00a0as\u00a0usual,\u00a0is\u00a0to\u00a0separate\u00a0refactoring\u00a0from\u00a0optimization\n(Refactoring\u00a0and\u00a0Performance\u00a0(64)).\u00a0Once\u00a0I\u00a0have\u00a0my\u00a0code\u00a0clear,\u00a0I\u2019ll\u00a0optimize\u00a0it,\u00a0and\u00a0if\nthe\u00a0loop\u00a0traversal\u00a0is\u00a0a\u00a0bottleneck,\u00a0it\u2019s\u00a0easy\u00a0to\u00a0slam\u00a0the\u00a0loops\u00a0back\u00a0together.\u00a0But\u00a0the\nactual\u00a0iteration\u00a0through\u00a0even\u00a0a\u00a0large\u00a0list\u00a0is\u00a0rarely\u00a0a\u00a0bottleneck,\u00a0and\u00a0splitting\u00a0the\u00a0loops\noften\u00a0enables\u00a0other,\u00a0more\u00a0powerful,\u00a0optimizations.\nMechanics\nCopy\u00a0the\u00a0loop.\nIdentify\u00a0and\u00a0eliminate\u00a0duplicate\u00a0side\u00a0effects.\nTest.\nWhen\u00a0done,\u00a0consider\u00a0Extract\u00a0Function\u00a0(106)\u00a0on\u00a0each\u00a0loop.\nExample\nI\u2019ll\u00a0start\u00a0with\u00a0a\u00a0little\u00a0bit\u00a0of\u00a0code\u00a0that\u00a0calculates\u00a0the\u00a0total\u00a0salary\u00a0and\u00a0youngest\u00a0age.\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nlet\u00a0youngest\u00a0=\u00a0people[0]\u00a0?\u00a0people[0].age\u00a0:\u00a0Infinity\u037e\nlet\u00a0totalSalary\u00a0=\u00a00\u037e\nfor\u00a0(const\u00a0p\u00a0of\u00a0people)\u00a0{\n\u00a0\u00a0if\u00a0(p.age\u00a0<\u00a0youngest)\u00a0youngest\u00a0=\u00a0p.age\u037e\n\u00a0\u00a0totalSalary\u00a0+=\u00a0p.salary\u037e\n}\nreturn\u00a0`youngestAge:\u00a0${youngest},\u00a0totalSalary:\u00a0${totalSalary}`\u037e\nIt\u2019s\u00a0a\u00a0very\u00a0simple\u00a0loop,\u00a0but\u00a0it\u2019s\u00a0doing\u00a0two\u00a0different\u00a0calculations.\u00a0To\u00a0split\u00a0them,\u00a0I\u00a0begin\nwith\u00a0just\u00a0copying\u00a0the\u00a0loop.\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nlet\u00a0youngest\u00a0=\u00a0people[0]\u00a0?\u00a0people[0].age\u00a0:\u00a0Infinity\u037e\nlet\u00a0totalSalary\u00a0=\u00a00\u037e\nfor\u00a0(const\u00a0p\u00a0of\u00a0people)\u00a0{\n\u00a0\u00a0if\u00a0(p.age\u00a0<\u00a0youngest)\u00a0youngest\u00a0=\u00a0p.age\u037e\n\u00a0\u00a0totalSalary\u00a0+=\u00a0p.salary\u037e\n}\nfor\u00a0(const\u00a0p\u00a0of\u00a0people)\u00a0{\nwww.EBooksWorld.ir\n", "page": 258, "type": "text", "section": "Page 258"}
{"text": "\u00a0\u00a0if\u00a0(p.age\u00a0<\u00a0youngest)\u00a0youngest\u00a0=\u00a0p.age\u037e\n\u00a0\u00a0totalSalary\u00a0+=\u00a0p.salary\u037e\n}\nreturn\u00a0`youngestAge:\u00a0${youngest},\u00a0totalSalary:\u00a0${totalSalary}`\u037e\nWith\u00a0the\u00a0loop\u00a0copied,\u00a0I\u00a0need\u00a0to\u00a0remove\u00a0the\u00a0duplication\u00a0that\u00a0would\u00a0otherwise\u00a0produce\nwrong\u00a0results.\u00a0If\u00a0something\u00a0in\u00a0the\u00a0loop\u00a0has\u00a0no\u00a0side\u00a0effects,\u00a0I\u00a0can\u00a0leave\u00a0it\u00a0there\u00a0for\u00a0now,\nbut\u00a0it\u2019s\u00a0not\u00a0the\u00a0case\u00a0with\u00a0this\u00a0example.\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nlet\u00a0youngest\u00a0=\u00a0people[0]\u00a0?\u00a0people[0].age\u00a0:\u00a0Infinity\u037e\nlet\u00a0totalSalary\u00a0=\u00a00\u037e\nfor\u00a0(const\u00a0p\u00a0of\u00a0people)\u00a0{\n\u00a0\u00a0if\u00a0(p.age\u00a0<\u00a0youngest)\u00a0youngest\u00a0=\u00a0p.age\u037e\n\u00a0\u00a0totalSalary\u00a0+=\u00a0p.salary\u037e\n}\nfor\u00a0(const\u00a0p\u00a0of\u00a0people)\u00a0{\n\u00a0\u00a0if\u00a0(p.age\u00a0<\u00a0youngest)\u00a0youngest\u00a0=\u00a0p.age\u037e\n\u00a0\u00a0totalSalary\u00a0+=\u00a0p.salary\u037e\n}\nreturn\u00a0`youngestAge:\u00a0${youngest},\u00a0totalSalary:\u00a0${totalSalary}`\u037e\nOfficially,\u00a0that\u2019s\u00a0the\u00a0end\u00a0of\u00a0the\u00a0Split\u00a0Loop\u00a0refactoring.\u00a0But\u00a0the\u00a0point\u00a0of\u00a0Split\u00a0Loop\u00a0isn\u2019t\nwhat\u00a0it\u00a0does\u00a0on\u00a0its\u00a0own\u00a0but\u00a0what\u00a0it\u00a0sets\u00a0up\u00a0for\u00a0the\u00a0next\u00a0move\u2014and\u00a0I\u2019m\u00a0usually\u00a0looking\nto\u00a0extract\u00a0the\u00a0loops\u00a0into\u00a0their\u00a0own\u00a0functions.\u00a0I\u2019ll\u00a0use\u00a0Slide\u00a0Statements\u00a0(223)\u00a0to\nreorganize\u00a0the\u00a0code\u00a0a\u00a0bit\u00a0first.\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nlet\u00a0totalSalary\u00a0=\u00a00\u037e\nfor\u00a0(const\u00a0p\u00a0of\u00a0people)\u00a0{\n\u00a0\u00a0totalSalary\u00a0+=\u00a0p.salary\u037e\n}\nlet\u00a0youngest\u00a0=\u00a0people[0]\u00a0?\u00a0people[0].age\u00a0:\u00a0Infinity\u037e\nfor\u00a0(const\u00a0p\u00a0of\u00a0people)\u00a0{\n\u00a0\u00a0if\u00a0(p.age\u00a0<\u00a0youngest)\u00a0youngest\u00a0=\u00a0p.age\u037e\n}\nreturn\u00a0`youngestAge:\u00a0${youngest},\u00a0totalSalary:\u00a0${totalSalary}`\u037e\nThen\u00a0I\u00a0do\u00a0a\u00a0couple\u00a0of\u00a0Extract\u00a0Function\u00a0(106).\nwww.EBooksWorld.ir\n", "page": 259, "type": "text", "section": "Page 259"}
{"text": "Click\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nreturn\u00a0`youngestAge:\u00a0${youngestAge()},\u00a0totalSalary:\u00a0${totalSalary()}`\u037e\nfunction\u00a0totalSalary()\u00a0{\n\u00a0\u00a0let\u00a0totalSalary\u00a0=\u00a00\u037e\n\u00a0\u00a0for\u00a0(const\u00a0p\u00a0of\u00a0people)\u00a0{\n\u00a0\u00a0\u00a0\u00a0totalSalary\u00a0+=\u00a0p.salary\u037e\n\u00a0\u00a0}\n\u00a0\u00a0return\u00a0totalSalary\u037e\n}\nfunction\u00a0youngestAge()\u00a0{\n\u00a0\u00a0let\u00a0youngest\u00a0=\u00a0people[0]\u00a0?\u00a0people[0].age\u00a0:\u00a0Infinity\u037e\n\u00a0\u00a0for\u00a0(const\u00a0p\u00a0of\u00a0people)\u00a0{\n\u00a0\u00a0\u00a0\u00a0if\u00a0(p.age\u00a0<\u00a0youngest)\u00a0youngest\u00a0=\u00a0p.age\u037e\n\u00a0\u00a0}\n\u00a0\u00a0return\u00a0youngest\u037e\n}\nI\u00a0can\u00a0rarely\u00a0resist\u00a0Replace\u00a0Loop\u00a0with\u00a0Pipeline\u00a0(231)\u00a0for\u00a0the\u00a0total\u00a0salary,\u00a0and\u00a0there\u2019s\u00a0an\nobvious\u00a0Substitute\u00a0Algorithm\u00a0(195)\u00a0for\u00a0the\u00a0youngest\u00a0age.\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nreturn\u00a0`youngestAge:\u00a0${youngestAge()},\u00a0totalSalary:\u00a0${totalSalary()}`\u037e\nfunction\u00a0totalSalary()\u00a0{\n\u00a0\u00a0return\u00a0people.reduce((total,p)\u00a0=>\u00a0total\u00a0+\u00a0p.salary,\u00a00)\u037e\n}\nfunction\u00a0youngestAge()\u00a0{\n\u00a0\u00a0return\u00a0Math.min(...people.map(p\u00a0=>\u00a0p.age))\u037e\n}\nREPLACE LOOP WITH PIPELINE\nwww.EBooksWorld.ir\n", "page": 260, "type": "text", "section": "Page 260"}
{"text": "Motivation\nLike\u00a0most\u00a0programmers,\u00a0I\u00a0was\u00a0taught\u00a0to\u00a0use\u00a0loops\u00a0to\u00a0iterate\u00a0over\u00a0a\u00a0collection\u00a0of\u00a0objects.\nIncreasingly,\u00a0however,\u00a0language\u00a0environments\u00a0provide\u00a0a\u00a0better\u00a0construct:\u00a0the\u00a0collection\npipeline.\u00a0Collection\u00a0Pipelines\u00a0[mf\u00adcp]\u00a0allow\u00a0me\u00a0to\u00a0describe\u00a0my\u00a0processing\u00a0as\u00a0a\u00a0series\u00a0of\noperations,\u00a0each\u00a0consuming\u00a0and\u00a0emitting\u00a0a\u00a0collection.\u00a0The\u00a0most\u00a0common\u00a0of\u00a0these\noperations\u00a0are\u00a0map,\u00a0which\u00a0uses\u00a0a\u00a0function\u00a0to\u00a0transform\u00a0each\u00a0element\u00a0of\u00a0the\u00a0input\ncollection,\u00a0and\u00a0filter\u00a0which\u00a0uses\u00a0a\u00a0function\u00a0to\u00a0select\u00a0a\u00a0subset\u00a0of\u00a0the\u00a0input\u00a0collection\u00a0for\nlater\u00a0steps\u00a0in\u00a0the\u00a0pipeline.\u00a0I\u00a0find\u00a0logic\u00a0much\u00a0easier\u00a0to\u00a0follow\u00a0if\u00a0it\u00a0is\u00a0expressed\u00a0as\u00a0a\npipeline\u2014I\u00a0can\u00a0then\u00a0read\u00a0from\u00a0top\u00a0to\u00a0bottom\u00a0to\u00a0see\u00a0how\u00a0objects\u00a0flow\u00a0through\u00a0the\npipeline.\nMechanics\nCreate\u00a0a\u00a0new\u00a0variable\u00a0for\u00a0the\u00a0loop\u2019s\u00a0collection.\nThis\u00a0may\u00a0be\u00a0a\u00a0simple\u00a0copy\u00a0of\u00a0an\u00a0existing\u00a0variable.\nStarting\u00a0at\u00a0the\u00a0top,\u00a0take\u00a0each\u00a0bit\u00a0of\u00a0behavior\u00a0in\u00a0the\u00a0loop\u00a0and\u00a0replace\u00a0it\u00a0with\u00a0a\ncollection\u00a0pipeline\u00a0operation\u00a0in\u00a0the\u00a0derivation\u00a0of\u00a0the\u00a0loop\u00a0collection\u00a0variable.\u00a0Test\nafter\u00a0each\u00a0change.\nOnce\u00a0all\u00a0behavior\u00a0is\u00a0removed\u00a0from\u00a0the\u00a0loop,\u00a0remove\u00a0it.\nwww.EBooksWorld.ir\n", "page": 261, "type": "text", "section": "Page 261"}
{"text": "If\u00a0it\u00a0assigns\u00a0to\u00a0an\u00a0accumulator,\u00a0assign\u00a0the\u00a0pipeline\u00a0result\u00a0to\u00a0the\u00a0accumulator.\nExample\nI\u2019ll\u00a0begin\u00a0with\u00a0some\u00a0data:\u00a0a\u00a0CSV\u00a0file\u00a0of\u00a0data\u00a0about\u00a0our\u00a0offices.\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\noffice,\u00a0country,\u00a0telephone\nChicago,\u00a0USA,\u00a0+1\u00a0312\u00a0373\u00a01000\nBeijing,\u00a0China,\u00a0+86\u00a04008\u00a0900\u00a0505\nBangalore,\u00a0India,\u00a0+91\u00a080\u00a04064\u00a09570\nPorto\u00a0Alegre,\u00a0Brazil,\u00a0+55\u00a051\u00a03079\u00a03550\nChennai,\u00a0India,\u00a0+91\u00a044\u00a0660\u00a044766\n...\u00a0(more\u00a0data\u00a0follows)\nThe\u00a0following\u00a0function\u00a0picks\u00a0out\u00a0the\u00a0offices\u00a0in\u00a0India\u00a0and\u00a0returns\u00a0their\u00a0cities\u00a0and\ntelephone\u00a0numbers:\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0acquireData(input)\u00a0{\n\u00a0\u00a0const\u00a0lines\u00a0=\u00a0input.split(\"\\n\")\u037e\n\u00a0\u00a0let\u00a0firstLine\u00a0=\u00a0true\u037e\n\u00a0\u00a0const\u00a0result\u00a0=\u00a0[]\u037e\n\u00a0\u00a0for\u00a0(const\u00a0line\u00a0of\u00a0lines)\u00a0{\n\u00a0\u00a0\u00a0\u00a0if\u00a0(firstLine)\u00a0{\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0firstLine\u00a0=\u00a0false\u037e\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0continue\u037e\n\u00a0\u00a0\u00a0\u00a0}\n\u00a0\u00a0\u00a0\u00a0if\u00a0(line.trim()\u00a0===\u00a0\"\")\u00a0continue\u037e\n\u00a0\u00a0\u00a0\u00a0const\u00a0record\u00a0=\u00a0line.split(\",\")\u037e\n\u00a0\u00a0\u00a0\u00a0if\u00a0(record[1].trim()\u00a0===\u00a0\"India\")\u00a0{\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0result.push({city:\u00a0record[0].trim(),\u00a0phone:\u00a0record[2].trim()})\u037e\n\u00a0\u00a0\u00a0\u00a0}\n\u00a0\u00a0}\n\u00a0\u00a0return\u00a0result\u037e\n}\nI\u00a0want\u00a0to\u00a0replace\u00a0that\u00a0loop\u00a0with\u00a0a\u00a0collection\u00a0pipeline.\nMy\u00a0first\u00a0step\u00a0is\u00a0to\u00a0create\u00a0a\u00a0separate\u00a0variable\u00a0for\u00a0the\u00a0loop\u00a0to\u00a0work\u00a0over.\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nwww.EBooksWorld.ir\n", "page": 262, "type": "text", "section": "Page 262"}
{"text": "function\u00a0acquireData(input)\u00a0{\n\u00a0\u00a0const\u00a0lines\u00a0=\u00a0input.split(\"\\n\")\u037e\n\u00a0\u00a0let\u00a0firstLine\u00a0=\u00a0true\u037e\n\u00a0\u00a0const\u00a0result\u00a0=\u00a0[]\u037e\n\u00a0\u00a0const\u00a0loopItems\u00a0=\u00a0lines\n\u00a0\u00a0for\u00a0(const\u00a0line\u00a0of\u00a0loopItems)\u00a0{\n\u00a0\u00a0\u00a0\u00a0if\u00a0(firstLine)\u00a0{\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0firstLine\u00a0=\u00a0false\u037e\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0continue\u037e\n\u00a0\u00a0\u00a0\u00a0}\n\u00a0\u00a0\u00a0\u00a0if\u00a0(line.trim()\u00a0===\u00a0\"\")\u00a0continue\u037e\n\u00a0\u00a0\u00a0\u00a0const\u00a0record\u00a0=\u00a0line.split(\",\")\u037e\n\u00a0\u00a0\u00a0\u00a0if\u00a0(record[1].trim()\u00a0===\u00a0\"India\")\u00a0{\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0result.push({city:\u00a0record[0].trim(),\u00a0phone:\u00a0record[2].trim()})\u037e\n\u00a0\u00a0\u00a0\u00a0}\n\u00a0\u00a0}\n\u00a0\u00a0return\u00a0result\u037e\n}\nThe\u00a0first\u00a0part\u00a0of\u00a0the\u00a0loop\u00a0is\u00a0all\u00a0about\u00a0skipping\u00a0the\u00a0first\u00a0line\u00a0of\u00a0the\u00a0CSV\u00a0file.\u00a0This\u00a0calls\u00a0for\na\u00a0slice,\u00a0so\u00a0I\u00a0remove\u00a0that\u00a0first\u00a0section\u00a0of\u00a0the\u00a0loop\u00a0and\u00a0add\u00a0a\u00a0slice\u00a0operation\u00a0to\u00a0the\nformation\u00a0of\u00a0the\u00a0loop\u00a0variable.\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0acquireData(input)\u00a0{\n\u00a0\u00a0const\u00a0lines\u00a0=\u00a0input.split(\"\\n\")\u037e\n\u00a0\u00a0let\u00a0firstLine\u00a0=\u00a0true\u037e\n\u00a0\u00a0const\u00a0result\u00a0=\u00a0[]\u037e\n\u00a0\u00a0const\u00a0loopItems\u00a0=\u00a0lines\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0.slice(1)\u037e\n\u00a0\u00a0for\u00a0(const\u00a0line\u00a0of\u00a0loopItems)\u00a0{\n\u00a0\u00a0\u00a0\u00a0if\u00a0(firstLine)\u00a0{\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0firstLine\u00a0=\u00a0false\u037e\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0continue\u037e\n\u00a0\u00a0\u00a0\u00a0}\n\u00a0\u00a0\u00a0\u00a0if\u00a0(line.trim()\u00a0===\u00a0\"\")\u00a0continue\u037e\n\u00a0\u00a0\u00a0\u00a0const\u00a0record\u00a0=\u00a0line.split(\",\")\u037e\n\u00a0\u00a0\u00a0\u00a0if\u00a0(record[1].trim()\u00a0===\u00a0\"India\")\u00a0{\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0result.push({city:\u00a0record[0].trim(),\u00a0phone:\u00a0record[2].trim()})\u037e\n\u00a0\u00a0\u00a0\u00a0}\n\u00a0\u00a0}\n\u00a0\u00a0return\u00a0result\u037e\n}\nAs\u00a0a\u00a0bonus,\u00a0this\u00a0lets\u00a0me\u00a0delete\u00a0firstLine\u2014and\u00a0I\u00a0particularly\u00a0enjoy\u00a0deleting\u00a0control\nvariables.\nwww.EBooksWorld.ir\n", "page": 263, "type": "text", "section": "Page 263"}
{"text": "The\u00a0next\u00a0bit\u00a0of\u00a0behavior\u00a0removes\u00a0any\u00a0blank\u00a0lines.\u00a0I\u00a0can\u00a0replace\u00a0this\u00a0with\u00a0a\u00a0filter\noperation.\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0acquireData(input)\u00a0{\n\u00a0\u00a0const\u00a0lines\u00a0=\u00a0input.split(\"\\n\")\u037e\n\u00a0\u00a0const\u00a0result\u00a0=\u00a0[]\u037e\n\u00a0\u00a0const\u00a0loopItems\u00a0=\u00a0lines\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0.slice(1)\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0.filter(line\u00a0=>\u00a0line.trim()\u00a0!==\u00a0\"\")\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u037e\n\u00a0\u00a0for\u00a0(const\u00a0line\u00a0of\u00a0loopItems)\u00a0{\n\u00a0\u00a0\u00a0\u00a0if\u00a0(line.trim()\u00a0===\u00a0\"\")\u00a0continue\u037e\n\u00a0\u00a0\u00a0\u00a0const\u00a0record\u00a0=\u00a0line.split(\",\")\u037e\n\u00a0\u00a0\u00a0\u00a0if\u00a0(record[1].trim()\u00a0===\u00a0\"India\")\u00a0{\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0result.push({city:\u00a0record[0].trim(),\u00a0phone:\u00a0record[2].trim()})\u037e\n\u00a0\u00a0\u00a0\u00a0}\n\u00a0\u00a0}\n\u00a0\u00a0return\u00a0result\u037e\n}\nWhen\u00a0writing\u00a0a\u00a0pipeline,\u00a0I\u00a0find\u00a0it\u00a0best\u00a0to\u00a0put\u00a0the\u00a0terminal\u00a0semicolon\u00a0on\u00a0its\u00a0own\u00a0line.\nI\u00a0use\u00a0the\u00a0map\u00a0operation\u00a0to\u00a0turn\u00a0lines\u00a0into\u00a0an\u00a0array\u00a0of\u00a0strings\u2014misleadingly\u00a0called\nrecord\u00a0in\u00a0the\u00a0original\u00a0function,\u00a0but\u00a0it\u2019s\u00a0safer\u00a0to\u00a0keep\u00a0the\u00a0name\u00a0for\u00a0now\u00a0and\u00a0rename\u00a0later.\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0acquireData(input)\u00a0{\n\u00a0\u00a0const\u00a0lines\u00a0=\u00a0input.split(\"\\n\")\u037e\n\u00a0\u00a0const\u00a0result\u00a0=\u00a0[]\u037e\n\u00a0\u00a0const\u00a0loopItems\u00a0=\u00a0lines\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0.slice(1)\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0.filter(line\u00a0=>\u00a0line.trim()\u00a0!==\u00a0\"\")\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0.map(line\u00a0=>\u00a0line.split(\",\"))\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u037e\n\u00a0\u00a0for\u00a0(const\u00a0line\u00a0of\u00a0loopItems)\u00a0{\n\u00a0\u00a0\u00a0\u00a0const\u00a0record\u00a0=\u00a0line\u037e.split(\",\")\u037e\n\u00a0\u00a0\u00a0\u00a0if\u00a0(record[1].trim()\u00a0===\u00a0\"India\")\u00a0{\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0result.push({city:\u00a0record[0].trim(),\u00a0phone:\u00a0record[2].trim()})\u037e\n\u00a0\u00a0\u00a0\u00a0}\n\u00a0\u00a0}\n\u00a0\u00a0return\u00a0result\u037e\n}\nFilter\u00a0again\u00a0to\u00a0just\u00a0get\u00a0the\u00a0India\u00a0records:\nwww.EBooksWorld.ir\n", "page": 264, "type": "text", "section": "Page 264"}
{"text": "Click\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0acquireData(input)\u00a0{\n\u00a0\u00a0const\u00a0lines\u00a0=\u00a0input.split(\"\\n\")\u037e\n\u00a0\u00a0const\u00a0result\u00a0=\u00a0[]\u037e\n\u00a0\u00a0const\u00a0loopItems\u00a0=\u00a0lines\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0.slice(1)\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0.filter(line\u00a0=>\u00a0line.trim()\u00a0!==\u00a0\"\")\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0.map(line\u00a0=>\u00a0line.split(\",\"))\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0.filter(record\u00a0=>\u00a0record[1].trim()\u00a0===\u00a0\"India\")\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u037e\n\u00a0\u00a0for\u00a0(const\u00a0line\u00a0of\u00a0loopItems)\u00a0{\n\u00a0\u00a0\u00a0\u00a0const\u00a0record\u00a0=\u00a0line\u037e\n\u00a0\u00a0\u00a0\u00a0if\u00a0(record[1].trim()\u00a0===\u00a0\"India\")\u00a0{\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0result.push({city:\u00a0record[0].trim(),\u00a0phone:\u00a0record[2].trim()})\u037e\n\u00a0\u00a0\u00a0\u00a0}\n\u00a0\u00a0}\n\u00a0\u00a0return\u00a0result\u037e\n}\nMap\u00a0to\u00a0the\u00a0output\u00a0record\u00a0form:\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0acquireData(input)\u00a0{\n\u00a0\u00a0const\u00a0lines\u00a0=\u00a0input.split(\"\\n\")\u037e\n\u00a0\u00a0const\u00a0result\u00a0=\u00a0[]\u037e\n\u00a0\u00a0const\u00a0loopItems\u00a0=\u00a0lines\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0.slice(1)\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0.filter(line\u00a0=>\u00a0line.trim()\u00a0!==\u00a0\"\")\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0.map(line\u00a0=>\u00a0line.split(\",\"))\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0.filter(record\u00a0=>\u00a0record[1].trim()\u00a0===\u00a0\"India\")\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0.map(record\u00a0=>\u00a0({city:\u00a0record[0].trim(),\u00a0phone:\u00a0record[2].trim()}))\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u037e\n\u00a0\u00a0for\u00a0(const\u00a0line\u00a0of\u00a0loopItems)\u00a0{\n\u00a0\u00a0\u00a0\u00a0const\u00a0record\u00a0=\u00a0line\u037e\n\u00a0\u00a0\u00a0\u00a0result.push(line)\u037e\n\u00a0\u00a0}\n\u00a0\u00a0return\u00a0result\u037e\n}\nNow,\u00a0all\u00a0the\u00a0loop\u00a0does\u00a0is\u00a0assign\u00a0values\u00a0to\u00a0the\u00a0accumulator.\u00a0So\u00a0I\u00a0can\u00a0remove\u00a0it\u00a0and\u00a0assign\nthe\u00a0result\u00a0of\u00a0the\u00a0pipeline\u00a0to\u00a0the\u00a0accumulator:\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0acquireData(input)\u00a0{\nwww.EBooksWorld.ir\n", "page": 265, "type": "text", "section": "Page 265"}
{"text": "\u00a0\u00a0const\u00a0lines\u00a0=\u00a0input.split(\"\\n\")\u037e\n\u00a0\u00a0const\u00a0result\u00a0=\u00a0lines\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0.slice(1)\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0.filter(line\u00a0=>\u00a0line.trim()\u00a0!==\u00a0\"\")\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0.map(line\u00a0=>\u00a0line.split(\",\"))\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0.filter(record\u00a0=>\u00a0record[1].trim()\u00a0===\u00a0\"India\")\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0.map(record\u00a0=>\u00a0({city:\u00a0record[0].trim(),\u00a0phone:\u00a0record[2].trim()}))\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u037e\n\u00a0\u00a0for\u00a0(const\u00a0line\u00a0of\u00a0loopItems)\u00a0{\n\u00a0\u00a0\u00a0\u00a0const\u00a0record\u00a0=\u00a0line\u037e\n\u00a0\u00a0\u00a0\u00a0result.push(line)\u037e\n\u00a0\u00a0}\n\u00a0\u00a0return\u00a0result\u037e\n}\nThat\u2019s\u00a0the\u00a0core\u00a0of\u00a0the\u00a0refactoring.\u00a0But\u00a0I\u00a0do\u00a0have\u00a0some\u00a0cleanup\u00a0I\u2019d\u00a0like\u00a0to\u00a0do.\u00a0I\u00a0inlined\nresult,\u00a0renamed\u00a0some\u00a0lambda\u00a0variables,\u00a0and\u00a0made\u00a0the\u00a0layout\u00a0read\u00a0more\u00a0like\u00a0a\u00a0table.\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0acquireData(input)\u00a0{\n\u00a0\u00a0const\u00a0lines\u00a0=\u00a0input.split(\"\\n\")\u037e\n\u00a0\u00a0return\u00a0lines\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0.slice\u00a0\u00a0(1)\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0.filter\u00a0(line\u00a0\u00a0\u00a0=>\u00a0line.trim()\u00a0!==\u00a0\"\")\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0.map\u00a0\u00a0\u00a0\u00a0(line\u00a0\u00a0\u00a0=>\u00a0line.split(\",\"))\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0.filter\u00a0(fields\u00a0=>\u00a0fields[1].trim()\u00a0===\u00a0\"India\")\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0.map\u00a0\u00a0\u00a0\u00a0(fields\u00a0=>\u00a0({city:\u00a0fields[0].trim(),\u00a0phone:\u00a0fields[2].trim()}))\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u037e\n}\nI\u00a0thought\u00a0about\u00a0inlining\u00a0lines\u00a0too,\u00a0but\u00a0felt\u00a0that\u00a0its\u00a0presence\u00a0explains\u00a0what\u2019s\nhappening.\nFurther Reading\nFor\u00a0more\u00a0examples\u00a0on\u00a0turning\u00a0loops\u00a0into\u00a0pipelines,\u00a0see\u00a0my\u00a0essay\u00a0\u201cRefactoring\u00a0with\nLoops\u00a0and\u00a0Collection\u00a0Pipelines\u201d\u00a0[mf\u00adref\u00adpipe].\nREMOVE DEAD CODE\nwww.EBooksWorld.ir\n", "page": 266, "type": "text", "section": "Page 266"}
{"text": "Motivation\nWhen\u00a0we\u00a0put\u00a0code\u00a0into\u00a0production,\u00a0even\u00a0on\u00a0people\u2019s\u00a0devices,\u00a0we\u00a0aren\u2019t\u00a0charged\u00a0by\nweight.\u00a0A\u00a0few\u00a0unused\u00a0lines\u00a0of\u00a0code\u00a0don\u2019t\u00a0slow\u00a0down\u00a0our\u00a0systems\u00a0nor\u00a0take\u00a0up\u00a0significant\nmemory\u037e\u00a0indeed,\u00a0decent\u00a0compilers\u00a0will\u00a0instinctively\u00a0remove\u00a0them.\u00a0But\u00a0unused\u00a0code\u00a0is\nstill\u00a0a\u00a0significant\u00a0burden\u00a0when\u00a0trying\u00a0to\u00a0understand\u00a0how\u00a0the\u00a0software\u00a0works.\u00a0It\u00a0doesn\u2019t\ncarry\u00a0any\u00a0warning\u00a0signs\u00a0telling\u00a0programmers\u00a0that\u00a0they\u00a0can\u00a0ignore\u00a0this\u00a0function\u00a0as\u00a0it\u2019s\nnever\u00a0called\u00a0any\u00a0more,\u00a0so\u00a0they\u00a0still\u00a0have\u00a0to\u00a0spend\u00a0time\u00a0understanding\u00a0what\u00a0it\u2019s\u00a0doing\nand\u00a0why\u00a0changing\u00a0it\u00a0doesn\u2019t\u00a0seem\u00a0to\u00a0alter\u00a0the\u00a0output\u00a0as\u00a0they\u00a0expected.\nOnce\u00a0code\u00a0isn\u2019t\u00a0used\u00a0any\u00a0more,\u00a0we\u00a0should\u00a0delete\u00a0it.\u00a0I\u00a0don\u2019t\u00a0worry\u00a0that\u00a0I\u00a0may\u00a0need\u00a0it\nsometime\u00a0in\u00a0the\u00a0future\u037e\u00a0should\u00a0that\u00a0happen,\u00a0I\u00a0have\u00a0my\u00a0version\u00a0control\u00a0system\u00a0so\u00a0I\u00a0can\nalways\u00a0dig\u00a0it\u00a0out\u00a0again.\u00a0If\u00a0it\u2019s\u00a0something\u00a0I\u00a0really\u00a0think\u00a0I\u00a0may\u00a0need\u00a0one\u00a0day,\u00a0I\u00a0might\u00a0put\u00a0a\ncomment\u00a0into\u00a0the\u00a0code\u00a0that\u00a0mentions\u00a0the\u00a0lost\u00a0code\u00a0and\u00a0which\u00a0revision\u00a0it\u00a0was\u00a0removed\nin\u2014but,\u00a0honestly,\u00a0I\u00a0can\u2019t\u00a0remember\u00a0the\u00a0last\u00a0time\u00a0I\u00a0did\u00a0that,\u00a0or\u00a0regretted\u00a0that\u00a0I\u00a0hadn\u2019t\ndone\u00a0it.\nCommenting\u00a0out\u00a0dead\u00a0code\u00a0was\u00a0once\u00a0a\u00a0common\u00a0habit.\u00a0This\u00a0was\u00a0useful\u00a0in\u00a0the\u00a0days\nbefore\u00a0version\u00a0control\u00a0systems\u00a0were\u00a0widely\u00a0used,\u00a0or\u00a0when\u00a0they\u00a0were\u00a0inconvenient.\u00a0Now,\nwhen\u00a0I\u00a0can\u00a0put\u00a0even\u00a0the\u00a0smallest\u00a0code\u00a0base\u00a0under\u00a0version\u00a0control,\u00a0that\u2019s\u00a0no\u00a0longer\nneeded.\nMechanics\nIf\u00a0the\u00a0dead\u00a0code\u00a0can\u00a0be\u00a0referenced\u00a0from\u00a0outside,\u00a0e.g.,\u00a0when\u00a0it\u2019s\u00a0a\u00a0full\u00a0function,\u00a0do\u00a0a\nsearch\u00a0to\u00a0check\u00a0for\u00a0callers.\nRemove\u00a0the\u00a0dead\u00a0code.\nTest.\nwww.EBooksWorld.ir\n", "page": 267, "type": "text", "section": "Page 267"}
{"text": "Chapter 9\nOrganizing Data\nData\u00a0structures\u00a0play\u00a0an\u00a0important\u00a0role\u00a0in\u00a0our\u00a0programs,\u00a0so\u00a0it\u2019s\u00a0no\u00a0great\u00a0shock\u00a0that\u00a0I\nhave\u00a0a\u00a0clutch\u00a0of\u00a0refactorings\u00a0that\u00a0focus\u00a0on\u00a0them.\u00a0A\u00a0value\u00a0that\u2019s\u00a0used\u00a0for\u00a0different\npurposes\u00a0is\u00a0a\u00a0breeding\u00a0ground\u00a0for\u00a0confusion\u00a0and\u00a0bugs\u2014so,\u00a0when\u00a0I\u00a0see\u00a0one,\u00a0I\u00a0use\u00a0Split\nVariable\u00a0(240)\u00a0to\u00a0separate\u00a0the\u00a0usages.\u00a0As\u00a0with\u00a0any\u00a0program\u00a0element,\u00a0getting\u00a0a\nvariable\u2019s\u00a0name\u00a0right\u00a0is\u00a0tricky\u00a0and\u00a0important,\u00a0so\u00a0Rename\u00a0Variable\u00a0(137)\u00a0is\u00a0often\u00a0my\nfriend.\u00a0But\u00a0sometimes\u00a0the\u00a0best\u00a0thing\u00a0I\u00a0can\u00a0do\u00a0with\u00a0a\u00a0variable\u00a0is\u00a0to\u00a0get\u00a0rid\u00a0of\u00a0it\ncompletely\u2014with\u00a0Replace\u00a0Derived\u00a0Variable\u00a0with\u00a0Query\u00a0(248).\nI\u00a0often\u00a0find\u00a0problems\u00a0in\u00a0a\u00a0code\u00a0base\u00a0due\u00a0to\u00a0a\u00a0confusion\u00a0between\u00a0references\u00a0and\u00a0values,\nso\u00a0I\u00a0use\u00a0Change\u00a0Reference\u00a0to\u00a0Value\u00a0(252)\u00a0and\u00a0Change\u00a0Value\u00a0to\u00a0Reference\u00a0(256)\u00a0to\nchange\u00a0between\u00a0these\u00a0styles.\nSPLIT VARIABLE\nformerly:\u00a0Remove\u00a0Assignments\u00a0to\u00a0Parameters\nformerly:\u00a0Split\u00a0Temp\nHistory\nTopics\nTutorials\nOffers & Deals\nHighlights\nSettings\nSupport\nSign Out\nwww.EBooksWorld.ir\n", "page": 268, "type": "text", "section": "Page 268"}
{"text": "Motivation\nVariables\u00a0have\u00a0various\u00a0uses.\u00a0Some\u00a0of\u00a0these\u00a0uses\u00a0naturally\u00a0lead\u00a0to\u00a0the\u00a0variable\u00a0being\nassigned\u00a0to\u00a0several\u00a0times.\u00a0Loop\u00a0variables\u00a0change\u00a0for\u00a0each\u00a0run\u00a0of\u00a0a\u00a0loop\u00a0(such\u00a0as\u00a0the\u00a0i\u00a0in\nfor\u00a0(let\u00a0i=0\u037e\u00a0i<10\u037e\u00a0i++)).\u00a0Collecting\u00a0variables\u00a0store\u00a0a\u00a0value\u00a0that\u00a0is\u00a0built\u00a0up\nduring\u00a0the\u00a0method.\nMany\u00a0other\u00a0variables\u00a0are\u00a0used\u00a0to\u00a0hold\u00a0the\u00a0result\u00a0of\u00a0a\u00a0long\u00adwinded\u00a0bit\u00a0of\u00a0code\u00a0for\u00a0easy\nreference\u00a0later.\u00a0These\u00a0kinds\u00a0of\u00a0variables\u00a0should\u00a0be\u00a0set\u00a0only\u00a0once.\u00a0If\u00a0they\u00a0are\u00a0set\u00a0more\nthan\u00a0once,\u00a0it\u00a0is\u00a0a\u00a0sign\u00a0that\u00a0they\u00a0have\u00a0more\u00a0than\u00a0one\u00a0responsibility\u00a0within\u00a0the\u00a0method.\nAny\u00a0variable\u00a0with\u00a0more\u00a0than\u00a0one\u00a0responsibility\u00a0should\u00a0be\u00a0replaced\u00a0with\u00a0multiple\nvariables,\u00a0one\u00a0for\u00a0each\u00a0responsibility.\u00a0Using\u00a0a\u00a0variable\u00a0for\u00a0two\u00a0different\u00a0things\u00a0is\u00a0very\nconfusing\u00a0for\u00a0the\u00a0reader.\nMechanics\nChange\u00a0the\u00a0name\u00a0of\u00a0the\u00a0variable\u00a0at\u00a0its\u00a0declaration\u00a0and\u00a0first\u00a0assignment.\nIf\u00a0the\u00a0later\u00a0assignments\u00a0are\u00a0of\u00a0the\u00a0form\u00a0i\u00a0=\u00a0i\u00a0+\u00a0something,\u00a0that\u00a0is\u00a0a\u00a0collecting\nvariable,\u00a0so\u00a0don\u2019t\u00a0split\u00a0it.\u00a0A\u00a0collecting\u00a0variable\u00a0is\u00a0often\u00a0used\u00a0for\u00a0calculating\u00a0sums,\nstring\u00a0concatenation,\u00a0writing\u00a0to\u00a0a\u00a0stream,\u00a0or\u00a0adding\u00a0to\u00a0a\u00a0collection.\nIf\u00a0possible,\u00a0declare\u00a0the\u00a0new\u00a0variable\u00a0as\u00a0immutable.\nChange\u00a0all\u00a0references\u00a0of\u00a0the\u00a0variable\u00a0up\u00a0to\u00a0its\u00a0second\u00a0assignment.\nwww.EBooksWorld.ir\n", "page": 269, "type": "text", "section": "Page 269"}
{"text": "Test.\nRepeat\u00a0in\u00a0stages,\u00a0at\u00a0each\u00a0stage\u00a0renaming\u00a0the\u00a0variable\u00a0at\u00a0the\u00a0declaration\u00a0and\nchanging\u00a0references\u00a0until\u00a0the\u00a0next\u00a0assignment,\u00a0until\u00a0you\u00a0reach\u00a0the\u00a0final\u00a0assignment.\nExample\nFor\u00a0this\u00a0example,\u00a0I\u00a0compute\u00a0the\u00a0distance\u00a0traveled\u00a0by\u00a0a\u00a0haggis.\u00a0From\u00a0a\u00a0standing\u00a0start,\u00a0a\nhaggis\u00a0experiences\u00a0an\u00a0initial\u00a0force.\u00a0After\u00a0a\u00a0delay,\u00a0a\u00a0secondary\u00a0force\u00a0kicks\u00a0in\u00a0to\u00a0further\naccelerate\u00a0the\u00a0haggis.\u00a0Using\u00a0the\u00a0common\u00a0laws\u00a0of\u00a0motion,\u00a0I\u00a0can\u00a0compute\u00a0the\u00a0distance\ntraveled\u00a0as\u00a0follows:\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0distanceTravelled\u00a0(scenario,\u00a0time)\u00a0{\n\u00a0\u00a0let\u00a0result\u037e\n\u00a0\u00a0let\u00a0acc\u00a0=\u00a0scenario.primaryForce\u00a0/\u00a0scenario.mass\u037e\n\u00a0\u00a0let\u00a0primaryTime\u00a0=\u00a0Math.min(time,\u00a0scenario.delay)\u037e\n\u00a0\u00a0result\u00a0=\u00a00.5\u00a0*\u00a0acc\u00a0*\u00a0primaryTime\u00a0*\u00a0primaryTime\u037e\n\u00a0\u00a0let\u00a0secondaryTime\u00a0=\u00a0time\u00a0\u00ad\u00a0scenario.delay\u037e\n\u00a0\u00a0if\u00a0(secondaryTime\u00a0>\u00a00)\u00a0{\n\u00a0\u00a0\u00a0\u00a0let\u00a0primaryVelocity\u00a0=\u00a0acc\u00a0*\u00a0scenario.delay\u037e\n\u00a0\u00a0\u00a0\u00a0acc\u00a0=\u00a0(scenario.primaryForce\u00a0+\u00a0scenario.secondaryForce)\u00a0/\u00a0scenario.mass\u037e\n\u00a0\u00a0\u00a0\u00a0result\u00a0+=\u00a0primaryVelocity\u00a0*\u00a0secondaryTime\u00a0+\u00a00.5\u00a0*\u00a0acc\u00a0*\u00a0secondaryTime\u00a0*\u00a0seco\n\u00a0\u00a0}\n\u00a0\u00a0return\u00a0result\u037e\n}\nA\u00a0nice\u00a0awkward\u00a0little\u00a0function.\u00a0The\u00a0interesting\u00a0thing\u00a0for\u00a0our\u00a0example\u00a0is\u00a0the\u00a0way\u00a0the\nvariable\u00a0acc\u00a0is\u00a0set\u00a0twice.\u00a0It\u00a0has\u00a0two\u00a0responsibilities:\u00a0one\u00a0to\u00a0hold\u00a0the\u00a0initial\u00a0acceleration\nfrom\u00a0the\u00a0first\u00a0force\u00a0and\u00a0another\u00a0later\u00a0to\u00a0hold\u00a0the\u00a0acceleration\u00a0from\u00a0both\u00a0forces.\u00a0I\u00a0want\nto\u00a0split\u00a0this\u00a0variable.\nWhen\u00a0trying\u00a0to\u00a0understand\u00a0how\u00a0a\u00a0variable\u00a0is\u00a0used,\u00a0it\u2019s\u00a0handy\u00a0if\u00a0my\u00a0editor\u00a0can\u00a0highlight\nall\u00a0occurrences\u00a0of\u00a0a\u00a0symbol\u00a0within\u00a0a\u00a0function\u00a0or\u00a0file.\u00a0Most\u00a0modern\u00a0editors\u00a0can\u00a0do\u00a0this\npretty\u00a0easily.\nI\u00a0start\u00a0at\u00a0the\u00a0beginning\u00a0by\u00a0changing\u00a0the\u00a0name\u00a0of\u00a0the\u00a0variable\u00a0and\u00a0declaring\u00a0the\u00a0new\nname\u00a0as\u00a0const.\u00a0Then,\u00a0I\u00a0change\u00a0all\u00a0references\u00a0to\u00a0the\u00a0variable\u00a0from\u00a0that\u00a0point\u00a0up\u00a0to\u00a0the\nnext\u00a0assignment.\u00a0At\u00a0the\u00a0next\u00a0assignment,\u00a0I\u00a0declare\u00a0it:\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nwww.EBooksWorld.ir\n", "page": 270, "type": "text", "section": "Page 270"}
{"text": "function\u00a0distanceTravelled\u00a0(scenario,\u00a0time)\u00a0{\n\u00a0\u00a0let\u00a0result\u037e\n\u00a0\u00a0const\u00a0primaryAcceleration\u00a0=\u00a0scenario.primaryForce\u00a0/\u00a0scenario.mass\u037e\n\u00a0\u00a0let\u00a0primaryTime\u00a0=\u00a0Math.min(time,\u00a0scenario.delay)\u037e\n\u00a0\u00a0result\u00a0=\u00a00.5\u00a0*\u00a0primaryAcceleration\u00a0*\u00a0primaryTime\u00a0*\u00a0primaryTime\u037e\n\u00a0\u00a0let\u00a0secondaryTime\u00a0=\u00a0time\u00a0\u00ad\u00a0scenario.delay\u037e\n\u00a0\u00a0if\u00a0(secondaryTime\u00a0>\u00a00)\u00a0{\n\u00a0\u00a0\u00a0\u00a0let\u00a0primaryVelocity\u00a0=\u00a0primaryAcceleration\u00a0*\u00a0scenario.delay\u037e\n\u00a0\u00a0\u00a0\u00a0let\u00a0acc\u00a0=\u00a0(scenario.primaryForce\u00a0+\u00a0scenario.secondaryForce)\u00a0/\u00a0scenario.mass\u037e\n\u00a0\u00a0\u00a0\u00a0result\u00a0+=\u00a0primaryVelocity\u00a0*\u00a0secondaryTime\u00a0+\u00a00.5\u00a0*\u00a0acc\u00a0*\u00a0secondaryTime\u00a0*\u00a0seco\n\u00a0\u00a0}\n\u00a0\u00a0return\u00a0result\u037e\n}\nI\u00a0choose\u00a0the\u00a0new\u00a0name\u00a0to\u00a0represent\u00a0only\u00a0the\u00a0first\u00a0use\u00a0of\u00a0the\u00a0variable.\u00a0I\u00a0make\u00a0it\u00a0const\u00a0to\nensure\u00a0it\u00a0is\u00a0only\u00a0assigned\u00a0once.\u00a0I\u00a0can\u00a0then\u00a0declare\u00a0the\u00a0original\u00a0variable\u00a0at\u00a0its\u00a0second\nassignment.\u00a0Now\u00a0I\u00a0can\u00a0compile\u00a0and\u00a0test,\u00a0and\u00a0all\u00a0should\u00a0work.\nI\u00a0continue\u00a0on\u00a0the\u00a0second\u00a0assignment\u00a0of\u00a0the\u00a0variable.\u00a0This\u00a0removes\u00a0the\u00a0original\u00a0variable\nname\u00a0completely,\u00a0replacing\u00a0it\u00a0with\u00a0a\u00a0new\u00a0variable\u00a0named\u00a0for\u00a0the\u00a0second\u00a0use.\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0distanceTravelled\u00a0(scenario,\u00a0time)\u00a0{\n\u00a0\u00a0let\u00a0result\u037e\n\u00a0\u00a0const\u00a0primaryAcceleration\u00a0=\u00a0scenario.primaryForce\u00a0/\u00a0scenario.mass\u037e\n\u00a0\u00a0let\u00a0primaryTime\u00a0=\u00a0Math.min(time,\u00a0scenario.delay)\u037e\n\u00a0\u00a0result\u00a0=\u00a00.5\u00a0*\u00a0primaryAcceleration\u00a0*\u00a0primaryTime\u00a0*\u00a0primaryTime\u037e\n\u00a0\u00a0let\u00a0secondaryTime\u00a0=\u00a0time\u00a0\u00ad\u00a0scenario.delay\u037e\n\u00a0\u00a0if\u00a0(secondaryTime\u00a0>\u00a00)\u00a0{\n\u00a0\u00a0\u00a0\u00a0let\u00a0primaryVelocity\u00a0=\u00a0primaryAcceleration\u00a0*\u00a0scenario.delay\u037e\n\u00a0\u00a0\u00a0\u00a0const\u00a0secondaryAcceleration\u00a0=\u00a0(scenario.primaryForce\u00a0+\u00a0scenario.secondaryFor\n\u00a0\u00a0\u00a0\u00a0result\u00a0+=\u00a0primaryVelocity\u00a0*\u00a0secondaryTime\u00a0+\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a00.5\u00a0*\u00a0secondaryAcceleration\u00a0*\u00a0secondaryTime\u00a0*\u00a0secondaryTime\u037e\n\u00a0\u00a0}\n\u00a0\u00a0return\u00a0result\u037e\n}\nI\u2019m\u00a0sure\u00a0you\u00a0can\u00a0think\u00a0of\u00a0a\u00a0lot\u00a0more\u00a0refactoring\u00a0to\u00a0be\u00a0done\u00a0here.\u00a0Enjoy\u00a0it.\u00a0(I\u2019m\u00a0sure\u00a0it\u2019s\nbetter\u00a0than\u00a0eating\u00a0the\u00a0haggis\u2014do\u00a0you\u00a0know\u00a0what\u00a0they\u00a0put\u00a0in\u00a0those\u00a0things?)\nExample: Assigning to an Input Parameter\nAnother\u00a0case\u00a0of\u00a0splitting\u00a0a\u00a0variable\u00a0is\u00a0where\u00a0the\u00a0variable\u00a0is\u00a0declared\u00a0as\u00a0an\u00a0input\nparameter.\u00a0Consider\u00a0something\u00a0like\nwww.EBooksWorld.ir\n", "page": 271, "type": "text", "section": "Page 271"}
{"text": "Click\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0discount\u00a0(inputValue,\u00a0quantity)\u00a0{\n\u00a0\u00a0if\u00a0(inputValue\u00a0>\u00a050)\u00a0inputValue\u00a0=\u00a0inputValue\u00a0\u00ad\u00a02\u037e\n\u00a0\u00a0if\u00a0(quantity\u00a0>\u00a0100)\u00a0inputValue\u00a0=\u00a0inputValue\u00a0\u00ad\u00a01\u037e\n\u00a0\u00a0return\u00a0inputValue\u037e\n}\nHere\u00a0inputValue\u00a0is\u00a0used\u00a0both\u00a0to\u00a0supply\u00a0an\u00a0input\u00a0to\u00a0the\u00a0function\u00a0and\u00a0to\u00a0hold\u00a0the\u00a0result\nfor\u00a0the\u00a0caller.\u00a0(Since\u00a0JavaScript\u00a0has\u00a0call\u00adby\u00advalue\u00a0parameters,\u00a0any\u00a0modification\u00a0of\ninputValue\u00a0isn\u2019t\u00a0seen\u00a0by\u00a0the\u00a0caller.)\nIn\u00a0this\u00a0situation,\u00a0I\u00a0would\u00a0split\u00a0that\u00a0variable.\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0discount\u00a0(originalInputValue,\u00a0quantity)\u00a0{\n\u00a0\u00a0let\u00a0inputValue\u00a0=\u00a0originalInputValue\u037e\n\u00a0\u00a0if\u00a0(inputValue\u00a0>\u00a050)\u00a0inputValue\u00a0=\u00a0inputValue\u00a0\u00ad\u00a02\u037e\n\u00a0\u00a0if\u00a0(quantity\u00a0>\u00a0100)\u00a0inputValue\u00a0=\u00a0inputValue\u00a0\u00ad\u00a01\u037e\n\u00a0\u00a0return\u00a0inputValue\u037e\n}\nI\u00a0then\u00a0perform\u00a0Rename\u00a0Variable\u00a0(137)\u00a0twice\u00a0to\u00a0get\u00a0better\u00a0names.\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0discount\u00a0(inputValue,\u00a0quantity)\u00a0{\n\u00a0\u00a0let\u00a0result\u00a0=\u00a0inputValue\u037e\n\u00a0\u00a0if\u00a0(inputValue\u00a0>\u00a050)\u00a0result\u00a0=\u00a0result\u00a0\u00ad\u00a02\u037e\n\u00a0\u00a0if\u00a0(quantity\u00a0>\u00a0100)\u00a0result\u00a0=\u00a0result\u00a0\u00ad\u00a01\u037e\n\u00a0\u00a0return\u00a0result\u037e\n}\nYou\u2019ll\u00a0notice\u00a0that\u00a0I\u00a0changed\u00a0the\u00a0second\u00a0line\u00a0to\u00a0use\u00a0inputValue\u00a0as\u00a0its\u00a0data\u00a0source.\nAlthough\u00a0the\u00a0two\u00a0are\u00a0the\u00a0same,\u00a0I\u00a0think\u00a0that\u00a0line\u00a0is\u00a0really\u00a0about\u00a0applying\u00a0the\nmodification\u00a0to\u00a0the\u00a0result\u00a0value\u00a0based\u00a0on\u00a0the\u00a0original\u00a0input\u00a0value,\u00a0not\u00a0the\n(coincidentally\u00a0same)\u00a0value\u00a0of\u00a0the\u00a0result\u00a0accumulator.\nRENAME FIELD\nwww.EBooksWorld.ir\n", "page": 272, "type": "text", "section": "Page 272"}
{"text": "Motivation\nNames\u00a0are\u00a0important,\u00a0and\u00a0field\u00a0names\u00a0in\u00a0record\u00a0structures\u00a0can\u00a0be\u00a0especially\u00a0important\nwhen\u00a0those\u00a0record\u00a0structures\u00a0are\u00a0widely\u00a0used\u00a0across\u00a0a\u00a0program.\u00a0Data\u00a0structures\u00a0play\u00a0a\nparticularly\u00a0important\u00a0role\u00a0in\u00a0understanding.\u00a0Many\u00a0years\u00a0ago\u00a0Fred\u00a0Brooks\u00a0said,\u00a0\u201cShow\nme\u00a0your\u00a0flowcharts\u00a0and\u00a0conceal\u00a0your\u00a0tables,\u00a0and\u00a0I\u00a0shall\u00a0continue\u00a0to\u00a0be\u00a0mystified.\u00a0Show\nme\u00a0your\u00a0tables,\u00a0and\u00a0I\u00a0won\u2019t\u00a0usually\u00a0need\u00a0your\u00a0flowcharts\u037e\u00a0they\u2019ll\u00a0be\u00a0obvious.\u201d\u00a0While\u00a0I\ndon\u2019t\u00a0see\u00a0many\u00a0people\u00a0drawing\u00a0flowcharts\u00a0these\u00a0days,\u00a0the\u00a0adage\u00a0remains\u00a0valid.\u00a0Data\nstructures\u00a0are\u00a0the\u00a0key\u00a0to\u00a0understanding\u00a0what\u2019s\u00a0going\u00a0on.\nSince\u00a0these\u00a0data\u00a0structures\u00a0are\u00a0so\u00a0important,\u00a0it\u2019s\u00a0essential\u00a0to\u00a0keep\u00a0them\u00a0clear.\u00a0Like\nanything\u00a0else,\u00a0my\u00a0understanding\u00a0of\u00a0data\u00a0improves\u00a0the\u00a0more\u00a0I\u00a0work\u00a0on\u00a0the\u00a0software,\u00a0so\nit\u2019s\u00a0vital\u00a0that\u00a0this\u00a0improved\u00a0understanding\u00a0is\u00a0embedded\u00a0into\u00a0the\u00a0program.\nYou\u00a0may\u00a0want\u00a0to\u00a0rename\u00a0a\u00a0field\u00a0in\u00a0a\u00a0record\u00a0structure,\u00a0but\u00a0the\u00a0idea\u00a0also\u00a0applies\u00a0to\nclasses.\u00a0Getter\u00a0and\u00a0setter\u00a0methods\u00a0form\u00a0an\u00a0effective\u00a0field\u00a0for\u00a0users\u00a0of\u00a0the\u00a0class.\nRenaming\u00a0them\u00a0is\u00a0just\u00a0as\u00a0important\u00a0as\u00a0with\u00a0bare\u00a0record\u00a0structures.\nMechanics\nIf\u00a0the\u00a0record\u00a0has\u00a0limited\u00a0scope,\u00a0rename\u00a0all\u00a0accesses\u00a0to\u00a0the\u00a0field\u00a0and\u00a0test\u037e\u00a0no\u00a0need\u00a0to\ndo\u00a0the\u00a0rest\u00a0of\u00a0the\u00a0mechanics.\nIf\u00a0the\u00a0record\u00a0isn\u2019t\u00a0already\u00a0encapsulated,\u00a0apply\u00a0Encapsulate\u00a0Record\u00a0(162).\nRename\u00a0the\u00a0private\u00a0field\u00a0inside\u00a0the\u00a0object,\u00a0adjust\u00a0internal\u00a0methods\u00a0to\u00a0fit.\nTest.\nwww.EBooksWorld.ir\n", "page": 273, "type": "text", "section": "Page 273"}
{"text": "If\u00a0the\u00a0constructor\u00a0uses\u00a0the\u00a0name,\u00a0apply\u00a0Change\u00a0Function\u00a0Declaration\u00a0(124)\u00a0to\nrename\u00a0it.\nApply\u00a0Rename\u00a0Function\u00a0(124)\u00a0to\u00a0the\u00a0accessors.\nExample: Renaming a Field\nI\u2019ll\u00a0start\u00a0with\u00a0a\u00a0constant.\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nconst\u00a0organization\u00a0=\u00a0{name:\u00a0\"Acme\u00a0Gooseberries\",\u00a0country:\u00a0\"GB\"}\u037e\nI\u00a0want\u00a0to\u00a0change\u00a0\u201cname\u201d\u00a0to\u00a0\u201ctitle\u201d.\u00a0The\u00a0object\u00a0is\u00a0widely\u00a0used\u00a0in\u00a0the\u00a0code\u00a0base,\u00a0and\u00a0there\nare\u00a0updates\u00a0to\u00a0the\u00a0title\u00a0in\u00a0the\u00a0code.\u00a0So\u00a0my\u00a0first\u00a0move\u00a0is\u00a0to\u00a0apply\u00a0Encapsulate\u00a0Record\n(162).\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nclass\u00a0Organization\u00a0{\n\u00a0\u00a0constructor(data)\u00a0{\n\u00a0\u00a0\u00a0\u00a0this._name\u00a0=\u00a0data.name\u037e\n\u00a0\u00a0\u00a0\u00a0this._country\u00a0=\u00a0data.country\u037e\n\u00a0\u00a0}\n\u00a0\u00a0get\u00a0name()\u00a0\u00a0\u00a0\u00a0{return\u00a0this._name\u037e}\n\u00a0\u00a0set\u00a0name(aString)\u00a0{this._name\u00a0=\u00a0aString\u037e}\n\u00a0\u00a0get\u00a0country()\u00a0\u00a0\u00a0\u00a0{return\u00a0this._country\u037e}\n\u00a0\u00a0set\u00a0country(aCountryCode)\u00a0{this._country\u00a0=\u00a0aCountryCode\u037e}\n}\nconst\u00a0organization\u00a0=\u00a0new\u00a0Organization({name:\u00a0\"Acme\u00a0Gooseberries\",\u00a0country:\u00a0\"GB\"}\nNow\u00a0that\u00a0I\u2019ve\u00a0encapsulated\u00a0the\u00a0record\u00a0structure\u00a0into\u00a0the\u00a0class,\u00a0there\u00a0are\u00a0four\u00a0places\u00a0I\nneed\u00a0to\u00a0look\u00a0at\u00a0for\u00a0renaming:\u00a0the\u00a0getting\u00a0function,\u00a0the\u00a0setting\u00a0function,\u00a0the\u00a0constructor,\nand\u00a0the\u00a0internal\u00a0data\u00a0structure.\u00a0While\u00a0that\u00a0may\u00a0sound\u00a0like\u00a0I\u2019ve\u00a0increased\u00a0my\u00a0workload,\nit\u00a0actually\u00a0makes\u00a0my\u00a0work\u00a0easier\u00a0since\u00a0I\u00a0can\u00a0now\u00a0change\u00a0these\u00a0independently\u00a0instead\u00a0of\nall\u00a0at\u00a0once,\u00a0taking\u00a0smaller\u00a0steps.\u00a0Smaller\u00a0steps\u00a0mean\u00a0fewer\u00a0things\u00a0to\u00a0go\u00a0wrong\u00a0in\u00a0each\nstep\u2014therefore,\u00a0less\u00a0work.\u00a0It\u00a0wouldn\u2019t\u00a0be\u00a0less\u00a0work\u00a0if\u00a0I\u00a0never\u00a0made\u00a0mistakes\u2014but\u00a0not\nmaking\u00a0mistakes\u00a0is\u00a0a\u00a0fantasy\u00a0I\u00a0gave\u00a0up\u00a0on\u00a0a\u00a0long\u00a0time\u00a0ago.\nSince\u00a0I\u2019ve\u00a0copied\u00a0the\u00a0input\u00a0data\u00a0structure\u00a0into\u00a0the\u00a0internal\u00a0data\u00a0structure,\u00a0I\u00a0need\u00a0to\nseparate\u00a0them\u00a0so\u00a0I\u00a0can\u00a0work\u00a0on\u00a0them\u00a0independently.\u00a0I\u00a0can\u00a0do\u00a0this\u00a0by\u00a0defining\u00a0a\nwww.EBooksWorld.ir\n", "page": 274, "type": "text", "section": "Page 274"}
{"text": "separate\u00a0field\u00a0and\u00a0adjusting\u00a0the\u00a0constructor\u00a0and\u00a0accessors\u00a0to\u00a0use\u00a0it.\nclass\u00a0Organization\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nclass\u00a0Organization\u00a0{\n\u00a0\u00a0constructor(data)\u00a0{\n\u00a0\u00a0\u00a0\u00a0this._title\u00a0=\u00a0data.name\u037e\n\u00a0\u00a0\u00a0\u00a0this._country\u00a0=\u00a0data.country\u037e\n\u00a0\u00a0}\n\u00a0\u00a0get\u00a0name()\u00a0\u00a0\u00a0\u00a0{return\u00a0this._title\u037e}\n\u00a0\u00a0set\u00a0name(aString)\u00a0{this._title\u00a0=\u00a0aString\u037e}\n\u00a0\u00a0get\u00a0country()\u00a0\u00a0\u00a0\u00a0{return\u00a0this._country\u037e}\n\u00a0\u00a0set\u00a0country(aCountryCode)\u00a0{this._country\u00a0=\u00a0aCountryCode\u037e}\n}\nNext,\u00a0I\u00a0add\u00a0support\u00a0for\u00a0using\u00a0\u201ctitle\u201d\u00a0in\u00a0the\u00a0constructor.\nclass\u00a0Organization\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nclass\u00a0Organization\u00a0{\n\u00a0\u00a0constructor(data)\u00a0{\n\u00a0\u00a0\u00a0\u00a0this._title\u00a0=\u00a0(data.title\u00a0!==\u00a0undefined)\u00a0?\u00a0data.title\u00a0:\u00a0data.name\u037e\n\u00a0\u00a0\u00a0\u00a0this._country\u00a0=\u00a0data.country\u037e\n\u00a0\u00a0}\n\u00a0\u00a0get\u00a0name()\u00a0\u00a0\u00a0\u00a0{return\u00a0this._title\u037e}\n\u00a0\u00a0set\u00a0name(aString)\u00a0{this._title\u00a0=\u00a0aString\u037e}\n\u00a0\u00a0get\u00a0country()\u00a0\u00a0\u00a0\u00a0{return\u00a0this._country\u037e}\n\u00a0\u00a0set\u00a0country(aCountryCode)\u00a0{this._country\u00a0=\u00a0aCountryCode\u037e}\n}\nNow,\u00a0callers\u00a0of\u00a0my\u00a0constructor\u00a0can\u00a0use\u00a0either\u00a0name\u00a0or\u00a0title\u00a0(with\u00a0title\u00a0taking\nprecedence).\u00a0I\u00a0can\u00a0now\u00a0go\u00a0through\u00a0all\u00a0constructor\u00a0callers\u00a0and\u00a0change\u00a0them\u00a0one\u00adby\u00adone\nto\u00a0use\u00a0the\u00a0new\u00a0name.\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nconst\u00a0organization\u00a0=\u00a0new\u00a0Organization({title:\u00a0\"Acme\u00a0Gooseberries\",\u00a0country:\u00a0\"GB\"\nOnce\u00a0I\u2019ve\u00a0done\u00a0all\u00a0of\u00a0them,\u00a0I\u00a0can\u00a0remove\u00a0the\u00a0support\u00a0for\u00a0the\u00a0name.\nwww.EBooksWorld.ir\n", "page": 275, "type": "text", "section": "Page 275"}
{"text": "class\u00a0Organization\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nclass\u00a0Organization\u00a0{\n\u00a0\u00a0constructor(data)\u00a0{\n\u00a0\u00a0\u00a0\u00a0this._title\u00a0=\u00a0data.title\u037e\n\u00a0\u00a0\u00a0\u00a0this._country\u00a0=\u00a0data.country\u037e\n\u00a0\u00a0}\n\u00a0\u00a0get\u00a0name()\u00a0\u00a0\u00a0\u00a0{return\u00a0this._title\u037e}\n\u00a0\u00a0set\u00a0name(aString)\u00a0{this._title\u00a0=\u00a0aString\u037e}\n\u00a0\u00a0get\u00a0country()\u00a0\u00a0\u00a0\u00a0{return\u00a0this._country\u037e}\n\u00a0\u00a0set\u00a0country(aCountryCode)\u00a0{this._country\u00a0=\u00a0aCountryCode\u037e}\n}\nNow\u00a0that\u00a0the\u00a0constructor\u00a0and\u00a0data\u00a0use\u00a0the\u00a0new\u00a0name,\u00a0I\u00a0can\u00a0change\u00a0the\u00a0accessors,\u00a0which\nis\u00a0as\u00a0simple\u00a0as\u00a0applying\u00a0Rename\u00a0Function\u00a0(124)\u00a0to\u00a0each\u00a0one.\nclass\u00a0Organization\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nclass\u00a0Organization\u00a0{\n\u00a0\u00a0constructor(data)\u00a0{\n\u00a0\u00a0\u00a0\u00a0this._title\u00a0=\u00a0data.title\u037e\n\u00a0\u00a0\u00a0\u00a0this._country\u00a0=\u00a0data.country\u037e\n\u00a0\u00a0}\n\u00a0\u00a0get\u00a0title()\u00a0\u00a0\u00a0\u00a0{return\u00a0this._title\u037e}\n\u00a0\u00a0set\u00a0title(aString)\u00a0{this._title\u00a0=\u00a0aString\u037e}\n\u00a0\u00a0get\u00a0country()\u00a0\u00a0\u00a0\u00a0{return\u00a0this._country\u037e}\n\u00a0\u00a0set\u00a0country(aCountryCode)\u00a0{this._country\u00a0=\u00a0aCountryCode\u037e}\n}\nI\u2019ve\u00a0shown\u00a0this\u00a0process\u00a0in\u00a0its\u00a0most\u00a0heavyweight\u00a0form\u00a0needed\u00a0for\u00a0a\u00a0widely\u00a0used\u00a0data\nstructure.\u00a0If\u00a0it\u2019s\u00a0being\u00a0used\u00a0only\u00a0locally,\u00a0as\u00a0in\u00a0a\u00a0single\u00a0function,\u00a0I\u00a0can\u00a0probably\u00a0just\nrename\u00a0the\u00a0various\u00a0properties\u00a0in\u00a0one\u00a0go\u00a0without\u00a0doing\u00a0encapsulation.\u00a0It\u2019s\u00a0a\u00a0matter\u00a0of\njudgment\u00a0when\u00a0to\u00a0apply\u00a0to\u00a0the\u00a0full\u00a0mechanics\u00a0here\u2014but,\u00a0as\u00a0usual\u00a0with\u00a0refactoring,\u00a0if\nmy\u00a0tests\u00a0break,\u00a0that\u2019s\u00a0a\u00a0sign\u00a0I\u00a0need\u00a0to\u00a0use\u00a0the\u00a0more\u00a0gradual\u00a0procedure.\nSome\u00a0languages\u00a0allow\u00a0me\u00a0to\u00a0make\u00a0a\u00a0data\u00a0structure\u00a0immutable.\u00a0In\u00a0this\u00a0case,\u00a0rather\u00a0than\nencapsulating\u00a0it,\u00a0I\u00a0can\u00a0copy\u00a0the\u00a0value\u00a0to\u00a0the\u00a0new\u00a0name,\u00a0gradually\u00a0change\u00a0the\u00a0users,\u00a0then\nremove\u00a0the\u00a0old\u00a0name.\u00a0Duplicating\u00a0data\u00a0is\u00a0a\u00a0recipe\u00a0for\u00a0disaster\u00a0with\u00a0mutable\u00a0data\nstructures\u037e\u00a0removing\u00a0such\u00a0disasters\u00a0is\u00a0why\u00a0immutable\u00a0data\u00a0is\u00a0so\u00a0popular.\nREPLACE DERIVED VARIABLE WITH QUERY\nwww.EBooksWorld.ir\n", "page": 276, "type": "text", "section": "Page 276"}
{"text": "REPLACE DERIVED VARIABLE WITH QUERY\nMotivation\nOne\u00a0of\u00a0the\u00a0biggest\u00a0sources\u00a0of\u00a0problems\u00a0in\u00a0software\u00a0is\u00a0mutable\u00a0data.\u00a0Data\u00a0changes\u00a0can\noften\u00a0couple\u00a0together\u00a0parts\u00a0of\u00a0code\u00a0in\u00a0awkward\u00a0ways,\u00a0with\u00a0changes\u00a0in\u00a0one\u00a0part\u00a0leading\nto\u00a0knock\u00adon\u00a0effects\u00a0that\u00a0are\u00a0hard\u00a0to\u00a0spot.\u00a0In\u00a0many\u00a0situations\u00a0it\u2019s\u00a0not\u00a0realistic\u00a0to\u00a0entirely\nremove\u00a0mutable\u00a0data\u2014but\u00a0I\u00a0do\u00a0advocate\u00a0minimizing\u00a0the\u00a0scope\u00a0of\u00a0mutable\u00a0data\u00a0at\u00a0much\nas\u00a0possible.\nOne\u00a0way\u00a0I\u00a0can\u00a0make\u00a0a\u00a0big\u00a0impact\u00a0is\u00a0by\u00a0removing\u00a0any\u00a0variables\u00a0that\u00a0I\u00a0could\u00a0just\u00a0as\u00a0easily\ncalculate.\u00a0A\u00a0calculation\u00a0often\u00a0makes\u00a0it\u00a0clearer\u00a0what\u00a0the\u00a0meaning\u00a0of\u00a0the\u00a0data\u00a0is,\u00a0and\u00a0it\u00a0is\nprotected\u00a0from\u00a0being\u00a0corrupted\u00a0when\u00a0you\u00a0fail\u00a0to\u00a0update\u00a0the\u00a0variable\u00a0as\u00a0the\u00a0source\u00a0data\nchanges.\nA\u00a0reasonable\u00a0exception\u00a0to\u00a0this\u00a0is\u00a0when\u00a0the\u00a0source\u00a0data\u00a0for\u00a0the\u00a0calculation\u00a0is\u00a0immutable\nand\u00a0we\u00a0can\u00a0force\u00a0the\u00a0result\u00a0to\u00a0being\u00a0immutable\u00a0too.\u00a0Transformation\u00a0operations\u00a0that\ncreate\u00a0new\u00a0data\u00a0structures\u00a0are\u00a0thus\u00a0reasonable\u00a0to\u00a0keep\u00a0even\u00a0if\u00a0they\u00a0could\u00a0be\u00a0replaced\nwith\u00a0calculations.\u00a0Indeed,\u00a0there\u00a0is\u00a0a\u00a0duality\u00a0here\u00a0between\u00a0objects\u00a0that\u00a0wrap\u00a0a\u00a0data\nstructure\u00a0with\u00a0a\u00a0series\u00a0of\u00a0calculated\u00a0properties\u00a0and\u00a0functions\u00a0that\u00a0transform\u00a0one\u00a0data\nstructure\u00a0into\u00a0another.\u00a0The\u00a0object\u00a0route\u00a0is\u00a0clearly\u00a0better\u00a0when\u00a0the\u00a0source\u00a0data\u00a0changes\nand\u00a0you\u00a0would\u00a0have\u00a0to\u00a0manage\u00a0the\u00a0lifetime\u00a0of\u00a0the\u00a0derived\u00a0data\u00a0structures.\u00a0But\u00a0if\u00a0the\nsource\u00a0data\u00a0is\u00a0immutable,\u00a0or\u00a0the\u00a0derived\u00a0data\u00a0is\u00a0very\u00a0transient,\u00a0then\u00a0both\u00a0approaches\nare\u00a0effective.\nMechanics\nwww.EBooksWorld.ir\n", "page": 277, "type": "text", "section": "Page 277"}
{"text": "Identify\u00a0all\u00a0points\u00a0of\u00a0update\u00a0for\u00a0the\u00a0variable.\u00a0If\u00a0necessary,\u00a0use\u00a0Split\u00a0Variable\u00a0(240)\nto\u00a0separate\u00a0each\u00a0point\u00a0of\u00a0update.\nCreate\u00a0a\u00a0function\u00a0that\u00a0calculates\u00a0the\u00a0value\u00a0of\u00a0the\u00a0variable.\nUse\u00a0Introduce\u00a0Assertion\u00a0(302)\u00a0to\u00a0assert\u00a0that\u00a0the\u00a0variable\u00a0and\u00a0the\u00a0calculation\u00a0give\nthe\u00a0same\u00a0result\u00a0whenever\u00a0the\u00a0variable\u00a0is\u00a0used.\nIf\u00a0necessary,\u00a0use\u00a0Encapsulate\u00a0Variable\u00a0(132)\u00a0to\u00a0provide\u00a0a\u00a0home\u00a0for\u00a0the\u00a0assertion.\nTest.\nReplace\u00a0any\u00a0reader\u00a0of\u00a0the\u00a0variable\u00a0with\u00a0a\u00a0call\u00a0to\u00a0the\u00a0new\u00a0function.\nTest.\nApply\u00a0Remove\u00a0Dead\u00a0Code\u00a0(237)\u00a0to\u00a0the\u00a0declaration\u00a0and\u00a0updates\u00a0to\u00a0the\u00a0variable.\nExample\nHere\u2019s\u00a0a\u00a0small\u00a0but\u00a0perfectly\u00a0formed\u00a0example\u00a0of\u00a0ugliness:\nclass\u00a0ProductionPlan\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nget\u00a0production()\u00a0{return\u00a0this._production\u037e}\napplyAdjustment(anAdjustment)\u00a0{\n\u00a0\u00a0this._adjustments.push(anAdjustment)\u037e\n\u00a0\u00a0this._production\u00a0+=\u00a0anAdjustment.amount\u037e\n}\nUgliness\u00a0is\u00a0in\u00a0the\u00a0eye\u00a0of\u00a0beholder\u037e\u00a0here,\u00a0I\u00a0see\u00a0ugliness\u00a0in\u00a0duplication\u2014not\u00a0the\u00a0common\nduplication\u00a0of\u00a0code\u00a0but\u00a0duplication\u00a0of\u00a0data.\u00a0When\u00a0I\u00a0apply\u00a0an\u00a0adjustment,\u00a0I\u2019m\u00a0not\u00a0just\nstoring\u00a0that\u00a0adjustment\u00a0but\u00a0also\u00a0using\u00a0it\u00a0to\u00a0modify\u00a0an\u00a0accumulator.\u00a0I\u00a0can\u00a0just\u00a0calculate\nthat\u00a0value,\u00a0without\u00a0having\u00a0to\u00a0update\u00a0it.\nBut\u00a0I\u2019m\u00a0a\u00a0cautious\u00a0fellow.\u00a0It\u00a0is\u00a0my\u00a0hypothesis\u00a0is\u00a0that\u00a0I\u00a0can\u00a0just\u00a0calculate\u00a0it\u2014I\u00a0can\u00a0test\nthat\u00a0hypothesis\u00a0by\u00a0using\u00a0Introduce\u00a0Assertion\u00a0(302):\nclass\u00a0ProductionPlan\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nwww.EBooksWorld.ir\n", "page": 278, "type": "text", "section": "Page 278"}
{"text": "get\u00a0production()\u00a0{\n\u00a0\u00a0assert(this._production\u00a0===\u00a0this.calculatedProduction)\u037e\n\u00a0\u00a0return\u00a0this._production\u037e\n}\n\u00a0\u00a0get\u00a0calculatedProduction()\u00a0{\n\u00a0\u00a0\u00a0\u00a0return\u00a0this._adjustments\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0.reduce((sum,\u00a0a)\u00a0=>\u00a0sum\u00a0+\u00a0a.amount,\u00a00)\u037e\n\u00a0\u00a0}\nWith\u00a0the\u00a0assertion\u00a0in\u00a0place,\u00a0I\u00a0run\u00a0my\u00a0tests.\u00a0If\u00a0the\u00a0assertion\u00a0doesn\u2019t\u00a0fail,\u00a0I\u00a0can\u00a0replace\nreturning\u00a0the\u00a0field\u00a0with\u00a0returning\u00a0the\u00a0calculation:\nclass\u00a0ProductionPlan\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nget\u00a0production()\u00a0{\n\u00a0\u00a0assert(this._production\u00a0===\u00a0this.calculatedProduction)\u037e\n\u00a0\u00a0return\u00a0this.calculatedProduction\u037e\n}\nThen\u00a0Inline\u00a0Function\u00a0(115):\nclass\u00a0ProductionPlan\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nget\u00a0production()\u00a0{\n\u00a0\u00a0return\u00a0this._adjustments\n\u00a0\u00a0\u00a0\u00a0.reduce((sum,\u00a0a)\u00a0=>\u00a0sum\u00a0+\u00a0a.amount,\u00a00)\u037e\n}\nI\u00a0clean\u00a0up\u00a0any\u00a0references\u00a0to\u00a0the\u00a0old\u00a0variable\u00a0with\u00a0Remove\u00a0Dead\u00a0Code\u00a0(237):\nclass\u00a0ProductionPlan\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\napplyAdjustment(anAdjustment)\u00a0{\n\u00a0\u00a0this._adjustments.push(anAdjustment)\u037e\n\u00a0\u00a0this._production\u00a0+=\u00a0anAdjustment.amount\u037e\n}\nExample: More Than One Source\nwww.EBooksWorld.ir\n", "page": 279, "type": "text", "section": "Page 279"}
{"text": "Example: More Than One Source\nThe\u00a0above\u00a0example\u00a0is\u00a0nice\u00a0and\u00a0easy\u00a0because\u00a0there\u2019s\u00a0clearly\u00a0a\u00a0single\u00a0source\u00a0for\u00a0the\u00a0value\nof\u00a0production.\u00a0But\u00a0sometimes,\u00a0more\u00a0than\u00a0one\u00a0element\u00a0can\u00a0combine\u00a0in\u00a0the\naccumulator.\nclass\u00a0ProductionPlan\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nconstructor\u00a0(production)\u00a0{\n\u00a0\u00a0this._production\u00a0=\u00a0production\u037e\n\u00a0\u00a0this._adjustments\u00a0=\u00a0[]\u037e\n}\nget\u00a0production()\u00a0{return\u00a0this._production\u037e}\napplyAdjustment(anAdjustment)\u00a0{\n\u00a0\u00a0this._adjustments.push(anAdjustment)\u037e\n\u00a0\u00a0this._production\u00a0+=\u00a0anAdjustment.amount\u037e\n}\nIf\u00a0I\u00a0do\u00a0the\u00a0same\u00a0Introduce\u00a0Assertion\u00a0(302)\u00a0that\u00a0I\u00a0did\u00a0above,\u00a0it\u00a0will\u00a0now\u00a0fail\u00a0for\u00a0any\u00a0case\nwhere\u00a0the\u00a0initial\u00a0value\u00a0of\u00a0the\u00a0production\u00a0isn\u2019t\u00a0zero.\nBut\u00a0I\u00a0can\u00a0still\u00a0replace\u00a0the\u00a0derived\u00a0data.\u00a0The\u00a0only\u00a0difference\u00a0is\u00a0that\u00a0I\u00a0must\u00a0first\u00a0apply\nSplit\u00a0Variable\u00a0(240).\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nconstructor\u00a0(production)\u00a0{\n\u00a0\u00a0this._initialProduction\u00a0=\u00a0production\u037e\n\u00a0\u00a0this._productionAccumulator\u00a0=\u00a00\u037e\n\u00a0\u00a0this._adjustments\u00a0=\u00a0[]\u037e\n}\nget\u00a0production()\u00a0{\n\u00a0\u00a0return\u00a0this._initialProduction\u00a0+\u00a0this._productionAccumulator\u037e\n}\nNow\u00a0I\u00a0can\u00a0Introduce\u00a0Assertion\u00a0(302):\nclass\u00a0ProductionPlan\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nget\u00a0production()\u00a0{\n\u00a0\u00a0assert(this._productionAccumulator\u00a0===\u00a0this.calculatedProductionAccumulator)\u037e\nwww.EBooksWorld.ir\n", "page": 280, "type": "text", "section": "Page 280"}
{"text": "\u00a0\u00a0return\u00a0this._initialProduction\u00a0+\u00a0this._productionAccumulator\u037e\n}\n\u00a0\u00a0get\u00a0calculatedProductionAccumulator()\u00a0{\n\u00a0\u00a0\u00a0\u00a0return\u00a0this._adjustments\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0.reduce((sum,\u00a0a)\u00a0=>\u00a0sum\u00a0+\u00a0a.amount,\u00a00)\u037e\n\u00a0\u00a0}\nand\u00a0continue\u00a0pretty\u00a0much\u00a0as\u00a0before.\u00a0I\u2019d\u00a0be\u00a0inclined,\u00a0however,\u00a0to\u00a0leave\ntotalProductionAjustments\u00a0as\u00a0its\u00a0own\u00a0property,\u00a0without\u00a0inlining\u00a0it.\nCHANGE REFERENCE TO VALUE\ninverse\u00a0of:\u00a0Change\u00a0Value\u00a0to\u00a0Reference\u00a0(256)\nMotivation\nWhen\u00a0I\u00a0nest\u00a0an\u00a0object,\u00a0or\u00a0data\u00a0structure,\u00a0within\u00a0another\u00a0I\u00a0can\u00a0treat\u00a0the\u00a0inner\u00a0object\u00a0as\u00a0a\nreference\u00a0or\u00a0as\u00a0a\u00a0value.\u00a0The\u00a0difference\u00a0is\u00a0most\u00a0obviously\u00a0visible\u00a0in\u00a0how\u00a0I\u00a0handle\u00a0updates\nof\u00a0the\u00a0inner\u00a0object\u2019s\u00a0properties.\u00a0If\u00a0I\u00a0treat\u00a0it\u00a0as\u00a0a\u00a0reference,\u00a0I\u2019ll\u00a0update\u00a0the\u00a0inner\u00a0object\u2019s\nproperty\u00a0keeping\u00a0the\u00a0same\u00a0inner\u00a0object.\u00a0If\u00a0I\u00a0treat\u00a0it\u00a0as\u00a0a\u00a0value,\u00a0I\u00a0will\u00a0replace\u00a0the\u00a0entire\ninner\u00a0object\u00a0with\u00a0a\u00a0new\u00a0one\u00a0that\u00a0has\u00a0the\u00a0desired\u00a0property.\nIf\u00a0I\u00a0treat\u00a0a\u00a0field\u00a0as\u00a0a\u00a0value,\u00a0I\u00a0can\u00a0change\u00a0the\u00a0class\u00a0of\u00a0the\u00a0inner\u00a0object\u00a0to\u00a0make\u00a0it\u00a0a\u00a0Value\nObject\u00a0[mf\u00advo].\u00a0Value\u00a0objects\u00a0are\u00a0generally\u00a0easier\u00a0to\u00a0reason\u00a0about,\u00a0particularly\u00a0because\nwww.EBooksWorld.ir\n", "page": 281, "type": "text", "section": "Page 281"}
{"text": "they\u00a0are\u00a0immutable.\u00a0In\u00a0general,\u00a0immutable\u00a0data\u00a0structures\u00a0are\u00a0easier\u00a0to\u00a0deal\u00a0with.\u00a0I\u00a0can\npass\u00a0an\u00a0immutable\u00a0data\u00a0value\u00a0out\u00a0to\u00a0other\u00a0parts\u00a0of\u00a0the\u00a0program\u00a0and\u00a0not\u00a0worry\u00a0that\u00a0it\nmight\u00a0change\u00a0without\u00a0the\u00a0enclosing\u00a0object\u00a0being\u00a0aware\u00a0of\u00a0the\u00a0change.\u00a0I\u00a0can\u00a0replicate\nvalues\u00a0around\u00a0my\u00a0program\u00a0and\u00a0not\u00a0worry\u00a0about\u00a0maintaining\u00a0memory\u00a0links.\u00a0Value\nobjects\u00a0are\u00a0especially\u00a0useful\u00a0in\u00a0distributed\u00a0and\u00a0concurrent\u00a0systems.\nThis\u00a0also\u00a0suggests\u00a0when\u00a0I\u00a0shouldn\u2019t\u00a0do\u00a0this\u00a0refactoring.\u00a0If\u00a0I\u00a0want\u00a0to\u00a0share\u00a0an\u00a0object\nbetween\u00a0several\u00a0objects\u00a0so\u00a0that\u00a0any\u00a0change\u00a0to\u00a0the\u00a0shared\u00a0object\u00a0is\u00a0visible\u00a0to\u00a0all\u00a0its\ncollaborators,\u00a0then\u00a0I\u00a0need\u00a0the\u00a0shared\u00a0object\u00a0to\u00a0be\u00a0a\u00a0reference.\nMechanics\nCheck\u00a0that\u00a0the\u00a0candidate\u00a0class\u00a0is\u00a0immutable\u00a0or\u00a0can\u00a0become\u00a0immutable.\nFor\u00a0each\u00a0setter,\u00a0apply\u00a0Remove\u00a0Setting\u00a0Method\u00a0(331).\nProvide\u00a0a\u00a0value\u00adbased\u00a0equality\u00a0method\u00a0that\u00a0uses\u00a0the\u00a0fields\u00a0of\u00a0the\u00a0value\u00a0object.\nMost\u00a0language\u00a0environments\u00a0provide\u00a0an\u00a0overridable\u00a0equality\u00a0function\u00a0for\u00a0this\npurpose.\u00a0Usually\u00a0you\u00a0must\u00a0override\u00a0a\u00a0hashcode\u00a0generator\u00a0method\u00a0as\u00a0well.\nExample\nImagine\u00a0we\u00a0have\u00a0a\u00a0person\u00a0object\u00a0that\u00a0holds\u00a0onto\u00a0a\u00a0crude\u00a0telephone\u00a0number.\nclass\u00a0Person\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nconstructor()\u00a0{\n\u00a0\u00a0this._telephoneNumber\u00a0=\u00a0new\u00a0TelephoneNumber()\u037e\n}\nget\u00a0officeAreaCode()\u00a0\u00a0\u00a0\u00a0{return\u00a0this._telephoneNumber.areaCode\u037e}\nset\u00a0officeAreaCode(arg)\u00a0{this._telephoneNumber.areaCode\u00a0=\u00a0arg\u037e}\nget\u00a0officeNumber()\u00a0\u00a0\u00a0\u00a0{return\u00a0this._telephoneNumber.number\u037e}\nset\u00a0officeNumber(arg)\u00a0{this._telephoneNumber.number\u00a0=\u00a0arg\u037e}\nclass\u00a0TelephoneNumber\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nget\u00a0areaCode()\u00a0\u00a0\u00a0\u00a0{return\u00a0this._areaCode\u037e}\nset\u00a0areaCode(arg)\u00a0{this._areaCode\u00a0=\u00a0arg\u037e}\nwww.EBooksWorld.ir\n", "page": 282, "type": "text", "section": "Page 282"}
{"text": "get\u00a0number()\u00a0\u00a0\u00a0\u00a0{return\u00a0this._number\u037e}\nset\u00a0number(arg)\u00a0{this._number\u00a0=\u00a0arg\u037e}\nThis\u00a0situation\u00a0is\u00a0the\u00a0result\u00a0of\u00a0an\u00a0Extract\u00a0Class\u00a0(182)\u00a0where\u00a0the\u00a0old\u00a0parent\u00a0still\u00a0holds\nupdate\u00a0methods\u00a0for\u00a0the\u00a0new\u00a0object.\u00a0This\u00a0is\u00a0a\u00a0good\u00a0time\u00a0to\u00a0apply\u00a0Change\u00a0Reference\u00a0to\nValue\u00a0since\u00a0there\u00a0is\u00a0only\u00a0one\u00a0reference\u00a0to\u00a0the\u00a0new\u00a0class.\nThe\u00a0first\u00a0thing\u00a0I\u00a0need\u00a0to\u00a0do\u00a0is\u00a0to\u00a0make\u00a0the\u00a0telephone\u00a0number\u00a0immutable.\u00a0I\u00a0do\u00a0this\u00a0by\napplying\u00a0Remove\u00a0Setting\u00a0Method\u00a0(331)\u00a0to\u00a0the\u00a0fields.\u00a0The\u00a0first\u00a0step\u00a0of\u00a0Remove\u00a0Setting\nMethod\u00a0(331)\u00a0is\u00a0to\u00a0use\u00a0Change\u00a0Function\u00a0Declaration\u00a0(124)\u00a0to\u00a0add\u00a0the\u00a0two\u00a0fields\u00a0to\u00a0the\nconstructor\u00a0and\u00a0enhance\u00a0the\u00a0constructor\u00a0to\u00a0call\u00a0the\u00a0setters.\nclass\u00a0TelephoneNumber\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nconstructor(areaCode,\u00a0number)\u00a0{\n\u00a0\u00a0this._areaCode\u00a0=\u00a0areaCode\u037e\n\u00a0\u00a0this._number\u00a0=\u00a0number\u037e\n}\nNow\u00a0I\u00a0look\u00a0at\u00a0the\u00a0callers\u00a0of\u00a0the\u00a0setters.\u00a0For\u00a0each\u00a0one,\u00a0I\u00a0need\u00a0to\u00a0change\u00a0it\u00a0to\u00a0a\nreassignment.\u00a0I\u00a0start\u00a0with\u00a0the\u00a0area\u00a0code.\nclass\u00a0Person\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nget\u00a0officeAreaCode()\u00a0\u00a0\u00a0\u00a0{return\u00a0this._telephoneNumber.areaCode\u037e}\nset\u00a0officeAreaCode(arg)\u00a0{\n\u00a0\u00a0this._telephoneNumber\u00a0=\u00a0new\u00a0TelephoneNumber(arg,\u00a0this.officeNumber)\u037e\n}\nget\u00a0officeNumber()\u00a0\u00a0\u00a0\u00a0{return\u00a0this._telephoneNumber.number\u037e}\nset\u00a0officeNumber(arg)\u00a0{this._telephoneNumber.number\u00a0=\u00a0arg\u037e}\nI\u00a0then\u00a0repeat\u00a0that\u00a0step\u00a0with\u00a0the\u00a0remaining\u00a0field.\nclass\u00a0Person\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nget\u00a0officeAreaCode()\u00a0\u00a0\u00a0\u00a0{return\u00a0this._telephoneNumber.areaCode\u037e}\nwww.EBooksWorld.ir\n", "page": 283, "type": "text", "section": "Page 283"}
{"text": "set\u00a0officeAreaCode(arg)\u00a0{\n\u00a0\u00a0this._telephoneNumber\u00a0=\u00a0new\u00a0TelephoneNumber(arg,\u00a0this.officeNumber)\u037e\n}\nget\u00a0officeNumber()\u00a0\u00a0\u00a0\u00a0{return\u00a0this._telephoneNumber.number\u037e}\nset\u00a0officeNumber(arg)\u00a0{\n\u00a0\u00a0this._telephoneNumber\u00a0=\u00a0new\u00a0TelephoneNumber(this.officeAreaCode,\u00a0arg)\u037e\n}\nNow\u00a0the\u00a0telephone\u00a0number\u00a0is\u00a0immutable,\u00a0it\u00a0is\u00a0ready\u00a0to\u00a0become\u00a0a\u00a0true\u00a0value.\u00a0The\ncitizenship\u00a0test\u00a0for\u00a0a\u00a0value\u00a0object\u00a0is\u00a0that\u00a0it\u00a0uses\u00a0value\u00adbased\u00a0equality.\u00a0This\u00a0is\u00a0an\u00a0area\nwhere\u00a0JavaScript\u00a0falls\u00a0down,\u00a0as\u00a0there\u00a0is\u00a0nothing\u00a0in\u00a0the\u00a0language\u00a0and\u00a0core\u00a0libraries\u00a0that\nunderstands\u00a0replacing\u00a0a\u00a0reference\u00adbased\u00a0equality\u00a0with\u00a0a\u00a0value\u00adbased\u00a0one.\u00a0The\u00a0best\u00a0I\u00a0can\ndo\u00a0is\u00a0to\u00a0create\u00a0my\u00a0own\u00a0equals\u00a0method.\nclass\u00a0TelephoneNumber\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nequals(other)\u00a0{\n\u00a0\u00a0if\u00a0(!(other\u00a0instanceof\u00a0TelephoneNumber))\u00a0return\u00a0false\u037e\n\u00a0\u00a0return\u00a0this.areaCode\u00a0===\u00a0other.areaCode\u00a0&&\n\u00a0\u00a0\u00a0\u00a0this.number\u00a0===\u00a0other.number\u037e\n}\nIt\u2019s\u00a0also\u00a0important\u00a0to\u00a0test\u00a0it\u00a0with\u00a0something\u00a0like\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nit('telephone\u00a0equals',\u00a0function()\u00a0{\n\u00a0\u00a0assert(\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0new\u00a0TelephoneNumber(\"312\",\u00a0\"555\u00ad0142\")\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0.equals(new\u00a0TelephoneNumber(\"312\",\u00a0\"555\u00ad0142\")))\u037e\n})\u037e\nThe\u00a0unusual\u00a0formatting\u00a0I\u00a0use\u00a0here\u00a0should\u00a0make\u00a0it\u00a0obvious\u00a0that\u00a0they\u00a0are\u00a0the\u00a0same\nconstructor\u00a0call.\nThe\u00a0vital\u00a0thing\u00a0I\u00a0do\u00a0in\u00a0the\u00a0test\u00a0is\u00a0create\u00a0two\u00a0independent\u00a0objects\u00a0and\u00a0test\u00a0that\u00a0they\nmatch\u00a0as\u00a0equal.\nIn\u00a0most\u00a0object\u00adoriented\u00a0languages,\u00a0there\u00a0is\u00a0a\u00a0built\u00adin\u00a0equality\u00a0test\u00a0that\u00a0is\u00a0supposed\u00a0to\u00a0be\noverridden\u00a0for\u00a0value\u00adbased\u00a0equality.\u00a0In\u00a0Ruby,\u00a0I\u00a0can\u00a0override\u00a0the\u00a0==\u00a0operator\u037e\u00a0in\u00a0Java,\u00a0I\noverride\u00a0the\u00a0Object.equals()\u00a0method.\u00a0And\u00a0whenever\u00a0I\u00a0override\u00a0an\u00a0equality\u00a0method,\nwww.EBooksWorld.ir\n", "page": 284, "type": "text", "section": "Page 284"}
{"text": "I\u00a0usually\u00a0need\u00a0to\u00a0override\u00a0a\u00a0hashcode\u00a0generating\u00a0method\u00a0too\u00a0(e.g.,\nObject.hashCode()\u00a0in\u00a0Java)\u00a0to\u00a0ensure\u00a0collections\u00a0that\u00a0use\u00a0hashing\u00a0work\u00a0properly\nwith\u00a0my\u00a0new\u00a0value.\nIf\u00a0the\u00a0telephone\u00a0number\u00a0is\u00a0used\u00a0by\u00a0more\u00a0than\u00a0one\u00a0client,\u00a0the\u00a0procedure\u00a0is\u00a0still\u00a0the\u00a0same.\nAs\u00a0I\u00a0apply\u00a0Remove\u00a0Setting\u00a0Method\u00a0(331),\u00a0I\u2019ll\u00a0be\u00a0modifying\u00a0several\u00a0clients\u00a0instead\u00a0of\u00a0just\none.\u00a0Tests\u00a0for\u00a0non\u00adequal\u00a0telephone\u00a0numbers,\u00a0as\u00a0well\u00a0as\u00a0comparisons\u00a0to\u00a0non\u00adtelephone\u00ad\nnumbers\u00a0and\u00a0null\u00a0values,\u00a0are\u00a0also\u00a0worthwhile.\nCHANGE VALUE TO REFERENCE\ninverse\u00a0of:\u00a0Change\u00a0Reference\u00a0to\u00a0Value\u00a0(252)\nMotivation\nA\u00a0data\u00a0structure\u00a0may\u00a0have\u00a0several\u00a0records\u00a0linked\u00a0to\u00a0the\u00a0same\u00a0logical\u00a0data\u00a0structure.\u00a0I\nmight\u00a0read\u00a0in\u00a0a\u00a0list\u00a0of\u00a0orders,\u00a0some\u00a0of\u00a0which\u00a0are\u00a0for\u00a0the\u00a0same\u00a0customer.\u00a0When\u00a0I\u00a0have\nsharing\u00a0like\u00a0this,\u00a0I\u00a0can\u00a0represent\u00a0it\u00a0by\u00a0treating\u00a0the\u00a0customer\u00a0either\u00a0as\u00a0a\u00a0value\u00a0or\u00a0as\u00a0a\nreference.\u00a0With\u00a0a\u00a0value,\u00a0the\u00a0customer\u00a0data\u00a0is\u00a0copied\u00a0into\u00a0each\u00a0order\u037e\u00a0with\u00a0a\u00a0reference,\nthere\u00a0is\u00a0only\u00a0one\u00a0data\u00a0structure\u00a0that\u00a0multiple\u00a0orders\u00a0link\u00a0to.\nIf\u00a0the\u00a0customer\u00a0never\u00a0needs\u00a0to\u00a0be\u00a0updated,\u00a0then\u00a0both\u00a0approaches\u00a0are\u00a0reasonable.\u00a0It\u00a0is,\nperhaps,\u00a0a\u00a0bit\u00a0confusing\u00a0to\u00a0have\u00a0multiple\u00a0copies\u00a0of\u00a0the\u00a0same\u00a0data,\u00a0but\u00a0it\u2019s\u00a0common\nenough\u00a0to\u00a0not\u00a0be\u00a0a\u00a0problem.\u00a0In\u00a0some\u00a0cases,\u00a0there\u00a0may\u00a0be\u00a0issues\u00a0with\u00a0memory\u00a0due\u00a0to\nmultiple\u00a0copies\u2014but,\u00a0like\u00a0any\u00a0performance\u00a0issue,\u00a0that\u2019s\u00a0relatively\u00a0rare.\nThe\u00a0biggest\u00a0difficulty\u00a0in\u00a0having\u00a0physical\u00a0copies\u00a0of\u00a0the\u00a0same\u00a0logical\u00a0data\u00a0occurs\u00a0when\u00a0I\nwww.EBooksWorld.ir\n", "page": 285, "type": "text", "section": "Page 285"}
{"text": "need\u00a0to\u00a0update\u00a0the\u00a0shared\u00a0data.\u00a0I\u00a0then\u00a0have\u00a0to\u00a0find\u00a0all\u00a0the\u00a0copies\u00a0and\u00a0update\u00a0them\u00a0all.\u00a0If\nI\u00a0miss\u00a0one,\u00a0I\u2019ll\u00a0get\u00a0a\u00a0troubling\u00a0inconsistency\u00a0in\u00a0my\u00a0data.\u00a0In\u00a0this\u00a0case,\u00a0it\u2019s\u00a0often\nworthwhile\u00a0to\u00a0change\u00a0the\u00a0copied\u00a0data\u00a0into\u00a0a\u00a0single\u00a0reference.\u00a0That\u00a0way,\u00a0any\u00a0change\u00a0is\nvisible\u00a0to\u00a0all\u00a0the\u00a0customer\u2019s\u00a0orders.\nChanging\u00a0a\u00a0value\u00a0to\u00a0a\u00a0reference\u00a0results\u00a0in\u00a0only\u00a0one\u00a0object\u00a0being\u00a0present\u00a0for\u00a0an\u00a0entity,\nand\u00a0it\u00a0usually\u00a0means\u00a0I\u00a0need\u00a0some\u00a0kind\u00a0of\u00a0repository\u00a0where\u00a0I\u00a0can\u00a0access\u00a0these\u00a0objects.\u00a0I\nthen\u00a0only\u00a0create\u00a0the\u00a0object\u00a0for\u00a0an\u00a0entity\u00a0once,\u00a0and\u00a0everywhere\u00a0else\u00a0I\u00a0retrieve\u00a0it\u00a0from\u00a0the\nrepository.\nMechanics\nCreate\u00a0a\u00a0repository\u00a0for\u00a0instances\u00a0of\u00a0the\u00a0related\u00a0object\u00a0(if\u00a0one\u00a0isn\u2019t\u00a0already\u00a0present).\nEnsure\u00a0the\u00a0constructor\u00a0has\u00a0a\u00a0way\u00a0of\u00a0looking\u00a0up\u00a0the\u00a0correct\u00a0instance\u00a0of\u00a0the\u00a0related\nobject.\nChange\u00a0the\u00a0constructors\u00a0for\u00a0the\u00a0host\u00a0object\u00a0to\u00a0use\u00a0the\u00a0repository\u00a0to\u00a0obtain\u00a0the\nrelated\u00a0object.\u00a0Test\u00a0after\u00a0each\u00a0change.\nExample\nI\u2019ll\u00a0begin\u00a0with\u00a0a\u00a0class\u00a0that\u00a0represents\u00a0orders,\u00a0which\u00a0I\u00a0might\u00a0create\u00a0from\u00a0an\u00a0incoming\nJSON\u00a0document.\u00a0Part\u00a0of\u00a0the\u00a0order\u00a0data\u00a0is\u00a0a\u00a0customer\u00a0ID\u00a0from\u00a0which\u00a0I\u2019m\u00a0creating\u00a0a\ncustomer\u00a0object.\nclass\u00a0Order\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nconstructor(data)\u00a0{\n\u00a0\u00a0this._number\u00a0=\u00a0data.number\u037e\n\u00a0\u00a0this._customer\u00a0=\u00a0new\u00a0Customer(data.customer)\u037e\n\u00a0\u00a0//\u00a0load\u00a0other\u00a0data\n}\nget\u00a0customer()\u00a0{return\u00a0this._customer\u037e}\nclass\u00a0Customer\u2026\nconstructor(id)\u00a0{\n\u00a0\u00a0this._id\u00a0=\u00a0id\u037e\n}\nget\u00a0id()\u00a0{return\u00a0this._id\u037e}\nwww.EBooksWorld.ir\n", "page": 286, "type": "text", "section": "Page 286"}
{"text": "The\u00a0customer\u00a0object\u00a0I\u00a0create\u00a0this\u00a0way\u00a0is\u00a0a\u00a0value.\u00a0If\u00a0I\u00a0have\u00a0five\u00a0orders\u00a0that\u00a0refer\u00a0to\u00a0the\ncustomer\u00a0ID\u00a0of\u00a0123,\u00a0I\u2019ll\u00a0have\u00a0five\u00a0separate\u00a0customer\u00a0objects.\u00a0Any\u00a0change\u00a0I\u00a0make\u00a0to\u00a0one\nof\u00a0them\u00a0will\u00a0not\u00a0be\u00a0reflected\u00a0in\u00a0the\u00a0others.\u00a0Should\u00a0I\u00a0want\u00a0to\u00a0enrich\u00a0the\u00a0customer\u00a0objects,\nperhaps\u00a0by\u00a0gathering\u00a0data\u00a0from\u00a0a\u00a0customer\u00a0service,\u00a0I\u2019d\u00a0have\u00a0to\u00a0update\u00a0all\u00a0five\u00a0customers\nwith\u00a0the\u00a0same\u00a0data.\u00a0Having\u00a0duplicate\u00a0objects\u00a0like\u00a0this\u00a0always\u00a0makes\u00a0me\u00a0nervous\u2014it\u2019s\nconfusing\u00a0to\u00a0have\u00a0multiple\u00a0objects\u00a0representing\u00a0the\u00a0same\u00a0entity,\u00a0such\u00a0as\u00a0a\u00a0customer.\nThis\u00a0problem\u00a0is\u00a0particularly\u00a0awkward\u00a0if\u00a0the\u00a0customer\u00a0object\u00a0is\u00a0mutable,\u00a0which\u00a0can\u00a0lead\nto\u00a0inconsistencies\u00a0between\u00a0the\u00a0customer\u00a0objects.\nIf\u00a0I\u00a0want\u00a0to\u00a0use\u00a0the\u00a0same\u00a0customer\u00a0object\u00a0each\u00a0time,\u00a0I\u2019ll\u00a0need\u00a0a\u00a0place\u00a0to\u00a0store\u00a0it.\u00a0Exactly\nwhere\u00a0to\u00a0store\u00a0entities\u00a0like\u00a0this\u00a0will\u00a0vary\u00a0from\u00a0application\u00a0to\u00a0application,\u00a0but\u00a0for\u00a0a\nsimple\u00a0case\u00a0I\u00a0like\u00a0to\u00a0use\u00a0a\u00a0repository\u00a0object\u00a0[mf\u00adrepos].\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nlet\u00a0_repositoryData\u037e\nexport\u00a0function\u00a0initialize()\u00a0{\n\u00a0\u00a0_repositoryData\u00a0=\u00a0{}\u037e\n\u00a0\u00a0_repositoryData.customers\u00a0=\u00a0new\u00a0Map()\u037e\n}\nexport\u00a0function\u00a0registerCustomer(id)\u00a0{\n\u00a0\u00a0if\u00a0(!\u00a0_repositoryData.customers.has(id))\n\u00a0\u00a0\u00a0\u00a0_repositoryData.customers.set(id,\u00a0new\u00a0Customer(id))\u037e\n\u00a0\u00a0return\u00a0findCustomer(id)\u037e\n}\nexport\u00a0function\u00a0findCustomer(id)\u00a0{\n\u00a0\u00a0return\u00a0_repositoryData.customers.get(id)\u037e\n}\nThe\u00a0repository\u00a0allows\u00a0me\u00a0to\u00a0register\u00a0customer\u00a0objects\u00a0with\u00a0an\u00a0ID\u00a0and\u00a0ensures\u00a0I\u00a0only\ncreate\u00a0one\u00a0customer\u00a0object\u00a0with\u00a0the\u00a0same\u00a0ID.\u00a0With\u00a0this\u00a0in\u00a0place,\u00a0I\u00a0can\u00a0change\u00a0the\norder\u2019s\u00a0constructor\u00a0to\u00a0use\u00a0it.\nOften,\u00a0when\u00a0doing\u00a0this\u00a0refactoring,\u00a0the\u00a0repository\u00a0already\u00a0exists,\u00a0so\u00a0I\u00a0can\u00a0just\u00a0use\u00a0it.\nThe\u00a0next\u00a0step\u00a0is\u00a0to\u00a0figure\u00a0out\u00a0how\u00a0the\u00a0constructor\u00a0for\u00a0the\u00a0order\u00a0can\u00a0obtain\u00a0the\u00a0correct\ncustomer\u00a0object.\u00a0In\u00a0this\u00a0case\u00a0it\u2019s\u00a0easy,\u00a0since\u00a0the\u00a0customer\u2019s\u00a0ID\u00a0is\u00a0present\u00a0in\u00a0the\u00a0input\ndata\u00a0stream.\nclass\u00a0Order\u2026\nwww.EBooksWorld.ir\n", "page": 287, "type": "text", "section": "Page 287"}
{"text": "Click\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nconstructor(data)\u00a0{\n\u00a0\u00a0this._number\u00a0=\u00a0data.number\u037e\n\u00a0\u00a0this._customer\u00a0=\u00a0registerCustomer(data.customer)\u037e\n\u00a0\u00a0//\u00a0load\u00a0other\u00a0data\n}\nget\u00a0customer()\u00a0{return\u00a0this._customer\u037e}\nNow,\u00a0any\u00a0changes\u00a0I\u00a0make\u00a0to\u00a0the\u00a0customer\u00a0of\u00a0one\u00a0order\u00a0will\u00a0be\u00a0synchronized\u00a0across\u00a0all\nthe\u00a0orders\u00a0sharing\u00a0the\u00a0same\u00a0customer.\nFor\u00a0this\u00a0example,\u00a0I\u00a0created\u00a0a\u00a0new\u00a0customer\u00a0object\u00a0with\u00a0the\u00a0first\u00a0order\u00a0that\u00a0referenced\u00a0it.\nAnother\u00a0common\u00a0approach\u00a0is\u00a0to\u00a0get\u00a0a\u00a0list\u00a0of\u00a0customers,\u00a0populate\u00a0the\u00a0repository\u00a0with\nthem,\u00a0and\u00a0then\u00a0link\u00a0to\u00a0them\u00a0as\u00a0I\u00a0read\u00a0the\u00a0orders.\u00a0In\u00a0that\u00a0case,\u00a0an\u00a0order\u00a0that\u00a0contains\u00a0a\ncustomer\u00a0ID\u00a0not\u00a0in\u00a0the\u00a0repository\u00a0would\u00a0indicate\u00a0an\u00a0error.\nOne\u00a0problem\u00a0with\u00a0this\u00a0code\u00a0is\u00a0that\u00a0the\u00a0constructor\u00a0body\u00a0is\u00a0coupled\u00a0to\u00a0the\u00a0global\nrepository.\u00a0Globals\u00a0should\u00a0be\u00a0treated\u00a0with\u00a0care\u2014like\u00a0a\u00a0powerful\u00a0drug,\u00a0they\u00a0can\u00a0be\nbeneficial\u00a0in\u00a0small\u00a0doses\u00a0but\u00a0a\u00a0poison\u00a0if\u00a0used\u00a0too\u00a0much.\u00a0If\u00a0I\u2019m\u00a0concerned\u00a0about\u00a0it,\u00a0I\u00a0can\npass\u00a0the\u00a0repository\u00a0as\u00a0a\u00a0parameter\u00a0to\u00a0the\u00a0constructor.\nwww.EBooksWorld.ir\n", "page": 288, "type": "text", "section": "Page 288"}
{"text": "Chapter 10\nSimplifying Conditional Logic\nMuch\u00a0of\u00a0the\u00a0power\u00a0of\u00a0programs\u00a0comes\u00a0from\u00a0their\u00a0ability\u00a0to\u00a0implement\u00a0conditional\u00a0logic\n\u2014but,\u00a0sadly,\u00a0much\u00a0of\u00a0the\u00a0complexity\u00a0of\u00a0programs\u00a0lies\u00a0in\u00a0these\u00a0conditionals.\u00a0I\u00a0often\u00a0use\nrefactoring\u00a0to\u00a0make\u00a0conditional\u00a0sections\u00a0easier\u00a0to\u00a0understand.\u00a0I\u00a0regularly\u00a0apply\nDecompose\u00a0Conditional\u00a0(260)\u00a0to\u00a0complicated\u00a0conditionals,\u00a0and\u00a0I\u00a0use\u00a0Consolidate\nConditional\u00a0Expression\u00a0(263)\u00a0to\u00a0make\u00a0logical\u00a0combinations\u00a0clearer.\u00a0I\u00a0use\u00a0Replace\nNested\u00a0Conditional\u00a0with\u00a0Guard\u00a0Clauses\u00a0(266)\u00a0to\u00a0clarify\u00a0cases\u00a0where\u00a0I\u00a0want\u00a0to\u00a0run\u00a0some\npre\u00adchecks\u00a0before\u00a0my\u00a0main\u00a0processing.\u00a0If\u00a0I\u00a0see\u00a0several\u00a0conditions\u00a0using\u00a0the\u00a0same\nswitching\u00a0logic,\u00a0it\u2019s\u00a0a\u00a0good\u00a0time\u00a0to\u00a0pull\u00a0Replace\u00a0Conditional\u00a0with\u00a0Polymorphism\u00a0(272)\nout\u00a0the\u00a0box.\nA\u00a0lot\u00a0of\u00a0conditionals\u00a0are\u00a0used\u00a0to\u00a0handle\u00a0special\u00a0cases,\u00a0such\u00a0as\u00a0nulls\u037e\u00a0if\u00a0that\u00a0logic\u00a0is\nmostly\u00a0the\u00a0same,\u00a0then\u00a0Introduce\u00a0Special\u00a0Case\u00a0(289)\u00a0(often\u00a0referred\u00a0to\u00a0as\u00a0Introduce\u00a0Null\nObject\u00a0(289))\u00a0can\u00a0remove\u00a0a\u00a0lot\u00a0of\u00a0duplicate\u00a0code.\u00a0And,\u00a0although\u00a0I\u00a0like\u00a0to\u00a0remove\nconditions\u00a0a\u00a0lot,\u00a0if\u00a0I\u00a0want\u00a0to\u00a0communicate\u00a0(and\u00a0check)\u00a0a\u00a0program\u2019s\u00a0state,\u00a0I\u00a0find\nIntroduce\u00a0Assertion\u00a0(302)\u00a0a\u00a0worthwhile\u00a0addition.\nDECOMPOSE CONDITIONAL\ny\nHistory\nTopics\nTutorials\nOffers & Deals\nHighlights\nSettings\nSupport\nSign Out\nwww.EBooksWorld.ir\n", "page": 289, "type": "text", "section": "Page 289"}
{"text": "Motivation\nOne\u00a0of\u00a0the\u00a0most\u00a0common\u00a0sources\u00a0of\u00a0complexity\u00a0in\u00a0a\u00a0program\u00a0is\u00a0complex\u00a0conditional\nlogic.\u00a0As\u00a0I\u00a0write\u00a0code\u00a0to\u00a0do\u00a0various\u00a0things\u00a0depending\u00a0on\u00a0various\u00a0conditions,\u00a0I\u00a0can\nquickly\u00a0end\u00a0up\u00a0with\u00a0a\u00a0pretty\u00a0long\u00a0function.\u00a0Length\u00a0of\u00a0a\u00a0function\u00a0is\u00a0in\u00a0itself\u00a0a\u00a0factor\u00a0that\nmakes\u00a0it\u00a0harder\u00a0to\u00a0read,\u00a0but\u00a0conditions\u00a0increase\u00a0the\u00a0difficulty.\u00a0The\u00a0problem\u00a0usually\u00a0lies\nin\u00a0the\u00a0fact\u00a0that\u00a0the\u00a0code,\u00a0both\u00a0in\u00a0the\u00a0condition\u00a0checks\u00a0and\u00a0in\u00a0the\u00a0actions,\u00a0tells\u00a0me\u00a0what\nhappens\u00a0but\u00a0can\u00a0easily\u00a0obscure\u00a0why\u00a0it\u00a0happens.\nAs\u00a0with\u00a0any\u00a0large\u00a0block\u00a0of\u00a0code,\u00a0I\u00a0can\u00a0make\u00a0my\u00a0intention\u00a0clearer\u00a0by\u00a0decomposing\u00a0it\u00a0and\nreplacing\u00a0each\u00a0chunk\u00a0of\u00a0code\u00a0with\u00a0a\u00a0function\u00a0call\u00a0named\u00a0after\u00a0the\u00a0intention\u00a0of\u00a0that\nchunk.\u00a0With\u00a0conditions,\u00a0I\u00a0particularly\u00a0like\u00a0doing\u00a0this\u00a0for\u00a0the\u00a0conditional\u00a0part\u00a0and\u00a0each\nof\u00a0the\u00a0alternatives.\u00a0This\u00a0way,\u00a0I\u00a0highlight\u00a0the\u00a0condition\u00a0and\u00a0make\u00a0it\u00a0clear\u00a0what\u00a0I\u2019m\nbranching\u00a0on.\u00a0I\u00a0also\u00a0highlight\u00a0the\u00a0reason\u00a0for\u00a0the\u00a0branching.\nThis\u00a0is\u00a0really\u00a0just\u00a0a\u00a0particular\u00a0case\u00a0of\u00a0applying\u00a0Extract\u00a0Function\u00a0(106)\u00a0to\u00a0my\u00a0code,\u00a0but\u00a0I\nlike\u00a0to\u00a0highlight\u00a0this\u00a0case\u00a0as\u00a0one\u00a0where\u00a0I\u2019ve\u00a0often\u00a0found\u00a0a\u00a0remarkably\u00a0good\u00a0value\u00a0for\u00a0the\nexercise.\nMechanics\nApply\u00a0Extract\u00a0Function\u00a0(106)\u00a0on\u00a0the\u00a0condition\u00a0and\u00a0each\u00a0leg\u00a0of\u00a0the\u00a0conditional.\nExample\nwww.EBooksWorld.ir\n", "page": 290, "type": "text", "section": "Page 290"}
{"text": "Example\nSuppose\u00a0I\u2019m\u00a0calculating\u00a0the\u00a0charge\u00a0for\u00a0something\u00a0that\u00a0has\u00a0separate\u00a0rates\u00a0for\u00a0winter\u00a0and\nsummer:\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nif\u00a0(!aDate.isBefore(plan.summerStart)\u00a0&&\u00a0!aDate.isAfter(plan.summerEnd))\n\u00a0\u00a0charge\u00a0=\u00a0quantity\u00a0*\u00a0plan.summerRate\u037e\nelse\n\u00a0\u00a0charge\u00a0=\u00a0quantity\u00a0*\u00a0plan.regularRate\u00a0+\u00a0plan.regularServiceCharge\u037e\nI\u00a0extract\u00a0the\u00a0condition\u00a0into\u00a0its\u00a0own\u00a0function.\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nif\u00a0(summer())\n\u00a0\u00a0charge\u00a0=\u00a0quantity\u00a0*\u00a0plan.summerRate\u037e\nelse\n\u00a0\u00a0charge\u00a0=\u00a0quantity\u00a0*\u00a0plan.regularRate\u00a0+\u00a0plan.regularServiceCharge\u037e\nfunction\u00a0summer()\u00a0{\n\u00a0\u00a0return\u00a0!aDate.isBefore(plan.summerStart)\u00a0&&\u00a0!aDate.isAfter(plan.summerEnd)\u037e\n}\nThen\u00a0I\u00a0do\u00a0the\u00a0then\u00a0leg:\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nif\u00a0(summer())\n\u00a0\u00a0charge\u00a0=\u00a0summerCharge()\u037e\nelse\n\u00a0\u00a0charge\u00a0=\u00a0quantity\u00a0*\u00a0plan.regularRate\u00a0+\u00a0plan.regularServiceCharge\u037e\nfunction\u00a0summer()\u00a0{\n\u00a0\u00a0return\u00a0!aDate.isBefore(plan.summerStart)\u00a0&&\u00a0!aDate.isAfter(plan.summerEnd)\u037e\n}\nfunction\u00a0summerCharge()\u00a0{\n\u00a0\u00a0return\u00a0quantity\u00a0*\u00a0plan.summerRate\u037e\n}\nFinally,\u00a0the\u00a0else\u00a0leg:\nwww.EBooksWorld.ir\n", "page": 291, "type": "text", "section": "Page 291"}
{"text": "Click\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nif\u00a0(summer())\n\u00a0\u00a0charge\u00a0=\u00a0summerCharge()\u037e\nelse\n\u00a0\u00a0charge\u00a0=\u00a0regularCharge()\u037e\nfunction\u00a0summer()\u00a0{\n\u00a0\u00a0return\u00a0!aDate.isBefore(plan.summerStart)\u00a0&&\u00a0!aDate.isAfter(plan.summerEnd)\u037e\n}\nfunction\u00a0summerCharge()\u00a0{\n\u00a0\u00a0return\u00a0quantity\u00a0*\u00a0plan.summerRate\u037e\n}\nfunction\u00a0regularCharge()\u00a0{\n\u00a0\u00a0return\u00a0quantity\u00a0*\u00a0plan.regularRate\u00a0+\u00a0plan.regularServiceCharge\u037e\n}\nWith\u00a0that\u00a0done,\u00a0I\u00a0like\u00a0to\u00a0reformat\u00a0the\u00a0conditional\u00a0using\u00a0the\u00a0ternary\u00a0operator.\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\ncharge\u00a0=\u00a0summer()\u00a0?\u00a0summerCharge()\u00a0:\u00a0regularCharge()\u037e\nfunction\u00a0summer()\u00a0{\n\u00a0\u00a0return\u00a0!aDate.isBefore(plan.summerStart)\u00a0&&\u00a0!aDate.isAfter(plan.summerEnd)\u037e\n}\nfunction\u00a0summerCharge()\u00a0{\n\u00a0\u00a0return\u00a0quantity\u00a0*\u00a0plan.summerRate\u037e\n}\nfunction\u00a0regularCharge()\u00a0{\n\u00a0\u00a0return\u00a0quantity\u00a0*\u00a0plan.regularRate\u00a0+\u00a0plan.regularServiceCharge\u037e\n}\nCONSOLIDATE CONDITIONAL EXPRESSION\nwww.EBooksWorld.ir\n", "page": 292, "type": "text", "section": "Page 292"}
{"text": "Motivation\nSometimes,\u00a0I\u00a0run\u00a0into\u00a0a\u00a0series\u00a0of\u00a0conditional\u00a0checks\u00a0where\u00a0each\u00a0check\u00a0is\u00a0different\u00a0yet\nthe\u00a0resulting\u00a0action\u00a0is\u00a0the\u00a0same.\u00a0When\u00a0I\u00a0see\u00a0this,\u00a0I\u00a0use\u00a0and\u00a0and\u00a0or\u00a0operators\u00a0to\nconsolidate\u00a0them\u00a0into\u00a0a\u00a0single\u00a0conditional\u00a0check\u00a0with\u00a0a\u00a0single\u00a0result.\nConsolidating\u00a0the\u00a0conditional\u00a0code\u00a0is\u00a0important\u00a0for\u00a0two\u00a0reasons.\u00a0First,\u00a0it\u00a0makes\u00a0it\nclearer\u00a0by\u00a0showing\u00a0that\u00a0I\u2019m\u00a0really\u00a0making\u00a0a\u00a0single\u00a0check\u00a0that\u00a0combines\u00a0other\u00a0checks.\nThe\u00a0sequence\u00a0has\u00a0the\u00a0same\u00a0effect,\u00a0but\u00a0it\u00a0looks\u00a0like\u00a0I\u2019m\u00a0carrying\u00a0out\u00a0a\u00a0sequence\u00a0of\nseparate\u00a0checks\u00a0that\u00a0just\u00a0happen\u00a0to\u00a0be\u00a0close\u00a0together.\u00a0The\u00a0second\u00a0reason\u00a0I\u00a0like\u00a0to\u00a0do\nthis\u00a0is\u00a0that\u00a0it\u00a0often\u00a0sets\u00a0me\u00a0up\u00a0for\u00a0Extract\u00a0Function\u00a0(106).\u00a0Extracting\u00a0a\u00a0condition\u00a0is\u00a0one\nof\u00a0the\u00a0most\u00a0useful\u00a0things\u00a0I\u00a0can\u00a0do\u00a0to\u00a0clarify\u00a0my\u00a0code.\u00a0It\u00a0replaces\u00a0a\u00a0statement\u00a0of\u00a0what\u00a0I\u2019m\ndoing\u00a0with\u00a0why\u00a0I\u2019m\u00a0doing\u00a0it.\nThe\u00a0reasons\u00a0in\u00a0favor\u00a0of\u00a0consolidating\u00a0conditionals\u00a0also\u00a0point\u00a0to\u00a0the\u00a0reasons\u00a0against\ndoing\u00a0it.\u00a0If\u00a0I\u00a0consider\u00a0it\u00a0to\u00a0be\u00a0truly\u00a0independent\u00a0checks\u00a0that\u00a0shouldn\u2019t\u00a0be\u00a0thought\u00a0of\u00a0as\u00a0a\nsingle\u00a0check,\u00a0I\u00a0don\u2019t\u00a0do\u00a0the\u00a0refactoring.\nMechanics\nEnsure\u00a0that\u00a0none\u00a0of\u00a0the\u00a0conditionals\u00a0have\u00a0any\u00a0side\u00a0effects.\nIf\u00a0any\u00a0do,\u00a0use\u00a0Separate\u00a0Query\u00a0from\u00a0Modifier\u00a0(306)\u00a0on\u00a0them\u00a0first.\nwww.EBooksWorld.ir\n", "page": 293, "type": "text", "section": "Page 293"}
{"text": "Take\u00a0two\u00a0of\u00a0the\u00a0conditional\u00a0statements\u00a0and\u00a0combine\u00a0their\u00a0conditions\u00a0using\u00a0a\u00a0logical\noperator.\nSequences\u00a0combine\u00a0with\u00a0or,\u00a0nested\u00a0if\u00a0statements\u00a0combine\u00a0with\u00a0and.\nTest.\nRepeat\u00a0combining\u00a0conditionals\u00a0until\u00a0they\u00a0are\u00a0all\u00a0in\u00a0a\u00a0single\u00a0condition.\nConsider\u00a0using\u00a0Extract\u00a0Function\u00a0(106)\u00a0on\u00a0the\u00a0resulting\u00a0condition.\nExample\nPerusing\u00a0some\u00a0code,\u00a0I\u00a0see\u00a0the\u00a0following:\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0disabilityAmount(anEmployee)\u00a0{\n\u00a0\u00a0if\u00a0(anEmployee.seniority\u00a0<\u00a02)\u00a0return\u00a00\u037e\n\u00a0\u00a0if\u00a0(anEmployee.monthsDisabled\u00a0>\u00a012)\u00a0return\u00a00\u037e\n\u00a0\u00a0if\u00a0(anEmployee.isPartTime)\u00a0return\u00a00\u037e\n\u00a0\u00a0//\u00a0compute\u00a0the\u00a0disability\u00a0amount\nIt\u2019s\u00a0a\u00a0sequence\u00a0of\u00a0conditional\u00a0checks\u00a0which\u00a0all\u00a0have\u00a0the\u00a0same\u00a0result.\u00a0Since\u00a0the\u00a0result\u00a0is\nthe\u00a0same,\u00a0I\u00a0should\u00a0combine\u00a0these\u00a0conditions\u00a0into\u00a0a\u00a0single\u00a0expression.\u00a0For\u00a0a\u00a0sequence\nlike\u00a0this,\u00a0I\u00a0do\u00a0it\u00a0using\u00a0an\u00a0or\u00a0operator.\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0disabilityAmount(anEmployee)\u00a0{\n\u00a0\u00a0if\u00a0((anEmployee.seniority\u00a0<\u00a02)\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0||\u00a0(anEmployee.monthsDisabled\u00a0>\u00a012))\u00a0return\u00a00\u037e\n\u00a0\u00a0if\u00a0(anEmployee.isPartTime)\u00a0return\u00a00\u037e\n\u00a0\u00a0//\u00a0compute\u00a0the\u00a0disability\u00a0amount\nI\u00a0test,\u00a0then\u00a0fold\u00a0in\u00a0the\u00a0other\u00a0condition:\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0disabilityAmount(anEmployee)\u00a0{\n\u00a0\u00a0if\u00a0((anEmployee.seniority\u00a0<\u00a02)\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0||\u00a0(anEmployee.monthsDisabled\u00a0>\u00a012)\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0||\u00a0(anEmployee.isPartTime))\u00a0return\u00a00\u037e\n\u00a0\u00a0//\u00a0compute\u00a0the\u00a0disability\u00a0amount\nwww.EBooksWorld.ir\n", "page": 294, "type": "text", "section": "Page 294"}
{"text": "Once\u00a0I\u00a0have\u00a0them\u00a0all\u00a0together,\u00a0I\u00a0use\u00a0Extract\u00a0Function\u00a0(106)\u00a0on\u00a0the\u00a0condition.\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0disabilityAmount(anEmployee)\u00a0{\n\u00a0\u00a0if\u00a0(isNotEligableForDisability())\u00a0return\u00a00\u037e\n\u00a0\u00a0//\u00a0compute\u00a0the\u00a0disability\u00a0amount\n\u00a0\u00a0function\u00a0isNotEligableForDisability()\u00a0{\n\u00a0\u00a0\u00a0\u00a0return\u00a0((anEmployee.seniority\u00a0<\u00a02)\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0||\u00a0(anEmployee.monthsDisabled\u00a0>\u00a012)\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0||\u00a0(anEmployee.isPartTime))\u037e\n\u00a0\u00a0}\nExample: Using ands\nThe\u00a0example\u00a0above\u00a0showed\u00a0combining\u00a0statements\u00a0with\u00a0an\u00a0or,\u00a0but\u00a0I\u00a0may\u00a0run\u00a0into\u00a0cases\nthat\u00a0need\u00a0ands\u00a0as\u00a0well.\u00a0Such\u00a0a\u00a0case\u00a0uses\u00a0nested\u00a0if\u00a0statements:\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nif\u00a0(anEmployee.onVacation)\n\u00a0\u00a0if\u00a0(anEmployee.seniority\u00a0>\u00a010)\n\u00a0\u00a0\u00a0\u00a0return\u00a01\u037e\nreturn\u00a00.5\u037e\nI\u00a0combine\u00a0these\u00a0using\u00a0and\u00a0operators.\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nif\u00a0((anEmployee.onVacation)\n\u00a0\u00a0\u00a0\u00a0&&\u00a0(anEmployee.seniority\u00a0>\u00a010))\u00a0return\u00a01\u037e\nreturn\u00a00.5\u037e\nIf\u00a0I\u00a0have\u00a0a\u00a0mix\u00a0of\u00a0these,\u00a0I\u00a0can\u00a0combine\u00a0using\u00a0and\u00a0and\u00a0or\u00a0operators\u00a0as\u00a0needed.\u00a0When\nthis\u00a0happens,\u00a0things\u00a0are\u00a0likely\u00a0to\u00a0get\u00a0messy,\u00a0so\u00a0I\u00a0use\u00a0Extract\u00a0Function\u00a0(106)\u00a0liberally\u00a0to\nmake\u00a0it\u00a0all\u00a0understandable.\nREPLACE NESTED CONDITIONAL WITH GUARD CLAUSES\nwww.EBooksWorld.ir\n", "page": 295, "type": "text", "section": "Page 295"}
{"text": "Motivation\nI\u00a0often\u00a0find\u00a0that\u00a0conditional\u00a0expressions\u00a0come\u00a0in\u00a0two\u00a0styles.\u00a0In\u00a0the\u00a0first\u00a0style,\u00a0both\u00a0legs\nof\u00a0the\u00a0conditional\u00a0are\u00a0part\u00a0of\u00a0normal\u00a0behavior,\u00a0while\u00a0in\u00a0the\u00a0second\u00a0style,\u00a0one\u00a0leg\u00a0is\nnormal\u00a0and\u00a0the\u00a0other\u00a0indicates\u00a0an\u00a0unusual\u00a0condition.\nThese\u00a0kinds\u00a0of\u00a0conditionals\u00a0have\u00a0different\u00a0intentions\u2014and\u00a0these\u00a0intentions\u00a0should\ncome\u00a0through\u00a0in\u00a0the\u00a0code.\u00a0If\u00a0both\u00a0are\u00a0part\u00a0of\u00a0normal\u00a0behavior,\u00a0I\u00a0use\u00a0a\u00a0condition\u00a0with\u00a0an\nif\u00a0and\u00a0an\u00a0else\u00a0leg.\u00a0If\u00a0the\u00a0condition\u00a0is\u00a0an\u00a0unusual\u00a0condition,\u00a0I\u00a0check\u00a0the\u00a0condition\u00a0and\nreturn\u00a0if\u00a0it\u2019s\u00a0true.\u00a0This\u00a0kind\u00a0of\u00a0check\u00a0is\u00a0often\u00a0called\u00a0a\u00a0guard\u00a0clause.\nThe\u00a0key\u00a0point\u00a0of\u00a0Replace\u00a0Nested\u00a0Conditional\u00a0with\u00a0Guard\u00a0Clauses\u00a0is\u00a0emphasis.\u00a0If\u00a0I\u2019m\nusing\u00a0an\u00a0if\u00adthen\u00adelse\u00a0construct,\u00a0I\u2019m\u00a0giving\u00a0equal\u00a0weight\u00a0to\u00a0the\u00a0if\u00a0leg\u00a0and\u00a0the\u00a0else\u00a0leg.\nwww.EBooksWorld.ir\n", "page": 296, "type": "text", "section": "Page 296"}
{"text": "This\u00a0communicates\u00a0to\u00a0the\u00a0reader\u00a0that\u00a0the\u00a0legs\u00a0are\u00a0equally\u00a0likely\u00a0and\u00a0important.\u00a0Instead,\nthe\u00a0guard\u00a0clause\u00a0says,\u00a0\u201cThis\u00a0isn\u2019t\u00a0the\u00a0core\u00a0to\u00a0this\u00a0function,\u00a0and\u00a0if\u00a0it\u00a0happens,\u00a0do\nsomething\u00a0and\u00a0get\u00a0out.\u201d\nI\u00a0often\u00a0find\u00a0I\u00a0use\u00a0Replace\u00a0Nested\u00a0Conditional\u00a0with\u00a0Guard\u00a0Clauses\u00a0when\u00a0I\u2019m\u00a0working\nwith\u00a0a\u00a0programmer\u00a0who\u00a0has\u00a0been\u00a0taught\u00a0to\u00a0have\u00a0only\u00a0one\u00a0entry\u00a0point\u00a0and\u00a0one\u00a0exit\u00a0point\nfrom\u00a0a\u00a0method.\u00a0One\u00a0entry\u00a0point\u00a0is\u00a0enforced\u00a0by\u00a0modern\u00a0languages,\u00a0but\u00a0one\u00a0exit\u00a0point\u00a0is\nreally\u00a0not\u00a0a\u00a0useful\u00a0rule.\u00a0Clarity\u00a0is\u00a0the\u00a0key\u00a0principle:\u00a0If\u00a0the\u00a0method\u00a0is\u00a0clearer\u00a0with\u00a0one\u00a0exit\npoint,\u00a0use\u00a0one\u00a0exit\u00a0point\u037e\u00a0otherwise\u00a0don\u2019t.\nMechanics\nSelect\u00a0outermost\u00a0condition\u00a0that\u00a0needs\u00a0to\u00a0be\u00a0replaced,\u00a0and\u00a0change\u00a0it\u00a0into\u00a0a\u00a0guard\nclause.\nTest.\nRepeat\u00a0as\u00a0needed.\nIf\u00a0all\u00a0the\u00a0guard\u00a0clauses\u00a0return\u00a0the\u00a0same\u00a0result,\u00a0use\u00a0Consolidate\u00a0Conditional\nExpression\u00a0(263).\nExample\nHere\u2019s\u00a0some\u00a0code\u00a0to\u00a0calculate\u00a0a\u00a0payment\u00a0amount\u00a0for\u00a0an\u00a0employee.\u00a0It\u2019s\u00a0only\u00a0relevant\u00a0if\nthe\u00a0employee\u00a0is\u00a0still\u00a0with\u00a0the\u00a0company,\u00a0so\u00a0it\u00a0has\u00a0to\u00a0check\u00a0for\u00a0the\u00a0two\u00a0other\u00a0cases.\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0payAmount(employee)\u00a0{\n\u00a0\u00a0let\u00a0result\u037e\n\u00a0\u00a0if(employee.isSeparated)\u00a0{\n\u00a0\u00a0\u00a0\u00a0result\u00a0=\u00a0{amount:\u00a00,\u00a0reasonCode:\u00a0\"SEP\"}\u037e\n\u00a0\u00a0}\n\u00a0\u00a0else\u00a0{\n\u00a0\u00a0\u00a0\u00a0if\u00a0(employee.isRetired)\u00a0{\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0result\u00a0=\u00a0{amount:\u00a00,\u00a0reasonCode:\u00a0\"RET\"}\u037e\n\u00a0\u00a0\u00a0\u00a0}\n\u00a0\u00a0\u00a0\u00a0else\u00a0{\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0//\u00a0logic\u00a0to\u00a0compute\u00a0amount\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0lorem.ipsum(dolor.sitAmet)\u037e\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0consectetur(adipiscing).elit()\u037e\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0sed.do.eiusmod\u00a0=\u00a0tempor.incididunt.ut(labore)\u00a0&&\u00a0dolore(magna.aliqua)\u037e\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0ut.enim.ad(minim.veniam)\u037e\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0result\u00a0=\u00a0someFinalComputation()\u037e\n\u00a0\u00a0\u00a0\u00a0}\nwww.EBooksWorld.ir\n", "page": 297, "type": "text", "section": "Page 297"}
{"text": "\u00a0\u00a0}\n\u00a0\u00a0return\u00a0result\u037e\n}\nNesting\u00a0the\u00a0conditionals\u00a0here\u00a0masks\u00a0the\u00a0true\u00a0meaning\u00a0of\u00a0what\u00a0it\u00a0going\u00a0on.\u00a0The\u00a0primary\npurpose\u00a0of\u00a0this\u00a0code\u00a0only\u00a0applies\u00a0if\u00a0these\u00a0conditions\u00a0aren\u2019t\u00a0the\u00a0case.\u00a0In\u00a0this\u00a0situation,\nthe\u00a0intention\u00a0of\u00a0the\u00a0code\u00a0reads\u00a0more\u00a0clearly\u00a0with\u00a0guard\u00a0clauses.\nAs\u00a0with\u00a0any\u00a0refactoring\u00a0change,\u00a0I\u00a0like\u00a0to\u00a0take\u00a0small\u00a0steps,\u00a0so\u00a0I\u00a0begin\u00a0with\u00a0the\u00a0topmost\ncondition.\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0payAmount(employee)\u00a0{\n\u00a0\u00a0let\u00a0result\u037e\n\u00a0\u00a0if\u00a0(employee.isSeparated)\u00a0return\u00a0{amount:\u00a00,\u00a0reasonCode:\u00a0\"SEP\"}\u037e\n\u00a0\u00a0if\u00a0(employee.isRetired)\u00a0{\n\u00a0\u00a0\u00a0\u00a0result\u00a0=\u00a0{amount:\u00a00,\u00a0reasonCode:\u00a0\"RET\"}\u037e\n\u00a0\u00a0}\n\u00a0\u00a0else\u00a0{\n\u00a0\u00a0\u00a0\u00a0//\u00a0logic\u00a0to\u00a0compute\u00a0amount\n\u00a0\u00a0\u00a0\u00a0lorem.ipsum(dolor.sitAmet)\u037e\n\u00a0\u00a0\u00a0\u00a0consectetur(adipiscing).elit()\u037e\n\u00a0\u00a0\u00a0\u00a0sed.do.eiusmod\u00a0=\u00a0tempor.incididunt.ut(labore)\u00a0&&\u00a0dolore(magna.aliqua)\u037e\n\u00a0\u00a0\u00a0\u00a0ut.enim.ad(minim.veniam)\u037e\n\u00a0\u00a0\u00a0\u00a0result\u00a0=\u00a0someFinalComputation()\u037e\n\u00a0\u00a0}\n\u00a0\u00a0return\u00a0result\u037e\n}\nI\u00a0test\u00a0that\u00a0change\u00a0and\u00a0move\u00a0on\u00a0to\u00a0the\u00a0next\u00a0one.\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0payAmount(employee)\u00a0{\n\u00a0\u00a0let\u00a0result\u037e\n\u00a0\u00a0if\u00a0(employee.isSeparated)\u00a0return\u00a0{amount:\u00a00,\u00a0reasonCode:\u00a0\"SEP\"}\u037e\n\u00a0\u00a0if\u00a0(employee.isRetired)\u00a0\u00a0\u00a0return\u00a0{amount:\u00a00,\u00a0reasonCode:\u00a0\"RET\"}\u037e\n\u00a0\u00a0//\u00a0logic\u00a0to\u00a0compute\u00a0amount\n\u00a0\u00a0lorem.ipsum(dolor.sitAmet)\u037e\n\u00a0\u00a0consectetur(adipiscing).elit()\u037e\n\u00a0\u00a0sed.do.eiusmod\u00a0=\u00a0tempor.incididunt.ut(labore)\u00a0&&\u00a0dolore(magna.aliqua)\u037e\n\u00a0\u00a0ut.enim.ad(minim.veniam)\u037e\n\u00a0\u00a0result\u00a0=\u00a0someFinalComputation()\u037e\n\u00a0\u00a0return\u00a0result\u037e\n}\nwww.EBooksWorld.ir\n", "page": 298, "type": "text", "section": "Page 298"}
{"text": "At\u00a0which\u00a0point\u00a0the\u00a0result\u00a0variable\u00a0isn\u2019t\u00a0really\u00a0doing\u00a0anything\u00a0useful,\u00a0so\u00a0I\u00a0remove\u00a0it.\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0payAmount(employee)\u00a0{\n\u00a0\u00a0let\u00a0result\u037e\n\u00a0\u00a0if\u00a0(employee.isSeparated)\u00a0return\u00a0{amount:\u00a00,\u00a0reasonCode:\u00a0\"SEP\"}\u037e\n\u00a0\u00a0if\u00a0(employee.isRetired)\u00a0\u00a0\u00a0return\u00a0{amount:\u00a00,\u00a0reasonCode:\u00a0\"RET\"}\u037e\n\u00a0\u00a0//\u00a0logic\u00a0to\u00a0compute\u00a0amount\n\u00a0\u00a0lorem.ipsum(dolor.sitAmet)\u037e\n\u00a0\u00a0consectetur(adipiscing).elit()\u037e\n\u00a0\u00a0sed.do.eiusmod\u00a0=\u00a0tempor.incididunt.ut(labore)\u00a0&&\u00a0dolore(magna.aliqua)\u037e\n\u00a0\u00a0ut.enim.ad(minim.veniam)\u037e\n\u00a0\u00a0return\u00a0someFinalComputation()\u037e\n}\nThe\u00a0rule\u00a0is\u00a0that\u00a0you\u00a0always\u00a0get\u00a0an\u00a0extra\u00a0strawberry\u00a0when\u00a0you\u00a0remove\u00a0a\u00a0mutable\nvariable.\nExample: Reversing the Conditions\nWhen\u00a0reviewing\u00a0the\u00a0manuscript\u00a0of\u00a0the\u00a0first\u00a0edition\u00a0of\u00a0this\u00a0book,\u00a0Joshua\u00a0Kerievsky\npointed\u00a0out\u00a0that\u00a0we\u00a0often\u00a0do\u00a0Replace\u00a0Nested\u00a0Conditional\u00a0with\u00a0Guard\u00a0Clauses\u00a0by\nreversing\u00a0the\u00a0conditional\u00a0expressions.\u00a0Even\u00a0better,\u00a0he\u00a0gave\u00a0me\u00a0an\u00a0example\u00a0so\u00a0I\u00a0didn\u2019t\nhave\u00a0to\u00a0further\u00a0tax\u00a0my\u00a0imagination.\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0adjustedCapital(anInstrument)\u00a0{\n\u00a0\u00a0let\u00a0result\u00a0=\u00a00\u037e\n\u00a0\u00a0if\u00a0(anInstrument.capital\u00a0>\u00a00)\u00a0{\n\u00a0\u00a0\u00a0\u00a0if\u00a0(anInstrument.interestRate\u00a0>\u00a00\u00a0&&\u00a0anInstrument.duration\u00a0>\u00a00)\u00a0{\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0result\u00a0=\u00a0(anInstrument.income\u00a0/\u00a0anInstrument.duration)\u00a0*\u00a0anInstrument.adju\n\u00a0\u00a0\u00a0\u00a0}\n\u00a0\u00a0}\n\u00a0\u00a0return\u00a0result\u037e\n}\nAgain,\u00a0I\u00a0make\u00a0the\u00a0replacements\u00a0one\u00a0at\u00a0a\u00a0time,\u00a0but\u00a0this\u00a0time\u00a0I\u00a0reverse\u00a0the\u00a0condition\u00a0as\u00a0I\nput\u00a0in\u00a0the\u00a0guard\u00a0clause.\nwww.EBooksWorld.ir\n", "page": 299, "type": "text", "section": "Page 299"}
{"text": "Click\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0adjustedCapital(anInstrument)\u00a0{\n\u00a0\u00a0let\u00a0result\u00a0=\u00a00\u037e\n\u00a0\u00a0if\u00a0(anInstrument.capital\u00a0<=\u00a00)\u00a0return\u00a0result\u037e\n\u00a0\u00a0if\u00a0(anInstrument.interestRate\u00a0>\u00a00\u00a0&&\u00a0anInstrument.duration\u00a0>\u00a00)\u00a0{\n\u00a0\u00a0\u00a0\u00a0result\u00a0=\u00a0(anInstrument.income\u00a0/\u00a0anInstrument.duration)\u00a0*\u00a0anInstrument.adjust\n\u00a0\u00a0}\n\u00a0\u00a0return\u00a0result\u037e\n}\nThe\u00a0next\u00a0conditional\u00a0is\u00a0a\u00a0bit\u00a0more\u00a0complicated,\u00a0so\u00a0I\u00a0do\u00a0it\u00a0in\u00a0two\u00a0steps.\u00a0First,\u00a0I\u00a0simply\nadd\u00a0a\u00a0not.\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0adjustedCapital(anInstrument)\u00a0{\n\u00a0\u00a0let\u00a0result\u00a0=\u00a00\u037e\n\u00a0\u00a0if\u00a0(anInstrument.capital\u00a0<=\u00a00)\u00a0return\u00a0result\u037e\n\u00a0\u00a0if\u00a0(!(anInstrument.interestRate\u00a0>\u00a00\u00a0&&\u00a0anInstrument.duration\u00a0>\u00a00))\u00a0return\u00a0resu\n\u00a0\u00a0result\u00a0=\u00a0(anInstrument.income\u00a0/\u00a0anInstrument.duration)\u00a0*\u00a0anInstrument.adjustme\n\u00a0\u00a0return\u00a0result\u037e\n}\nLeaving\u00a0nots\u00a0in\u00a0a\u00a0conditional\u00a0like\u00a0that\u00a0twists\u00a0my\u00a0mind\u00a0around\u00a0at\u00a0a\u00a0painful\u00a0angle,\u00a0so\u00a0I\nsimplify\u00a0it:\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0adjustedCapital(anInstrument)\u00a0{\n\u00a0\u00a0let\u00a0result\u00a0=\u00a00\u037e\n\u00a0\u00a0if\u00a0(anInstrument.capital\u00a0<=\u00a00)\u00a0return\u00a0result\u037e\n\u00a0\u00a0if\u00a0(anInstrument.interestRate\u00a0<=\u00a00\u00a0||\u00a0anInstrument.duration\u00a0<=\u00a00)\u00a0return\u00a0resul\n\u00a0\u00a0result\u00a0=\u00a0(anInstrument.income\u00a0/\u00a0anInstrument.duration)\u00a0*\u00a0anInstrument.adjustme\n\u00a0\u00a0return\u00a0result\u037e\n}\nBoth\u00a0of\u00a0those\u00a0lines\u00a0have\u00a0conditions\u00a0with\u00a0the\u00a0same\u00a0result,\u00a0so\u00a0I\u00a0apply\u00a0Consolidate\nConditional\u00a0Expression\u00a0(263).\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nwww.EBooksWorld.ir\n", "page": 300, "type": "text", "section": "Page 300"}
{"text": "function\u00a0adjustedCapital(anInstrument)\u00a0{\n\u00a0\u00a0let\u00a0result\u00a0=\u00a00\u037e\n\u00a0\u00a0if\u00a0(\u00a0\u00a0\u00a0anInstrument.capital\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0<=\u00a00\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0||\u00a0anInstrument.interestRate\u00a0<=\u00a00\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0||\u00a0anInstrument.duration\u00a0\u00a0\u00a0\u00a0\u00a0<=\u00a00)\u00a0return\u00a0result\u037e\n\u00a0\u00a0result\u00a0=\u00a0(anInstrument.income\u00a0/\u00a0anInstrument.duration)\u00a0*\u00a0anInstrument.adjustme\n\u00a0\u00a0return\u00a0result\u037e\n}\nThe\u00a0result\u00a0variable\u00a0is\u00a0doing\u00a0two\u00a0things\u00a0here.\u00a0Its\u00a0first\u00a0setting\u00a0to\u00a0zero\u00a0indicates\u00a0what\u00a0to\nreturn\u00a0when\u00a0the\u00a0guard\u00a0clause\u00a0triggers\u037e\u00a0its\u00a0second\u00a0value\u00a0is\u00a0the\u00a0final\u00a0computation.\u00a0I\u00a0can\nget\u00a0rid\u00a0of\u00a0it,\u00a0which\u00a0both\u00a0eliminates\u00a0its\u00a0double\u00a0usage\u00a0and\u00a0gets\u00a0me\u00a0a\u00a0strawberry.\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0adjustedCapital(anInstrument)\u00a0{\n\u00a0\u00a0if\u00a0(\u00a0\u00a0\u00a0anInstrument.capital\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0<=\u00a00\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0||\u00a0anInstrument.interestRate\u00a0<=\u00a00\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0||\u00a0anInstrument.duration\u00a0\u00a0\u00a0\u00a0\u00a0<=\u00a00)\u00a0return\u00a00\u037e\n\u00a0\u00a0return\u00a0(anInstrument.income\u00a0/\u00a0anInstrument.duration)\u00a0*\u00a0anInstrument.adjustment\n}\nREPLACE CONDITIONAL WITH POLYMORPHISM\nwww.EBooksWorld.ir\n", "page": 301, "type": "text", "section": "Page 301"}
{"text": "Motivation\nComplex\u00a0conditional\u00a0logic\u00a0is\u00a0one\u00a0of\u00a0the\u00a0hardest\u00a0things\u00a0to\u00a0reason\u00a0about\u00a0in\u00a0programming,\nso\u00a0I\u00a0always\u00a0look\u00a0for\u00a0ways\u00a0to\u00a0add\u00a0structure\u00a0to\u00a0conditional\u00a0logic.\u00a0Often,\u00a0I\u00a0find\u00a0I\u00a0can\nseparate\u00a0the\u00a0logic\u00a0into\u00a0different\u00a0circumstances\u2014high\u00adlevel\u00a0cases\u2014to\u00a0divide\u00a0the\nconditions.\u00a0Sometimes\u00a0it\u2019s\u00a0enough\u00a0to\u00a0represent\u00a0this\u00a0division\u00a0within\u00a0the\u00a0structure\u00a0of\u00a0a\nconditional\u00a0itself,\u00a0but\u00a0using\u00a0classes\u00a0and\u00a0polymorphism\u00a0can\u00a0make\u00a0the\u00a0separation\u00a0more\nexplicit.\nA\u00a0common\u00a0case\u00a0for\u00a0this\u00a0is\u00a0where\u00a0I\u00a0can\u00a0form\u00a0a\u00a0set\u00a0of\u00a0types,\u00a0each\u00a0handling\u00a0the\u00a0conditional\nlogic\u00a0differently.\u00a0I\u00a0might\u00a0notice\u00a0that\u00a0books,\u00a0music,\u00a0and\u00a0food\u00a0vary\u00a0in\u00a0how\u00a0they\u00a0are\nhandled\u00a0because\u00a0of\u00a0their\u00a0type.\u00a0This\u00a0is\u00a0made\u00a0most\u00a0obvious\u00a0when\u00a0there\u00a0are\u00a0several\nfunctions\u00a0that\u00a0have\u00a0a\u00a0switch\u00a0statement\u00a0on\u00a0a\u00a0type\u00a0code.\u00a0In\u00a0that\u00a0case,\u00a0I\u00a0remove\u00a0the\nduplication\u00a0of\u00a0the\u00a0common\u00a0switch\u00a0logic\u00a0by\u00a0creating\u00a0classes\u00a0for\u00a0each\u00a0case\u00a0and\u00a0using\nwww.EBooksWorld.ir\n", "page": 302, "type": "text", "section": "Page 302"}
{"text": "polymorphism\u00a0to\u00a0bring\u00a0out\u00a0the\u00a0type\u00adspecific\u00a0behavior.\nAnother\u00a0situation\u00a0is\u00a0where\u00a0I\u00a0can\u00a0think\u00a0of\u00a0the\u00a0logic\u00a0as\u00a0a\u00a0base\u00a0case\u00a0with\u00a0variants.\u00a0The\u00a0base\ncase\u00a0may\u00a0be\u00a0the\u00a0most\u00a0common\u00a0or\u00a0most\u00a0straightforward.\u00a0I\u00a0can\u00a0put\u00a0this\u00a0logic\u00a0into\u00a0a\nsuperclass\u00a0which\u00a0allows\u00a0me\u00a0to\u00a0reason\u00a0about\u00a0it\u00a0without\u00a0having\u00a0to\u00a0worry\u00a0about\u00a0the\nvariants.\u00a0I\u00a0then\u00a0put\u00a0each\u00a0variant\u00a0case\u00a0into\u00a0a\u00a0subclass,\u00a0which\u00a0I\u00a0express\u00a0with\u00a0code\u00a0that\nemphasizes\u00a0its\u00a0difference\u00a0from\u00a0the\u00a0base\u00a0case.\nPolymorphism\u00a0is\u00a0one\u00a0of\u00a0the\u00a0key\u00a0features\u00a0of\u00a0object\u00adoriented\u00a0programming\u2014and,\u00a0like\u00a0any\nuseful\u00a0feature,\u00a0it\u2019s\u00a0prone\u00a0to\u00a0overuse.\u00a0I\u2019ve\u00a0come\u00a0across\u00a0people\u00a0who\u00a0argue\u00a0that\u00a0all\nexamples\u00a0of\u00a0conditional\u00a0logic\u00a0should\u00a0be\u00a0replaced\u00a0with\u00a0polymorphism.\u00a0I\u00a0don\u2019t\u00a0agree\u00a0with\nthat\u00a0view.\u00a0Most\u00a0of\u00a0my\u00a0conditional\u00a0logic\u00a0uses\u00a0basic\u00a0conditional\u00a0statements\u2014if/else\u00a0and\nswitch/case.\u00a0But\u00a0when\u00a0I\u00a0see\u00a0complex\u00a0conditional\u00a0logic\u00a0that\u00a0can\u00a0be\u00a0improved\u00a0as\ndiscussed\u00a0above,\u00a0I\u00a0find\u00a0polymorphism\u00a0a\u00a0powerful\u00a0tool.\nMechanics\nIf\u00a0classes\u00a0do\u00a0not\u00a0exist\u00a0for\u00a0polymorphic\u00a0behavior,\u00a0create\u00a0them\u00a0together\u00a0with\u00a0a\u00a0factory\nfunction\u00a0to\u00a0return\u00a0the\u00a0correct\u00a0instance.\nUse\u00a0the\u00a0factory\u00a0function\u00a0in\u00a0calling\u00a0code.\nMove\u00a0the\u00a0conditional\u00a0function\u00a0to\u00a0the\u00a0superclass.\nIf\u00a0the\u00a0conditional\u00a0logic\u00a0is\u00a0not\u00a0a\u00a0self\u00adcontained\u00a0function,\u00a0use\u00a0Extract\u00a0Function\u00a0(106)\nto\u00a0make\u00a0it\u00a0so.\nPick\u00a0one\u00a0of\u00a0the\u00a0subclasses.\u00a0Create\u00a0a\u00a0subclass\u00a0method\u00a0that\u00a0overrides\u00a0the\u00a0conditional\nstatement\u00a0method.\u00a0Copy\u00a0the\u00a0body\u00a0of\u00a0that\u00a0leg\u00a0of\u00a0the\u00a0conditional\u00a0statement\u00a0into\u00a0the\nsubclass\u00a0method\u00a0and\u00a0adjust\u00a0it\u00a0to\u00a0fit.\nRepeat\u00a0for\u00a0each\u00a0leg\u00a0of\u00a0the\u00a0conditional.\nLeave\u00a0a\u00a0default\u00a0case\u00a0for\u00a0the\u00a0superclass\u00a0method.\u00a0Or,\u00a0if\u00a0superclass\u00a0should\u00a0be\u00a0abstract,\ndeclare\u00a0that\u00a0method\u00a0as\u00a0abstract\u00a0or\u00a0throw\u00a0an\u00a0error\u00a0to\u00a0show\u00a0it\u00a0should\u00a0be\u00a0the\nresponsibility\u00a0of\u00a0a\u00a0subclass.\nExample\nMy\u00a0friend\u00a0has\u00a0a\u00a0collection\u00a0of\u00a0birds\u00a0and\u00a0wants\u00a0to\u00a0know\u00a0how\u00a0fast\u00a0they\u00a0can\u00a0fly\u00a0and\u00a0what\nthey\u00a0have\u00a0for\u00a0plumage.\u00a0So\u00a0we\u00a0have\u00a0a\u00a0couple\u00a0of\u00a0small\u00a0programs\u00a0to\u00a0determine\u00a0the\ninformation.\nwww.EBooksWorld.ir\n", "page": 303, "type": "text", "section": "Page 303"}
{"text": "Click\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0plumages(birds)\u00a0{\n\u00a0\u00a0return\u00a0new\u00a0Map(birds.map(b\u00a0=>\u00a0[b.name,\u00a0plumage(b)]))\u037e\n}\nfunction\u00a0speeds(birds)\u00a0{\n\u00a0\u00a0return\u00a0new\u00a0Map(birds.map(b\u00a0=>\u00a0[b.name,\u00a0airSpeedVelocity(b)]))\u037e\n}\nfunction\u00a0plumage(bird)\u00a0{\n\u00a0\u00a0switch\u00a0(bird.type)\u00a0{\n\u00a0\u00a0case\u00a0'EuropeanSwallow':\n\u00a0\u00a0\u00a0\u00a0return\u00a0\"average\"\u037e\n\u00a0\u00a0case\u00a0'AfricanSwallow':\n\u00a0\u00a0\u00a0\u00a0return\u00a0(bird.numberOfCoconuts\u00a0>\u00a02)\u00a0?\u00a0\"tired\"\u00a0:\u00a0\"average\"\u037e\n\u00a0\u00a0case\u00a0'NorwegianBlueParrot':\n\u00a0\u00a0\u00a0\u00a0return\u00a0(bird.voltage\u00a0>\u00a0100)\u00a0?\u00a0\"scorched\"\u00a0:\u00a0\"beautiful\"\u037e\n\u00a0\u00a0default:\n\u00a0\u00a0\u00a0\u00a0return\u00a0\"unknown\"\u037e\n\u00a0\u00a0}\n}\nfunction\u00a0airSpeedVelocity(bird)\u00a0{\n\u00a0\u00a0switch\u00a0(bird.type)\u00a0{\n\u00a0\u00a0case\u00a0'EuropeanSwallow':\n\u00a0\u00a0\u00a0\u00a0return\u00a035\u037e\n\u00a0\u00a0case\u00a0'AfricanSwallow':\n\u00a0\u00a0\u00a0\u00a0return\u00a040\u00a0\u00ad\u00a02\u00a0*\u00a0bird.numberOfCoconuts\u037e\n\u00a0\u00a0case\u00a0'NorwegianBlueParrot':\n\u00a0\u00a0\u00a0\u00a0return\u00a0(bird.isNailed)\u00a0?\u00a00\u00a0:\u00a010\u00a0+\u00a0bird.voltage\u00a0/\u00a010\u037e\n\u00a0\u00a0default:\n\u00a0\u00a0\u00a0\u00a0return\u00a0null\u037e\n\u00a0\u00a0}\n}\nWe\u00a0have\u00a0a\u00a0couple\u00a0of\u00a0different\u00a0operations\u00a0that\u00a0vary\u00a0with\u00a0the\u00a0type\u00a0of\u00a0bird,\u00a0so\u00a0it\u00a0makes\nsense\u00a0to\u00a0create\u00a0classes\u00a0and\u00a0use\u00a0polymorphism\u00a0for\u00a0any\u00a0type\u00adspecific\u00a0behavior.\nI\u00a0begin\u00a0by\u00a0using\u00a0Combine\u00a0Functions\u00a0into\u00a0Class\u00a0(144)\u00a0on\u00a0airSpeedVelocity\u00a0and\nplumage.\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0plumage(bird)\u00a0{\n\u00a0\u00a0return\u00a0new\u00a0Bird(bird).plumage\u037e\n}\nfunction\u00a0airSpeedVelocity(bird)\u00a0{\n\u00a0\u00a0return\u00a0new\u00a0Bird(bird).airSpeedVelocity\u037e\nwww.EBooksWorld.ir\n", "page": 304, "type": "text", "section": "Page 304"}
{"text": "}\nclass\u00a0Bird\u00a0{\n\u00a0\u00a0constructor(birdObject)\u00a0{\n\u00a0\u00a0\u00a0\u00a0Object.assign(this,\u00a0birdObject)\u037e\n\u00a0\u00a0}\n\u00a0\u00a0get\u00a0plumage()\u00a0{\n\u00a0\u00a0\u00a0\u00a0switch\u00a0(this.type)\u00a0{\n\u00a0\u00a0\u00a0\u00a0case\u00a0'EuropeanSwallow':\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0return\u00a0\"average\"\u037e\n\u00a0\u00a0\u00a0\u00a0case\u00a0'AfricanSwallow':\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0return\u00a0(this.numberOfCoconuts\u00a0>\u00a02)\u00a0?\u00a0\"tired\"\u00a0:\u00a0\"average\"\u037e\n\u00a0\u00a0\u00a0\u00a0case\u00a0'NorwegianBlueParrot':\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0return\u00a0(this.voltage\u00a0>\u00a0100)\u00a0?\u00a0\"scorched\"\u00a0:\u00a0\"beautiful\"\u037e\n\u00a0\u00a0\u00a0\u00a0default:\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0return\u00a0\"unknown\"\u037e\n\u00a0\u00a0\u00a0\u00a0}\n\u00a0\u00a0}\n\u00a0\u00a0get\u00a0airSpeedVelocity()\u00a0{\n\u00a0\u00a0\u00a0\u00a0switch\u00a0(this.type)\u00a0{\n\u00a0\u00a0\u00a0\u00a0case\u00a0'EuropeanSwallow':\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0return\u00a035\u037e\n\u00a0\u00a0\u00a0\u00a0case\u00a0'AfricanSwallow':\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0return\u00a040\u00a0\u00ad\u00a02\u00a0*\u00a0this.numberOfCoconuts\u037e\n\u00a0\u00a0\u00a0\u00a0case\u00a0'NorwegianBlueParrot':\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0return\u00a0(this.isNailed)\u00a0?\u00a00\u00a0:\u00a010\u00a0+\u00a0this.voltage\u00a0/\u00a010\u037e\n\u00a0\u00a0\u00a0\u00a0default:\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0return\u00a0null\u037e\n\u00a0\u00a0\u00a0\u00a0}\n\u00a0\u00a0}\n}\nI\u00a0now\u00a0add\u00a0subclasses\u00a0for\u00a0each\u00a0kind\u00a0of\u00a0bird,\u00a0together\u00a0with\u00a0a\u00a0factory\u00a0function\u00a0to\ninstantiate\u00a0the\u00a0appropriate\u00a0subclass.\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0plumage(bird)\u00a0{\n\u00a0\u00a0return\u00a0createBird(bird).plumage\u037e\n}\nfunction\u00a0airSpeedVelocity(bird)\u00a0{\n\u00a0\u00a0return\u00a0createBird(bird).airSpeedVelocity\u037e\n}\n\u00a0\u00a0function\u00a0createBird(bird)\u00a0{\n\u00a0\u00a0\u00a0\u00a0switch\u00a0(bird.type)\u00a0{\n\u00a0\u00a0\u00a0\u00a0case\u00a0'EuropeanSwallow':\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0return\u00a0new\u00a0EuropeanSwallow(bird)\u037e\n\u00a0\u00a0\u00a0\u00a0case\u00a0'AfricanSwallow':\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0return\u00a0new\u00a0AfricanSwallow(bird)\u037e\nwww.EBooksWorld.ir\n", "page": 305, "type": "text", "section": "Page 305"}
{"text": "\u00a0\u00a0\u00a0\u00a0case\u00a0'NorweigianBlueParrot':\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0return\u00a0new\u00a0NorwegianBlueParrot(bird)\u037e\n\u00a0\u00a0\u00a0\u00a0default:\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0return\u00a0new\u00a0Bird(bird)\u037e\n\u00a0\u00a0\u00a0\u00a0}\n\u00a0\u00a0}\n\u00a0\u00a0class\u00a0EuropeanSwallow\u00a0extends\u00a0Bird\u00a0{\n\u00a0\u00a0}\n\u00a0\u00a0class\u00a0AfricanSwallow\u00a0extends\u00a0Bird\u00a0{\n\u00a0\u00a0}\n\u00a0\u00a0class\u00a0NorwegianBlueParrot\u00a0extends\u00a0Bird\u00a0{\n\u00a0\u00a0}\nNow\u00a0that\u00a0I\u2019ve\u00a0created\u00a0the\u00a0class\u00a0structure\u00a0that\u00a0I\u00a0need,\u00a0I\u00a0can\u00a0begin\u00a0on\u00a0the\u00a0two\u00a0conditional\nmethods.\u00a0I\u2019ll\u00a0begin\u00a0with\u00a0plumage.\u00a0I\u00a0take\u00a0one\u00a0leg\u00a0of\u00a0the\u00a0switch\u00a0statement\u00a0and\u00a0override\u00a0it\nin\u00a0the\u00a0appropriate\u00a0subclass.\nclass\u00a0EuropeanSwallow\u2026\nget\u00a0plumage()\u00a0{\n\u00a0\u00a0return\u00a0\"average\"\u037e\n}\nclass\u00a0Bird\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nget\u00a0plumage()\u00a0{\n\u00a0\u00a0switch\u00a0(this.type)\u00a0{\n\u00a0\u00a0case\u00a0'EuropeanSwallow':\n\u00a0\u00a0\u00a0\u00a0throw\u00a0\"oops\"\u037e\n\u00a0\u00a0case\u00a0'AfricanSwallow':\n\u00a0\u00a0\u00a0\u00a0return\u00a0(this.numberOfCoconuts\u00a0>\u00a02)\u00a0?\u00a0\"tired\"\u00a0:\u00a0\"average\"\u037e\n\u00a0\u00a0case\u00a0'NorwegianBlueParrot':\n\u00a0\u00a0\u00a0\u00a0return\u00a0(this.voltage\u00a0>\u00a0100)\u00a0?\u00a0\"scorched\"\u00a0:\u00a0\"beautiful\"\u037e\n\u00a0\u00a0default:\n\u00a0\u00a0\u00a0\u00a0return\u00a0\"unknown\"\u037e\n\u00a0\u00a0}\n}\nI\u00a0put\u00a0in\u00a0the\u00a0throw\u00a0because\u00a0I\u2019m\u00a0paranoid.\nI\u00a0can\u00a0compile\u00a0and\u00a0test\u00a0at\u00a0this\u00a0point.\u00a0Then,\u00a0if\u00a0all\u00a0is\u00a0well,\u00a0I\u00a0do\u00a0the\u00a0next\u00a0leg.\nwww.EBooksWorld.ir\n", "page": 306, "type": "text", "section": "Page 306"}
{"text": "class\u00a0AfricanSwallow\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nget\u00a0plumage()\u00a0{\n\u00a0\u00a0return\u00a0(this.numberOfCoconuts\u00a0>\u00a02)\u00a0?\u00a0\"tired\"\u00a0:\u00a0\"average\"\u037e\n}\nThen,\u00a0the\u00a0Norwegian\u00a0Blue:\nclass\u00a0NorwegianBlueParrot\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nget\u00a0plumage()\u00a0{\n\u00a0\u00a0return\u00a0(this.voltage\u00a0>\u00a0100)\u00a0?\u00a0\"scorched\"\u00a0:\u00a0\"beautiful\"\u037e\n}\nI\u00a0leave\u00a0the\u00a0superclass\u00a0method\u00a0for\u00a0the\u00a0default\u00a0case.\nclass\u00a0Bird\u2026\nget\u00a0plumage()\u00a0{\n\u00a0\u00a0return\u00a0\"unknown\"\u037e\n}\nI\u00a0repeat\u00a0the\u00a0same\u00a0process\u00a0for\u00a0airSpeedVelocity.\u00a0Once\u00a0I\u2019m\u00a0done,\u00a0I\u00a0end\u00a0up\u00a0with\u00a0the\nfollowing\u00a0code\u00a0(I\u00a0also\u00a0inlined\u00a0the\u00a0top\u00adlevel\u00a0functions\u00a0for\u00a0airSpeedVelocity\u00a0and\nplumage):\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0plumages(birds)\u00a0{\n\u00a0\u00a0return\u00a0new\u00a0Map(birds\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0.map(b\u00a0=>\u00a0createBird(b))\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0.map(bird\u00a0=>\u00a0[bird.name,\u00a0bird.plumage]))\u037e\n}\nfunction\u00a0speeds(birds)\u00a0{\n\u00a0\u00a0return\u00a0new\u00a0Map(birds\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0.map(b\u00a0=>\u00a0createBird(b))\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0.map(bird\u00a0=>\u00a0[bird.name,\u00a0bird.airSpeedVelocity]))\u037e\n}\nfunction\u00a0createBird(bird)\u00a0{\nwww.EBooksWorld.ir\n", "page": 307, "type": "text", "section": "Page 307"}
{"text": "\u00a0\u00a0switch\u00a0(bird.type)\u00a0{\n\u00a0\u00a0case\u00a0'EuropeanSwallow':\n\u00a0\u00a0\u00a0\u00a0return\u00a0new\u00a0EuropeanSwallow(bird)\u037e\n\u00a0\u00a0case\u00a0'AfricanSwallow':\n\u00a0\u00a0\u00a0\u00a0return\u00a0new\u00a0AfricanSwallow(bird)\u037e\n\u00a0\u00a0case\u00a0'NorwegianBlueParrot':\n\u00a0\u00a0\u00a0\u00a0return\u00a0new\u00a0NorwegianBlueParrot(bird)\u037e\n\u00a0\u00a0default:\n\u00a0\u00a0\u00a0\u00a0return\u00a0new\u00a0Bird(bird)\u037e\n\u00a0\u00a0}\n}\nclass\u00a0Bird\u00a0{\n\u00a0\u00a0constructor(birdObject)\u00a0{\n\u00a0\u00a0\u00a0\u00a0Object.assign(this,\u00a0birdObject)\u037e\n\u00a0\u00a0}\n\u00a0\u00a0get\u00a0plumage()\u00a0{\n\u00a0\u00a0\u00a0\u00a0return\u00a0\"unknown\"\u037e\n\u00a0\u00a0}\n\u00a0\u00a0get\u00a0airSpeedVelocity()\u00a0{\n\u00a0\u00a0\u00a0\u00a0return\u00a0null\u037e\n\u00a0\u00a0}\n}\nclass\u00a0EuropeanSwallow\u00a0extends\u00a0Bird\u00a0{\n\u00a0\u00a0get\u00a0plumage()\u00a0{\n\u00a0\u00a0\u00a0\u00a0return\u00a0\"average\"\u037e\n\u00a0\u00a0}\n\u00a0\u00a0get\u00a0airSpeedVelocity()\u00a0{\n\u00a0\u00a0\u00a0\u00a0return\u00a035\u037e\n\u00a0\u00a0}\n}\nclass\u00a0AfricanSwallow\u00a0extends\u00a0Bird\u00a0{\n\u00a0\u00a0get\u00a0plumage()\u00a0{\n\u00a0\u00a0\u00a0\u00a0return\u00a0(this.numberOfCoconuts\u00a0>\u00a02)\u00a0?\u00a0\"tired\"\u00a0:\u00a0\"average\"\u037e\n\u00a0\u00a0}\n\u00a0\u00a0get\u00a0airSpeedVelocity()\u00a0{\n\u00a0\u00a0\u00a0\u00a0return\u00a040\u00a0\u00ad\u00a02\u00a0*\u00a0this.numberOfCoconuts\u037e\n\u00a0\u00a0}\n}\nclass\u00a0NorwegianBlueParrot\u00a0extends\u00a0Bird\u00a0{\n\u00a0\u00a0get\u00a0plumage()\u00a0{\n\u00a0\u00a0\u00a0\u00a0return\u00a0(this.voltage\u00a0>\u00a0100)\u00a0?\u00a0\"scorched\"\u00a0:\u00a0\"beautiful\"\u037e\n\u00a0\u00a0}\n\u00a0\u00a0get\u00a0airSpeedVelocity()\u00a0{\n\u00a0\u00a0\u00a0\u00a0return\u00a0(this.isNailed)\u00a0?\u00a00\u00a0:\u00a010\u00a0+\u00a0this.voltage\u00a0/\u00a010\u037e\n\u00a0\u00a0}\n}\nLooking\u00a0at\u00a0this\u00a0final\u00a0code,\u00a0I\u00a0can\u00a0see\u00a0that\u00a0the\u00a0superclass\u00a0Bird\u00a0isn\u2019t\u00a0strictly\u00a0needed.\u00a0In\nJavaScript,\u00a0I\u00a0don\u2019t\u00a0need\u00a0a\u00a0type\u00a0hierarchy\u00a0for\u00a0polymorphism\u037e\u00a0as\u00a0long\u00a0as\u00a0my\u00a0objects\nimplement\u00a0the\u00a0appropriately\u00a0named\u00a0methods,\u00a0everything\u00a0works\u00a0fine.\u00a0In\u00a0this\u00a0situation,\nwww.EBooksWorld.ir\n", "page": 308, "type": "text", "section": "Page 308"}
{"text": "however,\u00a0I\u00a0like\u00a0to\u00a0keep\u00a0the\u00a0unnecessary\u00a0superclass\u00a0as\u00a0it\u00a0helps\u00a0explain\u00a0the\u00a0way\u00a0the\nclasses\u00a0are\u00a0related\u00a0in\u00a0the\u00a0domain.\nExample: Using Polymorphism for Variation\nWith\u00a0the\u00a0birds\u00a0example,\u00a0I\u2019m\u00a0using\u00a0a\u00a0clear\u00a0generalization\u00a0hierarchy.\u00a0That\u2019s\u00a0how\nsubclassing\u00a0and\u00a0polymorphism\u00a0is\u00a0often\u00a0discussed\u00a0in\u00a0textbooks\u00a0(including\u00a0mine)\u2014but\nit\u2019s\u00a0not\u00a0the\u00a0only\u00a0way\u00a0inheritance\u00a0is\u00a0used\u00a0in\u00a0practice\u037e\u00a0indeed,\u00a0it\u00a0probably\u00a0isn\u2019t\u00a0the\u00a0most\ncommon\u00a0or\u00a0best\u00a0way.\u00a0Another\u00a0case\u00a0for\u00a0inheritance\u00a0is\u00a0when\u00a0I\u00a0wish\u00a0to\u00a0indicate\u00a0that\u00a0one\nobject\u00a0is\u00a0mostly\u00a0similar\u00a0to\u00a0another,\u00a0but\u00a0with\u00a0some\u00a0variations.\nAs\u00a0an\u00a0example\u00a0of\u00a0this\u00a0case,\u00a0consider\u00a0some\u00a0code\u00a0used\u00a0by\u00a0a\u00a0rating\u00a0agency\u00a0to\u00a0compute\u00a0an\ninvestment\u00a0rating\u00a0for\u00a0the\u00a0voyages\u00a0of\u00a0sailing\u00a0ships.\u00a0The\u00a0rating\u00a0agency\u00a0gives\u00a0out\u00a0either\u00a0an\n\u201cA\u201d\u00a0or\u00a0\u201cB\u201d\u00a0rating,\u00a0depending\u00a0of\u00a0various\u00a0factors\u00a0due\u00a0to\u00a0risk\u00a0and\u00a0profit\u00a0potential.\u00a0The\u00a0risk\ncomes\u00a0from\u00a0assessing\u00a0the\u00a0nature\u00a0of\u00a0the\u00a0voyage\u00a0as\u00a0well\u00a0as\u00a0the\u00a0history\u00a0of\u00a0the\u00a0captain\u2019s\nprior\u00a0voyages.\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0rating(voyage,\u00a0history)\u00a0{\n\u00a0\u00a0const\u00a0vpf\u00a0=\u00a0voyageProfitFactor(voyage,\u00a0history)\u037e\n\u00a0\u00a0const\u00a0vr\u00a0=\u00a0voyageRisk(voyage)\u037e\n\u00a0\u00a0const\u00a0chr\u00a0=\u00a0captainHistoryRisk(voyage,\u00a0history)\u037e\n\u00a0\u00a0if\u00a0(vpf\u00a0*\u00a03\u00a0>\u00a0(vr\u00a0+\u00a0chr\u00a0*\u00a02))\u00a0return\u00a0\"A\"\u037e\n\u00a0\u00a0else\u00a0return\u00a0\"B\"\u037e\n}\nfunction\u00a0voyageRisk(voyage)\u00a0{\n\u00a0\u00a0let\u00a0result\u00a0=\u00a01\u037e\n\u00a0\u00a0if\u00a0(voyage.length\u00a0>\u00a04)\u00a0result\u00a0+=\u00a02\u037e\n\u00a0\u00a0if\u00a0(voyage.length\u00a0>\u00a08)\u00a0result\u00a0+=\u00a0voyage.length\u00a0\u00ad\u00a08\u037e\n\u00a0\u00a0if\u00a0([\"china\",\u00a0\"east\u00adindies\"].includes(voyage.zone))\u00a0result\u00a0+=\u00a04\u037e\n\u00a0\u00a0return\u00a0Math.max(result,\u00a00)\u037e\n}\nfunction\u00a0captainHistoryRisk(voyage,\u00a0history)\u00a0{\n\u00a0\u00a0let\u00a0result\u00a0=\u00a01\u037e\n\u00a0\u00a0if\u00a0(history.length\u00a0<\u00a05)\u00a0result\u00a0+=\u00a04\u037e\n\u00a0\u00a0result\u00a0+=\u00a0history.filter(v\u00a0=>\u00a0v.profit\u00a0<\u00a00).length\u037e\n\u00a0\u00a0if\u00a0(voyage.zone\u00a0===\u00a0\"china\"\u00a0&&\u00a0hasChina(history))\u00a0result\u00a0\u00ad=\u00a02\u037e\n\u00a0\u00a0return\u00a0Math.max(result,\u00a00)\u037e\n}\nfunction\u00a0hasChina(history)\u00a0{\n\u00a0\u00a0return\u00a0history.some(v\u00a0=>\u00a0\"china\"\u00a0===\u00a0v.zone)\u037e\n}\nfunction\u00a0voyageProfitFactor(voyage,\u00a0history)\u00a0{\n\u00a0\u00a0let\u00a0result\u00a0=\u00a02\u037e\n\u00a0\u00a0if\u00a0(voyage.zone\u00a0===\u00a0\"china\")\u00a0result\u00a0+=\u00a01\u037e\n\u00a0\u00a0if\u00a0(voyage.zone\u00a0===\u00a0\"east\u00adindies\")\u00a0result\u00a0+=\u00a01\u037e\n\u00a0\u00a0if\u00a0(voyage.zone\u00a0===\u00a0\"china\"\u00a0&&\u00a0hasChina(history))\u00a0{\nwww.EBooksWorld.ir\n", "page": 309, "type": "text", "section": "Page 309"}
{"text": "\u00a0\u00a0\u00a0\u00a0result\u00a0+=\u00a03\u037e\n\u00a0\u00a0\u00a0\u00a0if\u00a0(history.length\u00a0>\u00a010)\u00a0result\u00a0+=\u00a01\u037e\n\u00a0\u00a0\u00a0\u00a0if\u00a0(voyage.length\u00a0>\u00a012)\u00a0result\u00a0+=\u00a01\u037e\n\u00a0\u00a0\u00a0\u00a0if\u00a0(voyage.length\u00a0>\u00a018)\u00a0result\u00a0\u00ad=\u00a01\u037e\n\u00a0\u00a0}\n\u00a0\u00a0else\u00a0{\n\u00a0\u00a0\u00a0\u00a0if\u00a0(history.length\u00a0>\u00a08)\u00a0result\u00a0+=\u00a01\u037e\n\u00a0\u00a0\u00a0\u00a0if\u00a0(voyage.length\u00a0>\u00a014)\u00a0result\u00a0\u00ad=\u00a01\u037e\n\u00a0\u00a0}\n\u00a0\u00a0return\u00a0result\u037e\n}\nThe\u00a0functions\u00a0voyageRisk\u00a0and\u00a0captainHistoryRisk\u00a0score\u00a0points\u00a0for\u00a0risk,\nvoyageProfitFactor\u00a0scores\u00a0points\u00a0for\u00a0the\u00a0potential\u00a0profit,\u00a0and\u00a0rating\u00a0combines\nthese\u00a0to\u00a0give\u00a0the\u00a0overall\u00a0rating\u00a0for\u00a0the\u00a0voyage.\nThe\u00a0calling\u00a0code\u00a0would\u00a0look\u00a0something\u00a0like\u00a0this:\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nconst\u00a0voyage\u00a0=\u00a0{zone:\u00a0\"west\u00adindies\",\u00a0length:\u00a010}\u037e\nconst\u00a0history\u00a0=\u00a0[\n\u00a0\u00a0{zone:\u00a0\"east\u00adindies\",\u00a0profit:\u00a0\u00a05},\n\u00a0\u00a0{zone:\u00a0\"west\u00adindies\",\u00a0profit:\u00a015},\n\u00a0\u00a0{zone:\u00a0\"china\",\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0profit:\u00a0\u00ad2},\n\u00a0\u00a0{zone:\u00a0\"west\u00adafrica\",\u00a0profit:\u00a0\u00a07},\n]\u037e\nconst\u00a0myRating\u00a0=\u00a0rating(voyage,\u00a0history)\u037e\nWhat\u00a0I\u00a0want\u00a0to\u00a0focus\u00a0on\u00a0here\u00a0is\u00a0how\u00a0a\u00a0couple\u00a0of\u00a0places\u00a0use\u00a0conditional\u00a0logic\u00a0to\u00a0handle\nthe\u00a0case\u00a0of\u00a0a\u00a0voyage\u00a0to\u00a0China\u00a0where\u00a0the\u00a0captain\u00a0has\u00a0been\u00a0to\u00a0China\u00a0before.\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0rating(voyage,\u00a0history)\u00a0{\n\u00a0\u00a0const\u00a0vpf\u00a0=\u00a0voyageProfitFactor(voyage,\u00a0history)\u037e\n\u00a0\u00a0const\u00a0vr\u00a0=\u00a0voyageRisk(voyage)\u037e\n\u00a0\u00a0const\u00a0chr\u00a0=\u00a0captainHistoryRisk(voyage,\u00a0history)\u037e\n\u00a0\u00a0if\u00a0(vpf\u00a0*\u00a03\u00a0>\u00a0(vr\u00a0+\u00a0chr\u00a0*\u00a02))\u00a0return\u00a0\"A\"\u037e\n\u00a0\u00a0else\u00a0return\u00a0\"B\"\u037e\n}\n\u00a0\u00a0function\u00a0voyageRisk(voyage)\u00a0{\n\u00a0\u00a0let\u00a0result\u00a0=\u00a01\u037e\n\u00a0\u00a0if\u00a0(voyage.length\u00a0>\u00a04)\u00a0result\u00a0+=\u00a02\u037e\n\u00a0\u00a0if\u00a0(voyage.length\u00a0>\u00a08)\u00a0result\u00a0+=\u00a0voyage.length\u00a0\u00ad\u00a08\u037e\n\u00a0\u00a0if\u00a0([\"china\",\u00a0\"east\u00adindies\"].includes(voyage.zone))\u00a0result\u00a0+=\u00a04\u037e\nwww.EBooksWorld.ir\n", "page": 310, "type": "text", "section": "Page 310"}
{"text": "\u00a0\u00a0return\u00a0Math.max(result,\u00a00)\u037e\n}\nfunction\u00a0captainHistoryRisk(voyage,\u00a0history)\u00a0{\n\u00a0\u00a0let\u00a0result\u00a0=\u00a01\u037e\n\u00a0\u00a0if\u00a0(history.length\u00a0<\u00a05)\u00a0result\u00a0+=\u00a04\u037e\n\u00a0\u00a0result\u00a0+=\u00a0history.filter(v\u00a0=>\u00a0v.profit\u00a0<\u00a00).length\u037e\n\u00a0\u00a0if\u00a0(voyage.zone\u00a0===\u00a0\"china\"\u00a0&&\u00a0hasChina(history))\u00a0result\u00a0\u00ad=\u00a02\u037e\n\u00a0\u00a0return\u00a0Math.max(result,\u00a00)\u037e\n}\nfunction\u00a0hasChina(history)\u00a0{\n\u00a0\u00a0return\u00a0history.some(v\u00a0=>\u00a0\"china\"\u00a0===\u00a0v.zone)\u037e\n}\nfunction\u00a0voyageProfitFactor(voyage,\u00a0history)\u00a0{\n\u00a0\u00a0let\u00a0result\u00a0=\u00a02\u037e\n\u00a0\u00a0if\u00a0(voyage.zone\u00a0===\u00a0\"china\")\u00a0result\u00a0+=\u00a01\u037e\n\u00a0\u00a0if\u00a0(voyage.zone\u00a0===\u00a0\"east\u00adindies\")\u00a0result\u00a0+=\u00a01\u037e\n\u00a0\u00a0if\u00a0(voyage.zone\u00a0===\u00a0\"china\"\u00a0&&\u00a0hasChina(history))\u00a0{\n\u00a0\u00a0\u00a0\u00a0result\u00a0+=\u00a03\u037e\n\u00a0\u00a0\u00a0\u00a0if\u00a0(history.length\u00a0>\u00a010)\u00a0result\u00a0+=\u00a01\u037e\n\u00a0\u00a0\u00a0\u00a0if\u00a0(voyage.length\u00a0>\u00a012)\u00a0result\u00a0+=\u00a01\u037e\n\u00a0\u00a0\u00a0\u00a0if\u00a0(voyage.length\u00a0>\u00a018)\u00a0result\u00a0\u00ad=\u00a01\u037e\n\u00a0\u00a0}\n\u00a0\u00a0else\u00a0{\n\u00a0\u00a0\u00a0\u00a0if\u00a0(history.length\u00a0>\u00a08)\u00a0result\u00a0+=\u00a01\u037e\n\u00a0\u00a0\u00a0\u00a0if\u00a0(voyage.length\u00a0>\u00a014)\u00a0result\u00a0\u00ad=\u00a01\u037e\n\u00a0\u00a0}\n\u00a0\u00a0return\u00a0result\u037e\n}\nI\u00a0will\u00a0use\u00a0inheritance\u00a0and\u00a0polymorphism\u00a0to\u00a0separate\u00a0out\u00a0the\u00a0logic\u00a0for\u00a0handling\u00a0these\ncases\u00a0from\u00a0the\u00a0base\u00a0logic.\u00a0This\u00a0is\u00a0a\u00a0particularly\u00a0useful\u00a0refactoring\u00a0if\u00a0I\u2019m\u00a0about\u00a0to\nintroduce\u00a0more\u00a0special\u00a0logic\u00a0for\u00a0this\u00a0case\u2014and\u00a0the\u00a0logic\u00a0for\u00a0these\u00a0repeat\u00a0China\u00a0voyages\ncan\u00a0make\u00a0it\u00a0harder\u00a0to\u00a0understand\u00a0the\u00a0base\u00a0case.\nI\u2019m\u00a0beginning\u00a0with\u00a0a\u00a0set\u00a0of\u00a0functions.\u00a0To\u00a0introduce\u00a0polymorphism,\u00a0I\u00a0need\u00a0to\u00a0create\u00a0a\nclass\u00a0structure,\u00a0so\u00a0I\u00a0begin\u00a0by\u00a0applying\u00a0Combine\u00a0Functions\u00a0into\u00a0Class\u00a0(144).\u00a0This\u00a0results\nin\u00a0the\u00a0following\u00a0code:\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0rating(voyage,\u00a0history)\u00a0{\n\u00a0\u00a0return\u00a0new\u00a0Rating(voyage,\u00a0history).value\u037e\n}\nclass\u00a0Rating\u00a0{\n\u00a0\u00a0constructor(voyage,\u00a0history)\u00a0{\n\u00a0\u00a0\u00a0\u00a0this.voyage\u00a0=\u00a0voyage\u037e\n\u00a0\u00a0\u00a0\u00a0this.history\u00a0=\u00a0history\u037e\n\u00a0\u00a0}\nwww.EBooksWorld.ir\n", "page": 311, "type": "text", "section": "Page 311"}
{"text": "\u00a0\u00a0get\u00a0value()\u00a0{\n\u00a0\u00a0\u00a0\u00a0const\u00a0vpf\u00a0=\u00a0this.voyageProfitFactor\u037e\n\u00a0\u00a0\u00a0\u00a0const\u00a0vr\u00a0=\u00a0this.voyageRisk\u037e\n\u00a0\u00a0\u00a0\u00a0const\u00a0chr\u00a0=\u00a0this.captainHistoryRisk\u037e\n\u00a0\u00a0\u00a0\u00a0if\u00a0(vpf\u00a0*\u00a03\u00a0>\u00a0(vr\u00a0+\u00a0chr\u00a0*\u00a02))\u00a0return\u00a0\"A\"\u037e\n\u00a0\u00a0\u00a0\u00a0else\u00a0return\u00a0\"B\"\u037e\n\u00a0\u00a0}\n\u00a0\u00a0get\u00a0voyageRisk()\u00a0{\n\u00a0\u00a0\u00a0\u00a0let\u00a0result\u00a0=\u00a01\u037e\n\u00a0\u00a0\u00a0\u00a0if\u00a0(this.voyage.length\u00a0>\u00a04)\u00a0result\u00a0+=\u00a02\u037e\n\u00a0\u00a0\u00a0\u00a0if\u00a0(this.voyage.length\u00a0>\u00a08)\u00a0result\u00a0+=\u00a0this.voyage.length\u00a0\u00ad\u00a08\u037e\n\u00a0\u00a0\u00a0\u00a0if\u00a0([\"china\",\u00a0\"east\u00adindies\"].includes(this.voyage.zone))\u00a0result\u00a0+=\u00a04\u037e\n\u00a0\u00a0\u00a0\u00a0return\u00a0Math.max(result,\u00a00)\u037e\n\u00a0\u00a0}\n\u00a0\u00a0get\u00a0captainHistoryRisk()\u00a0{\n\u00a0\u00a0\u00a0\u00a0let\u00a0result\u00a0=\u00a01\u037e\n\u00a0\u00a0\u00a0\u00a0if\u00a0(this.history.length\u00a0<\u00a05)\u00a0result\u00a0+=\u00a04\u037e\n\u00a0\u00a0\u00a0\u00a0result\u00a0+=\u00a0this.history.filter(v\u00a0=>\u00a0v.profit\u00a0<\u00a00).length\u037e\n\u00a0\u00a0\u00a0\u00a0if\u00a0(this.voyage.zone\u00a0===\u00a0\"china\"\u00a0&&\u00a0this.hasChinaHistory)\u00a0result\u00a0\u00ad=\u00a02\u037e\n\u00a0\u00a0\u00a0\u00a0return\u00a0Math.max(result,\u00a00)\u037e\n\u00a0\u00a0}\n\u00a0\u00a0get\u00a0voyageProfitFactor()\u00a0{\n\u00a0\u00a0\u00a0\u00a0let\u00a0result\u00a0=\u00a02\u037e\n\u00a0\u00a0\u00a0\u00a0if\u00a0(this.voyage.zone\u00a0===\u00a0\"china\")\u00a0result\u00a0+=\u00a01\u037e\n\u00a0\u00a0\u00a0\u00a0if\u00a0(this.voyage.zone\u00a0===\u00a0\"east\u00adindies\")\u00a0result\u00a0+=\u00a01\u037e\n\u00a0\u00a0\u00a0\u00a0if\u00a0(this.voyage.zone\u00a0===\u00a0\"china\"\u00a0&&\u00a0this.hasChinaHistory)\u00a0{\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0result\u00a0+=\u00a03\u037e\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0if\u00a0(this.history.length\u00a0>\u00a010)\u00a0result\u00a0+=\u00a01\u037e\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0if\u00a0(this.voyage.length\u00a0>\u00a012)\u00a0result\u00a0+=\u00a01\u037e\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0if\u00a0(this.voyage.length\u00a0>\u00a018)\u00a0result\u00a0\u00ad=\u00a01\u037e\n\u00a0\u00a0\u00a0\u00a0}\n\u00a0\u00a0\u00a0\u00a0else\u00a0{\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0if\u00a0(this.history.length\u00a0>\u00a08)\u00a0result\u00a0+=\u00a01\u037e\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0if\u00a0(this.voyage.length\u00a0>\u00a014)\u00a0result\u00a0\u00ad=\u00a01\u037e\n\u00a0\u00a0\u00a0\u00a0}\n\u00a0\u00a0\u00a0\u00a0return\u00a0result\u037e\n\u00a0\u00a0}\n\u00a0\u00a0get\u00a0hasChinaHistory()\u00a0{\n\u00a0\u00a0\u00a0\u00a0return\u00a0this.history.some(v\u00a0=>\u00a0\"china\"\u00a0===\u00a0v.zone)\u037e\n\u00a0\u00a0}\n}\nThat\u2019s\u00a0given\u00a0me\u00a0the\u00a0class\u00a0for\u00a0the\u00a0base\u00a0case.\u00a0I\u00a0now\u00a0need\u00a0to\u00a0create\u00a0an\u00a0empty\u00a0subclass\u00a0to\nhouse\u00a0the\u00a0variant\u00a0behavior.\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nclass\u00a0ExperiencedChinaRating\u00a0extends\u00a0Rating\u00a0{\n}\nwww.EBooksWorld.ir\n", "page": 312, "type": "text", "section": "Page 312"}
{"text": "I\u00a0then\u00a0create\u00a0a\u00a0factory\u00a0function\u00a0to\u00a0return\u00a0the\u00a0variant\u00a0class\u00a0when\u00a0needed.\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0createRating(voyage,\u00a0history)\u00a0{\n\u00a0\u00a0if\u00a0(voyage.zone\u00a0===\u00a0\"china\"\u00a0&&\u00a0history.some(v\u00a0=>\u00a0\"china\"\u00a0===\u00a0v.zone))\n\u00a0\u00a0\u00a0\u00a0return\u00a0new\u00a0ExperiencedChinaRating(voyage,\u00a0history)\u037e\n\u00a0\u00a0else\u00a0return\u00a0new\u00a0Rating(voyage,\u00a0history)\u037e\n}\nI\u00a0need\u00a0to\u00a0modify\u00a0any\u00a0callers\u00a0to\u00a0use\u00a0the\u00a0factory\u00a0function\u00a0instead\u00a0of\u00a0directly\u00a0invoking\u00a0the\nconstructor,\u00a0which\u00a0in\u00a0this\u00a0case\u00a0is\u00a0just\u00a0the\u00a0rating\u00a0function.\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0rating(voyage,\u00a0history)\u00a0{\n\u00a0\u00a0return\u00a0createRating(voyage,\u00a0history).value\u037e\n}\nThere\u00a0are\u00a0two\u00a0bits\u00a0of\u00a0behavior\u00a0I\u00a0need\u00a0to\u00a0move\u00a0into\u00a0a\u00a0subclass.\u00a0I\u00a0begin\u00a0with\u00a0the\u00a0logic\u00a0in\ncaptainHistoryRisk:\nclass\u00a0Rating\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nget\u00a0captainHistoryRisk()\u00a0{\n\u00a0\u00a0let\u00a0result\u00a0=\u00a01\u037e\n\u00a0\u00a0if\u00a0(this.history.length\u00a0<\u00a05)\u00a0result\u00a0+=\u00a04\u037e\n\u00a0\u00a0result\u00a0+=\u00a0this.history.filter(v\u00a0=>\u00a0v.profit\u00a0<\u00a00).length\u037e\n\u00a0\u00a0if\u00a0(this.voyage.zone\u00a0===\u00a0\"china\"\u00a0&&\u00a0this.hasChinaHistory)\u00a0result\u00a0\u00ad=\u00a02\u037e\n\u00a0\u00a0return\u00a0Math.max(result,\u00a00)\u037e\n}\nI\u00a0write\u00a0the\u00a0overriding\u00a0method\u00a0in\u00a0the\u00a0subclass:\nclass\u00a0ExperiencedChinaRating\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nget\u00a0captainHistoryRisk()\u00a0{\nwww.EBooksWorld.ir\n", "page": 313, "type": "text", "section": "Page 313"}
{"text": "\u00a0\u00a0const\u00a0result\u00a0=\u00a0super.captainHistoryRisk\u00a0\u00ad\u00a02\u037e\n\u00a0\u00a0return\u00a0Math.max(result,\u00a00)\u037e\n}\nclass\u00a0Rating\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nget\u00a0captainHistoryRisk()\u00a0{\n\u00a0\u00a0let\u00a0result\u00a0=\u00a01\u037e\n\u00a0\u00a0if\u00a0(this.history.length\u00a0<\u00a05)\u00a0result\u00a0+=\u00a04\u037e\n\u00a0\u00a0result\u00a0+=\u00a0this.history.filter(v\u00a0=>\u00a0v.profit\u00a0<\u00a00).length\u037e\n\u00a0\u00a0if\u00a0(this.voyage.zone\u00a0===\u00a0\"china\"\u00a0&&\u00a0this.hasChinaHistory)\u00a0result\u00a0\u00ad=\u00a02\u037e\n\u00a0\u00a0return\u00a0Math.max(result,\u00a00)\u037e\n}\nSeparating\u00a0the\u00a0variant\u00a0behavior\u00a0from\u00a0voyageProfitFactor\u00a0is\u00a0a\u00a0bit\u00a0more\u00a0messy.\u00a0I\ncan\u2019t\u00a0simply\u00a0remove\u00a0the\u00a0variant\u00a0behavior\u00a0and\u00a0call\u00a0the\u00a0superclass\u00a0method\u00a0since\u00a0there\u00a0is\nan\u00a0alternative\u00a0path\u00a0here.\u00a0I\u00a0also\u00a0don\u2019t\u00a0want\u00a0to\u00a0copy\u00a0the\u00a0whole\u00a0superclass\u00a0method\u00a0down\u00a0to\nthe\u00a0subclass.\nclass\u00a0Rating\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nget\u00a0voyageProfitFactor()\u00a0{\n\u00a0\u00a0let\u00a0result\u00a0=\u00a02\u037e\n\u00a0\u00a0if\u00a0(this.voyage.zone\u00a0===\u00a0\"china\")\u00a0result\u00a0+=\u00a01\u037e\n\u00a0\u00a0if\u00a0(this.voyage.zone\u00a0===\u00a0\"east\u00adindies\")\u00a0result\u00a0+=\u00a01\u037e\n\u00a0\u00a0if\u00a0(this.voyage.zone\u00a0===\u00a0\"china\"\u00a0&&\u00a0this.hasChinaHistory)\u00a0{\n\u00a0\u00a0\u00a0\u00a0result\u00a0+=\u00a03\u037e\n\u00a0\u00a0\u00a0\u00a0if\u00a0(this.history.length\u00a0>\u00a010)\u00a0result\u00a0+=\u00a01\u037e\n\u00a0\u00a0\u00a0\u00a0if\u00a0(this.voyage.length\u00a0>\u00a012)\u00a0result\u00a0+=\u00a01\u037e\n\u00a0\u00a0\u00a0\u00a0if\u00a0(this.voyage.length\u00a0>\u00a018)\u00a0result\u00a0\u00ad=\u00a01\u037e\n\u00a0\u00a0}\n\u00a0\u00a0else\u00a0{\n\u00a0\u00a0\u00a0\u00a0if\u00a0(this.history.length\u00a0>\u00a08)\u00a0result\u00a0+=\u00a01\u037e\n\u00a0\u00a0\u00a0\u00a0if\u00a0(this.voyage.length\u00a0>\u00a014)\u00a0result\u00a0\u00ad=\u00a01\u037e\n\u00a0\u00a0}\n\u00a0\u00a0return\u00a0result\u037e\n}\nSo\u00a0my\u00a0response\u00a0is\u00a0to\u00a0first\u00a0use\u00a0Extract\u00a0Function\u00a0(106)\u00a0on\u00a0the\u00a0entire\u00a0conditional\u00a0block.\nwww.EBooksWorld.ir\n", "page": 314, "type": "text", "section": "Page 314"}
{"text": "class\u00a0Rating\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nget\u00a0voyageProfitFactor()\u00a0{\n\u00a0\u00a0let\u00a0result\u00a0=\u00a02\u037e\n\u00a0\u00a0if\u00a0(this.voyage.zone\u00a0===\u00a0\"china\")\u00a0result\u00a0+=\u00a01\u037e\n\u00a0\u00a0if\u00a0(this.voyage.zone\u00a0===\u00a0\"east\u00adindies\")\u00a0result\u00a0+=\u00a01\u037e\n\u00a0\u00a0result\u00a0+=\u00a0this.voyageAndHistoryLengthFactor\u037e\n\u00a0\u00a0return\u00a0result\u037e\n}\nget\u00a0voyageAndHistoryLengthFactor()\u00a0{\n\u00a0\u00a0let\u00a0result\u00a0=\u00a00\u037e\n\u00a0\u00a0if\u00a0(this.voyage.zone\u00a0===\u00a0\"china\"\u00a0&&\u00a0this.hasChinaHistory)\u00a0{\n\u00a0\u00a0\u00a0\u00a0result\u00a0+=\u00a03\u037e\n\u00a0\u00a0\u00a0\u00a0if\u00a0(this.history.length\u00a0>\u00a010)\u00a0result\u00a0+=\u00a01\u037e\n\u00a0\u00a0\u00a0\u00a0if\u00a0(this.voyage.length\u00a0>\u00a012)\u00a0result\u00a0+=\u00a01\u037e\n\u00a0\u00a0\u00a0\u00a0if\u00a0(this.voyage.length\u00a0>\u00a018)\u00a0result\u00a0\u00ad=\u00a01\u037e\n\u00a0\u00a0}\n\u00a0\u00a0else\u00a0{\n\u00a0\u00a0\u00a0\u00a0if\u00a0(this.history.length\u00a0>\u00a08)\u00a0result\u00a0+=\u00a01\u037e\n\u00a0\u00a0\u00a0\u00a0if\u00a0(this.voyage.length\u00a0>\u00a014)\u00a0result\u00a0\u00ad=\u00a01\u037e\n\u00a0\u00a0}\n\u00a0\u00a0return\u00a0result\u037e\n}\nA\u00a0function\u00a0name\u00a0with\u00a0an\u00a0\u201cAnd\u201d\u00a0in\u00a0it\u00a0is\u00a0a\u00a0pretty\u00a0bad\u00a0smell,\u00a0but\u00a0I\u2019ll\u00a0let\u00a0it\u00a0sit\u00a0and\u00a0reek\u00a0for\u00a0a\nmoment,\u00a0while\u00a0I\u00a0apply\u00a0the\u00a0subclassing.\nclass\u00a0Rating\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nget\u00a0voyageAndHistoryLengthFactor()\u00a0{\n\u00a0\u00a0let\u00a0result\u00a0=\u00a00\u037e\n\u00a0\u00a0if\u00a0(this.history.length\u00a0>\u00a08)\u00a0result\u00a0+=\u00a01\u037e\n\u00a0\u00a0if\u00a0(this.voyage.length\u00a0>\u00a014)\u00a0result\u00a0\u00ad=\u00a01\u037e\n\u00a0\u00a0return\u00a0result\u037e\n}\nclass\u00a0ExperiencedChinaRating\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nget\u00a0voyageAndHistoryLengthFactor()\u00a0{\nwww.EBooksWorld.ir\n", "page": 315, "type": "text", "section": "Page 315"}
{"text": "\u00a0\u00a0let\u00a0result\u00a0=\u00a00\u037e\n\u00a0\u00a0result\u00a0+=\u00a03\u037e\n\u00a0\u00a0if\u00a0(this.history.length\u00a0>\u00a010)\u00a0result\u00a0+=\u00a01\u037e\n\u00a0\u00a0if\u00a0(this.voyage.length\u00a0>\u00a012)\u00a0result\u00a0+=\u00a01\u037e\n\u00a0\u00a0if\u00a0(this.voyage.length\u00a0>\u00a018)\u00a0result\u00a0\u00ad=\u00a01\u037e\n\u00a0\u00a0return\u00a0result\u037e\n}\nThat\u2019s,\u00a0formally,\u00a0the\u00a0end\u00a0of\u00a0the\u00a0refactoring\u2014I\u2019ve\u00a0separated\u00a0the\u00a0variant\u00a0behavior\u00a0out\u00a0into\nthe\u00a0subclass.\u00a0The\u00a0superclass\u2019s\u00a0logic\u00a0is\u00a0simpler\u00a0to\u00a0understand\u00a0and\u00a0work\u00a0with,\u00a0and\u00a0I\u00a0only\nneed\u00a0to\u00a0deal\u00a0with\u00a0variant\u00a0case\u00a0when\u00a0I\u2019m\u00a0working\u00a0on\u00a0the\u00a0subclass\u00a0code,\u00a0which\u00a0is\nexpressed\u00a0in\u00a0terms\u00a0of\u00a0its\u00a0difference\u00a0with\u00a0the\u00a0superclass.\nBut\u00a0I\u00a0feel\u00a0I\u00a0should\u00a0at\u00a0least\u00a0outline\u00a0what\u00a0I\u2019d\u00a0do\u00a0with\u00a0the\u00a0awkward\u00a0new\u00a0method.\nIntroducing\u00a0a\u00a0method\u00a0purely\u00a0for\u00a0overriding\u00a0by\u00a0a\u00a0subclass\u00a0is\u00a0a\u00a0common\u00a0thing\u00a0to\u00a0do\u00a0when\ndoing\u00a0this\u00a0kind\u00a0of\u00a0base\u00adand\u00advariation\u00a0inheritance.\u00a0But\u00a0a\u00a0crude\u00a0method\u00a0like\u00a0this\nobscures\u00a0what\u2019s\u00a0going\u00a0on,\u00a0instead\u00a0of\u00a0revealing.\nThe\u00a0\u201cAnd\u201d\u00a0gives\u00a0away\u00a0that\u00a0there\u00a0are\u00a0really\u00a0two\u00a0separate\u00a0modifications\u00a0going\u00a0on\u00a0here\u2014so\nI\u00a0think\u00a0it\u2019s\u00a0wise\u00a0to\u00a0separate\u00a0them.\u00a0I\u2019ll\u00a0do\u00a0this\u00a0by\u00a0using\u00a0Extract\u00a0Function\u00a0(106)\u00a0on\u00a0the\nhistory\u00a0length\u00a0modification,\u00a0both\u00a0in\u00a0the\u00a0superclass\u00a0and\u00a0subclass.\u00a0I\u00a0start\u00a0with\u00a0just\u00a0the\nsuperclass:\nclass\u00a0Rating\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nget\u00a0voyageAndHistoryLengthFactor()\u00a0{\n\u00a0\u00a0let\u00a0result\u00a0=\u00a00\u037e\n\u00a0\u00a0result\u00a0+=\u00a0this.historyLengthFactor\u037e\n\u00a0\u00a0if\u00a0(this.voyage.length\u00a0>\u00a014)\u00a0result\u00a0\u00ad=\u00a01\u037e\n\u00a0\u00a0return\u00a0result\u037e\n}\nget\u00a0historyLengthFactor()\u00a0{\n\u00a0\u00a0return\u00a0(this.history.length\u00a0>\u00a08)\u00a0?\u00a01\u00a0:\u00a00\u037e\n}\nI\u00a0do\u00a0the\u00a0same\u00a0with\u00a0the\u00a0subclass:\nclass\u00a0ExperiencedChinaRating\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nget\u00a0voyageAndHistoryLengthFactor()\u00a0{\nwww.EBooksWorld.ir\n", "page": 316, "type": "text", "section": "Page 316"}
{"text": "\u00a0\u00a0let\u00a0result\u00a0=\u00a00\u037e\n\u00a0\u00a0result\u00a0+=\u00a03\u037e\n\u00a0\u00a0result\u00a0+=\u00a0this.historyLengthFactor\u037e\n\u00a0\u00a0if\u00a0(this.voyage.length\u00a0>\u00a012)\u00a0result\u00a0+=\u00a01\u037e\n\u00a0\u00a0if\u00a0(this.voyage.length\u00a0>\u00a018)\u00a0result\u00a0\u00ad=\u00a01\u037e\n\u00a0\u00a0return\u00a0result\u037e\n}\nget\u00a0historyLengthFactor()\u00a0{\n\u00a0\u00a0return\u00a0(this.history.length\u00a0>\u00a010)\u00a0?\u00a01\u00a0:\u00a00\u037e\n}\nI\u00a0can\u00a0then\u00a0use\u00a0Move\u00a0Statements\u00a0to\u00a0Callers\u00a0(217)\u00a0on\u00a0the\u00a0superclass\u00a0case.\nclass\u00a0Rating\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nget\u00a0voyageProfitFactor()\u00a0{\n\u00a0\u00a0let\u00a0result\u00a0=\u00a02\u037e\n\u00a0\u00a0if\u00a0(this.voyage.zone\u00a0===\u00a0\"china\")\u00a0result\u00a0+=\u00a01\u037e\n\u00a0\u00a0if\u00a0(this.voyage.zone\u00a0===\u00a0\"east\u00adindies\")\u00a0result\u00a0+=\u00a01\u037e\n\u00a0\u00a0result\u00a0+=\u00a0this.historyLengthFactor\u037e\n\u00a0\u00a0result\u00a0+=\u00a0this.voyageAndHistoryLengthFactor\u037e\n\u00a0\u00a0return\u00a0result\u037e\n}\nget\u00a0voyageAndHistoryLengthFactor()\u00a0{\n\u00a0\u00a0let\u00a0result\u00a0=\u00a00\u037e\n\u00a0\u00a0result\u00a0+=\u00a0this.historyLengthFactor\u037e\n\u00a0\u00a0if\u00a0(this.voyage.length\u00a0>\u00a014)\u00a0result\u00a0\u00ad=\u00a01\u037e\n\u00a0\u00a0return\u00a0result\u037e\n}\nclass\u00a0ExperiencedChinaRating\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nget\u00a0voyageAndHistoryLengthFactor()\u00a0{\n\u00a0\u00a0let\u00a0result\u00a0=\u00a00\u037e\n\u00a0\u00a0result\u00a0+=\u00a03\u037e\n\u00a0\u00a0result\u00a0+=\u00a0this.historyLengthFactor\u037e\n\u00a0\u00a0if\u00a0(this.voyage.length\u00a0>\u00a012)\u00a0result\u00a0+=\u00a01\u037e\n\u00a0\u00a0if\u00a0(this.voyage.length\u00a0>\u00a018)\u00a0result\u00a0\u00ad=\u00a01\u037e\n\u00a0\u00a0return\u00a0result\u037e\n}\nI\u2019d\u00a0then\u00a0use\u00a0Rename\u00a0Function\u00a0(124).\nwww.EBooksWorld.ir\n", "page": 317, "type": "text", "section": "Page 317"}
{"text": "class\u00a0Rating\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nget\u00a0voyageProfitFactor()\u00a0{\n\u00a0\u00a0let\u00a0result\u00a0=\u00a02\u037e\n\u00a0\u00a0if\u00a0(this.voyage.zone\u00a0===\u00a0\"china\")\u00a0result\u00a0+=\u00a01\u037e\n\u00a0\u00a0if\u00a0(this.voyage.zone\u00a0===\u00a0\"east\u00adindies\")\u00a0result\u00a0+=\u00a01\u037e\n\u00a0\u00a0result\u00a0+=\u00a0this.historyLengthFactor\u037e\n\u00a0\u00a0result\u00a0+=\u00a0this.voyageLengthFactor\u037e\n\u00a0\u00a0return\u00a0result\u037e\n}\nget\u00a0voyageLengthFactor()\u00a0{\n\u00a0\u00a0return\u00a0(this.voyage.length\u00a0>\u00a014)\u00a0?\u00a0\u00ad\u00a01:\u00a00\u037e\n}\nChanging\u00a0to\u00a0a\u00a0ternary\u00a0to\u00a0simplify\u00a0voyageLengthFactor.\nclass\u00a0ExperiencedChinaRating\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nget\u00a0voyageLengthFactor()\u00a0{\n\u00a0\u00a0let\u00a0result\u00a0=\u00a00\u037e\n\u00a0\u00a0result\u00a0+=\u00a03\u037e\n\u00a0\u00a0if\u00a0(this.voyage.length\u00a0>\u00a012)\u00a0result\u00a0+=\u00a01\u037e\n\u00a0\u00a0if\u00a0(this.voyage.length\u00a0>\u00a018)\u00a0result\u00a0\u00ad=\u00a01\u037e\n\u00a0\u00a0return\u00a0result\u037e\n}\nOne\u00a0last\u00a0thing.\u00a0I\u00a0don\u2019t\u00a0think\u00a0adding\u00a03\u00a0points\u00a0makes\u00a0sense\u00a0as\u00a0part\u00a0of\u00a0the\u00a0voyage\u00a0length\nfactor\u2014it\u2019s\u00a0better\u00a0added\u00a0to\u00a0the\u00a0overall\u00a0result.\nclass\u00a0ExperiencedChinaRating\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\n\u00a0\u00a0get\u00a0voyageProfitFactor()\u00a0{\n\u00a0\u00a0\u00a0\u00a0return\u00a0super.voyageProfitFactor\u00a0+\u00a03\u037e\n\u00a0\u00a0}\nget\u00a0voyageLengthFactor()\u00a0{\n\u00a0\u00a0let\u00a0result\u00a0=\u00a00\u037e\n\u00a0\u00a0result\u00a0+=\u00a03\u037e\n\u00a0\u00a0if\u00a0(this.voyage.length\u00a0>\u00a012)\u00a0result\u00a0+=\u00a01\u037e\nwww.EBooksWorld.ir\n", "page": 318, "type": "text", "section": "Page 318"}
{"text": "\u00a0\u00a0if\u00a0(this.voyage.length\u00a0>\u00a018)\u00a0result\u00a0\u00ad=\u00a01\u037e\n\u00a0\u00a0return\u00a0result\u037e\n}\nAt\u00a0the\u00a0end\u00a0of\u00a0the\u00a0refactoring,\u00a0I\u00a0have\u00a0the\u00a0following\u00a0code.\u00a0First,\u00a0there\u00a0is\u00a0the\u00a0basic\u00a0rating\nclass\u00a0which\u00a0can\u00a0ignore\u00a0any\u00a0complications\u00a0of\u00a0the\u00a0experienced\u00a0China\u00a0case:\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nclass\u00a0Rating\u00a0{\n\u00a0\u00a0constructor(voyage,\u00a0history)\u00a0{\n\u00a0\u00a0\u00a0\u00a0this.voyage\u00a0=\u00a0voyage\u037e\n\u00a0\u00a0\u00a0\u00a0this.history\u00a0=\u00a0history\u037e\n\u00a0\u00a0}\n\u00a0\u00a0get\u00a0value()\u00a0{\n\u00a0\u00a0\u00a0\u00a0const\u00a0vpf\u00a0=\u00a0this.voyageProfitFactor\u037e\n\u00a0\u00a0\u00a0\u00a0const\u00a0vr\u00a0=\u00a0this.voyageRisk\u037e\n\u00a0\u00a0\u00a0\u00a0const\u00a0chr\u00a0=\u00a0this.captainHistoryRisk\u037e\n\u00a0\u00a0\u00a0\u00a0if\u00a0(vpf\u00a0*\u00a03\u00a0>\u00a0(vr\u00a0+\u00a0chr\u00a0*\u00a02))\u00a0return\u00a0\"A\"\u037e\n\u00a0\u00a0\u00a0\u00a0else\u00a0return\u00a0\"B\"\u037e\n\u00a0\u00a0}\n\u00a0\u00a0get\u00a0voyageRisk()\u00a0{\n\u00a0\u00a0\u00a0\u00a0let\u00a0result\u00a0=\u00a01\u037e\n\u00a0\u00a0\u00a0\u00a0if\u00a0(this.voyage.length\u00a0>\u00a04)\u00a0result\u00a0+=\u00a02\u037e\n\u00a0\u00a0\u00a0\u00a0if\u00a0(this.voyage.length\u00a0>\u00a08)\u00a0result\u00a0+=\u00a0this.voyage.length\u00a0\u00ad\u00a08\u037e\n\u00a0\u00a0\u00a0\u00a0if\u00a0([\"china\",\u00a0\"east\u00adindies\"].includes(this.voyage.zone))\u00a0result\u00a0+=\u00a04\u037e\n\u00a0\u00a0\u00a0\u00a0return\u00a0Math.max(result,\u00a00)\u037e\n\u00a0\u00a0}\n\u00a0\u00a0get\u00a0captainHistoryRisk()\u00a0{\n\u00a0\u00a0\u00a0\u00a0let\u00a0result\u00a0=\u00a01\u037e\n\u00a0\u00a0\u00a0\u00a0if\u00a0(this.history.length\u00a0<\u00a05)\u00a0result\u00a0+=\u00a04\u037e\n\u00a0\u00a0\u00a0\u00a0result\u00a0+=\u00a0this.history.filter(v\u00a0=>\u00a0v.profit\u00a0<\u00a00).length\u037e\n\u00a0\u00a0\u00a0\u00a0return\u00a0Math.max(result,\u00a00)\u037e\n\u00a0\u00a0}\n\u00a0\u00a0get\u00a0voyageProfitFactor()\u00a0{\n\u00a0\u00a0\u00a0\u00a0let\u00a0result\u00a0=\u00a02\u037e\n\u00a0\u00a0\u00a0\u00a0if\u00a0(this.voyage.zone\u00a0===\u00a0\"china\")\u00a0result\u00a0+=\u00a01\u037e\n\u00a0\u00a0\u00a0\u00a0if\u00a0(this.voyage.zone\u00a0===\u00a0\"east\u00adindies\")\u00a0result\u00a0+=\u00a01\u037e\n\u00a0\u00a0\u00a0\u00a0result\u00a0+=\u00a0this.historyLengthFactor\u037e\n\u00a0\u00a0\u00a0\u00a0result\u00a0+=\u00a0this.voyageLengthFactor\u037e\n\u00a0\u00a0\u00a0\u00a0return\u00a0result\u037e\n\u00a0\u00a0}\n\u00a0\u00a0get\u00a0voyageLengthFactor()\u00a0{\n\u00a0\u00a0\u00a0\u00a0return\u00a0(this.voyage.length\u00a0>\u00a014)\u00a0?\u00a0\u00ad\u00a01:\u00a00\u037e\n\u00a0\u00a0}\n\u00a0\u00a0get\u00a0historyLengthFactor()\u00a0{\n\u00a0\u00a0\u00a0\u00a0return\u00a0(this.history.length\u00a0>\u00a08)\u00a0?\u00a01\u00a0:\u00a00\u037e\n\u00a0\u00a0}\n}\nwww.EBooksWorld.ir\n", "page": 319, "type": "text", "section": "Page 319"}
{"text": "The\u00a0code\u00a0for\u00a0the\u00a0experienced\u00a0China\u00a0case\u00a0reads\u00a0as\u00a0a\u00a0set\u00a0of\u00a0variations\u00a0on\u00a0the\u00a0base:\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nclass\u00a0ExperiencedChinaRating\u00a0extends\u00a0Rating\u00a0{\n\u00a0\u00a0get\u00a0captainHistoryRisk()\u00a0{\n\u00a0\u00a0\u00a0\u00a0const\u00a0result\u00a0=\u00a0super.captainHistoryRisk\u00a0\u00ad\u00a02\u037e\n\u00a0\u00a0\u00a0\u00a0return\u00a0Math.max(result,\u00a00)\u037e\n\u00a0\u00a0}\n\u00a0\u00a0get\u00a0voyageLengthFactor()\u00a0{\n\u00a0\u00a0\u00a0\u00a0let\u00a0result\u00a0=\u00a00\u037e\n\u00a0\u00a0\u00a0\u00a0if\u00a0(this.voyage.length\u00a0>\u00a012)\u00a0result\u00a0+=\u00a01\u037e\n\u00a0\u00a0\u00a0\u00a0if\u00a0(this.voyage.length\u00a0>\u00a018)\u00a0result\u00a0\u00ad=\u00a01\u037e\n\u00a0\u00a0\u00a0\u00a0return\u00a0result\u037e\n\u00a0\u00a0}\n\u00a0\u00a0get\u00a0historyLengthFactor()\u00a0{\n\u00a0\u00a0\u00a0\u00a0return\u00a0(this.history.length\u00a0>\u00a010)\u00a0?\u00a01\u00a0:\u00a00\u037e\n\u00a0\u00a0}\n\u00a0\u00a0get\u00a0voyageProfitFactor()\u00a0{\n\u00a0\u00a0\u00a0\u00a0return\u00a0super.voyageProfitFactor\u00a0+\u00a03\u037e\n\u00a0\u00a0}\n}\nINTRODUCE SPECIAL CASE\nformerly:\u00a0Introduce\u00a0Null\u00a0Object\nMotivation\nA\u00a0common\u00a0case\u00a0of\u00a0duplicated\u00a0code\u00a0is\u00a0when\u00a0many\u00a0users\u00a0of\u00a0a\u00a0data\u00a0structure\u00a0check\u00a0a\nspecific\u00a0value,\u00a0and\u00a0then\u00a0most\u00a0of\u00a0them\u00a0do\u00a0the\u00a0same\u00a0thing.\u00a0If\u00a0I\u00a0find\u00a0many\u00a0parts\u00a0of\u00a0the\u00a0code\nwww.EBooksWorld.ir\n", "page": 320, "type": "text", "section": "Page 320"}
{"text": "base\u00a0having\u00a0the\u00a0same\u00a0reaction\u00a0to\u00a0a\u00a0particular\u00a0value,\u00a0I\u00a0want\u00a0to\u00a0bring\u00a0that\u00a0reaction\u00a0into\u00a0a\nsingle\u00a0place.\nA\u00a0good\u00a0mechanism\u00a0for\u00a0this\u00a0is\u00a0the\u00a0Special\u00a0Case\u00a0pattern\u00a0where\u00a0I\u00a0create\u00a0a\u00a0special\u00adcase\nelement\u00a0that\u00a0captures\u00a0all\u00a0the\u00a0common\u00a0behavior.\u00a0This\u00a0allows\u00a0me\u00a0to\u00a0replace\u00a0most\u00a0of\u00a0the\nspecial\u00adcase\u00a0checks\u00a0with\u00a0simple\u00a0calls.\nA\u00a0special\u00a0case\u00a0can\u00a0manifest\u00a0itself\u00a0in\u00a0several\u00a0ways.\u00a0If\u00a0all\u00a0I\u2019m\u00a0doing\u00a0with\u00a0the\u00a0object\u00a0is\nreading\u00a0data,\u00a0I\u00a0can\u00a0supply\u00a0a\u00a0literal\u00a0object\u00a0with\u00a0all\u00a0the\u00a0values\u00a0I\u00a0need\u00a0filled\u00a0in.\u00a0If\u00a0I\u00a0need\nmore\u00a0behavior\u00a0than\u00a0simple\u00a0values,\u00a0I\u00a0can\u00a0create\u00a0a\u00a0special\u00a0object\u00a0with\u00a0methods\u00a0for\u00a0all\u00a0the\ncommon\u00a0behavior.\u00a0The\u00a0special\u00adcase\u00a0object\u00a0can\u00a0be\u00a0returned\u00a0by\u00a0an\u00a0encapsulating\u00a0class,\u00a0or\ninserted\u00a0into\u00a0a\u00a0data\u00a0structure\u00a0with\u00a0a\u00a0transform.\nA\u00a0common\u00a0value\u00a0that\u00a0needs\u00a0special\u00adcase\u00a0processing\u00a0is\u00a0null,\u00a0which\u00a0is\u00a0why\u00a0this\u00a0pattern\u00a0is\noften\u00a0called\u00a0the\u00a0Null\u00a0Object\u00a0pattern.\u00a0But\u00a0it\u2019s\u00a0the\u00a0same\u00a0approach\u00a0for\u00a0any\u00a0special\u00a0case\u2014I\nlike\u00a0to\u00a0say\u00a0that\u00a0Null\u00a0Object\u00a0is\u00a0a\u00a0special\u00a0case\u00a0of\u00a0Special\u00a0Case.\nMechanics\nBegin\u00a0with\u00a0a\u00a0container\u00a0data\u00a0structure\u00a0(or\u00a0class)\u00a0that\u00a0contains\u00a0a\u00a0property\u00a0which\u00a0is\u00a0the\nsubject\u00a0of\u00a0the\u00a0refactoring.\u00a0Clients\u00a0of\u00a0the\u00a0container\u00a0compare\u00a0the\u00a0subject\u00a0property\u00a0of\nthe\u00a0container\u00a0to\u00a0a\u00a0special\u00adcase\u00a0value.\u00a0We\u00a0wish\u00a0to\u00a0replace\u00a0the\u00a0special\u00adcase\u00a0value\u00a0of\u00a0the\nsubject\u00a0with\u00a0a\u00a0special\u00a0case\u00a0class\u00a0or\u00a0data\u00a0structure.\nAdd\u00a0a\u00a0special\u00adcase\u00a0check\u00a0property\u00a0to\u00a0the\u00a0subject,\u00a0returning\u00a0false.\nCreate\u00a0a\u00a0special\u00adcase\u00a0object\u00a0with\u00a0only\u00a0the\u00a0special\u00adcase\u00a0check\u00a0property,\u00a0returning\ntrue.\nApply\u00a0Extract\u00a0Function\u00a0(106)\u00a0to\u00a0the\u00a0special\u00adcase\u00a0comparison\u00a0code.\u00a0Ensure\u00a0that\u00a0all\nclients\u00a0use\u00a0the\u00a0new\u00a0function\u00a0instead\u00a0of\u00a0directly\u00a0comparing\u00a0it.\nIntroduce\u00a0the\u00a0new\u00a0special\u00adcase\u00a0subject\u00a0into\u00a0the\u00a0code,\u00a0either\u00a0by\u00a0returning\u00a0it\u00a0from\u00a0a\nfunction\u00a0call\u00a0or\u00a0by\u00a0applying\u00a0a\u00a0transform\u00a0function.\nChange\u00a0the\u00a0body\u00a0of\u00a0the\u00a0special\u00adcase\u00a0comparison\u00a0function\u00a0so\u00a0that\u00a0it\u00a0uses\u00a0the\u00a0special\u00ad\ncase\u00a0check\u00a0property.\nTest.\nUse\u00a0Combine\u00a0Functions\u00a0into\u00a0Class\u00a0(144)\u00a0or\u00a0Combine\u00a0Functions\u00a0into\u00a0Transform\n(149)\u00a0to\u00a0move\u00a0all\u00a0of\u00a0the\u00a0common\u00a0special\u00adcase\u00a0behavior\u00a0into\u00a0the\u00a0new\u00a0element.\nwww.EBooksWorld.ir\n", "page": 321, "type": "text", "section": "Page 321"}
{"text": "Since\u00a0the\u00a0special\u00adcase\u00a0class\u00a0usually\u00a0returns\u00a0fixed\u00a0values\u00a0to\u00a0simple\u00a0requests,\u00a0these\nmay\u00a0be\u00a0handled\u00a0by\u00a0making\u00a0the\u00a0special\u00a0case\u00a0a\u00a0literal\u00a0record.\nUse\u00a0Inline\u00a0Function\u00a0(115)\u00a0on\u00a0the\u00a0special\u00adcase\u00a0comparison\u00a0function\u00a0for\u00a0the\u00a0places\nwhere\u00a0it\u2019s\u00a0still\u00a0needed.\nExample\nA\u00a0utility\u00a0company\u00a0installs\u00a0its\u00a0services\u00a0in\u00a0sites.\nclass\u00a0Site\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nget\u00a0customer()\u00a0{return\u00a0this._customer\u037e}\nThere\u00a0are\u00a0various\u00a0properties\u00a0of\u00a0the\u00a0customer\u00a0class\u037e\u00a0I\u2019ll\u00a0consider\u00a0three\u00a0of\u00a0them.\nclass\u00a0Customer\u2026\nget\u00a0name()\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0{...}\nget\u00a0billingPlan()\u00a0\u00a0\u00a0\u00a0{...}\nset\u00a0billingPlan(arg)\u00a0{...}\nget\u00a0paymentHistory()\u00a0{...}\nMost\u00a0of\u00a0the\u00a0time,\u00a0a\u00a0site\u00a0has\u00a0a\u00a0customer,\u00a0but\u00a0sometimes\u00a0there\u00a0isn\u2019t\u00a0one.\u00a0Someone\u00a0may\nhave\u00a0moved\u00a0out\u00a0and\u00a0I\u00a0don\u2019t\u00a0yet\u00a0know\u00a0who,\u00a0if\u00a0anyone,\u00a0has\u00a0moved\u00a0in.\u00a0When\u00a0this\u00a0happens,\nthe\u00a0data\u00a0record\u00a0fills\u00a0the\u00a0customer\u00a0field\u00a0with\u00a0the\u00a0string\u00a0\u201cunknown\u201d.\u00a0Because\u00a0this\u00a0can\nhappen,\u00a0clients\u00a0of\u00a0the\u00a0site\u00a0need\u00a0to\u00a0be\u00a0able\u00a0to\u00a0handle\u00a0an\u00a0unknown\u00a0customer.\u00a0Here\u00a0are\nsome\u00a0example\u00a0fragments:\nclient\u00a01\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nconst\u00a0aCustomer\u00a0=\u00a0site.customer\u037e\n//\u00a0...\u00a0lots\u00a0of\u00a0intervening\u00a0code\u00a0...\nlet\u00a0customerName\u037e\nif\u00a0(aCustomer\u00a0===\u00a0\"unknown\")\u00a0customerName\u00a0=\u00a0\"occupant\"\u037e\nelse\u00a0customerName\u00a0=\u00a0aCustomer.name\u037e\nclient\u00a02\u2026\nwww.EBooksWorld.ir\n", "page": 322, "type": "text", "section": "Page 322"}
{"text": "Click\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nconst\u00a0plan\u00a0=\u00a0(aCustomer\u00a0===\u00a0\"unknown\")\u00a0?\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0registry.billingPlans.basic\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0:\u00a0aCustomer.billingPlan\u037e\nclient\u00a03\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nif\u00a0(aCustomer\u00a0!==\u00a0\"unknown\")\u00a0aCustomer.billingPlan\u00a0=\u00a0newPlan\u037e\nclient\u00a04\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nconst\u00a0weeksDelinquent\u00a0=\u00a0(aCustomer\u00a0===\u00a0\"unknown\")\u00a0?\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a00\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0:\u00a0aCustomer.paymentHistory.weeksDelinquentInLastYear\u037e\nLooking\u00a0through\u00a0the\u00a0code\u00a0base,\u00a0I\u00a0see\u00a0many\u00a0clients\u00a0of\u00a0the\u00a0site\u00a0object\u00a0that\u00a0have\u00a0to\u00a0deal\nwith\u00a0an\u00a0unknown\u00a0customer.\u00a0Most\u00a0of\u00a0them\u00a0do\u00a0the\u00a0same\u00a0thing\u00a0when\u00a0they\u00a0get\u00a0one:\u00a0They\nuse\u00a0\u201coccupant\u201d\u00a0as\u00a0the\u00a0name,\u00a0give\u00a0them\u00a0a\u00a0basic\u00a0billing\u00a0plan,\u00a0and\u00a0class\u00a0them\u00a0as\u00a0zero\u00ad\nweeks\u00a0delinquent.\u00a0This\u00a0widespread\u00a0testing\u00a0for\u00a0a\u00a0special\u00a0case,\u00a0plus\u00a0a\u00a0common\u00a0response,\nis\u00a0what\u00a0tells\u00a0me\u00a0it\u2019s\u00a0time\u00a0for\u00a0a\u00a0Special\u00a0Case\u00a0Object.\nI\u00a0begin\u00a0by\u00a0adding\u00a0a\u00a0method\u00a0to\u00a0the\u00a0customer\u00a0to\u00a0indicate\u00a0it\u00a0is\u00a0unknown.\nclass\u00a0Customer\u2026\nget\u00a0isUnknown()\u00a0{return\u00a0false\u037e}\nI\u00a0then\u00a0add\u00a0an\u00a0Unknown\u00a0Customer\u00a0class.\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nclass\u00a0UnknownCustomer\u00a0{\n\u00a0\u00a0get\u00a0isUnknown()\u00a0{return\u00a0true\u037e}\n}\nwww.EBooksWorld.ir\n", "page": 323, "type": "text", "section": "Page 323"}
{"text": "Note\u00a0that\u00a0I\u00a0don\u2019t\u00a0make\u00a0UnknownCustomer\u00a0a\u00a0subclass\u00a0of\u00a0Customer.\u00a0In\u00a0other\nlanguages,\u00a0particularly\u00a0those\u00a0statically\u00a0typed,\u00a0I\u00a0would,\u00a0but\u00a0JavaScript\u2019s\u00a0rules\u00a0for\nsubclassing,\u00a0as\u00a0well\u00a0as\u00a0its\u00a0dynamic\u00a0typing,\u00a0make\u00a0it\u00a0better\u00a0to\u00a0not\u00a0do\u00a0that\u00a0here.\nNow\u00a0comes\u00a0the\u00a0tricky\u00a0bit.\u00a0I\u00a0have\u00a0to\u00a0return\u00a0this\u00a0new\u00a0special\u00adcase\u00a0object\u00a0whenever\u00a0I\nexpect\u00a0\"unknown\"\u00a0and\u00a0change\u00a0each\u00a0test\u00a0for\u00a0an\u00a0unknown\u00a0value\u00a0to\u00a0use\u00a0the\u00a0new\nisUnknown\u00a0method.\u00a0In\u00a0general,\u00a0I\u00a0always\u00a0want\u00a0to\u00a0arrange\u00a0things\u00a0so\u00a0I\u00a0can\u00a0make\u00a0one\nsmall\u00a0change\u00a0at\u00a0a\u00a0time,\u00a0then\u00a0test.\u00a0But\u00a0if\u00a0I\u00a0change\u00a0the\u00a0customer\u00a0class\u00a0to\u00a0return\u00a0an\nunknown\u00a0customer\u00a0instead\u00a0of\u00a0\u201cunknown\u201d,\u00a0I\u00a0have\u00a0to\u00a0make\u00a0every\u00a0client\u00a0testing\u00a0for\n\u201cunknown\u201d\u00a0to\u00a0call\u00a0isUnknown\u2014and\u00a0I\u00a0have\u00a0to\u00a0do\u00a0it\u00a0all\u00a0at\u00a0once.\u00a0I\u00a0find\u00a0that\u00a0as\u00a0appealing\nas\u00a0eating\u00a0liver\u00a0(i.e.,\u00a0not\u00a0at\u00a0all).\nThere\u00a0is\u00a0a\u00a0common\u00a0technique\u00a0to\u00a0use\u00a0whenever\u00a0I\u00a0find\u00a0myself\u00a0in\u00a0this\u00a0bind.\u00a0I\u00a0use\u00a0Extract\nFunction\u00a0(106)\u00a0on\u00a0the\u00a0code\u00a0that\u00a0I\u2019d\u00a0have\u00a0to\u00a0change\u00a0in\u00a0lots\u00a0of\u00a0places\u2014in\u00a0this\u00a0case,\u00a0the\nspecial\u00adcase\u00a0comparison\u00a0code.\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0isUnknown(arg)\u00a0{\n\u00a0\u00a0if\u00a0(!((arg\u00a0instanceof\u00a0Customer)\u00a0||\u00a0(arg\u00a0===\u00a0\"unknown\")))\n\u00a0\u00a0\u00a0\u00a0throw\u00a0new\u00a0Error(`investigate\u00a0bad\u00a0value:\u00a0<${arg}>`)\u037e\n\u00a0\u00a0return\u00a0(arg\u00a0===\u00a0\"unknown\")\u037e\n}\nI\u2019ve\u00a0put\u00a0a\u00a0trap\u00a0in\u00a0here\u00a0for\u00a0an\u00a0unexpected\u00a0value.\u00a0This\u00a0can\u00a0help\u00a0me\u00a0to\u00a0spot\u00a0any\u00a0mistakes\u00a0or\nodd\u00a0behavior\u00a0as\u00a0I\u2019m\u00a0doing\u00a0this\u00a0refactoring.\nI\u00a0can\u00a0now\u00a0use\u00a0this\u00a0function\u00a0whenever\u00a0I\u2019m\u00a0testing\u00a0for\u00a0an\u00a0unknown\u00a0customer.\u00a0I\u00a0can\nchange\u00a0these\u00a0calls\u00a0one\u00a0at\u00a0a\u00a0time,\u00a0testing\u00a0after\u00a0each\u00a0change.\nclient\u00a01\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nlet\u00a0customerName\u037e\nif\u00a0(isUnknown(aCustomer))\u00a0customerName\u00a0=\u00a0\"occupant\"\u037e\nelse\u00a0customerName\u00a0=\u00a0aCustomer.name\u037e\nAfter\u00a0a\u00a0while,\u00a0I\u00a0have\u00a0done\u00a0them\u00a0all.\nclient\u00a02\u2026\nwww.EBooksWorld.ir\n", "page": 324, "type": "text", "section": "Page 324"}
{"text": "Click\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nconst\u00a0plan\u00a0=\u00a0(isUnknown(aCustomer))\u00a0?\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0registry.billingPlans.basic\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0:\u00a0aCustomer.billingPlan\u037e\nclient\u00a03\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nif\u00a0(!isUnknown(aCustomer))\u00a0aCustomer.billingPlan\u00a0=\u00a0newPlan\u037e\nclient\u00a04\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nconst\u00a0weeksDelinquent\u00a0=\u00a0isUnknown(aCustomer)\u00a0?\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a00\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0:\u00a0aCustomer.paymentHistory.weeksDelinquentInLastYear\u037e\nOnce\u00a0I\u2019ve\u00a0changed\u00a0all\u00a0the\u00a0callers\u00a0to\u00a0use\u00a0isUnknown,\u00a0I\u00a0can\u00a0change\u00a0the\u00a0site\u00a0class\u00a0to\u00a0return\nan\u00a0unknown\u00a0customer.\nclass\u00a0Site\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nget\u00a0customer()\u00a0{\n\u00a0\u00a0return\u00a0(this._customer\u00a0===\u00a0\"unknown\")\u00a0?\u00a0new\u00a0UnknownCustomer()\u00a0:\u00a0this._customer\n}\nI\u00a0can\u00a0check\u00a0that\u00a0I\u2019m\u00a0no\u00a0longer\u00a0using\u00a0the\u00a0\u201cunknown\u201d\u00a0string\u00a0by\u00a0changing\u00a0isUnknown\u00a0to\nuse\u00a0the\u00a0unknown\u00a0value.\nclient\u00a01\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0isUnknown(arg)\u00a0{\n\u00a0\u00a0if\u00a0(!(arg\u00a0instanceof\u00a0Customer\u00a0||\u00a0arg\u00a0instanceof\u00a0UnknownCustomer))\n\u00a0\u00a0\u00a0\u00a0throw\u00a0new\u00a0Error(`investigate\u00a0bad\u00a0value:\u00a0<${arg}>`)\u037e\nwww.EBooksWorld.ir\n", "page": 325, "type": "text", "section": "Page 325"}
{"text": "\u00a0\u00a0return\u00a0arg.isUnknown\u037e\n}\nI\u00a0test\u00a0to\u00a0ensure\u00a0that\u2019s\u00a0all\u00a0working.\nNow\u00a0the\u00a0fun\u00a0begins.\u00a0I\u00a0can\u00a0use\u00a0Combine\u00a0Functions\u00a0into\u00a0Class\u00a0(144)\u00a0to\u00a0take\u00a0each\u00a0client\u2019s\nspecial\u00adcase\u00a0check\u00a0and\u00a0see\u00a0if\u00a0I\u00a0can\u00a0replace\u00a0it\u00a0with\u00a0a\u00a0commonly\u00a0expected\u00a0value.\u00a0At\u00a0the\nmoment,\u00a0I\u00a0have\u00a0various\u00a0clients\u00a0using\u00a0\u201coccupant\u201d\u00a0for\u00a0the\u00a0name\u00a0of\u00a0an\u00a0unknown\u00a0customer,\nlike\u00a0this:\nclient\u00a01\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nlet\u00a0customerName\u037e\nif\u00a0(isUnknown(aCustomer))\u00a0customerName\u00a0=\u00a0\"occupant\"\u037e\nelse\u00a0customerName\u00a0=\u00a0aCustomer.name\u037e\nI\u00a0add\u00a0a\u00a0suitable\u00a0method\u00a0to\u00a0the\u00a0unknown\u00a0customer:\nclass\u00a0UnknownCustomer\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nget\u00a0name()\u00a0{return\u00a0\"occupant\"\u037e}\nNow\u00a0I\u00a0can\u00a0make\u00a0all\u00a0that\u00a0conditional\u00a0code\u00a0go\u00a0away.\nclient\u00a01\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nconst\u00a0customerName\u00a0=\u00a0aCustomer.name\u037e\nOnce\u00a0I\u2019ve\u00a0tested\u00a0that\u00a0this\u00a0works,\u00a0I\u2019ll\u00a0probably\u00a0be\u00a0able\u00a0to\u00a0use\u00a0Inline\u00a0Variable\u00a0(123)\u00a0on\nthat\u00a0variable\u00a0too.\nNext\u00a0is\u00a0the\u00a0billing\u00a0plan\u00a0property.\nclient\u00a02\u2026\nwww.EBooksWorld.ir\n", "page": 326, "type": "text", "section": "Page 326"}
{"text": "Click\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nconst\u00a0plan\u00a0=\u00a0(isUnknown(aCustomer))\u00a0?\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0registry.billingPlans.basic\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0:\u00a0aCustomer.billingPlan\u037e\nclient\u00a03\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nif\u00a0(!isUnknown(aCustomer))\u00a0aCustomer.billingPlan\u00a0=\u00a0newPlan\u037e\nFor\u00a0read\u00a0behavior,\u00a0I\u00a0do\u00a0the\u00a0same\u00a0thing\u00a0I\u00a0did\u00a0with\u00a0the\u00a0name\u2014take\u00a0the\u00a0common\u00a0response\nand\u00a0reply\u00a0with\u00a0it.\u00a0With\u00a0the\u00a0write\u00a0behavior,\u00a0the\u00a0current\u00a0code\u00a0doesn\u2019t\u00a0call\u00a0the\u00a0setter\u00a0for\u00a0an\nunknown\u00a0customer\u2014so\u00a0for\u00a0the\u00a0special\u00a0case,\u00a0I\u00a0let\u00a0the\u00a0setter\u00a0be\u00a0called,\u00a0but\u00a0it\u00a0does\nnothing.\nclass\u00a0UnknownCustomer\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nget\u00a0billingPlan()\u00a0\u00a0\u00a0\u00a0{return\u00a0registry.billingPlans.basic\u037e}\nset\u00a0billingPlan(arg)\u00a0{\u00a0/*\u00a0ignore\u00a0*/\u00a0}\nclient\u00a0reader\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nconst\u00a0plan\u00a0=\u00a0aCustomer.billingPlan\u037e\nclient\u00a0writer\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\naCustomer.billingPlan\u00a0=\u00a0newPlan\u037e\nSpecial\u00adcase\u00a0objects\u00a0are\u00a0value\u00a0objects,\u00a0and\u00a0thus\u00a0should\u00a0always\u00a0be\u00a0immutable,\u00a0even\u00a0if\u00a0the\nobjects\u00a0they\u00a0are\u00a0substituting\u00a0for\u00a0are\u00a0not.\nThe\u00a0last\u00a0case\u00a0is\u00a0a\u00a0bit\u00a0more\u00a0involved\u00a0because\u00a0the\u00a0special\u00a0case\u00a0needs\u00a0to\u00a0return\u00a0another\nwww.EBooksWorld.ir\n", "page": 327, "type": "text", "section": "Page 327"}
{"text": "object\u00a0that\u00a0has\u00a0its\u00a0own\u00a0properties.\nclient\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nconst\u00a0weeksDelinquent\u00a0=\u00a0isUnknown(aCustomer)\u00a0?\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a00\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0:\u00a0aCustomer.paymentHistory.weeksDelinquentInLastYear\u037e\nThe\u00a0general\u00a0rule\u00a0with\u00a0a\u00a0special\u00adcase\u00a0object\u00a0is\u00a0that\u00a0if\u00a0it\u00a0needs\u00a0to\u00a0return\u00a0related\u00a0objects,\nthey\u00a0are\u00a0usually\u00a0special\u00a0cases\u00a0themselves.\u00a0So\u00a0here\u00a0I\u00a0need\u00a0to\u00a0create\u00a0a\u00a0null\u00a0payment\nhistory.\nclass\u00a0UnknownCustomer\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nget\u00a0paymentHistory()\u00a0{return\u00a0new\u00a0NullPaymentHistory()\u037e}\nclass\u00a0NullPaymentHistory\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nget\u00a0weeksDelinquentInLastYear()\u00a0{return\u00a00\u037e}\nclient\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nconst\u00a0weeksDelinquent\u00a0=\u00a0aCustomer.paymentHistory.weeksDelinquentInLastYear\u037e\nI\u00a0carry\u00a0on,\u00a0looking\u00a0at\u00a0all\u00a0the\u00a0clients\u00a0to\u00a0see\u00a0if\u00a0I\u00a0can\u00a0replace\u00a0them\u00a0with\u00a0the\u00a0polymorphic\nbehavior.\u00a0But\u00a0there\u00a0will\u00a0be\u00a0exceptions\u2014clients\u00a0that\u00a0want\u00a0to\u00a0do\u00a0something\u00a0different\u00a0with\nthe\u00a0special\u00a0case.\u00a0I\u00a0may\u00a0have\u00a023\u00a0clients\u00a0that\u00a0use\u00a0\u201coccupant\u201d\u00a0for\u00a0the\u00a0name\u00a0of\u00a0an\u00a0unknown\ncustomer,\u00a0but\u00a0there\u2019s\u00a0always\u00a0one\u00a0that\u00a0needs\u00a0something\u00a0different.\nclient\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nwww.EBooksWorld.ir\n", "page": 328, "type": "text", "section": "Page 328"}
{"text": "const\u00a0name\u00a0=\u00a0!\u00a0isUnknown(aCustomer)\u00a0?\u00a0aCustomer.name\u00a0:\u00a0\"unknown\u00a0occupant\"\u037e\nIn\u00a0that\u00a0case,\u00a0I\u00a0need\u00a0to\u00a0retain\u00a0a\u00a0special\u00adcase\u00a0check.\u00a0I\u00a0will\u00a0change\u00a0it\u00a0to\u00a0use\u00a0the\u00a0method\u00a0on\ncustomer,\u00a0essentially\u00a0using\u00a0Inline\u00a0Function\u00a0(115)\u00a0on\u00a0isUnknown.\nclient\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nconst\u00a0name\u00a0=\u00a0aCustomer.isUnknown\u00a0?\u00a0\"unknown\u00a0occupant\"\u00a0:\u00a0aCustomer.name\u037e\nWhen\u00a0I\u2019m\u00a0done\u00a0with\u00a0all\u00a0the\u00a0clients,\u00a0I\u00a0should\u00a0be\u00a0able\u00a0to\u00a0use\u00a0Remove\u00a0Dead\u00a0Code\u00a0(237)\u00a0on\nthe\u00a0global\u00a0isPresent\u00a0function,\u00a0as\u00a0nobody\u00a0should\u00a0be\u00a0calling\u00a0it\u00a0any\u00a0more.\nExample: Using an Object Literal\nCreating\u00a0a\u00a0class\u00a0like\u00a0this\u00a0is\u00a0a\u00a0fair\u00a0bit\u00a0of\u00a0work\u00a0for\u00a0what\u00a0is\u00a0really\u00a0a\u00a0simple\u00a0value.\u00a0But\u00a0for\u00a0the\nexample\u00a0I\u00a0gave,\u00a0I\u00a0had\u00a0to\u00a0make\u00a0the\u00a0class\u00a0since\u00a0the\u00a0customer\u00a0could\u00a0be\u00a0updated.\u00a0If,\nhowever,\u00a0I\u00a0only\u00a0read\u00a0the\u00a0data\u00a0structure,\u00a0I\u00a0can\u00a0use\u00a0a\u00a0literal\u00a0object\u00a0instead.\nHere\u00a0is\u00a0the\u00a0opening\u00a0case\u00a0again\u2014just\u00a0the\u00a0same,\u00a0except\u00a0this\u00a0time\u00a0there\u00a0is\u00a0no\u00a0client\u00a0that\nupdates\u00a0the\u00a0customer:\nclass\u00a0Site\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nget\u00a0customer()\u00a0{return\u00a0this._customer\u037e}\nclass\u00a0Customer\u2026\nget\u00a0name()\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0{...}\nget\u00a0billingPlan()\u00a0\u00a0\u00a0\u00a0{...}\nset\u00a0billingPlan(arg)\u00a0{...}\nget\u00a0paymentHistory()\u00a0{...}\nclient\u00a01\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nwww.EBooksWorld.ir\n", "page": 329, "type": "text", "section": "Page 329"}
{"text": "const\u00a0aCustomer\u00a0=\u00a0site.customer\u037e\n//\u00a0...\u00a0lots\u00a0of\u00a0intervening\u00a0code\u00a0...\nlet\u00a0customerName\u037e\nif\u00a0(aCustomer\u00a0===\u00a0\"unknown\")\u00a0customerName\u00a0=\u00a0\"occupant\"\u037e\nelse\u00a0customerName\u00a0=\u00a0aCustomer.name\u037e\nclient\u00a02\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nconst\u00a0plan\u00a0=\u00a0(aCustomer\u00a0===\u00a0\"unknown\")\u00a0?\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0registry.billingPlans.basic\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0:\u00a0aCustomer.billingPlan\u037e\nclient\u00a03\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nconst\u00a0weeksDelinquent\u00a0=\u00a0(aCustomer\u00a0===\u00a0\"unknown\")\u00a0?\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a00\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0:\u00a0aCustomer.paymentHistory.weeksDelinquentInLastYear\u037e\nAs\u00a0with\u00a0the\u00a0previous\u00a0case,\u00a0I\u00a0start\u00a0by\u00a0adding\u00a0an\u00a0isUnknown\u00a0property\u00a0to\u00a0the\u00a0customer\nand\u00a0creating\u00a0a\u00a0special\u00adcase\u00a0object\u00a0with\u00a0that\u00a0field.\u00a0The\u00a0difference\u00a0is\u00a0that\u00a0this\u00a0time,\u00a0the\nspecial\u00a0case\u00a0is\u00a0a\u00a0literal.\nclass\u00a0Customer\u2026\nget\u00a0isUnknown()\u00a0{return\u00a0false\u037e}\ntop\u00a0level\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0createUnknownCustomer()\u00a0{\n\u00a0\u00a0return\u00a0{\n\u00a0\u00a0\u00a0\u00a0isUnknown:\u00a0true,\n\u00a0\u00a0}\u037e\n}\nI\u00a0apply\u00a0Extract\u00a0Function\u00a0(106)\u00a0to\u00a0the\u00a0special\u00a0case\u00a0condition\u00a0test.\nwww.EBooksWorld.ir\n", "page": 330, "type": "text", "section": "Page 330"}
{"text": "Click\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0isUnknown(arg)\u00a0{\n\u00a0\u00a0return\u00a0(arg\u00a0===\u00a0\"unknown\")\u037e\n}\nclient\u00a01\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nlet\u00a0customerName\u037e\nif\u00a0(isUnknown(aCustomer))\u00a0customerName\u00a0=\u00a0\"occupant\"\u037e\nelse\u00a0customerName\u00a0=\u00a0aCustomer.name\u037e\nclient\u00a02\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nconst\u00a0plan\u00a0=\u00a0isUnknown(aCustomer)\u00a0?\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0registry.billingPlans.basic\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0:\u00a0aCustomer.billingPlan\u037e\nclient\u00a03\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nconst\u00a0weeksDelinquent\u00a0=\u00a0isUnknown(aCustomer)\u00a0?\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a00\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0:\u00a0aCustomer.paymentHistory.weeksDelinquentInLastYear\u037e\nI\u00a0change\u00a0the\u00a0site\u00a0class\u00a0and\u00a0the\u00a0condition\u00a0test\u00a0to\u00a0work\u00a0with\u00a0the\u00a0special\u00a0case.\nclass\u00a0Site\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nget\u00a0customer()\u00a0{\n\u00a0\u00a0return\u00a0(this._customer\u00a0===\u00a0\"unknown\")\u00a0?\u00a0createUnknownCustomer()\u00a0:\u00a0this._custom\n}\ntop\u00a0level\u2026\nwww.EBooksWorld.ir\n", "page": 331, "type": "text", "section": "Page 331"}
{"text": "Click\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0isUnknown(arg)\u00a0{\n\u00a0\u00a0return\u00a0arg.isUnknown\u037e\n}\nThen\u00a0I\u00a0replace\u00a0each\u00a0standard\u00a0response\u00a0with\u00a0the\u00a0appropriate\u00a0literal\u00a0value.\u00a0I\u00a0start\u00a0with\nthe\u00a0name:\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0createUnknownCustomer()\u00a0{\n\u00a0\u00a0return\u00a0{\n\u00a0\u00a0\u00a0\u00a0isUnknown:\u00a0true,\n\u00a0\u00a0\u00a0\u00a0name:\u00a0\"occupant\",\n\u00a0\u00a0}\u037e\n}\nclient\u00a01\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nconst\u00a0customerName\u00a0=\u00a0aCustomer.name\u037e\nThen,\u00a0the\u00a0billing\u00a0plan:\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0createUnknownCustomer()\u00a0{\n\u00a0\u00a0return\u00a0{\n\u00a0\u00a0\u00a0\u00a0isUnknown:\u00a0true,\n\u00a0\u00a0\u00a0\u00a0name:\u00a0\"occupant\",\n\u00a0\u00a0\u00a0\u00a0billingPlan:\u00a0registry.billingPlans.basic,\n\u00a0\u00a0}\u037e\n}\nclient\u00a02\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nconst\u00a0plan\u00a0=\u00a0aCustomer.billingPlan\u037e\nwww.EBooksWorld.ir\n", "page": 332, "type": "text", "section": "Page 332"}
{"text": "Similarly,\u00a0I\u00a0can\u00a0create\u00a0a\u00a0nested\u00a0null\u00a0payment\u00a0history\u00a0with\u00a0the\u00a0literal:\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0createUnknownCustomer()\u00a0{\n\u00a0\u00a0return\u00a0{\n\u00a0\u00a0\u00a0\u00a0isUnknown:\u00a0true,\n\u00a0\u00a0\u00a0\u00a0name:\u00a0\"occupant\",\n\u00a0\u00a0\u00a0\u00a0billingPlan:\u00a0registry.billingPlans.basic,\n\u00a0\u00a0\u00a0\u00a0paymentHistory:\u00a0{\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0weeksDelinquentInLastYear:\u00a00,\n\u00a0\u00a0\u00a0\u00a0},\n\u00a0\u00a0}\u037e\n}\nclient\u00a03\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nconst\u00a0weeksDelinquent\u00a0=\u00a0aCustomer.paymentHistory.weeksDelinquentInLastYear\u037e\nIf\u00a0I\u00a0use\u00a0a\u00a0literal\u00a0like\u00a0this,\u00a0I\u00a0should\u00a0make\u00a0it\u00a0immutable,\u00a0which\u00a0I\u00a0might\u00a0do\u00a0with\u00a0freeze.\nUsually,\u00a0I\u2019d\u00a0rather\u00a0use\u00a0a\u00a0class.\nExample: Using a Transform\nBoth\u00a0previous\u00a0cases\u00a0involve\u00a0a\u00a0class,\u00a0but\u00a0the\u00a0same\u00a0idea\u00a0can\u00a0be\u00a0applied\u00a0to\u00a0a\u00a0record\u00a0by\nusing\u00a0a\u00a0transform\u00a0step.\nLet\u2019s\u00a0assume\u00a0our\u00a0input\u00a0is\u00a0a\u00a0simple\u00a0record\u00a0structure\u00a0that\u00a0looks\u00a0something\u00a0like\u00a0this:\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\n{\n\u00a0\u00a0name:\u00a0\"Acme\u00a0Boston\",\n\u00a0\u00a0location:\u00a0\"Malden\u00a0MA\",\n\u00a0\u00a0//\u00a0more\u00a0site\u00a0details\n\u00a0\u00a0customer:\u00a0{\n\u00a0\u00a0\u00a0\u00a0name:\u00a0\"Acme\u00a0Industries\",\n\u00a0\u00a0\u00a0\u00a0billingPlan:\u00a0\"plan\u00ad451\",\n\u00a0\u00a0\u00a0\u00a0paymentHistory:\u00a0{\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0weeksDelinquentInLastYear:\u00a07\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0//more\n\u00a0\u00a0\u00a0\u00a0},\n\u00a0\u00a0\u00a0\u00a0//\u00a0more\nwww.EBooksWorld.ir\n", "page": 333, "type": "text", "section": "Page 333"}
{"text": "\u00a0\u00a0}\n}\nIn\u00a0some\u00a0cases,\u00a0the\u00a0customer\u00a0isn\u2019t\u00a0known,\u00a0and\u00a0such\u00a0cases\u00a0are\u00a0marked\u00a0in\u00a0the\u00a0same\u00a0way:\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\n{\n\u00a0\u00a0name:\u00a0\"Warehouse\u00a0Unit\u00a015\",\n\u00a0\u00a0location:\u00a0\"Malden\u00a0MA\",\n\u00a0\u00a0//\u00a0more\u00a0site\u00a0details\n\u00a0\u00a0customer:\u00a0\"unknown\",\n}\nI\u00a0have\u00a0similar\u00a0client\u00a0code\u00a0that\u00a0checks\u00a0for\u00a0the\u00a0unknown\u00a0customer:\nclient\u00a01\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nconst\u00a0site\u00a0=\u00a0acquireSiteData()\u037e\nconst\u00a0aCustomer\u00a0=\u00a0site.customer\u037e\n//\u00a0...\u00a0lots\u00a0of\u00a0intervening\u00a0code\u00a0...\nlet\u00a0customerName\u037e\nif\u00a0(aCustomer\u00a0===\u00a0\"unknown\")\u00a0customerName\u00a0=\u00a0\"occupant\"\u037e\nelse\u00a0customerName\u00a0=\u00a0aCustomer.name\u037e\nclient\u00a02\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nconst\u00a0plan\u00a0=\u00a0(aCustomer\u00a0===\u00a0\"unknown\")\u00a0?\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0registry.billingPlans.basic\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0:\u00a0aCustomer.billingPlan\u037e\nclient\u00a03\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nconst\u00a0weeksDelinquent\u00a0=\u00a0(aCustomer\u00a0===\u00a0\"unknown\")\u00a0?\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a00\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0:\u00a0aCustomer.paymentHistory.weeksDelinquentInLastYear\u037e\nwww.EBooksWorld.ir\n", "page": 334, "type": "text", "section": "Page 334"}
{"text": "My\u00a0first\u00a0step\u00a0is\u00a0to\u00a0run\u00a0the\u00a0site\u00a0data\u00a0structure\u00a0through\u00a0a\u00a0transform\u00a0that,\u00a0currently,\u00a0does\nnothing\u00a0but\u00a0a\u00a0deep\u00a0copy.\nclient\u00a01\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\n\u00a0\u00a0const\u00a0rawSite\u00a0=\u00a0acquireSiteData()\u037e\n\u00a0\u00a0const\u00a0site\u00a0=\u00a0enrichSite(rawSite)\u037e\n\u00a0\u00a0const\u00a0aCustomer\u00a0=\u00a0site.customer\u037e\n\u00a0\u00a0//\u00a0...\u00a0lots\u00a0of\u00a0intervening\u00a0code\u00a0...\n\u00a0\u00a0let\u00a0customerName\u037e\n\u00a0\u00a0if\u00a0(aCustomer\u00a0===\u00a0\"unknown\")\u00a0customerName\u00a0=\u00a0\"occupant\"\u037e\n\u00a0\u00a0else\u00a0customerName\u00a0=\u00a0aCustomer.name\u037e\nfunction\u00a0enrichSite(inputSite)\u00a0{\n\u00a0\u00a0return\u00a0_.cloneDeep(inputSite)\u037e\n}\nI\u00a0apply\u00a0Extract\u00a0Function\u00a0(106)\u00a0to\u00a0the\u00a0test\u00a0for\u00a0an\u00a0unknown\u00a0customer.\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0isUnknown(aCustomer)\u00a0{\n\u00a0\u00a0return\u00a0aCustomer\u00a0===\u00a0\"unknown\"\u037e\n}\nclient\u00a01\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nconst\u00a0rawSite\u00a0=\u00a0acquireSiteData()\u037e\nconst\u00a0site\u00a0=\u00a0enrichSite(rawSite)\u037e\nconst\u00a0aCustomer\u00a0=\u00a0site.customer\u037e\n//\u00a0...\u00a0lots\u00a0of\u00a0intervening\u00a0code\u00a0...\nlet\u00a0customerName\u037e\nif\u00a0(isUnknown(aCustomer))\u00a0customerName\u00a0=\u00a0\"occupant\"\u037e\nelse\u00a0customerName\u00a0=\u00a0aCustomer.name\u037e\nclient\u00a02\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nconst\u00a0plan\u00a0=\u00a0(isUnknown(aCustomer))\u00a0?\nwww.EBooksWorld.ir\n", "page": 335, "type": "text", "section": "Page 335"}
{"text": "\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0registry.billingPlans.basic\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0:\u00a0aCustomer.billingPlan\u037e\nclient\u00a03\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nconst\u00a0weeksDelinquent\u00a0=\u00a0(isUnknown(aCustomer))\u00a0?\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a00\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0:\u00a0aCustomer.paymentHistory.weeksDelinquentInLastYear\u037e\nI\u00a0begin\u00a0the\u00a0enrichment\u00a0by\u00a0adding\u00a0an\u00a0isUnknown\u00a0property\u00a0to\u00a0the\u00a0customer.\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0enrichSite(aSite)\u00a0{\n\u00a0\u00a0const\u00a0result\u00a0=\u00a0_.cloneDeep(aSite)\u037e\n\u00a0\u00a0const\u00a0unknownCustomer\u00a0=\u00a0{\n\u00a0\u00a0\u00a0\u00a0isUnknown:\u00a0true,\n\u00a0\u00a0}\u037e\n\u00a0\u00a0if\u00a0(isUnknown(result.customer))\u00a0result.customer\u00a0=\u00a0unknownCustomer\u037e\n\u00a0\u00a0else\u00a0result.customer.isUnknown\u00a0=\u00a0false\u037e\n\u00a0\u00a0return\u00a0result\u037e\n}\nI\u00a0can\u00a0then\u00a0modify\u00a0the\u00a0special\u00adcase\u00a0condition\u00a0test\u00a0to\u00a0include\u00a0probing\u00a0for\u00a0this\u00a0new\nproperty.\u00a0I\u00a0keep\u00a0the\u00a0original\u00a0test\u00a0as\u00a0well,\u00a0so\u00a0that\u00a0the\u00a0test\u00a0will\u00a0work\u00a0on\u00a0both\u00a0raw\u00a0and\nenriched\u00a0sites.\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0isUnknown(aCustomer)\u00a0{\n\u00a0\u00a0if\u00a0(aCustomer\u00a0===\u00a0\"unknown\")\u00a0return\u00a0true\u037e\n\u00a0\u00a0else\u00a0return\u00a0aCustomer.isUnknown\u037e\n}\nI\u00a0test\u00a0to\u00a0ensure\u00a0that\u2019s\u00a0all\u00a0OK,\u00a0then\u00a0start\u00a0applying\u00a0Combine\u00a0Functions\u00a0into\u00a0Transform\n(149)\u00a0on\u00a0the\u00a0special\u00a0case.\u00a0First,\u00a0I\u00a0move\u00a0the\u00a0choice\u00a0of\u00a0name\u00a0into\u00a0the\u00a0enrichment\u00a0function.\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0enrichSite(aSite)\u00a0{\nwww.EBooksWorld.ir\n", "page": 336, "type": "text", "section": "Page 336"}
{"text": "\u00a0\u00a0const\u00a0result\u00a0=\u00a0_.cloneDeep(aSite)\u037e\n\u00a0\u00a0const\u00a0unknownCustomer\u00a0=\u00a0{\n\u00a0\u00a0\u00a0\u00a0isUnknown:\u00a0true,\n\u00a0\u00a0\u00a0\u00a0name:\u00a0\"occupant\",\n\u00a0\u00a0}\u037e\n\u00a0\u00a0if\u00a0(isUnknown(result.customer))\u00a0result.customer\u00a0=\u00a0unknownCustomer\u037e\n\u00a0\u00a0else\u00a0result.customer.isUnknown\u00a0=\u00a0false\u037e\n\u00a0\u00a0return\u00a0result\u037e\n}\nclient\u00a01\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nconst\u00a0rawSite\u00a0=\u00a0acquireSiteData()\u037e\nconst\u00a0site\u00a0=\u00a0enrichSite(rawSite)\u037e\nconst\u00a0aCustomer\u00a0=\u00a0site.customer\u037e\n//\u00a0...\u00a0lots\u00a0of\u00a0intervening\u00a0code\u00a0...\nconst\u00a0customerName\u00a0=\u00a0aCustomer.name\u037e\nI\u00a0test,\u00a0then\u00a0do\u00a0the\u00a0billing\u00a0plan.\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0enrichSite(aSite)\u00a0{\n\u00a0\u00a0const\u00a0result\u00a0=\u00a0_.cloneDeep(aSite)\u037e\n\u00a0\u00a0const\u00a0unknownCustomer\u00a0=\u00a0{\n\u00a0\u00a0\u00a0\u00a0isUnknown:\u00a0true,\n\u00a0\u00a0\u00a0\u00a0name:\u00a0\"occupant\",\n\u00a0\u00a0\u00a0\u00a0billingPlan:\u00a0registry.billingPlans.basic,\n\u00a0\u00a0}\u037e\n\u00a0\u00a0if\u00a0(isUnknown(result.customer))\u00a0result.customer\u00a0=\u00a0unknownCustomer\u037e\n\u00a0\u00a0else\u00a0result.customer.isUnknown\u00a0=\u00a0false\u037e\n\u00a0\u00a0return\u00a0result\u037e\n}\nclient\u00a02\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nconst\u00a0plan\u00a0=\u00a0aCustomer.billingPlan\u037e\nI\u00a0test\u00a0again,\u00a0then\u00a0do\u00a0the\u00a0last\u00a0client.\nwww.EBooksWorld.ir\n", "page": 337, "type": "text", "section": "Page 337"}
{"text": "Click\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0enrichSite(aSite)\u00a0{\n\u00a0\u00a0const\u00a0result\u00a0=\u00a0_.cloneDeep(aSite)\u037e\n\u00a0\u00a0const\u00a0unknownCustomer\u00a0=\u00a0{\n\u00a0\u00a0\u00a0\u00a0isUnknown:\u00a0true,\n\u00a0\u00a0\u00a0\u00a0name:\u00a0\"occupant\",\n\u00a0\u00a0\u00a0\u00a0billingPlan:\u00a0registry.billingPlans.basic,\n\u00a0\u00a0\u00a0\u00a0paymentHistory:\u00a0{\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0weeksDelinquentInLastYear:\u00a00,\n\u00a0\u00a0\u00a0\u00a0}\n\u00a0\u00a0}\u037e\n\u00a0\u00a0if\u00a0(isUnknown(result.customer))\u00a0result.customer\u00a0=\u00a0unknownCustomer\u037e\n\u00a0\u00a0else\u00a0result.customer.isUnknown\u00a0=\u00a0false\u037e\n\u00a0\u00a0return\u00a0result\u037e\n}\nclient\u00a03\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nconst\u00a0weeksDelinquent\u00a0=\u00a0aCustomer.paymentHistory.weeksDelinquentInLastYear\u037e\nINTRODUCE ASSERTION\nMotivation\nOften,\u00a0sections\u00a0of\u00a0code\u00a0work\u00a0only\u00a0if\u00a0certain\u00a0conditions\u00a0are\u00a0true.\u00a0This\u00a0may\u00a0be\u00a0as\u00a0simple\nas\u00a0a\u00a0square\u00a0root\u00a0calculation\u00a0only\u00a0working\u00a0on\u00a0a\u00a0positive\u00a0input\u00a0value.\u00a0With\u00a0an\u00a0object,\u00a0it\nwww.EBooksWorld.ir\n", "page": 338, "type": "text", "section": "Page 338"}
{"text": "may\u00a0require\u00a0that\u00a0at\u00a0least\u00a0one\u00a0of\u00a0a\u00a0group\u00a0of\u00a0fields\u00a0has\u00a0a\u00a0value\u00a0in\u00a0it.\nSuch\u00a0assumptions\u00a0are\u00a0often\u00a0not\u00a0stated\u00a0but\u00a0can\u00a0only\u00a0be\u00a0deduced\u00a0by\u00a0looking\u00a0through\u00a0an\nalgorithm.\u00a0Sometimes,\u00a0the\u00a0assumptions\u00a0are\u00a0stated\u00a0with\u00a0a\u00a0comment.\u00a0A\u00a0better\u00a0technique\nis\u00a0to\u00a0make\u00a0the\u00a0assumption\u00a0explicit\u00a0by\u00a0writing\u00a0an\u00a0assertion.\nAn\u00a0assertion\u00a0is\u00a0a\u00a0conditional\u00a0statement\u00a0that\u00a0is\u00a0assumed\u00a0to\u00a0be\u00a0always\u00a0true.\u00a0Failure\u00a0of\u00a0an\nassertion\u00a0indicates\u00a0a\u00a0programmer\u00a0error.\u00a0Assertion\u00a0failures\u00a0should\u00a0never\u00a0be\u00a0checked\u00a0by\nother\u00a0parts\u00a0of\u00a0the\u00a0system.\u00a0Assertions\u00a0should\u00a0be\u00a0written\u00a0so\u00a0that\u00a0the\u00a0program\u00a0functions\nequally\u00a0correctly\u00a0if\u00a0they\u00a0are\u00a0all\u00a0removed\u037e\u00a0indeed,\u00a0some\u00a0languages\u00a0provide\u00a0assertions\nthat\u00a0can\u00a0be\u00a0disabled\u00a0by\u00a0a\u00a0compile\u00adtime\u00a0switch.\nI\u00a0often\u00a0see\u00a0people\u00a0encourage\u00a0using\u00a0assertions\u00a0in\u00a0order\u00a0to\u00a0find\u00a0errors.\u00a0While\u00a0this\u00a0is\ncertainly\u00a0a\u00a0Good\u00a0Thing,\u00a0it\u2019s\u00a0not\u00a0the\u00a0only\u00a0reason\u00a0to\u00a0use\u00a0them.\u00a0I\u00a0find\u00a0assertions\u00a0to\u00a0be\u00a0a\nvaluable\u00a0form\u00a0of\u00a0communication\u2014they\u00a0tell\u00a0the\u00a0reader\u00a0something\u00a0about\u00a0the\u00a0assumed\nstate\u00a0of\u00a0the\u00a0program\u00a0at\u00a0this\u00a0point\u00a0of\u00a0execution.\u00a0I\u00a0also\u00a0find\u00a0them\u00a0handy\u00a0for\u00a0debugging,\nand\u00a0their\u00a0communication\u00a0value\u00a0means\u00a0I\u2019m\u00a0inclined\u00a0to\u00a0leave\u00a0them\u00a0in\u00a0once\u00a0I\u2019ve\u00a0fixed\u00a0the\nerror\u00a0I\u2019m\u00a0chasing.\u00a0Self\u00adtesting\u00a0code\u00a0reduces\u00a0their\u00a0value\u00a0for\u00a0debugging,\u00a0as\u00a0steadily\nnarrowing\u00a0unit\u00a0tests\u00a0often\u00a0do\u00a0the\u00a0job\u00a0better,\u00a0but\u00a0I\u00a0still\u00a0like\u00a0assertions\u00a0for\ncommunication.\nMechanics\nWhen\u00a0you\u00a0see\u00a0that\u00a0a\u00a0condition\u00a0is\u00a0assumed\u00a0to\u00a0be\u00a0true,\u00a0add\u00a0an\u00a0assertion\u00a0to\u00a0state\u00a0it.\nSince\u00a0assertions\u00a0should\u00a0not\u00a0affect\u00a0the\u00a0running\u00a0of\u00a0a\u00a0system,\u00a0adding\u00a0one\u00a0is\u00a0always\nbehavior\u00adpreserving.\nExample\nHere\u2019s\u00a0a\u00a0simple\u00a0tale\u00a0of\u00a0discounts.\u00a0A\u00a0customer\u00a0can\u00a0be\u00a0given\u00a0a\u00a0discount\u00a0rate\u00a0to\u00a0apply\u00a0to\u00a0all\ntheir\u00a0purchases:\nclass\u00a0Customer\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\napplyDiscount(aNumber)\u00a0{\n\u00a0\u00a0return\u00a0(this.discountRate)\n\u00a0\u00a0\u00a0\u00a0?\u00a0aNumber\u00a0\u00ad\u00a0(this.discountRate\u00a0*\u00a0aNumber)\n\u00a0\u00a0\u00a0\u00a0:\u00a0aNumber\u037e\n}\nwww.EBooksWorld.ir\n", "page": 339, "type": "text", "section": "Page 339"}
{"text": "There\u2019s\u00a0an\u00a0assumption\u00a0here\u00a0that\u00a0the\u00a0discount\u00a0rate\u00a0is\u00a0a\u00a0positive\u00a0number.\u00a0I\u00a0can\u00a0make\u00a0that\nassumption\u00a0explicit\u00a0by\u00a0using\u00a0an\u00a0assertion.\u00a0But\u00a0I\u00a0can\u2019t\u00a0easily\u00a0place\u00a0an\u00a0assertion\u00a0into\u00a0a\nternary\u00a0expression,\u00a0so\u00a0first\u00a0I\u2019ll\u00a0reformulate\u00a0it\u00a0as\u00a0an\u00a0if\u00adthen\u00a0statement.\nclass\u00a0Customer\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\napplyDiscount(aNumber)\u00a0{\n\u00a0\u00a0if\u00a0(!this.discountRate)\u00a0return\u00a0aNumber\u037e\n\u00a0\u00a0else\u00a0return\u00a0aNumber\u00a0\u00ad\u00a0(this.discountRate\u00a0*\u00a0aNumber)\u037e\n}\nNow\u00a0I\u00a0can\u00a0easily\u00a0add\u00a0the\u00a0assertion.\nclass\u00a0Customer\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\napplyDiscount(aNumber)\u00a0{\n\u00a0\u00a0if\u00a0(!this.discountRate)\u00a0return\u00a0aNumber\u037e\n\u00a0\u00a0else\u00a0{\n\u00a0\u00a0\u00a0\u00a0assert(this.discountRate\u00a0>=\u00a00)\u037e\n\u00a0\u00a0\u00a0\u00a0return\u00a0aNumber\u00a0\u00ad\u00a0(this.discountRate\u00a0*\u00a0aNumber)\u037e\n\u00a0\u00a0}\n}\nIn\u00a0this\u00a0case,\u00a0I\u2019d\u00a0rather\u00a0put\u00a0this\u00a0assertion\u00a0into\u00a0the\u00a0setting\u00a0method.\u00a0If\u00a0the\u00a0assertion\u00a0fails\u00a0in\napplyDiscount,\u00a0my\u00a0first\u00a0puzzle\u00a0is\u00a0how\u00a0it\u00a0got\u00a0into\u00a0the\u00a0field\u00a0in\u00a0the\u00a0first\u00a0place.\nclass\u00a0Customer\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nset\u00a0discountRate(aNumber)\u00a0{\n\u00a0\u00a0assert(null\u00a0===\u00a0aNumber\u00a0||\u00a0aNumber\u00a0>=\u00a00)\u037e\n\u00a0\u00a0this._discountRate\u00a0=\u00a0aNumber\u037e\n}\nAn\u00a0assertion\u00a0like\u00a0this\u00a0can\u00a0be\u00a0particularly\u00a0valuable\u00a0if\u00a0it\u2019s\u00a0hard\u00a0to\u00a0spot\u00a0the\u00a0error\u00a0source\u2014\nwhich\u00a0may\u00a0be\u00a0an\u00a0errant\u00a0minus\u00a0sign\u00a0in\u00a0some\u00a0input\u00a0data\u00a0or\u00a0some\u00a0inversion\u00a0elsewhere\u00a0in\nthe\u00a0code.\nwww.EBooksWorld.ir\n", "page": 340, "type": "text", "section": "Page 340"}
{"text": "There\u00a0is\u00a0a\u00a0real\u00a0danger\u00a0of\u00a0overusing\u00a0assertions.\u00a0I\u00a0don\u2019t\u00a0use\u00a0assertions\u00a0to\u00a0check\u00a0everything\nthat\u00a0I\u00a0think\u00a0is\u00a0true,\u00a0but\u00a0only\u00a0to\u00a0check\u00a0things\u00a0that\u00a0need\u00a0to\u00a0be\u00a0true.\u00a0Duplication\u00a0is\u00a0a\nparticular\u00a0problem,\u00a0as\u00a0it\u2019s\u00a0common\u00a0to\u00a0tweak\u00a0these\u00a0kinds\u00a0of\u00a0conditions.\u00a0So\u00a0I\u00a0find\u00a0it\u2019s\nessential\u00a0to\u00a0remove\u00a0any\u00a0duplication\u00a0in\u00a0these\u00a0conditions,\u00a0usually\u00a0by\u00a0a\u00a0liberal\u00a0use\u00a0of\nExtract\u00a0Function\u00a0(106).\nI\u00a0only\u00a0use\u00a0assertions\u00a0for\u00a0things\u00a0that\u00a0are\u00a0programmer\u00a0errors.\u00a0If\u00a0I\u2019m\u00a0reading\u00a0data\u00a0from\u00a0an\nexternal\u00a0source,\u00a0any\u00a0value\u00a0checking\u00a0should\u00a0be\u00a0a\u00a0first\u00adclass\u00a0part\u00a0of\u00a0the\u00a0program,\u00a0not\u00a0an\nassertion\u2014unless\u00a0I\u2019m\u00a0really\u00a0confident\u00a0in\u00a0the\u00a0external\u00a0source.\u00a0Assertions\u00a0are\u00a0a\u00a0last\u00a0resort\nto\u00a0help\u00a0track\u00a0bugs\u2014though,\u00a0ironically,\u00a0I\u00a0only\u00a0use\u00a0them\u00a0when\u00a0I\u00a0think\u00a0they\u00a0should\u00a0never\nfail.\nwww.EBooksWorld.ir\n", "page": 341, "type": "text", "section": "Page 341"}
{"text": "Chapter 11\nRefactoring APIs\nModules\u00a0and\u00a0their\u00a0functions\u00a0are\u00a0the\u00a0building\u00a0blocks\u00a0of\u00a0our\u00a0software.\u00a0APIs\u00a0are\u00a0the\u00a0joints\nthat\u00a0we\u00a0use\u00a0to\u00a0plug\u00a0them\u00a0together.\u00a0Making\u00a0these\u00a0APIs\u00a0easy\u00a0to\u00a0understand\u00a0and\u00a0use\u00a0is\nimportant\u00a0but\u00a0also\u00a0difficult:\u00a0I\u00a0need\u00a0to\u00a0refactor\u00a0them\u00a0as\u00a0I\u00a0learn\u00a0how\u00a0to\u00a0improve\u00a0them.\nA\u00a0good\u00a0API\u00a0clearly\u00a0separates\u00a0any\u00a0functions\u00a0that\u00a0update\u00a0data\u00a0from\u00a0those\u00a0that\u00a0only\u00a0read\ndata.\u00a0If\u00a0I\u00a0see\u00a0them\u00a0combined,\u00a0I\u00a0use\u00a0Separate\u00a0Query\u00a0from\u00a0Modifier\u00a0(306)\u00a0to\u00a0tease\u00a0them\napart.\u00a0I\u00a0can\u00a0unify\u00a0functions\u00a0that\u00a0only\u00a0vary\u00a0due\u00a0to\u00a0a\u00a0value\u00a0with\u00a0Parameterize\u00a0Function\n(310).\u00a0Some\u00a0parameters,\u00a0however,\u00a0are\u00a0really\u00a0just\u00a0a\u00a0signal\u00a0of\u00a0an\u00a0entirely\u00a0different\nbehavior\u00a0and\u00a0are\u00a0best\u00a0excised\u00a0with\u00a0Remove\u00a0Flag\u00a0Argument\u00a0(314).\nData\u00a0structures\u00a0are\u00a0often\u00a0unpacked\u00a0unnecessarily\u00a0when\u00a0passed\u00a0between\u00a0functions\u037e\u00a0I\nprefer\u00a0to\u00a0keep\u00a0them\u00a0together\u00a0with\u00a0Preserve\u00a0Whole\u00a0Object\u00a0(319).\u00a0Decisions\u00a0on\u00a0what\nshould\u00a0be\u00a0passed\u00a0as\u00a0a\u00a0parameter,\u00a0and\u00a0what\u00a0can\u00a0be\u00a0resolved\u00a0by\u00a0the\u00a0called\u00a0function,\u00a0are\nones\u00a0I\u00a0often\u00a0need\u00a0to\u00a0revisit\u00a0with\u00a0Replace\u00a0Parameter\u00a0with\u00a0Query\u00a0(324)\u00a0and\u00a0Replace\nQuery\u00a0with\u00a0Parameter\u00a0(327).\nA\u00a0class\u00a0is\u00a0a\u00a0common\u00a0form\u00a0of\u00a0module.\u00a0I\u00a0prefer\u00a0my\u00a0objects\u00a0to\u00a0be\u00a0as\u00a0immutable\u00a0as\u00a0possible,\nso\u00a0I\u00a0use\u00a0Remove\u00a0Setting\u00a0Method\u00a0(331)\u00a0whenever\u00a0I\u00a0can.\u00a0Often,\u00a0when\u00a0a\u00a0caller\u00a0asks\u00a0for\u00a0a\nnew\u00a0object,\u00a0I\u00a0need\u00a0more\u00a0flexibility\u00a0than\u00a0a\u00a0simple\u00a0constructor\u00a0gives,\u00a0which\u00a0I\u00a0can\u00a0get\u00a0by\nusing\u00a0Replace\u00a0Constructor\u00a0with\u00a0Factory\u00a0Function\u00a0(334).\nThe\u00a0last\u00a0two\u00a0refactorings\u00a0address\u00a0the\u00a0difficulty\u00a0of\u00a0breaking\u00a0down\u00a0a\u00a0particularly\u00a0complex\nfunction\u00a0that\u00a0passes\u00a0a\u00a0lot\u00a0of\u00a0data\u00a0around.\u00a0I\u00a0can\u00a0turn\u00a0that\u00a0function\u00a0into\u00a0an\u00a0object\u00a0with\nReplace\u00a0Function\u00a0with\u00a0Command\u00a0(337),\u00a0which\u00a0makes\u00a0it\u00a0easier\u00a0to\u00a0use\u00a0Extract\u00a0Function\n(106)\u00a0on\u00a0the\u00a0function\u2019s\u00a0body.\u00a0If\u00a0I\u00a0later\u00a0simplify\u00a0the\u00a0function\u00a0and\u00a0no\u00a0longer\u00a0need\u00a0it\u00a0as\u00a0a\ncommand\u00a0object,\u00a0I\u00a0turn\u00a0it\u00a0back\u00a0into\u00a0a\u00a0function\u00a0with\u00a0Replace\u00a0Command\u00a0with\u00a0Function\n(344).\nSEPARATE QUERY FROM MODIFIER\nHistory\nTopics\nTutorials\nOffers & Deals\nHighlights\nSettings\nSupport\nSign Out\n \n  \n \n  \n \n \n \n \n \n \n.\nwww.EBooksWorld.ir\n", "page": 342, "type": "text", "section": "Page 342"}
{"text": "Motivation\nWhen\u00a0I\u00a0have\u00a0a\u00a0function\u00a0that\u00a0gives\u00a0me\u00a0a\u00a0value\u00a0and\u00a0has\u00a0no\u00a0observable\u00a0side\u00a0effects,\u00a0I\u00a0have\na\u00a0very\u00a0valuable\u00a0thing.\u00a0I\u00a0can\u00a0call\u00a0this\u00a0function\u00a0as\u00a0often\u00a0as\u00a0I\u00a0like.\u00a0I\u00a0can\u00a0move\u00a0the\u00a0call\u00a0to\nother\u00a0places\u00a0in\u00a0a\u00a0calling\u00a0function.\u00a0It\u2019s\u00a0easier\u00a0to\u00a0test.\u00a0In\u00a0short,\u00a0I\u00a0have\u00a0a\u00a0lot\u00a0less\u00a0to\u00a0worry\nabout.\nIt\u00a0is\u00a0a\u00a0good\u00a0idea\u00a0to\u00a0clearly\u00a0signal\u00a0the\u00a0difference\u00a0between\u00a0functions\u00a0with\u00a0side\u00a0effects\u00a0and\nthose\u00a0without.\u00a0A\u00a0good\u00a0rule\u00a0to\u00a0follow\u00a0is\u00a0that\u00a0any\u00a0function\u00a0that\u00a0returns\u00a0a\u00a0value\u00a0should\u00a0not\nhave\u00a0observable\u00a0side\u00a0effects\u2014the\u00a0command\u00adquery\u00a0separation\u00a0[mf\u00adcqs].\u00a0Some\nprogrammers\u00a0treat\u00a0this\u00a0as\u00a0an\u00a0absolute\u00a0rule.\u00a0I\u2019m\u00a0not\u00a0100\u00a0percent\u00a0pure\u00a0on\u00a0this\u00a0(as\u00a0on\nanything),\u00a0but\u00a0I\u00a0try\u00a0to\u00a0follow\u00a0it\u00a0most\u00a0of\u00a0the\u00a0time,\u00a0and\u00a0it\u00a0has\u00a0served\u00a0me\u00a0well.\nIf\u00a0I\u00a0come\u00a0across\u00a0a\u00a0method\u00a0that\u00a0returns\u00a0a\u00a0value\u00a0but\u00a0also\u00a0has\u00a0side\u00a0effects,\u00a0I\u00a0always\u00a0try\u00a0to\nseparate\u00a0the\u00a0query\u00a0from\u00a0the\u00a0modifier.\nNote\u00a0that\u00a0I\u00a0use\u00a0the\u00a0phrase\u00a0observable\u00a0side\u00a0effects.\u00a0A\u00a0common\u00a0optimization\u00a0is\u00a0to\u00a0cache\nthe\u00a0value\u00a0of\u00a0a\u00a0query\u00a0in\u00a0a\u00a0field\u00a0so\u00a0that\u00a0repeated\u00a0calls\u00a0go\u00a0quicker.\u00a0Although\u00a0this\u00a0changes\nthe\u00a0state\u00a0of\u00a0the\u00a0object\u00a0with\u00a0the\u00a0cache,\u00a0the\u00a0change\u00a0is\u00a0not\u00a0observable.\u00a0Any\u00a0sequence\u00a0of\nqueries\u00a0will\u00a0always\u00a0return\u00a0the\u00a0same\u00a0results\u00a0for\u00a0each\u00a0query.\nMechanics\nwww.EBooksWorld.ir\n", "page": 343, "type": "text", "section": "Page 343"}
{"text": "Copy\u00a0the\u00a0function,\u00a0name\u00a0it\u00a0as\u00a0a\u00a0query.\nLook\u00a0into\u00a0the\u00a0function\u00a0to\u00a0see\u00a0what\u00a0is\u00a0returned.\u00a0If\u00a0the\u00a0query\u00a0is\u00a0used\u00a0to\u00a0populate\u00a0a\nvariable,\u00a0the\u00a0variable\u2019s\u00a0name\u00a0should\u00a0provide\u00a0a\u00a0good\u00a0clue.\nRemove\u00a0any\u00a0side\u00a0effects\u00a0from\u00a0the\u00a0new\u00a0query\u00a0function.\nRun\u00a0static\u00a0checks.\nFind\u00a0each\u00a0call\u00a0of\u00a0the\u00a0original\u00a0method.\u00a0If\u00a0that\u00a0call\u00a0uses\u00a0the\u00a0return\u00a0value,\u00a0replace\u00a0the\noriginal\u00a0call\u00a0with\u00a0a\u00a0call\u00a0to\u00a0the\u00a0query\u00a0and\u00a0insert\u00a0a\u00a0call\u00a0to\u00a0the\u00a0original\u00a0method\u00a0below\u00a0it.\nTest\u00a0after\u00a0each\u00a0change.\nRemove\u00a0return\u00a0values\u00a0from\u00a0original.\nTest.\nOften\u00a0after\u00a0doing\u00a0this\u00a0there\u00a0will\u00a0be\u00a0duplication\u00a0between\u00a0the\u00a0query\u00a0and\u00a0the\u00a0original\nmethod\u00a0that\u00a0can\u00a0be\u00a0tidied\u00a0up.\nExample\nHere\u00a0is\u00a0a\u00a0function\u00a0that\u00a0scans\u00a0a\u00a0list\u00a0of\u00a0names\u00a0for\u00a0a\u00a0miscreant.\u00a0If\u00a0it\u00a0finds\u00a0one,\u00a0it\u00a0returns\nthe\u00a0name\u00a0of\u00a0the\u00a0bad\u00a0guy\u00a0and\u00a0sets\u00a0off\u00a0the\u00a0alarms.\u00a0It\u00a0only\u00a0does\u00a0this\u00a0for\u00a0the\u00a0first\u00a0miscreant\nit\u00a0finds\u00a0(I\u00a0guess\u00a0one\u00a0is\u00a0enough).\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0alertForMiscreant\u00a0(people)\u00a0{\n\u00a0\u00a0for\u00a0(const\u00a0p\u00a0of\u00a0people)\u00a0{\n\u00a0\u00a0\u00a0\u00a0if\u00a0(p\u00a0===\u00a0\"Don\")\u00a0{\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0setOffAlarms()\u037e\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0return\u00a0\"Don\"\u037e\n\u00a0\u00a0\u00a0\u00a0}\n\u00a0\u00a0\u00a0\u00a0if\u00a0(p\u00a0===\u00a0\"John\")\u00a0{\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0setOffAlarms()\u037e\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0return\u00a0\"John\"\u037e\n\u00a0\u00a0\u00a0\u00a0}\n\u00a0\u00a0}\n\u00a0\u00a0return\u00a0\"\"\u037e\n}\nI\u00a0begin\u00a0by\u00a0copying\u00a0the\u00a0function,\u00a0naming\u00a0it\u00a0after\u00a0the\u00a0query\u00a0aspect\u00a0of\u00a0the\u00a0function.\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nwww.EBooksWorld.ir\n", "page": 344, "type": "text", "section": "Page 344"}
{"text": "function\u00a0findMiscreant\u00a0(people)\u00a0{\n\u00a0\u00a0for\u00a0(const\u00a0p\u00a0of\u00a0people)\u00a0{\n\u00a0\u00a0\u00a0\u00a0if\u00a0(p\u00a0===\u00a0\"Don\")\u00a0{\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0setOffAlarms()\u037e\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0return\u00a0\"Don\"\u037e\n\u00a0\u00a0\u00a0\u00a0}\n\u00a0\u00a0\u00a0\u00a0if\u00a0(p\u00a0===\u00a0\"John\")\u00a0{\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0setOffAlarms()\u037e\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0return\u00a0\"John\"\u037e\n\u00a0\u00a0\u00a0\u00a0}\n\u00a0\u00a0}\n\u00a0\u00a0return\u00a0\"\"\u037e\n}\nI\u00a0remove\u00a0the\u00a0side\u00a0effects\u00a0from\u00a0this\u00a0new\u00a0query.\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0findMiscreant\u00a0(people)\u00a0{\n\u00a0\u00a0for\u00a0(const\u00a0p\u00a0of\u00a0people)\u00a0{\n\u00a0\u00a0\u00a0\u00a0if\u00a0(p\u00a0===\u00a0\"Don\")\u00a0{\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0setOffAlarms()\u037e\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0return\u00a0\"Don\"\u037e\n\u00a0\u00a0\u00a0\u00a0}\n\u00a0\u00a0\u00a0\u00a0if\u00a0(p\u00a0===\u00a0\"John\")\u00a0{\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0setOffAlarms()\u037e\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0return\u00a0\"John\"\u037e\n\u00a0\u00a0\u00a0\u00a0}\n\u00a0\u00a0}\n\u00a0\u00a0return\u00a0\"\"\u037e\n}\nI\u00a0now\u00a0go\u00a0to\u00a0each\u00a0caller\u00a0and\u00a0replace\u00a0it\u00a0with\u00a0a\u00a0call\u00a0to\u00a0the\u00a0query,\u00a0followed\u00a0by\u00a0a\u00a0call\u00a0to\u00a0the\nmodifier.\u00a0So\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nconst\u00a0found\u00a0=\u00a0alertForMiscreant(people)\u037e\nchanges\u00a0to\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nconst\u00a0found\u00a0=\u00a0findMiscreant(people)\u037e\nalertForMiscreant(people)\u037e\nwww.EBooksWorld.ir\n", "page": 345, "type": "text", "section": "Page 345"}
{"text": "I\u00a0now\u00a0remove\u00a0the\u00a0return\u00a0values\u00a0from\u00a0the\u00a0modifier.\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0alertForMiscreant\u00a0(people)\u00a0{\n\u00a0\u00a0for\u00a0(const\u00a0p\u00a0of\u00a0people)\u00a0{\n\u00a0\u00a0\u00a0\u00a0if\u00a0(p\u00a0===\u00a0\"Don\")\u00a0{\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0setOffAlarms()\u037e\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0return\u037e\n\u00a0\u00a0\u00a0\u00a0}\n\u00a0\u00a0\u00a0\u00a0if\u00a0(p\u00a0===\u00a0\"John\")\u00a0{\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0setOffAlarms()\u037e\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0return\u037e\n\u00a0\u00a0\u00a0\u00a0}\n\u00a0\u00a0}\n\u00a0\u00a0return\u037e\n}\nNow\u00a0I\u00a0have\u00a0a\u00a0lot\u00a0of\u00a0duplication\u00a0between\u00a0the\u00a0original\u00a0modifier\u00a0and\u00a0the\u00a0new\u00a0query,\u00a0so\u00a0I\ncan\u00a0use\u00a0Substitute\u00a0Algorithm\u00a0(195)\u00a0so\u00a0that\u00a0the\u00a0modifier\u00a0uses\u00a0the\u00a0query.\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0alertForMiscreant\u00a0(people)\u00a0{\n\u00a0\u00a0if\u00a0(findMiscreant(people)\u00a0!==\u00a0\"\")\u00a0setOffAlarms()\u037e\n}\nPARAMETERIZE FUNCTION\nformerly:\u00a0Parameterize\u00a0Method\nwww.EBooksWorld.ir\n", "page": 346, "type": "text", "section": "Page 346"}
{"text": "Motivation\nIf\u00a0I\u00a0see\u00a0two\u00a0functions\u00a0that\u00a0carry\u00a0out\u00a0very\u00a0similar\u00a0logic\u00a0with\u00a0different\u00a0literal\u00a0values,\u00a0I\u00a0can\nremove\u00a0the\u00a0duplication\u00a0by\u00a0using\u00a0a\u00a0single\u00a0function\u00a0with\u00a0parameters\u00a0for\u00a0the\u00a0different\nvalues.\u00a0This\u00a0increases\u00a0the\u00a0usefulness\u00a0of\u00a0the\u00a0function,\u00a0since\u00a0I\u00a0can\u00a0apply\u00a0it\u00a0elsewhere\u00a0with\ndifferent\u00a0values.\nMechanics\nSelect\u00a0one\u00a0of\u00a0the\u00a0similar\u00a0methods.\nUse\u00a0Change\u00a0Function\u00a0Declaration\u00a0(124)\u00a0to\u00a0add\u00a0any\u00a0literals\u00a0that\u00a0need\u00a0to\u00a0turn\u00a0into\nparameters.\nFor\u00a0each\u00a0caller\u00a0of\u00a0the\u00a0function,\u00a0add\u00a0the\u00a0literal\u00a0value.\nTest.\nChange\u00a0the\u00a0body\u00a0of\u00a0the\u00a0function\u00a0to\u00a0use\u00a0the\u00a0new\u00a0parameters.\u00a0Test\u00a0after\u00a0each\u00a0change.\nFor\u00a0each\u00a0similar\u00a0function,\u00a0replace\u00a0the\u00a0call\u00a0with\u00a0a\u00a0call\u00a0to\u00a0the\u00a0parameterized\u00a0function.\nTest\u00a0after\u00a0each\u00a0one.\nIf\u00a0the\u00a0original\u00a0parameterized\u00a0function\u00a0doesn\u2019t\u00a0work\u00a0for\u00a0a\u00a0similar\u00a0function,\u00a0adjust\u00a0it\nfor\u00a0the\u00a0new\u00a0function\u00a0before\u00a0moving\u00a0on\u00a0to\u00a0the\u00a0next.\nExample\nwww.EBooksWorld.ir\n", "page": 347, "type": "text", "section": "Page 347"}
{"text": "An\u00a0obvious\u00a0example\u00a0is\u00a0something\u00a0like\u00a0this:\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0tenPercentRaise(aPerson)\u00a0{\n\u00a0\u00a0aPerson.salary\u00a0=\u00a0aPerson.salary.multiply(1.1)\u037e\n}\nfunction\u00a0fivePercentRaise(aPerson)\u00a0{\n\u00a0\u00a0aPerson.salary\u00a0=\u00a0aPerson.salary.multiply(1.05)\u037e\n}\nHopefully\u00a0it\u2019s\u00a0obvious\u00a0that\u00a0I\u00a0can\u00a0replace\u00a0these\u00a0with\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0raise(aPerson,\u00a0factor)\u00a0{\n\u00a0\u00a0aPerson.salary\u00a0=\u00a0aPerson.salary.multiply(1\u00a0+\u00a0factor)\u037e\n}\nBut\u00a0it\u00a0can\u00a0be\u00a0a\u00a0bit\u00a0more\u00a0involved\u00a0than\u00a0that.\u00a0Consider\u00a0this\u00a0code:\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0baseCharge(usage)\u00a0{\n\u00a0\u00a0if\u00a0(usage\u00a0<\u00a00)\u00a0return\u00a0usd(0)\u037e\n\u00a0\u00a0const\u00a0amount\u00a0=\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0bottomBand(usage)\u00a0*\u00a00.03\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0+\u00a0middleBand(usage)\u00a0*\u00a00.05\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0+\u00a0topBand(usage)\u00a0*\u00a00.07\u037e\n\u00a0\u00a0return\u00a0usd(amount)\u037e\n}\nfunction\u00a0bottomBand(usage)\u00a0{\n\u00a0\u00a0return\u00a0Math.min(usage,\u00a0100)\u037e\n}\nfunction\u00a0middleBand(usage)\u00a0{\n\u00a0\u00a0return\u00a0usage\u00a0>\u00a0100\u00a0?\u00a0Math.min(usage,\u00a0200)\u00a0\u00ad\u00a0100\u00a0:\u00a00\u037e\n}\nfunction\u00a0topBand(usage)\u00a0{\n\u00a0\u00a0return\u00a0usage\u00a0>\u00a0200\u00a0?\u00a0usage\u00a0\u00ad\u00a0200\u00a0:\u00a00\u037e\n}\nHere\u00a0the\u00a0logic\u00a0is\u00a0clearly\u00a0pretty\u00a0similar\u2014but\u00a0is\u00a0it\u00a0similar\u00a0enough\u00a0to\u00a0support\u00a0creating\u00a0a\nparameterized\u00a0method\u00a0for\u00a0the\u00a0bands?\u00a0It\u00a0is,\u00a0but\u00a0may\u00a0be\u00a0a\u00a0touch\u00a0less\u00a0obvious\u00a0than\u00a0the\nwww.EBooksWorld.ir\n", "page": 348, "type": "text", "section": "Page 348"}
{"text": "trivial\u00a0case\u00a0above.\nWhen\u00a0looking\u00a0to\u00a0parameterize\u00a0some\u00a0related\u00a0functions,\u00a0my\u00a0approach\u00a0is\u00a0to\u00a0take\u00a0one\u00a0of\nthe\u00a0functions\u00a0and\u00a0add\u00a0parameters\u00a0to\u00a0it,\u00a0with\u00a0an\u00a0eye\u00a0to\u00a0the\u00a0other\u00a0cases.\u00a0With\u00a0range\u00ad\noriented\u00a0things\u00a0like\u00a0this,\u00a0usually\u00a0the\u00a0place\u00a0to\u00a0start\u00a0is\u00a0with\u00a0the\u00a0middle\u00a0range.\u00a0So\u00a0I\u2019ll\u00a0work\non\u00a0middleBand\u00a0to\u00a0change\u00a0it\u00a0to\u00a0use\u00a0parameters,\u00a0and\u00a0then\u00a0adjust\u00a0other\u00a0callers\u00a0to\u00a0fit.\nmiddleBand\u00a0uses\u00a0two\u00a0literal\u00a0values:\u00a0100\u00a0and\u00a0200.\u00a0These\u00a0represent\u00a0the\u00a0bottom\u00a0and\u00a0top\nof\u00a0this\u00a0middle\u00a0band.\u00a0I\u00a0begin\u00a0by\u00a0using\u00a0Change\u00a0Function\u00a0Declaration\u00a0(124)\u00a0to\u00a0add\u00a0them\nto\u00a0the\u00a0call.\u00a0While\u00a0I\u2019m\u00a0at\u00a0it,\u00a0I\u2019ll\u00a0also\u00a0change\u00a0the\u00a0name\u00a0of\u00a0the\u00a0function\u00a0to\u00a0something\u00a0that\nmakes\u00a0sense\u00a0with\u00a0the\u00a0parameterization.\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0withinBand(usage,\u00a0bottom,\u00a0top)\u00a0{\n\u00a0\u00a0return\u00a0usage\u00a0>\u00a0100\u00a0?\u00a0Math.min(usage,\u00a0200)\u00a0\u00ad\u00a0100\u00a0:\u00a00\u037e\n}\nfunction\u00a0baseCharge(usage)\u00a0{\n\u00a0\u00a0if\u00a0(usage\u00a0<\u00a00)\u00a0return\u00a0usd(0)\u037e\n\u00a0\u00a0const\u00a0amount\u00a0=\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0bottomBand(usage)\u00a0*\u00a00.03\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0+\u00a0withinBand(usage,\u00a0100,\u00a0200)\u00a0*\u00a00.05\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0+\u00a0topBand(usage)\u00a0*\u00a00.07\u037e\n\u00a0\u00a0return\u00a0usd(amount)\u037e\n}\nI\u00a0replace\u00a0each\u00a0literal\u00a0with\u00a0a\u00a0reference\u00a0to\u00a0the\u00a0parameter:\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0withinBand(usage,\u00a0bottom,\u00a0top)\u00a0{\n\u00a0\u00a0return\u00a0usage\u00a0>\u00a0bottom\u00a0?\u00a0Math.min(usage,\u00a0200)\u00a0\u00ad\u00a0bottom\u00a0:\u00a00\u037e\n}\nthen:\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0withinBand(usage,\u00a0bottom,\u00a0top)\u00a0{\n\u00a0\u00a0return\u00a0usage\u00a0>\u00a0bottom\u00a0?\u00a0Math.min(usage,\u00a0top)\u00a0\u00ad\u00a0bottom\u00a0:\u00a00\u037e\n}\nwww.EBooksWorld.ir\n", "page": 349, "type": "text", "section": "Page 349"}
{"text": "I\u00a0replace\u00a0the\u00a0call\u00a0to\u00a0the\u00a0bottom\u00a0band\u00a0with\u00a0a\u00a0call\u00a0to\u00a0the\u00a0newly\u00a0parameterized\u00a0function.\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0baseCharge(usage)\u00a0{\n\u00a0\u00a0if\u00a0(usage\u00a0<\u00a00)\u00a0return\u00a0usd(0)\u037e\n\u00a0\u00a0const\u00a0amount\u00a0=\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0withinBand(usage,\u00a00,\u00a0100)\u00a0*\u00a00.03\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0+\u00a0withinBand(usage,\u00a0100,\u00a0200)\u00a0*\u00a00.05\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0+\u00a0topBand(usage)\u00a0*\u00a00.07\u037e\n\u00a0\u00a0return\u00a0usd(amount)\u037e\n}\nfunction\u00a0bottomBand(usage)\u00a0{\n\u00a0\u00a0return\u00a0Math.min(usage,\u00a0100)\u037e\n}\nTo\u00a0replace\u00a0the\u00a0call\u00a0to\u00a0the\u00a0top\u00a0band,\u00a0I\u00a0need\u00a0to\u00a0make\u00a0use\u00a0of\u00a0infinity.\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0baseCharge(usage)\u00a0{\n\u00a0\u00a0if\u00a0(usage\u00a0<\u00a00)\u00a0return\u00a0usd(0)\u037e\n\u00a0\u00a0const\u00a0amount\u00a0=\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0withinBand(usage,\u00a00,\u00a0100)\u00a0*\u00a00.03\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0+\u00a0withinBand(usage,\u00a0100,\u00a0200)\u00a0*\u00a00.05\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0+\u00a0withinBand(usage,\u00a0200,\u00a0Infinity)\u00a0*\u00a00.07\u037e\n\u00a0\u00a0return\u00a0usd(amount)\u037e\n}\nfunction\u00a0topBand(usage)\u00a0{\n\u00a0\u00a0return\u00a0usage\u00a0>\u00a0200\u00a0?\u00a0usage\u00a0\u00ad\u00a0200\u00a0:\u00a00\u037e\n}\nWith\u00a0the\u00a0logic\u00a0working\u00a0the\u00a0way\u00a0it\u00a0does\u00a0now,\u00a0I\u00a0could\u00a0remove\u00a0the\u00a0initial\u00a0guard\u00a0clause.\u00a0But\nalthough\u00a0it\u2019s\u00a0logically\u00a0unnecessary\u00a0now,\u00a0I\u00a0like\u00a0to\u00a0keep\u00a0it\u00a0as\u00a0it\u00a0documents\u00a0how\u00a0to\u00a0handle\nthat\u00a0case.\nREMOVE FLAG ARGUMENT\nformerly:\u00a0Replace\u00a0Parameter\u00a0with\u00a0Explicit\u00a0Methods\nwww.EBooksWorld.ir\n", "page": 350, "type": "text", "section": "Page 350"}
{"text": "Motivation\nA\u00a0flag\u00a0argument\u00a0is\u00a0a\u00a0function\u00a0argument\u00a0that\u00a0the\u00a0caller\u00a0uses\u00a0to\u00a0indicate\u00a0which\u00a0logic\u00a0the\ncalled\u00a0function\u00a0should\u00a0execute.\u00a0I\u00a0may\u00a0call\u00a0a\u00a0function\u00a0that\u00a0looks\u00a0like\u00a0this:\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0bookConcert(aCustomer,\u00a0isPremium)\u00a0{\n\u00a0\u00a0if\u00a0(isPremium)\u00a0{\n\u00a0\u00a0\u00a0\u00a0//\u00a0logic\u00a0for\u00a0premium\u00a0booking\n\u00a0\u00a0}\u00a0else\u00a0{\n\u00a0\u00a0\u00a0\u00a0//\u00a0logic\u00a0for\u00a0regular\u00a0booking\n\u00a0\u00a0}\n}\nTo\u00a0book\u00a0a\u00a0premium\u00a0concert,\u00a0I\u00a0issue\u00a0the\u00a0call\u00a0like\u00a0so:\nbookConcert(aCustomer,\u00a0true)\u037e\nFlag\u00a0arguments\u00a0can\u00a0also\u00a0come\u00a0as\u00a0enums:\nwww.EBooksWorld.ir\n", "page": 351, "type": "text", "section": "Page 351"}
{"text": "Click\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nbookConcert(aCustomer,\u00a0CustomerType.PREMIUM)\u037e\nor\u00a0strings\u00a0(or\u00a0symbols\u00a0in\u00a0languages\u00a0that\u00a0use\u00a0them):\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nbookConcert(aCustomer,\u00a0\"premium\")\u037e\nI\u00a0dislike\u00a0flag\u00a0arguments\u00a0because\u00a0they\u00a0complicate\u00a0the\u00a0process\u00a0of\u00a0understanding\u00a0what\nfunction\u00a0calls\u00a0are\u00a0available\u00a0and\u00a0how\u00a0to\u00a0call\u00a0them.\u00a0My\u00a0first\u00a0route\u00a0into\u00a0an\u00a0API\u00a0is\u00a0usually\nthe\u00a0list\u00a0of\u00a0available\u00a0functions,\u00a0and\u00a0flag\u00a0arguments\u00a0hide\u00a0the\u00a0differences\u00a0in\u00a0the\u00a0function\ncalls\u00a0that\u00a0are\u00a0available.\u00a0Once\u00a0I\u00a0select\u00a0a\u00a0function,\u00a0I\u00a0have\u00a0to\u00a0figure\u00a0out\u00a0what\u00a0values\u00a0are\navailable\u00a0for\u00a0the\u00a0flag\u00a0arguments.\u00a0Boolean\u00a0flags\u00a0are\u00a0even\u00a0worse\u00a0since\u00a0they\u00a0don\u2019t\u00a0convey\ntheir\u00a0meaning\u00a0to\u00a0the\u00a0reader\u2014in\u00a0a\u00a0function\u00a0call,\u00a0I\u00a0can\u2019t\u00a0figure\u00a0out\u00a0what\u00a0true\u00a0means.\u00a0It\u2019s\nclearer\u00a0to\u00a0provide\u00a0an\u00a0explicit\u00a0function\u00a0for\u00a0the\u00a0task\u00a0I\u00a0want\u00a0to\u00a0do.\npremiumBookConcert(aCustomer)\u037e\nNot\u00a0all\u00a0arguments\u00a0like\u00a0this\u00a0are\u00a0flag\u00a0arguments.\u00a0To\u00a0be\u00a0a\u00a0flag\u00a0argument,\u00a0the\u00a0callers\u00a0must\nbe\u00a0setting\u00a0the\u00a0boolean\u00a0value\u00a0to\u00a0a\u00a0literal\u00a0value,\u00a0not\u00a0data\u00a0that\u2019s\u00a0flowing\u00a0through\u00a0the\nprogram.\u00a0Also,\u00a0the\u00a0implementation\u00a0function\u00a0must\u00a0be\u00a0using\u00a0the\u00a0argument\u00a0to\u00a0influence\nits\u00a0control\u00a0flow,\u00a0not\u00a0as\u00a0data\u00a0that\u00a0it\u00a0passes\u00a0to\u00a0further\u00a0functions.\nRemoving\u00a0flag\u00a0arguments\u00a0doesn\u2019t\u00a0just\u00a0make\u00a0the\u00a0code\u00a0clearer\u2014it\u00a0also\u00a0helps\u00a0my\u00a0tooling.\nCode\u00a0analysis\u00a0tools\u00a0can\u00a0now\u00a0more\u00a0easily\u00a0see\u00a0the\u00a0difference\u00a0between\u00a0calling\u00a0the\u00a0premium\nlogic\u00a0and\u00a0calling\u00a0regular\u00a0logic.\nFlag\u00a0arguments\u00a0can\u00a0have\u00a0a\u00a0place\u00a0if\u00a0there\u2019s\u00a0more\u00a0than\u00a0one\u00a0of\u00a0them\u00a0in\u00a0the\u00a0function,\u00a0since\notherwise\u00a0I\u00a0would\u00a0need\u00a0explicit\u00a0functions\u00a0for\u00a0every\u00a0combination\u00a0of\u00a0their\u00a0values.\u00a0But\nthat\u2019s\u00a0also\u00a0a\u00a0signal\u00a0of\u00a0a\u00a0function\u00a0doing\u00a0too\u00a0much,\u00a0and\u00a0I\u00a0should\u00a0look\u00a0for\u00a0a\u00a0way\u00a0to\u00a0create\nsimpler\u00a0functions\u00a0that\u00a0I\u00a0can\u00a0compose\u00a0for\u00a0this\u00a0logic.\nMechanics\nCreate\u00a0an\u00a0explicit\u00a0function\u00a0for\u00a0each\u00a0value\u00a0of\u00a0the\u00a0parameter.\nIf\u00a0the\u00a0main\u00a0function\u00a0has\u00a0a\u00a0clear\u00a0dispatch\u00a0conditional,\u00a0use\u00a0Decompose\u00a0Conditional\n(260)\u00a0to\u00a0create\u00a0the\u00a0explicit\u00a0functions.\u00a0Otherwise,\u00a0create\u00a0wrapping\u00a0functions.\nwww.EBooksWorld.ir\n", "page": 352, "type": "text", "section": "Page 352"}
{"text": "For\u00a0each\u00a0caller\u00a0that\u00a0uses\u00a0a\u00a0literal\u00a0value\u00a0for\u00a0the\u00a0parameter,\u00a0replace\u00a0it\u00a0with\u00a0a\u00a0call\u00a0to\u00a0the\nexplicit\u00a0function.\nExample\nLooking\u00a0through\u00a0some\u00a0code,\u00a0I\u00a0see\u00a0calls\u00a0to\u00a0calculate\u00a0a\u00a0delivery\u00a0date\u00a0for\u00a0a\u00a0shipment.\u00a0Some\nof\u00a0the\u00a0calls\u00a0look\u00a0like\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\naShipment.deliveryDate\u00a0=\u00a0deliveryDate(anOrder,\u00a0true)\u037e\nand\u00a0some\u00a0look\u00a0like\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\naShipment.deliveryDate\u00a0=\u00a0deliveryDate(anOrder,\u00a0false)\u037e\nFaced\u00a0with\u00a0code\u00a0like\u00a0this,\u00a0I\u00a0immediately\u00a0begin\u00a0to\u00a0wonder\u00a0about\u00a0the\u00a0meaning\u00a0of\u00a0the\nboolean\u00a0value.\u00a0What\u00a0is\u00a0it\u00a0doing?\nThe\u00a0body\u00a0of\u00a0deliveryDate\u00a0looks\u00a0like\u00a0this:\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0deliveryDate(anOrder,\u00a0isRush)\u00a0{\n\u00a0\u00a0if\u00a0(isRush)\u00a0{\n\u00a0\u00a0\u00a0\u00a0let\u00a0deliveryTime\u037e\n\u00a0\u00a0\u00a0\u00a0if\u00a0([\"MA\",\u00a0\"CT\"]\u00a0\u00a0\u00a0\u00a0\u00a0.includes(anOrder.deliveryState))\u00a0deliveryTime\u00a0=\u00a01\u037e\n\u00a0\u00a0\u00a0\u00a0else\u00a0if\u00a0([\"NY\",\u00a0\"NH\"].includes(anOrder.deliveryState))\u00a0deliveryTime\u00a0=\u00a02\u037e\n\u00a0\u00a0\u00a0\u00a0else\u00a0deliveryTime\u00a0=\u00a03\u037e\n\u00a0\u00a0\u00a0\u00a0return\u00a0anOrder.placedOn.plusDays(1\u00a0+\u00a0deliveryTime)\u037e\n\u00a0\u00a0}\n\u00a0\u00a0else\u00a0{\n\u00a0\u00a0\u00a0\u00a0let\u00a0deliveryTime\u037e\n\u00a0\u00a0\u00a0\u00a0if\u00a0([\"MA\",\u00a0\"CT\",\u00a0\"NY\"].includes(anOrder.deliveryState))\u00a0deliveryTime\u00a0=\u00a02\u037e\n\u00a0\u00a0\u00a0\u00a0else\u00a0if\u00a0([\"ME\",\u00a0\"NH\"]\u00a0.includes(anOrder.deliveryState))\u00a0deliveryTime\u00a0=\u00a03\u037e\n\u00a0\u00a0\u00a0\u00a0else\u00a0deliveryTime\u00a0=\u00a04\u037e\n\u00a0\u00a0\u00a0\u00a0return\u00a0anOrder.placedOn.plusDays(2\u00a0+\u00a0deliveryTime)\u037e\n\u00a0\u00a0}\n}\nHere,\u00a0the\u00a0caller\u00a0is\u00a0using\u00a0a\u00a0literal\u00a0boolean\u00a0value\u00a0to\u00a0determine\u00a0which\u00a0code\u00a0should\u00a0run\u2014a\nwww.EBooksWorld.ir\n", "page": 353, "type": "text", "section": "Page 353"}
{"text": "classic\u00a0flag\u00a0argument.\u00a0But\u00a0the\u00a0whole\u00a0point\u00a0of\u00a0using\u00a0a\u00a0function\u00a0is\u00a0to\u00a0follow\u00a0the\u00a0caller\u2019s\ninstructions,\u00a0so\u00a0it\u00a0is\u00a0better\u00a0to\u00a0clarify\u00a0the\u00a0caller\u2019s\u00a0intent\u00a0with\u00a0explicit\u00a0functions.\nIn\u00a0this\u00a0case,\u00a0I\u00a0can\u00a0do\u00a0this\u00a0by\u00a0using\u00a0Decompose\u00a0Conditional\u00a0(260),\u00a0which\u00a0gives\u00a0me\u00a0this:\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0deliveryDate(anOrder,\u00a0isRush)\u00a0{\n\u00a0\u00a0if\u00a0(isRush)\u00a0return\u00a0rushDeliveryDate(anOrder)\u037e\n\u00a0\u00a0else\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0return\u00a0regularDeliveryDate(anOrder)\u037e\n}\nfunction\u00a0rushDeliveryDate(anOrder)\u00a0{\n\u00a0\u00a0\u00a0\u00a0let\u00a0deliveryTime\u037e\n\u00a0\u00a0\u00a0\u00a0if\u00a0([\"MA\",\u00a0\"CT\"]\u00a0\u00a0\u00a0\u00a0\u00a0.includes(anOrder.deliveryState))\u00a0deliveryTime\u00a0=\u00a01\u037e\n\u00a0\u00a0\u00a0\u00a0else\u00a0if\u00a0([\"NY\",\u00a0\"NH\"].includes(anOrder.deliveryState))\u00a0deliveryTime\u00a0=\u00a02\u037e\n\u00a0\u00a0\u00a0\u00a0else\u00a0deliveryTime\u00a0=\u00a03\u037e\n\u00a0\u00a0\u00a0\u00a0return\u00a0anOrder.placedOn.plusDays(1\u00a0+\u00a0deliveryTime)\u037e\n}\nfunction\u00a0regularDeliveryDate(anOrder)\u00a0{\n\u00a0\u00a0\u00a0\u00a0let\u00a0deliveryTime\u037e\n\u00a0\u00a0\u00a0\u00a0if\u00a0([\"MA\",\u00a0\"CT\",\u00a0\"NY\"].includes(anOrder.deliveryState))\u00a0deliveryTime\u00a0=\u00a02\u037e\n\u00a0\u00a0\u00a0\u00a0else\u00a0if\u00a0([\"ME\",\u00a0\"NH\"]\u00a0.includes(anOrder.deliveryState))\u00a0deliveryTime\u00a0=\u00a03\u037e\n\u00a0\u00a0\u00a0\u00a0else\u00a0deliveryTime\u00a0=\u00a04\u037e\n\u00a0\u00a0\u00a0\u00a0return\u00a0anOrder.placedOn.plusDays(2\u00a0+\u00a0deliveryTime)\u037e\n}\nThe\u00a0two\u00a0new\u00a0functions\u00a0capture\u00a0the\u00a0intent\u00a0of\u00a0the\u00a0call\u00a0better,\u00a0so\u00a0I\u00a0can\u00a0replace\u00a0each\u00a0call\u00a0of\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\naShipment.deliveryDate\u00a0=\u00a0deliveryDate(anOrder,\u00a0true)\u037e\nwith\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\naShipment.deliveryDate\u00a0=\u00a0rushDeliveryDate(anOrder)\u037e\nand\u00a0similarly\u00a0with\u00a0the\u00a0other\u00a0case.\nWhen\u00a0I\u2019ve\u00a0replaced\u00a0all\u00a0the\u00a0callers,\u00a0I\u00a0remove\u00a0deliveryDate.\nA\u00a0flag\u00a0argument\u00a0isn\u2019t\u00a0just\u00a0the\u00a0presence\u00a0of\u00a0a\u00a0boolean\u00a0value\u037e\u00a0it\u2019s\u00a0that\u00a0the\u00a0boolean\u00a0is\u00a0set\nwww.EBooksWorld.ir\n", "page": 354, "type": "text", "section": "Page 354"}
{"text": "with\u00a0a\u00a0literal\u00a0rather\u00a0than\u00a0data.\u00a0If\u00a0all\u00a0the\u00a0callers\u00a0of\u00a0deliveryDate\u00a0were\u00a0like\u00a0this:\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nconst\u00a0isRush\u00a0=\u00a0determineIfRush(anOrder)\u037e\naShipment.deliveryDate\u00a0=\u00a0deliveryDate(anOrder,\u00a0isRush)\u037e\nthen\u00a0I\u2019d\u00a0have\u00a0no\u00a0problem\u00a0with\u00a0deliveryDate\u2019s\u00a0signature\u00a0(although\u00a0I\u2019d\u00a0still\u00a0want\u00a0to\napply\u00a0Decompose\u00a0Conditional\u00a0(260)).\nIt\u00a0may\u00a0be\u00a0that\u00a0some\u00a0callers\u00a0use\u00a0the\u00a0argument\u00a0as\u00a0a\u00a0flag\u00a0argument\u00a0by\u00a0setting\u00a0it\u00a0with\u00a0a\nliteral,\u00a0while\u00a0others\u00a0set\u00a0the\u00a0argument\u00a0with\u00a0data.\u00a0In\u00a0this\u00a0case,\u00a0I\u2019d\u00a0still\u00a0use\u00a0Remove\u00a0Flag\nArgument,\u00a0but\u00a0not\u00a0change\u00a0the\u00a0data\u00a0callers\u00a0and\u00a0not\u00a0remove\u00a0deliveryDate\u00a0at\u00a0the\u00a0end.\nThat\u00a0way\u00a0I\u00a0support\u00a0both\u00a0interfaces\u00a0for\u00a0the\u00a0different\u00a0uses.\nDecomposing\u00a0the\u00a0conditional\u00a0like\u00a0this\u00a0is\u00a0a\u00a0good\u00a0way\u00a0to\u00a0carry\u00a0out\u00a0this\u00a0refactoring,\u00a0but\u00a0it\nonly\u00a0works\u00a0if\u00a0the\u00a0dispatch\u00a0on\u00a0the\u00a0parameter\u00a0is\u00a0the\u00a0outer\u00a0part\u00a0of\u00a0the\u00a0function\u00a0(or\u00a0I\u00a0can\neasily\u00a0refactor\u00a0it\u00a0to\u00a0make\u00a0it\u00a0so).\u00a0It\u2019s\u00a0also\u00a0possible\u00a0that\u00a0the\u00a0parameter\u00a0is\u00a0used\u00a0in\u00a0a\u00a0much\nmore\u00a0tangled\u00a0way,\u00a0such\u00a0as\u00a0this\u00a0alternative\u00a0version\u00a0of\u00a0deliveryDate:\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0deliveryDate(anOrder,\u00a0isRush)\u00a0{\n\u00a0\u00a0let\u00a0result\u037e\n\u00a0\u00a0let\u00a0deliveryTime\u037e\n\u00a0\u00a0if\u00a0(anOrder.deliveryState\u00a0===\u00a0\"MA\"\u00a0||\u00a0anOrder.deliveryState\u00a0===\u00a0\"CT\")\n\u00a0\u00a0\u00a0\u00a0deliveryTime\u00a0=\u00a0isRush?\u00a01\u00a0:\u00a02\u037e\n\u00a0\u00a0else\u00a0if\u00a0(anOrder.deliveryState\u00a0===\u00a0\"NY\"\u00a0||\u00a0anOrder.deliveryState\u00a0===\u00a0\"NH\")\u00a0{\n\u00a0\u00a0\u00a0\u00a0deliveryTime\u00a0=\u00a02\u037e\n\u00a0\u00a0\u00a0\u00a0if\u00a0(anOrder.deliveryState\u00a0===\u00a0\"NH\"\u00a0&&\u00a0!isRush)\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0deliveryTime\u00a0=\u00a03\u037e\n\u00a0\u00a0}\n\u00a0\u00a0else\u00a0if\u00a0(isRush)\n\u00a0\u00a0\u00a0\u00a0deliveryTime\u00a0=\u00a03\u037e\n\u00a0\u00a0else\u00a0if\u00a0(anOrder.deliveryState\u00a0===\u00a0\"ME\")\n\u00a0\u00a0\u00a0\u00a0deliveryTime\u00a0=\u00a03\u037e\n\u00a0\u00a0else\n\u00a0\u00a0\u00a0\u00a0deliveryTime\u00a0=\u00a04\u037e\n\u00a0\u00a0result\u00a0=\u00a0anOrder.placedOn.plusDays(2\u00a0+\u00a0deliveryTime)\u037e\n\u00a0\u00a0if\u00a0(isRush)\u00a0result\u00a0=\u00a0result.minusDays(1)\u037e\n\u00a0\u00a0return\u00a0result\u037e\n}\nIn\u00a0this\u00a0case,\u00a0teasing\u00a0out\u00a0isRush\u00a0into\u00a0a\u00a0top\u00adlevel\u00a0dispatch\u00a0conditional\u00a0is\u00a0likely\u00a0more\nwww.EBooksWorld.ir\n", "page": 355, "type": "text", "section": "Page 355"}
{"text": "work\u00a0than\u00a0I\u00a0fancy.\u00a0So\u00a0instead,\u00a0I\u00a0can\u00a0layer\u00a0functions\u00a0over\u00a0the\u00a0deliveryDate:\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0rushDeliveryDate\u00a0\u00a0\u00a0(anOrder)\u00a0{return\u00a0deliveryDate(anOrder,\u00a0true)\u037e}\nfunction\u00a0regularDeliveryDate(anOrder)\u00a0{return\u00a0deliveryDate(anOrder,\u00a0false)\u037e}\nThese\u00a0wrapping\u00a0functions\u00a0are\u00a0essentially\u00a0partial\u00a0applications\u00a0of\u00a0deliveryDate,\nalthough\u00a0they\u00a0are\u00a0defined\u00a0in\u00a0program\u00a0text\u00a0rather\u00a0than\u00a0by\u00a0composition\u00a0of\u00a0functions.\nI\u00a0can\u00a0then\u00a0do\u00a0the\u00a0same\u00a0replacement\u00a0of\u00a0callers\u00a0that\u00a0I\u00a0did\u00a0with\u00a0the\u00a0decomposed\nconditional\u00a0earlier\u00a0on.\u00a0If\u00a0there\u00a0aren\u2019t\u00a0any\u00a0callers\u00a0using\u00a0the\u00a0parameter\u00a0as\u00a0data,\u00a0I\u00a0like\u00a0to\nrestrict\u00a0its\u00a0visibility\u00a0or\u00a0rename\u00a0it\u00a0to\u00a0a\u00a0name\u00a0that\u00a0conveys\u00a0that\u00a0it\u00a0shouldn\u2019t\u00a0be\u00a0used\ndirectly\u00a0(e.g.,\u00a0deliveryDateHelperOnly).\nPRESERVE WHOLE OBJECT\nMotivation\nIf\u00a0I\u00a0see\u00a0code\u00a0that\u00a0derives\u00a0a\u00a0couple\u00a0of\u00a0values\u00a0from\u00a0a\u00a0record\u00a0and\u00a0then\u00a0passes\u00a0these\u00a0values\ninto\u00a0a\u00a0function,\u00a0I\u00a0like\u00a0to\u00a0replace\u00a0those\u00a0values\u00a0with\u00a0the\u00a0whole\u00a0record\u00a0itself,\u00a0letting\u00a0the\nfunction\u00a0body\u00a0derive\u00a0the\u00a0values\u00a0it\u00a0needs.\nPassing\u00a0the\u00a0whole\u00a0record\u00a0handles\u00a0change\u00a0better\u00a0should\u00a0the\u00a0called\u00a0function\u00a0need\u00a0more\ndata\u00a0from\u00a0the\u00a0whole\u00a0in\u00a0the\u00a0future\u2014that\u00a0change\u00a0would\u00a0not\u00a0require\u00a0me\u00a0to\u00a0alter\u00a0the\nparameter\u00a0list.\u00a0It\u00a0also\u00a0reduces\u00a0the\u00a0size\u00a0of\u00a0the\u00a0parameter\u00a0list,\u00a0which\u00a0usually\u00a0makes\u00a0the\nwww.EBooksWorld.ir\n", "page": 356, "type": "text", "section": "Page 356"}
{"text": "function\u00a0call\u00a0easier\u00a0to\u00a0understand.\u00a0If\u00a0many\u00a0functions\u00a0are\u00a0called\u00a0with\u00a0the\u00a0parts,\u00a0they\noften\u00a0duplicate\u00a0the\u00a0logic\u00a0that\u00a0manipulates\u00a0these\u00a0parts\u2014logic\u00a0that\u00a0can\u00a0often\u00a0be\u00a0moved\u00a0to\nthe\u00a0whole.\nThe\u00a0main\u00a0reason\u00a0I\u00a0wouldn\u2019t\u00a0do\u00a0this\u00a0is\u00a0if\u00a0I\u00a0don\u2019t\u00a0want\u00a0the\u00a0called\u00a0function\u00a0to\u00a0have\u00a0a\ndependency\u00a0on\u00a0the\u00a0whole\u2014which\u00a0typically\u00a0occurs\u00a0when\u00a0they\u00a0are\u00a0in\u00a0different\u00a0modules.\nPulling\u00a0several\u00a0values\u00a0from\u00a0an\u00a0object\u00a0to\u00a0do\u00a0some\u00a0logic\u00a0on\u00a0them\u00a0alone\u00a0is\u00a0a\u00a0smell\u00a0(Feature\nEnvy\u00a0(77)),\u00a0and\u00a0usually\u00a0a\u00a0signal\u00a0that\u00a0this\u00a0logic\u00a0should\u00a0be\u00a0moved\u00a0into\u00a0the\u00a0whole\u00a0itself.\nPreserve\u00a0Whole\u00a0Object\u00a0is\u00a0particularly\u00a0common\u00a0after\u00a0I\u2019ve\u00a0done\u00a0Introduce\u00a0Parameter\nObject\u00a0(140),\u00a0as\u00a0I\u00a0hunt\u00a0down\u00a0any\u00a0occurrences\u00a0of\u00a0the\u00a0original\u00a0data\u00a0clump\u00a0to\u00a0replace\u00a0them\nwith\u00a0the\u00a0new\u00a0object.\nIf\u00a0several\u00a0bits\u00a0of\u00a0code\u00a0only\u00a0use\u00a0the\u00a0same\u00a0subset\u00a0of\u00a0an\u00a0object\u2019s\u00a0features,\u00a0then\u00a0that\u00a0may\nindicate\u00a0a\u00a0good\u00a0opportunity\u00a0for\u00a0Extract\u00a0Class\u00a0(182).\nOne\u00a0case\u00a0that\u00a0many\u00a0people\u00a0miss\u00a0is\u00a0when\u00a0an\u00a0object\u00a0calls\u00a0another\u00a0object\u00a0with\u00a0several\u00a0of\nits\u00a0own\u00a0data\u00a0values.\u00a0If\u00a0I\u00a0see\u00a0this,\u00a0I\u00a0can\u00a0replace\u00a0those\u00a0values\u00a0with\u00a0a\u00a0self\u00adreference\u00a0(this\nin\u00a0JavaScript).\nMechanics\nCreate\u00a0an\u00a0empty\u00a0function\u00a0with\u00a0the\u00a0desired\u00a0parameters.\nGive\u00a0the\u00a0function\u00a0an\u00a0easily\u00a0searchable\u00a0name\u00a0so\u00a0it\u00a0can\u00a0be\u00a0replaced\u00a0at\u00a0the\u00a0end.\nFill\u00a0the\u00a0body\u00a0of\u00a0the\u00a0new\u00a0function\u00a0with\u00a0a\u00a0call\u00a0to\u00a0the\u00a0old\u00a0function,\u00a0mapping\u00a0from\u00a0the\nnew\u00a0parameters\u00a0to\u00a0the\u00a0old\u00a0ones.\nRun\u00a0static\u00a0checks.\nAdjust\u00a0each\u00a0caller\u00a0to\u00a0use\u00a0the\u00a0new\u00a0function,\u00a0testing\u00a0after\u00a0each\u00a0change.\nThis\u00a0may\u00a0mean\u00a0that\u00a0some\u00a0code\u00a0that\u00a0derives\u00a0the\u00a0parameter\u00a0isn\u2019t\u00a0needed,\u00a0so\u00a0can\u00a0fall\nto\u00a0Remove\u00a0Dead\u00a0Code\u00a0(237).\nOnce\u00a0all\u00a0original\u00a0callers\u00a0have\u00a0been\u00a0changed,\u00a0use\u00a0Inline\u00a0Function\u00a0(115)\u00a0on\u00a0the\u00a0original\nfunction.\nChange\u00a0the\u00a0name\u00a0of\u00a0the\u00a0new\u00a0function\u00a0and\u00a0all\u00a0its\u00a0callers.\nExample\nwww.EBooksWorld.ir\n", "page": 357, "type": "text", "section": "Page 357"}
{"text": "Consider\u00a0a\u00a0room\u00a0monitoring\u00a0system.\u00a0It\u00a0compares\u00a0its\u00a0daily\u00a0temperature\u00a0range\u00a0with\u00a0a\nrange\u00a0in\u00a0a\u00a0predefined\u00a0heating\u00a0plan.\ncaller\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nconst\u00a0low\u00a0=\u00a0aRoom.daysTempRange.low\u037e\nconst\u00a0high\u00a0=\u00a0aRoom.daysTempRange.high\u037e\nif\u00a0(!aPlan.withinRange(low,\u00a0high))\n\u00a0\u00a0alerts.push(\"room\u00a0temperature\u00a0went\u00a0outside\u00a0range\")\u037e\nclass\u00a0HeatingPlan\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nwithinRange(bottom,\u00a0top)\u00a0{\n\u00a0\u00a0return\u00a0(bottom\u00a0>=\u00a0this._temperatureRange.low)\u00a0&&\u00a0(top\u00a0<=\u00a0this._temperatureRang\n}\nInstead\u00a0of\u00a0unpacking\u00a0the\u00a0range\u00a0information\u00a0when\u00a0I\u00a0pass\u00a0it\u00a0in,\u00a0I\u00a0can\u00a0pass\u00a0in\u00a0the\u00a0whole\nrange\u00a0object.\nI\u00a0begin\u00a0by\u00a0stating\u00a0the\u00a0interface\u00a0I\u00a0want\u00a0as\u00a0an\u00a0empty\u00a0function.\nclass\u00a0HeatingPlan\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nxxNEWwithinRange(aNumberRange)\u00a0{\n}\nSince\u00a0I\u00a0intend\u00a0it\u00a0to\u00a0replace\u00a0the\u00a0existing\u00a0withinRange,\u00a0I\u00a0name\u00a0it\u00a0the\u00a0same\u00a0but\u00a0with\u00a0an\neasily\u00a0replaceable\u00a0prefix.\nI\u00a0then\u00a0add\u00a0the\u00a0body\u00a0of\u00a0the\u00a0function,\u00a0which\u00a0relies\u00a0on\u00a0calling\u00a0the\u00a0existing\u00a0withinRange.\nThe\u00a0body\u00a0thus\u00a0consists\u00a0of\u00a0a\u00a0mapping\u00a0from\u00a0the\u00a0new\u00a0parameter\u00a0to\u00a0the\u00a0existing\u00a0ones.\nclass\u00a0HeatingPlan\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nwww.EBooksWorld.ir\n", "page": 358, "type": "text", "section": "Page 358"}
{"text": "xxNEWwithinRange(aNumberRange)\u00a0{\n\u00a0\u00a0return\u00a0this.withinRange(aNumberRange.low,\u00a0aNumberRange.high)\u037e\n}\nNow\u00a0I\u00a0can\u00a0begin\u00a0the\u00a0serious\u00a0work,\u00a0taking\u00a0the\u00a0existing\u00a0function\u00a0calls\u00a0and\u00a0having\u00a0them\ncall\u00a0the\u00a0new\u00a0function.\ncaller\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nconst\u00a0low\u00a0=\u00a0aRoom.daysTempRange.low\u037e\nconst\u00a0high\u00a0=\u00a0aRoom.daysTempRange.high\u037e\nif\u00a0(!aPlan.xxNEWwithinRange(aRoom.daysTempRange))\n\u00a0\u00a0alerts.push(\"room\u00a0temperature\u00a0went\u00a0outside\u00a0range\")\u037e\nWhen\u00a0I\u2019ve\u00a0changed\u00a0the\u00a0calls,\u00a0I\u00a0may\u00a0see\u00a0that\u00a0some\u00a0of\u00a0the\u00a0earlier\u00a0code\u00a0isn\u2019t\u00a0needed\nanymore,\u00a0so\u00a0I\u00a0wield\u00a0Remove\u00a0Dead\u00a0Code\u00a0(237).\ncaller\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nconst\u00a0low\u00a0=\u00a0aRoom.daysTempRange.low\u037e\nconst\u00a0high\u00a0=\u00a0aRoom.daysTempRange.high\u037e\nif\u00a0(!aPlan.xxNEWwithinRange(aRoom.daysTempRange))\n\u00a0\u00a0alerts.push(\"room\u00a0temperature\u00a0went\u00a0outside\u00a0range\")\u037e\nI\u00a0replace\u00a0these\u00a0one\u00a0at\u00a0a\u00a0time,\u00a0testing\u00a0after\u00a0each\u00a0change.\nOnce\u00a0I\u2019ve\u00a0replaced\u00a0them\u00a0all,\u00a0I\u00a0can\u00a0use\u00a0Inline\u00a0Function\u00a0(115)\u00a0on\u00a0the\u00a0original\u00a0function.\nclass\u00a0HeatingPlan\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nxxNEWwithinRange(aNumberRange)\u00a0{\n\u00a0\u00a0return\u00a0(aNumberRange.low\u00a0>=\u00a0this._temperatureRange.low)\u00a0&&\n\u00a0\u00a0\u00a0\u00a0(aNumberRange.high\u00a0<=\u00a0this._temperatureRange.high)\u037e\n}\nAnd\u00a0I\u00a0finally\u00a0remove\u00a0that\u00a0ugly\u00a0prefix\u00a0from\u00a0the\u00a0new\u00a0function\u00a0and\u00a0all\u00a0its\u00a0callers.\u00a0The\u00a0prefix\nwww.EBooksWorld.ir\n", "page": 359, "type": "text", "section": "Page 359"}
{"text": "makes\u00a0it\u00a0a\u00a0simple\u00a0global\u00a0replace,\u00a0even\u00a0if\u00a0I\u00a0don\u2019t\u00a0have\u00a0a\u00a0robust\u00a0rename\u00a0support\u00a0in\u00a0my\neditor.\nclass\u00a0HeatingPlan\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nwithinRange(aNumberRange)\u00a0{\n\u00a0\u00a0return\u00a0(aNumberRange.low\u00a0>=\u00a0this._temperatureRange.low)\u00a0&&\n\u00a0\u00a0\u00a0\u00a0(aNumberRange.high\u00a0<=\u00a0this._temperatureRange.high)\u037e\n}\ncaller\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nif\u00a0(!aPlan.withinRange(aRoom.daysTempRange))\n\u00a0\u00a0alerts.push(\"room\u00a0temperature\u00a0went\u00a0outside\u00a0range\")\u037e\nExample: A Variation to Create the New Function\nIn\u00a0the\u00a0above\u00a0example,\u00a0I\u00a0wrote\u00a0the\u00a0code\u00a0for\u00a0the\u00a0new\u00a0function\u00a0directly.\u00a0Most\u00a0of\u00a0the\u00a0time,\nthat\u2019s\u00a0pretty\u00a0simple\u00a0and\u00a0the\u00a0easiest\u00a0way\u00a0to\u00a0go.\u00a0But\u00a0there\u00a0is\u00a0a\u00a0variation\u00a0on\u00a0this\u00a0that\u2019s\noccasionally\u00a0useful\u2014which\u00a0can\u00a0allow\u00a0me\u00a0to\u00a0compose\u00a0the\u00a0new\u00a0function\u00a0entirely\u00a0from\nrefactorings.\nI\u00a0start\u00a0with\u00a0a\u00a0caller\u00a0of\u00a0the\u00a0existing\u00a0function.\ncaller\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nconst\u00a0low\u00a0=\u00a0aRoom.daysTempRange.low\u037e\nconst\u00a0high\u00a0=\u00a0aRoom.daysTempRange.high\u037e\nif\u00a0(!aPlan.withinRange(low,\u00a0high))\n\u00a0\u00a0alerts.push(\"room\u00a0temperature\u00a0went\u00a0outside\u00a0range\")\u037e\nI\u00a0want\u00a0to\u00a0rearrange\u00a0the\u00a0code\u00a0so\u00a0I\u00a0can\u00a0create\u00a0the\u00a0new\u00a0function\u00a0by\u00a0using\u00a0Extract\u00a0Function\n(106)\u00a0on\u00a0some\u00a0existing\u00a0code.\u00a0The\u00a0caller\u00a0code\u00a0isn\u2019t\u00a0quite\u00a0there\u00a0yet,\u00a0but\u00a0I\u00a0can\u00a0get\u00a0there\u00a0by\nusing\u00a0Extract\u00a0Variable\u00a0(119)\u00a0a\u00a0few\u00a0times.\u00a0First,\u00a0I\u00a0disentangle\u00a0the\u00a0call\u00a0to\u00a0the\u00a0old\u00a0function\nfrom\u00a0the\u00a0conditional.\nwww.EBooksWorld.ir\n", "page": 360, "type": "text", "section": "Page 360"}
{"text": "caller\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nconst\u00a0low\u00a0=\u00a0aRoom.daysTempRange.low\u037e\nconst\u00a0high\u00a0=\u00a0aRoom.daysTempRange.high\u037e\nconst\u00a0isWithinRange\u00a0=\u00a0aPlan.withinRange(low,\u00a0high)\u037e\nif\u00a0(!isWithinRange)\n\u00a0\u00a0alerts.push(\"room\u00a0temperature\u00a0went\u00a0outside\u00a0range\")\u037e\nI\u00a0then\u00a0extract\u00a0the\u00a0input\u00a0parameter.\ncaller\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nconst\u00a0tempRange\u00a0=\u00a0aRoom.daysTempRange\u037e\nconst\u00a0low\u00a0=\u00a0tempRange.low\u037e\nconst\u00a0high\u00a0=\u00a0tempRange.high\u037e\nconst\u00a0isWithinRange\u00a0=\u00a0aPlan.withinRange(low,\u00a0high)\u037e\nif\u00a0(!isWithinRange)\n\u00a0\u00a0alerts.push(\"room\u00a0temperature\u00a0went\u00a0outside\u00a0range\")\u037e\nWith\u00a0that\u00a0done,\u00a0I\u00a0can\u00a0now\u00a0use\u00a0Extract\u00a0Function\u00a0(106)\u00a0to\u00a0create\u00a0the\u00a0new\u00a0function.\ncaller\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nconst\u00a0tempRange\u00a0=\u00a0aRoom.daysTempRange\u037e\nconst\u00a0isWithinRange\u00a0=\u00a0xxNEWwithinRange(aPlan,\u00a0tempRange)\u037e\nif\u00a0(!isWithinRange)\n\u00a0\u00a0alerts.push(\"room\u00a0temperature\u00a0went\u00a0outside\u00a0range\")\u037e\ntop\u00a0level\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0xxNEWwithinRange(aPlan,\u00a0tempRange)\u00a0{\n\u00a0\u00a0const\u00a0low\u00a0=\u00a0tempRange.low\u037e\n\u00a0\u00a0const\u00a0high\u00a0=\u00a0tempRange.high\u037e\n\u00a0\u00a0const\u00a0isWithinRange\u00a0=\u00a0aPlan.withinRange(low,\u00a0high)\u037e\n\u00a0\u00a0return\u00a0isWithinRange\u037e\n}\nwww.EBooksWorld.ir\n", "page": 361, "type": "text", "section": "Page 361"}
{"text": "Since\u00a0the\u00a0original\u00a0function\u00a0is\u00a0in\u00a0a\u00a0different\u00a0context\u00a0(the\u00a0HeatingPlan\u00a0class),\u00a0I\u00a0need\u00a0to\nuse\u00a0Move\u00a0Function\u00a0(198).\ncaller\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nconst\u00a0tempRange\u00a0=\u00a0aRoom.daysTempRange\u037e\nconst\u00a0isWithinRange\u00a0=\u00a0aPlan.xxNEWwithinRange(tempRange)\u037e\nif\u00a0(!isWithinRange)\n\u00a0\u00a0alerts.push(\"room\u00a0temperature\u00a0went\u00a0outside\u00a0range\")\u037e\nclass\u00a0HeatingPlan\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nxxNEWwithinRange(tempRange)\u00a0{\n\u00a0\u00a0const\u00a0low\u00a0=\u00a0tempRange.low\u037e\n\u00a0\u00a0const\u00a0high\u00a0=\u00a0tempRange.high\u037e\n\u00a0\u00a0const\u00a0isWithinRange\u00a0=\u00a0this.withinRange(low,\u00a0high)\u037e\n\u00a0\u00a0return\u00a0isWithinRange\u037e\n}\nI\u00a0then\u00a0continue\u00a0as\u00a0before,\u00a0replacing\u00a0other\u00a0callers\u00a0and\u00a0inlining\u00a0the\u00a0old\u00a0function\u00a0into\u00a0the\nnew\u00a0one.\u00a0I\u00a0would\u00a0also\u00a0inline\u00a0the\u00a0variables\u00a0I\u00a0extracted\u00a0to\u00a0provide\u00a0the\u00a0clean\u00a0separation\u00a0for\nextracting\u00a0the\u00a0new\u00a0function.\nBecause\u00a0this\u00a0variation\u00a0is\u00a0entirely\u00a0composed\u00a0of\u00a0refactorings,\u00a0it\u2019s\u00a0particularly\u00a0handy\u00a0when\nI\u00a0have\u00a0a\u00a0refactoring\u00a0tool\u00a0with\u00a0robust\u00a0extract\u00a0and\u00a0inline\u00a0operations.\nREPLACE PARAMETER WITH QUERY\nformerly:\u00a0Replace\u00a0Parameter\u00a0with\u00a0Method\ninverse\u00a0of:\u00a0Replace\u00a0Query\u00a0with\u00a0Parameter\u00a0(327)\nwww.EBooksWorld.ir\n", "page": 362, "type": "text", "section": "Page 362"}
{"text": "Motivation\nThe\u00a0parameter\u00a0list\u00a0to\u00a0a\u00a0function\u00a0should\u00a0summarize\u00a0the\u00a0points\u00a0of\u00a0variability\u00a0of\u00a0that\nfunction,\u00a0indicating\u00a0the\u00a0primary\u00a0ways\u00a0in\u00a0which\u00a0that\u00a0function\u00a0may\u00a0behave\u00a0differently.\u00a0As\nwith\u00a0any\u00a0statement\u00a0in\u00a0code,\u00a0it\u2019s\u00a0good\u00a0to\u00a0avoid\u00a0any\u00a0duplication,\u00a0and\u00a0it\u2019s\u00a0easier\u00a0to\nunderstand\u00a0if\u00a0the\u00a0parameter\u00a0list\u00a0is\u00a0short.\nIf\u00a0a\u00a0call\u00a0passes\u00a0in\u00a0a\u00a0value\u00a0that\u00a0the\u00a0function\u00a0can\u00a0just\u00a0as\u00a0easily\u00a0determine\u00a0for\u00a0itself,\u00a0that\u2019s\u00a0a\nform\u00a0of\u00a0duplication\u2014one\u00a0that\u00a0unnecessarily\u00a0complicates\u00a0the\u00a0caller\u00a0which\u00a0has\u00a0to\ndetermine\u00a0the\u00a0value\u00a0of\u00a0a\u00a0parameter\u00a0when\u00a0it\u00a0could\u00a0be\u00a0freed\u00a0from\u00a0that\u00a0work.\nThe\u00a0limit\u00a0on\u00a0this\u00a0is\u00a0suggested\u00a0by\u00a0the\u00a0phrase\u00a0\u201cjust\u00a0as\u00a0easily.\u201d\u00a0By\u00a0removing\u00a0the\u00a0parameter,\nI\u2019m\u00a0shifting\u00a0the\u00a0responsibility\u00a0for\u00a0determining\u00a0the\u00a0parameter\u00a0value.\u00a0When\u00a0the\nparameter\u00a0is\u00a0present,\u00a0determining\u00a0its\u00a0value\u00a0is\u00a0the\u00a0caller\u2019s\u00a0responsibility\u037e\u00a0otherwise,\u00a0that\nresponsibility\u00a0shifts\u00a0to\u00a0the\u00a0function\u00a0body.\u00a0My\u00a0usual\u00a0habit\u00a0is\u00a0to\u00a0simplify\u00a0life\u00a0for\u00a0callers,\nwhich\u00a0implies\u00a0moving\u00a0responsibility\u00a0to\u00a0the\u00a0function\u00a0body\u2014but\u00a0only\u00a0if\u00a0that\nresponsibility\u00a0is\u00a0appropriate\u00a0there.\nThe\u00a0most\u00a0common\u00a0reason\u00a0to\u00a0avoid\u00a0Replace\u00a0Parameter\u00a0with\u00a0Query\u00a0is\u00a0if\u00a0removing\u00a0the\nparameter\u00a0adds\u00a0an\u00a0unwanted\u00a0dependency\u00a0to\u00a0the\u00a0function\u00a0body\u2014forcing\u00a0it\u00a0to\u00a0access\u00a0a\nprogram\u00a0element\u00a0that\u00a0I\u2019d\u00a0rather\u00a0it\u00a0remained\u00a0ignorant\u00a0of.\u00a0This\u00a0may\u00a0be\u00a0a\u00a0new\ndependency,\u00a0or\u00a0an\u00a0existing\u00a0one\u00a0that\u00a0I\u2019d\u00a0like\u00a0to\u00a0remove.\u00a0Usually\u00a0this\u00a0comes\u00a0up\u00a0where\u00a0I\u2019d\nneed\u00a0to\u00a0add\u00a0a\u00a0problematic\u00a0function\u00a0call\u00a0to\u00a0the\u00a0function\u00a0body,\u00a0or\u00a0access\u00a0something\nwithin\u00a0a\u00a0receiver\u00a0object\u00a0that\u00a0I\u2019d\u00a0prefer\u00a0to\u00a0move\u00a0out\u00a0later.\nThe\u00a0safest\u00a0case\u00a0for\u00a0Replace\u00a0Parameter\u00a0with\u00a0Query\u00a0is\u00a0when\u00a0the\u00a0value\u00a0of\u00a0the\u00a0parameter\u00a0I\nwww.EBooksWorld.ir\n", "page": 363, "type": "text", "section": "Page 363"}
{"text": "want\u00a0to\u00a0remove\u00a0is\u00a0determined\u00a0merely\u00a0by\u00a0querying\u00a0another\u00a0parameter\u00a0in\u00a0the\u00a0list.\u00a0There\u2019s\nrarely\u00a0any\u00a0point\u00a0in\u00a0passing\u00a0two\u00a0parameters\u00a0if\u00a0one\u00a0can\u00a0be\u00a0determined\u00a0from\u00a0the\u00a0other.\nOne\u00a0thing\u00a0to\u00a0watch\u00a0out\u00a0for\u00a0is\u00a0if\u00a0the\u00a0function\u00a0I\u2019m\u00a0looking\u00a0at\u00a0has\u00a0referential\u00a0transparency\n\u2014that\u00a0is,\u00a0if\u00a0I\u00a0can\u00a0be\u00a0sure\u00a0that\u00a0it\u00a0will\u00a0behave\u00a0the\u00a0same\u00a0way\u00a0whenever\u00a0it\u2019s\u00a0called\u00a0with\u00a0the\nsame\u00a0parameter\u00a0values.\u00a0Such\u00a0functions\u00a0are\u00a0much\u00a0easier\u00a0to\u00a0reason\u00a0about\u00a0and\u00a0test,\u00a0and\u00a0I\ndon\u2019t\u00a0want\u00a0to\u00a0alter\u00a0them\u00a0to\u00a0lose\u00a0that\u00a0property.\u00a0So\u00a0I\u00a0wouldn\u2019t\u00a0replace\u00a0a\u00a0parameter\u00a0with\nan\u00a0access\u00a0to\u00a0a\u00a0mutable\u00a0global\u00a0variable.\nMechanics\nIf\u00a0necessary,\u00a0use\u00a0Extract\u00a0Function\u00a0(106)\u00a0on\u00a0the\u00a0calculation\u00a0of\u00a0the\u00a0parameter.\nReplace\u00a0references\u00a0to\u00a0the\u00a0parameter\u00a0in\u00a0the\u00a0function\u00a0body\u00a0with\u00a0references\u00a0to\u00a0the\nexpression\u00a0that\u00a0yields\u00a0the\u00a0parameter.\u00a0Test\u00a0after\u00a0each\u00a0change.\nUse\u00a0Change\u00a0Function\u00a0Declaration\u00a0(124)\u00a0to\u00a0remove\u00a0the\u00a0parameter.\nExample\nI\u00a0most\u00a0often\u00a0use\u00a0Replace\u00a0Parameter\u00a0with\u00a0Query\u00a0when\u00a0I\u2019ve\u00a0done\u00a0some\u00a0other\u00a0refactorings\nthat\u00a0make\u00a0a\u00a0parameter\u00a0no\u00a0longer\u00a0needed.\u00a0Consider\u00a0this\u00a0code.\nclass\u00a0Order\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nget\u00a0finalPrice()\u00a0{\n\u00a0\u00a0const\u00a0basePrice\u00a0=\u00a0this.quantity\u00a0*\u00a0this.itemPrice\u037e\n\u00a0\u00a0let\u00a0discountLevel\u037e\n\u00a0\u00a0if\u00a0(this.quantity\u00a0>\u00a0100)\u00a0discountLevel\u00a0=\u00a02\u037e\n\u00a0\u00a0else\u00a0discountLevel\u00a0=\u00a01\u037e\n\u00a0\u00a0return\u00a0this.discountedPrice(basePrice,\u00a0discountLevel)\u037e\n}\ndiscountedPrice(basePrice,\u00a0discountLevel)\u00a0{\n\u00a0\u00a0switch\u00a0(discountLevel)\u00a0{\n\u00a0\u00a0\u00a0\u00a0case\u00a01:\u00a0return\u00a0basePrice\u00a0*\u00a00.95\u037e\n\u00a0\u00a0\u00a0\u00a0case\u00a02:\u00a0return\u00a0basePrice\u00a0*\u00a00.9\u037e\n\u00a0\u00a0}\n}\nWhen\u00a0I\u2019m\u00a0simplifying\u00a0a\u00a0function,\u00a0I\u2019m\u00a0keen\u00a0to\u00a0apply\u00a0Replace\u00a0Temp\u00a0with\u00a0Query\u00a0(178),\nwhich\u00a0would\u00a0lead\u00a0me\u00a0to\nwww.EBooksWorld.ir\n", "page": 364, "type": "text", "section": "Page 364"}
{"text": "class\u00a0Order\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nget\u00a0finalPrice()\u00a0{\n\u00a0\u00a0const\u00a0basePrice\u00a0=\u00a0this.quantity\u00a0*\u00a0this.itemPrice\u037e\n\u00a0\u00a0return\u00a0this.discountedPrice(basePrice,\u00a0this.discountLevel)\u037e\n}\nget\u00a0discountLevel()\u00a0{\n\u00a0\u00a0return\u00a0(this.quantity\u00a0>\u00a0100)\u00a0?\u00a02\u00a0:\u00a01\u037e\n}\nOnce\u00a0I\u2019ve\u00a0done\u00a0this,\u00a0there\u2019s\u00a0no\u00a0need\u00a0to\u00a0pass\u00a0the\u00a0result\u00a0of\u00a0discountLevel\u00a0to\ndiscountedPrice\u2014it\u00a0can\u00a0just\u00a0as\u00a0easily\u00a0make\u00a0the\u00a0call\u00a0itself.\nI\u00a0replace\u00a0any\u00a0reference\u00a0to\u00a0the\u00a0parameter\u00a0with\u00a0a\u00a0call\u00a0to\u00a0the\u00a0method\u00a0instead.\nclass\u00a0Order\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\ndiscountedPrice(basePrice,\u00a0discountLevel)\u00a0{\n\u00a0\u00a0switch\u00a0(this.discountLevel)\u00a0{\n\u00a0\u00a0\u00a0\u00a0case\u00a01:\u00a0return\u00a0basePrice\u00a0*\u00a00.95\u037e\n\u00a0\u00a0\u00a0\u00a0case\u00a02:\u00a0return\u00a0basePrice\u00a0*\u00a00.9\u037e\n\u00a0\u00a0}\n}\nI\u00a0can\u00a0then\u00a0use\u00a0Change\u00a0Function\u00a0Declaration\u00a0(124)\u00a0to\u00a0remove\u00a0the\u00a0parameter.\nclass\u00a0Order\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nget\u00a0finalPrice()\u00a0{\n\u00a0\u00a0const\u00a0basePrice\u00a0=\u00a0this.quantity\u00a0*\u00a0this.itemPrice\u037e\n\u00a0\u00a0return\u00a0this.discountedPrice(basePrice,\u00a0this.discountLevel)\u037e\n}\ndiscountedPrice(basePrice,\u00a0discountLevel)\u00a0{\n\u00a0\u00a0switch\u00a0(this.discountLevel)\u00a0{\n\u00a0\u00a0\u00a0\u00a0case\u00a01:\u00a0return\u00a0basePrice\u00a0*\u00a00.95\u037e\n\u00a0\u00a0\u00a0\u00a0case\u00a02:\u00a0return\u00a0basePrice\u00a0*\u00a00.9\u037e\n\u00a0\u00a0}\n}\nwww.EBooksWorld.ir\n", "page": 365, "type": "text", "section": "Page 365"}
{"text": "REPLACE QUERY WITH PARAMETER\ninverse\u00a0of:\u00a0Replace\u00a0Parameter\u00a0with\u00a0Query\u00a0(324)\nMotivation\nWhen\u00a0looking\u00a0through\u00a0a\u00a0function\u2019s\u00a0body,\u00a0I\u00a0sometimes\u00a0see\u00a0references\u00a0to\u00a0something\u00a0in\nthe\u00a0function\u2019s\u00a0scope\u00a0that\u00a0I\u2019m\u00a0not\u00a0happy\u00a0with.\u00a0This\u00a0might\u00a0be\u00a0a\u00a0reference\u00a0to\u00a0a\u00a0global\nvariable,\u00a0or\u00a0to\u00a0an\u00a0element\u00a0in\u00a0the\u00a0same\u00a0module\u00a0that\u00a0I\u00a0intend\u00a0to\u00a0move\u00a0away.\u00a0To\u00a0resolve\nthis,\u00a0I\u00a0need\u00a0to\u00a0replace\u00a0the\u00a0internal\u00a0reference\u00a0with\u00a0a\u00a0parameter,\u00a0shifting\u00a0the\nresponsibility\u00a0of\u00a0resolving\u00a0the\u00a0reference\u00a0to\u00a0the\u00a0caller\u00a0of\u00a0the\u00a0function.\nMost\u00a0of\u00a0these\u00a0cases\u00a0are\u00a0due\u00a0to\u00a0my\u00a0wish\u00a0to\u00a0alter\u00a0the\u00a0dependency\u00a0relationships\u00a0in\u00a0the\u00a0code\n\u2014to\u00a0make\u00a0the\u00a0target\u00a0function\u00a0no\u00a0longer\u00a0dependent\u00a0on\u00a0the\u00a0element\u00a0I\u00a0want\u00a0to\nparameterize.\u00a0There\u2019s\u00a0a\u00a0tension\u00a0here\u00a0between\u00a0converting\u00a0everything\u00a0to\u00a0parameters,\nwhich\u00a0results\u00a0in\u00a0long\u00a0repetitive\u00a0parameter\u00a0lists,\u00a0and\u00a0sharing\u00a0a\u00a0lot\u00a0of\u00a0scope\u00a0which\u00a0can\nlead\u00a0to\u00a0a\u00a0lot\u00a0of\u00a0coupling\u00a0between\u00a0functions.\u00a0Like\u00a0most\u00a0tricky\u00a0decisions,\u00a0it\u2019s\u00a0not\nsomething\u00a0I\u00a0can\u00a0reliably\u00a0get\u00a0right,\u00a0so\u00a0it\u2019s\u00a0important\u00a0that\u00a0I\u00a0can\u00a0reliably\u00a0change\u00a0things\u00a0so\nthe\u00a0program\u00a0can\u00a0take\u00a0advantage\u00a0of\u00a0my\u00a0increasing\u00a0understanding.\nIt\u2019s\u00a0easier\u00a0to\u00a0reason\u00a0about\u00a0a\u00a0function\u00a0that\u00a0will\u00a0always\u00a0give\u00a0the\u00a0same\u00a0result\u00a0when\u00a0called\nwith\u00a0same\u00a0parameter\u00a0values\u2014this\u00a0is\u00a0called\u00a0referential\u00a0transparency.\u00a0If\u00a0a\u00a0function\naccesses\u00a0some\u00a0element\u00a0in\u00a0its\u00a0scope\u00a0that\u00a0isn\u2019t\u00a0referentially\u00a0transparent,\u00a0then\u00a0the\nwww.EBooksWorld.ir\n", "page": 366, "type": "text", "section": "Page 366"}
{"text": "containing\u00a0function\u00a0also\u00a0lacks\u00a0referential\u00a0transparency.\u00a0I\u00a0can\u00a0fix\u00a0that\u00a0by\u00a0moving\u00a0that\nelement\u00a0to\u00a0a\u00a0parameter.\u00a0Although\u00a0such\u00a0a\u00a0move\u00a0will\u00a0shift\u00a0responsibility\u00a0to\u00a0the\u00a0caller,\nthere\u00a0is\u00a0often\u00a0a\u00a0lot\u00a0to\u00a0be\u00a0gained\u00a0by\u00a0creating\u00a0clear\u00a0modules\u00a0with\u00a0referential\u00a0transparency.\nA\u00a0common\u00a0pattern\u00a0is\u00a0to\u00a0have\u00a0modules\u00a0consisting\u00a0of\u00a0pure\u00a0functions\u00a0which\u00a0are\u00a0wrapped\nby\u00a0logic\u00a0that\u00a0handles\u00a0the\u00a0I/O\u00a0and\u00a0other\u00a0variable\u00a0elements\u00a0of\u00a0a\u00a0program.\u00a0I\u00a0can\u00a0use\nReplace\u00a0Query\u00a0with\u00a0Parameter\u00a0to\u00a0purify\u00a0parts\u00a0of\u00a0a\u00a0program,\u00a0making\u00a0those\u00a0parts\u00a0easier\nto\u00a0test\u00a0and\u00a0reason\u00a0about.\nBut\u00a0Replace\u00a0Query\u00a0with\u00a0Parameter\u00a0isn\u2019t\u00a0just\u00a0a\u00a0bag\u00a0of\u00a0benefits.\u00a0By\u00a0moving\u00a0a\u00a0query\u00a0to\u00a0a\nparameter,\u00a0I\u00a0force\u00a0my\u00a0caller\u00a0to\u00a0figure\u00a0out\u00a0how\u00a0to\u00a0provide\u00a0this\u00a0value.\u00a0This\u00a0complicates\nlife\u00a0for\u00a0callers\u00a0of\u00a0the\u00a0functions,\u00a0and\u00a0my\u00a0usual\u00a0bias\u00a0is\u00a0to\u00a0design\u00a0interfaces\u00a0that\u00a0make\u00a0life\neasier\u00a0for\u00a0their\u00a0consumers.\u00a0In\u00a0the\u00a0end,\u00a0it\u00a0boils\u00a0down\u00a0to\u00a0allocation\u00a0of\u00a0responsibility\naround\u00a0the\u00a0program,\u00a0and\u00a0that\u2019s\u00a0a\u00a0decision\u00a0that\u2019s\u00a0neither\u00a0easy\u00a0nor\u00a0immutable\u2014which\u00a0is\nwhy\u00a0this\u00a0refactoring\u00a0(and\u00a0its\u00a0inverse)\u00a0is\u00a0one\u00a0that\u00a0I\u00a0need\u00a0to\u00a0be\u00a0very\u00a0familiar\u00a0with.\nMechanics\nUse\u00a0Extract\u00a0Variable\u00a0(119)\u00a0on\u00a0the\u00a0query\u00a0code\u00a0to\u00a0separate\u00a0it\u00a0from\u00a0the\u00a0rest\u00a0of\u00a0the\nfunction\u00a0body.\nApply\u00a0Extract\u00a0Function\u00a0(106)\u00a0to\u00a0the\u00a0body\u00a0code\u00a0that\u00a0isn\u2019t\u00a0the\u00a0call\u00a0to\u00a0the\u00a0query.\nGive\u00a0the\u00a0new\u00a0function\u00a0an\u00a0easily\u00a0searchable\u00a0name,\u00a0for\u00a0later\u00a0renaming.\nUse\u00a0Inline\u00a0Variable\u00a0(123)\u00a0to\u00a0get\u00a0rid\u00a0of\u00a0the\u00a0variable\u00a0you\u00a0just\u00a0created.\nApply\u00a0Inline\u00a0Function\u00a0(115)\u00a0to\u00a0the\u00a0original\u00a0function.\nRename\u00a0the\u00a0new\u00a0function\u00a0to\u00a0that\u00a0of\u00a0the\u00a0original.\nExample\nConsider\u00a0a\u00a0simple,\u00a0yet\u00a0annoying,\u00a0control\u00a0system\u00a0for\u00a0temperature.\u00a0It\u00a0allows\u00a0the\u00a0user\u00a0to\nselect\u00a0a\u00a0temperature\u00a0on\u00a0a\u00a0thermostat\u2014but\u00a0only\u00a0sets\u00a0the\u00a0target\u00a0temperature\u00a0within\u00a0a\nrange\u00a0determined\u00a0by\u00a0a\u00a0heating\u00a0plan.\nclass\u00a0HeatingPlan\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nget\u00a0targetTemperature()\u00a0{\n\u00a0\u00a0if\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0(thermostat.selectedTemperature\u00a0>\u00a0\u00a0this._max)\u00a0return\u00a0this._max\u037e\nwww.EBooksWorld.ir\n", "page": 367, "type": "text", "section": "Page 367"}
{"text": "\u00a0\u00a0else\u00a0if\u00a0(thermostat.selectedTemperature\u00a0<\u00a0\u00a0this._min)\u00a0return\u00a0this._min\u037e\n\u00a0\u00a0else\u00a0return\u00a0thermostat.selectedTemperature\u037e\n}\ncaller\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nif\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0(thePlan.targetTemperature\u00a0>\u00a0thermostat.currentTemperature)\u00a0setToHeat()\u037e\nelse\u00a0if\u00a0(thePlan.targetTemperature\u00a0<\u00a0thermostat.currentTemperature)\u00a0setToCool()\u037e\nelse\u00a0setOff()\u037e\nAs\u00a0a\u00a0user\u00a0of\u00a0such\u00a0a\u00a0system,\u00a0I\u00a0might\u00a0be\u00a0annoyed\u00a0to\u00a0have\u00a0my\u00a0desires\u00a0overridden\u00a0by\u00a0the\nheating\u00a0plan\u00a0rules,\u00a0but\u00a0as\u00a0a\u00a0programmer\u00a0I\u00a0might\u00a0be\u00a0more\u00a0concerned\u00a0about\u00a0how\u00a0the\ntargetTemperature\u00a0function\u00a0has\u00a0a\u00a0dependency\u00a0on\u00a0a\u00a0global\u00a0thermostat\u00a0object.\u00a0I\u00a0can\nbreak\u00a0this\u00a0dependency\u00a0by\u00a0moving\u00a0it\u00a0to\u00a0a\u00a0parameter.\nMy\u00a0first\u00a0step\u00a0is\u00a0to\u00a0use\u00a0Extract\u00a0Variable\u00a0(119)\u00a0on\u00a0the\u00a0parameter\u00a0that\u00a0I\u00a0want\u00a0to\u00a0have\u00a0in\u00a0my\nfunction.\nclass\u00a0HeatingPlan\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nget\u00a0targetTemperature()\u00a0{\n\u00a0\u00a0const\u00a0selectedTemperature\u00a0=\u00a0thermostat.selectedTemperature\u037e\n\u00a0\u00a0if\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0(selectedTemperature\u00a0>\u00a0\u00a0this._max)\u00a0return\u00a0this._max\u037e\n\u00a0\u00a0else\u00a0if\u00a0(selectedTemperature\u00a0<\u00a0\u00a0this._min)\u00a0return\u00a0this._min\u037e\n\u00a0\u00a0else\u00a0return\u00a0selectedTemperature\u037e\n}\nThat\u00a0makes\u00a0it\u00a0easy\u00a0to\u00a0apply\u00a0Extract\u00a0Function\u00a0(106)\u00a0on\u00a0the\u00a0entire\u00a0body\u00a0of\u00a0the\u00a0function\nexcept\u00a0for\u00a0the\u00a0bit\u00a0that\u00a0figures\u00a0out\u00a0the\u00a0parameter.\nclass\u00a0HeatingPlan\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nget\u00a0targetTemperature()\u00a0{\n\u00a0\u00a0const\u00a0selectedTemperature\u00a0=\u00a0thermostat.selectedTemperature\u037e\n\u00a0\u00a0return\u00a0this.xxNEWtargetTemperature(selectedTemperature)\u037e\n}\nwww.EBooksWorld.ir\n", "page": 368, "type": "text", "section": "Page 368"}
{"text": "xxNEWtargetTemperature(selectedTemperature)\u00a0{\n\u00a0\u00a0if\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0(selectedTemperature\u00a0>\u00a0\u00a0this._max)\u00a0return\u00a0this._max\u037e\n\u00a0\u00a0else\u00a0if\u00a0(selectedTemperature\u00a0<\u00a0\u00a0this._min)\u00a0return\u00a0this._min\u037e\n\u00a0\u00a0else\u00a0return\u00a0selectedTemperature\u037e\n}\nI\u00a0then\u00a0inline\u00a0the\u00a0variable\u00a0I\u00a0just\u00a0extracted,\u00a0which\u00a0leaves\u00a0the\u00a0function\u00a0as\u00a0a\u00a0simple\u00a0call.\nclass\u00a0HeatingPlan\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nget\u00a0targetTemperature()\u00a0{\n\u00a0\u00a0return\u00a0this.xxNEWtargetTemperature(thermostat.selectedTemperature)\u037e\n}\nI\u00a0can\u00a0now\u00a0use\u00a0Inline\u00a0Function\u00a0(115)\u00a0on\u00a0this\u00a0method.\ncaller\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nif\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0(thePlan.xxNEWtargetTemperature(thermostat.selectedTemperature)\u00a0>\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0thermostat.currentTemperature)\n\u00a0\u00a0setToHeat()\u037e\nelse\u00a0if\u00a0(thePlan.xxNEWtargetTemperature(thermostat.selectedTemperature)\u00a0<\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0thermostat.currentTemperature)\n\u00a0\u00a0setToCool()\u037e\nelse\n\u00a0\u00a0setOff()\u037e\nI\u00a0take\u00a0advantage\u00a0of\u00a0the\u00a0easily\u00a0searchable\u00a0name\u00a0of\u00a0the\u00a0new\u00a0function\u00a0to\u00a0rename\u00a0it\u00a0by\nremoving\u00a0the\u00a0prefix.\ncaller\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nif\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0(thePlan.targetTemperature(thermostat.selectedTemperature)\u00a0>\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0thermostat.currentTemperature)\n\u00a0\u00a0setToHeat()\u037e\nelse\u00a0if\u00a0(thePlan.targetTemperature(thermostat.selectedTemperature)\u00a0<\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0thermostat.currentTemperature)\nwww.EBooksWorld.ir\n", "page": 369, "type": "text", "section": "Page 369"}
{"text": "\u00a0\u00a0setToCool()\u037e\nelse\n\u00a0\u00a0setOff()\u037e\nclass\u00a0HeatingPlan\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\ntargetTemperature(selectedTemperature)\u00a0{\n\u00a0\u00a0if\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0(selectedTemperature\u00a0>\u00a0\u00a0this._max)\u00a0return\u00a0this._max\u037e\n\u00a0\u00a0else\u00a0if\u00a0(selectedTemperature\u00a0<\u00a0\u00a0this._min)\u00a0return\u00a0this._min\u037e\n\u00a0\u00a0else\u00a0return\u00a0selectedTemperature\u037e\n}\nAs\u00a0is\u00a0often\u00a0the\u00a0case\u00a0with\u00a0this\u00a0refactoring,\u00a0the\u00a0calling\u00a0code\u00a0looks\u00a0more\u00a0unwieldy\u00a0than\nbefore.\u00a0Moving\u00a0a\u00a0dependency\u00a0out\u00a0of\u00a0a\u00a0module\u00a0pushes\u00a0the\u00a0responsibility\u00a0of\u00a0dealing\u00a0with\nthat\u00a0dependency\u00a0back\u00a0to\u00a0the\u00a0caller.\u00a0That\u2019s\u00a0the\u00a0trade\u00adoff\u00a0for\u00a0the\u00a0reduced\u00a0coupling.\nBut\u00a0removing\u00a0the\u00a0coupling\u00a0to\u00a0the\u00a0thermostat\u00a0object\u00a0isn\u2019t\u00a0the\u00a0only\u00a0gain\u00a0I\u2019ve\u00a0made\u00a0with\nthis\u00a0refactoring.\u00a0The\u00a0HeatingPlan\u00a0class\u00a0is\u00a0immutable\u2014its\u00a0fields\u00a0are\u00a0set\u00a0in\u00a0the\nconstructor\u00a0with\u00a0no\u00a0methods\u00a0to\u00a0alter\u00a0them.\u00a0(I\u2019ll\u00a0save\u00a0you\u00a0the\u00a0effort\u00a0of\u00a0looking\u00a0at\u00a0the\nwhole\u00a0class\u037e\u00a0just\u00a0trust\u00a0me\u00a0on\u00a0this.)\u00a0Given\u00a0an\u00a0immutable\u00a0heating\u00a0plan,\u00a0by\u00a0moving\u00a0the\nthermostat\u00a0reference\u00a0out\u00a0of\u00a0the\u00a0function\u00a0body\u00a0I\u2019ve\u00a0also\u00a0made\u00a0targetTemperature\nreferentially\u00a0transparent.\u00a0Every\u00a0time\u00a0I\u00a0call\u00a0targetTemperature\u00a0on\u00a0the\u00a0same\u00a0object,\nwith\u00a0the\u00a0same\u00a0argument,\u00a0I\u00a0will\u00a0get\u00a0the\u00a0same\u00a0result.\u00a0If\u00a0all\u00a0the\u00a0methods\u00a0of\u00a0the\u00a0heating\nplan\u00a0have\u00a0referential\u00a0transparency,\u00a0that\u00a0makes\u00a0this\u00a0class\u00a0much\u00a0easier\u00a0to\u00a0test\u00a0and\u00a0reason\nabout.\nA\u00a0problem\u00a0with\u00a0JavaScript\u2019s\u00a0class\u00a0model\u00a0is\u00a0that\u00a0it\u2019s\u00a0impossible\u00a0to\u00a0enforce\u00a0an\u00a0immutable\nclass\u2014there\u2019s\u00a0always\u00a0a\u00a0way\u00a0to\u00a0get\u00a0at\u00a0an\u00a0object\u2019s\u00a0data.\u00a0But\u00a0writing\u00a0a\u00a0class\u00a0to\u00a0signal\u00a0and\nencourage\u00a0immutability\u00a0is\u00a0often\u00a0good\u00a0enough.\u00a0Creating\u00a0classes\u00a0that\u00a0have\u00a0this\ncharacteristic\u00a0is\u00a0often\u00a0a\u00a0sound\u00a0strategy\u00a0and\u00a0Replace\u00a0Query\u00a0with\u00a0Parameter\u00a0is\u00a0a\u00a0handy\ntool\u00a0for\u00a0doing\u00a0this.\nREMOVE SETTING METHOD\nwww.EBooksWorld.ir\n", "page": 370, "type": "text", "section": "Page 370"}
{"text": "Motivation\nProviding\u00a0a\u00a0setting\u00a0method\u00a0indicates\u00a0that\u00a0a\u00a0field\u00a0may\u00a0be\u00a0changed.\u00a0If\u00a0I\u00a0don\u2019t\u00a0want\u00a0that\nfield\u00a0to\u00a0change\u00a0once\u00a0the\u00a0object\u00a0is\u00a0created,\u00a0I\u00a0don\u2019t\u00a0provide\u00a0a\u00a0setting\u00a0method\u00a0(and\u00a0make\nthe\u00a0field\u00a0immutable).\u00a0That\u00a0way,\u00a0the\u00a0field\u00a0is\u00a0set\u00a0only\u00a0in\u00a0the\u00a0constructor,\u00a0my\u00a0intention\u00a0to\nhave\u00a0it\u00a0not\u00a0change\u00a0is\u00a0clear,\u00a0and\u00a0I\u00a0usually\u00a0remove\u00a0the\u00a0very\u00a0possibility\u00a0that\u00a0the\u00a0field\u00a0will\nchange.\nThere\u2019s\u00a0a\u00a0couple\u00a0of\u00a0common\u00a0cases\u00a0where\u00a0this\u00a0comes\u00a0up.\u00a0One\u00a0is\u00a0where\u00a0people\u00a0always\u00a0use\naccessor\u00a0methods\u00a0to\u00a0manipulate\u00a0a\u00a0field,\u00a0even\u00a0within\u00a0constructors.\u00a0This\u00a0leads\u00a0to\u00a0the\u00a0only\ncall\u00a0to\u00a0a\u00a0setting\u00a0method\u00a0being\u00a0from\u00a0the\u00a0constructor.\u00a0I\u00a0prefer\u00a0to\u00a0remove\u00a0the\u00a0setting\nmethod\u00a0to\u00a0make\u00a0it\u00a0clear\u00a0that\u00a0updates\u00a0make\u00a0no\u00a0sense\u00a0after\u00a0construction.\nAnother\u00a0case\u00a0is\u00a0where\u00a0the\u00a0object\u00a0is\u00a0created\u00a0by\u00a0clients\u00a0using\u00a0creation\u00a0script\u00a0rather\u00a0than\nby\u00a0a\u00a0simple\u00a0constructor\u00a0call.\u00a0Such\u00a0a\u00a0creation\u00a0script\u00a0starts\u00a0with\u00a0the\u00a0constructor\u00a0call\nfollowed\u00a0by\u00a0a\u00a0sequence\u00a0of\u00a0setter\u00a0method\u00a0calls\u00a0to\u00a0create\u00a0the\u00a0new\u00a0object.\u00a0Once\u00a0the\u00a0script\u00a0is\nfinished,\u00a0we\u00a0don\u2019t\u00a0expect\u00a0the\u00a0new\u00a0object\u00a0to\u00a0change\u00a0some\u00a0(or\u00a0even\u00a0all)\u00a0of\u00a0its\u00a0fields.\u00a0The\nsetters\u00a0are\u00a0only\u00a0expected\u00a0to\u00a0be\u00a0called\u00a0during\u00a0this\u00a0initial\u00a0creation.\u00a0In\u00a0this\u00a0case,\u00a0I\u2019d\u00a0get\u00a0rid\nof\u00a0them\u00a0to\u00a0make\u00a0my\u00a0intentions\u00a0clearer.\nMechanics\nIf\u00a0the\u00a0value\u00a0that\u2019s\u00a0being\u00a0set\u00a0isn\u2019t\u00a0provided\u00a0to\u00a0the\u00a0constructor,\u00a0use\u00a0Change\u00a0Function\nDeclaration\u00a0(124)\u00a0to\u00a0add\u00a0it.\u00a0Add\u00a0a\u00a0call\u00a0to\u00a0the\u00a0setting\u00a0method\u00a0within\u00a0the\u00a0constructor.\nIf\u00a0you\u00a0wish\u00a0to\u00a0remove\u00a0several\u00a0setting\u00a0methods,\u00a0add\u00a0all\u00a0their\u00a0values\u00a0to\u00a0the\nconstructor\u00a0at\u00a0once.\u00a0This\u00a0simplifies\u00a0the\u00a0later\u00a0steps.\nwww.EBooksWorld.ir\n", "page": 371, "type": "text", "section": "Page 371"}
{"text": "Remove\u00a0each\u00a0call\u00a0of\u00a0a\u00a0setting\u00a0method\u00a0outside\u00a0of\u00a0the\u00a0constructor,\u00a0using\u00a0the\u00a0new\nconstructor\u00a0value\u00a0instead.\u00a0Test\u00a0after\u00a0each\u00a0one.\nIf\u00a0you\u00a0can\u2019t\u00a0replace\u00a0the\u00a0call\u00a0to\u00a0the\u00a0setter\u00a0by\u00a0creating\u00a0a\u00a0new\u00a0object\u00a0(because\u00a0you\u00a0are\nupdating\u00a0a\u00a0shared\u00a0reference\u00a0object),\u00a0abandon\u00a0the\u00a0refactoring.\nUse\u00a0Inline\u00a0Function\u00a0(115)\u00a0on\u00a0the\u00a0setting\u00a0method.\u00a0Make\u00a0the\u00a0field\u00a0immutable\u00a0if\npossible.\nTest.\nExample\nI\u00a0have\u00a0a\u00a0simple\u00a0person\u00a0class.\nclass\u00a0Person\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nget\u00a0name()\u00a0\u00a0\u00a0\u00a0{return\u00a0this._name\u037e}\nset\u00a0name(arg)\u00a0{this._name\u00a0=\u00a0arg\u037e}\nget\u00a0id()\u00a0\u00a0\u00a0\u00a0{return\u00a0this._id\u037e}\nset\u00a0id(arg)\u00a0{this._id\u00a0=\u00a0arg\u037e}\nAt\u00a0the\u00a0moment,\u00a0I\u00a0create\u00a0a\u00a0new\u00a0object\u00a0with\u00a0code\u00a0like\u00a0this:\nconst\u00a0martin\u00a0=\u00a0new\u00a0Person()\u037e\nmartin.name\u00a0=\u00a0\"martin\"\u037e\nmartin.id\u00a0=\u00a0\"1234\"\u037e\nThe\u00a0name\u00a0of\u00a0a\u00a0person\u00a0may\u00a0change\u00a0after\u00a0it\u2019s\u00a0created,\u00a0but\u00a0the\u00a0ID\u00a0does\u00a0not.\u00a0To\u00a0make\u00a0this\nclear,\u00a0I\u00a0want\u00a0to\u00a0remove\u00a0the\u00a0setting\u00a0method\u00a0for\u00a0ID.\nI\u00a0still\u00a0need\u00a0to\u00a0set\u00a0the\u00a0ID\u00a0initially,\u00a0so\u00a0I\u2019ll\u00a0use\u00a0Change\u00a0Function\u00a0Declaration\u00a0(124)\u00a0to\u00a0add\u00a0it\nto\u00a0the\u00a0constructor.\nclass\u00a0Person\u2026\nconstructor(id)\u00a0{\n\u00a0\u00a0this.id\u00a0=\u00a0id\u037e\n}\nwww.EBooksWorld.ir\n", "page": 372, "type": "text", "section": "Page 372"}
{"text": "I\u00a0then\u00a0adjust\u00a0the\u00a0creation\u00a0script\u00a0to\u00a0set\u00a0the\u00a0ID\u00a0via\u00a0the\u00a0constructor.\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nconst\u00a0martin\u00a0=\u00a0new\u00a0Person(\"1234\")\u037e\nmartin.name\u00a0=\u00a0\"martin\"\u037e\nmartin.id\u00a0=\u00a0\"1234\"\u037e\nI\u00a0do\u00a0this\u00a0in\u00a0each\u00a0place\u00a0I\u00a0create\u00a0a\u00a0person,\u00a0testing\u00a0after\u00a0each\u00a0change.\nWhen\u00a0they\u00a0are\u00a0all\u00a0done,\u00a0I\u00a0can\u00a0apply\u00a0Inline\u00a0Function\u00a0(115)\u00a0to\u00a0the\u00a0setting\u00a0method.\nclass\u00a0Person\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nconstructor(id)\u00a0{\n\u00a0\u00a0this._id\u00a0=\u00a0id\u037e\n}\nget\u00a0name()\u00a0\u00a0\u00a0\u00a0{return\u00a0this._name\u037e}\nset\u00a0name(arg)\u00a0{this._name\u00a0=\u00a0arg\u037e}\nget\u00a0id()\u00a0\u00a0\u00a0\u00a0{return\u00a0this._id\u037e}\nset\u00a0id(arg)\u00a0{this._id\u00a0=\u00a0arg\u037e}\nREPLACE CONSTRUCTOR WITH FACTORY FUNCTION\nformerly:\u00a0Replace\u00a0Constructor\u00a0with\u00a0Factory\u00a0Method\nMotivation\nMany\u00a0object\u00adoriented\u00a0languages\u00a0have\u00a0a\u00a0special\u00a0constructor\u00a0function\u00a0that\u2019s\u00a0called\u00a0to\nwww.EBooksWorld.ir\n", "page": 373, "type": "text", "section": "Page 373"}
{"text": "initialize\u00a0an\u00a0object.\u00a0Clients\u00a0typically\u00a0call\u00a0this\u00a0constructor\u00a0when\u00a0they\u00a0want\u00a0to\u00a0create\u00a0a\u00a0new\nobject.\u00a0But\u00a0these\u00a0constructors\u00a0often\u00a0come\u00a0with\u00a0awkward\u00a0limitations\u00a0that\u00a0aren\u2019t\u00a0there\u00a0for\nmore\u00a0general\u00a0functions.\u00a0A\u00a0Java\u00a0constructor\u00a0must\u00a0return\u00a0an\u00a0instance\u00a0of\u00a0the\u00a0class\u00a0it\u00a0was\ncalled\u00a0with,\u00a0which\u00a0means\u00a0I\u00a0can\u2019t\u00a0replace\u00a0it\u00a0with\u00a0a\u00a0subclass\u00a0or\u00a0proxy\u00a0depending\u00a0on\u00a0the\nenvironment\u00a0or\u00a0parameters.\u00a0Constructor\u00a0naming\u00a0is\u00a0fixed,\u00a0which\u00a0makes\u00a0it\u00a0impossible\u00a0for\nme\u00a0to\u00a0use\u00a0a\u00a0name\u00a0that\u00a0is\u00a0clearer\u00a0than\u00a0the\u00a0default.\u00a0Constructors\u00a0often\u00a0require\u00a0a\u00a0special\noperator\u00a0to\u00a0invoke\u00a0(\u201cnew\u201d\u00a0in\u00a0many\u00a0languages)\u00a0which\u00a0makes\u00a0them\u00a0difficult\u00a0to\u00a0use\u00a0in\ncontexts\u00a0that\u00a0expect\u00a0normal\u00a0functions.\nA\u00a0factory\u00a0function\u00a0suffers\u00a0from\u00a0no\u00a0such\u00a0limitations.\u00a0It\u00a0will\u00a0likely\u00a0call\u00a0the\u00a0constructor\u00a0as\npart\u00a0of\u00a0its\u00a0implementation,\u00a0but\u00a0I\u00a0can\u00a0freely\u00a0substitute\u00a0something\u00a0else.\nMechanics\nCreate\u00a0a\u00a0factory\u00a0function,\u00a0its\u00a0body\u00a0being\u00a0a\u00a0call\u00a0to\u00a0the\u00a0constructor.\nReplace\u00a0each\u00a0call\u00a0to\u00a0the\u00a0constructor\u00a0with\u00a0a\u00a0call\u00a0to\u00a0the\u00a0factory\u00a0function.\nTest\u00a0after\u00a0each\u00a0change.\nLimit\u00a0the\u00a0constructor\u2019s\u00a0visibility\u00a0as\u00a0much\u00a0as\u00a0possible.\nExample\nA\u00a0quick\u00a0but\u00a0wearisome\u00a0example\u00a0uses\u00a0kinds\u00a0of\u00a0employees.\u00a0Consider\u00a0an\u00a0employee\u00a0class:\nclass\u00a0Employee\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nconstructor\u00a0(name,\u00a0typeCode)\u00a0{\n\u00a0\u00a0this._name\u00a0=\u00a0name\u037e\n\u00a0\u00a0this._typeCode\u00a0=\u00a0typeCode\u037e\n}\nget\u00a0name()\u00a0{return\u00a0this._name\u037e}\nget\u00a0type()\u00a0{\n\u00a0\u00a0return\u00a0Employee.legalTypeCodes[this._typeCode]\u037e\n}\nstatic\u00a0get\u00a0legalTypeCodes()\u00a0{\n\u00a0\u00a0return\u00a0{\"E\":\u00a0\"Engineer\",\u00a0\"M\":\u00a0\"Manager\",\u00a0\"S\":\u00a0\"Salesman\"}\u037e\n}\nThis\u00a0is\u00a0used\u00a0from\nwww.EBooksWorld.ir\n", "page": 374, "type": "text", "section": "Page 374"}
{"text": "caller\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\ncandidate\u00a0=\u00a0new\u00a0Employee(document.name,\u00a0document.empType)\u037e\nand\ncaller\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nconst\u00a0leadEngineer\u00a0=\u00a0new\u00a0Employee(document.leadEngineer,\u00a0'E')\u037e\nMy\u00a0first\u00a0step\u00a0is\u00a0to\u00a0create\u00a0the\u00a0factory\u00a0function.\u00a0Its\u00a0body\u00a0is\u00a0a\u00a0simple\u00a0delegation\u00a0to\u00a0the\nconstructor.\ntop\u00a0level\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0createEmployee(name,\u00a0typeCode)\u00a0{\n\u00a0\u00a0return\u00a0new\u00a0Employee(name,\u00a0typeCode)\u037e\n}\nI\u00a0then\u00a0find\u00a0the\u00a0callers\u00a0of\u00a0the\u00a0constructor\u00a0and\u00a0change\u00a0them,\u00a0one\u00a0at\u00a0a\u00a0time,\u00a0to\u00a0use\u00a0the\nfactory\u00a0function\u00a0instead.\nThe\u00a0first\u00a0one\u00a0is\u00a0obvious:\ncaller\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\ncandidate\u00a0=\u00a0createEmployee(document.name,\u00a0document.empType)\u037e\nWith\u00a0the\u00a0second\u00a0case,\u00a0I\u00a0could\u00a0use\u00a0the\u00a0new\u00a0factory\u00a0function\u00a0like\u00a0this:\ncaller\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nwww.EBooksWorld.ir\n", "page": 375, "type": "text", "section": "Page 375"}
{"text": "const\u00a0leadEngineer\u00a0=\u00a0createEmployee(document.leadEngineer,\u00a0'E')\u037e\nBut\u00a0I\u00a0don\u2019t\u00a0like\u00a0using\u00a0the\u00a0type\u00a0code\u00a0here\u2014it\u2019s\u00a0generally\u00a0a\u00a0bad\u00a0smell\u00a0to\u00a0pass\u00a0a\u00a0code\u00a0as\u00a0a\nliteral\u00a0string.\u00a0So\u00a0I\u00a0prefer\u00a0to\u00a0create\u00a0a\u00a0new\u00a0factory\u00a0function\u00a0that\u00a0embeds\u00a0the\u00a0kind\u00a0of\nemployee\u00a0I\u00a0want\u00a0into\u00a0its\u00a0name.\ncaller\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nconst\u00a0leadEngineer\u00a0=\u00a0createEngineer(document.leadEngineer)\u037e\ntop\u00a0level\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0createEngineer(name)\u00a0{\n\u00a0\u00a0return\u00a0new\u00a0Employee(name,\u00a0'E')\u037e\n}\nREPLACE FUNCTION WITH COMMAND\nformerly:\u00a0Replace\u00a0Method\u00a0with\u00a0Method\u00a0Object\ninverse\u00a0of:\u00a0Replace\u00a0Command\u00a0with\u00a0Function\u00a0(344)\nwww.EBooksWorld.ir\n", "page": 376, "type": "text", "section": "Page 376"}
{"text": "Motivation\nFunctions\u2014either\u00a0freestanding\u00a0or\u00a0attached\u00a0to\u00a0objects\u00a0as\u00a0methods\u2014are\u00a0one\u00a0of\u00a0the\nfundamental\u00a0building\u00a0blocks\u00a0of\u00a0programming.\u00a0But\u00a0there\u00a0are\u00a0times\u00a0when\u00a0it\u2019s\u00a0useful\u00a0to\nencapsulate\u00a0a\u00a0function\u00a0into\u00a0its\u00a0own\u00a0object,\u00a0which\u00a0I\u00a0refer\u00a0to\u00a0as\u00a0a\u00a0\u201ccommand\u00a0object\u201d\u00a0or\nsimply\u00a0a\u00a0command.\u00a0Such\u00a0an\u00a0object\u00a0is\u00a0mostly\u00a0built\u00a0around\u00a0a\u00a0single\u00a0method,\u00a0whose\nrequest\u00a0and\u00a0execution\u00a0is\u00a0the\u00a0purpose\u00a0of\u00a0the\u00a0object.\nA\u00a0command\u00a0offers\u00a0a\u00a0greater\u00a0flexibility\u00a0for\u00a0the\u00a0control\u00a0and\u00a0expression\u00a0of\u00a0a\u00a0function\u00a0than\nthe\u00a0plain\u00a0function\u00a0mechanism.\u00a0Commands\u00a0can\u00a0have\u00a0complimentary\u00a0operations,\u00a0such\u00a0as\nundo.\u00a0I\u00a0can\u00a0provide\u00a0methods\u00a0to\u00a0build\u00a0up\u00a0their\u00a0parameters\u00a0to\u00a0support\u00a0a\u00a0richer\u00a0lifecycle.\u00a0I\ncan\u00a0build\u00a0in\u00a0customizations\u00a0using\u00a0inheritance\u00a0and\u00a0hooks.\u00a0If\u00a0I\u2019m\u00a0working\u00a0in\u00a0a\u00a0language\nwith\u00a0objects\u00a0but\u00a0without\u00a0first\u00adclass\u00a0functions,\u00a0I\u00a0can\u00a0provide\u00a0much\u00a0of\u00a0that\u00a0capability\u00a0by\nusing\u00a0commands\u00a0instead.\u00a0Similarly,\u00a0I\u00a0can\u00a0use\u00a0methods\u00a0and\u00a0fields\u00a0to\u00a0help\u00a0break\u00a0down\u00a0a\ncomplex\u00a0function,\u00a0even\u00a0in\u00a0a\u00a0language\u00a0that\u00a0lacks\u00a0nested\u00a0functions,\u00a0and\u00a0I\u00a0can\u00a0call\u00a0those\nmethods\u00a0directly\u00a0while\u00a0testing\u00a0and\u00a0debugging.\nAll\u00a0these\u00a0are\u00a0good\u00a0reasons\u00a0to\u00a0use\u00a0commands,\u00a0and\u00a0I\u00a0need\u00a0to\u00a0be\u00a0ready\u00a0to\u00a0refactor\nwww.EBooksWorld.ir\n", "page": 377, "type": "text", "section": "Page 377"}
{"text": "functions\u00a0into\u00a0commands\u00a0when\u00a0I\u00a0need\u00a0to.\u00a0But\u00a0we\u00a0must\u00a0not\u00a0forget\u00a0that\u00a0this\u00a0flexibility,\u00a0as\never,\u00a0comes\u00a0at\u00a0a\u00a0price\u00a0paid\u00a0in\u00a0complexity.\u00a0So,\u00a0given\u00a0the\u00a0choice\u00a0between\u00a0a\u00a0first\u00adclass\nfunction\u00a0and\u00a0a\u00a0command,\u00a0I\u2019ll\u00a0pick\u00a0the\u00a0function\u00a095%\u00a0of\u00a0the\u00a0time.\u00a0I\u00a0only\u00a0use\u00a0a\u00a0command\nwhen\u00a0I\u00a0specifically\u00a0need\u00a0a\u00a0facility\u00a0that\u00a0simpler\u00a0approaches\u00a0can\u2019t\u00a0provide.\nLike\u00a0many\u00a0words\u00a0in\u00a0software\u00a0development,\u00a0\u201ccommand\u201d\u00a0is\u00a0rather\u00a0overloaded.\u00a0In\u00a0the\ncontext\u00a0I\u2019m\u00a0using\u00a0it\u00a0here,\u00a0it\u00a0is\u00a0an\u00a0object\u00a0that\u00a0encapsulates\u00a0a\u00a0request,\u00a0following\u00a0the\ncommand\u00a0pattern\u00a0in\u00a0Design\u00a0Patterns\u00a0[gof].\u00a0When\u00a0I\u00a0use\u00a0\u201ccommand\u201d\u00a0in\u00a0this\u00a0sense,\u00a0I\u00a0use\n\u201ccommand\u00a0object\u201d\u00a0to\u00a0set\u00a0the\u00a0context,\u00a0and\u00a0\u201ccommand\u201d\u00a0afterwards.\u00a0The\u00a0word\n\u201ccommand\u201d\u00a0is\u00a0also\u00a0used\u00a0in\u00a0the\u00a0command\u00adquery\u00a0separation\u00a0principle\u00a0[mf\u00adcqs],\u00a0where\u00a0a\ncommand\u00a0is\u00a0an\u00a0object\u00a0method\u00a0that\u00a0changes\u00a0observable\u00a0state.\u00a0I\u2019ve\u00a0always\u00a0tried\u00a0to\u00a0avoid\nusing\u00a0command\u00a0in\u00a0that\u00a0sense,\u00a0preferring\u00a0\u201cmodifier\u201d\u00a0or\u00a0\u201cmutator.\u201d\nMechanics\nCreate\u00a0an\u00a0empty\u00a0class\u00a0for\u00a0the\u00a0function.\u00a0Name\u00a0it\u00a0based\u00a0on\u00a0the\u00a0function.\nUse\u00a0Move\u00a0Function\u00a0(198)\u00a0to\u00a0move\u00a0the\u00a0function\u00a0to\u00a0the\u00a0empty\u00a0class.\nKeep\u00a0the\u00a0original\u00a0function\u00a0as\u00a0a\u00a0forwarding\u00a0function\u00a0until\u00a0at\u00a0least\u00a0the\u00a0end\u00a0of\u00a0the\nrefactoring.\nFollow\u00a0any\u00a0convention\u00a0the\u00a0language\u00a0has\u00a0for\u00a0naming\u00a0commands.\u00a0If\u00a0there\u00a0is\u00a0no\nconvention,\u00a0choose\u00a0a\u00a0generic\u00a0name\u00a0for\u00a0the\u00a0command\u2019s\u00a0execute\u00a0function,\u00a0such\u00a0as\n\u201cexecute\u201d\u00a0or\u00a0\u201ccall\u201d.\nConsider\u00a0making\u00a0a\u00a0field\u00a0for\u00a0each\u00a0argument,\u00a0and\u00a0move\u00a0these\u00a0arguments\u00a0to\u00a0the\nconstructor.\nExample\nThe\u00a0JavaScript\u00a0language\u00a0has\u00a0many\u00a0faults,\u00a0but\u00a0one\u00a0of\u00a0its\u00a0great\u00a0decisions\u00a0was\u00a0to\u00a0make\nfunctions\u00a0first\u00adclass\u00a0entities.\u00a0I\u00a0thus\u00a0don\u2019t\u00a0have\u00a0to\u00a0go\u00a0through\u00a0all\u00a0the\u00a0hoops\u00a0of\u00a0creating\ncommands\u00a0for\u00a0common\u00a0tasks\u00a0that\u00a0I\u00a0need\u00a0to\u00a0do\u00a0in\u00a0languages\u00a0without\u00a0this\u00a0facility.\u00a0But\nthere\u00a0are\u00a0still\u00a0times\u00a0when\u00a0a\u00a0command\u00a0is\u00a0the\u00a0right\u00a0tool\u00a0for\u00a0the\u00a0job.\nOne\u00a0of\u00a0these\u00a0cases\u00a0is\u00a0breaking\u00a0up\u00a0a\u00a0complex\u00a0function\u00a0so\u00a0I\u00a0can\u00a0better\u00a0understand\u00a0and\nmodify\u00a0it.\u00a0To\u00a0really\u00a0show\u00a0the\u00a0value\u00a0of\u00a0this\u00a0refactoring,\u00a0I\u00a0need\u00a0a\u00a0long\u00a0and\u00a0complicated\nfunction\u2014but\u00a0that\u00a0would\u00a0take\u00a0too\u00a0long\u00a0to\u00a0write,\u00a0let\u00a0alone\u00a0for\u00a0you\u00a0to\u00a0read.\u00a0Instead,\u00a0I\u2019ll\u00a0go\nwith\u00a0a\u00a0function\u00a0that\u2019s\u00a0short\u00a0enough\u00a0not\u00a0to\u00a0need\u00a0it.\u00a0This\u00a0one\u00a0scores\u00a0points\u00a0for\u00a0an\ninsurance\u00a0application:\nwww.EBooksWorld.ir\n", "page": 378, "type": "text", "section": "Page 378"}
{"text": "Click\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0score(candidate,\u00a0medicalExam,\u00a0scoringGuide)\u00a0{\n\u00a0\u00a0let\u00a0result\u00a0=\u00a00\u037e\n\u00a0\u00a0let\u00a0healthLevel\u00a0=\u00a00\u037e\n\u00a0\u00a0let\u00a0highMedicalRiskFlag\u00a0=\u00a0false\u037e\n\u00a0\u00a0if\u00a0(medicalExam.isSmoker)\u00a0{\n\u00a0\u00a0\u00a0\u00a0healthLevel\u00a0+=\u00a010\u037e\n\u00a0\u00a0\u00a0\u00a0highMedicalRiskFlag\u00a0=\u00a0true\u037e\n\u00a0\u00a0}\n\u00a0\u00a0let\u00a0certificationGrade\u00a0=\u00a0\"regular\"\u037e\n\u00a0\u00a0if\u00a0(scoringGuide.stateWithLowCertification(candidate.originState))\u00a0{\n\u00a0\u00a0\u00a0\u00a0certificationGrade\u00a0=\u00a0\"low\"\u037e\n\u00a0\u00a0\u00a0\u00a0result\u00a0\u00ad=\u00a05\u037e\n\u00a0\u00a0}\n\u00a0\u00a0//\u00a0lots\u00a0more\u00a0code\u00a0like\u00a0this\n\u00a0\u00a0result\u00a0\u00ad=\u00a0Math.max(healthLevel\u00a0\u00ad\u00a05,\u00a00)\u037e\n\u00a0\u00a0return\u00a0result\u037e\n}\nI\u00a0begin\u00a0by\u00a0creating\u00a0an\u00a0empty\u00a0class\u00a0and\u00a0then\u00a0Move\u00a0Function\u00a0(198)\u00a0to\u00a0move\u00a0the\u00a0function\ninto\u00a0it.\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0score(candidate,\u00a0medicalExam,\u00a0scoringGuide)\u00a0{\n\u00a0\u00a0return\u00a0new\u00a0Scorer().execute(candidate,\u00a0medicalExam,\u00a0scoringGuide)\u037e\n}\n\u00a0\u00a0class\u00a0Scorer\u00a0{\n\u00a0\u00a0\u00a0\u00a0execute\u00a0(candidate,\u00a0medicalExam,\u00a0scoringGuide)\u00a0{\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0let\u00a0result\u00a0=\u00a00\u037e\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0let\u00a0healthLevel\u00a0=\u00a00\u037e\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0let\u00a0highMedicalRiskFlag\u00a0=\u00a0false\u037e\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0if\u00a0(medicalExam.isSmoker)\u00a0{\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0healthLevel\u00a0+=\u00a010\u037e\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0highMedicalRiskFlag\u00a0=\u00a0true\u037e\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0}\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0let\u00a0certificationGrade\u00a0=\u00a0\"regular\"\u037e\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0if\u00a0(scoringGuide.stateWithLowCertification(candidate.originState))\u00a0{\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0certificationGrade\u00a0=\u00a0\"low\"\u037e\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0result\u00a0\u00ad=\u00a05\u037e\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0}\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0//\u00a0lots\u00a0more\u00a0code\u00a0like\u00a0this\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0result\u00a0\u00ad=\u00a0Math.max(healthLevel\u00a0\u00ad\u00a05,\u00a00)\u037e\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0return\u00a0result\u037e\n\u00a0\u00a0\u00a0\u00a0}\n\u00a0\u00a0}\nwww.EBooksWorld.ir\n", "page": 379, "type": "text", "section": "Page 379"}
{"text": "Most\u00a0of\u00a0the\u00a0time,\u00a0I\u00a0prefer\u00a0to\u00a0pass\u00a0arguments\u00a0to\u00a0a\u00a0command\u00a0on\u00a0the\u00a0constructor\u00a0and\u00a0have\nthe\u00a0execute\u00a0method\u00a0take\u00a0no\u00a0parameters.\u00a0While\u00a0this\u00a0matters\u00a0less\u00a0for\u00a0a\u00a0simple\ndecomposition\u00a0scenario\u00a0like\u00a0this,\u00a0it\u2019s\u00a0very\u00a0handy\u00a0when\u00a0I\u00a0want\u00a0to\u00a0manipulate\u00a0the\ncommand\u00a0with\u00a0a\u00a0more\u00a0complicated\u00a0parameter\u00a0setting\u00a0lifecycle\u00a0or\u00a0customizations.\nDifferent\u00a0command\u00a0classes\u00a0can\u00a0have\u00a0different\u00a0parameters\u00a0but\u00a0be\u00a0mixed\u00a0together\u00a0when\nqueued\u00a0for\u00a0execution.\nI\u00a0can\u00a0do\u00a0these\u00a0parameters\u00a0one\u00a0at\u00a0a\u00a0time.\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0score(candidate,\u00a0medicalExam,\u00a0scoringGuide)\u00a0{\n\u00a0\u00a0return\u00a0new\u00a0Scorer(candidate).execute(candidate,\u00a0medicalExam,\u00a0scoringGuide)\u037e\n}\nclass\u00a0Scorer\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nconstructor(candidate){\n\u00a0\u00a0this._candidate\u00a0=\u00a0candidate\u037e\n}\nexecute\u00a0(candidate,\u00a0medicalExam,\u00a0scoringGuide)\u00a0{\n\u00a0\u00a0let\u00a0result\u00a0=\u00a00\u037e\n\u00a0\u00a0let\u00a0healthLevel\u00a0=\u00a00\u037e\n\u00a0\u00a0let\u00a0highMedicalRiskFlag\u00a0=\u00a0false\u037e\n\u00a0\u00a0if\u00a0(medicalExam.isSmoker)\u00a0{\n\u00a0\u00a0\u00a0\u00a0healthLevel\u00a0+=\u00a010\u037e\n\u00a0\u00a0\u00a0\u00a0highMedicalRiskFlag\u00a0=\u00a0true\u037e\n\u00a0\u00a0}\n\u00a0\u00a0let\u00a0certificationGrade\u00a0=\u00a0\"regular\"\u037e\n\u00a0\u00a0if\u00a0(scoringGuide.stateWithLowCertification(this._candidate.originState))\u00a0{\n\u00a0\u00a0\u00a0\u00a0certificationGrade\u00a0=\u00a0\"low\"\u037e\n\u00a0\u00a0\u00a0\u00a0result\u00a0\u00ad=\u00a05\u037e\n\u00a0\u00a0}\n\u00a0\u00a0//\u00a0lots\u00a0more\u00a0code\u00a0like\u00a0this\n\u00a0\u00a0result\u00a0\u00ad=\u00a0Math.max(healthLevel\u00a0\u00ad\u00a05,\u00a00)\u037e\n\u00a0\u00a0return\u00a0result\u037e\n}\nI\u00a0continue\u00a0with\u00a0the\u00a0other\u00a0parameters\nwww.EBooksWorld.ir\n", "page": 380, "type": "text", "section": "Page 380"}
{"text": "Click\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0score(candidate,\u00a0medicalExam,\u00a0scoringGuide)\u00a0{\n\u00a0\u00a0return\u00a0new\u00a0Scorer(candidate,\u00a0medicalExam,\u00a0scoringGuide).execute()\u037e\n}\nclass\u00a0Scorer\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nconstructor(candidate,\u00a0medicalExam,\u00a0scoringGuide){\n\u00a0\u00a0this._candidate\u00a0=\u00a0candidate\u037e\n\u00a0\u00a0this._medicalExam\u00a0=\u00a0medicalExam\u037e\n\u00a0\u00a0this._scoringGuide\u00a0=\u00a0scoringGuide\u037e\n}\nexecute\u00a0()\u00a0{\n\u00a0\u00a0let\u00a0result\u00a0=\u00a00\u037e\n\u00a0\u00a0let\u00a0healthLevel\u00a0=\u00a00\u037e\n\u00a0\u00a0let\u00a0highMedicalRiskFlag\u00a0=\u00a0false\u037e\n\u00a0\u00a0if\u00a0(this._medicalExam.isSmoker)\u00a0{\n\u00a0\u00a0\u00a0\u00a0healthLevel\u00a0+=\u00a010\u037e\n\u00a0\u00a0\u00a0\u00a0highMedicalRiskFlag\u00a0=\u00a0true\u037e\n\u00a0\u00a0}\n\u00a0\u00a0let\u00a0certificationGrade\u00a0=\u00a0\"regular\"\u037e\n\u00a0\u00a0if\u00a0(this._scoringGuide.stateWithLowCertification(this._candidate.originState))\n\u00a0\u00a0\u00a0\u00a0certificationGrade\u00a0=\u00a0\"low\"\u037e\n\u00a0\u00a0\u00a0\u00a0result\u00a0\u00ad=\u00a05\u037e\n\u00a0\u00a0}\n\u00a0\u00a0//\u00a0lots\u00a0more\u00a0code\u00a0like\u00a0this\n\u00a0\u00a0result\u00a0\u00ad=\u00a0Math.max(healthLevel\u00a0\u00ad\u00a05,\u00a00)\u037e\n\u00a0\u00a0return\u00a0result\u037e\n}\nThat\u00a0completes\u00a0Replace\u00a0Function\u00a0with\u00a0Command,\u00a0but\u00a0the\u00a0whole\u00a0point\u00a0of\u00a0doing\u00a0this\nrefactoring\u00a0is\u00a0to\u00a0allow\u00a0me\u00a0to\u00a0break\u00a0down\u00a0the\u00a0complicated\u00a0functions\u2014so\u00a0let\u00a0me\u00a0outline\nsome\u00a0steps\u00a0to\u00a0achieve\u00a0that.\u00a0My\u00a0next\u00a0move\u00a0here\u00a0is\u00a0to\u00a0change\u00a0all\u00a0the\u00a0local\u00a0variables\u00a0into\nfields.\u00a0Again,\u00a0I\u00a0do\u00a0these\u00a0one\u00a0at\u00a0a\u00a0time.\nclass\u00a0Scorer\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nconstructor(candidate,\u00a0medicalExam,\u00a0scoringGuide){\nwww.EBooksWorld.ir\n", "page": 381, "type": "text", "section": "Page 381"}
{"text": "\u00a0\u00a0this._candidate\u00a0=\u00a0candidate\u037e\n\u00a0\u00a0this._medicalExam\u00a0=\u00a0medicalExam\u037e\n\u00a0\u00a0this._scoringGuide\u00a0=\u00a0scoringGuide\u037e\n}\nexecute\u00a0()\u00a0{\n\u00a0\u00a0this._result\u00a0=\u00a00\u037e\n\u00a0\u00a0let\u00a0healthLevel\u00a0=\u00a00\u037e\n\u00a0\u00a0let\u00a0highMedicalRiskFlag\u00a0=\u00a0false\u037e\n\u00a0\u00a0if\u00a0(this._medicalExam.isSmoker)\u00a0{\n\u00a0\u00a0\u00a0\u00a0healthLevel\u00a0+=\u00a010\u037e\n\u00a0\u00a0\u00a0\u00a0highMedicalRiskFlag\u00a0=\u00a0true\u037e\n\u00a0\u00a0}\n\u00a0\u00a0let\u00a0certificationGrade\u00a0=\u00a0\"regular\"\u037e\n\u00a0\u00a0if\u00a0(this._scoringGuide.stateWithLowCertification(this._candidate.originState))\n\u00a0\u00a0\u00a0\u00a0certificationGrade\u00a0=\u00a0\"low\"\u037e\n\u00a0\u00a0\u00a0\u00a0this._result\u00a0\u00ad=\u00a05\u037e\n\u00a0\u00a0}\n\u00a0\u00a0//\u00a0lots\u00a0more\u00a0code\u00a0like\u00a0this\n\u00a0\u00a0this._result\u00a0\u00ad=\u00a0Math.max(healthLevel\u00a0\u00ad\u00a05,\u00a00)\u037e\n\u00a0\u00a0return\u00a0this._result\u037e\n}\nI\u00a0repeat\u00a0this\u00a0for\u00a0all\u00a0the\u00a0local\u00a0variables.\u00a0(This\u00a0is\u00a0one\u00a0of\u00a0those\u00a0refactorings\u00a0that\u00a0I\u00a0felt\u00a0was\nsufficiently\u00a0simple\u00a0that\u00a0I\u00a0haven\u2019t\u00a0given\u00a0it\u00a0an\u00a0entry\u00a0in\u00a0the\u00a0catalog.\u00a0I\u00a0feel\u00a0slightly\u00a0guilty\nabout\u00a0this.)\nclass\u00a0Scorer\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nconstructor(candidate,\u00a0medicalExam,\u00a0scoringGuide){\n\u00a0\u00a0this._candidate\u00a0=\u00a0candidate\u037e\n\u00a0\u00a0this._medicalExam\u00a0=\u00a0medicalExam\u037e\n\u00a0\u00a0this._scoringGuide\u00a0=\u00a0scoringGuide\u037e\n}\nexecute\u00a0()\u00a0{\n\u00a0\u00a0this._result\u00a0=\u00a00\u037e\n\u00a0\u00a0this._healthLevel\u00a0=\u00a00\u037e\n\u00a0\u00a0this._highMedicalRiskFlag\u00a0=\u00a0false\u037e\n\u00a0\u00a0if\u00a0(this._medicalExam.isSmoker)\u00a0{\n\u00a0\u00a0\u00a0\u00a0this._healthLevel\u00a0+=\u00a010\u037e\n\u00a0\u00a0\u00a0\u00a0this._highMedicalRiskFlag\u00a0=\u00a0true\u037e\n\u00a0\u00a0}\n\u00a0\u00a0this._certificationGrade\u00a0=\u00a0\"regular\"\u037e\n\u00a0\u00a0if\u00a0(this._scoringGuide.stateWithLowCertification(this._candidate.originState))\nwww.EBooksWorld.ir\n", "page": 382, "type": "text", "section": "Page 382"}
{"text": "\u00a0\u00a0\u00a0\u00a0this._certificationGrade\u00a0=\u00a0\"low\"\u037e\n\u00a0\u00a0\u00a0\u00a0this._result\u00a0\u00ad=\u00a05\u037e\n\u00a0\u00a0}\n\u00a0\u00a0//\u00a0lots\u00a0more\u00a0code\u00a0like\u00a0this\n\u00a0\u00a0this._result\u00a0\u00ad=\u00a0Math.max(this._healthLevel\u00a0\u00ad\u00a05,\u00a00)\u037e\n\u00a0\u00a0return\u00a0this._result\u037e\n}\nNow\u00a0I\u2019ve\u00a0moved\u00a0all\u00a0the\u00a0function\u2019s\u00a0state\u00a0to\u00a0the\u00a0command\u00a0object,\u00a0I\u00a0can\u00a0use\u00a0refactorings\nlike\u00a0Extract\u00a0Function\u00a0(106)\u00a0without\u00a0getting\u00a0tangled\u00a0up\u00a0in\u00a0all\u00a0the\u00a0variables\u00a0and\u00a0their\nscopes.\nclass\u00a0Scorer\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nexecute\u00a0()\u00a0{\n\u00a0\u00a0this._result\u00a0=\u00a00\u037e\n\u00a0\u00a0this._healthLevel\u00a0=\u00a00\u037e\n\u00a0\u00a0this._highMedicalRiskFlag\u00a0=\u00a0false\u037e\n\u00a0\u00a0this.scoreSmoking()\u037e\n\u00a0\u00a0this._certificationGrade\u00a0=\u00a0\"regular\"\u037e\n\u00a0\u00a0if\u00a0(this._scoringGuide.stateWithLowCertification(this._candidate.originState))\n\u00a0\u00a0\u00a0\u00a0this._certificationGrade\u00a0=\u00a0\"low\"\u037e\n\u00a0\u00a0\u00a0\u00a0this._result\u00a0\u00ad=\u00a05\u037e\n\u00a0\u00a0}\n\u00a0\u00a0//\u00a0lots\u00a0more\u00a0code\u00a0like\u00a0this\n\u00a0\u00a0this._result\u00a0\u00ad=\u00a0Math.max(this._healthLevel\u00a0\u00ad\u00a05,\u00a00)\u037e\n\u00a0\u00a0return\u00a0this._result\u037e\n\u00a0\u00a0}\nscoreSmoking()\u00a0{\n\u00a0\u00a0if\u00a0(this._medicalExam.isSmoker)\u00a0{\n\u00a0\u00a0\u00a0\u00a0this._healthLevel\u00a0+=\u00a010\u037e\n\u00a0\u00a0\u00a0\u00a0this._highMedicalRiskFlag\u00a0=\u00a0true\u037e\n\u00a0\u00a0}\n}\nThis\u00a0allows\u00a0me\u00a0to\u00a0treat\u00a0the\u00a0command\u00a0similarly\u00a0to\u00a0how\u00a0I\u2019d\u00a0deal\u00a0with\u00a0a\u00a0nested\u00a0function.\nIndeed,\u00a0when\u00a0doing\u00a0this\u00a0refactoring\u00a0in\u00a0JavaScript,\u00a0using\u00a0nested\u00a0functions\u00a0would\u00a0be\u00a0a\nreasonable\u00a0alternative\u00a0to\u00a0using\u00a0a\u00a0command.\u00a0I\u2019d\u00a0still\u00a0use\u00a0a\u00a0command\u00a0for\u00a0this,\u00a0partly\nbecause\u00a0I\u2019m\u00a0more\u00a0familiar\u00a0with\u00a0commands\u00a0and\u00a0partly\u00a0because\u00a0with\u00a0a\u00a0command\u00a0I\u00a0can\nwrite\u00a0tests\u00a0and\u00a0debugging\u00a0calls\u00a0against\u00a0the\u00a0subfunctions.\nREPLACE COMMAND WITH FUNCTION\nwww.EBooksWorld.ir\n", "page": 383, "type": "text", "section": "Page 383"}
{"text": "REPLACE COMMAND WITH FUNCTION\ninverse\u00a0of:\u00a0Replace\u00a0Function\u00a0with\u00a0Command\u00a0(337)\nMotivation\nCommand\u00a0objects\u00a0provide\u00a0a\u00a0powerful\u00a0mechanism\u00a0for\u00a0handling\u00a0complex\u00a0computations.\nThey\u00a0can\u00a0easily\u00a0be\u00a0broken\u00a0down\u00a0into\u00a0separate\u00a0methods\u00a0sharing\u00a0common\u00a0state\u00a0through\nthe\u00a0fields\u037e\u00a0they\u00a0can\u00a0be\u00a0invoked\u00a0via\u00a0different\u00a0methods\u00a0for\u00a0different\u00a0effects\u037e\u00a0they\u00a0can\u00a0have\ntheir\u00a0data\u00a0built\u00a0up\u00a0in\u00a0stages.\u00a0But\u00a0that\u00a0power\u00a0comes\u00a0at\u00a0a\u00a0cost.\u00a0Most\u00a0of\u00a0the\u00a0time,\u00a0I\u00a0just\nwant\u00a0to\u00a0invoke\u00a0a\u00a0function\u00a0and\u00a0have\u00a0it\u00a0do\u00a0its\u00a0thing.\u00a0If\u00a0that\u2019s\u00a0the\u00a0case,\u00a0and\u00a0the\u00a0function\nisn\u2019t\u00a0too\u00a0complex,\u00a0then\u00a0a\u00a0command\u00a0object\u00a0is\u00a0more\u00a0trouble\u00a0than\u00a0its\u00a0worth\u00a0and\u00a0should\u00a0be\nturned\u00a0into\u00a0a\u00a0regular\u00a0function.\nMechanics\nApply\u00a0Extract\u00a0Function\u00a0(106)\u00a0to\u00a0the\u00a0creation\u00a0of\u00a0the\u00a0command\u00a0and\u00a0the\u00a0call\u00a0to\u00a0the\ncommand\u2019s\u00a0execution\u00a0method.\nThis\u00a0creates\u00a0the\u00a0new\u00a0function\u00a0that\u00a0will\u00a0replace\u00a0the\u00a0command\u00a0in\u00a0due\u00a0course.\nFor\u00a0each\u00a0method\u00a0called\u00a0by\u00a0the\u00a0command\u2019s\u00a0execution\u00a0method,\u00a0apply\u00a0Inline\u00a0Function\n(115).\nwww.EBooksWorld.ir\n", "page": 384, "type": "text", "section": "Page 384"}
{"text": "If\u00a0the\u00a0supporting\u00a0function\u00a0returns\u00a0a\u00a0value,\u00a0use\u00a0Extract\u00a0Variable\u00a0(119)\u00a0on\u00a0the\u00a0call\nfirst\u00a0and\u00a0then\u00a0Inline\u00a0Function\u00a0(115).\nUse\u00a0Change\u00a0Function\u00a0Declaration\u00a0(124)\u00a0to\u00a0put\u00a0all\u00a0the\u00a0parameters\u00a0of\u00a0the\u00a0constructor\ninto\u00a0the\u00a0command\u2019s\u00a0execution\u00a0method\u00a0instead.\nFor\u00a0each\u00a0field,\u00a0alter\u00a0the\u00a0references\u00a0in\u00a0the\u00a0command\u2019s\u00a0execution\u00a0method\u00a0to\u00a0use\u00a0the\nparameter\u00a0instead.\u00a0Test\u00a0after\u00a0each\u00a0change.\nInline\u00a0the\u00a0constructor\u00a0call\u00a0and\u00a0command\u2019s\u00a0execution\u00a0method\u00a0call\u00a0into\u00a0the\u00a0caller\n(which\u00a0is\u00a0the\u00a0replacement\u00a0function).\nTest.\nApply\u00a0Remove\u00a0Dead\u00a0Code\u00a0(237)\u00a0to\u00a0the\u00a0command\u00a0class.\nExample\nI\u2019ll\u00a0begin\u00a0with\u00a0this\u00a0small\u00a0command\u00a0object:\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nclass\u00a0ChargeCalculator\u00a0{\n\u00a0\u00a0constructor\u00a0(customer,\u00a0usage,\u00a0provider){\n\u00a0\u00a0\u00a0\u00a0this._customer\u00a0=\u00a0customer\u037e\n\u00a0\u00a0\u00a0\u00a0this._usage\u00a0=\u00a0usage\u037e\n\u00a0\u00a0\u00a0\u00a0this._provider\u00a0=\u00a0provider\u037e\n\u00a0\u00a0}\n\u00a0\u00a0get\u00a0baseCharge()\u00a0{\n\u00a0\u00a0\u00a0\u00a0return\u00a0this._customer.baseRate\u00a0*\u00a0this._usage\u037e\n\u00a0\u00a0}\n\u00a0\u00a0get\u00a0charge()\u00a0{\n\u00a0\u00a0\u00a0\u00a0return\u00a0this.baseCharge\u00a0+\u00a0this._provider.connectionCharge\u037e\n\u00a0\u00a0}\n}\nIt\u00a0is\u00a0used\u00a0by\u00a0code\u00a0like\u00a0this:\ncaller\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nmonthCharge\u00a0=\u00a0new\u00a0ChargeCalculator(customer,\u00a0usage,\u00a0provider).charge\u037e\nwww.EBooksWorld.ir\n", "page": 385, "type": "text", "section": "Page 385"}
{"text": "The\u00a0command\u00a0class\u00a0is\u00a0small\u00a0and\u00a0simple\u00a0enough\u00a0to\u00a0be\u00a0better\u00a0off\u00a0as\u00a0a\u00a0function.\nI\u00a0begin\u00a0by\u00a0using\u00a0Extract\u00a0Function\u00a0(106)\u00a0to\u00a0wrap\u00a0the\u00a0class\u00a0creation\u00a0and\u00a0invocation.\ncaller\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nmonthCharge\u00a0=\u00a0charge(customer,\u00a0usage,\u00a0provider)\u037e\ntop\u00a0level\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0charge(customer,\u00a0usage,\u00a0provider)\u00a0{\n\u00a0\u00a0return\u00a0new\u00a0ChargeCalculator(customer,\u00a0usage,\u00a0provider).charge\u037e\n}\nI\u00a0have\u00a0to\u00a0decide\u00a0how\u00a0to\u00a0deal\u00a0with\u00a0any\u00a0supporting\u00a0functions,\u00a0in\u00a0this\u00a0case\u00a0baseCharge.\nMy\u00a0usual\u00a0approach\u00a0for\u00a0a\u00a0function\u00a0that\u00a0returns\u00a0a\u00a0value\u00a0is\u00a0to\u00a0first\u00a0Extract\u00a0Variable\u00a0(119)\non\u00a0that\u00a0value.\nclass\u00a0ChargeCalculator\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nget\u00a0baseCharge()\u00a0{\n\u00a0\u00a0return\u00a0this._customer.baseRate\u00a0*\u00a0this._usage\u037e\n}\nget\u00a0charge()\u00a0{\n\u00a0\u00a0const\u00a0baseCharge\u00a0=\u00a0this.baseCharge\u037e\n\u00a0\u00a0return\u00a0baseCharge\u00a0+\u00a0this._provider.connectionCharge\u037e\n}\nThen,\u00a0I\u00a0use\u00a0Inline\u00a0Function\u00a0(115)\u00a0on\u00a0the\u00a0supporting\u00a0function.\nclass\u00a0ChargeCalculator\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nget\u00a0charge()\u00a0{\n\u00a0\u00a0const\u00a0baseCharge\u00a0=\u00a0this._customer.baseRate\u00a0*\u00a0this._usage\u037e\n\u00a0\u00a0return\u00a0baseCharge\u00a0+\u00a0this._provider.connectionCharge\u037e\nwww.EBooksWorld.ir\n", "page": 386, "type": "text", "section": "Page 386"}
{"text": "}\nI\u00a0now\u00a0have\u00a0all\u00a0the\u00a0processing\u00a0in\u00a0a\u00a0single\u00a0function,\u00a0so\u00a0my\u00a0next\u00a0step\u00a0is\u00a0to\u00a0move\u00a0the\u00a0data\npassed\u00a0to\u00a0the\u00a0constructor\u00a0to\u00a0the\u00a0main\u00a0method.\u00a0I\u00a0first\u00a0use\u00a0Change\u00a0Function\u00a0Declaration\n(124)\u00a0to\u00a0add\u00a0all\u00a0the\u00a0constructor\u00a0parameters\u00a0to\u00a0the\u00a0charge\u00a0method.\nclass\u00a0ChargeCalculator\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nconstructor\u00a0(customer,\u00a0usage,\u00a0provider){\n\u00a0\u00a0this._customer\u00a0=\u00a0customer\u037e\n\u00a0\u00a0this._usage\u00a0=\u00a0usage\u037e\n\u00a0\u00a0this._provider\u00a0=\u00a0provider\u037e\n}\ncharge(customer,\u00a0usage,\u00a0provider)\u00a0{\n\u00a0\u00a0const\u00a0baseCharge\u00a0=\u00a0this._customer.baseRate\u00a0*\u00a0this._usage\u037e\n\u00a0\u00a0return\u00a0baseCharge\u00a0+\u00a0this._provider.connectionCharge\u037e\n}\ntop\u00a0level\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0charge(customer,\u00a0usage,\u00a0provider)\u00a0{\n\u00a0\u00a0return\u00a0new\u00a0ChargeCalculator(customer,\u00a0usage,\u00a0provider)\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0.charge(customer,\u00a0usage,\u00a0provider)\u037e\n}\nNow\u00a0I\u00a0can\u00a0alter\u00a0the\u00a0body\u00a0of\u00a0charge\u00a0to\u00a0use\u00a0the\u00a0passed\u00a0parameters\u00a0instead.\u00a0I\u00a0can\u00a0do\u00a0this\none\u00a0at\u00a0a\u00a0time.\nclass\u00a0ChargeCalculator\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nconstructor\u00a0(customer,\u00a0usage,\u00a0provider){\n\u00a0\u00a0this._customer\u00a0=\u00a0customer\u037e\n\u00a0\u00a0this._usage\u00a0=\u00a0usage\u037e\n\u00a0\u00a0this._provider\u00a0=\u00a0provider\u037e\n}\ncharge(customer,\u00a0usage,\u00a0provider)\u00a0{\n\u00a0\u00a0const\u00a0baseCharge\u00a0=\u00a0customer.baseRate\u00a0*\u00a0this._usage\u037e\nwww.EBooksWorld.ir\n", "page": 387, "type": "text", "section": "Page 387"}
{"text": "\u00a0\u00a0return\u00a0baseCharge\u00a0+\u00a0this._provider.connectionCharge\u037e\n}\nI\u00a0don\u2019t\u00a0have\u00a0to\u00a0remove\u00a0the\u00a0assignment\u00a0to\u00a0this._customer\u00a0in\u00a0the\u00a0constructor,\u00a0as\u00a0it\nwill\u00a0just\u00a0be\u00a0ignored.\u00a0But\u00a0I\u00a0prefer\u00a0to\u00a0do\u00a0it\u00a0since\u00a0that\u00a0will\u00a0make\u00a0a\u00a0test\u00a0fail\u00a0if\u00a0I\u00a0miss\nchanging\u00a0a\u00a0use\u00a0of\u00a0field\u00a0to\u00a0the\u00a0parameter.\u00a0(And\u00a0if\u00a0a\u00a0test\u00a0doesn\u2019t\u00a0fail,\u00a0I\u00a0should\u00a0consider\nadding\u00a0a\u00a0new\u00a0test.)\nI\u00a0repeat\u00a0this\u00a0for\u00a0the\u00a0other\u00a0parameters,\u00a0ending\u00a0up\u00a0with\nclass\u00a0ChargeCalculator\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\ncharge(customer,\u00a0usage,\u00a0provider)\u00a0{\n\u00a0\u00a0const\u00a0baseCharge\u00a0=\u00a0customer.baseRate\u00a0*\u00a0usage\u037e\n\u00a0\u00a0return\u00a0baseCharge\u00a0+\u00a0provider.connectionCharge\u037e\n}\nOnce\u00a0I\u2019ve\u00a0done\u00a0all\u00a0of\u00a0these,\u00a0I\u00a0can\u00a0inline\u00a0into\u00a0the\u00a0top\u00adlevel\u00a0charge\u00a0function.\u00a0This\u00a0is\u00a0a\nspecial\u00a0kind\u00a0of\u00a0Inline\u00a0Function\u00a0(115),\u00a0as\u00a0it\u2019s\u00a0inlining\u00a0both\u00a0the\u00a0constructor\u00a0and\u00a0method\ncall\u00a0together.\ntop\u00a0level\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0charge(customer,\u00a0usage,\u00a0provider)\u00a0{\n\u00a0\u00a0const\u00a0baseCharge\u00a0=\u00a0customer.baseRate\u00a0*\u00a0usage\u037e\n\u00a0\u00a0return\u00a0baseCharge\u00a0+\u00a0provider.connectionCharge\u037e\n}\nThe\u00a0command\u00a0class\u00a0is\u00a0now\u00a0dead\u00a0code,\u00a0so\u00a0I\u2019ll\u00a0use\u00a0Remove\u00a0Dead\u00a0Code\u00a0(237)\u00a0to\u00a0give\u00a0it\u00a0an\nhonorable\u00a0burial.\nwww.EBooksWorld.ir\n", "page": 388, "type": "text", "section": "Page 388"}
{"text": "Chapter 12\nDealing with Inheritance\nIn\u00a0this\u00a0final\u00a0chapter,\u00a0I\u2019ll\u00a0turn\u00a0to\u00a0one\u00a0of\u00a0the\u00a0best\u00a0known\u00a0features\u00a0of\u00a0object\u00adoriented\nprogramming:\u00a0inheritance.\u00a0Like\u00a0any\u00a0powerful\u00a0mechanism,\u00a0it\u00a0is\u00a0both\u00a0very\u00a0useful\u00a0and\neasy\u00a0to\u00a0misuse,\u00a0and\u00a0it\u2019s\u00a0often\u00a0hard\u00a0to\u00a0see\u00a0the\u00a0misuse\u00a0until\u00a0it\u2019s\u00a0in\u00a0the\u00a0rear\u00adview\u00a0mirror.\nOften,\u00a0features\u00a0need\u00a0to\u00a0move\u00a0up\u00a0or\u00a0down\u00a0the\u00a0inheritance\u00a0hierarchy.\u00a0Several\u00a0refactorings\ndeal\u00a0with\u00a0that:\u00a0Pull\u00a0Up\u00a0Method\u00a0(350),\u00a0Pull\u00a0Up\u00a0Field\u00a0(353),\u00a0Pull\u00a0Up\u00a0Constructor\u00a0Body\n(355),\u00a0Push\u00a0Down\u00a0Method\u00a0(359),\u00a0and\u00a0Push\u00a0Down\u00a0Field\u00a0(361).\u00a0I\u00a0can\u00a0add\u00a0and\u00a0remove\nclasses\u00a0from\u00a0the\u00a0hierarchy\u00a0with\u00a0Extract\u00a0Superclass\u00a0(375),\u00a0Remove\u00a0Subclass\u00a0(369),\u00a0and\nCollapse\u00a0Hierarchy\u00a0(380).\u00a0I\u00a0may\u00a0want\u00a0to\u00a0add\u00a0a\u00a0subclass\u00a0to\u00a0replace\u00a0a\u00a0field\u00a0that\u00a0I\u2019m\u00a0using\nto\u00a0trigger\u00a0different\u00a0behavior\u00a0based\u00a0on\u00a0its\u00a0value\u037e\u00a0I\u00a0do\u00a0this\u00a0with\u00a0Replace\u00a0Type\u00a0Code\u00a0with\nSubclasses\u00a0(362).\nInheritance\u00a0is\u00a0a\u00a0powerful\u00a0tool,\u00a0but\u00a0sometimes\u00a0it\u00a0gets\u00a0used\u00a0in\u00a0the\u00a0wrong\u00a0place\u2014or\u00a0the\nplace\u00a0it\u2019s\u00a0used\u00a0in\u00a0becomes\u00a0wrong.\u00a0In\u00a0that\u00a0case,\u00a0I\u00a0use\u00a0Replace\u00a0Subclass\u00a0with\u00a0Delegate\n(381)\u00a0or\u00a0Replace\u00a0Superclass\u00a0with\u00a0Delegate\u00a0(399)\u00a0to\u00a0turn\u00a0inheritance\u00a0into\u00a0delegation.\nPULL UP METHOD\ninverse\u00a0of:\u00a0Push\u00a0Down\u00a0Method\u00a0(359)\nHistory\nTopics\nTutorials\nOffers & Deals\nHighlights\nSettings\nSupport\nSign Out\nwww.EBooksWorld.ir\n", "page": 389, "type": "text", "section": "Page 389"}
{"text": "Motivation\nEliminating\u00a0duplicate\u00a0code\u00a0is\u00a0important.\u00a0Two\u00a0duplicate\u00a0methods\u00a0may\u00a0work\u00a0fine\u00a0as\u00a0they\nare,\u00a0but\u00a0they\u00a0are\u00a0nothing\u00a0but\u00a0a\u00a0breeding\u00a0ground\u00a0for\u00a0bugs\u00a0in\u00a0the\u00a0future.\u00a0Whenever\u00a0there\nis\u00a0duplication,\u00a0there\u00a0is\u00a0risk\u00a0that\u00a0an\u00a0alteration\u00a0to\u00a0one\u00a0copy\u00a0will\u00a0not\u00a0be\u00a0made\u00a0to\u00a0the\u00a0other.\nUsually,\u00a0it\u00a0is\u00a0difficult\u00a0to\u00a0find\u00a0the\u00a0duplicates.\nThe\u00a0easiest\u00a0case\u00a0of\u00a0using\u00a0Pull\u00a0Up\u00a0Method\u00a0is\u00a0when\u00a0the\u00a0methods\u00a0have\u00a0the\u00a0same\u00a0body,\nimplying\u00a0there\u2019s\u00a0been\u00a0a\u00a0copy\u00a0and\u00a0paste.\u00a0Of\u00a0course\u00a0it\u2019s\u00a0not\u00a0always\u00a0as\u00a0obvious\u00a0as\u00a0that.\u00a0I\ncould\u00a0just\u00a0do\u00a0the\u00a0refactoring\u00a0and\u00a0see\u00a0if\u00a0the\u00a0tests\u00a0croak\u2014but\u00a0that\u00a0puts\u00a0a\u00a0lot\u00a0of\u00a0reliance\u00a0on\nmy\u00a0tests.\u00a0I\u00a0usually\u00a0find\u00a0it\u00a0valuable\u00a0to\u00a0look\u00a0for\u00a0the\u00a0differences\u2014often,\u00a0they\u00a0show\u00a0up\nbehavior\u00a0that\u00a0I\u00a0forgot\u00a0to\u00a0test\u00a0for.\nOften,\u00a0Pull\u00a0Up\u00a0Method\u00a0comes\u00a0after\u00a0other\u00a0steps.\u00a0I\u00a0see\u00a0two\u00a0methods\u00a0in\u00a0different\u00a0classes\nthat\u00a0can\u00a0be\u00a0parameterized\u00a0in\u00a0such\u00a0a\u00a0way\u00a0that\u00a0they\u00a0end\u00a0up\u00a0as\u00a0essentially\u00a0the\u00a0same\nmethod.\u00a0In\u00a0that\u00a0case,\u00a0the\u00a0smallest\u00a0step\u00a0is\u00a0for\u00a0me\u00a0to\u00a0apply\u00a0Parameterize\u00a0Function\u00a0(310)\nseparately\u00a0and\u00a0then\u00a0Pull\u00a0Up\u00a0Method.\nwww.EBooksWorld.ir\n", "page": 390, "type": "text", "section": "Page 390"}
{"text": "The\u00a0most\u00a0awkward\u00a0complication\u00a0with\u00a0Pull\u00a0Up\u00a0Method\u00a0is\u00a0if\u00a0the\u00a0body\u00a0of\u00a0the\u00a0method\nrefers\u00a0to\u00a0features\u00a0that\u00a0are\u00a0on\u00a0the\u00a0subclass\u00a0but\u00a0not\u00a0on\u00a0the\u00a0superclass.\u00a0When\u00a0that\nhappens,\u00a0I\u00a0need\u00a0to\u00a0use\u00a0Pull\u00a0Up\u00a0Field\u00a0(353)\u00a0and\u00a0Pull\u00a0Up\u00a0Method\u00a0on\u00a0those\u00a0elements\u00a0first.\nIf\u00a0I\u00a0have\u00a0two\u00a0methods\u00a0with\u00a0a\u00a0similar\u00a0overall\u00a0flow,\u00a0but\u00a0differing\u00a0in\u00a0details,\u00a0I\u2019ll\u00a0consider\nthe\u00a0Form\u00a0Template\u00a0Method\u00a0[mf\u00adft].\nMechanics\nInspect\u00a0methods\u00a0to\u00a0ensure\u00a0they\u00a0are\u00a0identical.\nIf\u00a0they\u00a0do\u00a0the\u00a0same\u00a0thing,\u00a0but\u00a0are\u00a0not\u00a0identical,\u00a0refactor\u00a0them\u00a0until\u00a0they\u00a0have\nidentical\u00a0bodies.\nCheck\u00a0that\u00a0all\u00a0method\u00a0calls\u00a0and\u00a0field\u00a0references\u00a0inside\u00a0the\u00a0method\u00a0body\u00a0refer\u00a0to\nfeatures\u00a0that\u00a0can\u00a0be\u00a0called\u00a0from\u00a0the\u00a0superclass.\nIf\u00a0the\u00a0methods\u00a0have\u00a0different\u00a0signatures,\u00a0use\u00a0Change\u00a0Function\u00a0Declaration\u00a0(124)\u00a0to\nget\u00a0them\u00a0to\u00a0the\u00a0one\u00a0you\u00a0want\u00a0to\u00a0use\u00a0on\u00a0the\u00a0superclass.\nCreate\u00a0a\u00a0new\u00a0method\u00a0in\u00a0the\u00a0superclass.\u00a0Copy\u00a0the\u00a0body\u00a0of\u00a0one\u00a0of\u00a0the\u00a0methods\u00a0over\u00a0to\nit.\nRun\u00a0static\u00a0checks.\nDelete\u00a0one\u00a0subclass\u00a0method.\nTest.\nKeep\u00a0deleting\u00a0subclass\u00a0methods\u00a0until\u00a0they\u00a0are\u00a0all\u00a0gone.\nExample\nI\u00a0have\u00a0two\u00a0subclass\u00a0methods\u00a0that\u00a0do\u00a0the\u00a0same\u00a0thing.\nclass\u00a0Employee\u00a0extends\u00a0Party\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nget\u00a0annualCost()\u00a0{\n\u00a0\u00a0return\u00a0this.monthlyCost\u00a0*\u00a012\u037e\n}\nwww.EBooksWorld.ir\n", "page": 391, "type": "text", "section": "Page 391"}
{"text": "class\u00a0Department\u00a0extends\u00a0Party\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nget\u00a0totalAnnualCost()\u00a0{\n\u00a0\u00a0return\u00a0this.monthlyCost\u00a0*\u00a012\u037e\n}\nI\u00a0look\u00a0at\u00a0both\u00a0classes\u00a0and\u00a0see\u00a0that\u00a0they\u00a0refer\u00a0to\u00a0the\u00a0monthlyCost\u00a0property\u00a0which\u00a0isn\u2019t\ndefined\u00a0on\u00a0the\u00a0superclass,\u00a0but\u00a0is\u00a0present\u00a0in\u00a0both\u00a0subclasses.\u00a0Since\u00a0I\u2019m\u00a0in\u00a0a\u00a0dynamic\nlanguage,\u00a0I\u2019m\u00a0OK\u037e\u00a0if\u00a0I\u00a0were\u00a0in\u00a0a\u00a0static\u00a0language,\u00a0I\u2019d\u00a0need\u00a0to\u00a0define\u00a0an\u00a0abstract\u00a0method\non\u00a0Party.\nThe\u00a0methods\u00a0have\u00a0different\u00a0names,\u00a0so\u00a0I\u00a0Change\u00a0Function\u00a0Declaration\u00a0(124)\u00a0to\u00a0make\nthem\u00a0the\u00a0same.\nclass\u00a0Department\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nget\u00a0annualCost()\u00a0{\n\u00a0\u00a0return\u00a0this.monthlyCost\u00a0*\u00a012\u037e\n}\nI\u00a0copy\u00a0the\u00a0method\u00a0from\u00a0one\u00a0subclass\u00a0and\u00a0paste\u00a0it\u00a0into\u00a0the\u00a0superclass.\nclass\u00a0Party\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nget\u00a0annualCost()\u00a0{\n\u00a0\u00a0return\u00a0this.monthlyCost\u00a0*\u00a012\u037e\n}\nIn\u00a0a\u00a0static\u00a0language,\u00a0I\u2019d\u00a0compile\u00a0to\u00a0ensure\u00a0that\u00a0all\u00a0the\u00a0references\u00a0were\u00a0OK.\u00a0That\u00a0won\u2019t\nhelp\u00a0me\u00a0here,\u00a0so\u00a0I\u00a0first\u00a0remove\u00a0annualCost\u00a0from\u00a0Employee,\u00a0test,\u00a0and\u00a0then\u00a0remove\u00a0it\nfrom\u00a0Department.\nThat\u00a0completes\u00a0the\u00a0refactoring,\u00a0but\u00a0does\u00a0leave\u00a0a\u00a0question.\u00a0annualCost\u00a0calls\nmonthlyCost,\u00a0but\u00a0monthlyCost\u00a0doesn\u2019t\u00a0appear\u00a0in\u00a0the\u00a0Party\u00a0class.\u00a0It\u00a0all\u00a0works,\nbecause\u00a0JavaScript\u00a0is\u00a0a\u00a0dynamic\u00a0language\u2014but\u00a0there\u00a0is\u00a0value\u00a0in\u00a0signaling\u00a0that\nwww.EBooksWorld.ir\n", "page": 392, "type": "text", "section": "Page 392"}
{"text": "subclasses\u00a0of\u00a0Party\u00a0should\u00a0provide\u00a0an\u00a0implementation\u00a0for\u00a0monthlyCost,\u00a0particularly\nif\u00a0more\u00a0subclasses\u00a0get\u00a0added\u00a0later\u00a0on.\u00a0A\u00a0good\u00a0way\u00a0to\u00a0provide\u00a0this\u00a0signal\u00a0is\u00a0a\u00a0trap\u00a0method\nlike\u00a0this:\nclass\u00a0Party\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nget\u00a0monthlyCost()\u00a0{\n\u00a0\u00a0throw\u00a0new\u00a0SubclassResponsibilityError()\u037e\n}\nI\u00a0call\u00a0such\u00a0an\u00a0error\u00a0a\u00a0subclass\u00a0responsibility\u00a0error\u00a0as\u00a0that\u00a0was\u00a0the\u00a0name\u00a0used\u00a0in\nSmalltalk.\nPULL UP FIELD\ninverse\u00a0of:\u00a0Push\u00a0Down\u00a0Field\u00a0(361)\nMotivation\nwww.EBooksWorld.ir\n", "page": 393, "type": "text", "section": "Page 393"}
{"text": "Motivation\nIf\u00a0subclasses\u00a0are\u00a0developed\u00a0independently,\u00a0or\u00a0combined\u00a0through\u00a0refactoring,\u00a0I\u00a0often\nfind\u00a0that\u00a0they\u00a0duplicate\u00a0features.\u00a0In\u00a0particular,\u00a0certain\u00a0fields\u00a0can\u00a0be\u00a0duplicates.\u00a0Such\nfields\u00a0sometimes\u00a0have\u00a0similar\u00a0names\u2014but\u00a0not\u00a0always.\u00a0The\u00a0only\u00a0way\u00a0I\u00a0can\u00a0tell\u00a0what\u00a0is\ngoing\u00a0on\u00a0is\u00a0by\u00a0looking\u00a0at\u00a0the\u00a0fields\u00a0and\u00a0examining\u00a0how\u00a0they\u00a0are\u00a0used.\u00a0If\u00a0they\u00a0are\u00a0being\nused\u00a0in\u00a0a\u00a0similar\u00a0way,\u00a0I\u00a0can\u00a0pull\u00a0them\u00a0up\u00a0into\u00a0the\u00a0superclass.\nBy\u00a0doing\u00a0this,\u00a0I\u00a0reduce\u00a0duplication\u00a0in\u00a0two\u00a0ways.\u00a0I\u00a0remove\u00a0the\u00a0duplicate\u00a0data\u00a0declaration\nand\u00a0I\u00a0can\u00a0then\u00a0move\u00a0behavior\u00a0that\u00a0uses\u00a0the\u00a0field\u00a0from\u00a0the\u00a0subclasses\u00a0to\u00a0the\u00a0superclass.\nMany\u00a0dynamic\u00a0languages\u00a0do\u00a0not\u00a0define\u00a0fields\u00a0as\u00a0part\u00a0of\u00a0their\u00a0class\u00a0definition\u2014instead,\nfields\u00a0appear\u00a0when\u00a0they\u00a0are\u00a0first\u00a0assigned\u00a0to.\u00a0In\u00a0this\u00a0case,\u00a0pulling\u00a0up\u00a0a\u00a0field\u00a0is\u00a0essentially\na\u00a0consequence\u00a0of\u00a0Pull\u00a0Up\u00a0Constructor\u00a0Body\u00a0(355).\nMechanics\nInspect\u00a0all\u00a0users\u00a0of\u00a0the\u00a0candidate\u00a0field\u00a0to\u00a0ensure\u00a0they\u00a0are\u00a0used\u00a0in\u00a0the\u00a0same\u00a0way.\nIf\u00a0the\u00a0fields\u00a0have\u00a0different\u00a0names,\u00a0use\u00a0Rename\u00a0Field\u00a0(244)\u00a0to\u00a0give\u00a0them\u00a0the\u00a0same\nname.\nCreate\u00a0a\u00a0new\u00a0field\u00a0in\u00a0the\u00a0superclass.\nThe\u00a0new\u00a0field\u00a0will\u00a0need\u00a0to\u00a0be\u00a0accessible\u00a0to\u00a0subclasses\u00a0(protected\u00a0in\u00a0common\nlanguages).\nDelete\u00a0the\u00a0subclass\u00a0fields.\nTest.\nPULL UP CONSTRUCTOR BODY\nwww.EBooksWorld.ir\n", "page": 394, "type": "text", "section": "Page 394"}
{"text": "Motivation\nConstructors\u00a0are\u00a0tricky\u00a0things.\u00a0They\u00a0aren\u2019t\u00a0quite\u00a0normal\u00a0methods\u2014so\u00a0I\u2019m\u00a0more\nrestricted\u00a0in\u00a0what\u00a0I\u00a0can\u00a0do\u00a0with\u00a0them.\nIf\u00a0I\u00a0see\u00a0subclass\u00a0methods\u00a0with\u00a0common\u00a0behavior,\u00a0my\u00a0first\u00a0thought\u00a0is\u00a0to\u00a0use\u00a0Extract\nFunction\u00a0(106)\u00a0followed\u00a0by\u00a0Pull\u00a0Up\u00a0Method\u00a0(350),\u00a0which\u00a0will\u00a0move\u00a0it\u00a0nicely\u00a0into\u00a0the\nsuperclass.\u00a0Constructors\u00a0tangle\u00a0that\u2014because\u00a0they\u00a0have\u00a0special\u00a0rules\u00a0about\u00a0what\u00a0can\u00a0be\ndone\u00a0in\u00a0what\u00a0order,\u00a0so\u00a0I\u00a0need\u00a0a\u00a0slightly\u00a0different\u00a0approach.\nwww.EBooksWorld.ir\n", "page": 395, "type": "text", "section": "Page 395"}
{"text": "If\u00a0this\u00a0refactoring\u00a0starts\u00a0getting\u00a0messy,\u00a0I\u00a0reach\u00a0for\u00a0Replace\u00a0Constructor\u00a0with\u00a0Factory\nFunction\u00a0(334).\nMechanics\nDefine\u00a0a\u00a0superclass\u00a0constructor,\u00a0if\u00a0one\u00a0doesn\u2019t\u00a0already\u00a0exist.\u00a0Ensure\u00a0it\u2019s\u00a0called\u00a0by\nsubclass\u00a0constructors.\nUse\u00a0Slide\u00a0Statements\u00a0(223)\u00a0to\u00a0move\u00a0any\u00a0common\u00a0statements\u00a0to\u00a0just\u00a0after\u00a0the\u00a0super\ncall.\nRemove\u00a0the\u00a0common\u00a0code\u00a0from\u00a0each\u00a0subclass\u00a0and\u00a0put\u00a0it\u00a0in\u00a0the\u00a0superclass.\u00a0Add\u00a0to\nthe\u00a0super\u00a0call\u00a0any\u00a0constructor\u00a0parameters\u00a0referenced\u00a0in\u00a0the\u00a0common\u00a0code.\nTest.\nIf\u00a0there\u00a0is\u00a0any\u00a0common\u00a0code\u00a0that\u00a0cannot\u00a0move\u00a0to\u00a0the\u00a0start\u00a0of\u00a0the\u00a0constructor,\u00a0use\nExtract\u00a0Function\u00a0(106)\u00a0followed\u00a0by\u00a0Pull\u00a0Up\u00a0Method\u00a0(350).\nExample\nI\u00a0start\u00a0with\u00a0the\u00a0following\u00a0code:\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nclass\u00a0Party\u00a0{}\nclass\u00a0Employee\u00a0extends\u00a0Party\u00a0{\n\u00a0\u00a0constructor(name,\u00a0id,\u00a0monthlyCost)\u00a0{\n\u00a0\u00a0\u00a0\u00a0super()\u037e\n\u00a0\u00a0\u00a0\u00a0this._id\u00a0=\u00a0id\u037e\n\u00a0\u00a0\u00a0\u00a0this._name\u00a0=\u00a0name\u037e\n\u00a0\u00a0\u00a0\u00a0this._monthlyCost\u00a0=\u00a0monthlyCost\u037e\n\u00a0\u00a0}\n\u00a0\u00a0//\u00a0rest\u00a0of\u00a0class...\nclass\u00a0Department\u00a0extends\u00a0Party\u00a0{\n\u00a0\u00a0constructor(name,\u00a0staff){\n\u00a0\u00a0\u00a0\u00a0super()\u037e\n\u00a0\u00a0\u00a0\u00a0this._name\u00a0=\u00a0name\u037e\n\u00a0\u00a0\u00a0\u00a0this._staff\u00a0=\u00a0staff\u037e\n\u00a0\u00a0}\n\u00a0\u00a0//\u00a0rest\u00a0of\u00a0class...\nThe\u00a0common\u00a0code\u00a0here\u00a0is\u00a0the\u00a0assignment\u00a0of\u00a0the\u00a0name.\u00a0I\u00a0use\u00a0Slide\u00a0Statements\u00a0(223)\u00a0to\nwww.EBooksWorld.ir\n", "page": 396, "type": "text", "section": "Page 396"}
{"text": "move\u00a0the\u00a0assignment\u00a0in\u00a0Employee\u00a0next\u00a0to\u00a0the\u00a0call\u00a0to\u00a0super():\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nclass\u00a0Employee\u00a0extends\u00a0Party\u00a0{\n\u00a0\u00a0constructor(name,\u00a0id,\u00a0monthlyCost)\u00a0{\n\u00a0\u00a0\u00a0\u00a0super()\u037e\n\u00a0\u00a0\u00a0\u00a0this._name\u00a0=\u00a0name\u037e\n\u00a0\u00a0\u00a0\u00a0this._id\u00a0=\u00a0id\u037e\n\u00a0\u00a0\u00a0\u00a0this._monthlyCost\u00a0=\u00a0monthlyCost\u037e\n\u00a0\u00a0}\n\u00a0\u00a0//\u00a0rest\u00a0of\u00a0class...\nWith\u00a0that\u00a0tested,\u00a0I\u00a0move\u00a0the\u00a0common\u00a0code\u00a0to\u00a0the\u00a0superclass.\u00a0Since\u00a0that\u00a0code\u00a0contains\u00a0a\nreference\u00a0to\u00a0a\u00a0constructor\u00a0argument,\u00a0I\u00a0pass\u00a0that\u00a0in\u00a0as\u00a0a\u00a0parameter.\nclass\u00a0Party\u2026\nconstructor(name){\n\u00a0\u00a0this._name\u00a0=\u00a0name\u037e\n}\nclass\u00a0Employee\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nconstructor(name,\u00a0id,\u00a0monthlyCost)\u00a0{\n\u00a0\u00a0super(name)\u037e\n\u00a0\u00a0this._id\u00a0=\u00a0id\u037e\n\u00a0\u00a0this._monthlyCost\u00a0=\u00a0monthlyCost\u037e\n}\nclass\u00a0Department\u2026\nconstructor(name,\u00a0staff){\n\u00a0\u00a0super(name)\u037e\n\u00a0\u00a0this._staff\u00a0=\u00a0staff\u037e\n}\nRun\u00a0the\u00a0tests,\u00a0and\u00a0I\u2019m\u00a0done.\nMost\u00a0of\u00a0the\u00a0time,\u00a0constructor\u00a0behavior\u00a0will\u00a0work\u00a0like\u00a0this:\u00a0Do\u00a0the\u00a0common\u00a0elements\nfirst\u00a0(with\u00a0a\u00a0super\u00a0call),\u00a0then\u00a0do\u00a0extra\u00a0work\u00a0that\u00a0the\u00a0subclass\u00a0needs.\u00a0Occasionally,\nwww.EBooksWorld.ir\n", "page": 397, "type": "text", "section": "Page 397"}
{"text": "however,\u00a0there\u00a0is\u00a0some\u00a0common\u00a0behavior\u00a0later.\nConsider\u00a0this\u00a0example:\nclass\u00a0Employee\u2026\nconstructor\u00a0(name)\u00a0{...}\nget\u00a0isPrivileged()\u00a0{...}\nassignCar()\u00a0{...}\nclass\u00a0Manager\u00a0extends\u00a0Employee\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nconstructor(name,\u00a0grade)\u00a0{\n\u00a0\u00a0super(name)\u037e\n\u00a0\u00a0this._grade\u00a0=\u00a0grade\u037e\n\u00a0\u00a0if\u00a0(this.isPrivileged)\u00a0this.assignCar()\u037e\u00a0//\u00a0every\u00a0subclass\u00a0does\u00a0this\n}\nget\u00a0isPrivileged()\u00a0{\n\u00a0\u00a0return\u00a0this._grade\u00a0>\u00a04\u037e\n}\nThe\u00a0wrinkle\u00a0here\u00a0comes\u00a0from\u00a0the\u00a0fact\u00a0that\u00a0the\u00a0call\u00a0to\u00a0isPrivileged\u00a0can\u2019t\u00a0be\u00a0made\nuntil\u00a0after\u00a0the\u00a0grade\u00a0field\u00a0is\u00a0assigned,\u00a0and\u00a0that\u00a0can\u00a0only\u00a0be\u00a0done\u00a0in\u00a0the\u00a0subclass.\nIn\u00a0this\u00a0case,\u00a0I\u00a0do\u00a0Extract\u00a0Function\u00a0(106)\u00a0on\u00a0the\u00a0common\u00a0code:\nclass\u00a0Manager\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nconstructor(name,\u00a0grade)\u00a0{\n\u00a0\u00a0super(name)\u037e\n\u00a0\u00a0this._grade\u00a0=\u00a0grade\u037e\n\u00a0\u00a0this.finishConstruction()\u037e\n}\nfinishConstruction()\u00a0{\n\u00a0\u00a0if\u00a0(this.isPrivileged)\u00a0this.assignCar()\u037e\n}\nwww.EBooksWorld.ir\n", "page": 398, "type": "text", "section": "Page 398"}
{"text": "Then,\u00a0I\u00a0use\u00a0Pull\u00a0Up\u00a0Method\u00a0(350)\u00a0to\u00a0move\u00a0it\u00a0to\u00a0the\u00a0superclass.\nclass\u00a0Employee\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfinishConstruction()\u00a0{\n\u00a0\u00a0if\u00a0(this.isPrivileged)\u00a0this.assignCar()\u037e\n}\nPUSH DOWN METHOD\ninverse\u00a0of:\u00a0Pull\u00a0Up\u00a0Method\u00a0(350)\nMotivation\nIf\u00a0a\u00a0method\u00a0is\u00a0only\u00a0relevant\u00a0to\u00a0one\u00a0subclass\u00a0(or\u00a0a\u00a0small\u00a0proportion\u00a0of\u00a0subclasses),\nremoving\u00a0it\u00a0from\u00a0the\u00a0superclass\u00a0and\u00a0putting\u00a0it\u00a0only\u00a0on\u00a0the\u00a0subclass(es)\u00a0makes\u00a0that\nclearer.\u00a0I\u00a0can\u00a0only\u00a0do\u00a0this\u00a0refactoring\u00a0if\u00a0the\u00a0caller\u00a0knows\u00a0it\u2019s\u00a0working\u00a0with\u00a0a\u00a0particular\nsubclass\u2014otherwise,\u00a0I\u00a0should\u00a0use\u00a0Replace\u00a0Conditional\u00a0with\u00a0Polymorphism\u00a0(272)\u00a0with\nsome\u00a0placebo\u00a0behavior\u00a0on\u00a0the\u00a0superclass.\nMechanics\nwww.EBooksWorld.ir\n", "page": 399, "type": "text", "section": "Page 399"}
{"text": "Mechanics\nCopy\u00a0the\u00a0method\u00a0into\u00a0every\u00a0subclass\u00a0that\u00a0needs\u00a0it.\nRemove\u00a0the\u00a0method\u00a0from\u00a0the\u00a0superclass.\nTest.\nRemove\u00a0the\u00a0method\u00a0from\u00a0each\u00a0superclass\u00a0that\u00a0doesn\u2019t\u00a0need\u00a0it.\nTest.\nPUSH DOWN FIELD\ninverse\u00a0of:\u00a0Pull\u00a0Up\u00a0Field\u00a0(353)\nMotivation\nIf\u00a0a\u00a0field\u00a0is\u00a0only\u00a0used\u00a0by\u00a0one\u00a0subclass\u00a0(or\u00a0a\u00a0small\u00a0proportion\u00a0of\u00a0subclasses),\u00a0I\u00a0move\u00a0it\u00a0to\nthose\u00a0subclasses.\nMechanics\nwww.EBooksWorld.ir\n", "page": 400, "type": "text", "section": "Page 400"}
{"text": "Declare\u00a0field\u00a0in\u00a0all\u00a0subclasses\u00a0that\u00a0need\u00a0it.\nRemove\u00a0the\u00a0field\u00a0from\u00a0the\u00a0superclass.\nTest.\nRemove\u00a0the\u00a0field\u00a0from\u00a0all\u00a0subclasses\u00a0that\u00a0don\u2019t\u00a0need\u00a0it.\nTest.\nREPLACE TYPE CODE WITH SUBCLASSES\nsubsumes:\u00a0Replace\u00a0Type\u00a0Code\u00a0with\u00a0State/Strategy\nsubsumes:\u00a0Extract\u00a0Subclass\ninverse\u00a0of:\u00a0Remove\u00a0Subclass\u00a0(369)\nMotivation\nSoftware\u00a0systems\u00a0often\u00a0need\u00a0to\u00a0represent\u00a0different\u00a0kinds\u00a0of\u00a0a\u00a0similar\u00a0thing.\u00a0I\u00a0may\nclassify\u00a0employees\u00a0by\u00a0their\u00a0job\u00a0type\u00a0(engineer,\u00a0manager,\u00a0salesman),\u00a0or\u00a0orders\u00a0by\u00a0their\npriority\u00a0(rush,\u00a0regular).\u00a0My\u00a0first\u00a0tool\u00a0for\u00a0handling\u00a0this\u00a0is\u00a0some\u00a0kind\u00a0of\u00a0type\u00a0code\u00a0field\u2014\nwww.EBooksWorld.ir\n", "page": 401, "type": "text", "section": "Page 401"}
{"text": "depending\u00a0on\u00a0the\u00a0language,\u00a0that\u00a0might\u00a0be\u00a0an\u00a0enum,\u00a0symbol,\u00a0string,\u00a0or\u00a0number.\u00a0Often,\nthis\u00a0type\u00a0code\u00a0will\u00a0come\u00a0from\u00a0an\u00a0external\u00a0service\u00a0that\u00a0provides\u00a0me\u00a0with\u00a0the\u00a0data\u00a0I\u2019m\nworking\u00a0on.\nMost\u00a0of\u00a0the\u00a0time,\u00a0such\u00a0a\u00a0type\u00a0code\u00a0is\u00a0all\u00a0I\u00a0need.\u00a0But\u00a0there\u00a0are\u00a0a\u00a0couple\u00a0of\u00a0situations\nwhere\u00a0I\u00a0could\u00a0do\u00a0with\u00a0something\u00a0more,\u00a0and\u00a0that\u00a0something\u00a0more\u00a0are\u00a0subclasses.\u00a0There\nare\u00a0two\u00a0things\u00a0that\u00a0are\u00a0particularly\u00a0enticing\u00a0about\u00a0subclasses.\u00a0First,\u00a0they\u00a0allow\u00a0me\u00a0to\nuse\u00a0polymorphism\u00a0to\u00a0handle\u00a0conditional\u00a0logic.\u00a0I\u00a0find\u00a0this\u00a0most\u00a0helpful\u00a0when\u00a0I\u00a0have\nseveral\u00a0functions\u00a0that\u00a0invoke\u00a0different\u00a0behavior\u00a0depending\u00a0on\u00a0the\u00a0value\u00a0of\u00a0the\u00a0type\ncode.\u00a0With\u00a0subclasses,\u00a0I\u00a0can\u00a0apply\u00a0Replace\u00a0Conditional\u00a0with\u00a0Polymorphism\u00a0(272)\u00a0to\nthese\u00a0functions.\nThe\u00a0second\u00a0case\u00a0is\u00a0where\u00a0I\u00a0have\u00a0fields\u00a0or\u00a0methods\u00a0that\u00a0are\u00a0only\u00a0valid\u00a0for\u00a0particular\nvalues\u00a0of\u00a0a\u00a0type\u00a0code,\u00a0such\u00a0as\u00a0a\u00a0sales\u00a0quota\u00a0that\u2019s\u00a0only\u00a0applicable\u00a0to\u00a0the\u00a0\u201csalesman\u201d\u00a0type\ncode.\u00a0I\u00a0can\u00a0then\u00a0create\u00a0the\u00a0subclass\u00a0and\u00a0apply\u00a0Push\u00a0Down\u00a0Field\u00a0(361).\u00a0While\u00a0I\u00a0can\ninclude\u00a0validation\u00a0logic\u00a0to\u00a0ensure\u00a0a\u00a0field\u00a0is\u00a0only\u00a0used\u00a0when\u00a0the\u00a0type\u00a0code\u00a0has\u00a0the\u00a0correct\nvalue,\u00a0using\u00a0a\u00a0subclass\u00a0makes\u00a0the\u00a0relationship\u00a0more\u00a0explicit.\nWhen\u00a0using\u00a0Replace\u00a0Type\u00a0Code\u00a0with\u00a0Subclasses,\u00a0I\u00a0need\u00a0to\u00a0consider\u00a0whether\u00a0to\u00a0apply\u00a0it\ndirectly\u00a0to\u00a0the\u00a0class\u00a0I\u2019m\u00a0looking\u00a0at,\u00a0or\u00a0to\u00a0the\u00a0type\u00a0code\u00a0itself.\u00a0Do\u00a0I\u00a0make\u00a0engineer\u00a0a\nsubtype\u00a0of\u00a0employee,\u00a0or\u00a0should\u00a0I\u00a0give\u00a0the\u00a0employee\u00a0an\u00a0employee\u00a0type\u00a0property\u00a0which\ncan\u00a0have\u00a0subtypes\u00a0for\u00a0engineer\u00a0and\u00a0manager?\u00a0Using\u00a0direct\u00a0subclassing\u00a0is\u00a0simpler,\u00a0but\u00a0I\ncan\u2019t\u00a0use\u00a0it\u00a0for\u00a0the\u00a0job\u00a0type\u00a0if\u00a0I\u00a0need\u00a0it\u00a0for\u00a0something\u00a0else.\u00a0I\u00a0also\u00a0can\u2019t\u00a0use\u00a0direct\nsubclasses\u00a0if\u00a0the\u00a0type\u00a0is\u00a0mutable.\u00a0If\u00a0I\u00a0need\u00a0to\u00a0move\u00a0the\u00a0subclasses\u00a0to\u00a0an\u00a0employee\u00a0type\nproperty,\u00a0I\u00a0can\u00a0do\u00a0that\u00a0by\u00a0using\u00a0Replace\u00a0Primitive\u00a0with\u00a0Object\u00a0(174)\u00a0on\u00a0the\u00a0type\u00a0code\u00a0to\ncreate\u00a0an\u00a0employee\u00a0type\u00a0class\u00a0and\u00a0then\u00a0using\u00a0Replace\u00a0Type\u00a0Code\u00a0with\u00a0Subclasses\u00a0on\nthat\u00a0new\u00a0class.\nMechanics\nSelf\u00adencapsulate\u00a0the\u00a0type\u00a0code\u00a0field.\nPick\u00a0one\u00a0type\u00a0code\u00a0value.\u00a0Create\u00a0a\u00a0subclass\u00a0for\u00a0that\u00a0type\u00a0code.\u00a0Override\u00a0the\u00a0type\ncode\u00a0getter\u00a0to\u00a0return\u00a0the\u00a0literal\u00a0type\u00a0code\u00a0value.\nCreate\u00a0selector\u00a0logic\u00a0to\u00a0map\u00a0from\u00a0the\u00a0type\u00a0code\u00a0parameter\u00a0to\u00a0the\u00a0new\u00a0subclass.\nWith\u00a0direct\u00a0inheritance,\u00a0use\u00a0Replace\u00a0Constructor\u00a0with\u00a0Factory\u00a0Function\u00a0(334)\u00a0and\nput\u00a0the\u00a0selector\u00a0logic\u00a0in\u00a0the\u00a0factory.\u00a0With\u00a0indirect\u00a0inheritance,\u00a0the\u00a0selector\u00a0logic\u00a0may\nstay\u00a0in\u00a0the\u00a0constructor.\nwww.EBooksWorld.ir\n", "page": 402, "type": "text", "section": "Page 402"}
{"text": "Test.\nRepeat\u00a0creating\u00a0the\u00a0subclass\u00a0and\u00a0adding\u00a0to\u00a0the\u00a0selector\u00a0logic\u00a0for\u00a0each\u00a0type\u00a0code\nvalue.\u00a0Test\u00a0after\u00a0each\u00a0change.\nRemove\u00a0the\u00a0type\u00a0code\u00a0field.\nTest.\nUse\u00a0Push\u00a0Down\u00a0Method\u00a0(359)\u00a0and\u00a0Replace\u00a0Conditional\u00a0with\u00a0Polymorphism\u00a0(272)\non\u00a0any\u00a0methods\u00a0that\u00a0use\u00a0the\u00a0type\u00a0code\u00a0accessors.\u00a0Once\u00a0all\u00a0are\u00a0replaced,\u00a0you\u00a0can\nremove\u00a0the\u00a0type\u00a0code\u00a0accessors.\nExample\nI\u2019ll\u00a0start\u00a0with\u00a0this\u00a0overused\u00a0employee\u00a0example:\nclass\u00a0Employee\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nconstructor(name,\u00a0type){\n\u00a0\u00a0this.validateType(type)\u037e\n\u00a0\u00a0this._name\u00a0=\u00a0name\u037e\n\u00a0\u00a0this._type\u00a0=\u00a0type\u037e\n}\nvalidateType(arg)\u00a0{\n\u00a0\u00a0if\u00a0(![\"engineer\",\u00a0\"manager\",\u00a0\"salesman\"].includes(arg))\n\u00a0\u00a0\u00a0\u00a0throw\u00a0new\u00a0Error(`Employee\u00a0cannot\u00a0be\u00a0of\u00a0type\u00a0${arg}`)\u037e\n}\ntoString()\u00a0{return\u00a0`${this._name}\u00a0(${this._type})`\u037e}\nMy\u00a0first\u00a0step\u00a0is\u00a0to\u00a0use\u00a0Encapsulate\u00a0Variable\u00a0(132)\u00a0to\u00a0self\u00adencapsulate\u00a0the\u00a0type\u00a0code.\nclass\u00a0Employee\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nget\u00a0type()\u00a0{return\u00a0this._type\u037e}\ntoString()\u00a0{return\u00a0`${this._name}\u00a0(${this.type})`\u037e}\nNote\u00a0that\u00a0toString\u00a0uses\u00a0the\u00a0new\u00a0getter\u00a0by\u00a0removing\u00a0the\u00a0underscore.\nI\u00a0pick\u00a0one\u00a0type\u00a0code,\u00a0the\u00a0engineer,\u00a0to\u00a0start\u00a0with.\u00a0I\u00a0use\u00a0direct\u00a0inheritance,\u00a0subclassing\u00a0the\nwww.EBooksWorld.ir\n", "page": 403, "type": "text", "section": "Page 403"}
{"text": "employee\u00a0class\u00a0itself.\u00a0The\u00a0employee\u00a0subclass\u00a0is\u00a0simple\u2014just\u00a0overriding\u00a0the\u00a0type\u00a0code\ngetter\u00a0with\u00a0the\u00a0appropriate\u00a0literal\u00a0value.\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nclass\u00a0Engineer\u00a0extends\u00a0Employee\u00a0{\n\u00a0\u00a0get\u00a0type()\u00a0{return\u00a0\"engineer\"\u037e}\n}\nAlthough\u00a0JavaScript\u00a0constructors\u00a0can\u00a0return\u00a0other\u00a0objects,\u00a0things\u00a0will\u00a0get\u00a0messy\u00a0if\u00a0I\u00a0try\nto\u00a0put\u00a0selector\u00a0logic\u00a0in\u00a0there,\u00a0since\u00a0that\u00a0logic\u00a0gets\u00a0intertwined\u00a0with\u00a0field\u00a0initialization.\u00a0So\nI\u00a0use\u00a0Replace\u00a0Constructor\u00a0with\u00a0Factory\u00a0Function\u00a0(334)\u00a0to\u00a0create\u00a0a\u00a0new\u00a0space\u00a0for\u00a0it.\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0createEmployee(name,\u00a0type)\u00a0{\n\u00a0\u00a0return\u00a0new\u00a0Employee(name,\u00a0type)\u037e\n}\nTo\u00a0use\u00a0the\u00a0new\u00a0subclass,\u00a0I\u00a0add\u00a0selector\u00a0logic\u00a0into\u00a0the\u00a0factory.\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0createEmployee(name,\u00a0type)\u00a0{\n\u00a0\u00a0switch\u00a0(type)\u00a0{\n\u00a0\u00a0\u00a0\u00a0case\u00a0\"engineer\":\u00a0return\u00a0new\u00a0Engineer(name,\u00a0type)\u037e\n\u00a0\u00a0}\n\u00a0\u00a0return\u00a0new\u00a0Employee(name,\u00a0type)\u037e\n}\nI\u00a0test\u00a0to\u00a0ensure\u00a0that\u00a0worked\u00a0out\u00a0correctly.\u00a0But,\u00a0because\u00a0I\u2019m\u00a0paranoid,\u00a0I\u00a0then\u00a0alter\u00a0the\nreturn\u00a0value\u00a0of\u00a0the\u00a0engineer\u2019s\u00a0override\u00a0and\u00a0test\u00a0again\u00a0to\u00a0ensure\u00a0the\u00a0test\u00a0fails.\u00a0That\u00a0way\u00a0I\nknow\u00a0the\u00a0subclass\u00a0is\u00a0being\u00a0used.\u00a0I\u00a0correct\u00a0the\u00a0return\u00a0value\u00a0and\u00a0continue\u00a0with\u00a0the\u00a0other\ncases.\u00a0I\u00a0can\u00a0do\u00a0them\u00a0one\u00a0at\u00a0a\u00a0time,\u00a0testing\u00a0after\u00a0each\u00a0change.\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nclass\u00a0Salesman\u00a0extends\u00a0Employee\u00a0{\n\u00a0\u00a0get\u00a0type()\u00a0{return\u00a0\"salesman\"\u037e}\n}\nclass\u00a0Manager\u00a0extends\u00a0Employee\u00a0{\n\u00a0\u00a0get\u00a0type()\u00a0{return\u00a0\"manager\"\u037e}\nwww.EBooksWorld.ir\n", "page": 404, "type": "text", "section": "Page 404"}
{"text": "}\nfunction\u00a0createEmployee(name,\u00a0type)\u00a0{\n\u00a0\u00a0switch\u00a0(type)\u00a0{\n\u00a0\u00a0\u00a0\u00a0case\u00a0\"engineer\":\u00a0return\u00a0new\u00a0Engineer(name,\u00a0type)\u037e\n\u00a0\u00a0\u00a0\u00a0case\u00a0\"salesman\":\u00a0return\u00a0new\u00a0Salesman(name,\u00a0type)\u037e\n\u00a0\u00a0\u00a0\u00a0case\u00a0\"manager\":\u00a0\u00a0return\u00a0new\u00a0Manager\u00a0(name,\u00a0type)\u037e\n\u00a0\u00a0}\n\u00a0\u00a0return\u00a0new\u00a0Employee(name,\u00a0type)\u037e\n}\nOnce\u00a0I\u2019m\u00a0done\u00a0with\u00a0them\u00a0all,\u00a0I\u00a0can\u00a0remove\u00a0the\u00a0type\u00a0code\u00a0field\u00a0and\u00a0the\u00a0superclass\ngetting\u00a0method\u00a0(the\u00a0ones\u00a0in\u00a0the\u00a0subclasses\u00a0remain).\nclass\u00a0Employee\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nconstructor(name,\u00a0type){\n\u00a0\u00a0this.validateType(type)\u037e\n\u00a0\u00a0this._name\u00a0=\u00a0name\u037e\n\u00a0\u00a0this._type\u00a0=\u00a0type\u037e\n}\nget\u00a0type()\u00a0{return\u00a0this._type\u037e}\ntoString()\u00a0{return\u00a0`${this._name}\u00a0(${this.type})`\u037e}\nAfter\u00a0testing\u00a0to\u00a0ensure\u00a0all\u00a0is\u00a0still\u00a0well,\u00a0I\u00a0can\u00a0remove\u00a0the\u00a0validation\u00a0logic,\u00a0since\u00a0the\u00a0switch\nis\u00a0effectively\u00a0doing\u00a0the\u00a0same\u00a0thing.\nclass\u00a0Employee\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nconstructor(name,\u00a0type){\n\u00a0\u00a0this.validateType(type)\u037e\n\u00a0\u00a0this._name\u00a0=\u00a0name\u037e\n}\nfunction\u00a0createEmployee(name,\u00a0type)\u00a0{\n\u00a0\u00a0switch\u00a0(type)\u00a0{\n\u00a0\u00a0\u00a0\u00a0case\u00a0\"engineer\":\u00a0return\u00a0new\u00a0Engineer(name,\u00a0type)\u037e\n\u00a0\u00a0\u00a0\u00a0case\u00a0\"salesman\":\u00a0return\u00a0new\u00a0Salesman(name,\u00a0type)\u037e\n\u00a0\u00a0\u00a0\u00a0case\u00a0\"manager\":\u00a0\u00a0return\u00a0new\u00a0Manager\u00a0(name,\u00a0type)\u037e\n\u00a0\u00a0\u00a0\u00a0default:\u00a0throw\u00a0new\u00a0Error(`Employee\u00a0cannot\u00a0be\u00a0of\u00a0type\u00a0${type}`)\u037e\n\u00a0\u00a0}\n\u00a0\u00a0return\u00a0new\u00a0Employee(name,\u00a0type)\u037e\nwww.EBooksWorld.ir\n", "page": 405, "type": "text", "section": "Page 405"}
{"text": "}\nThe\u00a0type\u00a0argument\u00a0to\u00a0the\u00a0constructor\u00a0is\u00a0now\u00a0useless,\u00a0so\u00a0it\u00a0falls\u00a0victim\u00a0to\u00a0Change\nFunction\u00a0Declaration\u00a0(124).\nclass\u00a0Employee\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nconstructor(name,\u00a0type){\n\u00a0\u00a0this._name\u00a0=\u00a0name\u037e\n}\nfunction\u00a0createEmployee(name,\u00a0type)\u00a0{\n\u00a0\u00a0switch\u00a0(type)\u00a0{\n\u00a0\u00a0\u00a0\u00a0case\u00a0\"engineer\":\u00a0return\u00a0new\u00a0Engineer(name,\u00a0type)\u037e\n\u00a0\u00a0\u00a0\u00a0case\u00a0\"salesman\":\u00a0return\u00a0new\u00a0Salesman(name,\u00a0type)\u037e\n\u00a0\u00a0\u00a0\u00a0case\u00a0\"manager\":\u00a0\u00a0return\u00a0new\u00a0Manager\u00a0(name,\u00a0type)\u037e\n\u00a0\u00a0\u00a0\u00a0default:\u00a0throw\u00a0new\u00a0Error(`Employee\u00a0cannot\u00a0be\u00a0of\u00a0type\u00a0${type}`)\u037e\n\u00a0\u00a0}\n}\nI\u00a0still\u00a0have\u00a0the\u00a0type\u00a0code\u00a0accessors\u00a0on\u00a0the\u00a0subclasses\u2014get\u00a0type.\u00a0I\u2019ll\u00a0usually\u00a0want\u00a0to\nremove\u00a0these\u00a0too,\u00a0but\u00a0that\u00a0may\u00a0take\u00a0a\u00a0bit\u00a0of\u00a0time\u00a0due\u00a0to\u00a0other\u00a0methods\u00a0that\u00a0depend\u00a0on\nthem.\u00a0I\u2019ll\u00a0use\u00a0Replace\u00a0Conditional\u00a0with\u00a0Polymorphism\u00a0(272)\u00a0and\u00a0Push\u00a0Down\u00a0Method\n(359)\u00a0to\u00a0deal\u00a0with\u00a0these.\u00a0At\u00a0some\u00a0point,\u00a0I\u2019ll\u00a0have\u00a0no\u00a0code\u00a0that\u00a0uses\u00a0the\u00a0type\u00a0getters,\u00a0so\u00a0I\nwill\u00a0subject\u00a0them\u00a0to\u00a0the\u00a0tender\u00a0mercies\u00a0of\u00a0Remove\u00a0Dead\u00a0Code\u00a0(237).\nExample: Using Indirect Inheritance\nLet\u2019s\u00a0go\u00a0back\u00a0to\u00a0the\u00a0starting\u00a0case\u2014but\u00a0this\u00a0time,\u00a0I\u00a0already\u00a0have\u00a0existing\u00a0subclasses\u00a0for\npart\u00adtime\u00a0and\u00a0full\u00adtime\u00a0employees,\u00a0so\u00a0I\u00a0can\u2019t\u00a0subclass\u00a0from\u00a0Employee\u00a0for\u00a0the\u00a0type\ncodes.\u00a0Another\u00a0reason\u00a0to\u00a0not\u00a0use\u00a0direct\u00a0inheritance\u00a0is\u00a0keeping\u00a0the\u00a0ability\u00a0to\u00a0change\u00a0the\ntype\u00a0of\u00a0employee.\nclass\u00a0Employee\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nconstructor(name,\u00a0type){\n\u00a0\u00a0this.validateType(type)\u037e\n\u00a0\u00a0this._name\u00a0=\u00a0name\u037e\n\u00a0\u00a0this._type\u00a0=\u00a0type\u037e\n}\nwww.EBooksWorld.ir\n", "page": 406, "type": "text", "section": "Page 406"}
{"text": "validateType(arg)\u00a0{\n\u00a0\u00a0if\u00a0(![\"engineer\",\u00a0\"manager\",\u00a0\"salesman\"].includes(arg))\n\u00a0\u00a0\u00a0\u00a0throw\u00a0new\u00a0Error(`Employee\u00a0cannot\u00a0be\u00a0of\u00a0type\u00a0${arg}`)\u037e\n}\nget\u00a0type()\u00a0\u00a0\u00a0\u00a0{return\u00a0this._type\u037e}\nset\u00a0type(arg)\u00a0{this._type\u00a0=\u00a0arg\u037e}\nget\u00a0capitalizedType()\u00a0{\n\u00a0\u00a0return\u00a0this._type.charAt(0).toUpperCase()\u00a0+\u00a0this._type.substr(1).toLowerCase()\n}\ntoString()\u00a0{\n\u00a0\u00a0return\u00a0`${this._name}\u00a0(${this.capitalizedType})`\u037e\n}\nThis\u00a0time\u00a0toString\u00a0is\u00a0a\u00a0bit\u00a0more\u00a0complicated,\u00a0to\u00a0allow\u00a0me\u00a0to\u00a0illustrate\u00a0something\nshortly.\nMy\u00a0first\u00a0step\u00a0is\u00a0to\u00a0use\u00a0Replace\u00a0Primitive\u00a0with\u00a0Object\u00a0(174)\u00a0on\u00a0the\u00a0type\u00a0code.\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nclass\u00a0EmployeeType\u00a0{\n\u00a0\u00a0constructor(aString)\u00a0{\n\u00a0\u00a0\u00a0\u00a0this._value\u00a0=\u00a0aString\u037e\n\u00a0\u00a0}\n\u00a0\u00a0toString()\u00a0{return\u00a0this._value\u037e}\n}\nclass\u00a0Employee\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nconstructor(name,\u00a0type){\n\u00a0\u00a0this.validateType(type)\u037e\n\u00a0\u00a0this._name\u00a0=\u00a0name\u037e\n\u00a0\u00a0this.type\u00a0=\u00a0type\u037e\n}\nvalidateType(arg)\u00a0{\n\u00a0\u00a0if\u00a0(![\"engineer\",\u00a0\"manager\",\u00a0\"salesman\"].includes(arg))\n\u00a0\u00a0\u00a0\u00a0throw\u00a0new\u00a0Error(`Employee\u00a0cannot\u00a0be\u00a0of\u00a0type\u00a0${arg}`)\u037e\n}\nget\u00a0typeString()\u00a0\u00a0\u00a0\u00a0{return\u00a0this._type.toString()\u037e}\nget\u00a0type()\u00a0\u00a0\u00a0\u00a0{return\u00a0this._type\u037e}\nset\u00a0type(arg)\u00a0{this._type\u00a0=\u00a0new\u00a0EmployeeType(arg)\u037e}\nget\u00a0capitalizedType()\u00a0{\n\u00a0\u00a0return\u00a0this.typeString.charAt(0).toUpperCase()\nwww.EBooksWorld.ir\n", "page": 407, "type": "text", "section": "Page 407"}
{"text": "\u00a0\u00a0\u00a0\u00a0+\u00a0this.typeString.substr(1).toLowerCase()\u037e\n}\ntoString()\u00a0{\n\u00a0\u00a0return\u00a0`${this._name}\u00a0(${this.capitalizedType})`\u037e\n}\nI\u00a0then\u00a0apply\u00a0the\u00a0usual\u00a0mechanics\u00a0of\u00a0Replace\u00a0Type\u00a0Code\u00a0with\u00a0Subclasses\u00a0to\u00a0the\u00a0employee\ntype.\nclass\u00a0Employee\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nset\u00a0type(arg)\u00a0{this._type\u00a0=\u00a0Employee.createEmployeeType(arg)\u037e}\n\u00a0\u00a0static\u00a0createEmployeeType(aString)\u00a0{\n\u00a0\u00a0\u00a0\u00a0switch(aString)\u00a0{\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0case\u00a0\"engineer\":\u00a0return\u00a0new\u00a0Engineer()\u037e\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0case\u00a0\"manager\":\u00a0return\u00a0new\u00a0Manager\u00a0()\u037e\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0case\u00a0\"salesman\":\u00a0return\u00a0new\u00a0Salesman()\u037e\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0default:\u00a0throw\u00a0new\u00a0Error(`Employee\u00a0cannot\u00a0be\u00a0of\u00a0type\u00a0${aString}`)\u037e\n\u00a0\u00a0\u00a0\u00a0}\n\u00a0\u00a0}\nclass\u00a0EmployeeType\u00a0{\n}\nclass\u00a0Engineer\u00a0extends\u00a0EmployeeType\u00a0{\n\u00a0\u00a0toString()\u00a0{return\u00a0\"engineer\"\u037e}\n}\nclass\u00a0Manager\u00a0extends\u00a0EmployeeType\u00a0{\n\u00a0\u00a0toString()\u00a0{return\u00a0\"manager\"\u037e}\n}\nclass\u00a0Salesman\u00a0extends\u00a0EmployeeType\u00a0{\n\u00a0\u00a0toString()\u00a0{return\u00a0\"salesman\"\u037e}\n}\nIf\u00a0I\u00a0were\u00a0leaving\u00a0it\u00a0at\u00a0that,\u00a0I\u00a0could\u00a0remove\u00a0the\u00a0empty\u00a0EmployeeType.\u00a0But\u00a0I\u00a0prefer\u00a0to\nleave\u00a0it\u00a0there\u00a0as\u00a0it\u00a0makes\u00a0explicit\u00a0the\u00a0relationship\u00a0between\u00a0the\u00a0various\u00a0subclasses.\u00a0It\u2019s\nalso\u00a0a\u00a0handy\u00a0spot\u00a0for\u00a0moving\u00a0other\u00a0behavior\u00a0there,\u00a0such\u00a0as\u00a0the\u00a0capitalization\u00a0logic\u00a0I\ntossed\u00a0into\u00a0the\u00a0example\u00a0specifically\u00a0to\u00a0illustrate\u00a0this\u00a0point.\nclass\u00a0Employee\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\ntoString()\u00a0{\nwww.EBooksWorld.ir\n", "page": 408, "type": "text", "section": "Page 408"}
{"text": "\u00a0\u00a0return\u00a0`${this._name}\u00a0(${this.type.capitalizedName})`\u037e\n}\nclass\u00a0EmployeeType\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nget\u00a0capitalizedName()\u00a0{\n\u00a0\u00a0return\u00a0this.toString().charAt(0).toUpperCase()\n\u00a0\u00a0\u00a0\u00a0+\u00a0this.toString().substr(1).toLowerCase()\u037e\n}\nFor\u00a0those\u00a0familiar\u00a0with\u00a0the\u00a0first\u00a0edition\u00a0of\u00a0the\u00a0book,\u00a0this\u00a0example\u00a0essentially\u00a0supersedes\nthe\u00a0Replace\u00a0Type\u00a0Code\u00a0with\u00a0State/Strategy.\u00a0I\u00a0now\u00a0think\u00a0of\u00a0that\u00a0refactoring\u00a0as\u00a0Replace\nType\u00a0Code\u00a0with\u00a0Subclasses\u00a0using\u00a0indirect\u00a0inheritance,\u00a0so\u00a0didn\u2019t\u00a0consider\u00a0it\u00a0worth\u00a0its\nown\u00a0entry\u00a0in\u00a0the\u00a0catalog.\u00a0(I\u00a0never\u00a0liked\u00a0the\u00a0name\u00a0anyway.)\nREMOVE SUBCLASS\nformerly:\u00a0Replace\u00a0Subclass\u00a0with\u00a0Fields\ninverse\u00a0of:\u00a0Replace\u00a0Type\u00a0Code\u00a0with\u00a0Subclasses\u00a0(362)\nwww.EBooksWorld.ir\n", "page": 409, "type": "text", "section": "Page 409"}
{"text": "Motivation\nSubclasses\u00a0are\u00a0useful.\u00a0They\u00a0support\u00a0variations\u00a0in\u00a0data\u00a0structure\u00a0and\u00a0polymorphic\nbehavior.\u00a0They\u00a0are\u00a0a\u00a0good\u00a0way\u00a0to\u00a0program\u00a0by\u00a0difference.\u00a0But\u00a0as\u00a0a\u00a0software\u00a0system\nevolves,\u00a0subclasses\u00a0can\u00a0lose\u00a0their\u00a0value\u00a0as\u00a0the\u00a0variations\u00a0they\u00a0support\u00a0are\u00a0moved\u00a0to\nother\u00a0places\u00a0or\u00a0removed\u00a0altogether.\u00a0Sometimes,\u00a0subclasses\u00a0are\u00a0added\u00a0in\u00a0anticipation\u00a0of\nfeatures\u00a0that\u00a0never\u00a0end\u00a0up\u00a0being\u00a0built,\u00a0or\u00a0end\u00a0up\u00a0being\u00a0built\u00a0in\u00a0a\u00a0way\u00a0that\u00a0doesn\u2019t\u00a0need\nthe\u00a0subclasses.\nA\u00a0subclass\u00a0that\u00a0does\u00a0too\u00a0little\u00a0incurs\u00a0a\u00a0cost\u00a0in\u00a0understanding\u00a0that\u00a0is\u00a0no\u00a0longer\nworthwhile.\u00a0When\u00a0that\u00a0time\u00a0comes,\u00a0it\u2019s\u00a0best\u00a0to\u00a0remove\u00a0the\u00a0subclass,\u00a0replacing\u00a0it\u00a0with\u00a0a\nfield\u00a0on\u00a0its\u00a0superclass.\nMechanics\nUse\u00a0Replace\u00a0Constructor\u00a0with\u00a0Factory\u00a0Function\u00a0(334)\u00a0on\u00a0the\u00a0subclass\u00a0constructor.\nIf\u00a0the\u00a0clients\u00a0of\u00a0the\u00a0constructors\u00a0use\u00a0a\u00a0data\u00a0field\u00a0to\u00a0decide\u00a0which\u00a0subclass\u00a0to\u00a0create,\nput\u00a0that\u00a0decision\u00a0logic\u00a0into\u00a0a\u00a0superclass\u00a0factory\u00a0method.\nIf\u00a0any\u00a0code\u00a0tests\u00a0against\u00a0the\u00a0subclass\u2019s\u00a0types,\u00a0use\u00a0Extract\u00a0Function\u00a0(106)\u00a0on\u00a0the\u00a0type\nwww.EBooksWorld.ir\n", "page": 410, "type": "text", "section": "Page 410"}
{"text": "test\u00a0and\u00a0Move\u00a0Function\u00a0(198)\u00a0to\u00a0move\u00a0it\u00a0to\u00a0the\u00a0superclass.\u00a0Test\u00a0after\u00a0each\u00a0change.\nCreate\u00a0a\u00a0field\u00a0to\u00a0represent\u00a0the\u00a0subclass\u00a0type.\nChange\u00a0the\u00a0methods\u00a0that\u00a0refer\u00a0to\u00a0the\u00a0subclass\u00a0to\u00a0use\u00a0the\u00a0new\u00a0type\u00a0field.\nDelete\u00a0the\u00a0subclass.\nTest.\nOften,\u00a0this\u00a0refactoring\u00a0is\u00a0used\u00a0on\u00a0a\u00a0group\u00a0of\u00a0subclasses\u00a0at\u00a0once\u2014in\u00a0which\u00a0case\u00a0carry\u00a0out\nthe\u00a0steps\u00a0to\u00a0encapsulate\u00a0them\u00a0(add\u00a0factory\u00a0function,\u00a0move\u00a0type\u00a0tests)\u00a0first,\u00a0then\nindividually\u00a0fold\u00a0them\u00a0into\u00a0the\u00a0superclass.\nExample\nI\u2019ll\u00a0start\u00a0with\u00a0this\u00a0stump\u00a0of\u00a0subclasses:\nclass\u00a0Person\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nconstructor(name)\u00a0{\n\u00a0\u00a0this._name\u00a0=\u00a0name\u037e\n}\nget\u00a0name()\u00a0\u00a0\u00a0\u00a0{return\u00a0this._name\u037e}\nget\u00a0genderCode()\u00a0{return\u00a0\"X\"\u037e}\n//\u00a0snip\nclass\u00a0Male\u00a0extends\u00a0Person\u00a0{\n\u00a0\u00a0get\u00a0genderCode()\u00a0{return\u00a0\"M\"\u037e}\n}\nclass\u00a0Female\u00a0extends\u00a0Person\u00a0{\n\u00a0\u00a0get\u00a0genderCode()\u00a0{return\u00a0\"F\"\u037e}\n}\nIf\u00a0that\u2019s\u00a0all\u00a0that\u00a0a\u00a0subclass\u00a0does,\u00a0it\u2019s\u00a0not\u00a0really\u00a0worth\u00a0having.\u00a0But\u00a0before\u00a0I\u00a0remove\u00a0these\nsubclasses,\u00a0it\u2019s\u00a0usually\u00a0worth\u00a0checking\u00a0to\u00a0see\u00a0if\u00a0there\u2019s\u00a0any\u00a0subclass\u00addependent\u00a0behavior\nin\u00a0the\u00a0clients\u00a0that\u00a0should\u00a0be\u00a0moved\u00a0in\u00a0there.\u00a0In\u00a0this\u00a0case,\u00a0I\u00a0don\u2019t\u00a0find\u00a0anything\u00a0worth\nkeeping\u00a0the\u00a0subclasses\u00a0for.\nclient\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nwww.EBooksWorld.ir\n", "page": 411, "type": "text", "section": "Page 411"}
{"text": "const\u00a0numberOfMales\u00a0=\u00a0people.filter(p\u00a0=>\u00a0p\u00a0instanceof\u00a0Male).length\u037e\nWhenever\u00a0I\u00a0want\u00a0to\u00a0change\u00a0how\u00a0I\u00a0represent\u00a0something,\u00a0I\u00a0try\u00a0to\u00a0first\u00a0encapsulate\u00a0the\ncurrent\u00a0representation\u00a0to\u00a0minimize\u00a0the\u00a0impact\u00a0on\u00a0any\u00a0client\u00a0code.\u00a0When\u00a0it\u00a0comes\u00a0to\ncreating\u00a0subclasses,\u00a0the\u00a0way\u00a0to\u00a0encapsulate\u00a0is\u00a0to\u00a0use\u00a0Replace\u00a0Constructor\u00a0with\u00a0Factory\nFunction\u00a0(334).\u00a0In\u00a0this\u00a0case,\u00a0there\u2019s\u00a0a\u00a0couple\u00a0of\u00a0ways\u00a0I\u00a0could\u00a0make\u00a0the\u00a0factory.\nThe\u00a0most\u00a0direct\u00a0way\u00a0is\u00a0to\u00a0create\u00a0a\u00a0factory\u00a0method\u00a0for\u00a0each\u00a0constructor.\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0createPerson(name)\u00a0{\n\u00a0\u00a0return\u00a0new\u00a0Person(name)\u037e\n}\nfunction\u00a0createMale(name)\u00a0{\n\u00a0\u00a0return\u00a0new\u00a0Male(name)\u037e\n}\nfunction\u00a0createFemale(name)\u00a0{\n\u00a0\u00a0return\u00a0new\u00a0Female(name)\u037e\n}\nBut\u00a0although\u00a0that\u2019s\u00a0the\u00a0direct\u00a0choice,\u00a0objects\u00a0like\u00a0this\u00a0are\u00a0often\u00a0loaded\u00a0from\u00a0a\u00a0source\nthat\u00a0uses\u00a0the\u00a0gender\u00a0codes\u00a0directly.\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0loadFromInput(data)\u00a0{\n\u00a0\u00a0const\u00a0result\u00a0=\u00a0[]\u037e\n\u00a0\u00a0data.forEach(aRecord\u00a0=>\u00a0{\n\u00a0\u00a0\u00a0\u00a0let\u00a0p\u037e\n\u00a0\u00a0\u00a0\u00a0switch\u00a0(aRecord.gender)\u00a0{\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0case\u00a0'M':\u00a0p\u00a0=\u00a0new\u00a0Male(aRecord.name)\u037e\u00a0break\u037e\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0case\u00a0'F':\u00a0p\u00a0=\u00a0new\u00a0Female(aRecord.name)\u037e\u00a0break\u037e\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0default:\u00a0p\u00a0=\u00a0new\u00a0Person(aRecord.name)\u037e\n\u00a0\u00a0\u00a0\u00a0}\n\u00a0\u00a0\u00a0\u00a0result.push(p)\u037e\n\u00a0\u00a0})\u037e\n\u00a0\u00a0return\u00a0result\u037e\n}\nIn\u00a0that\u00a0case,\u00a0I\u00a0find\u00a0it\u00a0better\u00a0to\u00a0use\u00a0Extract\u00a0Function\u00a0(106)\u00a0on\u00a0the\u00a0selection\u00a0logic\u00a0for\nwhich\u00a0class\u00a0to\u00a0create,\u00a0and\u00a0make\u00a0that\u00a0the\u00a0factory\u00a0function.\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nwww.EBooksWorld.ir\n", "page": 412, "type": "text", "section": "Page 412"}
{"text": "function\u00a0createPerson(aRecord)\u00a0{\n\u00a0\u00a0let\u00a0p\u037e\n\u00a0\u00a0switch\u00a0(aRecord.gender)\u00a0{\n\u00a0\u00a0\u00a0\u00a0case\u00a0'M':\u00a0p\u00a0=\u00a0new\u00a0Male(aRecord.name)\u037e\u00a0break\u037e\n\u00a0\u00a0\u00a0\u00a0case\u00a0'F':\u00a0p\u00a0=\u00a0new\u00a0Female(aRecord.name)\u037e\u00a0break\u037e\n\u00a0\u00a0\u00a0\u00a0default:\u00a0p\u00a0=\u00a0new\u00a0Person(aRecord.name)\u037e\n\u00a0\u00a0}\n\u00a0\u00a0return\u00a0p\u037e\n}\nfunction\u00a0loadFromInput(data)\u00a0{\n\u00a0\u00a0const\u00a0result\u00a0=\u00a0[]\u037e\n\u00a0\u00a0data.forEach(aRecord\u00a0=>\u00a0{\n\u00a0\u00a0\u00a0\u00a0result.push(createPerson(aRecord))\u037e\n\u00a0\u00a0})\u037e\n\u00a0\u00a0return\u00a0result\u037e\n}\nWhile\u00a0I\u2019m\u00a0there,\u00a0I\u2019ll\u00a0clean\u00a0up\u00a0those\u00a0two\u00a0functions.\u00a0I\u2019ll\u00a0use\u00a0Inline\u00a0Variable\u00a0(123)\u00a0on\ncreatePerson:\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0createPerson(aRecord)\u00a0{\n\u00a0\u00a0switch\u00a0(aRecord.gender)\u00a0{\n\u00a0\u00a0\u00a0\u00a0case\u00a0'M':\u00a0return\u00a0new\u00a0Male\u00a0\u00a0(aRecord.name)\u037e\n\u00a0\u00a0\u00a0\u00a0case\u00a0'F':\u00a0return\u00a0new\u00a0Female(aRecord.name)\u037e\n\u00a0\u00a0\u00a0\u00a0default:\u00a0\u00a0return\u00a0new\u00a0Person(aRecord.name)\u037e\n\u00a0\u00a0}\n}\nand\u00a0Replace\u00a0Loop\u00a0with\u00a0Pipeline\u00a0(231)\u00a0on\u00a0loadFromInput:\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0loadFromInput(data)\u00a0{\n\u00a0\u00a0return\u00a0data.map(aRecord\u00a0=>\u00a0createPerson(aRecord))\u037e\n}\nThe\u00a0factory\u00a0encapsulates\u00a0the\u00a0creation\u00a0of\u00a0the\u00a0subclasses,\u00a0but\u00a0there\u00a0is\u00a0also\u00a0the\u00a0use\u00a0of\ninstanceof\u2014which\u00a0never\u00a0smells\u00a0good.\u00a0I\u00a0use\u00a0Extract\u00a0Function\u00a0(106)\u00a0on\u00a0the\u00a0type\ncheck.\nclient\u2026\nwww.EBooksWorld.ir\n", "page": 413, "type": "text", "section": "Page 413"}
{"text": "Click\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nconst\u00a0numberOfMales\u00a0=\u00a0people.filter(p\u00a0=>\u00a0isMale(p)).length\u037e\nfunction\u00a0isMale(aPerson)\u00a0{return\u00a0aPerson\u00a0instanceof\u00a0Male\u037e}\nThen\u00a0I\u00a0use\u00a0Move\u00a0Function\u00a0(198)\u00a0to\u00a0move\u00a0it\u00a0into\u00a0Person.\nclass\u00a0Person\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nget\u00a0isMale()\u00a0{return\u00a0this\u00a0instanceof\u00a0Male\u037e}\nclient\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nconst\u00a0numberOfMales\u00a0=\u00a0people.filter(p\u00a0=>\u00a0p.isMale).length\u037e\nWith\u00a0that\u00a0refactoring\u00a0done,\u00a0all\u00a0knowledge\u00a0of\u00a0the\u00a0subclasses\u00a0is\u00a0now\u00a0safely\u00a0encased\u00a0within\nthe\u00a0superclass\u00a0and\u00a0the\u00a0factory\u00a0function.\u00a0(Usually\u00a0I\u2019m\u00a0wary\u00a0of\u00a0a\u00a0superclass\u00a0referring\u00a0to\u00a0a\nsubclass,\u00a0but\u00a0this\u00a0code\u00a0isn\u2019t\u00a0going\u00a0to\u00a0last\u00a0until\u00a0my\u00a0next\u00a0cup\u00a0of\u00a0tea,\u00a0so\u00a0I\u2019m\u00a0not\u00a0going\u00a0worry\nabout\u00a0it.)\nI\u00a0now\u00a0add\u00a0a\u00a0field\u00a0to\u00a0represent\u00a0the\u00a0difference\u00a0between\u00a0the\u00a0subclasses\u037e\u00a0since\u00a0I\u2019m\u00a0using\u00a0a\ncode\u00a0loaded\u00a0from\u00a0elsewhere,\u00a0I\u00a0might\u00a0as\u00a0well\u00a0just\u00a0use\u00a0that.\nclass\u00a0Person\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nconstructor(name,\u00a0genderCode)\u00a0{\n\u00a0\u00a0this._name\u00a0=\u00a0name\u037e\n\u00a0\u00a0this._genderCode\u00a0=\u00a0genderCode\u00a0||\u00a0\"X\"\u037e\n}\nget\u00a0genderCode()\u00a0{return\u00a0this._genderCode\u037e}\nWhen\u00a0initializing\u00a0it,\u00a0I\u00a0set\u00a0it\u00a0to\u00a0the\u00a0default\u00a0case.\u00a0(As\u00a0a\u00a0side\u00a0note,\u00a0although\u00a0most\u00a0people\ncan\u00a0be\u00a0classified\u00a0as\u00a0male\u00a0or\u00a0female,\u00a0there\u00a0are\u00a0people\u00a0who\u00a0can\u2019t.\u00a0It\u2019s\u00a0a\u00a0common\u00a0modeling\nwww.EBooksWorld.ir\n", "page": 414, "type": "text", "section": "Page 414"}
{"text": "mistake\u00a0to\u00a0forget\u00a0that.)\nI\u00a0then\u00a0take\u00a0the\u00a0male\u00a0case\u00a0and\u00a0fold\u00a0its\u00a0logic\u00a0into\u00a0the\u00a0superclass.\u00a0This\u00a0involves\u00a0modifying\nthe\u00a0factory\u00a0to\u00a0return\u00a0a\u00a0Person\u00a0and\u00a0modifying\u00a0any\u00a0instanceof\u00a0tests\u00a0to\u00a0use\u00a0the\u00a0gender\ncode\u00a0field.\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0createPerson(aRecord)\u00a0{\n\u00a0\u00a0switch\u00a0(aRecord.gender)\u00a0{\n\u00a0\u00a0\u00a0\u00a0case\u00a0'M':\u00a0return\u00a0new\u00a0Person(aRecord.name,\u00a0\"M\")\u037e\n\u00a0\u00a0\u00a0\u00a0case\u00a0'F':\u00a0return\u00a0new\u00a0Female(aRecord.name)\u037e\n\u00a0\u00a0\u00a0\u00a0default:\u00a0\u00a0return\u00a0new\u00a0Person(aRecord.name)\u037e\n\u00a0\u00a0}\n}\nclass\u00a0Person\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nget\u00a0isMale()\u00a0{return\u00a0\"M\"\u00a0===\u00a0this._genderCode\u037e}\nI\u00a0test,\u00a0remove\u00a0the\u00a0male\u00a0subclass,\u00a0test\u00a0again,\u00a0and\u00a0repeat\u00a0for\u00a0the\u00a0female\u00a0subclass.\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0createPerson(aRecord)\u00a0{\n\u00a0\u00a0switch\u00a0(aRecord.gender)\u00a0{\n\u00a0\u00a0\u00a0\u00a0case\u00a0'M':\u00a0return\u00a0new\u00a0Person(aRecord.name,\u00a0\"M\")\u037e\n\u00a0\u00a0\u00a0\u00a0case\u00a0'F':\u00a0return\u00a0new\u00a0Person(aRecord.name,\u00a0\"F\")\u037e\n\u00a0\u00a0\u00a0\u00a0default:\u00a0\u00a0return\u00a0new\u00a0Person(aRecord.name)\u037e\n\u00a0\u00a0}\n}\nI\u00a0find\u00a0the\u00a0lack\u00a0of\u00a0symmetry\u00a0with\u00a0the\u00a0gender\u00a0code\u00a0to\u00a0be\u00a0annoying.\u00a0A\u00a0future\u00a0reader\u00a0of\u00a0the\ncode\u00a0will\u00a0always\u00a0wonder\u00a0about\u00a0this\u00a0lack\u00a0of\u00a0symmetry.\u00a0So\u00a0I\u00a0prefer\u00a0to\u00a0change\u00a0the\u00a0code\u00a0to\nmake\u00a0it\u00a0symmetrical\u2014if\u00a0I\u00a0can\u00a0do\u00a0it\u00a0without\u00a0introducing\u00a0any\u00a0other\u00a0complexity,\u00a0which\u00a0is\nthe\u00a0case\u00a0here.\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0createPerson(aRecord)\u00a0{\n\u00a0\u00a0switch\u00a0(aRecord.gender)\u00a0{\nwww.EBooksWorld.ir\n", "page": 415, "type": "text", "section": "Page 415"}
{"text": "\u00a0\u00a0\u00a0\u00a0case\u00a0'M':\u00a0return\u00a0new\u00a0Person(aRecord.name,\u00a0\"M\")\u037e\n\u00a0\u00a0\u00a0\u00a0case\u00a0'F':\u00a0return\u00a0new\u00a0Person(aRecord.name,\u00a0\"F\")\u037e\n\u00a0\u00a0\u00a0\u00a0default:\u00a0\u00a0return\u00a0new\u00a0Person(aRecord.name,\u00a0\"X\")\u037e\n\u00a0\u00a0}\n}\nclass\u00a0Person\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nconstructor(name,\u00a0genderCode)\u00a0{\n\u00a0\u00a0this._name\u00a0=\u00a0name\u037e\n\u00a0\u00a0this._genderCode\u00a0=\u00a0genderCode\u00a0||\u00a0\"X\"\u037e\n}\nEXTRACT SUPERCLASS\nwww.EBooksWorld.ir\n", "page": 416, "type": "text", "section": "Page 416"}
{"text": "Motivation\nIf\u00a0I\u00a0see\u00a0two\u00a0classes\u00a0doing\u00a0similar\u00a0things,\u00a0I\u00a0can\u00a0take\u00a0advantage\u00a0of\u00a0the\u00a0basic\u00a0mechanism\u00a0of\ninheritance\u00a0to\u00a0pull\u00a0their\u00a0similarities\u00a0together\u00a0into\u00a0a\u00a0superclass.\u00a0I\u00a0can\u00a0use\u00a0Pull\u00a0Up\u00a0Field\n(353)\u00a0to\u00a0move\u00a0common\u00a0data\u00a0into\u00a0the\u00a0superclass,\u00a0and\u00a0Pull\u00a0Up\u00a0Method\u00a0(350)\u00a0to\u00a0move\u00a0the\ncommon\u00a0behavior.\nMany\u00a0writers\u00a0on\u00a0object\u00a0orientation\u00a0treat\u00a0inheritance\u00a0as\u00a0something\u00a0that\u00a0should\u00a0be\ncarefully\u00a0planned\u00a0in\u00a0advance,\u00a0based\u00a0on\u00a0some\u00a0kind\u00a0of\u00a0classification\u00a0structure\u00a0in\u00a0the\u00a0\u201creal\nworld.\u201d\u00a0Such\u00a0classification\u00a0structures\u00a0can\u00a0be\u00a0a\u00a0hint\u00a0towards\u00a0using\u00a0inheritance\u2014but\u00a0just\nwww.EBooksWorld.ir\n", "page": 417, "type": "text", "section": "Page 417"}
{"text": "as\u00a0often\u00a0inheritance\u00a0is\u00a0something\u00a0I\u00a0realize\u00a0during\u00a0the\u00a0evolution\u00a0of\u00a0a\u00a0program,\u00a0as\u00a0I\u00a0find\ncommon\u00a0elements\u00a0that\u00a0I\u00a0want\u00a0to\u00a0pull\u00a0together.\nAn\u00a0alternative\u00a0to\u00a0Extract\u00a0Superclass\u00a0is\u00a0Extract\u00a0Class\u00a0(182).\u00a0Here\u00a0you\u00a0have,\u00a0essentially,\u00a0a\nchoice\u00a0between\u00a0using\u00a0inheritance\u00a0or\u00a0delegation\u00a0as\u00a0a\u00a0way\u00a0to\u00a0unify\u00a0duplicate\u00a0behavior.\nOften\u00a0Extract\u00a0Superclass\u00a0is\u00a0the\u00a0simpler\u00a0approach,\u00a0so\u00a0I\u2019ll\u00a0do\u00a0this\u00a0first\u00a0knowing\u00a0I\u00a0can\u00a0use\nReplace\u00a0Superclass\u00a0with\u00a0Delegate\u00a0(399)\u00a0should\u00a0I\u00a0need\u00a0to\u00a0later.\nMechanics\nCreate\u00a0an\u00a0empty\u00a0superclass.\u00a0Make\u00a0the\u00a0original\u00a0classes\u00a0its\u00a0subclasses.\nIf\u00a0needed,\u00a0use\u00a0Change\u00a0Function\u00a0Declaration\u00a0(124)\u00a0on\u00a0the\u00a0constructors.\nTest.\nOne\u00a0by\u00a0one,\u00a0use\u00a0Pull\u00a0Up\u00a0Constructor\u00a0Body\u00a0(355),\u00a0Pull\u00a0Up\u00a0Method\u00a0(350),\u00a0and\u00a0Pull\nUp\u00a0Field\u00a0(353)\u00a0to\u00a0move\u00a0common\u00a0elements\u00a0to\u00a0the\u00a0superclass.\nExamine\u00a0remaining\u00a0methods\u00a0on\u00a0the\u00a0subclasses.\u00a0See\u00a0if\u00a0there\u00a0are\u00a0common\u00a0parts.\u00a0If\u00a0so,\nuse\u00a0Extract\u00a0Function\u00a0(106)\u00a0followed\u00a0by\u00a0Pull\u00a0Up\u00a0Method\u00a0(350).\nCheck\u00a0clients\u00a0of\u00a0the\u00a0original\u00a0classes.\u00a0Consider\u00a0adjusting\u00a0them\u00a0to\u00a0use\u00a0the\u00a0superclass\ninterface.\nExample\nI\u2019m\u00a0pondering\u00a0these\u00a0two\u00a0classes,\u00a0they\u00a0share\u00a0some\u00a0common\u00a0functionality\u2014their\u00a0name\nand\u00a0the\u00a0notions\u00a0of\u00a0annual\u00a0and\u00a0monthly\u00a0costs:\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nclass\u00a0Employee\u00a0{\n\u00a0\u00a0constructor(name,\u00a0id,\u00a0monthlyCost)\u00a0{\n\u00a0\u00a0\u00a0\u00a0this._id\u00a0=\u00a0id\u037e\n\u00a0\u00a0\u00a0\u00a0this._name\u00a0=\u00a0name\u037e\n\u00a0\u00a0\u00a0\u00a0this._monthlyCost\u00a0=\u00a0monthlyCost\u037e\n\u00a0\u00a0}\n\u00a0\u00a0get\u00a0monthlyCost()\u00a0{return\u00a0this._monthlyCost\u037e}\n\u00a0\u00a0get\u00a0name()\u00a0{return\u00a0this._name\u037e}\n\u00a0\u00a0get\u00a0id()\u00a0{return\u00a0this._id\u037e}\n\u00a0\u00a0get\u00a0annualCost()\u00a0{\n\u00a0\u00a0\u00a0\u00a0return\u00a0this.monthlyCost\u00a0*\u00a012\u037e\n\u00a0\u00a0}\nwww.EBooksWorld.ir\n", "page": 418, "type": "text", "section": "Page 418"}
{"text": "}\nclass\u00a0Department\u00a0{\n\u00a0\u00a0constructor(name,\u00a0staff){\n\u00a0\u00a0\u00a0\u00a0this._name\u00a0=\u00a0name\u037e\n\u00a0\u00a0\u00a0\u00a0this._staff\u00a0=\u00a0staff\u037e\n\u00a0\u00a0}\n\u00a0\u00a0get\u00a0staff()\u00a0{return\u00a0this._staff.slice()\u037e}\n\u00a0\u00a0get\u00a0name()\u00a0{return\u00a0this._name\u037e}\n\u00a0\u00a0get\u00a0totalMonthlyCost()\u00a0{\n\u00a0\u00a0\u00a0\u00a0return\u00a0this.staff\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0.map(e\u00a0=>\u00a0e.monthlyCost)\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0.reduce((sum,\u00a0cost)\u00a0=>\u00a0sum\u00a0+\u00a0cost)\u037e\n\u00a0\u00a0}\n\u00a0\u00a0get\u00a0headCount()\u00a0{\n\u00a0\u00a0\u00a0\u00a0return\u00a0this.staff.length\u037e\n\u00a0\u00a0}\n\u00a0\u00a0get\u00a0totalAnnualCost()\u00a0{\n\u00a0\u00a0\u00a0\u00a0return\u00a0this.totalMonthlyCost\u00a0*\u00a012\u037e\n\u00a0\u00a0}\n}\nI\u00a0can\u00a0make\u00a0the\u00a0common\u00a0behavior\u00a0more\u00a0explicit\u00a0by\u00a0extracting\u00a0a\u00a0common\u00a0superclass\nfrom\u00a0them.\nI\u00a0begin\u00a0by\u00a0creating\u00a0an\u00a0empty\u00a0superclass\u00a0and\u00a0letting\u00a0them\u00a0both\u00a0extend\u00a0from\u00a0it.\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nclass\u00a0Party\u00a0{}\nclass\u00a0Employee\u00a0extends\u00a0Party\u00a0{\n\u00a0\u00a0constructor(name,\u00a0id,\u00a0monthlyCost)\u00a0{\n\u00a0\u00a0\u00a0\u00a0super()\u037e\n\u00a0\u00a0\u00a0\u00a0this._id\u00a0=\u00a0id\u037e\n\u00a0\u00a0\u00a0\u00a0this._name\u00a0=\u00a0name\u037e\n\u00a0\u00a0\u00a0\u00a0this._monthlyCost\u00a0=\u00a0monthlyCost\u037e\n\u00a0\u00a0}\n\u00a0\u00a0//\u00a0rest\u00a0of\u00a0class...\nclass\u00a0Department\u00a0extends\u00a0Party\u00a0{\n\u00a0\u00a0constructor(name,\u00a0staff){\n\u00a0\u00a0\u00a0\u00a0super()\u037e\n\u00a0\u00a0\u00a0\u00a0this._name\u00a0=\u00a0name\u037e\n\u00a0\u00a0\u00a0\u00a0this._staff\u00a0=\u00a0staff\u037e\n\u00a0\u00a0}\n\u00a0\u00a0//\u00a0rest\u00a0of\u00a0class...\nwww.EBooksWorld.ir\n", "page": 419, "type": "text", "section": "Page 419"}
{"text": "When\u00a0doing\u00a0Extract\u00a0Superclass,\u00a0I\u00a0like\u00a0to\u00a0start\u00a0with\u00a0the\u00a0data,\u00a0which\u00a0in\u00a0JavaScript\ninvolves\u00a0manipulating\u00a0the\u00a0constructor.\u00a0So\u00a0I\u00a0start\u00a0with\u00a0Pull\u00a0Up\u00a0Field\u00a0(353)\u00a0to\u00a0pull\u00a0up\u00a0the\nname.\nclass\u00a0Party\u2026\nconstructor(name){\n\u00a0\u00a0this._name\u00a0=\u00a0name\u037e\n}\nclass\u00a0Employee\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nconstructor(name,\u00a0id,\u00a0monthlyCost)\u00a0{\n\u00a0\u00a0super(name)\u037e\n\u00a0\u00a0this._id\u00a0=\u00a0id\u037e\n\u00a0\u00a0this._monthlyCost\u00a0=\u00a0monthlyCost\u037e\n}\nclass\u00a0Department\u2026\nconstructor(name,\u00a0staff){\n\u00a0\u00a0super(name)\u037e\n\u00a0\u00a0this._staff\u00a0=\u00a0staff\u037e\n}\nAs\u00a0I\u00a0get\u00a0data\u00a0up\u00a0to\u00a0the\u00a0superclass,\u00a0I\u00a0can\u00a0also\u00a0apply\u00a0Pull\u00a0Up\u00a0Method\u00a0(350)\u00a0on\u00a0associated\nmethods.\u00a0First,\u00a0the\u00a0name:\nclass\u00a0Party\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nget\u00a0name()\u00a0{return\u00a0this._name\u037e}\nclass\u00a0Employee\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nget\u00a0name()\u00a0{return\u00a0this._name\u037e}\nwww.EBooksWorld.ir\n", "page": 420, "type": "text", "section": "Page 420"}
{"text": "class\u00a0Department\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nget\u00a0name()\u00a0{return\u00a0this._name\u037e}\nI\u00a0have\u00a0two\u00a0methods\u00a0with\u00a0similar\u00a0bodies.\nclass\u00a0Employee\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nget\u00a0annualCost()\u00a0{\n\u00a0\u00a0return\u00a0this.monthlyCost\u00a0*\u00a012\u037e\n}\nclass\u00a0Department\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nget\u00a0totalAnnualCost()\u00a0{\n\u00a0\u00a0return\u00a0this.totalMonthlyCost\u00a0*\u00a012\u037e\n}\nThe\u00a0methods\u00a0they\u00a0use,\u00a0monthlyCost\u00a0and\u00a0totalMonthlyCost,\u00a0have\u00a0different\u00a0names\nand\u00a0different\u00a0bodies\u2014but\u00a0do\u00a0they\u00a0represent\u00a0the\u00a0same\u00a0intent?\u00a0If\u00a0so,\u00a0I\u00a0should\u00a0use\u00a0Change\nFunction\u00a0Declaration\u00a0(124)\u00a0to\u00a0unify\u00a0their\u00a0names.\nclass\u00a0Department\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nget\u00a0totalAnnualCost()\u00a0{\n\u00a0\u00a0return\u00a0this.monthlyCost\u00a0*\u00a012\u037e\n}\nget\u00a0monthlyCost()\u00a0{\u00a0\u2026\u00a0}\nI\u00a0then\u00a0do\u00a0a\u00a0similar\u00a0renaming\u00a0to\u00a0the\u00a0annual\u00a0costs:\nclass\u00a0Department\u2026\nwww.EBooksWorld.ir\n", "page": 421, "type": "text", "section": "Page 421"}
{"text": "Click\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nget\u00a0annualCost()\u00a0{\n\u00a0\u00a0return\u00a0this.monthlyCost\u00a0*\u00a012\u037e\n}\nI\u00a0can\u00a0now\u00a0apply\u00a0Pull\u00a0Up\u00a0Method\u00a0(350)\u00a0to\u00a0the\u00a0annual\u00a0cost\u00a0methods.\nclass\u00a0Party\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nget\u00a0annualCost()\u00a0{\n\u00a0\u00a0return\u00a0this.monthlyCost\u00a0*\u00a012\u037e\n}\nclass\u00a0Employee\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nget\u00a0annualCost()\u00a0{\n\u00a0\u00a0return\u00a0this.monthlyCost\u00a0*\u00a012\u037e\n}\nclass\u00a0Department\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nget\u00a0annualCost()\u00a0{\n\u00a0\u00a0return\u00a0this.monthlyCost\u00a0*\u00a012\u037e\n}\nCOLLAPSE HIERARCHY\nwww.EBooksWorld.ir\n", "page": 422, "type": "text", "section": "Page 422"}
{"text": "Motivation\nWhen\u00a0I\u2019m\u00a0refactoring\u00a0a\u00a0class\u00a0hierarchy,\u00a0I\u2019m\u00a0often\u00a0pulling\u00a0and\u00a0pushing\u00a0features\u00a0around.\nAs\u00a0the\u00a0hierarchy\u00a0evolves,\u00a0I\u00a0sometimes\u00a0find\u00a0that\u00a0a\u00a0class\u00a0and\u00a0its\u00a0parent\u00a0are\u00a0no\u00a0longer\ndifferent\u00a0enough\u00a0to\u00a0be\u00a0worth\u00a0keeping\u00a0separate.\u00a0At\u00a0this\u00a0point,\u00a0I\u2019ll\u00a0merge\u00a0them\u00a0together.\nMechanics\nChoose\u00a0which\u00a0one\u00a0to\u00a0remove.\nI\u00a0choose\u00a0based\u00a0on\u00a0which\u00a0name\u00a0makes\u00a0most\u00a0sense\u00a0in\u00a0the\u00a0future.\u00a0If\u00a0neither\u00a0name\u00a0is\nbest,\u00a0I\u2019ll\u00a0pick\u00a0one\u00a0arbitrarily.\nUse\u00a0Pull\u00a0Up\u00a0Field\u00a0(353),\u00a0Push\u00a0Down\u00a0Field\u00a0(361),\u00a0Pull\u00a0Up\u00a0Method\u00a0(350),\u00a0and\u00a0Push\nDown\u00a0Method\u00a0(359)\u00a0to\u00a0move\u00a0all\u00a0the\u00a0elements\u00a0into\u00a0a\u00a0single\u00a0class.\nAdjust\u00a0any\u00a0references\u00a0to\u00a0the\u00a0victim\u00a0to\u00a0change\u00a0them\u00a0to\u00a0the\u00a0class\u00a0that\u00a0will\u00a0stay.\nRemove\u00a0the\u00a0empty\u00a0class.\nTest.\nREPLACE SUBCLASS WITH DELEGATE\nwww.EBooksWorld.ir\n", "page": 423, "type": "text", "section": "Page 423"}
{"text": "Motivation\nIf\u00a0I\u00a0have\u00a0some\u00a0objects\u00a0whose\u00a0behavior\u00a0varies\u00a0from\u00a0category\u00a0to\u00a0category,\u00a0the\u00a0natural\nmechanism\u00a0to\u00a0express\u00a0this\u00a0is\u00a0inheritance.\u00a0I\u00a0put\u00a0all\u00a0the\u00a0common\u00a0data\u00a0and\u00a0behavior\u00a0in\u00a0the\nsuperclass,\u00a0and\u00a0let\u00a0each\u00a0subclass\u00a0add\u00a0and\u00a0override\u00a0features\u00a0as\u00a0needed.\u00a0Object\u00adoriented\nlanguages\u00a0make\u00a0this\u00a0simple\u00a0to\u00a0implement\u00a0and\u00a0thus\u00a0a\u00a0familiar\u00a0mechanism.\nBut\u00a0inheritance\u00a0has\u00a0its\u00a0downsides.\u00a0Most\u00a0obviously,\u00a0it\u2019s\u00a0a\u00a0card\u00a0that\u00a0can\u00a0only\u00a0be\u00a0played\nonce.\u00a0If\u00a0I\u00a0have\u00a0more\u00a0than\u00a0one\u00a0reason\u00a0to\u00a0vary\u00a0something,\u00a0I\u00a0can\u00a0only\u00a0use\u00a0inheritance\u00a0for\u00a0a\nsingle\u00a0axis\u00a0of\u00a0variation.\u00a0So,\u00a0if\u00a0I\u00a0want\u00a0to\u00a0vary\u00a0behavior\u00a0of\u00a0people\u00a0by\u00a0their\u00a0age\u00a0category\u00a0and\nby\u00a0their\u00a0income\u00a0level,\u00a0I\u00a0can\u00a0either\u00a0have\u00a0subclasses\u00a0for\u00a0young\u00a0and\u00a0senior,\u00a0or\u00a0for\u00a0well\u00adoff\nand\u00a0poor\u2014I\u00a0can\u2019t\u00a0have\u00a0both.\nwww.EBooksWorld.ir\n", "page": 424, "type": "text", "section": "Page 424"}
{"text": "A\u00a0further\u00a0problem\u00a0is\u00a0that\u00a0inheritance\u00a0introduces\u00a0a\u00a0very\u00a0close\u00a0relationship\u00a0between\nclasses.\u00a0Any\u00a0change\u00a0I\u00a0want\u00a0to\u00a0make\u00a0to\u00a0the\u00a0parent\u00a0can\u00a0easily\u00a0break\u00a0children,\u00a0so\u00a0I\u00a0have\u00a0to\nbe\u00a0careful\u00a0and\u00a0understand\u00a0how\u00a0children\u00a0derive\u00a0from\u00a0the\u00a0superclass.\u00a0This\u00a0problem\u00a0is\nmade\u00a0worse\u00a0when\u00a0the\u00a0logic\u00a0of\u00a0the\u00a0two\u00a0classes\u00a0resides\u00a0in\u00a0different\u00a0modules\u00a0and\u00a0is\u00a0looked\nafter\u00a0by\u00a0different\u00a0teams.\nDelegation\u00a0handles\u00a0both\u00a0of\u00a0these\u00a0problems.\u00a0I\u00a0can\u00a0delegate\u00a0to\u00a0many\u00a0different\u00a0classes\u00a0for\ndifferent\u00a0reasons.\u00a0Delegation\u00a0is\u00a0a\u00a0regular\u00a0relationship\u00a0between\u00a0objects\u2014so\u00a0I\u00a0can\u00a0have\u00a0a\nclear\u00a0interface\u00a0to\u00a0work\u00a0with,\u00a0which\u00a0is\u00a0much\u00a0less\u00a0coupling\u00a0than\u00a0subclassing.\u00a0It\u2019s\u00a0therefore\ncommon\u00a0to\u00a0run\u00a0into\u00a0the\u00a0problems\u00a0with\u00a0subclassing\u00a0and\u00a0apply\u00a0Replace\u00a0Subclass\u00a0with\nDelegate.\nThere\u00a0is\u00a0a\u00a0popular\u00a0principle:\u00a0\u201cFavor\u00a0object\u00a0composition\u00a0over\u00a0class\u00a0inheritance\u201d\u00a0(where\ncomposition\u00a0is\u00a0effectively\u00a0the\u00a0same\u00a0as\u00a0delegation).\u00a0Many\u00a0people\u00a0take\u00a0this\u00a0to\u00a0mean\n\u201cinheritance\u00a0considered\u00a0harmful\u201d\u00a0and\u00a0claim\u00a0that\u00a0we\u00a0should\u00a0never\u00a0use\u00a0inheritance.\u00a0I\u00a0use\ninheritance\u00a0frequently,\u00a0partly\u00a0because\u00a0I\u00a0always\u00a0know\u00a0I\u00a0can\u00a0use\u00a0Replace\u00a0Subclass\u00a0with\nDelegate\u00a0should\u00a0I\u00a0need\u00a0to\u00a0change\u00a0it\u00a0later.\u00a0Inheritance\u00a0is\u00a0a\u00a0valuable\u00a0mechanism\u00a0that\u00a0does\nthe\u00a0job\u00a0most\u00a0of\u00a0the\u00a0time\u00a0without\u00a0problems.\u00a0So\u00a0I\u00a0reach\u00a0for\u00a0it\u00a0first,\u00a0and\u00a0move\u00a0onto\ndelegation\u00a0when\u00a0it\u00a0starts\u00a0to\u00a0rub\u00a0badly.\u00a0This\u00a0usage\u00a0is\u00a0actually\u00a0consistent\u00a0with\u00a0the\nprinciple\u2014which\u00a0comes\u00a0from\u00a0the\u00a0Gang\u00a0of\u00a0Four\u00a0book\u00a0[gof]\u00a0that\u00a0explains\u00a0how\u00a0inheritance\nand\u00a0composition\u00a0work\u00a0together.\u00a0The\u00a0principle\u00a0was\u00a0a\u00a0reaction\u00a0to\u00a0the\u00a0overuse\u00a0of\ninheritance.\nThose\u00a0who\u00a0are\u00a0familiar\u00a0with\u00a0the\u00a0Gang\u00a0of\u00a0Four\u00a0book\u00a0may\u00a0find\u00a0it\u00a0helpful\u00a0to\u00a0think\u00a0of\u00a0this\nrefactoring\u00a0as\u00a0replacing\u00a0subclasses\u00a0with\u00a0the\u00a0State\u00a0or\u00a0Strategy\u00a0patterns.\u00a0Both\u00a0of\u00a0these\npatterns\u00a0are\u00a0structurally\u00a0the\u00a0same,\u00a0relying\u00a0on\u00a0the\u00a0host\u00a0delegating\u00a0to\u00a0a\u00a0separate\nhierarchy.\u00a0Not\u00a0all\u00a0cases\u00a0of\u00a0Replace\u00a0Subclass\u00a0with\u00a0Delegate\u00a0involve\u00a0an\u00a0inheritance\nhierarchy\u00a0for\u00a0the\u00a0delegate\u00a0(as\u00a0the\u00a0first\u00a0example\u00a0below\u00a0illustrates),\u00a0but\u00a0setting\u00a0up\u00a0a\nhierarchy\u00a0for\u00a0states\u00a0or\u00a0strategies\u00a0is\u00a0often\u00a0useful.\nMechanics\nIf\u00a0there\u00a0are\u00a0many\u00a0callers\u00a0for\u00a0the\u00a0constructors,\u00a0apply\u00a0Replace\u00a0Constructor\u00a0with\nFactory\u00a0Function\u00a0(334).\nCreate\u00a0an\u00a0empty\u00a0class\u00a0for\u00a0the\u00a0delegate.\u00a0Its\u00a0constructor\u00a0should\u00a0take\u00a0any\u00a0subclass\u00ad\nspecific\u00a0data\u00a0as\u00a0well\u00a0as,\u00a0usually,\u00a0a\u00a0back\u00adreference\u00a0to\u00a0the\u00a0superclass.\nAdd\u00a0a\u00a0field\u00a0to\u00a0the\u00a0superclass\u00a0to\u00a0hold\u00a0the\u00a0delegate.\nModify\u00a0the\u00a0creation\u00a0of\u00a0the\u00a0subclass\u00a0so\u00a0that\u00a0it\u00a0initializes\u00a0the\u00a0delegate\u00a0field\u00a0with\u00a0an\nwww.EBooksWorld.ir\n", "page": 425, "type": "text", "section": "Page 425"}
{"text": "instance\u00a0of\u00a0the\u00a0delegate.\nThis\u00a0can\u00a0be\u00a0done\u00a0in\u00a0the\u00a0factory\u00a0function,\u00a0or\u00a0in\u00a0the\u00a0constructor\u00a0if\u00a0the\u00a0constructor\u00a0can\nreliably\u00a0tell\u00a0whether\u00a0to\u00a0create\u00a0the\u00a0correct\u00a0delegate.\nChoose\u00a0a\u00a0subclass\u00a0method\u00a0to\u00a0move\u00a0to\u00a0the\u00a0delegate\u00a0class.\nUse\u00a0Move\u00a0Function\u00a0(198)\u00a0to\u00a0move\u00a0it\u00a0to\u00a0the\u00a0delegate\u00a0class.\u00a0Don\u2019t\u00a0remove\u00a0the\u00a0source\u2019s\ndelegating\u00a0code.\nIf\u00a0the\u00a0method\u00a0needs\u00a0elements\u00a0that\u00a0should\u00a0move\u00a0to\u00a0the\u00a0delegate,\u00a0move\u00a0them.\u00a0If\u00a0it\nneeds\u00a0elements\u00a0that\u00a0should\u00a0stay\u00a0in\u00a0the\u00a0superclass,\u00a0add\u00a0a\u00a0field\u00a0to\u00a0the\u00a0delegate\u00a0that\nrefers\u00a0to\u00a0the\u00a0superclass.\nIf\u00a0the\u00a0source\u00a0method\u00a0has\u00a0callers\u00a0outside\u00a0the\u00a0class,\u00a0move\u00a0the\u00a0source\u2019s\u00a0delegating\u00a0code\nfrom\u00a0the\u00a0subclass\u00a0to\u00a0the\u00a0superclass,\u00a0guarding\u00a0it\u00a0with\u00a0a\u00a0check\u00a0for\u00a0the\u00a0presence\u00a0of\u00a0the\ndelegate.\u00a0If\u00a0not,\u00a0apply\u00a0Remove\u00a0Dead\u00a0Code\u00a0(237).\nIf\u00a0there\u2019s\u00a0more\u00a0than\u00a0one\u00a0subclass,\u00a0and\u00a0you\u00a0start\u00a0duplicating\u00a0code\u00a0within\u00a0them,\u00a0use\nExtract\u00a0Superclass\u00a0(375).\u00a0In\u00a0this\u00a0case,\u00a0any\u00a0delegating\u00a0methods\u00a0on\u00a0the\u00a0source\u00a0super\u00ad\nclass\u00a0no\u00a0longer\u00a0need\u00a0a\u00a0guard\u00a0if\u00a0the\u00a0default\u00a0behavior\u00a0is\u00a0moved\u00a0to\u00a0the\u00a0delegate\nsuperclass.\nTest.\nRepeat\u00a0until\u00a0all\u00a0the\u00a0methods\u00a0of\u00a0the\u00a0subclass\u00a0are\u00a0moved.\nFind\u00a0all\u00a0callers\u00a0of\u00a0the\u00a0subclasses\u2019s\u00a0constructor\u00a0and\u00a0change\u00a0them\u00a0to\u00a0use\u00a0the\nsuperclass\u00a0constructor.\nTest.\nUse\u00a0Remove\u00a0Dead\u00a0Code\u00a0(237)\u00a0on\u00a0the\u00a0subclass.\nExample\nI\u00a0have\u00a0a\u00a0class\u00a0that\u00a0makes\u00a0a\u00a0booking\u00a0for\u00a0a\u00a0show.\nclass\u00a0Booking\u2026\nconstructor(show,\u00a0date)\u00a0{\n\u00a0\u00a0this._show\u00a0=\u00a0show\u037e\n\u00a0\u00a0this._date\u00a0=\u00a0date\u037e\nwww.EBooksWorld.ir\n", "page": 426, "type": "text", "section": "Page 426"}
{"text": "}\nThere\u00a0is\u00a0a\u00a0subclass\u00a0for\u00a0premium\u00a0booking\u00a0that\u00a0takes\u00a0into\u00a0account\u00a0various\u00a0extras\u00a0that\u00a0are\navailable.\nclass\u00a0PremiumBooking\u00a0extends\u00a0Booking\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nconstructor(show,\u00a0date,\u00a0extras)\u00a0{\n\u00a0\u00a0super(show,\u00a0date)\u037e\n\u00a0\u00a0this._extras\u00a0=\u00a0extras\u037e\n}\nThere\u00a0are\u00a0quite\u00a0a\u00a0few\u00a0changes\u00a0that\u00a0the\u00a0premium\u00a0booking\u00a0makes\u00a0to\u00a0what\u00a0it\u00a0inherits\u00a0from\nthe\u00a0superclass.\u00a0As\u00a0is\u00a0typical\u00a0with\u00a0this\u00a0kind\u00a0of\u00a0programming\u00adby\u00addifference,\u00a0in\u00a0some\u00a0cases\nthe\u00a0subclass\u00a0overrides\u00a0methods\u00a0on\u00a0the\u00a0superclass,\u00a0in\u00a0others\u00a0it\u00a0adds\u00a0new\u00a0methods\u00a0that\nare\u00a0only\u00a0relevant\u00a0for\u00a0the\u00a0subclass.\u00a0I\u00a0won\u2019t\u00a0go\u00a0into\u00a0all\u00a0of\u00a0them,\u00a0but\u00a0I\u00a0will\u00a0pick\u00a0out\u00a0a\u00a0few\ninteresting\u00a0cases.\nFirst,\u00a0there\u00a0is\u00a0a\u00a0simple\u00a0override.\u00a0Regular\u00a0bookings\u00a0offer\u00a0a\u00a0talkback\u00a0after\u00a0the\u00a0show,\u00a0but\nonly\u00a0on\u00a0nonpeak\u00a0days.\nclass\u00a0Booking\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nget\u00a0hasTalkback()\u00a0{\n\u00a0\u00a0return\u00a0this._show.hasOwnProperty('talkback')\u00a0&&\u00a0!this.isPeakDay\u037e\n}\nPremium\u00a0bookings\u00a0override\u00a0this\u00a0to\u00a0offer\u00a0talkbacks\u00a0on\u00a0all\u00a0days.\nclass\u00a0PremiumBooking\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nget\u00a0hasTalkback()\u00a0{\n\u00a0\u00a0return\u00a0this._show.hasOwnProperty('talkback')\u037e\n}\nDetermining\u00a0the\u00a0price\u00a0is\u00a0a\u00a0similar\u00a0override,\u00a0with\u00a0a\u00a0twist\u00a0that\u00a0the\u00a0premium\u00a0method\u00a0calls\nwww.EBooksWorld.ir\n", "page": 427, "type": "text", "section": "Page 427"}
{"text": "the\u00a0superclass\u00a0method.\nclass\u00a0Booking\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nget\u00a0basePrice()\u00a0{\n\u00a0\u00a0let\u00a0result\u00a0=\u00a0this._show.price\u037e\n\u00a0\u00a0if\u00a0(this.isPeakDay)\u00a0result\u00a0+=\u00a0Math.round(result\u00a0*\u00a00.15)\u037e\n\u00a0\u00a0return\u00a0result\u037e\n}\nclass\u00a0PremiumBooking\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nget\u00a0basePrice()\u00a0{\n\u00a0\u00a0return\u00a0Math.round(super.basePrice\u00a0+\u00a0this._extras.premiumFee)\u037e\n}\nThe\u00a0last\u00a0example\u00a0is\u00a0where\u00a0the\u00a0premium\u00a0booking\u00a0offers\u00a0a\u00a0behavior\u00a0that\u00a0isn\u2019t\u00a0present\u00a0on\nthe\u00a0superclass.\nclass\u00a0PremiumBooking\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nget\u00a0hasDinner()\u00a0{\n\u00a0\u00a0return\u00a0this._extras.hasOwnProperty('dinner')\u00a0&&\u00a0!this.isPeakDay\u037e\n}\nInheritance\u00a0works\u00a0well\u00a0for\u00a0this\u00a0example.\u00a0I\u00a0can\u00a0understand\u00a0the\u00a0base\u00a0class\u00a0without\u00a0having\nto\u00a0understand\u00a0the\u00a0subclass.\u00a0The\u00a0subclass\u00a0is\u00a0defined\u00a0just\u00a0by\u00a0saying\u00a0how\u00a0it\u00a0differs\u00a0from\nthe\u00a0base\u00a0case\u2014both\u00a0reducing\u00a0duplication\u00a0and\u00a0clearly\u00a0communicating\u00a0what\u00a0are\u00a0the\ndifferences\u00a0it\u2019s\u00a0introducing.\nActually,\u00a0it\u00a0isn\u2019t\u00a0quite\u00a0as\u00a0perfect\u00a0as\u00a0the\u00a0previous\u00a0paragraph\u00a0implies.\u00a0There\u00a0are\u00a0things\u00a0in\nthe\u00a0superclass\u00a0structure\u00a0that\u00a0only\u00a0make\u00a0sense\u00a0due\u00a0to\u00a0the\u00a0subclass\u2014such\u00a0as\u00a0methods\nthat\u00a0have\u00a0been\u00a0factored\u00a0in\u00a0such\u00a0a\u00a0way\u00a0as\u00a0to\u00a0make\u00a0it\u00a0easier\u00a0to\u00a0override\u00a0just\u00a0the\u00a0right\nkinds\u00a0of\u00a0behavior.\u00a0So\u00a0although\u00a0most\u00a0of\u00a0the\u00a0time\u00a0I\u00a0can\u00a0modify\u00a0the\u00a0base\u00a0class\u00a0without\nhaving\u00a0to\u00a0understand\u00a0subclasses,\u00a0there\u00a0are\u00a0occasions\u00a0where\u00a0such\u00a0mindful\u00a0ignorance\u00a0of\nthe\u00a0subclasses\u00a0will\u00a0lead\u00a0me\u00a0to\u00a0breaking\u00a0a\u00a0subclass\u00a0by\u00a0modifying\u00a0the\u00a0superclass.\nwww.EBooksWorld.ir\n", "page": 428, "type": "text", "section": "Page 428"}
{"text": "However,\u00a0if\u00a0these\u00a0occasions\u00a0are\u00a0not\u00a0too\u00a0common,\u00a0the\u00a0inheritance\u00a0pays\u00a0off\u2014provided\u00a0I\nhave\u00a0good\u00a0tests\u00a0to\u00a0detect\u00a0a\u00a0subclass\u00a0breakage.\nSo\u00a0why\u00a0would\u00a0I\u00a0want\u00a0to\u00a0change\u00a0such\u00a0a\u00a0happy\u00a0situation\u00a0by\u00a0using\u00a0Replace\u00a0Subclass\u00a0with\nDelegate?\u00a0Inheritance\u00a0is\u00a0a\u00a0tool\u00a0that\u00a0can\u00a0only\u00a0be\u00a0used\u00a0once\u2014so\u00a0if\u00a0I\u00a0have\u00a0another\u00a0reason\nto\u00a0use\u00a0inheritance,\u00a0and\u00a0I\u00a0think\u00a0it\u00a0will\u00a0benefit\u00a0me\u00a0more\u00a0than\u00a0the\u00a0premium\u00a0booking\nsubclass,\u00a0I\u2019ll\u00a0need\u00a0to\u00a0handle\u00a0premium\u00a0bookings\u00a0a\u00a0different\u00a0way.\u00a0Also,\u00a0I\u00a0may\u00a0need\u00a0to\nchange\u00a0from\u00a0the\u00a0default\u00a0booking\u00a0to\u00a0the\u00a0premium\u00a0booking\u00a0dynamically\u2014i.e.,\u00a0support\u00a0a\nmethod\u00a0like\u00a0aBooking.bePremium().\u00a0In\u00a0some\u00a0cases,\u00a0I\u00a0can\u00a0avoid\u00a0this\u00a0by\u00a0creating\u00a0a\nwhole\u00a0new\u00a0object\u00a0(a\u00a0common\u00a0example\u00a0is\u00a0where\u00a0an\u00a0HTTP\u00a0request\u00a0loads\u00a0new\u00a0data\u00a0from\nthe\u00a0server).\u00a0But\u00a0sometimes,\u00a0I\u00a0need\u00a0to\u00a0modify\u00a0a\u00a0data\u00a0structure\u00a0and\u00a0not\u00a0rebuild\u00a0it\u00a0from\nscratch,\u00a0and\u00a0it\u00a0is\u00a0difficult\u00a0to\u00a0just\u00a0replace\u00a0a\u00a0single\u00a0booking\u00a0that\u2019s\u00a0referred\u00a0to\u00a0from\u00a0many\ndifferent\u00a0places.\u00a0In\u00a0such\u00a0situations,\u00a0it\u00a0can\u00a0be\u00a0useful\u00a0to\u00a0allow\u00a0a\u00a0booking\u00a0to\u00a0switch\u00a0from\ndefault\u00a0to\u00a0premium\u00a0and\u00a0back\u00a0again.\nWhen\u00a0these\u00a0needs\u00a0crop\u00a0up,\u00a0I\u00a0need\u00a0to\u00a0apply\u00a0Replace\u00a0Subclass\u00a0with\u00a0Delegate.\u00a0I\u00a0have\nclients\u00a0call\u00a0the\u00a0constructors\u00a0of\u00a0the\u00a0two\u00a0classes\u00a0to\u00a0make\u00a0the\u00a0bookings:\nbooking\u00a0client\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\naBooking\u00a0=\u00a0new\u00a0Booking(show,date)\u037e\npremium\u00a0client\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\naBooking\u00a0=\u00a0new\u00a0PremiumBooking(show,\u00a0date,\u00a0extras)\u037e\nRemoving\u00a0subclasses\u00a0will\u00a0alter\u00a0all\u00a0of\u00a0this,\u00a0so\u00a0I\u00a0like\u00a0to\u00a0encapsulate\u00a0the\u00a0constructor\u00a0calls\nwith\u00a0Replace\u00a0Constructor\u00a0with\u00a0Factory\u00a0Function\u00a0(334).\ntop\u00a0level\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0createBooking(show,\u00a0date)\u00a0{\n\u00a0\u00a0return\u00a0new\u00a0Booking(show,\u00a0date)\u037e\n}\nfunction\u00a0createPremiumBooking(show,\u00a0date,\u00a0extras)\u00a0{\nwww.EBooksWorld.ir\n", "page": 429, "type": "text", "section": "Page 429"}
{"text": "\u00a0\u00a0return\u00a0new\u00a0PremiumBooking\u00a0(show,\u00a0date,\u00a0extras)\u037e\n}\nbooking\u00a0client\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\naBooking\u00a0=\u00a0createBooking(show,\u00a0date)\u037e\npremium\u00a0client\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\naBooking\u00a0=\u00a0createPremiumBooking(show,\u00a0date,\u00a0extras)\u037e\nI\u00a0now\u00a0make\u00a0the\u00a0new\u00a0delegate\u00a0class.\u00a0Its\u00a0constructor\u00a0parameters\u00a0are\u00a0those\u00a0parameters\nthat\u00a0are\u00a0only\u00a0used\u00a0in\u00a0the\u00a0subclass,\u00a0together\u00a0with\u00a0a\u00a0back\u00adreference\u00a0to\u00a0the\u00a0booking\u00a0object.\nI\u2019ll\u00a0need\u00a0this\u00a0because\u00a0several\u00a0subclass\u00a0methods\u00a0require\u00a0access\u00a0to\u00a0data\u00a0stored\u00a0in\u00a0the\nsuperclass.\u00a0Inheritance\u00a0makes\u00a0this\u00a0easy\u00a0to\u00a0do,\u00a0but\u00a0with\u00a0a\u00a0delegate\u00a0I\u00a0need\u00a0a\u00a0back\u00ad\nreference.\nclass\u00a0PremiumBookingDelegate\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nconstructor(hostBooking,\u00a0extras)\u00a0{\n\u00a0\u00a0this._host\u00a0=\u00a0hostBooking\u037e\n\u00a0\u00a0this._extras\u00a0=\u00a0extras\u037e\n}\nI\u00a0now\u00a0connect\u00a0the\u00a0new\u00a0delegate\u00a0to\u00a0the\u00a0booking\u00a0object.\u00a0I\u00a0do\u00a0this\u00a0by\u00a0modifying\u00a0the\u00a0factory\nfunction\u00a0for\u00a0premium\u00a0bookings.\ntop\u00a0level\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0createPremiumBooking(show,\u00a0date,\u00a0extras)\u00a0{\n\u00a0\u00a0const\u00a0result\u00a0=\u00a0new\u00a0PremiumBooking\u00a0(show,\u00a0date,\u00a0extras)\u037e\n\u00a0\u00a0result._bePremium(extras)\u037e\n\u00a0\u00a0return\u00a0result\u037e\n}\nwww.EBooksWorld.ir\n", "page": 430, "type": "text", "section": "Page 430"}
{"text": "class\u00a0Booking\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\n_bePremium(extras)\u00a0{\n\u00a0\u00a0this._premiumDelegate\u00a0=\u00a0new\u00a0PremiumBookingDelegate(this,\u00a0extras)\u037e\n}\nI\u00a0use\u00a0a\u00a0leading\u00a0underscore\u00a0on\u00a0_bePremium\u00a0to\u00a0indicate\u00a0that\u00a0it\u00a0shouldn\u2019t\u00a0be\u00a0part\u00a0of\u00a0the\npublic\u00a0interface\u00a0for\u00a0Booking.\u00a0Of\u00a0course,\u00a0if\u00a0the\u00a0point\u00a0of\u00a0doing\u00a0this\u00a0refactoring\u00a0is\u00a0to\u00a0allow\na\u00a0booking\u00a0to\u00a0mutate\u00a0to\u00a0premium,\u00a0it\u00a0can\u00a0be\u00a0a\u00a0public\u00a0method.\nAlternatively,\u00a0I\u00a0can\u00a0do\u00a0all\u00a0the\u00a0connections\u00a0in\u00a0the\u00a0constructor\u00a0for\u00a0Booking.\u00a0In\u00a0order\u00a0to\ndo\u00a0that,\u00a0I\u00a0need\u00a0some\u00a0way\u00a0to\u00a0signal\u00a0to\u00a0the\u00a0constructor\u00a0that\u00a0we\u00a0have\u00a0a\u00a0premium\u00a0booking.\nThat\u00a0could\u00a0be\u00a0an\u00a0extra\u00a0parameter,\u00a0or\u00a0just\u00a0the\u00a0use\u00a0of\u00a0extras\u00a0if\u00a0I\u00a0can\u00a0be\u00a0sure\u00a0that\u00a0it\u00a0is\nalways\u00a0present\u00a0when\u00a0used\u00a0with\u00a0a\u00a0premium\u00a0booking.\u00a0Here,\u00a0I\u00a0prefer\u00a0the\u00a0explicitness\u00a0of\ndoing\u00a0this\u00a0through\u00a0the\u00a0factory\u00a0function.\nWith\u00a0the\u00a0structures\u00a0set\u00a0up,\u00a0it\u2019s\u00a0time\u00a0to\u00a0start\u00a0moving\u00a0the\u00a0behavior.\u00a0The\u00a0first\u00a0case\u00a0I\u2019ll\nconsider\u00a0is\u00a0the\u00a0simple\u00a0override\u00a0of\u00a0hasTalkback.\u00a0Here\u2019s\u00a0the\u00a0existing\u00a0code:\nclass\u00a0Booking\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nget\u00a0hasTalkback()\u00a0{\n\u00a0\u00a0return\u00a0this._show.hasOwnProperty('talkback')\u00a0&&\u00a0!this.isPeakDay\u037e\n}\nclass\u00a0PremiumBooking\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nget\u00a0hasTalkback()\u00a0{\n\u00a0\u00a0return\u00a0this._show.hasOwnProperty('talkback')\u037e\n}\nI\u00a0use\u00a0Move\u00a0Function\u00a0(198)\u00a0to\u00a0move\u00a0the\u00a0subclass\u00a0method\u00a0to\u00a0the\u00a0delegate.\u00a0To\u00a0make\u00a0it\u00a0fit\nits\u00a0home,\u00a0I\u00a0route\u00a0any\u00a0access\u00a0to\u00a0superclass\u00a0data\u00a0with\u00a0a\u00a0call\u00a0to\u00a0_host.\nwww.EBooksWorld.ir\n", "page": 431, "type": "text", "section": "Page 431"}
{"text": "class\u00a0PremiumBookingDelegate\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nget\u00a0hasTalkback()\u00a0{\n\u00a0\u00a0return\u00a0this._host._show.hasOwnProperty('talkback')\u037e\n}\nclass\u00a0PremiumBooking\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nget\u00a0hasTalkback()\u00a0{\n\u00a0\u00a0return\u00a0this._premiumDelegate.hasTalkback\u037e\n}\nI\u00a0test\u00a0to\u00a0ensure\u00a0everything\u00a0is\u00a0working,\u00a0then\u00a0delete\u00a0the\u00a0subclass\u00a0method:\nclass\u00a0PremiumBooking\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nget\u00a0hasTalkback()\u00a0{\n\u00a0\u00a0return\u00a0this._premiumDelegate.hasTalkback\u037e\n}\nI\u00a0run\u00a0the\u00a0tests\u00a0at\u00a0this\u00a0point,\u00a0expecting\u00a0some\u00a0to\u00a0fail.\nNow\u00a0I\u00a0finish\u00a0the\u00a0move\u00a0by\u00a0adding\u00a0dispatch\u00a0logic\u00a0to\u00a0the\u00a0superclass\u00a0method\u00a0to\u00a0use\u00a0the\ndelegate\u00a0if\u00a0it\u00a0is\u00a0present.\nclass\u00a0Booking\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nget\u00a0hasTalkback()\u00a0{\n\u00a0\u00a0return\u00a0(this._premiumDelegate)\n\u00a0\u00a0\u00a0\u00a0?\u00a0this._premiumDelegate.hasTalkback\n\u00a0\u00a0\u00a0\u00a0:\u00a0this._show.hasOwnProperty('talkback')\u00a0&&\u00a0!this.isPeakDay\u037e\n}\nThe\u00a0next\u00a0case\u00a0I\u2019ll\u00a0look\u00a0at\u00a0is\u00a0the\u00a0base\u00a0price.\nwww.EBooksWorld.ir\n", "page": 432, "type": "text", "section": "Page 432"}
{"text": "class\u00a0Booking\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nget\u00a0basePrice()\u00a0{\n\u00a0\u00a0let\u00a0result\u00a0=\u00a0this._show.price\u037e\n\u00a0\u00a0if\u00a0(this.isPeakDay)\u00a0result\u00a0+=\u00a0Math.round(result\u00a0*\u00a00.15)\u037e\n\u00a0\u00a0return\u00a0result\u037e\n}\nclass\u00a0PremiumBooking\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nget\u00a0basePrice()\u00a0{\n\u00a0\u00a0return\u00a0Math.round(super.basePrice\u00a0+\u00a0this._extras.premiumFee)\u037e\n}\nThis\u00a0is\u00a0almost\u00a0the\u00a0same,\u00a0but\u00a0there\u00a0is\u00a0a\u00a0wrinkle\u00a0in\u00a0the\u00a0form\u00a0of\u00a0the\u00a0pesky\u00a0call\u00a0on\u00a0super\n(which\u00a0is\u00a0pretty\u00a0common\u00a0in\u00a0these\u00a0kinds\u00a0of\u00a0subclass\u00a0extension\u00a0cases).\u00a0When\u00a0I\u00a0move\u00a0the\nsubclass\u00a0code\u00a0to\u00a0the\u00a0delegate,\u00a0I\u2019ll\u00a0need\u00a0to\u00a0call\u00a0the\u00a0parent\u00a0case\u2014but\u00a0I\u00a0can\u2019t\u00a0just\u00a0call\nthis._host._basePrice\u00a0without\u00a0getting\u00a0into\u00a0an\u00a0endless\u00a0recursion.\nI\u00a0have\u00a0a\u00a0couple\u00a0of\u00a0options\u00a0here.\u00a0One\u00a0is\u00a0to\u00a0apply\u00a0Extract\u00a0Function\u00a0(106)\u00a0on\u00a0the\u00a0base\ncalculation\u00a0to\u00a0allow\u00a0me\u00a0to\u00a0separate\u00a0the\u00a0dispatch\u00a0logic\u00a0from\u00a0price\u00a0calculation.\u00a0(The\u00a0rest\nof\u00a0the\u00a0move\u00a0is\u00a0as\u00a0before.)\nclass\u00a0Booking\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nget\u00a0basePrice()\u00a0{\n\u00a0\u00a0return\u00a0(this._premiumDelegate)\n\u00a0\u00a0\u00a0\u00a0?\u00a0this._premiumDelegate.basePrice\n\u00a0\u00a0\u00a0\u00a0:\u00a0this._privateBasePrice\u037e\n}\nget\u00a0_privateBasePrice()\u00a0{\n\u00a0\u00a0let\u00a0result\u00a0=\u00a0this._show.price\u037e\n\u00a0\u00a0if\u00a0(this.isPeakDay)\u00a0result\u00a0+=\u00a0Math.round(result\u00a0*\u00a00.15)\u037e\n\u00a0\u00a0return\u00a0result\u037e\n}\nclass\u00a0PremiumBookingDelegate\u2026www.EBooksWorld.ir\n", "page": 433, "type": "text", "section": "Page 433"}
{"text": "Click\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nget\u00a0basePrice()\u00a0{\n\u00a0\u00a0return\u00a0Math.round(this._host._privateBasePrice\u00a0+\u00a0this._extras.premiumFee)\u037e\n}\nAlternatively,\u00a0I\u00a0can\u00a0recast\u00a0the\u00a0delegate\u2019s\u00a0method\u00a0as\u00a0an\u00a0extension\u00a0of\u00a0the\u00a0base\u00a0method.\nclass\u00a0Booking\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nget\u00a0basePrice()\u00a0{\n\u00a0\u00a0let\u00a0result\u00a0=\u00a0this._show.price\u037e\n\u00a0\u00a0if\u00a0(this.isPeakDay)\u00a0result\u00a0+=\u00a0Math.round(result\u00a0*\u00a00.15)\u037e\n\u00a0\u00a0return\u00a0(this._premiumDelegate)\n\u00a0\u00a0\u00a0\u00a0?\u00a0this._premiumDelegate.extendBasePrice(result)\n\u00a0\u00a0\u00a0\u00a0:\u00a0result\u037e\n}\nclass\u00a0PremiumBookingDelegate\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nextendBasePrice(base)\u00a0{\n\u00a0\u00a0return\u00a0Math.round(base\u00a0+\u00a0this._extras.premiumFee)\u037e\n}\nBoth\u00a0work\u00a0reasonably\u00a0here\u037e\u00a0I\u00a0have\u00a0a\u00a0slight\u00a0preference\u00a0for\u00a0the\u00a0latter\u00a0as\u00a0it\u2019s\u00a0a\u00a0bit\u00a0smaller.\nThe\u00a0last\u00a0case\u00a0is\u00a0a\u00a0method\u00a0that\u00a0only\u00a0exists\u00a0on\u00a0the\u00a0subclass.\nclass\u00a0PremiumBooking\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nget\u00a0hasDinner()\u00a0{\n\u00a0\u00a0return\u00a0this._extras.hasOwnProperty('dinner')\u00a0&&\u00a0!this.isPeakDay\u037e\n}\nI\u00a0move\u00a0it\u00a0from\u00a0the\u00a0subclass\u00a0to\u00a0the\u00a0delegate:\nwww.EBooksWorld.ir\n", "page": 434, "type": "text", "section": "Page 434"}
{"text": "class\u00a0PremiumBookingDelegate\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nget\u00a0hasDinner()\u00a0{\n\u00a0\u00a0return\u00a0this._extras.hasOwnProperty('dinner')\u00a0&&\u00a0!this._host.isPeakDay\u037e\n}\nI\u00a0then\u00a0add\u00a0dispatch\u00a0logic\u00a0to\u00a0Booking:\nclass\u00a0Booking\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nget\u00a0hasDinner()\u00a0{\n\u00a0\u00a0return\u00a0(this._premiumDelegate)\n\u00a0\u00a0\u00a0\u00a0?\u00a0this._premiumDelegate.hasDinner\n\u00a0\u00a0\u00a0\u00a0:\u00a0undefined\u037e\n}\nIn\u00a0JavaScript,\u00a0accessing\u00a0a\u00a0property\u00a0on\u00a0an\u00a0object\u00a0where\u00a0it\u00a0isn\u2019t\u00a0defined\u00a0returns\nundefined,\u00a0so\u00a0I\u00a0do\u00a0that\u00a0here.\u00a0(Although\u00a0my\u00a0every\u00a0instinct\u00a0is\u00a0to\u00a0have\u00a0it\u00a0raise\u00a0an\u00a0error,\nwhich\u00a0would\u00a0be\u00a0the\u00a0case\u00a0in\u00a0other\u00a0object\u00adoriented\u00a0dynamic\u00a0languages\u00a0I\u2019m\u00a0used\u00a0to.)\nOnce\u00a0I\u2019ve\u00a0moved\u00a0all\u00a0the\u00a0behavior\u00a0out\u00a0of\u00a0the\u00a0subclass,\u00a0I\u00a0can\u00a0change\u00a0the\u00a0factory\u00a0method\u00a0to\nreturn\u00a0the\u00a0superclass\u2014and,\u00a0once\u00a0I\u2019ve\u00a0run\u00a0tests\u00a0to\u00a0ensure\u00a0all\u00a0is\u00a0well,\u00a0delete\u00a0the\u00a0subclass.\ntop\u00a0level\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0createPremiumBooking(show,\u00a0date,\u00a0extras)\u00a0{\n\u00a0\u00a0const\u00a0result\u00a0=\u00a0new\u00a0PremiumBooking\u00a0(show,\u00a0date,\u00a0extras)\u037e\n\u00a0\u00a0result._bePremium(extras)\u037e\n\u00a0\u00a0return\u00a0result\u037e\n}\nclass\u00a0PremiumBooking\u00a0extends\u00a0Booking\u00a0...\nThis\u00a0is\u00a0one\u00a0of\u00a0those\u00a0refactorings\u00a0where\u00a0I\u00a0don\u2019t\u00a0feel\u00a0that\u00a0refactoring\u00a0alone\u00a0improves\u00a0the\ncode.\u00a0Inheritance\u00a0handles\u00a0this\u00a0situation\u00a0very\u00a0well,\u00a0whereas\u00a0using\u00a0delegation\u00a0involves\nadding\u00a0dispatch\u00a0logic,\u00a0two\u00adway\u00a0references,\u00a0and\u00a0thus\u00a0extra\u00a0complexity.\u00a0The\u00a0refactoring\nwww.EBooksWorld.ir\n", "page": 435, "type": "text", "section": "Page 435"}
{"text": "may\u00a0still\u00a0be\u00a0worthwhile,\u00a0since\u00a0the\u00a0advantage\u00a0of\u00a0a\u00a0mutable\u00a0premium\u00a0status,\u00a0or\u00a0a\u00a0need\u00a0to\nuse\u00a0inheritance\u00a0for\u00a0other\u00a0purposes,\u00a0may\u00a0outweigh\u00a0the\u00a0disadvantage\u00a0of\u00a0losing\ninheritance.\nExample: Replacing a Hierarchy\nThe\u00a0previous\u00a0example\u00a0showed\u00a0using\u00a0Replace\u00a0Subclass\u00a0with\u00a0Delegate\u00a0on\u00a0a\u00a0single\nsubclass,\u00a0but\u00a0I\u00a0can\u00a0do\u00a0the\u00a0same\u00a0thing\u00a0with\u00a0an\u00a0entire\u00a0hierarchy.\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0createBird(data)\u00a0{\n\u00a0\u00a0switch\u00a0(data.type)\u00a0{\n\u00a0\u00a0\u00a0\u00a0case\u00a0'EuropeanSwallow':\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0return\u00a0new\u00a0EuropeanSwallow(data)\u037e\n\u00a0\u00a0\u00a0\u00a0case\u00a0'AfricanSwallow':\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0return\u00a0new\u00a0AfricanSwallow(data)\u037e\n\u00a0\u00a0\u00a0\u00a0case\u00a0'NorweigianBlueParrot':\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0return\u00a0new\u00a0NorwegianBlueParrot(data)\u037e\n\u00a0\u00a0\u00a0\u00a0default:\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0return\u00a0new\u00a0Bird(data)\u037e\n\u00a0\u00a0}\n}\nclass\u00a0Bird\u00a0{\n\u00a0\u00a0constructor(data)\u00a0{\n\u00a0\u00a0\u00a0\u00a0this._name\u00a0=\u00a0data.name\u037e\n\u00a0\u00a0\u00a0\u00a0this._plumage\u00a0=\u00a0data.plumage\u037e\n\u00a0\u00a0}\n\u00a0\u00a0get\u00a0name()\u00a0\u00a0\u00a0\u00a0{return\u00a0this._name\u037e}\n\u00a0\u00a0get\u00a0plumage()\u00a0{\n\u00a0\u00a0\u00a0\u00a0return\u00a0this._plumage\u00a0||\u00a0\"average\"\u037e\n\u00a0\u00a0}\n\u00a0\u00a0get\u00a0airSpeedVelocity()\u00a0{return\u00a0null\u037e}\n}\nclass\u00a0EuropeanSwallow\u00a0extends\u00a0Bird\u00a0{\n\u00a0\u00a0get\u00a0airSpeedVelocity()\u00a0{return\u00a035\u037e}\n}\nclass\u00a0AfricanSwallow\u00a0extends\u00a0Bird\u00a0{\n\u00a0\u00a0constructor(data)\u00a0{\n\u00a0\u00a0\u00a0\u00a0super\u00a0(data)\u037e\n\u00a0\u00a0\u00a0\u00a0this._numberOfCoconuts\u00a0=\u00a0data.numberOfCoconuts\u037e\n\u00a0\u00a0}\n\u00a0\u00a0get\u00a0airSpeedVelocity()\u00a0{\n\u00a0\u00a0\u00a0\u00a0return\u00a040\u00a0\u00ad\u00a02\u00a0*\u00a0this._numberOfCoconuts\u037e\n\u00a0\u00a0}\n}\nwww.EBooksWorld.ir\n", "page": 436, "type": "text", "section": "Page 436"}
{"text": "class\u00a0NorwegianBlueParrot\u00a0extends\u00a0Bird\u00a0{\n\u00a0\u00a0constructor(data)\u00a0{\n\u00a0\u00a0\u00a0\u00a0super\u00a0(data)\u037e\n\u00a0\u00a0\u00a0\u00a0this._voltage\u00a0=\u00a0data.voltage\u037e\n\u00a0\u00a0\u00a0\u00a0this._isNailed\u00a0=\u00a0data.isNailed\u037e\n\u00a0\u00a0}\n\u00a0\u00a0get\u00a0plumage()\u00a0{\n\u00a0\u00a0\u00a0\u00a0if\u00a0(this._voltage\u00a0>\u00a0100)\u00a0return\u00a0\"scorched\"\u037e\n\u00a0\u00a0\u00a0\u00a0else\u00a0return\u00a0this._plumage\u00a0||\u00a0\"beautiful\"\u037e\n\u00a0\u00a0}\n\u00a0\u00a0get\u00a0airSpeedVelocity()\u00a0{\n\u00a0\u00a0\u00a0\u00a0return\u00a0(this._isNailed)\u00a0?\u00a00\u00a0:\u00a010\u00a0+\u00a0this._voltage\u00a0/\u00a010\u037e\n\u00a0\u00a0}\n}\nThe\u00a0system\u00a0will\u00a0shortly\u00a0be\u00a0making\u00a0a\u00a0big\u00a0difference\u00a0between\u00a0birds\u00a0tagged\u00a0in\u00a0the\u00a0wild\u00a0and\nthose\u00a0tagged\u00a0in\u00a0captivity.\u00a0That\u00a0difference\u00a0could\u00a0be\u00a0modeled\u00a0as\u00a0two\u00a0subclasses\u00a0for\u00a0Bird:\nWildBird\u00a0and\u00a0CaptiveBird.\u00a0However,\u00a0I\u00a0can\u00a0only\u00a0use\u00a0inheritance\u00a0once,\u00a0so\u00a0if\u00a0I\u00a0want\nto\u00a0use\u00a0subclasses\u00a0for\u00a0wild\u00a0versus\u00a0captive,\u00a0I\u2019ll\u00a0have\u00a0to\u00a0remove\u00a0them\u00a0for\u00a0the\u00a0species.\nWhen\u00a0several\u00a0subclasses\u00a0are\u00a0involved,\u00a0I\u2019ll\u00a0tackle\u00a0them\u00a0one\u00a0at\u00a0a\u00a0time,\u00a0starting\u00a0with\u00a0a\nsimple\u00a0one\u2014in\u00a0this\u00a0case,\u00a0EuropeanSwallow.\u00a0I\u00a0create\u00a0an\u00a0empty\u00a0delegate\u00a0class\u00a0for\u00a0the\ndelegate.\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nclass\u00a0EuropeanSwallowDelegate\u00a0{\n}\nI\u00a0don\u2019t\u00a0put\u00a0in\u00a0any\u00a0data\u00a0or\u00a0back\u00adreference\u00a0parameters\u00a0yet.\u00a0For\u00a0this\u00a0example,\u00a0I\u2019ll\u00a0introduce\nthem\u00a0as\u00a0I\u00a0need\u00a0them.\nI\u00a0need\u00a0to\u00a0decide\u00a0where\u00a0to\u00a0handle\u00a0the\u00a0initialization\u00a0of\u00a0the\u00a0delegate\u00a0field.\u00a0Here,\u00a0since\u00a0I\nhave\u00a0all\u00a0the\u00a0information\u00a0in\u00a0the\u00a0single\u00a0data\u00a0argument\u00a0to\u00a0the\u00a0constructor,\u00a0I\u00a0decide\u00a0to\u00a0do\u00a0it\nin\u00a0the\u00a0constructor.\u00a0Since\u00a0there\u00a0are\u00a0several\u00a0delegates\u00a0I\u00a0could\u00a0add,\u00a0I\u00a0make\u00a0a\u00a0function\u00a0to\nselect\u00a0the\u00a0correct\u00a0one\u00a0based\u00a0on\u00a0the\u00a0type\u00a0code\u00a0in\u00a0the\u00a0document.\nclass\u00a0Bird\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nconstructor(data)\u00a0{\nwww.EBooksWorld.ir\n", "page": 437, "type": "text", "section": "Page 437"}
{"text": "\u00a0\u00a0this._name\u00a0=\u00a0data.name\u037e\n\u00a0\u00a0this._plumage\u00a0=\u00a0data.plumage\u037e\n\u00a0\u00a0this._speciesDelegate\u00a0=\u00a0this.selectSpeciesDelegate(data)\u037e\n}\n\u00a0\u00a0selectSpeciesDelegate(data)\u00a0{\n\u00a0\u00a0\u00a0\u00a0switch(data.type)\u00a0{\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0case\u00a0'EuropeanSwallow':\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0return\u00a0new\u00a0EuropeanSwallowDelegate()\u037e\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0default:\u00a0return\u00a0null\u037e\n\u00a0\u00a0\u00a0\u00a0}\n\u00a0\u00a0}\nNow\u00a0I\u00a0have\u00a0the\u00a0structure\u00a0set\u00a0up,\u00a0I\u00a0can\u00a0apply\u00a0Move\u00a0Function\u00a0(198)\u00a0to\u00a0the\u00a0European\nswallow\u2019s\u00a0air\u00a0speed\u00a0velocity.\nclass\u00a0EuropeanSwallowDelegate\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nget\u00a0airSpeedVelocity()\u00a0{return\u00a035\u037e}\nclass\u00a0EuropeanSwallow\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nget\u00a0airSpeedVelocity()\u00a0{return\u00a0this._speciesDelegate.airSpeedVelocity\u037e}\nI\u00a0change\u00a0airSpeedVelocity\u00a0on\u00a0the\u00a0superclass\u00a0to\u00a0call\u00a0a\u00a0delegate,\u00a0if\u00a0present.\nclass\u00a0Bird\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nget\u00a0airSpeedVelocity()\u00a0{\n\u00a0\u00a0return\u00a0this._speciesDelegate\u00a0?\u00a0this._speciesDelegate.airSpeedVelocity\u00a0:\u00a0null\u037e\n}\nI\u00a0remove\u00a0the\u00a0subclass.\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nwww.EBooksWorld.ir\n", "page": 438, "type": "text", "section": "Page 438"}
{"text": "class\u00a0EuropeanSwallow\u00a0extends\u00a0Bird\u00a0{\n\u00a0\u00a0get\u00a0airSpeedVelocity()\u00a0{return\u00a0this._speciesDelegate.airSpeedVelocity\u037e}\n}\ntop\u00a0level\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0createBird(data)\u00a0{\n\u00a0\u00a0switch\u00a0(data.type)\u00a0{\n\u00a0\u00a0\u00a0\u00a0case\u00a0'EuropeanSwallow':\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0return\u00a0new\u00a0EuropeanSwallow(data)\u037e\n\u00a0\u00a0\u00a0\u00a0case\u00a0'AfricanSwallow':\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0return\u00a0new\u00a0AfricanSwallow(data)\u037e\n\u00a0\u00a0\u00a0\u00a0case\u00a0'NorweigianBlueParrot':\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0return\u00a0new\u00a0NorwegianBlueParrot(data)\u037e\n\u00a0\u00a0\u00a0\u00a0default:\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0return\u00a0new\u00a0Bird(data)\u037e\n\u00a0\u00a0}\n}\nNext\u00a0I\u2019ll\u00a0tackle\u00a0the\u00a0African\u00a0swallow.\u00a0I\u00a0create\u00a0a\u00a0class\u037e\u00a0this\u00a0time,\u00a0the\u00a0constructor\u00a0needs\u00a0the\ndata\u00a0document.\nclass\u00a0AfricanSwallowDelegate\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nconstructor(data)\u00a0{\n\u00a0\u00a0this._numberOfCoconuts\u00a0=\u00a0data.numberOfCoconuts\u037e\n}\nclass\u00a0Bird\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nselectSpeciesDelegate(data)\u00a0{\n\u00a0\u00a0switch(data.type)\u00a0{\n\u00a0\u00a0\u00a0\u00a0case\u00a0'EuropeanSwallow':\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0return\u00a0new\u00a0EuropeanSwallowDelegate()\u037e\n\u00a0\u00a0\u00a0\u00a0case\u00a0'AfricanSwallow':\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0return\u00a0new\u00a0AfricanSwallowDelegate(data)\u037e\n\u00a0\u00a0\u00a0\u00a0default:\u00a0return\u00a0null\u037e\n\u00a0\u00a0}\nwww.EBooksWorld.ir\n", "page": 439, "type": "text", "section": "Page 439"}
{"text": "}\nI\u00a0use\u00a0Move\u00a0Function\u00a0(198)\u00a0on\u00a0airSpeedVelocity.\nclass\u00a0AfricanSwallowDelegate\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nget\u00a0airSpeedVelocity()\u00a0{\n\u00a0\u00a0return\u00a040\u00a0\u00ad\u00a02\u00a0*\u00a0this._numberOfCoconuts\u037e\n}\nclass\u00a0AfricanSwallow\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nget\u00a0airSpeedVelocity()\u00a0{\n\u00a0\u00a0return\u00a0this._speciesDelegate.airSpeedVelocity\u037e\n}\nI\u00a0can\u00a0now\u00a0remove\u00a0the\u00a0African\u00a0swallow\u00a0subclass.\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nclass\u00a0AfricanSwallow\u00a0extends\u00a0Bird\u00a0{\n\u00a0\u00a0//\u00a0all\u00a0of\u00a0the\u00a0body\u00a0...\n\u00a0\u00a0}\nfunction\u00a0createBird(data)\u00a0{\n\u00a0\u00a0switch\u00a0(data.type)\u00a0{\n\u00a0\u00a0\u00a0\u00a0case\u00a0'AfricanSwallow':\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0return\u00a0new\u00a0AfricanSwallow(data)\u037e\n\u00a0\u00a0\u00a0\u00a0case\u00a0'NorweigianBlueParrot':\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0return\u00a0new\u00a0NorwegianBlueParrot(data)\u037e\n\u00a0\u00a0\u00a0\u00a0default:\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0return\u00a0new\u00a0Bird(data)\u037e\n\u00a0\u00a0}\n}\nNow\u00a0for\u00a0the\u00a0Norwegian\u00a0blue.\u00a0Creating\u00a0the\u00a0class\u00a0and\u00a0moving\u00a0the\u00a0air\u00a0speed\u00a0velocity\u00a0uses\nthe\u00a0same\u00a0steps\u00a0as\u00a0before,\u00a0so\u00a0I\u2019ll\u00a0just\u00a0show\u00a0the\u00a0result.\nclass\u00a0Bird\u2026\nwww.EBooksWorld.ir\n", "page": 440, "type": "text", "section": "Page 440"}
{"text": "Click\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nselectSpeciesDelegate(data)\u00a0{\n\u00a0\u00a0switch(data.type)\u00a0{\n\u00a0\u00a0\u00a0\u00a0case\u00a0'EuropeanSwallow':\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0return\u00a0new\u00a0EuropeanSwallowDelegate()\u037e\n\u00a0\u00a0\u00a0\u00a0case\u00a0'AfricanSwallow':\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0return\u00a0new\u00a0AfricanSwallowDelegate(data)\u037e\n\u00a0\u00a0\u00a0\u00a0case\u00a0'NorweigianBlueParrot':\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0return\u00a0new\u00a0NorwegianBlueParrotDelegate(data)\u037e\n\u00a0\u00a0\u00a0\u00a0default:\u00a0return\u00a0null\u037e\n\u00a0\u00a0}\n}\nclass\u00a0NorwegianBlueParrotDelegate\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nconstructor(data)\u00a0{\n\u00a0\u00a0this._voltage\u00a0=\u00a0data.voltage\u037e\n\u00a0\u00a0this._isNailed\u00a0=\u00a0data.isNailed\u037e\n}\nget\u00a0airSpeedVelocity()\u00a0{\n\u00a0\u00a0return\u00a0(this._isNailed)\u00a0?\u00a00\u00a0:\u00a010\u00a0+\u00a0this._voltage\u00a0/\u00a010\u037e\n}\nAll\u00a0well\u00a0and\u00a0good,\u00a0but\u00a0the\u00a0Norwegian\u00a0blue\u00a0overrides\u00a0the\u00a0plumage\u00a0property,\u00a0which\u00a0I\ndidn\u2019t\u00a0have\u00a0to\u00a0deal\u00a0with\u00a0for\u00a0the\u00a0other\u00a0cases.\u00a0The\u00a0initial\u00a0Move\u00a0Function\u00a0(198)\u00a0is\u00a0simple\nenough,\u00a0albeit\u00a0with\u00a0the\u00a0need\u00a0to\u00a0modify\u00a0the\u00a0constructor\u00a0to\u00a0put\u00a0in\u00a0a\u00a0back\u00adreference\u00a0to\u00a0the\nbird.\nclass\u00a0NorwegianBlueParrot\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nget\u00a0plumage()\u00a0{\n\u00a0\u00a0return\u00a0this._speciesDelegate.plumage\u037e\n}\nclass\u00a0NorwegianBlueParrotDelegate\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nget\u00a0plumage()\u00a0{\nwww.EBooksWorld.ir\n", "page": 441, "type": "text", "section": "Page 441"}
{"text": "\u00a0\u00a0if\u00a0(this._voltage\u00a0>\u00a0100)\u00a0return\u00a0\"scorched\"\u037e\n\u00a0\u00a0else\u00a0return\u00a0this._bird._plumage\u00a0||\u00a0\"beautiful\"\u037e\n}\nconstructor(data,\u00a0bird)\u00a0{\n\u00a0\u00a0this._bird\u00a0=\u00a0bird\u037e\n\u00a0\u00a0this._voltage\u00a0=\u00a0data.voltage\u037e\n\u00a0\u00a0this._isNailed\u00a0=\u00a0data.isNailed\u037e\n}\nclass\u00a0Bird\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nselectSpeciesDelegate(data)\u00a0{\n\u00a0\u00a0switch(data.type)\u00a0{\n\u00a0\u00a0\u00a0\u00a0case\u00a0'EuropeanSwallow':\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0return\u00a0new\u00a0EuropeanSwallowDelegate()\u037e\n\u00a0\u00a0\u00a0\u00a0case\u00a0'AfricanSwallow':\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0return\u00a0new\u00a0AfricanSwallowDelegate(data)\u037e\n\u00a0\u00a0\u00a0\u00a0case\u00a0'NorweigianBlueParrot':\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0return\u00a0new\u00a0NorwegianBlueParrotDelegate(data,\u00a0this)\u037e\n\u00a0\u00a0\u00a0\u00a0default:\u00a0return\u00a0null\u037e\n\u00a0\u00a0}\n}\nThe\u00a0tricky\u00a0step\u00a0is\u00a0how\u00a0to\u00a0remove\u00a0the\u00a0subclass\u00a0method\u00a0for\u00a0plumage.\u00a0If\u00a0I\u00a0do\nclass\u00a0Bird\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nget\u00a0plumage()\u00a0{\n\u00a0\u00a0if\u00a0(this._speciesDelegate)\n\u00a0\u00a0\u00a0\u00a0return\u00a0this._speciesDelegate.plumage\u037e\n\u00a0\u00a0else\n\u00a0\u00a0\u00a0\u00a0return\u00a0this._plumage\u00a0||\u00a0\"average\"\u037e\n}\nthen\u00a0I\u2019ll\u00a0get\u00a0a\u00a0bunch\u00a0of\u00a0errors\u00a0because\u00a0there\u00a0is\u00a0no\u00a0plumage\u00a0property\u00a0on\u00a0the\u00a0other\nspecies\u2019\u00a0delegate\u00a0classes.\nI\u00a0could\u00a0use\u00a0a\u00a0more\u00a0precise\u00a0conditional:\nclass\u00a0Bird\u2026\nwww.EBooksWorld.ir\n", "page": 442, "type": "text", "section": "Page 442"}
{"text": "Click\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nget\u00a0plumage()\u00a0{\n\u00a0\u00a0if\u00a0(this._speciesDelegate\u00a0instanceof\u00a0NorwegianBlueParrotDelegate)\n\u00a0\u00a0\u00a0\u00a0return\u00a0this._speciesDelegate.plumage\u037e\n\u00a0\u00a0else\n\u00a0\u00a0\u00a0\u00a0return\u00a0this._plumage\u00a0||\u00a0\"average\"\u037e\n}\nBut\u00a0I\u00a0hope\u00a0that\u00a0smells\u00a0as\u00a0much\u00a0of\u00a0decomposing\u00a0parrot\u00a0to\u00a0you\u00a0as\u00a0it\u00a0does\u00a0to\u00a0me.\u00a0It\u2019s\nalmost\u00a0never\u00a0a\u00a0good\u00a0idea\u00a0to\u00a0use\u00a0an\u00a0explicit\u00a0class\u00a0check\u00a0like\u00a0this.\nAnother\u00a0option\u00a0is\u00a0to\u00a0implement\u00a0the\u00a0default\u00a0case\u00a0on\u00a0the\u00a0other\u00a0delegates.\nclass\u00a0Bird\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nget\u00a0plumage()\u00a0{\n\u00a0\u00a0if\u00a0(this._speciesDelegate)\n\u00a0\u00a0\u00a0\u00a0return\u00a0this._speciesDelegate.plumage\u037e\n\u00a0\u00a0else\n\u00a0\u00a0\u00a0\u00a0return\u00a0this._plumage\u00a0||\u00a0\"average\"\u037e\n}\nclass\u00a0EuropeanSwallowDelegate\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nget\u00a0plumage()\u00a0{\n\u00a0\u00a0return\u00a0this._bird._plumage\u00a0||\u00a0\"average\"\u037e\n}\nclass\u00a0AfricanSwallowDelegate\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nget\u00a0plumage()\u00a0{\n\u00a0\u00a0return\u00a0this._bird._plumage\u00a0||\u00a0\"average\"\u037e\n}\nBut\u00a0this\u00a0duplicates\u00a0the\u00a0default\u00a0method\u00a0for\u00a0plumage.\u00a0And\u00a0if\u00a0that\u2019s\u00a0not\u00a0bad\u00a0enough,\u00a0I\u00a0also\nget\u00a0some\u00a0bonus\u00a0duplication\u00a0in\u00a0the\u00a0constructors\u00a0to\u00a0assign\u00a0the\u00a0back\u00adreference.\nwww.EBooksWorld.ir\n", "page": 443, "type": "text", "section": "Page 443"}
{"text": "The\u00a0solution\u00a0to\u00a0the\u00a0duplication\u00a0is,\u00a0naturally,\u00a0inheritance\u2014I\u00a0apply\u00a0Extract\u00a0Superclass\n(375)\u00a0to\u00a0the\u00a0species\u00a0delegates:\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nclass\u00a0SpeciesDelegate\u00a0{\n\u00a0\u00a0constructor(data,\u00a0bird)\u00a0{\n\u00a0\u00a0\u00a0\u00a0this._bird\u00a0=\u00a0bird\u037e\n\u00a0\u00a0}\n\u00a0\u00a0get\u00a0plumage()\u00a0{\n\u00a0\u00a0\u00a0\u00a0return\u00a0this._bird._plumage\u00a0||\u00a0\"average\"\u037e\n\u00a0\u00a0}\nclass\u00a0EuropeanSwallowDelegate\u00a0extends\u00a0SpeciesDelegate\u00a0{\nclass\u00a0AfricanSwallowDelegate\u00a0extends\u00a0SpeciesDelegate\u00a0{\n\u00a0\u00a0constructor(data,\u00a0bird)\u00a0{\n\u00a0\u00a0\u00a0\u00a0super(data,bird)\u037e\n\u00a0\u00a0\u00a0\u00a0this._numberOfCoconuts\u00a0=\u00a0data.numberOfCoconuts\u037e\n\u00a0\u00a0}\nclass\u00a0NorwegianBlueParrotDelegate\u00a0extends\u00a0SpeciesDelegate\u00a0{\n\u00a0\u00a0constructor(data,\u00a0bird)\u00a0{\n\u00a0\u00a0\u00a0\u00a0super(data,\u00a0bird)\u037e\n\u00a0\u00a0\u00a0\u00a0this._voltage\u00a0=\u00a0data.voltage\u037e\n\u00a0\u00a0\u00a0\u00a0this._isNailed\u00a0=\u00a0data.isNailed\u037e\n\u00a0\u00a0}\nIndeed,\u00a0now\u00a0I\u00a0have\u00a0a\u00a0superclass,\u00a0I\u00a0can\u00a0move\u00a0any\u00a0default\u00a0behavior\u00a0from\u00a0Bird\u00a0to\nSpeciesDelegate\u00a0by\u00a0ensuring\u00a0there\u2019s\u00a0always\u00a0something\u00a0in\u00a0the\u00a0speciesDelegate\nfield.\nclass\u00a0Bird\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nselectSpeciesDelegate(data)\u00a0{\n\u00a0\u00a0switch(data.type)\u00a0{\n\u00a0\u00a0\u00a0\u00a0case\u00a0'EuropeanSwallow':\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0return\u00a0new\u00a0EuropeanSwallowDelegate(data,\u00a0this)\u037e\n\u00a0\u00a0\u00a0\u00a0case\u00a0'AfricanSwallow':\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0return\u00a0new\u00a0AfricanSwallowDelegate(data,\u00a0this)\u037e\n\u00a0\u00a0\u00a0\u00a0case\u00a0'NorweigianBlueParrot':\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0return\u00a0new\u00a0NorwegianBlueParrotDelegate(data,\u00a0this)\u037e\n\u00a0\u00a0\u00a0\u00a0default:\u00a0return\u00a0new\u00a0SpeciesDelegate(data,\u00a0this)\u037e\n\u00a0\u00a0}\n}\n//\u00a0rest\u00a0of\u00a0bird's\u00a0code...\nwww.EBooksWorld.ir\n", "page": 444, "type": "text", "section": "Page 444"}
{"text": "get\u00a0plumage()\u00a0{return\u00a0this._speciesDelegate.plumage\u037e}\nget\u00a0airSpeedVelocity()\u00a0{return\u00a0this._speciesDelegate.airSpeedVelocity\u037e}\nclass\u00a0SpeciesDelegate\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nget\u00a0airSpeedVelocity()\u00a0{return\u00a0null\u037e}\nI\u00a0like\u00a0this,\u00a0as\u00a0it\u00a0simplifies\u00a0the\u00a0delegating\u00a0methods\u00a0on\u00a0Bird.\u00a0I\u00a0can\u00a0easily\u00a0see\u00a0which\nbehavior\u00a0is\u00a0delegated\u00a0to\u00a0the\u00a0species\u00a0delegate\u00a0and\u00a0which\u00a0stays\u00a0behind.\nHere\u2019s\u00a0the\u00a0final\u00a0state\u00a0of\u00a0these\u00a0classes:\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nfunction\u00a0createBird(data)\u00a0{\n\u00a0\u00a0return\u00a0new\u00a0Bird(data)\u037e\n}\nclass\u00a0Bird\u00a0{\n\u00a0\u00a0constructor(data)\u00a0{\n\u00a0\u00a0\u00a0\u00a0this._name\u00a0=\u00a0data.name\u037e\n\u00a0\u00a0\u00a0\u00a0this._plumage\u00a0=\u00a0data.plumage\u037e\n\u00a0\u00a0\u00a0\u00a0this._speciesDelegate\u00a0=\u00a0this.selectSpeciesDelegate(data)\u037e\n\u00a0\u00a0}\n\u00a0\u00a0get\u00a0name()\u00a0\u00a0\u00a0\u00a0{return\u00a0this._name\u037e}\n\u00a0\u00a0get\u00a0plumage()\u00a0{return\u00a0this._speciesDelegate.plumage\u037e}\n\u00a0\u00a0get\u00a0airSpeedVelocity()\u00a0{return\u00a0this._speciesDelegate.airSpeedVelocity\u037e}\n\u00a0\u00a0selectSpeciesDelegate(data)\u00a0{\n\u00a0\u00a0\u00a0\u00a0switch(data.type)\u00a0{\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0case\u00a0'EuropeanSwallow':\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0return\u00a0new\u00a0EuropeanSwallowDelegate(data,\u00a0this)\u037e\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0case\u00a0'AfricanSwallow':\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0return\u00a0new\u00a0AfricanSwallowDelegate(data,\u00a0this)\u037e\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0case\u00a0'NorweigianBlueParrot':\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0return\u00a0new\u00a0NorwegianBlueParrotDelegate(data,\u00a0this)\u037e\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0default:\u00a0return\u00a0new\u00a0SpeciesDelegate(data,\u00a0this)\u037e\n\u00a0\u00a0\u00a0\u00a0}\n\u00a0\u00a0}\n\u00a0\u00a0//\u00a0rest\u00a0of\u00a0bird's\u00a0code...\n}\nclass\u00a0SpeciesDelegate\u00a0{\n\u00a0\u00a0constructor(data,\u00a0bird)\u00a0{\nwww.EBooksWorld.ir\n", "page": 445, "type": "text", "section": "Page 445"}
{"text": "\u00a0\u00a0\u00a0\u00a0this._bird\u00a0=\u00a0bird\u037e\n\u00a0\u00a0}\n\u00a0\u00a0get\u00a0plumage()\u00a0{\n\u00a0\u00a0\u00a0\u00a0return\u00a0this._bird._plumage\u00a0||\u00a0\"average\"\u037e\n\u00a0\u00a0}\n\u00a0\u00a0get\u00a0airSpeedVelocity()\u00a0{return\u00a0null\u037e}\n}\nclass\u00a0EuropeanSwallowDelegate\u00a0extends\u00a0SpeciesDelegate\u00a0{\n\u00a0\u00a0get\u00a0airSpeedVelocity()\u00a0{return\u00a035\u037e}\n}\nclass\u00a0AfricanSwallowDelegate\u00a0extends\u00a0SpeciesDelegate\u00a0{\n\u00a0\u00a0constructor(data,\u00a0bird)\u00a0{\n\u00a0\u00a0\u00a0\u00a0super(data,bird)\u037e\n\u00a0\u00a0\u00a0\u00a0this._numberOfCoconuts\u00a0=\u00a0data.numberOfCoconuts\u037e\n\u00a0\u00a0}\n\u00a0\u00a0get\u00a0airSpeedVelocity()\u00a0{\n\u00a0\u00a0\u00a0\u00a0return\u00a040\u00a0\u00ad\u00a02\u00a0*\u00a0this._numberOfCoconuts\u037e\n\u00a0\u00a0}\n}\nclass\u00a0NorwegianBlueParrotDelegate\u00a0extends\u00a0SpeciesDelegate\u00a0{\n\u00a0\u00a0constructor(data,\u00a0bird)\u00a0{\n\u00a0\u00a0\u00a0\u00a0super(data,\u00a0bird)\u037e\n\u00a0\u00a0\u00a0\u00a0this._voltage\u00a0=\u00a0data.voltage\u037e\n\u00a0\u00a0\u00a0\u00a0this._isNailed\u00a0=\u00a0data.isNailed\u037e\n\u00a0\u00a0}\n\u00a0\u00a0get\u00a0airSpeedVelocity()\u00a0{\n\u00a0\u00a0\u00a0\u00a0return\u00a0(this._isNailed)\u00a0?\u00a00\u00a0:\u00a010\u00a0+\u00a0this._voltage\u00a0/\u00a010\u037e\n\u00a0\u00a0}\n\u00a0\u00a0get\u00a0plumage()\u00a0{\n\u00a0\u00a0\u00a0\u00a0if\u00a0(this._voltage\u00a0>\u00a0100)\u00a0return\u00a0\"scorched\"\u037e\n\u00a0\u00a0\u00a0\u00a0else\u00a0return\u00a0this._bird._plumage\u00a0||\u00a0\"beautiful\"\u037e\n\u00a0\u00a0}\n}\nThis\u00a0example\u00a0replaces\u00a0the\u00a0original\u00a0subclasses\u00a0with\u00a0a\u00a0delegate,\u00a0but\u00a0there\u00a0is\u00a0still\u00a0a\u00a0very\nsimilar\u00a0inheritance\u00a0structure\u00a0in\u00a0SpeciesDelegate.\u00a0Have\u00a0I\u00a0gained\u00a0anything\u00a0from\u00a0this\nrefactoring,\u00a0other\u00a0than\u00a0freeing\u00a0up\u00a0inheritance\u00a0on\u00a0Bird?\u00a0The\u00a0species\u00a0inheritance\u00a0is\u00a0now\nmore\u00a0tightly\u00a0scoped,\u00a0covering\u00a0just\u00a0the\u00a0data\u00a0and\u00a0functions\u00a0that\u00a0vary\u00a0due\u00a0to\u00a0the\u00a0species.\nAny\u00a0code\u00a0that\u2019s\u00a0the\u00a0same\u00a0for\u00a0all\u00a0species\u00a0remains\u00a0on\u00a0Bird\u00a0and\u00a0its\u00a0future\u00a0subclasses.\nI\u00a0could\u00a0apply\u00a0the\u00a0same\u00a0idea\u00a0of\u00a0creating\u00a0a\u00a0superclass\u00a0delegate\u00a0to\u00a0the\u00a0booking\u00a0example\nearlier.\u00a0This\u00a0would\u00a0allow\u00a0me\u00a0to\u00a0replace\u00a0those\u00a0methods\u00a0on\u00a0Booking\u00a0that\u00a0have\u00a0dispatch\nlogic\u00a0with\u00a0simple\u00a0calls\u00a0to\u00a0the\u00a0delegate\u00a0and\u00a0letting\u00a0its\u00a0inheritance\u00a0sort\u00a0out\u00a0the\u00a0dispatch.\nHowever,\u00a0it\u2019s\u00a0nearly\u00a0dinner\u00a0time,\u00a0so\u00a0I\u2019ll\u00a0leave\u00a0that\u00a0as\u00a0an\u00a0exercise\u00a0for\u00a0the\u00a0reader.\nwww.EBooksWorld.ir\n", "page": 446, "type": "text", "section": "Page 446"}
{"text": "These\u00a0examples\u00a0illustrate\u00a0that\u00a0the\u00a0phrase\u00a0\u201cFavor\u00a0object\u00a0composition\u00a0over\u00a0class\ninheritance\u201d\u00a0might\u00a0better\u00a0be\u00a0said\u00a0as\u00a0\u201cFavor\u00a0a\u00a0judicious\u00a0mixture\u00a0of\u00a0composition\u00a0and\ninheritance\u00a0over\u00a0either\u00a0alone\u201d\u2014but\u00a0I\u00a0fear\u00a0that\u00a0is\u00a0not\u00a0as\u00a0catchy.\nREPLACE SUPERCLASS WITH DELEGATE\nformerly:\u00a0Replace\u00a0Inheritance\u00a0with\u00a0Delegation\nMotivation\nIn\u00a0object\u00adoriented\u00a0programs,\u00a0inheritance\u00a0is\u00a0a\u00a0powerful\u00a0and\u00a0easily\u00a0available\u00a0way\u00a0to\u00a0reuse\nexisting\u00a0functionality.\u00a0I\u00a0inherit\u00a0from\u00a0some\u00a0existing\u00a0class,\u00a0then\u00a0override\u00a0and\u00a0add\nadditional\u00a0features.\u00a0But\u00a0subclassing\u00a0can\u00a0be\u00a0done\u00a0in\u00a0a\u00a0way\u00a0that\u00a0leads\u00a0to\u00a0confusion\u00a0and\ncomplication.\nOne\u00a0of\u00a0the\u00a0classic\u00a0examples\u00a0of\u00a0mis\u00adinheritance\u00a0from\u00a0the\u00a0early\u00a0days\u00a0of\u00a0objects\u00a0was\nmaking\u00a0a\u00a0stack\u00a0be\u00a0a\u00a0subclass\u00a0of\u00a0list.\u00a0The\u00a0idea\u00a0that\u00a0led\u00a0to\u00a0this\u00a0was\u00a0reusing\u00a0of\u00a0list\u2019s\u00a0data\nstorage\u00a0and\u00a0operations\u00a0to\u00a0manipulate\u00a0it.\u00a0While\u00a0it\u2019s\u00a0good\u00a0to\u00a0reuse,\u00a0this\u00a0inheritance\u00a0had\u00a0a\nproblem:\u00a0All\u00a0the\u00a0operations\u00a0of\u00a0the\u00a0list\u00a0were\u00a0present\u00a0on\u00a0the\u00a0interface\u00a0of\u00a0the\u00a0stack,\nalthough\u00a0most\u00a0of\u00a0them\u00a0were\u00a0not\u00a0applicable\u00a0to\u00a0a\u00a0stack.\u00a0A\u00a0better\u00a0approach\u00a0is\u00a0to\u00a0make\u00a0the\nlist\u00a0into\u00a0a\u00a0field\u00a0of\u00a0the\u00a0stack\u00a0and\u00a0delegate\u00a0the\u00a0necessary\u00a0operations\u00a0to\u00a0it.\nThis\u00a0is\u00a0an\u00a0example\u00a0of\u00a0one\u00a0reason\u00a0to\u00a0use\u00a0Replace\u00a0Superclass\u00a0with\u00a0Delegate\u2014if\u00a0functions\nwww.EBooksWorld.ir\n", "page": 447, "type": "text", "section": "Page 447"}
{"text": "of\u00a0the\u00a0superclass\u00a0don\u2019t\u00a0make\u00a0sense\u00a0on\u00a0the\u00a0subclass,\u00a0that\u2019s\u00a0a\u00a0sign\u00a0that\u00a0I\u00a0shouldn\u2019t\u00a0be\nusing\u00a0inheritance\u00a0to\u00a0use\u00a0the\u00a0superclass\u2019s\u00a0functionality.\nAs\u00a0well\u00a0as\u00a0using\u00a0all\u00a0the\u00a0functions\u00a0of\u00a0the\u00a0superclass,\u00a0it\u00a0should\u00a0also\u00a0be\u00a0true\u00a0that\u00a0every\ninstance\u00a0of\u00a0the\u00a0subclass\u00a0is\u00a0an\u00a0instance\u00a0of\u00a0the\u00a0superclass\u00a0and\u00a0a\u00a0valid\u00a0object\u00a0in\u00a0all\u00a0cases\nwhere\u00a0we\u2019re\u00a0using\u00a0the\u00a0superclass.\u00a0If\u00a0I\u00a0have\u00a0a\u00a0car\u00a0model\u00a0class,\u00a0with\u00a0things\u00a0like\u00a0name\u00a0and\nengine\u00a0size,\u00a0I\u00a0might\u00a0think\u00a0I\u00a0could\u00a0reuse\u00a0these\u00a0features\u00a0to\u00a0represent\u00a0a\u00a0physical\u00a0car,\nadding\u00a0functions\u00a0for\u00a0VIN\u00a0number\u00a0and\u00a0manufacturing\u00a0date.\u00a0This\u00a0is\u00a0a\u00a0common,\u00a0and\u00a0often\nsubtle,\u00a0modeling\u00a0mistake\u00a0which\u00a0I\u2019ve\u00a0called\u00a0the\u00a0type\u00adinstance\u00a0homonym\u00a0[mf\u00adtih].\nThese\u00a0are\u00a0both\u00a0examples\u00a0of\u00a0problems\u00a0leading\u00a0to\u00a0confusion\u00a0and\u00a0errors\u2014which\u00a0can\u00a0be\neasily\u00a0avoided\u00a0by\u00a0replacing\u00a0inheritance\u00a0with\u00a0delegation\u00a0to\u00a0a\u00a0separate\u00a0object.\u00a0Using\ndelegation\u00a0makes\u00a0it\u00a0clear\u00a0that\u00a0it\u00a0is\u00a0a\u00a0separate\u00a0thing\u2014one\u00a0where\u00a0only\u00a0some\u00a0of\u00a0the\nfunctions\u00a0carry\u00a0over.\nEven\u00a0in\u00a0cases\u00a0where\u00a0the\u00a0subclass\u00a0is\u00a0reasonable\u00a0modeling,\u00a0I\u00a0use\u00a0Replace\u00a0Super\u00adclass\u00a0with\nDelegate\u00a0because\u00a0the\u00a0relationship\u00a0between\u00a0a\u00a0sub\u00ad\u00a0and\u00a0superclass\u00a0is\u00a0highly\u00a0coupled,\u00a0with\nthe\u00a0subclass\u00a0easily\u00a0broken\u00a0by\u00a0changes\u00a0in\u00a0the\u00a0superclass.\u00a0The\u00a0downside\u00a0is\u00a0that\u00a0I\u00a0need\u00a0to\nwrite\u00a0a\u00a0forwarding\u00a0function\u00a0for\u00a0any\u00a0function\u00a0that\u00a0is\u00a0the\u00a0same\u00a0in\u00a0the\u00a0host\u00a0and\u00a0in\u00a0the\ndelegate\u2014but,\u00a0fortunately,\u00a0even\u00a0though\u00a0such\u00a0forwarding\u00a0functions\u00a0are\u00a0boring\u00a0to\u00a0write,\nthey\u00a0are\u00a0too\u00a0simple\u00a0to\u00a0get\u00a0wrong.\nAs\u00a0a\u00a0consequence\u00a0of\u00a0all\u00a0this,\u00a0some\u00a0people\u00a0advise\u00a0avoiding\u00a0inheritance\u00a0entirely\u2014but\u00a0I\ndon\u2019t\u00a0agree\u00a0with\u00a0that.\u00a0Provided\u00a0the\u00a0appropriate\u00a0semantic\u00a0conditions\u00a0apply\u00a0(every\nmethod\u00a0on\u00a0the\u00a0supertype\u00a0applies\u00a0to\u00a0the\u00a0subtype,\u00a0every\u00a0instance\u00a0of\u00a0the\u00a0subtype\u00a0is\u00a0an\ninstance\u00a0of\u00a0the\u00a0supertype),\u00a0inheritance\u00a0is\u00a0a\u00a0simple\u00a0and\u00a0effective\u00a0mechanism.\u00a0I\u00a0can\u00a0easily\napply\u00a0Replace\u00a0Superclass\u00a0with\u00a0Delegate\u00a0should\u00a0the\u00a0situation\u00a0change\u00a0and\u00a0inheritance\u00a0is\nno\u00a0longer\u00a0the\u00a0best\u00a0option.\u00a0So\u00a0my\u00a0advice\u00a0is\u00a0to\u00a0(mostly)\u00a0use\u00a0inheritance\u00a0first,\u00a0and\u00a0apply\nReplace\u00a0Superclass\u00a0with\u00a0Delegate\u00a0when\u00a0(and\u00a0if)\u00a0it\u00a0becomes\u00a0a\u00a0problem.\nMechanics\nCreate\u00a0a\u00a0field\u00a0in\u00a0the\u00a0subclass\u00a0that\u00a0refers\u00a0to\u00a0the\u00a0superclass\u00a0object.\u00a0Initialize\u00a0this\ndelegate\u00a0reference\u00a0to\u00a0a\u00a0new\u00a0instance.\nFor\u00a0each\u00a0element\u00a0of\u00a0the\u00a0superclass,\u00a0create\u00a0a\u00a0forwarding\u00a0function\u00a0in\u00a0the\u00a0subclass\u00a0that\nforwards\u00a0to\u00a0the\u00a0delegate\u00a0reference.\u00a0Test\u00a0after\u00a0forwarding\u00a0each\u00a0consistent\u00a0group.\nMost\u00a0of\u00a0the\u00a0time\u00a0you\u00a0can\u00a0test\u00a0after\u00a0each\u00a0function\u00a0that\u2019s\u00a0forwarded,\u00a0but,\u00a0for\u00a0example,\nget/set\u00a0pairs\u00a0can\u00a0only\u00a0be\u00a0tested\u00a0once\u00a0both\u00a0have\u00a0been\u00a0moved.\nwww.EBooksWorld.ir\n", "page": 448, "type": "text", "section": "Page 448"}
{"text": "When\u00a0all\u00a0superclass\u00a0elements\u00a0have\u00a0been\u00a0overridden\u00a0with\u00a0forwarders,\u00a0remove\u00a0the\ninheritance\u00a0link.\nExample\nI\u00a0recently\u00a0was\u00a0consulting\u00a0for\u00a0an\u00a0old\u00a0town\u2019s\u00a0library\u00a0of\u00a0ancient\u00a0scrolls.\u00a0They\u00a0keep\u00a0details\nof\u00a0their\u00a0scrolls\u00a0in\u00a0a\u00a0catalog.\u00a0Each\u00a0scroll\u00a0has\u00a0an\u00a0ID\u00a0number\u00a0and\u00a0records\u00a0its\u00a0title\u00a0and\u00a0list\u00a0of\ntags.\nclass\u00a0CatalogItem\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nconstructor(id,\u00a0title,\u00a0tags)\u00a0{\n\u00a0\u00a0this._id\u00a0=\u00a0id\u037e\n\u00a0\u00a0this._title\u00a0=\u00a0title\u037e\n\u00a0\u00a0this._tags\u00a0=\u00a0tags\u037e\n}\nget\u00a0id()\u00a0{return\u00a0this._id\u037e}\nget\u00a0title()\u00a0{return\u00a0this._title\u037e}\nhasTag(arg)\u00a0{return\u00a0this._tags.includes(arg)\u037e}\nOne\u00a0of\u00a0the\u00a0things\u00a0that\u00a0scrolls\u00a0need\u00a0is\u00a0regular\u00a0cleaning.\u00a0The\u00a0code\u00a0for\u00a0that\u00a0uses\u00a0the\u00a0catalog\nitem\u00a0and\u00a0extends\u00a0it\u00a0with\u00a0the\u00a0data\u00a0it\u00a0needs\u00a0for\u00a0cleaning.\nclass\u00a0Scroll\u00a0extends\u00a0CatalogItem\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nconstructor(id,\u00a0title,\u00a0tags,\u00a0dateLastCleaned)\u00a0{\n\u00a0\u00a0super(id,\u00a0title,\u00a0tags)\u037e\n\u00a0\u00a0this._lastCleaned\u00a0=\u00a0dateLastCleaned\u037e\n}\nneedsCleaning(targetDate)\u00a0{\n\u00a0\u00a0const\u00a0threshold\u00a0=\u00a0this.hasTag(\"revered\")\u00a0?\u00a0700\u00a0:\u00a01500\u037e\n\u00a0\u00a0return\u00a0this.daysSinceLastCleaning(targetDate)\u00a0>\u00a0threshold\u00a0\u037e\n}\ndaysSinceLastCleaning(targetDate)\u00a0{\n\u00a0\u00a0return\u00a0this._lastCleaned.until(targetDate,\u00a0ChronoUnit.DAYS)\u037e\n}\nThis\u00a0is\u00a0an\u00a0example\u00a0of\u00a0a\u00a0common\u00a0modeling\u00a0error.\u00a0There\u00a0is\u00a0a\u00a0difference\u00a0between\u00a0the\nphysical\u00a0scroll\u00a0and\u00a0the\u00a0catalog\u00a0item.\u00a0The\u00a0scroll\u00a0describing\u00a0the\u00a0treatment\u00a0for\u00a0the\nwww.EBooksWorld.ir\n", "page": 449, "type": "text", "section": "Page 449"}
{"text": "greyscale\u00a0disease\u00a0may\u00a0have\u00a0several\u00a0copies,\u00a0but\u00a0be\u00a0just\u00a0one\u00a0item\u00a0in\u00a0the\u00a0catalog.\nIt\u00a0many\u00a0situations,\u00a0I\u00a0can\u00a0get\u00a0away\u00a0with\u00a0an\u00a0error\u00a0like\u00a0this.\u00a0I\u00a0can\u00a0think\u00a0of\u00a0the\u00a0title\u00a0and\u00a0tags\nas\u00a0copies\u00a0of\u00a0data\u00a0in\u00a0the\u00a0catalog.\u00a0Should\u00a0this\u00a0data\u00a0never\u00a0change,\u00a0I\u00a0can\u00a0get\u00a0away\u00a0with\u00a0this\nrepresentation.\u00a0But\u00a0if\u00a0I\u00a0need\u00a0to\u00a0update\u00a0either,\u00a0I\u00a0must\u00a0be\u00a0careful\u00a0to\u00a0ensure\u00a0that\u00a0all\u00a0copies\nof\u00a0the\u00a0same\u00a0catalog\u00a0item\u00a0are\u00a0updated\u00a0correctly.\nEven\u00a0without\u00a0this\u00a0issue,\u00a0I\u2019d\u00a0still\u00a0want\u00a0to\u00a0change\u00a0the\u00a0relationship.\u00a0Using\u00a0catalog\u00a0item\u00a0as\u00a0a\nsuperclass\u00a0to\u00a0scroll\u00a0is\u00a0likely\u00a0to\u00a0confuse\u00a0programmers\u00a0in\u00a0the\u00a0future,\u00a0and\u00a0is\u00a0thus\u00a0a\u00a0poor\nmodel\u00a0to\u00a0work\u00a0with.\nI\u00a0begin\u00a0by\u00a0creating\u00a0a\u00a0property\u00a0in\u00a0Scroll\u00a0that\u00a0refers\u00a0to\u00a0the\u00a0catalog\u00a0item,\u00a0initializing\u00a0it\nwith\u00a0a\u00a0new\u00a0instance.\nclass\u00a0Scroll\u00a0extends\u00a0CatalogItem\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nconstructor(id,\u00a0title,\u00a0tags,\u00a0dateLastCleaned)\u00a0{\n\u00a0\u00a0super(id,\u00a0title,\u00a0tags)\u037e\n\u00a0\u00a0this._catalogItem\u00a0=\u00a0new\u00a0CatalogItem(id,\u00a0title,\u00a0tags)\u037e\n\u00a0\u00a0this._lastCleaned\u00a0=\u00a0dateLastCleaned\u037e\n}\nI\u00a0create\u00a0forwarding\u00a0methods\u00a0for\u00a0each\u00a0element\u00a0of\u00a0the\u00a0superclass\u00a0that\u00a0I\u00a0use\u00a0on\u00a0the\nsubclass.\nclass\u00a0Scroll\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nget\u00a0id()\u00a0{return\u00a0this._catalogItem.id\u037e}\nget\u00a0title()\u00a0{return\u00a0this._catalogItem.title\u037e}\nhasTag(aString)\u00a0{return\u00a0this._catalogItem.hasTag(aString)\u037e}\nI\u00a0remove\u00a0the\u00a0inheritance\u00a0link\u00a0to\u00a0the\u00a0catalog\u00a0item.\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nclass\u00a0Scroll\u00a0extends\u00a0CatalogItem{\n\u00a0\u00a0constructor(id,\u00a0title,\u00a0tags,\u00a0dateLastCleaned)\u00a0{\n\u00a0\u00a0\u00a0\u00a0super(id,\u00a0title,\u00a0tags)\u037e\n\u00a0\u00a0\u00a0\u00a0this._catalogItem\u00a0=\u00a0new\u00a0CatalogItem(id,\u00a0title,\u00a0tags)\u037e\nwww.EBooksWorld.ir\n", "page": 450, "type": "text", "section": "Page 450"}
{"text": "\u00a0\u00a0\u00a0\u00a0this._lastCleaned\u00a0=\u00a0dateLastCleaned\u037e\n\u00a0\u00a0}\nBreaking\u00a0the\u00a0inheritance\u00a0link\u00a0finishes\u00a0the\u00a0basic\u00a0Replace\u00a0Superclass\u00a0with\u00a0Delegate\nrefactoring,\u00a0but\u00a0there\u00a0is\u00a0something\u00a0more\u00a0I\u00a0need\u00a0to\u00a0do\u00a0in\u00a0this\u00a0case.\nThe\u00a0refactoring\u00a0shifts\u00a0the\u00a0role\u00a0of\u00a0the\u00a0catalog\u00a0item\u00a0to\u00a0that\u00a0of\u00a0a\u00a0component\u00a0of\u00a0scroll\u037e\u00a0each\nscroll\u00a0contains\u00a0a\u00a0unique\u00a0instance\u00a0of\u00a0a\u00a0catalog\u00a0item.\u00a0In\u00a0many\u00a0cases\u00a0where\u00a0I\u00a0do\u00a0this\nrefactoring,\u00a0this\u00a0is\u00a0enough.\u00a0However,\u00a0in\u00a0this\u00a0situation\u00a0a\u00a0better\u00a0model\u00a0is\u00a0to\u00a0link\u00a0the\ngreyscale\u00a0catalog\u00a0item\u00a0to\u00a0the\u00a0six\u00a0scrolls\u00a0in\u00a0the\u00a0library\u00a0that\u00a0are\u00a0copies\u00a0of\u00a0that\u00a0writing.\nDoing\u00a0this\u00a0is,\u00a0essentially,\u00a0Change\u00a0Value\u00a0to\u00a0Reference\u00a0(256).\nThere\u2019s\u00a0a\u00a0problem\u00a0that\u00a0I\u00a0have\u00a0to\u00a0fix,\u00a0however,\u00a0before\u00a0I\u00a0use\u00a0Change\u00a0Value\u00a0to\u00a0Reference\n(256).\u00a0In\u00a0the\u00a0original\u00a0inheritance\u00a0structure,\u00a0the\u00a0scroll\u00a0used\u00a0the\u00a0catalog\u00a0item\u2019s\u00a0ID\u00a0field\u00a0to\nstore\u00a0its\u00a0ID.\u00a0But\u00a0if\u00a0I\u00a0treat\u00a0the\u00a0catalog\u00a0item\u00a0as\u00a0a\u00a0reference,\u00a0it\u00a0needs\u00a0to\u00a0use\u00a0that\u00a0ID\u00a0for\u00a0the\ncatalog\u00a0item\u00a0ID\u00a0rather\u00a0than\u00a0the\u00a0scroll\u00a0ID.\u00a0This\u00a0means\u00a0I\u00a0need\u00a0to\u00a0create\u00a0an\u00a0ID\u00a0field\u00a0on\nscroll\u00a0and\u00a0use\u00a0that\u00a0instead\u00a0of\u00a0one\u00a0in\u00a0catalog\u00a0item.\u00a0It\u2019s\u00a0a\u00a0sort\u00adof\u00a0move,\u00a0sort\u00adof\u00a0split.\nclass\u00a0Scroll\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nconstructor(id,\u00a0title,\u00a0tags,\u00a0dateLastCleaned)\u00a0{\n\u00a0\u00a0this._id\u00a0=\u00a0id\u037e\n\u00a0\u00a0this._catalogItem\u00a0=\u00a0new\u00a0CatalogItem(null,\u00a0title,\u00a0tags)\u037e\n\u00a0\u00a0this._lastCleaned\u00a0=\u00a0dateLastCleaned\u037e\n}\nget\u00a0id()\u00a0{return\u00a0this._id\u037e}\nCreating\u00a0a\u00a0catalog\u00a0item\u00a0with\u00a0a\u00a0null\u00a0ID\u00a0would\u00a0usually\u00a0raise\u00a0red\u00a0flags\u00a0and\u00a0cause\u00a0alarms\u00a0to\nsound.\u00a0But\u00a0that\u2019s\u00a0just\u00a0temporary\u00a0while\u00a0I\u00a0get\u00a0things\u00a0into\u00a0shape.\u00a0Once\u00a0I\u2019ve\u00a0done\u00a0that,\u00a0the\nscrolls\u00a0will\u00a0refer\u00a0to\u00a0a\u00a0shared\u00a0catalog\u00a0item\u00a0with\u00a0its\u00a0proper\u00a0ID.\nCurrently\u00a0the\u00a0scrolls\u00a0are\u00a0loaded\u00a0as\u00a0part\u00a0of\u00a0a\u00a0load\u00a0routine.\nload\u00a0routine\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nconst\u00a0scrolls\u00a0=\u00a0aDocument\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0.map(record\u00a0=>\u00a0new\u00a0Scroll(record.id,\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0record.catalogData.title,\nwww.EBooksWorld.ir\n", "page": 451, "type": "text", "section": "Page 451"}
{"text": "\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0record.catalogData.tags,\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0LocalDate.parse(record.lastCleaned)))\u037e\nThe\u00a0first\u00a0step\u00a0in\u00a0Change\u00a0Value\u00a0to\u00a0Reference\u00a0(256)\u00a0is\u00a0finding\u00a0or\u00a0creating\u00a0a\u00a0repository.\u00a0I\nfind\u00a0there\u00a0is\u00a0a\u00a0repository\u00a0that\u00a0I\u00a0can\u00a0easily\u00a0import\u00a0into\u00a0the\u00a0load\u00a0routine.\u00a0The\u00a0repository\nsupplies\u00a0catalog\u00a0items\u00a0indexed\u00a0by\u00a0an\u00a0ID.\u00a0My\u00a0next\u00a0task\u00a0is\u00a0to\u00a0see\u00a0how\u00a0to\u00a0get\u00a0that\u00a0ID\u00a0into\nthe\u00a0constructor\u00a0of\u00a0the\u00a0scroll.\u00a0Fortunately,\u00a0it\u2019s\u00a0present\u00a0in\u00a0the\u00a0input\u00a0data\u00a0and\u00a0was\u00a0being\nignored\u00a0as\u00a0it\u00a0wasn\u2019t\u00a0useful\u00a0when\u00a0using\u00a0inheritance.\u00a0With\u00a0that\u00a0sorted\u00a0out,\u00a0I\u00a0can\u00a0now\u00a0use\nChange\u00a0Function\u00a0Declaration\u00a0(124)\u00a0to\u00a0add\u00a0both\u00a0the\u00a0catalog\u00a0and\u00a0the\u00a0catalog\u00a0item\u2019s\u00a0ID\u00a0to\nthe\u00a0constructor\u00a0parameters.\nload\u00a0routine\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nconst\u00a0scrolls\u00a0=\u00a0aDocument\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0.map(record\u00a0=>\u00a0new\u00a0Scroll(record.id,\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0record.catalogData.title,\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0record.catalogData.tags,\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0LocalDate.parse(record.lastCleaned),\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0record.catalogData.id,\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0catalog))\u037e\nclass\u00a0Scroll\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nconstructor(id,\u00a0title,\u00a0tags,\u00a0dateLastCleaned,\u00a0catalogID,\u00a0catalog)\u00a0{\n\u00a0\u00a0this._id\u00a0=\u00a0id\u037e\n\u00a0\u00a0this._catalogItem\u00a0=\u00a0new\u00a0CatalogItem(null,\u00a0title,\u00a0tags)\u037e\n\u00a0\u00a0this._lastCleaned\u00a0=\u00a0dateLastCleaned\u037e\n}\nI\u00a0now\u00a0modify\u00a0the\u00a0constructor\u00a0to\u00a0use\u00a0the\u00a0catalog\u00a0ID\u00a0to\u00a0look\u00a0up\u00a0the\u00a0catalog\u00a0item\u00a0and\u00a0use\u00a0it\ninstead\u00a0of\u00a0creating\u00a0a\u00a0new\u00a0one.\nclass\u00a0Scroll\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nconstructor(id,\u00a0title,\u00a0tags,\u00a0dateLastCleaned,\u00a0catalogID,\u00a0catalog)\u00a0{\n\u00a0\u00a0this._id\u00a0=\u00a0id\u037e\n\u00a0\u00a0this._catalogItem\u00a0=\u00a0catalog.get(catalogID)\u037e\nwww.EBooksWorld.ir\n", "page": 452, "type": "text", "section": "Page 452"}
{"text": "\u00a0\u00a0this._lastCleaned\u00a0=\u00a0dateLastCleaned\u037e\n}\nI\u00a0no\u00a0longer\u00a0need\u00a0the\u00a0title\u00a0and\u00a0tags\u00a0passed\u00a0into\u00a0the\u00a0constructor,\u00a0so\u00a0I\u00a0use\u00a0Change\nFunction\u00a0Declaration\u00a0(124)\u00a0to\u00a0remove\u00a0them.\nload\u00a0routine\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nconst\u00a0scrolls\u00a0=\u00a0aDocument\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0.map(record\u00a0=>\u00a0new\u00a0Scroll(record.id,\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0record.catalogData.title,\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0record.catalogData.tags,\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0LocalDate.parse(record.lastCleaned),\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0record.catalogData.id,\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0catalog))\u037e\nclass\u00a0Scroll\u2026\nClick\u00a0here\u00a0to\u00a0view\u00a0code\u00a0image\nconstructor(id,\u00a0title,\u00a0tags,\u00a0dateLastCleaned,\u00a0catalogID,\u00a0catalog)\u00a0{\n\u00a0\u00a0this._id\u00a0=\u00a0id\u037e\n\u00a0\u00a0this._catalogItem\u00a0=\u00a0catalog.get(catalogID)\u037e\n\u00a0\u00a0this._lastCleaned\u00a0=\u00a0dateLastCleaned\u037e\n}\nwww.EBooksWorld.ir\n", "page": 453, "type": "text", "section": "Page 453"}
{"text": "www.EBooksWorld.ir\n", "page": 454, "type": "text", "section": "Page 454"}
{"text": "www.EBooksWorld.ir\n", "page": 455, "type": "text", "section": "Page 455"}
