TCSS 360 C: Software Development & Quality 
Assurance Techniques [Winter 2017]  
Institute of Technology, UW-Tacoma
1/23/2017
Slides by Wes J. Lloyd
L8.1
Software Design and
SOLID Principles
Wes J. Lloyd
Institute of Technology
University of Washington - Tacoma
TCSS 360: SOFTWARE DEVELOPMENT 
AND QUALITY ASSURANCE
SessionMgr
SessionMgr
Database
Database
read_from_db()
store_in_db()
read_from_db()
store_in_db()
SessionMgr
SessionMgr
get_session()
store_session()
get_session()
store_session()
«interface»
SessionStore
«interface»
SessionStore
Database
Database
� From chapter 11: Engineering SaaS
�SOLID Design Principles
�Design Patterns
�Software Metrics
February 1, 2017
TCSS360: Software Development and Quality Assurance [Winter 2017]
Institute of Technology, University of Washington - Tacoma
L8.2
OBJECTIVES
� Single Responsibility
� A class should have one and only one reason to change
� Open/Closed
� Classes should be open for extension but closed for modification
� Liskov Substitution
� Substituting a subclass for a class should preserve correct program 
behavior
� Interface Segregation
� No client should depend on methods it does not use
� Injecting Dependencies
� Collaborating classes who implementation may vary at runtime 
should depend on an intermediate “injected” dependency
February 1, 2017
TCSS360: Software Development and Quality Assurance [Winter 2017]
Institute of Technology, University of Washington - Tacoma
L8.3
SOLID DESIGN GUIDELINES
� A class should have one and only one responsibility
� Example: class named “Reviewers”  in CoffeeFinder which 
defines information about users who review coffee shops
� A “sign-on” operation could be added to “Reviewers” 
to enable a reviewer to log in 
� This does not separate responsibility!
� Single Responsibility:
Use a “Sessions” class
� Decouples the design of logging-in from the Reviewers Class 
� What if the authentication strategy changes?
� Reviewers class would need to change
February 1, 2017
TCSS360: Software Development and Quality Assurance [Winter 2017]
Institute of Technology, University of Washington - Tacoma
L8.4
SINGLE RESPONSIBILITY PRINCIPLE
� “Sign-on” operation added to “Reviewers” Class
� How do other classes of users sign-on?
� Does each user class implement their own?
� Decouple key features/functions into reusable classes
� MVC: Controllers
� Each controller provides business logic for system components
� Components
� ReviewerController: User who contributes coffee shop reviews
� UserController: General system user
� AdminController: Admin user that performs DB maintenance
February 1, 2017
TCSS360: Software Development and Quality Assurance [Winter 2017]
Institute of Technology, University of Washington - Tacoma
L8.5
SINGLE RESPONSIBILITY - 2
� Classes should be: open for extension, 
but closed for modification
� Extending a class shouldn’t require modifying existing 
code
� Case statement code smell:
� Factory pattern
� Template pattern
� Strategy pattern
February 1, 2017
TCSS360: Software Development and Quality Assurance [Winter 2017]
Institute of Technology, University of Washington - Tacoma
L8.6
OPEN/CLOSED PRINCIPLE (OCP)
Class Report
def output
formatter = 
case @format
when :html
HtmlFormatter.new(self)
when :pdf
PdfFormatted.new(self)
# . . . Etc
end
end
end  

TCSS 360 C: Software Development & Quality 
Assurance Techniques [Winter 2017]  
Institute of Technology, UW-Tacoma
1/23/2017
Slides by Wes J. Lloyd
L8.2
� Class subtypes can substitute for base types
� Current formulation attributed to (Turing Award winner) 
Barbara Liskov
Type/subtype != Class/subclass
All of T’s subtypes should preserve T’s 
contract…
February 1, 2017
TCSS360: Software Development and Quality Assurance [Winter 2017]
Institute of Technology, University of Washington - Tacoma
L8.7
LISKOV SUBSTITUTION PRINCIPLE (LSP)
“A method that works on an instance of 
type T, should also work on any 
subtype of T”
� Clients should not be forced to depend on methods 
they do not use…
� Split large interfaces into smaller, more specific ones
� ISP reduces coupling
� High code coupling is 
correlates with higher
software maintenance
costs
� Code is harder to modify,
refactor, extend
February 1, 2017
TCSS360: Software Development and Quality Assurance [Winter 2017]
Institute of Technology, University of Washington - Tacoma
L8.8
INTERFACE SEGREGATION PRINCIPLE (ISP)
� Coupling measures dependencies between 
subsystems
� High coupling: changes to one subsystem will have 
high impact on the other subsystem – BAD!!
� Require change of model, massive compilation
� Low coupling: change in one subsystem does not 
affect any other subsystem - - GOOD!!
February 1, 2017
TCSS360: Software Development and Quality Assurance [Winter 2017]
Institute of Technology, University of Washington - Tacoma
L8.9
ISP: COUPLING SUMMARY
� Also called dependency injection…
� If two classes depend on each other, but their 
implementations may change, it is better if they depend on an 
abstract interface that is “injected” dynamically
� Enables interface to change with changing original class
� Code is not statically bound to the external dependency
February 1, 2017
TCSS360: Software Development and Quality Assurance [Winter 2017]
Institute of Technology, University of Washington - Tacoma
L8.10
DEPENDENCY INVERSION PRINCIPLE (DIP)
� Example: one class (user code), makes use of a 3rd party 
library or framework (e.g. logging API)
� Without dependency injection, the user class is dependent 
(coupled) to the 3rd party library or framework
� “Coupling” becomes pandemic throughout the code
� It’s everywhere…
� If the 3rd party library goes defunct (company or group 
disbands), program code is now dependent on an unsupported 
library
� Solution: Inject an abstract logging interface 
(which a 3rd party library or framework implements)
February 1, 2017
TCSS360: Software Development and Quality Assurance [Winter 2017]
Institute of Technology, University of Washington - Tacoma
L8.11
DIP: EXAMPLE
� Traditional coupling to logging class (API)
� Program must have access to a specific 3rd party library
February 1, 2017
TCSS360: Software Development and Quality Assurance [Winter 2017]
Institute of Technology, University of Washington - Tacoma
L8.12
DIP: JAVA EXAMPLE
package com.example.e4.rcp.todo.parts;
import java.util.logging.Logger;
public class MyClass {
private final static Logger logger;
public MyClass(Logger logger) {
this.logger = logger;
// write an info log message
logger.info("This is a log message.")
}
}

TCSS 360 C: Software Development & Quality 
Assurance Techniques [Winter 2017]  
Institute of Technology, UW-Tacoma
1/23/2017
Slides by Wes J. Lloyd
L8.3
� Using Java annotations to inject to dependent logger
� Enables use of “mock objects” for testing
� Can inject a “mock object” of a library not yet available
� Another developer may be completing the code
� Mock object implements generic interface 
February 1, 2017
TCSS360: Software Development and Quality Assurance [Winter 2017]
Institute of Technology, University of Washington - Tacoma
L8.13
DIP: JAVA EXAMPLE - 2
public class MyPart {
@Inject private Logger logger;
// inject class for database access
@Inject private DatabaseAccessClass dao;
@Inject
public void createControls(Composite parent) {
logger.info("UI will start to build");
Label label = new Label(parent, SWT.NONE);
label.setText("Eclipse 4");
Text text = new Text(parent, SWT.NONE);
text.setText(dao.getNumber());
}
}
� Annotation location – where the dependency is injected
� Constructor of the class (construction injection)
� Field variable (field injection)
� Parameters of a method (method injection)
� Dependency injection occurs 
in same order: constructor, 
fields, method parameters
� Frameworks exist to assist 
native dependency injection 
� AspectJ
Aspect Oriented Programming
February 1, 2017
TCSS360: Software Development and Quality Assurance [Winter 2017]
Institute of Technology, University of Washington - Tacoma
L8.14
DIP: JAVA ANNOTATIONS
� Language extension for dynamic dependency injection (AspectJ)
� Less coupling that with Java annotations (interface)
� Programming paradigm to increase modularity by separating cross-
cutting concerns. 
� Behavior is declared into “advices”, similar to a classes - they 
define behavior (e.g. logging) without modifying main program.  
� Pointcut specifications define where advices are to be 
automatically “weaved” into the main program…  
� Example pointcut: log all function calls when the function's name 
begins with 'set'. 
� Behaviors not central to the business logic (such as logging) can be 
added to a program without changing or cluttering main program
� AOP forms the basis for aspect-oriented software development.
February 1, 2017
TCSS360: Software Development and Quality Assurance [Winter 2017]
Institute of Technology, University of Washington - Tacoma
L8.15
DIP: ASPECT ORIENTED PROGRAMMING
February 1, 2017
TCSS360: Software Development and Quality Assurance [Winter 2017]
Institute of Technology, University of Washington - Tacoma
L8.16
COUPLING LEVELS
� Content: one module relies on internal 
workings or data of another.  One class reads/depends on
another internal variables
� Common: two modules share global data; all modules using
the global data are impacted by a change
� External: two modules share an externally imposed data
format, communication protocol, device interface
� Control: one module controls the flow of another by passing
it information on what to do
� Stamp: modules share a common data structure, though may 
only sparsely use some of its fields
� Data: modules share data through parameters passing
� Message: modules communicate through message passing
code not explicitly coupled, messages come through channels
AspectJ (functionality injected at joinpoints)
Java annotations (interface coupling)
� Alternate solution to dependency inversion 
� Define an “Adapter” class
� Serves to convert an existing API into one that’s 
compatible with an existing caller
February 1, 2017
TCSS360: Software Development and Quality Assurance [Winter 2017]
Institute of Technology, University of Washington - Tacoma
L8.17
DIP: ADAPTER PATTERN
February 1, 2017
TCSS360: Software Development and Quality Assurance [Winter 2017]
Institute of Technology, University of Washington - Tacoma
L8.18
DIP: ADAPTER PATTERN
public interface MediaPlayer {
public void play(String audioType, String fileName);
}
public interface AdvancedMediaPlayer {
public void playVlc(String fileName);
public void playMp4(String fileName);
}
public class VlcPlayer implements AdvancedMediaPlayer ... {}
public class MediaAdapter implements MediaPlayer {
AdvancedMediaPlayer advancedMusicPlayer;
public MediaAdapter(String audioType){
if(audioType.equalsIgnoreCase("vlc") ){
advancedMusicPlayer = new VlcPlayer();
}else if (audioType.equalsIgnoreCase("mp4")){
advancedMusicPlayer = new Mp4Player();
}
}
@Override
public void play(String audioType, String fileName) {
if(audioType.equalsIgnoreCase("vlc")){
advancedMusicPlayer.playVlc(fileName);
}
else if(audioType.equalsIgnoreCase("mp4")){
advancedMusicPlayer.playMp4(fileName);
}
}
}
Adapter
Class
Adapter pattern:
Supports adding new media player features
without changing dependent code…

TCSS 360 C: Software Development & Quality 
Assurance Techniques [Winter 2017]  
Institute of Technology, UW-Tacoma
1/23/2017
Slides by Wes J. Lloyd
L8.4
� Single Responsibility
� A class should have one and only one reason to change
� Open/Closed
� Classes should be open for extension but closed for modification
� Liskov Substitution
� Substituting a subclass for a class should preserve correct program 
behavior
� Interface Segregation
� No client should depend on methods it does not use
� Injecting Dependencies
� Collaborating classes who implementation may vary at runtime 
should depend on an intermediate “injected” dependency
February 1, 2017
TCSS360: Software Development and Quality Assurance [Winter 2017]
Institute of Technology, University of Washington - Tacoma
L8.19
SOLID DESIGN GUIDELINES
� Postgresql database persistence, heroku…
� http://faculty.washington.edu/wlloyd/courses/tcss360/tutori
als/TCSS360_w2017_Tutorial_3.pdf
February 1, 2017
TCSS360: Software Development and Quality Assurance [Winter 2017]
Institute of Technology, University of Washington - Tacoma
L8.20
TUTORIAL #3
QUESTIONS
February 1, 2017
TCSS360: Software Development and Quality Assurance [Winter 2017]
Institute of Technology, University of Washington - Tacoma
L23.21

